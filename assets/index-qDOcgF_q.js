var fwe=Object.defineProperty;var hwe=(t,e,n)=>e in t?fwe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>hwe(t,typeof e!="symbol"?e+"":e,n);function mte(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ru(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}),n}var IR={exports:{}},Ny={},TR={exports:{}},Gn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u9;function pwe(){if(u9)return Gn;u9=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function f(q){return q===null||typeof q!="object"?null:(q=d&&q[d]||q["@@iterator"],typeof q=="function"?q:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function m(q,X,Z){this.props=q,this.context=X,this.refs=y,this.updater=Z||h}m.prototype.isReactComponent={},m.prototype.setState=function(q,X){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,X,"setState")},m.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function S(){}S.prototype=m.prototype;function x(q,X,Z){this.props=q,this.context=X,this.refs=y,this.updater=Z||h}var C=x.prototype=new S;C.constructor=x,g(C,m.prototype),C.isPureReactComponent=!0;var E=Array.isArray,P=Object.prototype.hasOwnProperty,I={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function M(q,X,Z){var Y,G={},J=null,ne=null;if(X!=null)for(Y in X.ref!==void 0&&(ne=X.ref),X.key!==void 0&&(J=""+X.key),X)P.call(X,Y)&&!T.hasOwnProperty(Y)&&(G[Y]=X[Y]);var ee=arguments.length-2;if(ee===1)G.children=Z;else if(1<ee){for(var re=Array(ee),le=0;le<ee;le++)re[le]=arguments[le+2];G.children=re}if(q&&q.defaultProps)for(Y in ee=q.defaultProps,ee)G[Y]===void 0&&(G[Y]=ee[Y]);return{$$typeof:t,type:q,key:J,ref:ne,props:G,_owner:I.current}}function R(q,X){return{$$typeof:t,type:q.type,key:X,ref:q.ref,props:q.props,_owner:q._owner}}function A(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function j(q){var X={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Z){return X[Z]})}var N=/\/+/g;function k(q,X){return typeof q=="object"&&q!==null&&q.key!=null?j(""+q.key):X.toString(36)}function D(q,X,Z,Y,G){var J=typeof q;(J==="undefined"||J==="boolean")&&(q=null);var ne=!1;if(q===null)ne=!0;else switch(J){case"string":case"number":ne=!0;break;case"object":switch(q.$$typeof){case t:case e:ne=!0}}if(ne)return ne=q,G=G(ne),q=Y===""?"."+k(ne,0):Y,E(G)?(Z="",q!=null&&(Z=q.replace(N,"$&/")+"/"),D(G,X,Z,"",function(le){return le})):G!=null&&(A(G)&&(G=R(G,Z+(!G.key||ne&&ne.key===G.key?"":(""+G.key).replace(N,"$&/")+"/")+q)),X.push(G)),1;if(ne=0,Y=Y===""?".":Y+":",E(q))for(var ee=0;ee<q.length;ee++){J=q[ee];var re=Y+k(J,ee);ne+=D(J,X,Z,re,G)}else if(re=f(q),typeof re=="function")for(q=re.call(q),ee=0;!(J=q.next()).done;)J=J.value,re=Y+k(J,ee++),ne+=D(J,X,Z,re,G);else if(J==="object")throw X=String(q),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ne}function F(q,X,Z){if(q==null)return q;var Y=[],G=0;return D(q,Y,"","",function(J){return X.call(Z,J,G++)}),Y}function H(q){if(q._status===-1){var X=q._result;X=X(),X.then(function(Z){(q._status===0||q._status===-1)&&(q._status=1,q._result=Z)},function(Z){(q._status===0||q._status===-1)&&(q._status=2,q._result=Z)}),q._status===-1&&(q._status=0,q._result=X)}if(q._status===1)return q._result.default;throw q._result}var U={current:null},B={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:B,ReactCurrentOwner:I};function K(){throw Error("act(...) is not supported in production builds of React.")}return Gn.Children={map:F,forEach:function(q,X,Z){F(q,function(){X.apply(this,arguments)},Z)},count:function(q){var X=0;return F(q,function(){X++}),X},toArray:function(q){return F(q,function(X){return X})||[]},only:function(q){if(!A(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Gn.Component=m,Gn.Fragment=n,Gn.Profiler=o,Gn.PureComponent=x,Gn.StrictMode=r,Gn.Suspense=l,Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Gn.act=K,Gn.cloneElement=function(q,X,Z){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var Y=g({},q.props),G=q.key,J=q.ref,ne=q._owner;if(X!=null){if(X.ref!==void 0&&(J=X.ref,ne=I.current),X.key!==void 0&&(G=""+X.key),q.type&&q.type.defaultProps)var ee=q.type.defaultProps;for(re in X)P.call(X,re)&&!T.hasOwnProperty(re)&&(Y[re]=X[re]===void 0&&ee!==void 0?ee[re]:X[re])}var re=arguments.length-2;if(re===1)Y.children=Z;else if(1<re){ee=Array(re);for(var le=0;le<re;le++)ee[le]=arguments[le+2];Y.children=ee}return{$$typeof:t,type:q.type,key:G,ref:J,props:Y,_owner:ne}},Gn.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:i,_context:q},q.Consumer=q},Gn.createElement=M,Gn.createFactory=function(q){var X=M.bind(null,q);return X.type=q,X},Gn.createRef=function(){return{current:null}},Gn.forwardRef=function(q){return{$$typeof:a,render:q}},Gn.isValidElement=A,Gn.lazy=function(q){return{$$typeof:u,_payload:{_status:-1,_result:q},_init:H}},Gn.memo=function(q,X){return{$$typeof:c,type:q,compare:X===void 0?null:X}},Gn.startTransition=function(q){var X=B.transition;B.transition={};try{q()}finally{B.transition=X}},Gn.unstable_act=K,Gn.useCallback=function(q,X){return U.current.useCallback(q,X)},Gn.useContext=function(q){return U.current.useContext(q)},Gn.useDebugValue=function(){},Gn.useDeferredValue=function(q){return U.current.useDeferredValue(q)},Gn.useEffect=function(q,X){return U.current.useEffect(q,X)},Gn.useId=function(){return U.current.useId()},Gn.useImperativeHandle=function(q,X,Z){return U.current.useImperativeHandle(q,X,Z)},Gn.useInsertionEffect=function(q,X){return U.current.useInsertionEffect(q,X)},Gn.useLayoutEffect=function(q,X){return U.current.useLayoutEffect(q,X)},Gn.useMemo=function(q,X){return U.current.useMemo(q,X)},Gn.useReducer=function(q,X,Z){return U.current.useReducer(q,X,Z)},Gn.useRef=function(q){return U.current.useRef(q)},Gn.useState=function(q){return U.current.useState(q)},Gn.useSyncExternalStore=function(q,X,Z){return U.current.useSyncExternalStore(q,X,Z)},Gn.useTransition=function(){return U.current.useTransition()},Gn.version="18.3.1",Gn}var d9;function Gt(){return d9||(d9=1,TR.exports=pwe()),TR.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f9;function gwe(){if(f9)return Ny;f9=1;var t=Gt(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,c){var u,d={},f=null,h=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(u in l)r.call(l,u)&&!i.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:a,key:f,ref:h,props:d,_owner:o.current}}return Ny.Fragment=n,Ny.jsx=s,Ny.jsxs=s,Ny}var h9;function mwe(){return h9||(h9=1,IR.exports=gwe()),IR.exports}var w=mwe(),v=Gt();const ce=jc(v),jv=mte({__proto__:null,default:ce},[v]);var U1={},MR={exports:{}},la={},OR={exports:{}},RR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p9;function vwe(){return p9||(p9=1,function(t){function e(B,W){var K=B.length;B.push(W);e:for(;0<K;){var q=K-1>>>1,X=B[q];if(0<o(X,W))B[q]=W,B[K]=X,K=q;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],K=B.pop();if(K!==W){B[0]=K;e:for(var q=0,X=B.length,Z=X>>>1;q<Z;){var Y=2*(q+1)-1,G=B[Y],J=Y+1,ne=B[J];if(0>o(G,K))J<X&&0>o(ne,G)?(B[q]=ne,B[J]=K,q=J):(B[q]=G,B[Y]=K,q=Y);else if(J<X&&0>o(ne,K))B[q]=ne,B[J]=K,q=J;else break e}}return W}function o(B,W){var K=B.sortIndex-W.sortIndex;return K!==0?K:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,g=!1,y=!1,m=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(B){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=B)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(B){if(y=!1,C(B),!g)if(n(l)!==null)g=!0,H(P);else{var W=n(c);W!==null&&U(E,W.startTime-B)}}function P(B,W){g=!1,y&&(y=!1,S(M),M=-1),h=!0;var K=f;try{for(C(W),d=n(l);d!==null&&(!(d.expirationTime>W)||B&&!j());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var X=q(d.expirationTime<=W);W=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(l)&&r(l),C(W)}else r(l);d=n(l)}if(d!==null)var Z=!0;else{var Y=n(c);Y!==null&&U(E,Y.startTime-W),Z=!1}return Z}finally{d=null,f=K,h=!1}}var I=!1,T=null,M=-1,R=5,A=-1;function j(){return!(t.unstable_now()-A<R)}function N(){if(T!==null){var B=t.unstable_now();A=B;var W=!0;try{W=T(!0,B)}finally{W?k():(I=!1,T=null)}}else I=!1}var k;if(typeof x=="function")k=function(){x(N)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=N,k=function(){F.postMessage(null)}}else k=function(){m(N,0)};function H(B){T=B,I||(I=!0,k())}function U(B,W){M=m(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,H(P))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var K=f;f=W;try{return B()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=f;f=B;try{return W()}finally{f=K}},t.unstable_scheduleCallback=function(B,W,K){var q=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?q+K:q):K=q,B){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=K+X,B={id:u++,callback:W,priorityLevel:B,startTime:K,expirationTime:X,sortIndex:-1},K>q?(B.sortIndex=K,e(c,B),n(l)===null&&B===n(c)&&(y?(S(M),M=-1):y=!0,U(E,K-q))):(B.sortIndex=X,e(l,B),g||h||(g=!0,H(P))),B},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(B){var W=f;return function(){var K=f;f=W;try{return B.apply(this,arguments)}finally{f=K}}}}(RR)),RR}var g9;function ywe(){return g9||(g9=1,OR.exports=vwe()),OR.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m9;function bwe(){if(m9)return la;m9=1;var t=Gt(),e=ywe();function n(p){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+p,_=1;_<arguments.length;_++)b+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function i(p,b){s(p,b),s(p+"Capture",b)}function s(p,b){for(o[p]=b,p=0;p<b.length;p++)r.add(b[p])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function f(p){return l.call(d,p)?!0:l.call(u,p)?!1:c.test(p)?d[p]=!0:(u[p]=!0,!1)}function h(p,b,_,O){if(_!==null&&_.type===0)return!1;switch(typeof b){case"function":case"symbol":return!0;case"boolean":return O?!1:_!==null?!_.acceptsBooleans:(p=p.toLowerCase().slice(0,5),p!=="data-"&&p!=="aria-");default:return!1}}function g(p,b,_,O){if(b===null||typeof b>"u"||h(p,b,_,O))return!0;if(O)return!1;if(_!==null)switch(_.type){case 3:return!b;case 4:return b===!1;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function y(p,b,_,O,L,z,Q){this.acceptsBooleans=b===2||b===3||b===4,this.attributeName=O,this.attributeNamespace=L,this.mustUseProperty=_,this.propertyName=p,this.type=b,this.sanitizeURL=z,this.removeEmptyString=Q}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(p){m[p]=new y(p,0,!1,p,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(p){var b=p[0];m[b]=new y(b,1,!1,p[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(p){m[p]=new y(p,2,!1,p.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(p){m[p]=new y(p,2,!1,p,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(p){m[p]=new y(p,3,!1,p.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(p){m[p]=new y(p,3,!0,p,null,!1,!1)}),["capture","download"].forEach(function(p){m[p]=new y(p,4,!1,p,null,!1,!1)}),["cols","rows","size","span"].forEach(function(p){m[p]=new y(p,6,!1,p,null,!1,!1)}),["rowSpan","start"].forEach(function(p){m[p]=new y(p,5,!1,p.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function x(p){return p[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(p){var b=p.replace(S,x);m[b]=new y(b,1,!1,p,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(p){var b=p.replace(S,x);m[b]=new y(b,1,!1,p,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(p){var b=p.replace(S,x);m[b]=new y(b,1,!1,p,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(p){m[p]=new y(p,1,!1,p.toLowerCase(),null,!1,!1)}),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(p){m[p]=new y(p,1,!1,p.toLowerCase(),null,!0,!0)});function C(p,b,_,O){var L=m.hasOwnProperty(b)?m[b]:null;(L!==null?L.type!==0:O||!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(g(b,_,L,O)&&(_=null),O||L===null?f(b)&&(_===null?p.removeAttribute(b):p.setAttribute(b,""+_)):L.mustUseProperty?p[L.propertyName]=_===null?L.type===3?!1:"":_:(b=L.attributeName,O=L.attributeNamespace,_===null?p.removeAttribute(b):(L=L.type,_=L===3||L===4&&_===!0?"":""+_,O?p.setAttributeNS(O,b,_):p.setAttribute(b,_))))}var E=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),I=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),j=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),B=Symbol.iterator;function W(p){return p===null||typeof p!="object"?null:(p=B&&p[B]||p["@@iterator"],typeof p=="function"?p:null)}var K=Object.assign,q;function X(p){if(q===void 0)try{throw Error()}catch(_){var b=_.stack.trim().match(/\n( *(at )?)/);q=b&&b[1]||""}return`
`+q+p}var Z=!1;function Y(p,b){if(!p||Z)return"";Z=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error()},Object.defineProperty(b.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(b,[])}catch(Oe){var O=Oe}Reflect.construct(p,[],b)}else{try{b.call()}catch(Oe){O=Oe}p.call(b.prototype)}else{try{throw Error()}catch(Oe){O=Oe}p()}}catch(Oe){if(Oe&&O&&typeof Oe.stack=="string"){for(var L=Oe.stack.split(`
`),z=O.stack.split(`
`),Q=L.length-1,se=z.length-1;1<=Q&&0<=se&&L[Q]!==z[se];)se--;for(;1<=Q&&0<=se;Q--,se--)if(L[Q]!==z[se]){if(Q!==1||se!==1)do if(Q--,se--,0>se||L[Q]!==z[se]){var me=`
`+L[Q].replace(" at new "," at ");return p.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",p.displayName)),me}while(1<=Q&&0<=se);break}}}finally{Z=!1,Error.prepareStackTrace=_}return(p=p?p.displayName||p.name:"")?X(p):""}function G(p){switch(p.tag){case 5:return X(p.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return p=Y(p.type,!1),p;case 11:return p=Y(p.type.render,!1),p;case 1:return p=Y(p.type,!0),p;default:return""}}function J(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case T:return"Fragment";case I:return"Portal";case R:return"Profiler";case M:return"StrictMode";case k:return"Suspense";case D:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case j:return(p.displayName||"Context")+".Consumer";case A:return(p._context.displayName||"Context")+".Provider";case N:var b=p.render;return p=p.displayName,p||(p=b.displayName||b.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case F:return b=p.displayName||null,b!==null?b:J(p.type)||"Memo";case H:b=p._payload,p=p._init;try{return J(p(b))}catch{}}return null}function ne(p){var b=p.type;switch(p.tag){case 24:return"Cache";case 9:return(b.displayName||"Context")+".Consumer";case 10:return(b._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=b.render,p=p.displayName||p.name||"",b.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return b;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J(b);case 8:return b===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b}return null}function ee(p){switch(typeof p){case"boolean":case"number":case"string":case"undefined":return p;case"object":return p;default:return""}}function re(p){var b=p.type;return(p=p.nodeName)&&p.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function le(p){var b=re(p)?"checked":"value",_=Object.getOwnPropertyDescriptor(p.constructor.prototype,b),O=""+p[b];if(!p.hasOwnProperty(b)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var L=_.get,z=_.set;return Object.defineProperty(p,b,{configurable:!0,get:function(){return L.call(this)},set:function(Q){O=""+Q,z.call(this,Q)}}),Object.defineProperty(p,b,{enumerable:_.enumerable}),{getValue:function(){return O},setValue:function(Q){O=""+Q},stopTracking:function(){p._valueTracker=null,delete p[b]}}}}function ae(p){p._valueTracker||(p._valueTracker=le(p))}function ie(p){if(!p)return!1;var b=p._valueTracker;if(!b)return!0;var _=b.getValue(),O="";return p&&(O=re(p)?p.checked?"true":"false":p.value),p=O,p!==_?(b.setValue(p),!0):!1}function ge(p){if(p=p||(typeof document<"u"?document:void 0),typeof p>"u")return null;try{return p.activeElement||p.body}catch{return p.body}}function ve(p,b){var _=b.checked;return K({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_??p._wrapperState.initialChecked})}function fe(p,b){var _=b.defaultValue==null?"":b.defaultValue,O=b.checked!=null?b.checked:b.defaultChecked;_=ee(b.value!=null?b.value:_),p._wrapperState={initialChecked:O,initialValue:_,controlled:b.type==="checkbox"||b.type==="radio"?b.checked!=null:b.value!=null}}function ue(p,b){b=b.checked,b!=null&&C(p,"checked",b,!1)}function Ce(p,b){ue(p,b);var _=ee(b.value),O=b.type;if(_!=null)O==="number"?(_===0&&p.value===""||p.value!=_)&&(p.value=""+_):p.value!==""+_&&(p.value=""+_);else if(O==="submit"||O==="reset"){p.removeAttribute("value");return}b.hasOwnProperty("value")?ke(p,b.type,_):b.hasOwnProperty("defaultValue")&&ke(p,b.type,ee(b.defaultValue)),b.checked==null&&b.defaultChecked!=null&&(p.defaultChecked=!!b.defaultChecked)}function ye(p,b,_){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var O=b.type;if(!(O!=="submit"&&O!=="reset"||b.value!==void 0&&b.value!==null))return;b=""+p._wrapperState.initialValue,_||b===p.value||(p.value=b),p.defaultValue=b}_=p.name,_!==""&&(p.name=""),p.defaultChecked=!!p._wrapperState.initialChecked,_!==""&&(p.name=_)}function ke(p,b,_){(b!=="number"||ge(p.ownerDocument)!==p)&&(_==null?p.defaultValue=""+p._wrapperState.initialValue:p.defaultValue!==""+_&&(p.defaultValue=""+_))}var Be=Array.isArray;function Ue(p,b,_,O){if(p=p.options,b){b={};for(var L=0;L<_.length;L++)b["$"+_[L]]=!0;for(_=0;_<p.length;_++)L=b.hasOwnProperty("$"+p[_].value),p[_].selected!==L&&(p[_].selected=L),L&&O&&(p[_].defaultSelected=!0)}else{for(_=""+ee(_),b=null,L=0;L<p.length;L++){if(p[L].value===_){p[L].selected=!0,O&&(p[L].defaultSelected=!0);return}b!==null||p[L].disabled||(b=p[L])}b!==null&&(b.selected=!0)}}function We(p,b){if(b.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},b,{value:void 0,defaultValue:void 0,children:""+p._wrapperState.initialValue})}function Me(p,b){var _=b.value;if(_==null){if(_=b.children,b=b.defaultValue,_!=null){if(b!=null)throw Error(n(92));if(Be(_)){if(1<_.length)throw Error(n(93));_=_[0]}b=_}b==null&&(b=""),_=b}p._wrapperState={initialValue:ee(_)}}function $e(p,b){var _=ee(b.value),O=ee(b.defaultValue);_!=null&&(_=""+_,_!==p.value&&(p.value=_),b.defaultValue==null&&p.defaultValue!==_&&(p.defaultValue=_)),O!=null&&(p.defaultValue=""+O)}function Qe(p){var b=p.textContent;b===p._wrapperState.initialValue&&b!==""&&b!==null&&(p.value=b)}function nt(p){switch(p){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(p,b){return p==null||p==="http://www.w3.org/1999/xhtml"?nt(b):p==="http://www.w3.org/2000/svg"&&b==="foreignObject"?"http://www.w3.org/1999/xhtml":p}var ft,et=function(p){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(b,_,O,L){MSApp.execUnsafeLocalFunction(function(){return p(b,_,O,L)})}:p}(function(p,b){if(p.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in p)p.innerHTML=b;else{for(ft=ft||document.createElement("div"),ft.innerHTML="<svg>"+b.valueOf().toString()+"</svg>",b=ft.firstChild;p.firstChild;)p.removeChild(p.firstChild);for(;b.firstChild;)p.appendChild(b.firstChild)}});function pe(p,b){if(b){var _=p.firstChild;if(_&&_===p.lastChild&&_.nodeType===3){_.nodeValue=b;return}}p.textContent=b}var Pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},je=["Webkit","ms","Moz","O"];Object.keys(Pe).forEach(function(p){je.forEach(function(b){b=b+p.charAt(0).toUpperCase()+p.substring(1),Pe[b]=Pe[p]})});function Le(p,b,_){return b==null||typeof b=="boolean"||b===""?"":_||typeof b!="number"||b===0||Pe.hasOwnProperty(p)&&Pe[p]?(""+b).trim():b+"px"}function qe(p,b){p=p.style;for(var _ in b)if(b.hasOwnProperty(_)){var O=_.indexOf("--")===0,L=Le(_,b[_],O);_==="float"&&(_="cssFloat"),O?p.setProperty(_,L):p[_]=L}}var at=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ae(p,b){if(b){if(at[p]&&(b.children!=null||b.dangerouslySetInnerHTML!=null))throw Error(n(137,p));if(b.dangerouslySetInnerHTML!=null){if(b.children!=null)throw Error(n(60));if(typeof b.dangerouslySetInnerHTML!="object"||!("__html"in b.dangerouslySetInnerHTML))throw Error(n(61))}if(b.style!=null&&typeof b.style!="object")throw Error(n(62))}}function Ne(p,b){if(p.indexOf("-")===-1)return typeof b.is=="string";switch(p){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function Pt(p){return p=p.target||p.srcElement||window,p.correspondingUseElement&&(p=p.correspondingUseElement),p.nodeType===3?p.parentNode:p}var gn=null,Xt=null,sn=null;function Zt(p){if(p=Cy(p)){if(typeof gn!="function")throw Error(n(280));var b=p.stateNode;b&&(b=o1(b),gn(p.stateNode,p.type,b))}}function Vt(p){Xt?sn?sn.push(p):sn=[p]:Xt=p}function an(){if(Xt){var p=Xt,b=sn;if(sn=Xt=null,Zt(p),b)for(p=0;p<b.length;p++)Zt(b[p])}}function wt(p,b){return p(b)}function bt(){}var ot=!1;function Xe(p,b,_){if(ot)return p(b,_);ot=!0;try{return wt(p,b,_)}finally{ot=!1,(Xt!==null||sn!==null)&&(bt(),an())}}function qt(p,b){var _=p.stateNode;if(_===null)return null;var O=o1(_);if(O===null)return null;_=O[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(p=p.type,O=!(p==="button"||p==="input"||p==="select"||p==="textarea")),p=!O;break e;default:p=!1}if(p)return null;if(_&&typeof _!="function")throw Error(n(231,b,typeof _));return _}var Tt=!1;if(a)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Tt=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch{Tt=!1}function Ge(p,b,_,O,L,z,Q,se,me){var Oe=Array.prototype.slice.call(arguments,3);try{b.apply(_,Oe)}catch(Je){this.onError(Je)}}var ut=!1,St=null,lt=!1,kt=null,_n={onError:function(p){ut=!0,St=p}};function bn(p,b,_,O,L,z,Q,se,me){ut=!1,St=null,Ge.apply(_n,arguments)}function ln(p,b,_,O,L,z,Q,se,me){if(bn.apply(this,arguments),ut){if(ut){var Oe=St;ut=!1,St=null}else throw Error(n(198));lt||(lt=!0,kt=Oe)}}function en(p){var b=p,_=p;if(p.alternate)for(;b.return;)b=b.return;else{p=b;do b=p,(b.flags&4098)!==0&&(_=b.return),p=b.return;while(p)}return b.tag===3?_:null}function wn(p){if(p.tag===13){var b=p.memoizedState;if(b===null&&(p=p.alternate,p!==null&&(b=p.memoizedState)),b!==null)return b.dehydrated}return null}function nr(p){if(en(p)!==p)throw Error(n(188))}function rr(p){var b=p.alternate;if(!b){if(b=en(p),b===null)throw Error(n(188));return b!==p?null:p}for(var _=p,O=b;;){var L=_.return;if(L===null)break;var z=L.alternate;if(z===null){if(O=L.return,O!==null){_=O;continue}break}if(L.child===z.child){for(z=L.child;z;){if(z===_)return nr(L),p;if(z===O)return nr(L),b;z=z.sibling}throw Error(n(188))}if(_.return!==O.return)_=L,O=z;else{for(var Q=!1,se=L.child;se;){if(se===_){Q=!0,_=L,O=z;break}if(se===O){Q=!0,O=L,_=z;break}se=se.sibling}if(!Q){for(se=z.child;se;){if(se===_){Q=!0,_=z,O=L;break}if(se===O){Q=!0,O=z,_=L;break}se=se.sibling}if(!Q)throw Error(n(189))}}if(_.alternate!==O)throw Error(n(190))}if(_.tag!==3)throw Error(n(188));return _.stateNode.current===_?p:b}function ur(p){return p=rr(p),p!==null?Nn(p):null}function Nn(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var b=Nn(p);if(b!==null)return b;p=p.sibling}return null}var gt=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,pt=e.unstable_shouldYield,yt=e.unstable_requestPaint,ze=e.unstable_now,Nt=e.unstable_getCurrentPriorityLevel,mn=e.unstable_ImmediatePriority,An=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,_t=e.unstable_LowPriority,Mt=e.unstable_IdlePriority,un=null,In=null;function Co(p){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(un,p,void 0,(p.current.flags&128)===128)}catch{}}var Dr=Math.clz32?Math.clz32:ko,Mr=Math.log,jr=Math.LN2;function ko(p){return p>>>=0,p===0?32:31-(Mr(p)/jr|0)|0}var Ao=64,pr=4194304;function no(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function $n(p,b){var _=p.pendingLanes;if(_===0)return 0;var O=0,L=p.suspendedLanes,z=p.pingedLanes,Q=_&268435455;if(Q!==0){var se=Q&~L;se!==0?O=no(se):(z&=Q,z!==0&&(O=no(z)))}else Q=_&~L,Q!==0?O=no(Q):z!==0&&(O=no(z));if(O===0)return 0;if(b!==0&&b!==O&&(b&L)===0&&(L=O&-O,z=b&-b,L>=z||L===16&&(z&4194240)!==0))return b;if((O&4)!==0&&(O|=_&16),b=p.entangledLanes,b!==0)for(p=p.entanglements,b&=O;0<b;)_=31-Dr(b),L=1<<_,O|=p[_],b&=~L;return O}function Ot(p,b){switch(p){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(p,b){for(var _=p.suspendedLanes,O=p.pingedLanes,L=p.expirationTimes,z=p.pendingLanes;0<z;){var Q=31-Dr(z),se=1<<Q,me=L[Q];me===-1?((se&_)===0||(se&O)!==0)&&(L[Q]=Ot(se,b)):me<=b&&(p.expiredLanes|=se),z&=~se}}function Fn(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Un(){var p=Ao;return Ao<<=1,(Ao&4194240)===0&&(Ao=64),p}function rn(p){for(var b=[],_=0;31>_;_++)b.push(p);return b}function vn(p,b,_){p.pendingLanes|=b,b!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,b=31-Dr(b),p[b]=_}function xr(p,b){var _=p.pendingLanes&~b;p.pendingLanes=b,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=b,p.mutableReadLanes&=b,p.entangledLanes&=b,b=p.entanglements;var O=p.eventTimes;for(p=p.expirationTimes;0<_;){var L=31-Dr(_),z=1<<L;b[L]=0,O[L]=-1,p[L]=-1,_&=~z}}function or(p,b){var _=p.entangledLanes|=b;for(p=p.entanglements;_;){var O=31-Dr(_),L=1<<O;L&b|p[O]&b&&(p[O]|=b),_&=~L}}var on=0;function Or(p){return p&=-p,1<p?4<p?(p&268435455)!==0?16:536870912:4:1}var uo,Eo,wr,Wc,zu,ui=!1,Po=[],Mi=null,fo=null,Go=null,ta=new Map,Is=new Map,Ts=[],Bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(p,b){switch(p){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":ta.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(b.pointerId)}}function tn(p,b,_,O,L,z){return p===null||p.nativeEvent!==z?(p={blockedOn:b,domEventName:_,eventSystemFlags:O,nativeEvent:z,targetContainers:[L]},b!==null&&(b=Cy(b),b!==null&&Eo(b)),p):(p.eventSystemFlags|=O,b=p.targetContainers,L!==null&&b.indexOf(L)===-1&&b.push(L),p)}function Er(p,b,_,O,L){switch(b){case"focusin":return Mi=tn(Mi,p,b,_,O,L),!0;case"dragenter":return fo=tn(fo,p,b,_,O,L),!0;case"mouseover":return Go=tn(Go,p,b,_,O,L),!0;case"pointerover":var z=L.pointerId;return ta.set(z,tn(ta.get(z)||null,p,b,_,O,L)),!0;case"gotpointercapture":return z=L.pointerId,Is.set(z,tn(Is.get(z)||null,p,b,_,O,L)),!0}return!1}function Lr(p){var b=_h(p.target);if(b!==null){var _=en(b);if(_!==null){if(b=_.tag,b===13){if(b=wn(_),b!==null){p.blockedOn=b,zu(p.priority,function(){wr(_)});return}}else if(b===3&&_.stateNode.current.memoizedState.isDehydrated){p.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}p.blockedOn=null}function ir(p){if(p.blockedOn!==null)return!1;for(var b=p.targetContainers;0<b.length;){var _=Wr(p.domEventName,p.eventSystemFlags,b[0],p.nativeEvent);if(_===null){_=p.nativeEvent;var O=new _.constructor(_.type,_);xt=O,_.target.dispatchEvent(O),xt=null}else return b=Cy(_),b!==null&&Eo(b),p.blockedOn=_,!1;b.shift()}return!0}function Vc(p,b,_){ir(p)&&_.delete(b)}function Ph(){ui=!1,Mi!==null&&ir(Mi)&&(Mi=null),fo!==null&&ir(fo)&&(fo=null),Go!==null&&ir(Go)&&(Go=null),ta.forEach(Vc),Is.forEach(Vc)}function qc(p,b){p.blockedOn===b&&(p.blockedOn=null,ui||(ui=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ph)))}function sl(p){function b(L){return qc(L,p)}if(0<Po.length){qc(Po[0],p);for(var _=1;_<Po.length;_++){var O=Po[_];O.blockedOn===p&&(O.blockedOn=null)}}for(Mi!==null&&qc(Mi,p),fo!==null&&qc(fo,p),Go!==null&&qc(Go,p),ta.forEach(b),Is.forEach(b),_=0;_<Ts.length;_++)O=Ts[_],O.blockedOn===p&&(O.blockedOn=null);for(;0<Ts.length&&(_=Ts[0],_.blockedOn===null);)Lr(_),_.blockedOn===null&&Ts.shift()}var te=E.ReactCurrentBatchConfig,we=!0;function Ye(p,b,_,O){var L=on,z=te.transition;te.transition=null;try{on=1,Pr(p,b,_,O)}finally{on=L,te.transition=z}}function jt(p,b,_,O){var L=on,z=te.transition;te.transition=null;try{on=4,Pr(p,b,_,O)}finally{on=L,te.transition=z}}function Pr(p,b,_,O){if(we){var L=Wr(p,b,_,O);if(L===null)vO(p,b,O,Cn,_),Dt(p,O);else if(Er(L,p,b,_,O))O.stopPropagation();else if(Dt(p,O),b&4&&-1<Bu.indexOf(p)){for(;L!==null;){var z=Cy(L);if(z!==null&&uo(z),z=Wr(p,b,_,O),z===null&&vO(p,b,O,Cn,_),z===L)break;L=z}L!==null&&O.stopPropagation()}else vO(p,b,O,null,_)}}var Cn=null;function Wr(p,b,_,O){if(Cn=null,p=Pt(O),p=_h(p),p!==null)if(b=en(p),b===null)p=null;else if(_=b.tag,_===13){if(p=wn(b),p!==null)return p;p=null}else if(_===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;p=null}else b!==p&&(p=null);return Cn=p,null}function $o(p){switch(p){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nt()){case mn:return 1;case An:return 4;case Qn:case _t:return 16;case Mt:return 536870912;default:return 16}default:return 16}}var Vr=null,Nr=null,di=null;function na(){if(di)return di;var p,b=Nr,_=b.length,O,L="value"in Vr?Vr.value:Vr.textContent,z=L.length;for(p=0;p<_&&b[p]===L[p];p++);var Q=_-p;for(O=1;O<=Q&&b[_-O]===L[z-O];O++);return di=L.slice(p,1<O?1-O:void 0)}function Do(p){var b=p.keyCode;return"charCode"in p?(p=p.charCode,p===0&&b===13&&(p=13)):p=b,p===10&&(p=13),32<=p||p===13?p:0}function Oi(){return!0}function Ms(){return!1}function _o(p){function b(_,O,L,z,Q){this._reactName=_,this._targetInst=L,this.type=O,this.nativeEvent=z,this.target=Q,this.currentTarget=null;for(var se in p)p.hasOwnProperty(se)&&(_=p[se],this[se]=_?_(z):z[se]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Oi:Ms,this.isPropagationStopped=Ms,this}return K(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),b}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(p){return p.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xl=_o(Yi),qd=K({},Yi,{view:0,detail:0}),_g=_o(qd),Kd,oO,hy,Yw=K({},qd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sO,button:0,buttons:0,relatedTarget:function(p){return p.relatedTarget===void 0?p.fromElement===p.srcElement?p.toElement:p.fromElement:p.relatedTarget},movementX:function(p){return"movementX"in p?p.movementX:(p!==hy&&(hy&&p.type==="mousemove"?(Kd=p.screenX-hy.screenX,oO=p.screenY-hy.screenY):oO=Kd=0,hy=p),Kd)},movementY:function(p){return"movementY"in p?p.movementY:oO}}),J6=_o(Yw),zSe=K({},Yw,{dataTransfer:0}),BSe=_o(zSe),HSe=K({},qd,{relatedTarget:0}),iO=_o(HSe),USe=K({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),WSe=_o(USe),VSe=K({},Yi,{clipboardData:function(p){return"clipboardData"in p?p.clipboardData:window.clipboardData}}),qSe=_o(VSe),KSe=K({},Yi,{data:0}),e8=_o(KSe),GSe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XSe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YSe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QSe(p){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(p):(p=YSe[p])?!!b[p]:!1}function sO(){return QSe}var ZSe=K({},qd,{key:function(p){if(p.key){var b=GSe[p.key]||p.key;if(b!=="Unidentified")return b}return p.type==="keypress"?(p=Do(p),p===13?"Enter":String.fromCharCode(p)):p.type==="keydown"||p.type==="keyup"?XSe[p.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sO,charCode:function(p){return p.type==="keypress"?Do(p):0},keyCode:function(p){return p.type==="keydown"||p.type==="keyup"?p.keyCode:0},which:function(p){return p.type==="keypress"?Do(p):p.type==="keydown"||p.type==="keyup"?p.keyCode:0}}),JSe=_o(ZSe),exe=K({},Yw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t8=_o(exe),txe=K({},qd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sO}),nxe=_o(txe),rxe=K({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),oxe=_o(rxe),ixe=K({},Yw,{deltaX:function(p){return"deltaX"in p?p.deltaX:"wheelDeltaX"in p?-p.wheelDeltaX:0},deltaY:function(p){return"deltaY"in p?p.deltaY:"wheelDeltaY"in p?-p.wheelDeltaY:"wheelDelta"in p?-p.wheelDelta:0},deltaZ:0,deltaMode:0}),sxe=_o(ixe),axe=[9,13,27,32],aO=a&&"CompositionEvent"in window,py=null;a&&"documentMode"in document&&(py=document.documentMode);var lxe=a&&"TextEvent"in window&&!py,n8=a&&(!aO||py&&8<py&&11>=py),r8=" ",o8=!1;function i8(p,b){switch(p){case"keyup":return axe.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s8(p){return p=p.detail,typeof p=="object"&&"data"in p?p.data:null}var Ig=!1;function cxe(p,b){switch(p){case"compositionend":return s8(b);case"keypress":return b.which!==32?null:(o8=!0,r8);case"textInput":return p=b.data,p===r8&&o8?null:p;default:return null}}function uxe(p,b){if(Ig)return p==="compositionend"||!aO&&i8(p,b)?(p=na(),di=Nr=Vr=null,Ig=!1,p):null;switch(p){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return n8&&b.locale!=="ko"?null:b.data;default:return null}}var dxe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a8(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b==="input"?!!dxe[p.type]:b==="textarea"}function l8(p,b,_,O){Vt(O),b=t1(b,"onChange"),0<b.length&&(_=new Xl("onChange","change",null,_,O),p.push({event:_,listeners:b}))}var gy=null,my=null;function fxe(p){_8(p,0)}function Qw(p){var b=kg(p);if(ie(b))return p}function hxe(p,b){if(p==="change")return b}var c8=!1;if(a){var lO;if(a){var cO="oninput"in document;if(!cO){var u8=document.createElement("div");u8.setAttribute("oninput","return;"),cO=typeof u8.oninput=="function"}lO=cO}else lO=!1;c8=lO&&(!document.documentMode||9<document.documentMode)}function d8(){gy&&(gy.detachEvent("onpropertychange",f8),my=gy=null)}function f8(p){if(p.propertyName==="value"&&Qw(my)){var b=[];l8(b,my,p,Pt(p)),Xe(fxe,b)}}function pxe(p,b,_){p==="focusin"?(d8(),gy=b,my=_,gy.attachEvent("onpropertychange",f8)):p==="focusout"&&d8()}function gxe(p){if(p==="selectionchange"||p==="keyup"||p==="keydown")return Qw(my)}function mxe(p,b){if(p==="click")return Qw(b)}function vxe(p,b){if(p==="input"||p==="change")return Qw(b)}function yxe(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var Yl=typeof Object.is=="function"?Object.is:yxe;function vy(p,b){if(Yl(p,b))return!0;if(typeof p!="object"||p===null||typeof b!="object"||b===null)return!1;var _=Object.keys(p),O=Object.keys(b);if(_.length!==O.length)return!1;for(O=0;O<_.length;O++){var L=_[O];if(!l.call(b,L)||!Yl(p[L],b[L]))return!1}return!0}function h8(p){for(;p&&p.firstChild;)p=p.firstChild;return p}function p8(p,b){var _=h8(p);p=0;for(var O;_;){if(_.nodeType===3){if(O=p+_.textContent.length,p<=b&&O>=b)return{node:_,offset:b-p};p=O}e:{for(;_;){if(_.nextSibling){_=_.nextSibling;break e}_=_.parentNode}_=void 0}_=h8(_)}}function g8(p,b){return p&&b?p===b?!0:p&&p.nodeType===3?!1:b&&b.nodeType===3?g8(p,b.parentNode):"contains"in p?p.contains(b):p.compareDocumentPosition?!!(p.compareDocumentPosition(b)&16):!1:!1}function m8(){for(var p=window,b=ge();b instanceof p.HTMLIFrameElement;){try{var _=typeof b.contentWindow.location.href=="string"}catch{_=!1}if(_)p=b.contentWindow;else break;b=ge(p.document)}return b}function uO(p){var b=p&&p.nodeName&&p.nodeName.toLowerCase();return b&&(b==="input"&&(p.type==="text"||p.type==="search"||p.type==="tel"||p.type==="url"||p.type==="password")||b==="textarea"||p.contentEditable==="true")}function bxe(p){var b=m8(),_=p.focusedElem,O=p.selectionRange;if(b!==_&&_&&_.ownerDocument&&g8(_.ownerDocument.documentElement,_)){if(O!==null&&uO(_)){if(b=O.start,p=O.end,p===void 0&&(p=b),"selectionStart"in _)_.selectionStart=b,_.selectionEnd=Math.min(p,_.value.length);else if(p=(b=_.ownerDocument||document)&&b.defaultView||window,p.getSelection){p=p.getSelection();var L=_.textContent.length,z=Math.min(O.start,L);O=O.end===void 0?z:Math.min(O.end,L),!p.extend&&z>O&&(L=O,O=z,z=L),L=p8(_,z);var Q=p8(_,O);L&&Q&&(p.rangeCount!==1||p.anchorNode!==L.node||p.anchorOffset!==L.offset||p.focusNode!==Q.node||p.focusOffset!==Q.offset)&&(b=b.createRange(),b.setStart(L.node,L.offset),p.removeAllRanges(),z>O?(p.addRange(b),p.extend(Q.node,Q.offset)):(b.setEnd(Q.node,Q.offset),p.addRange(b)))}}for(b=[],p=_;p=p.parentNode;)p.nodeType===1&&b.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<b.length;_++)p=b[_],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}}var Sxe=a&&"documentMode"in document&&11>=document.documentMode,Tg=null,dO=null,yy=null,fO=!1;function v8(p,b,_){var O=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;fO||Tg==null||Tg!==ge(O)||(O=Tg,"selectionStart"in O&&uO(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),yy&&vy(yy,O)||(yy=O,O=t1(dO,"onSelect"),0<O.length&&(b=new Xl("onSelect","select",null,b,_),p.push({event:b,listeners:O}),b.target=Tg)))}function Zw(p,b){var _={};return _[p.toLowerCase()]=b.toLowerCase(),_["Webkit"+p]="webkit"+b,_["Moz"+p]="moz"+b,_}var Mg={animationend:Zw("Animation","AnimationEnd"),animationiteration:Zw("Animation","AnimationIteration"),animationstart:Zw("Animation","AnimationStart"),transitionend:Zw("Transition","TransitionEnd")},hO={},y8={};a&&(y8=document.createElement("div").style,"AnimationEvent"in window||(delete Mg.animationend.animation,delete Mg.animationiteration.animation,delete Mg.animationstart.animation),"TransitionEvent"in window||delete Mg.transitionend.transition);function Jw(p){if(hO[p])return hO[p];if(!Mg[p])return p;var b=Mg[p],_;for(_ in b)if(b.hasOwnProperty(_)&&_ in y8)return hO[p]=b[_];return p}var b8=Jw("animationend"),S8=Jw("animationiteration"),x8=Jw("animationstart"),w8=Jw("transitionend"),C8=new Map,E8="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gd(p,b){C8.set(p,b),i(b,[p])}for(var pO=0;pO<E8.length;pO++){var gO=E8[pO],xxe=gO.toLowerCase(),wxe=gO[0].toUpperCase()+gO.slice(1);Gd(xxe,"on"+wxe)}Gd(b8,"onAnimationEnd"),Gd(S8,"onAnimationIteration"),Gd(x8,"onAnimationStart"),Gd("dblclick","onDoubleClick"),Gd("focusin","onFocus"),Gd("focusout","onBlur"),Gd(w8,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var by="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cxe=new Set("cancel close invalid load scroll toggle".split(" ").concat(by));function P8(p,b,_){var O=p.type||"unknown-event";p.currentTarget=_,ln(O,b,void 0,p),p.currentTarget=null}function _8(p,b){b=(b&4)!==0;for(var _=0;_<p.length;_++){var O=p[_],L=O.event;O=O.listeners;e:{var z=void 0;if(b)for(var Q=O.length-1;0<=Q;Q--){var se=O[Q],me=se.instance,Oe=se.currentTarget;if(se=se.listener,me!==z&&L.isPropagationStopped())break e;P8(L,se,Oe),z=me}else for(Q=0;Q<O.length;Q++){if(se=O[Q],me=se.instance,Oe=se.currentTarget,se=se.listener,me!==z&&L.isPropagationStopped())break e;P8(L,se,Oe),z=me}}}if(lt)throw p=kt,lt=!1,kt=null,p}function Qr(p,b){var _=b[CO];_===void 0&&(_=b[CO]=new Set);var O=p+"__bubble";_.has(O)||(I8(b,p,2,!1),_.add(O))}function mO(p,b,_){var O=0;b&&(O|=4),I8(_,p,O,b)}var e1="_reactListening"+Math.random().toString(36).slice(2);function Sy(p){if(!p[e1]){p[e1]=!0,r.forEach(function(_){_!=="selectionchange"&&(Cxe.has(_)||mO(_,!1,p),mO(_,!0,p))});var b=p.nodeType===9?p:p.ownerDocument;b===null||b[e1]||(b[e1]=!0,mO("selectionchange",!1,b))}}function I8(p,b,_,O){switch($o(b)){case 1:var L=Ye;break;case 4:L=jt;break;default:L=Pr}_=L.bind(null,b,_,p),L=void 0,!Tt||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(L=!0),O?L!==void 0?p.addEventListener(b,_,{capture:!0,passive:L}):p.addEventListener(b,_,!0):L!==void 0?p.addEventListener(b,_,{passive:L}):p.addEventListener(b,_,!1)}function vO(p,b,_,O,L){var z=O;if((b&1)===0&&(b&2)===0&&O!==null)e:for(;;){if(O===null)return;var Q=O.tag;if(Q===3||Q===4){var se=O.stateNode.containerInfo;if(se===L||se.nodeType===8&&se.parentNode===L)break;if(Q===4)for(Q=O.return;Q!==null;){var me=Q.tag;if((me===3||me===4)&&(me=Q.stateNode.containerInfo,me===L||me.nodeType===8&&me.parentNode===L))return;Q=Q.return}for(;se!==null;){if(Q=_h(se),Q===null)return;if(me=Q.tag,me===5||me===6){O=z=Q;continue e}se=se.parentNode}}O=O.return}Xe(function(){var Oe=z,Je=Pt(_),st=[];e:{var Ze=C8.get(p);if(Ze!==void 0){var $t=Xl,Ht=p;switch(p){case"keypress":if(Do(_)===0)break e;case"keydown":case"keyup":$t=JSe;break;case"focusin":Ht="focus",$t=iO;break;case"focusout":Ht="blur",$t=iO;break;case"beforeblur":case"afterblur":$t=iO;break;case"click":if(_.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=J6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=BSe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=nxe;break;case b8:case S8:case x8:$t=WSe;break;case w8:$t=oxe;break;case"scroll":$t=_g;break;case"wheel":$t=sxe;break;case"copy":case"cut":case"paste":$t=qSe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=t8}var Kt=(b&4)!==0,jo=!Kt&&p==="scroll",_e=Kt?Ze!==null?Ze+"Capture":null:Ze;Kt=[];for(var be=Oe,Te;be!==null;){Te=be;var mt=Te.stateNode;if(Te.tag===5&&mt!==null&&(Te=mt,_e!==null&&(mt=qt(be,_e),mt!=null&&Kt.push(xy(be,mt,Te)))),jo)break;be=be.return}0<Kt.length&&(Ze=new $t(Ze,Ht,null,_,Je),st.push({event:Ze,listeners:Kt}))}}if((b&7)===0){e:{if(Ze=p==="mouseover"||p==="pointerover",$t=p==="mouseout"||p==="pointerout",Ze&&_!==xt&&(Ht=_.relatedTarget||_.fromElement)&&(_h(Ht)||Ht[Hu]))break e;if(($t||Ze)&&(Ze=Je.window===Je?Je:(Ze=Je.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,$t?(Ht=_.relatedTarget||_.toElement,$t=Oe,Ht=Ht?_h(Ht):null,Ht!==null&&(jo=en(Ht),Ht!==jo||Ht.tag!==5&&Ht.tag!==6)&&(Ht=null)):($t=null,Ht=Oe),$t!==Ht)){if(Kt=J6,mt="onMouseLeave",_e="onMouseEnter",be="mouse",(p==="pointerout"||p==="pointerover")&&(Kt=t8,mt="onPointerLeave",_e="onPointerEnter",be="pointer"),jo=$t==null?Ze:kg($t),Te=Ht==null?Ze:kg(Ht),Ze=new Kt(mt,be+"leave",$t,_,Je),Ze.target=jo,Ze.relatedTarget=Te,mt=null,_h(Je)===Oe&&(Kt=new Kt(_e,be+"enter",Ht,_,Je),Kt.target=Te,Kt.relatedTarget=jo,mt=Kt),jo=mt,$t&&Ht)t:{for(Kt=$t,_e=Ht,be=0,Te=Kt;Te;Te=Og(Te))be++;for(Te=0,mt=_e;mt;mt=Og(mt))Te++;for(;0<be-Te;)Kt=Og(Kt),be--;for(;0<Te-be;)_e=Og(_e),Te--;for(;be--;){if(Kt===_e||_e!==null&&Kt===_e.alternate)break t;Kt=Og(Kt),_e=Og(_e)}Kt=null}else Kt=null;$t!==null&&T8(st,Ze,$t,Kt,!1),Ht!==null&&jo!==null&&T8(st,jo,Ht,Kt,!0)}}e:{if(Ze=Oe?kg(Oe):window,$t=Ze.nodeName&&Ze.nodeName.toLowerCase(),$t==="select"||$t==="input"&&Ze.type==="file")var Yt=hxe;else if(a8(Ze))if(c8)Yt=vxe;else{Yt=gxe;var dn=pxe}else($t=Ze.nodeName)&&$t.toLowerCase()==="input"&&(Ze.type==="checkbox"||Ze.type==="radio")&&(Yt=mxe);if(Yt&&(Yt=Yt(p,Oe))){l8(st,Yt,_,Je);break e}dn&&dn(p,Ze,Oe),p==="focusout"&&(dn=Ze._wrapperState)&&dn.controlled&&Ze.type==="number"&&ke(Ze,"number",Ze.value)}switch(dn=Oe?kg(Oe):window,p){case"focusin":(a8(dn)||dn.contentEditable==="true")&&(Tg=dn,dO=Oe,yy=null);break;case"focusout":yy=dO=Tg=null;break;case"mousedown":fO=!0;break;case"contextmenu":case"mouseup":case"dragend":fO=!1,v8(st,_,Je);break;case"selectionchange":if(Sxe)break;case"keydown":case"keyup":v8(st,_,Je)}var fn;if(aO)e:{switch(p){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else Ig?i8(p,_)&&(xn="onCompositionEnd"):p==="keydown"&&_.keyCode===229&&(xn="onCompositionStart");xn&&(n8&&_.locale!=="ko"&&(Ig||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&Ig&&(fn=na()):(Vr=Je,Nr="value"in Vr?Vr.value:Vr.textContent,Ig=!0)),dn=t1(Oe,xn),0<dn.length&&(xn=new e8(xn,p,null,_,Je),st.push({event:xn,listeners:dn}),fn?xn.data=fn:(fn=s8(_),fn!==null&&(xn.data=fn)))),(fn=lxe?cxe(p,_):uxe(p,_))&&(Oe=t1(Oe,"onBeforeInput"),0<Oe.length&&(Je=new e8("onBeforeInput","beforeinput",null,_,Je),st.push({event:Je,listeners:Oe}),Je.data=fn))}_8(st,b)})}function xy(p,b,_){return{instance:p,listener:b,currentTarget:_}}function t1(p,b){for(var _=b+"Capture",O=[];p!==null;){var L=p,z=L.stateNode;L.tag===5&&z!==null&&(L=z,z=qt(p,_),z!=null&&O.unshift(xy(p,z,L)),z=qt(p,b),z!=null&&O.push(xy(p,z,L))),p=p.return}return O}function Og(p){if(p===null)return null;do p=p.return;while(p&&p.tag!==5);return p||null}function T8(p,b,_,O,L){for(var z=b._reactName,Q=[];_!==null&&_!==O;){var se=_,me=se.alternate,Oe=se.stateNode;if(me!==null&&me===O)break;se.tag===5&&Oe!==null&&(se=Oe,L?(me=qt(_,z),me!=null&&Q.unshift(xy(_,me,se))):L||(me=qt(_,z),me!=null&&Q.push(xy(_,me,se)))),_=_.return}Q.length!==0&&p.push({event:b,listeners:Q})}var Exe=/\r\n?/g,Pxe=/\u0000|\uFFFD/g;function M8(p){return(typeof p=="string"?p:""+p).replace(Exe,`
`).replace(Pxe,"")}function n1(p,b,_){if(b=M8(b),M8(p)!==b&&_)throw Error(n(425))}function r1(){}var yO=null,bO=null;function SO(p,b){return p==="textarea"||p==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var xO=typeof setTimeout=="function"?setTimeout:void 0,_xe=typeof clearTimeout=="function"?clearTimeout:void 0,O8=typeof Promise=="function"?Promise:void 0,Ixe=typeof queueMicrotask=="function"?queueMicrotask:typeof O8<"u"?function(p){return O8.resolve(null).then(p).catch(Txe)}:xO;function Txe(p){setTimeout(function(){throw p})}function wO(p,b){var _=b,O=0;do{var L=_.nextSibling;if(p.removeChild(_),L&&L.nodeType===8)if(_=L.data,_==="/$"){if(O===0){p.removeChild(L),sl(b);return}O--}else _!=="$"&&_!=="$?"&&_!=="$!"||O++;_=L}while(_);sl(b)}function Xd(p){for(;p!=null;p=p.nextSibling){var b=p.nodeType;if(b===1||b===3)break;if(b===8){if(b=p.data,b==="$"||b==="$!"||b==="$?")break;if(b==="/$")return null}}return p}function R8(p){p=p.previousSibling;for(var b=0;p;){if(p.nodeType===8){var _=p.data;if(_==="$"||_==="$!"||_==="$?"){if(b===0)return p;b--}else _==="/$"&&b++}p=p.previousSibling}return null}var Rg=Math.random().toString(36).slice(2),Kc="__reactFiber$"+Rg,wy="__reactProps$"+Rg,Hu="__reactContainer$"+Rg,CO="__reactEvents$"+Rg,Mxe="__reactListeners$"+Rg,Oxe="__reactHandles$"+Rg;function _h(p){var b=p[Kc];if(b)return b;for(var _=p.parentNode;_;){if(b=_[Hu]||_[Kc]){if(_=b.alternate,b.child!==null||_!==null&&_.child!==null)for(p=R8(p);p!==null;){if(_=p[Kc])return _;p=R8(p)}return b}p=_,_=p.parentNode}return null}function Cy(p){return p=p[Kc]||p[Hu],!p||p.tag!==5&&p.tag!==6&&p.tag!==13&&p.tag!==3?null:p}function kg(p){if(p.tag===5||p.tag===6)return p.stateNode;throw Error(n(33))}function o1(p){return p[wy]||null}var EO=[],Ag=-1;function Yd(p){return{current:p}}function Zr(p){0>Ag||(p.current=EO[Ag],EO[Ag]=null,Ag--)}function qr(p,b){Ag++,EO[Ag]=p.current,p.current=b}var Qd={},Qi=Yd(Qd),ra=Yd(!1),Ih=Qd;function $g(p,b){var _=p.type.contextTypes;if(!_)return Qd;var O=p.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===b)return O.__reactInternalMemoizedMaskedChildContext;var L={},z;for(z in _)L[z]=b[z];return O&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=b,p.__reactInternalMemoizedMaskedChildContext=L),L}function oa(p){return p=p.childContextTypes,p!=null}function i1(){Zr(ra),Zr(Qi)}function k8(p,b,_){if(Qi.current!==Qd)throw Error(n(168));qr(Qi,b),qr(ra,_)}function A8(p,b,_){var O=p.stateNode;if(b=b.childContextTypes,typeof O.getChildContext!="function")return _;O=O.getChildContext();for(var L in O)if(!(L in b))throw Error(n(108,ne(p)||"Unknown",L));return K({},_,O)}function s1(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Qd,Ih=Qi.current,qr(Qi,p),qr(ra,ra.current),!0}function $8(p,b,_){var O=p.stateNode;if(!O)throw Error(n(169));_?(p=A8(p,b,Ih),O.__reactInternalMemoizedMergedChildContext=p,Zr(ra),Zr(Qi),qr(Qi,p)):Zr(ra),qr(ra,_)}var Uu=null,a1=!1,PO=!1;function D8(p){Uu===null?Uu=[p]:Uu.push(p)}function Rxe(p){a1=!0,D8(p)}function Zd(){if(!PO&&Uu!==null){PO=!0;var p=0,b=on;try{var _=Uu;for(on=1;p<_.length;p++){var O=_[p];do O=O(!0);while(O!==null)}Uu=null,a1=!1}catch(L){throw Uu!==null&&(Uu=Uu.slice(p+1)),gt(mn,Zd),L}finally{on=b,PO=!1}}return null}var Dg=[],jg=0,l1=null,c1=0,al=[],ll=0,Th=null,Wu=1,Vu="";function Mh(p,b){Dg[jg++]=c1,Dg[jg++]=l1,l1=p,c1=b}function j8(p,b,_){al[ll++]=Wu,al[ll++]=Vu,al[ll++]=Th,Th=p;var O=Wu;p=Vu;var L=32-Dr(O)-1;O&=~(1<<L),_+=1;var z=32-Dr(b)+L;if(30<z){var Q=L-L%5;z=(O&(1<<Q)-1).toString(32),O>>=Q,L-=Q,Wu=1<<32-Dr(b)+L|_<<L|O,Vu=z+p}else Wu=1<<z|_<<L|O,Vu=p}function _O(p){p.return!==null&&(Mh(p,1),j8(p,1,0))}function IO(p){for(;p===l1;)l1=Dg[--jg],Dg[jg]=null,c1=Dg[--jg],Dg[jg]=null;for(;p===Th;)Th=al[--ll],al[ll]=null,Vu=al[--ll],al[ll]=null,Wu=al[--ll],al[ll]=null}var _a=null,Ia=null,ro=!1,Ql=null;function L8(p,b){var _=fl(5,null,null,0);_.elementType="DELETED",_.stateNode=b,_.return=p,b=p.deletions,b===null?(p.deletions=[_],p.flags|=16):b.push(_)}function N8(p,b){switch(p.tag){case 5:var _=p.type;return b=b.nodeType!==1||_.toLowerCase()!==b.nodeName.toLowerCase()?null:b,b!==null?(p.stateNode=b,_a=p,Ia=Xd(b.firstChild),!0):!1;case 6:return b=p.pendingProps===""||b.nodeType!==3?null:b,b!==null?(p.stateNode=b,_a=p,Ia=null,!0):!1;case 13:return b=b.nodeType!==8?null:b,b!==null?(_=Th!==null?{id:Wu,overflow:Vu}:null,p.memoizedState={dehydrated:b,treeContext:_,retryLane:1073741824},_=fl(18,null,null,0),_.stateNode=b,_.return=p,p.child=_,_a=p,Ia=null,!0):!1;default:return!1}}function TO(p){return(p.mode&1)!==0&&(p.flags&128)===0}function MO(p){if(ro){var b=Ia;if(b){var _=b;if(!N8(p,b)){if(TO(p))throw Error(n(418));b=Xd(_.nextSibling);var O=_a;b&&N8(p,b)?L8(O,_):(p.flags=p.flags&-4097|2,ro=!1,_a=p)}}else{if(TO(p))throw Error(n(418));p.flags=p.flags&-4097|2,ro=!1,_a=p}}}function F8(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;_a=p}function u1(p){if(p!==_a)return!1;if(!ro)return F8(p),ro=!0,!1;var b;if((b=p.tag!==3)&&!(b=p.tag!==5)&&(b=p.type,b=b!=="head"&&b!=="body"&&!SO(p.type,p.memoizedProps)),b&&(b=Ia)){if(TO(p))throw z8(),Error(n(418));for(;b;)L8(p,b),b=Xd(b.nextSibling)}if(F8(p),p.tag===13){if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));e:{for(p=p.nextSibling,b=0;p;){if(p.nodeType===8){var _=p.data;if(_==="/$"){if(b===0){Ia=Xd(p.nextSibling);break e}b--}else _!=="$"&&_!=="$!"&&_!=="$?"||b++}p=p.nextSibling}Ia=null}}else Ia=_a?Xd(p.stateNode.nextSibling):null;return!0}function z8(){for(var p=Ia;p;)p=Xd(p.nextSibling)}function Lg(){Ia=_a=null,ro=!1}function OO(p){Ql===null?Ql=[p]:Ql.push(p)}var kxe=E.ReactCurrentBatchConfig;function Ey(p,b,_){if(p=_.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(n(309));var O=_.stateNode}if(!O)throw Error(n(147,p));var L=O,z=""+p;return b!==null&&b.ref!==null&&typeof b.ref=="function"&&b.ref._stringRef===z?b.ref:(b=function(Q){var se=L.refs;Q===null?delete se[z]:se[z]=Q},b._stringRef=z,b)}if(typeof p!="string")throw Error(n(284));if(!_._owner)throw Error(n(290,p))}return p}function d1(p,b){throw p=Object.prototype.toString.call(b),Error(n(31,p==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":p))}function B8(p){var b=p._init;return b(p._payload)}function H8(p){function b(_e,be){if(p){var Te=_e.deletions;Te===null?(_e.deletions=[be],_e.flags|=16):Te.push(be)}}function _(_e,be){if(!p)return null;for(;be!==null;)b(_e,be),be=be.sibling;return null}function O(_e,be){for(_e=new Map;be!==null;)be.key!==null?_e.set(be.key,be):_e.set(be.index,be),be=be.sibling;return _e}function L(_e,be){return _e=af(_e,be),_e.index=0,_e.sibling=null,_e}function z(_e,be,Te){return _e.index=Te,p?(Te=_e.alternate,Te!==null?(Te=Te.index,Te<be?(_e.flags|=2,be):Te):(_e.flags|=2,be)):(_e.flags|=1048576,be)}function Q(_e){return p&&_e.alternate===null&&(_e.flags|=2),_e}function se(_e,be,Te,mt){return be===null||be.tag!==6?(be=xR(Te,_e.mode,mt),be.return=_e,be):(be=L(be,Te),be.return=_e,be)}function me(_e,be,Te,mt){var Yt=Te.type;return Yt===T?Je(_e,be,Te.props.children,mt,Te.key):be!==null&&(be.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===H&&B8(Yt)===be.type)?(mt=L(be,Te.props),mt.ref=Ey(_e,be,Te),mt.return=_e,mt):(mt=D1(Te.type,Te.key,Te.props,null,_e.mode,mt),mt.ref=Ey(_e,be,Te),mt.return=_e,mt)}function Oe(_e,be,Te,mt){return be===null||be.tag!==4||be.stateNode.containerInfo!==Te.containerInfo||be.stateNode.implementation!==Te.implementation?(be=wR(Te,_e.mode,mt),be.return=_e,be):(be=L(be,Te.children||[]),be.return=_e,be)}function Je(_e,be,Te,mt,Yt){return be===null||be.tag!==7?(be=Lh(Te,_e.mode,mt,Yt),be.return=_e,be):(be=L(be,Te),be.return=_e,be)}function st(_e,be,Te){if(typeof be=="string"&&be!==""||typeof be=="number")return be=xR(""+be,_e.mode,Te),be.return=_e,be;if(typeof be=="object"&&be!==null){switch(be.$$typeof){case P:return Te=D1(be.type,be.key,be.props,null,_e.mode,Te),Te.ref=Ey(_e,null,be),Te.return=_e,Te;case I:return be=wR(be,_e.mode,Te),be.return=_e,be;case H:var mt=be._init;return st(_e,mt(be._payload),Te)}if(Be(be)||W(be))return be=Lh(be,_e.mode,Te,null),be.return=_e,be;d1(_e,be)}return null}function Ze(_e,be,Te,mt){var Yt=be!==null?be.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Yt!==null?null:se(_e,be,""+Te,mt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case P:return Te.key===Yt?me(_e,be,Te,mt):null;case I:return Te.key===Yt?Oe(_e,be,Te,mt):null;case H:return Yt=Te._init,Ze(_e,be,Yt(Te._payload),mt)}if(Be(Te)||W(Te))return Yt!==null?null:Je(_e,be,Te,mt,null);d1(_e,Te)}return null}function $t(_e,be,Te,mt,Yt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return _e=_e.get(Te)||null,se(be,_e,""+mt,Yt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case P:return _e=_e.get(mt.key===null?Te:mt.key)||null,me(be,_e,mt,Yt);case I:return _e=_e.get(mt.key===null?Te:mt.key)||null,Oe(be,_e,mt,Yt);case H:var dn=mt._init;return $t(_e,be,Te,dn(mt._payload),Yt)}if(Be(mt)||W(mt))return _e=_e.get(Te)||null,Je(be,_e,mt,Yt,null);d1(be,mt)}return null}function Ht(_e,be,Te,mt){for(var Yt=null,dn=null,fn=be,xn=be=0,pi=null;fn!==null&&xn<Te.length;xn++){fn.index>xn?(pi=fn,fn=null):pi=fn.sibling;var gr=Ze(_e,fn,Te[xn],mt);if(gr===null){fn===null&&(fn=pi);break}p&&fn&&gr.alternate===null&&b(_e,fn),be=z(gr,be,xn),dn===null?Yt=gr:dn.sibling=gr,dn=gr,fn=pi}if(xn===Te.length)return _(_e,fn),ro&&Mh(_e,xn),Yt;if(fn===null){for(;xn<Te.length;xn++)fn=st(_e,Te[xn],mt),fn!==null&&(be=z(fn,be,xn),dn===null?Yt=fn:dn.sibling=fn,dn=fn);return ro&&Mh(_e,xn),Yt}for(fn=O(_e,fn);xn<Te.length;xn++)pi=$t(fn,_e,xn,Te[xn],mt),pi!==null&&(p&&pi.alternate!==null&&fn.delete(pi.key===null?xn:pi.key),be=z(pi,be,xn),dn===null?Yt=pi:dn.sibling=pi,dn=pi);return p&&fn.forEach(function(lf){return b(_e,lf)}),ro&&Mh(_e,xn),Yt}function Kt(_e,be,Te,mt){var Yt=W(Te);if(typeof Yt!="function")throw Error(n(150));if(Te=Yt.call(Te),Te==null)throw Error(n(151));for(var dn=Yt=null,fn=be,xn=be=0,pi=null,gr=Te.next();fn!==null&&!gr.done;xn++,gr=Te.next()){fn.index>xn?(pi=fn,fn=null):pi=fn.sibling;var lf=Ze(_e,fn,gr.value,mt);if(lf===null){fn===null&&(fn=pi);break}p&&fn&&lf.alternate===null&&b(_e,fn),be=z(lf,be,xn),dn===null?Yt=lf:dn.sibling=lf,dn=lf,fn=pi}if(gr.done)return _(_e,fn),ro&&Mh(_e,xn),Yt;if(fn===null){for(;!gr.done;xn++,gr=Te.next())gr=st(_e,gr.value,mt),gr!==null&&(be=z(gr,be,xn),dn===null?Yt=gr:dn.sibling=gr,dn=gr);return ro&&Mh(_e,xn),Yt}for(fn=O(_e,fn);!gr.done;xn++,gr=Te.next())gr=$t(fn,_e,xn,gr.value,mt),gr!==null&&(p&&gr.alternate!==null&&fn.delete(gr.key===null?xn:gr.key),be=z(gr,be,xn),dn===null?Yt=gr:dn.sibling=gr,dn=gr);return p&&fn.forEach(function(dwe){return b(_e,dwe)}),ro&&Mh(_e,xn),Yt}function jo(_e,be,Te,mt){if(typeof Te=="object"&&Te!==null&&Te.type===T&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case P:e:{for(var Yt=Te.key,dn=be;dn!==null;){if(dn.key===Yt){if(Yt=Te.type,Yt===T){if(dn.tag===7){_(_e,dn.sibling),be=L(dn,Te.props.children),be.return=_e,_e=be;break e}}else if(dn.elementType===Yt||typeof Yt=="object"&&Yt!==null&&Yt.$$typeof===H&&B8(Yt)===dn.type){_(_e,dn.sibling),be=L(dn,Te.props),be.ref=Ey(_e,dn,Te),be.return=_e,_e=be;break e}_(_e,dn);break}else b(_e,dn);dn=dn.sibling}Te.type===T?(be=Lh(Te.props.children,_e.mode,mt,Te.key),be.return=_e,_e=be):(mt=D1(Te.type,Te.key,Te.props,null,_e.mode,mt),mt.ref=Ey(_e,be,Te),mt.return=_e,_e=mt)}return Q(_e);case I:e:{for(dn=Te.key;be!==null;){if(be.key===dn)if(be.tag===4&&be.stateNode.containerInfo===Te.containerInfo&&be.stateNode.implementation===Te.implementation){_(_e,be.sibling),be=L(be,Te.children||[]),be.return=_e,_e=be;break e}else{_(_e,be);break}else b(_e,be);be=be.sibling}be=wR(Te,_e.mode,mt),be.return=_e,_e=be}return Q(_e);case H:return dn=Te._init,jo(_e,be,dn(Te._payload),mt)}if(Be(Te))return Ht(_e,be,Te,mt);if(W(Te))return Kt(_e,be,Te,mt);d1(_e,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,be!==null&&be.tag===6?(_(_e,be.sibling),be=L(be,Te),be.return=_e,_e=be):(_(_e,be),be=xR(Te,_e.mode,mt),be.return=_e,_e=be),Q(_e)):_(_e,be)}return jo}var Ng=H8(!0),U8=H8(!1),f1=Yd(null),h1=null,Fg=null,RO=null;function kO(){RO=Fg=h1=null}function AO(p){var b=f1.current;Zr(f1),p._currentValue=b}function $O(p,b,_){for(;p!==null;){var O=p.alternate;if((p.childLanes&b)!==b?(p.childLanes|=b,O!==null&&(O.childLanes|=b)):O!==null&&(O.childLanes&b)!==b&&(O.childLanes|=b),p===_)break;p=p.return}}function zg(p,b){h1=p,RO=Fg=null,p=p.dependencies,p!==null&&p.firstContext!==null&&((p.lanes&b)!==0&&(ia=!0),p.firstContext=null)}function cl(p){var b=p._currentValue;if(RO!==p)if(p={context:p,memoizedValue:b,next:null},Fg===null){if(h1===null)throw Error(n(308));Fg=p,h1.dependencies={lanes:0,firstContext:p}}else Fg=Fg.next=p;return b}var Oh=null;function DO(p){Oh===null?Oh=[p]:Oh.push(p)}function W8(p,b,_,O){var L=b.interleaved;return L===null?(_.next=_,DO(b)):(_.next=L.next,L.next=_),b.interleaved=_,qu(p,O)}function qu(p,b){p.lanes|=b;var _=p.alternate;for(_!==null&&(_.lanes|=b),_=p,p=p.return;p!==null;)p.childLanes|=b,_=p.alternate,_!==null&&(_.childLanes|=b),_=p,p=p.return;return _.tag===3?_.stateNode:null}var Jd=!1;function jO(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function V8(p,b){p=p.updateQueue,b.updateQueue===p&&(b.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Ku(p,b){return{eventTime:p,lane:b,tag:0,payload:null,callback:null,next:null}}function ef(p,b,_){var O=p.updateQueue;if(O===null)return null;if(O=O.shared,(dr&2)!==0){var L=O.pending;return L===null?b.next=b:(b.next=L.next,L.next=b),O.pending=b,qu(p,_)}return L=O.interleaved,L===null?(b.next=b,DO(O)):(b.next=L.next,L.next=b),O.interleaved=b,qu(p,_)}function p1(p,b,_){if(b=b.updateQueue,b!==null&&(b=b.shared,(_&4194240)!==0)){var O=b.lanes;O&=p.pendingLanes,_|=O,b.lanes=_,or(p,_)}}function q8(p,b){var _=p.updateQueue,O=p.alternate;if(O!==null&&(O=O.updateQueue,_===O)){var L=null,z=null;if(_=_.firstBaseUpdate,_!==null){do{var Q={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};z===null?L=z=Q:z=z.next=Q,_=_.next}while(_!==null);z===null?L=z=b:z=z.next=b}else L=z=b;_={baseState:O.baseState,firstBaseUpdate:L,lastBaseUpdate:z,shared:O.shared,effects:O.effects},p.updateQueue=_;return}p=_.lastBaseUpdate,p===null?_.firstBaseUpdate=b:p.next=b,_.lastBaseUpdate=b}function g1(p,b,_,O){var L=p.updateQueue;Jd=!1;var z=L.firstBaseUpdate,Q=L.lastBaseUpdate,se=L.shared.pending;if(se!==null){L.shared.pending=null;var me=se,Oe=me.next;me.next=null,Q===null?z=Oe:Q.next=Oe,Q=me;var Je=p.alternate;Je!==null&&(Je=Je.updateQueue,se=Je.lastBaseUpdate,se!==Q&&(se===null?Je.firstBaseUpdate=Oe:se.next=Oe,Je.lastBaseUpdate=me))}if(z!==null){var st=L.baseState;Q=0,Je=Oe=me=null,se=z;do{var Ze=se.lane,$t=se.eventTime;if((O&Ze)===Ze){Je!==null&&(Je=Je.next={eventTime:$t,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var Ht=p,Kt=se;switch(Ze=b,$t=_,Kt.tag){case 1:if(Ht=Kt.payload,typeof Ht=="function"){st=Ht.call($t,st,Ze);break e}st=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Kt.payload,Ze=typeof Ht=="function"?Ht.call($t,st,Ze):Ht,Ze==null)break e;st=K({},st,Ze);break e;case 2:Jd=!0}}se.callback!==null&&se.lane!==0&&(p.flags|=64,Ze=L.effects,Ze===null?L.effects=[se]:Ze.push(se))}else $t={eventTime:$t,lane:Ze,tag:se.tag,payload:se.payload,callback:se.callback,next:null},Je===null?(Oe=Je=$t,me=st):Je=Je.next=$t,Q|=Ze;if(se=se.next,se===null){if(se=L.shared.pending,se===null)break;Ze=se,se=Ze.next,Ze.next=null,L.lastBaseUpdate=Ze,L.shared.pending=null}}while(!0);if(Je===null&&(me=st),L.baseState=me,L.firstBaseUpdate=Oe,L.lastBaseUpdate=Je,b=L.shared.interleaved,b!==null){L=b;do Q|=L.lane,L=L.next;while(L!==b)}else z===null&&(L.shared.lanes=0);Ah|=Q,p.lanes=Q,p.memoizedState=st}}function K8(p,b,_){if(p=b.effects,b.effects=null,p!==null)for(b=0;b<p.length;b++){var O=p[b],L=O.callback;if(L!==null){if(O.callback=null,O=_,typeof L!="function")throw Error(n(191,L));L.call(O)}}}var Py={},Gc=Yd(Py),_y=Yd(Py),Iy=Yd(Py);function Rh(p){if(p===Py)throw Error(n(174));return p}function LO(p,b){switch(qr(Iy,b),qr(_y,p),qr(Gc,Py),p=b.nodeType,p){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:ht(null,"");break;default:p=p===8?b.parentNode:b,b=p.namespaceURI||null,p=p.tagName,b=ht(b,p)}Zr(Gc),qr(Gc,b)}function Bg(){Zr(Gc),Zr(_y),Zr(Iy)}function G8(p){Rh(Iy.current);var b=Rh(Gc.current),_=ht(b,p.type);b!==_&&(qr(_y,p),qr(Gc,_))}function NO(p){_y.current===p&&(Zr(Gc),Zr(_y))}var ho=Yd(0);function m1(p){for(var b=p;b!==null;){if(b.tag===13){var _=b.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||_.data==="$!"))return b}else if(b.tag===19&&b.memoizedProps.revealOrder!==void 0){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var FO=[];function zO(){for(var p=0;p<FO.length;p++)FO[p]._workInProgressVersionPrimary=null;FO.length=0}var v1=E.ReactCurrentDispatcher,BO=E.ReactCurrentBatchConfig,kh=0,po=null,ri=null,fi=null,y1=!1,Ty=!1,My=0,Axe=0;function Zi(){throw Error(n(321))}function HO(p,b){if(b===null)return!1;for(var _=0;_<b.length&&_<p.length;_++)if(!Yl(p[_],b[_]))return!1;return!0}function UO(p,b,_,O,L,z){if(kh=z,po=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,v1.current=p===null||p.memoizedState===null?Lxe:Nxe,p=_(O,L),Ty){z=0;do{if(Ty=!1,My=0,25<=z)throw Error(n(301));z+=1,fi=ri=null,b.updateQueue=null,v1.current=Fxe,p=_(O,L)}while(Ty)}if(v1.current=x1,b=ri!==null&&ri.next!==null,kh=0,fi=ri=po=null,y1=!1,b)throw Error(n(300));return p}function WO(){var p=My!==0;return My=0,p}function Xc(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?po.memoizedState=fi=p:fi=fi.next=p,fi}function ul(){if(ri===null){var p=po.alternate;p=p!==null?p.memoizedState:null}else p=ri.next;var b=fi===null?po.memoizedState:fi.next;if(b!==null)fi=b,ri=p;else{if(p===null)throw Error(n(310));ri=p,p={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},fi===null?po.memoizedState=fi=p:fi=fi.next=p}return fi}function Oy(p,b){return typeof b=="function"?b(p):b}function VO(p){var b=ul(),_=b.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=p;var O=ri,L=O.baseQueue,z=_.pending;if(z!==null){if(L!==null){var Q=L.next;L.next=z.next,z.next=Q}O.baseQueue=L=z,_.pending=null}if(L!==null){z=L.next,O=O.baseState;var se=Q=null,me=null,Oe=z;do{var Je=Oe.lane;if((kh&Je)===Je)me!==null&&(me=me.next={lane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),O=Oe.hasEagerState?Oe.eagerState:p(O,Oe.action);else{var st={lane:Je,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null};me===null?(se=me=st,Q=O):me=me.next=st,po.lanes|=Je,Ah|=Je}Oe=Oe.next}while(Oe!==null&&Oe!==z);me===null?Q=O:me.next=se,Yl(O,b.memoizedState)||(ia=!0),b.memoizedState=O,b.baseState=Q,b.baseQueue=me,_.lastRenderedState=O}if(p=_.interleaved,p!==null){L=p;do z=L.lane,po.lanes|=z,Ah|=z,L=L.next;while(L!==p)}else L===null&&(_.lanes=0);return[b.memoizedState,_.dispatch]}function qO(p){var b=ul(),_=b.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=p;var O=_.dispatch,L=_.pending,z=b.memoizedState;if(L!==null){_.pending=null;var Q=L=L.next;do z=p(z,Q.action),Q=Q.next;while(Q!==L);Yl(z,b.memoizedState)||(ia=!0),b.memoizedState=z,b.baseQueue===null&&(b.baseState=z),_.lastRenderedState=z}return[z,O]}function X8(){}function Y8(p,b){var _=po,O=ul(),L=b(),z=!Yl(O.memoizedState,L);if(z&&(O.memoizedState=L,ia=!0),O=O.queue,KO(J8.bind(null,_,O,p),[p]),O.getSnapshot!==b||z||fi!==null&&fi.memoizedState.tag&1){if(_.flags|=2048,Ry(9,Z8.bind(null,_,O,L,b),void 0,null),hi===null)throw Error(n(349));(kh&30)!==0||Q8(_,b,L)}return L}function Q8(p,b,_){p.flags|=16384,p={getSnapshot:b,value:_},b=po.updateQueue,b===null?(b={lastEffect:null,stores:null},po.updateQueue=b,b.stores=[p]):(_=b.stores,_===null?b.stores=[p]:_.push(p))}function Z8(p,b,_,O){b.value=_,b.getSnapshot=O,eH(b)&&tH(p)}function J8(p,b,_){return _(function(){eH(b)&&tH(p)})}function eH(p){var b=p.getSnapshot;p=p.value;try{var _=b();return!Yl(p,_)}catch{return!0}}function tH(p){var b=qu(p,1);b!==null&&tc(b,p,1,-1)}function nH(p){var b=Xc();return typeof p=="function"&&(p=p()),b.memoizedState=b.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oy,lastRenderedState:p},b.queue=p,p=p.dispatch=jxe.bind(null,po,p),[b.memoizedState,p]}function Ry(p,b,_,O){return p={tag:p,create:b,destroy:_,deps:O,next:null},b=po.updateQueue,b===null?(b={lastEffect:null,stores:null},po.updateQueue=b,b.lastEffect=p.next=p):(_=b.lastEffect,_===null?b.lastEffect=p.next=p:(O=_.next,_.next=p,p.next=O,b.lastEffect=p)),p}function rH(){return ul().memoizedState}function b1(p,b,_,O){var L=Xc();po.flags|=p,L.memoizedState=Ry(1|b,_,void 0,O===void 0?null:O)}function S1(p,b,_,O){var L=ul();O=O===void 0?null:O;var z=void 0;if(ri!==null){var Q=ri.memoizedState;if(z=Q.destroy,O!==null&&HO(O,Q.deps)){L.memoizedState=Ry(b,_,z,O);return}}po.flags|=p,L.memoizedState=Ry(1|b,_,z,O)}function oH(p,b){return b1(8390656,8,p,b)}function KO(p,b){return S1(2048,8,p,b)}function iH(p,b){return S1(4,2,p,b)}function sH(p,b){return S1(4,4,p,b)}function aH(p,b){if(typeof b=="function")return p=p(),b(p),function(){b(null)};if(b!=null)return p=p(),b.current=p,function(){b.current=null}}function lH(p,b,_){return _=_!=null?_.concat([p]):null,S1(4,4,aH.bind(null,b,p),_)}function GO(){}function cH(p,b){var _=ul();b=b===void 0?null:b;var O=_.memoizedState;return O!==null&&b!==null&&HO(b,O[1])?O[0]:(_.memoizedState=[p,b],p)}function uH(p,b){var _=ul();b=b===void 0?null:b;var O=_.memoizedState;return O!==null&&b!==null&&HO(b,O[1])?O[0]:(p=p(),_.memoizedState=[p,b],p)}function dH(p,b,_){return(kh&21)===0?(p.baseState&&(p.baseState=!1,ia=!0),p.memoizedState=_):(Yl(_,b)||(_=Un(),po.lanes|=_,Ah|=_,p.baseState=!0),b)}function $xe(p,b){var _=on;on=_!==0&&4>_?_:4,p(!0);var O=BO.transition;BO.transition={};try{p(!1),b()}finally{on=_,BO.transition=O}}function fH(){return ul().memoizedState}function Dxe(p,b,_){var O=of(p);if(_={lane:O,action:_,hasEagerState:!1,eagerState:null,next:null},hH(p))pH(b,_);else if(_=W8(p,b,_,O),_!==null){var L=Rs();tc(_,p,O,L),gH(_,b,O)}}function jxe(p,b,_){var O=of(p),L={lane:O,action:_,hasEagerState:!1,eagerState:null,next:null};if(hH(p))pH(b,L);else{var z=p.alternate;if(p.lanes===0&&(z===null||z.lanes===0)&&(z=b.lastRenderedReducer,z!==null))try{var Q=b.lastRenderedState,se=z(Q,_);if(L.hasEagerState=!0,L.eagerState=se,Yl(se,Q)){var me=b.interleaved;me===null?(L.next=L,DO(b)):(L.next=me.next,me.next=L),b.interleaved=L;return}}catch{}finally{}_=W8(p,b,L,O),_!==null&&(L=Rs(),tc(_,p,O,L),gH(_,b,O))}}function hH(p){var b=p.alternate;return p===po||b!==null&&b===po}function pH(p,b){Ty=y1=!0;var _=p.pending;_===null?b.next=b:(b.next=_.next,_.next=b),p.pending=b}function gH(p,b,_){if((_&4194240)!==0){var O=b.lanes;O&=p.pendingLanes,_|=O,b.lanes=_,or(p,_)}}var x1={readContext:cl,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useInsertionEffect:Zi,useLayoutEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useMutableSource:Zi,useSyncExternalStore:Zi,useId:Zi,unstable_isNewReconciler:!1},Lxe={readContext:cl,useCallback:function(p,b){return Xc().memoizedState=[p,b===void 0?null:b],p},useContext:cl,useEffect:oH,useImperativeHandle:function(p,b,_){return _=_!=null?_.concat([p]):null,b1(4194308,4,aH.bind(null,b,p),_)},useLayoutEffect:function(p,b){return b1(4194308,4,p,b)},useInsertionEffect:function(p,b){return b1(4,2,p,b)},useMemo:function(p,b){var _=Xc();return b=b===void 0?null:b,p=p(),_.memoizedState=[p,b],p},useReducer:function(p,b,_){var O=Xc();return b=_!==void 0?_(b):b,O.memoizedState=O.baseState=b,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:b},O.queue=p,p=p.dispatch=Dxe.bind(null,po,p),[O.memoizedState,p]},useRef:function(p){var b=Xc();return p={current:p},b.memoizedState=p},useState:nH,useDebugValue:GO,useDeferredValue:function(p){return Xc().memoizedState=p},useTransition:function(){var p=nH(!1),b=p[0];return p=$xe.bind(null,p[1]),Xc().memoizedState=p,[b,p]},useMutableSource:function(){},useSyncExternalStore:function(p,b,_){var O=po,L=Xc();if(ro){if(_===void 0)throw Error(n(407));_=_()}else{if(_=b(),hi===null)throw Error(n(349));(kh&30)!==0||Q8(O,b,_)}L.memoizedState=_;var z={value:_,getSnapshot:b};return L.queue=z,oH(J8.bind(null,O,z,p),[p]),O.flags|=2048,Ry(9,Z8.bind(null,O,z,_,b),void 0,null),_},useId:function(){var p=Xc(),b=hi.identifierPrefix;if(ro){var _=Vu,O=Wu;_=(O&~(1<<32-Dr(O)-1)).toString(32)+_,b=":"+b+"R"+_,_=My++,0<_&&(b+="H"+_.toString(32)),b+=":"}else _=Axe++,b=":"+b+"r"+_.toString(32)+":";return p.memoizedState=b},unstable_isNewReconciler:!1},Nxe={readContext:cl,useCallback:cH,useContext:cl,useEffect:KO,useImperativeHandle:lH,useInsertionEffect:iH,useLayoutEffect:sH,useMemo:uH,useReducer:VO,useRef:rH,useState:function(){return VO(Oy)},useDebugValue:GO,useDeferredValue:function(p){var b=ul();return dH(b,ri.memoizedState,p)},useTransition:function(){var p=VO(Oy)[0],b=ul().memoizedState;return[p,b]},useMutableSource:X8,useSyncExternalStore:Y8,useId:fH,unstable_isNewReconciler:!1},Fxe={readContext:cl,useCallback:cH,useContext:cl,useEffect:KO,useImperativeHandle:lH,useInsertionEffect:iH,useLayoutEffect:sH,useMemo:uH,useReducer:qO,useRef:rH,useState:function(){return qO(Oy)},useDebugValue:GO,useDeferredValue:function(p){var b=ul();return ri===null?b.memoizedState=p:dH(b,ri.memoizedState,p)},useTransition:function(){var p=qO(Oy)[0],b=ul().memoizedState;return[p,b]},useMutableSource:X8,useSyncExternalStore:Y8,useId:fH,unstable_isNewReconciler:!1};function Zl(p,b){if(p&&p.defaultProps){b=K({},b),p=p.defaultProps;for(var _ in p)b[_]===void 0&&(b[_]=p[_]);return b}return b}function XO(p,b,_,O){b=p.memoizedState,_=_(O,b),_=_==null?b:K({},b,_),p.memoizedState=_,p.lanes===0&&(p.updateQueue.baseState=_)}var w1={isMounted:function(p){return(p=p._reactInternals)?en(p)===p:!1},enqueueSetState:function(p,b,_){p=p._reactInternals;var O=Rs(),L=of(p),z=Ku(O,L);z.payload=b,_!=null&&(z.callback=_),b=ef(p,z,L),b!==null&&(tc(b,p,L,O),p1(b,p,L))},enqueueReplaceState:function(p,b,_){p=p._reactInternals;var O=Rs(),L=of(p),z=Ku(O,L);z.tag=1,z.payload=b,_!=null&&(z.callback=_),b=ef(p,z,L),b!==null&&(tc(b,p,L,O),p1(b,p,L))},enqueueForceUpdate:function(p,b){p=p._reactInternals;var _=Rs(),O=of(p),L=Ku(_,O);L.tag=2,b!=null&&(L.callback=b),b=ef(p,L,O),b!==null&&(tc(b,p,O,_),p1(b,p,O))}};function mH(p,b,_,O,L,z,Q){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(O,z,Q):b.prototype&&b.prototype.isPureReactComponent?!vy(_,O)||!vy(L,z):!0}function vH(p,b,_){var O=!1,L=Qd,z=b.contextType;return typeof z=="object"&&z!==null?z=cl(z):(L=oa(b)?Ih:Qi.current,O=b.contextTypes,z=(O=O!=null)?$g(p,L):Qd),b=new b(_,z),p.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=w1,p.stateNode=b,b._reactInternals=p,O&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=L,p.__reactInternalMemoizedMaskedChildContext=z),b}function yH(p,b,_,O){p=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(_,O),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(_,O),b.state!==p&&w1.enqueueReplaceState(b,b.state,null)}function YO(p,b,_,O){var L=p.stateNode;L.props=_,L.state=p.memoizedState,L.refs={},jO(p);var z=b.contextType;typeof z=="object"&&z!==null?L.context=cl(z):(z=oa(b)?Ih:Qi.current,L.context=$g(p,z)),L.state=p.memoizedState,z=b.getDerivedStateFromProps,typeof z=="function"&&(XO(p,b,z,_),L.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(b=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),b!==L.state&&w1.enqueueReplaceState(L,L.state,null),g1(p,_,L,O),L.state=p.memoizedState),typeof L.componentDidMount=="function"&&(p.flags|=4194308)}function Hg(p,b){try{var _="",O=b;do _+=G(O),O=O.return;while(O);var L=_}catch(z){L=`
Error generating stack: `+z.message+`
`+z.stack}return{value:p,source:b,stack:L,digest:null}}function QO(p,b,_){return{value:p,source:null,stack:_??null,digest:b??null}}function ZO(p,b){try{console.error(b.value)}catch(_){setTimeout(function(){throw _})}}var zxe=typeof WeakMap=="function"?WeakMap:Map;function bH(p,b,_){_=Ku(-1,_),_.tag=3,_.payload={element:null};var O=b.value;return _.callback=function(){M1||(M1=!0,hR=O),ZO(p,b)},_}function SH(p,b,_){_=Ku(-1,_),_.tag=3;var O=p.type.getDerivedStateFromError;if(typeof O=="function"){var L=b.value;_.payload=function(){return O(L)},_.callback=function(){ZO(p,b)}}var z=p.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(_.callback=function(){ZO(p,b),typeof O!="function"&&(nf===null?nf=new Set([this]):nf.add(this));var Q=b.stack;this.componentDidCatch(b.value,{componentStack:Q!==null?Q:""})}),_}function xH(p,b,_){var O=p.pingCache;if(O===null){O=p.pingCache=new zxe;var L=new Set;O.set(b,L)}else L=O.get(b),L===void 0&&(L=new Set,O.set(b,L));L.has(_)||(L.add(_),p=ewe.bind(null,p,b,_),b.then(p,p))}function wH(p){do{var b;if((b=p.tag===13)&&(b=p.memoizedState,b=b!==null?b.dehydrated!==null:!0),b)return p;p=p.return}while(p!==null);return null}function CH(p,b,_,O,L){return(p.mode&1)===0?(p===b?p.flags|=65536:(p.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(b=Ku(-1,1),b.tag=2,ef(_,b,1))),_.lanes|=1),p):(p.flags|=65536,p.lanes=L,p)}var Bxe=E.ReactCurrentOwner,ia=!1;function Os(p,b,_,O){b.child=p===null?U8(b,null,_,O):Ng(b,p.child,_,O)}function EH(p,b,_,O,L){_=_.render;var z=b.ref;return zg(b,L),O=UO(p,b,_,O,z,L),_=WO(),p!==null&&!ia?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~L,Gu(p,b,L)):(ro&&_&&_O(b),b.flags|=1,Os(p,b,O,L),b.child)}function PH(p,b,_,O,L){if(p===null){var z=_.type;return typeof z=="function"&&!SR(z)&&z.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(b.tag=15,b.type=z,_H(p,b,z,O,L)):(p=D1(_.type,null,O,b,b.mode,L),p.ref=b.ref,p.return=b,b.child=p)}if(z=p.child,(p.lanes&L)===0){var Q=z.memoizedProps;if(_=_.compare,_=_!==null?_:vy,_(Q,O)&&p.ref===b.ref)return Gu(p,b,L)}return b.flags|=1,p=af(z,O),p.ref=b.ref,p.return=b,b.child=p}function _H(p,b,_,O,L){if(p!==null){var z=p.memoizedProps;if(vy(z,O)&&p.ref===b.ref)if(ia=!1,b.pendingProps=O=z,(p.lanes&L)!==0)(p.flags&131072)!==0&&(ia=!0);else return b.lanes=p.lanes,Gu(p,b,L)}return JO(p,b,_,O,L)}function IH(p,b,_){var O=b.pendingProps,L=O.children,z=p!==null?p.memoizedState:null;if(O.mode==="hidden")if((b.mode&1)===0)b.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr(Wg,Ta),Ta|=_;else{if((_&1073741824)===0)return p=z!==null?z.baseLanes|_:_,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:p,cachePool:null,transitions:null},b.updateQueue=null,qr(Wg,Ta),Ta|=p,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=z!==null?z.baseLanes:_,qr(Wg,Ta),Ta|=O}else z!==null?(O=z.baseLanes|_,b.memoizedState=null):O=_,qr(Wg,Ta),Ta|=O;return Os(p,b,L,_),b.child}function TH(p,b){var _=b.ref;(p===null&&_!==null||p!==null&&p.ref!==_)&&(b.flags|=512,b.flags|=2097152)}function JO(p,b,_,O,L){var z=oa(_)?Ih:Qi.current;return z=$g(b,z),zg(b,L),_=UO(p,b,_,O,z,L),O=WO(),p!==null&&!ia?(b.updateQueue=p.updateQueue,b.flags&=-2053,p.lanes&=~L,Gu(p,b,L)):(ro&&O&&_O(b),b.flags|=1,Os(p,b,_,L),b.child)}function MH(p,b,_,O,L){if(oa(_)){var z=!0;s1(b)}else z=!1;if(zg(b,L),b.stateNode===null)E1(p,b),vH(b,_,O),YO(b,_,O,L),O=!0;else if(p===null){var Q=b.stateNode,se=b.memoizedProps;Q.props=se;var me=Q.context,Oe=_.contextType;typeof Oe=="object"&&Oe!==null?Oe=cl(Oe):(Oe=oa(_)?Ih:Qi.current,Oe=$g(b,Oe));var Je=_.getDerivedStateFromProps,st=typeof Je=="function"||typeof Q.getSnapshotBeforeUpdate=="function";st||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(se!==O||me!==Oe)&&yH(b,Q,O,Oe),Jd=!1;var Ze=b.memoizedState;Q.state=Ze,g1(b,O,Q,L),me=b.memoizedState,se!==O||Ze!==me||ra.current||Jd?(typeof Je=="function"&&(XO(b,_,Je,O),me=b.memoizedState),(se=Jd||mH(b,_,se,O,Ze,me,Oe))?(st||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(b.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=O,b.memoizedState=me),Q.props=O,Q.state=me,Q.context=Oe,O=se):(typeof Q.componentDidMount=="function"&&(b.flags|=4194308),O=!1)}else{Q=b.stateNode,V8(p,b),se=b.memoizedProps,Oe=b.type===b.elementType?se:Zl(b.type,se),Q.props=Oe,st=b.pendingProps,Ze=Q.context,me=_.contextType,typeof me=="object"&&me!==null?me=cl(me):(me=oa(_)?Ih:Qi.current,me=$g(b,me));var $t=_.getDerivedStateFromProps;(Je=typeof $t=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(se!==st||Ze!==me)&&yH(b,Q,O,me),Jd=!1,Ze=b.memoizedState,Q.state=Ze,g1(b,O,Q,L);var Ht=b.memoizedState;se!==st||Ze!==Ht||ra.current||Jd?(typeof $t=="function"&&(XO(b,_,$t,O),Ht=b.memoizedState),(Oe=Jd||mH(b,_,Oe,O,Ze,Ht,me)||!1)?(Je||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(O,Ht,me),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(O,Ht,me)),typeof Q.componentDidUpdate=="function"&&(b.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof Q.componentDidUpdate!="function"||se===p.memoizedProps&&Ze===p.memoizedState||(b.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||se===p.memoizedProps&&Ze===p.memoizedState||(b.flags|=1024),b.memoizedProps=O,b.memoizedState=Ht),Q.props=O,Q.state=Ht,Q.context=me,O=Oe):(typeof Q.componentDidUpdate!="function"||se===p.memoizedProps&&Ze===p.memoizedState||(b.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||se===p.memoizedProps&&Ze===p.memoizedState||(b.flags|=1024),O=!1)}return eR(p,b,_,O,z,L)}function eR(p,b,_,O,L,z){TH(p,b);var Q=(b.flags&128)!==0;if(!O&&!Q)return L&&$8(b,_,!1),Gu(p,b,z);O=b.stateNode,Bxe.current=b;var se=Q&&typeof _.getDerivedStateFromError!="function"?null:O.render();return b.flags|=1,p!==null&&Q?(b.child=Ng(b,p.child,null,z),b.child=Ng(b,null,se,z)):Os(p,b,se,z),b.memoizedState=O.state,L&&$8(b,_,!0),b.child}function OH(p){var b=p.stateNode;b.pendingContext?k8(p,b.pendingContext,b.pendingContext!==b.context):b.context&&k8(p,b.context,!1),LO(p,b.containerInfo)}function RH(p,b,_,O,L){return Lg(),OO(L),b.flags|=256,Os(p,b,_,O),b.child}var tR={dehydrated:null,treeContext:null,retryLane:0};function nR(p){return{baseLanes:p,cachePool:null,transitions:null}}function kH(p,b,_){var O=b.pendingProps,L=ho.current,z=!1,Q=(b.flags&128)!==0,se;if((se=Q)||(se=p!==null&&p.memoizedState===null?!1:(L&2)!==0),se?(z=!0,b.flags&=-129):(p===null||p.memoizedState!==null)&&(L|=1),qr(ho,L&1),p===null)return MO(b),p=b.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?((b.mode&1)===0?b.lanes=1:p.data==="$!"?b.lanes=8:b.lanes=1073741824,null):(Q=O.children,p=O.fallback,z?(O=b.mode,z=b.child,Q={mode:"hidden",children:Q},(O&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=Q):z=j1(Q,O,0,null),p=Lh(p,O,_,null),z.return=b,p.return=b,z.sibling=p,b.child=z,b.child.memoizedState=nR(_),b.memoizedState=tR,p):rR(b,Q));if(L=p.memoizedState,L!==null&&(se=L.dehydrated,se!==null))return Hxe(p,b,Q,O,se,L,_);if(z){z=O.fallback,Q=b.mode,L=p.child,se=L.sibling;var me={mode:"hidden",children:O.children};return(Q&1)===0&&b.child!==L?(O=b.child,O.childLanes=0,O.pendingProps=me,b.deletions=null):(O=af(L,me),O.subtreeFlags=L.subtreeFlags&14680064),se!==null?z=af(se,z):(z=Lh(z,Q,_,null),z.flags|=2),z.return=b,O.return=b,O.sibling=z,b.child=O,O=z,z=b.child,Q=p.child.memoizedState,Q=Q===null?nR(_):{baseLanes:Q.baseLanes|_,cachePool:null,transitions:Q.transitions},z.memoizedState=Q,z.childLanes=p.childLanes&~_,b.memoizedState=tR,O}return z=p.child,p=z.sibling,O=af(z,{mode:"visible",children:O.children}),(b.mode&1)===0&&(O.lanes=_),O.return=b,O.sibling=null,p!==null&&(_=b.deletions,_===null?(b.deletions=[p],b.flags|=16):_.push(p)),b.child=O,b.memoizedState=null,O}function rR(p,b){return b=j1({mode:"visible",children:b},p.mode,0,null),b.return=p,p.child=b}function C1(p,b,_,O){return O!==null&&OO(O),Ng(b,p.child,null,_),p=rR(b,b.pendingProps.children),p.flags|=2,b.memoizedState=null,p}function Hxe(p,b,_,O,L,z,Q){if(_)return b.flags&256?(b.flags&=-257,O=QO(Error(n(422))),C1(p,b,Q,O)):b.memoizedState!==null?(b.child=p.child,b.flags|=128,null):(z=O.fallback,L=b.mode,O=j1({mode:"visible",children:O.children},L,0,null),z=Lh(z,L,Q,null),z.flags|=2,O.return=b,z.return=b,O.sibling=z,b.child=O,(b.mode&1)!==0&&Ng(b,p.child,null,Q),b.child.memoizedState=nR(Q),b.memoizedState=tR,z);if((b.mode&1)===0)return C1(p,b,Q,null);if(L.data==="$!"){if(O=L.nextSibling&&L.nextSibling.dataset,O)var se=O.dgst;return O=se,z=Error(n(419)),O=QO(z,O,void 0),C1(p,b,Q,O)}if(se=(Q&p.childLanes)!==0,ia||se){if(O=hi,O!==null){switch(Q&-Q){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}L=(L&(O.suspendedLanes|Q))!==0?0:L,L!==0&&L!==z.retryLane&&(z.retryLane=L,qu(p,L),tc(O,p,L,-1))}return bR(),O=QO(Error(n(421))),C1(p,b,Q,O)}return L.data==="$?"?(b.flags|=128,b.child=p.child,b=twe.bind(null,p),L._reactRetry=b,null):(p=z.treeContext,Ia=Xd(L.nextSibling),_a=b,ro=!0,Ql=null,p!==null&&(al[ll++]=Wu,al[ll++]=Vu,al[ll++]=Th,Wu=p.id,Vu=p.overflow,Th=b),b=rR(b,O.children),b.flags|=4096,b)}function AH(p,b,_){p.lanes|=b;var O=p.alternate;O!==null&&(O.lanes|=b),$O(p.return,b,_)}function oR(p,b,_,O,L){var z=p.memoizedState;z===null?p.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:O,tail:_,tailMode:L}:(z.isBackwards=b,z.rendering=null,z.renderingStartTime=0,z.last=O,z.tail=_,z.tailMode=L)}function $H(p,b,_){var O=b.pendingProps,L=O.revealOrder,z=O.tail;if(Os(p,b,O.children,_),O=ho.current,(O&2)!==0)O=O&1|2,b.flags|=128;else{if(p!==null&&(p.flags&128)!==0)e:for(p=b.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&AH(p,_,b);else if(p.tag===19)AH(p,_,b);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===b)break e;for(;p.sibling===null;){if(p.return===null||p.return===b)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}O&=1}if(qr(ho,O),(b.mode&1)===0)b.memoizedState=null;else switch(L){case"forwards":for(_=b.child,L=null;_!==null;)p=_.alternate,p!==null&&m1(p)===null&&(L=_),_=_.sibling;_=L,_===null?(L=b.child,b.child=null):(L=_.sibling,_.sibling=null),oR(b,!1,L,_,z);break;case"backwards":for(_=null,L=b.child,b.child=null;L!==null;){if(p=L.alternate,p!==null&&m1(p)===null){b.child=L;break}p=L.sibling,L.sibling=_,_=L,L=p}oR(b,!0,_,null,z);break;case"together":oR(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}function E1(p,b){(b.mode&1)===0&&p!==null&&(p.alternate=null,b.alternate=null,b.flags|=2)}function Gu(p,b,_){if(p!==null&&(b.dependencies=p.dependencies),Ah|=b.lanes,(_&b.childLanes)===0)return null;if(p!==null&&b.child!==p.child)throw Error(n(153));if(b.child!==null){for(p=b.child,_=af(p,p.pendingProps),b.child=_,_.return=b;p.sibling!==null;)p=p.sibling,_=_.sibling=af(p,p.pendingProps),_.return=b;_.sibling=null}return b.child}function Uxe(p,b,_){switch(b.tag){case 3:OH(b),Lg();break;case 5:G8(b);break;case 1:oa(b.type)&&s1(b);break;case 4:LO(b,b.stateNode.containerInfo);break;case 10:var O=b.type._context,L=b.memoizedProps.value;qr(f1,O._currentValue),O._currentValue=L;break;case 13:if(O=b.memoizedState,O!==null)return O.dehydrated!==null?(qr(ho,ho.current&1),b.flags|=128,null):(_&b.child.childLanes)!==0?kH(p,b,_):(qr(ho,ho.current&1),p=Gu(p,b,_),p!==null?p.sibling:null);qr(ho,ho.current&1);break;case 19:if(O=(_&b.childLanes)!==0,(p.flags&128)!==0){if(O)return $H(p,b,_);b.flags|=128}if(L=b.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),qr(ho,ho.current),O)break;return null;case 22:case 23:return b.lanes=0,IH(p,b,_)}return Gu(p,b,_)}var DH,iR,jH,LH;DH=function(p,b){for(var _=b.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===b)break;for(;_.sibling===null;){if(_.return===null||_.return===b)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},iR=function(){},jH=function(p,b,_,O){var L=p.memoizedProps;if(L!==O){p=b.stateNode,Rh(Gc.current);var z=null;switch(_){case"input":L=ve(p,L),O=ve(p,O),z=[];break;case"select":L=K({},L,{value:void 0}),O=K({},O,{value:void 0}),z=[];break;case"textarea":L=We(p,L),O=We(p,O),z=[];break;default:typeof L.onClick!="function"&&typeof O.onClick=="function"&&(p.onclick=r1)}Ae(_,O);var Q;_=null;for(Oe in L)if(!O.hasOwnProperty(Oe)&&L.hasOwnProperty(Oe)&&L[Oe]!=null)if(Oe==="style"){var se=L[Oe];for(Q in se)se.hasOwnProperty(Q)&&(_||(_={}),_[Q]="")}else Oe!=="dangerouslySetInnerHTML"&&Oe!=="children"&&Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&Oe!=="autoFocus"&&(o.hasOwnProperty(Oe)?z||(z=[]):(z=z||[]).push(Oe,null));for(Oe in O){var me=O[Oe];if(se=L!=null?L[Oe]:void 0,O.hasOwnProperty(Oe)&&me!==se&&(me!=null||se!=null))if(Oe==="style")if(se){for(Q in se)!se.hasOwnProperty(Q)||me&&me.hasOwnProperty(Q)||(_||(_={}),_[Q]="");for(Q in me)me.hasOwnProperty(Q)&&se[Q]!==me[Q]&&(_||(_={}),_[Q]=me[Q])}else _||(z||(z=[]),z.push(Oe,_)),_=me;else Oe==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,se=se?se.__html:void 0,me!=null&&se!==me&&(z=z||[]).push(Oe,me)):Oe==="children"?typeof me!="string"&&typeof me!="number"||(z=z||[]).push(Oe,""+me):Oe!=="suppressContentEditableWarning"&&Oe!=="suppressHydrationWarning"&&(o.hasOwnProperty(Oe)?(me!=null&&Oe==="onScroll"&&Qr("scroll",p),z||se===me||(z=[])):(z=z||[]).push(Oe,me))}_&&(z=z||[]).push("style",_);var Oe=z;(b.updateQueue=Oe)&&(b.flags|=4)}},LH=function(p,b,_,O){_!==O&&(b.flags|=4)};function ky(p,b){if(!ro)switch(p.tailMode){case"hidden":b=p.tail;for(var _=null;b!==null;)b.alternate!==null&&(_=b),b=b.sibling;_===null?p.tail=null:_.sibling=null;break;case"collapsed":_=p.tail;for(var O=null;_!==null;)_.alternate!==null&&(O=_),_=_.sibling;O===null?b||p.tail===null?p.tail=null:p.tail.sibling=null:O.sibling=null}}function Ji(p){var b=p.alternate!==null&&p.alternate.child===p.child,_=0,O=0;if(b)for(var L=p.child;L!==null;)_|=L.lanes|L.childLanes,O|=L.subtreeFlags&14680064,O|=L.flags&14680064,L.return=p,L=L.sibling;else for(L=p.child;L!==null;)_|=L.lanes|L.childLanes,O|=L.subtreeFlags,O|=L.flags,L.return=p,L=L.sibling;return p.subtreeFlags|=O,p.childLanes=_,b}function Wxe(p,b,_){var O=b.pendingProps;switch(IO(b),b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(b),null;case 1:return oa(b.type)&&i1(),Ji(b),null;case 3:return O=b.stateNode,Bg(),Zr(ra),Zr(Qi),zO(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(p===null||p.child===null)&&(u1(b)?b.flags|=4:p===null||p.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,Ql!==null&&(mR(Ql),Ql=null))),iR(p,b),Ji(b),null;case 5:NO(b);var L=Rh(Iy.current);if(_=b.type,p!==null&&b.stateNode!=null)jH(p,b,_,O,L),p.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!O){if(b.stateNode===null)throw Error(n(166));return Ji(b),null}if(p=Rh(Gc.current),u1(b)){O=b.stateNode,_=b.type;var z=b.memoizedProps;switch(O[Kc]=b,O[wy]=z,p=(b.mode&1)!==0,_){case"dialog":Qr("cancel",O),Qr("close",O);break;case"iframe":case"object":case"embed":Qr("load",O);break;case"video":case"audio":for(L=0;L<by.length;L++)Qr(by[L],O);break;case"source":Qr("error",O);break;case"img":case"image":case"link":Qr("error",O),Qr("load",O);break;case"details":Qr("toggle",O);break;case"input":fe(O,z),Qr("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!z.multiple},Qr("invalid",O);break;case"textarea":Me(O,z),Qr("invalid",O)}Ae(_,z),L=null;for(var Q in z)if(z.hasOwnProperty(Q)){var se=z[Q];Q==="children"?typeof se=="string"?O.textContent!==se&&(z.suppressHydrationWarning!==!0&&n1(O.textContent,se,p),L=["children",se]):typeof se=="number"&&O.textContent!==""+se&&(z.suppressHydrationWarning!==!0&&n1(O.textContent,se,p),L=["children",""+se]):o.hasOwnProperty(Q)&&se!=null&&Q==="onScroll"&&Qr("scroll",O)}switch(_){case"input":ae(O),ye(O,z,!0);break;case"textarea":ae(O),Qe(O);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(O.onclick=r1)}O=L,b.updateQueue=O,O!==null&&(b.flags|=4)}else{Q=L.nodeType===9?L:L.ownerDocument,p==="http://www.w3.org/1999/xhtml"&&(p=nt(_)),p==="http://www.w3.org/1999/xhtml"?_==="script"?(p=Q.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild)):typeof O.is=="string"?p=Q.createElement(_,{is:O.is}):(p=Q.createElement(_),_==="select"&&(Q=p,O.multiple?Q.multiple=!0:O.size&&(Q.size=O.size))):p=Q.createElementNS(p,_),p[Kc]=b,p[wy]=O,DH(p,b,!1,!1),b.stateNode=p;e:{switch(Q=Ne(_,O),_){case"dialog":Qr("cancel",p),Qr("close",p),L=O;break;case"iframe":case"object":case"embed":Qr("load",p),L=O;break;case"video":case"audio":for(L=0;L<by.length;L++)Qr(by[L],p);L=O;break;case"source":Qr("error",p),L=O;break;case"img":case"image":case"link":Qr("error",p),Qr("load",p),L=O;break;case"details":Qr("toggle",p),L=O;break;case"input":fe(p,O),L=ve(p,O),Qr("invalid",p);break;case"option":L=O;break;case"select":p._wrapperState={wasMultiple:!!O.multiple},L=K({},O,{value:void 0}),Qr("invalid",p);break;case"textarea":Me(p,O),L=We(p,O),Qr("invalid",p);break;default:L=O}Ae(_,L),se=L;for(z in se)if(se.hasOwnProperty(z)){var me=se[z];z==="style"?qe(p,me):z==="dangerouslySetInnerHTML"?(me=me?me.__html:void 0,me!=null&&et(p,me)):z==="children"?typeof me=="string"?(_!=="textarea"||me!=="")&&pe(p,me):typeof me=="number"&&pe(p,""+me):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?me!=null&&z==="onScroll"&&Qr("scroll",p):me!=null&&C(p,z,me,Q))}switch(_){case"input":ae(p),ye(p,O,!1);break;case"textarea":ae(p),Qe(p);break;case"option":O.value!=null&&p.setAttribute("value",""+ee(O.value));break;case"select":p.multiple=!!O.multiple,z=O.value,z!=null?Ue(p,!!O.multiple,z,!1):O.defaultValue!=null&&Ue(p,!!O.multiple,O.defaultValue,!0);break;default:typeof L.onClick=="function"&&(p.onclick=r1)}switch(_){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(b.flags|=4)}b.ref!==null&&(b.flags|=512,b.flags|=2097152)}return Ji(b),null;case 6:if(p&&b.stateNode!=null)LH(p,b,p.memoizedProps,O);else{if(typeof O!="string"&&b.stateNode===null)throw Error(n(166));if(_=Rh(Iy.current),Rh(Gc.current),u1(b)){if(O=b.stateNode,_=b.memoizedProps,O[Kc]=b,(z=O.nodeValue!==_)&&(p=_a,p!==null))switch(p.tag){case 3:n1(O.nodeValue,_,(p.mode&1)!==0);break;case 5:p.memoizedProps.suppressHydrationWarning!==!0&&n1(O.nodeValue,_,(p.mode&1)!==0)}z&&(b.flags|=4)}else O=(_.nodeType===9?_:_.ownerDocument).createTextNode(O),O[Kc]=b,b.stateNode=O}return Ji(b),null;case 13:if(Zr(ho),O=b.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(ro&&Ia!==null&&(b.mode&1)!==0&&(b.flags&128)===0)z8(),Lg(),b.flags|=98560,z=!1;else if(z=u1(b),O!==null&&O.dehydrated!==null){if(p===null){if(!z)throw Error(n(318));if(z=b.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(n(317));z[Kc]=b}else Lg(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;Ji(b),z=!1}else Ql!==null&&(mR(Ql),Ql=null),z=!0;if(!z)return b.flags&65536?b:null}return(b.flags&128)!==0?(b.lanes=_,b):(O=O!==null,O!==(p!==null&&p.memoizedState!==null)&&O&&(b.child.flags|=8192,(b.mode&1)!==0&&(p===null||(ho.current&1)!==0?oi===0&&(oi=3):bR())),b.updateQueue!==null&&(b.flags|=4),Ji(b),null);case 4:return Bg(),iR(p,b),p===null&&Sy(b.stateNode.containerInfo),Ji(b),null;case 10:return AO(b.type._context),Ji(b),null;case 17:return oa(b.type)&&i1(),Ji(b),null;case 19:if(Zr(ho),z=b.memoizedState,z===null)return Ji(b),null;if(O=(b.flags&128)!==0,Q=z.rendering,Q===null)if(O)ky(z,!1);else{if(oi!==0||p!==null&&(p.flags&128)!==0)for(p=b.child;p!==null;){if(Q=m1(p),Q!==null){for(b.flags|=128,ky(z,!1),O=Q.updateQueue,O!==null&&(b.updateQueue=O,b.flags|=4),b.subtreeFlags=0,O=_,_=b.child;_!==null;)z=_,p=O,z.flags&=14680066,Q=z.alternate,Q===null?(z.childLanes=0,z.lanes=p,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=Q.childLanes,z.lanes=Q.lanes,z.child=Q.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=Q.memoizedProps,z.memoizedState=Q.memoizedState,z.updateQueue=Q.updateQueue,z.type=Q.type,p=Q.dependencies,z.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),_=_.sibling;return qr(ho,ho.current&1|2),b.child}p=p.sibling}z.tail!==null&&ze()>Vg&&(b.flags|=128,O=!0,ky(z,!1),b.lanes=4194304)}else{if(!O)if(p=m1(Q),p!==null){if(b.flags|=128,O=!0,_=p.updateQueue,_!==null&&(b.updateQueue=_,b.flags|=4),ky(z,!0),z.tail===null&&z.tailMode==="hidden"&&!Q.alternate&&!ro)return Ji(b),null}else 2*ze()-z.renderingStartTime>Vg&&_!==1073741824&&(b.flags|=128,O=!0,ky(z,!1),b.lanes=4194304);z.isBackwards?(Q.sibling=b.child,b.child=Q):(_=z.last,_!==null?_.sibling=Q:b.child=Q,z.last=Q)}return z.tail!==null?(b=z.tail,z.rendering=b,z.tail=b.sibling,z.renderingStartTime=ze(),b.sibling=null,_=ho.current,qr(ho,O?_&1|2:_&1),b):(Ji(b),null);case 22:case 23:return yR(),O=b.memoizedState!==null,p!==null&&p.memoizedState!==null!==O&&(b.flags|=8192),O&&(b.mode&1)!==0?(Ta&1073741824)!==0&&(Ji(b),b.subtreeFlags&6&&(b.flags|=8192)):Ji(b),null;case 24:return null;case 25:return null}throw Error(n(156,b.tag))}function Vxe(p,b){switch(IO(b),b.tag){case 1:return oa(b.type)&&i1(),p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 3:return Bg(),Zr(ra),Zr(Qi),zO(),p=b.flags,(p&65536)!==0&&(p&128)===0?(b.flags=p&-65537|128,b):null;case 5:return NO(b),null;case 13:if(Zr(ho),p=b.memoizedState,p!==null&&p.dehydrated!==null){if(b.alternate===null)throw Error(n(340));Lg()}return p=b.flags,p&65536?(b.flags=p&-65537|128,b):null;case 19:return Zr(ho),null;case 4:return Bg(),null;case 10:return AO(b.type._context),null;case 22:case 23:return yR(),null;case 24:return null;default:return null}}var P1=!1,es=!1,qxe=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Ug(p,b){var _=p.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(O){Io(p,b,O)}else _.current=null}function sR(p,b,_){try{_()}catch(O){Io(p,b,O)}}var NH=!1;function Kxe(p,b){if(yO=we,p=m8(),uO(p)){if("selectionStart"in p)var _={start:p.selectionStart,end:p.selectionEnd};else e:{_=(_=p.ownerDocument)&&_.defaultView||window;var O=_.getSelection&&_.getSelection();if(O&&O.rangeCount!==0){_=O.anchorNode;var L=O.anchorOffset,z=O.focusNode;O=O.focusOffset;try{_.nodeType,z.nodeType}catch{_=null;break e}var Q=0,se=-1,me=-1,Oe=0,Je=0,st=p,Ze=null;t:for(;;){for(var $t;st!==_||L!==0&&st.nodeType!==3||(se=Q+L),st!==z||O!==0&&st.nodeType!==3||(me=Q+O),st.nodeType===3&&(Q+=st.nodeValue.length),($t=st.firstChild)!==null;)Ze=st,st=$t;for(;;){if(st===p)break t;if(Ze===_&&++Oe===L&&(se=Q),Ze===z&&++Je===O&&(me=Q),($t=st.nextSibling)!==null)break;st=Ze,Ze=st.parentNode}st=$t}_=se===-1||me===-1?null:{start:se,end:me}}else _=null}_=_||{start:0,end:0}}else _=null;for(bO={focusedElem:p,selectionRange:_},we=!1,zt=b;zt!==null;)if(b=zt,p=b.child,(b.subtreeFlags&1028)!==0&&p!==null)p.return=b,zt=p;else for(;zt!==null;){b=zt;try{var Ht=b.alternate;if((b.flags&1024)!==0)switch(b.tag){case 0:case 11:case 15:break;case 1:if(Ht!==null){var Kt=Ht.memoizedProps,jo=Ht.memoizedState,_e=b.stateNode,be=_e.getSnapshotBeforeUpdate(b.elementType===b.type?Kt:Zl(b.type,Kt),jo);_e.__reactInternalSnapshotBeforeUpdate=be}break;case 3:var Te=b.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(mt){Io(b,b.return,mt)}if(p=b.sibling,p!==null){p.return=b.return,zt=p;break}zt=b.return}return Ht=NH,NH=!1,Ht}function Ay(p,b,_){var O=b.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var L=O=O.next;do{if((L.tag&p)===p){var z=L.destroy;L.destroy=void 0,z!==void 0&&sR(b,_,z)}L=L.next}while(L!==O)}}function _1(p,b){if(b=b.updateQueue,b=b!==null?b.lastEffect:null,b!==null){var _=b=b.next;do{if((_.tag&p)===p){var O=_.create;_.destroy=O()}_=_.next}while(_!==b)}}function aR(p){var b=p.ref;if(b!==null){var _=p.stateNode;switch(p.tag){case 5:p=_;break;default:p=_}typeof b=="function"?b(p):b.current=p}}function FH(p){var b=p.alternate;b!==null&&(p.alternate=null,FH(b)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(b=p.stateNode,b!==null&&(delete b[Kc],delete b[wy],delete b[CO],delete b[Mxe],delete b[Oxe])),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function zH(p){return p.tag===5||p.tag===3||p.tag===4}function BH(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||zH(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function lR(p,b,_){var O=p.tag;if(O===5||O===6)p=p.stateNode,b?_.nodeType===8?_.parentNode.insertBefore(p,b):_.insertBefore(p,b):(_.nodeType===8?(b=_.parentNode,b.insertBefore(p,_)):(b=_,b.appendChild(p)),_=_._reactRootContainer,_!=null||b.onclick!==null||(b.onclick=r1));else if(O!==4&&(p=p.child,p!==null))for(lR(p,b,_),p=p.sibling;p!==null;)lR(p,b,_),p=p.sibling}function cR(p,b,_){var O=p.tag;if(O===5||O===6)p=p.stateNode,b?_.insertBefore(p,b):_.appendChild(p);else if(O!==4&&(p=p.child,p!==null))for(cR(p,b,_),p=p.sibling;p!==null;)cR(p,b,_),p=p.sibling}var Ri=null,Jl=!1;function tf(p,b,_){for(_=_.child;_!==null;)HH(p,b,_),_=_.sibling}function HH(p,b,_){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(un,_)}catch{}switch(_.tag){case 5:es||Ug(_,b);case 6:var O=Ri,L=Jl;Ri=null,tf(p,b,_),Ri=O,Jl=L,Ri!==null&&(Jl?(p=Ri,_=_.stateNode,p.nodeType===8?p.parentNode.removeChild(_):p.removeChild(_)):Ri.removeChild(_.stateNode));break;case 18:Ri!==null&&(Jl?(p=Ri,_=_.stateNode,p.nodeType===8?wO(p.parentNode,_):p.nodeType===1&&wO(p,_),sl(p)):wO(Ri,_.stateNode));break;case 4:O=Ri,L=Jl,Ri=_.stateNode.containerInfo,Jl=!0,tf(p,b,_),Ri=O,Jl=L;break;case 0:case 11:case 14:case 15:if(!es&&(O=_.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){L=O=O.next;do{var z=L,Q=z.destroy;z=z.tag,Q!==void 0&&((z&2)!==0||(z&4)!==0)&&sR(_,b,Q),L=L.next}while(L!==O)}tf(p,b,_);break;case 1:if(!es&&(Ug(_,b),O=_.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=_.memoizedProps,O.state=_.memoizedState,O.componentWillUnmount()}catch(se){Io(_,b,se)}tf(p,b,_);break;case 21:tf(p,b,_);break;case 22:_.mode&1?(es=(O=es)||_.memoizedState!==null,tf(p,b,_),es=O):tf(p,b,_);break;default:tf(p,b,_)}}function UH(p){var b=p.updateQueue;if(b!==null){p.updateQueue=null;var _=p.stateNode;_===null&&(_=p.stateNode=new qxe),b.forEach(function(O){var L=nwe.bind(null,p,O);_.has(O)||(_.add(O),O.then(L,L))})}}function ec(p,b){var _=b.deletions;if(_!==null)for(var O=0;O<_.length;O++){var L=_[O];try{var z=p,Q=b,se=Q;e:for(;se!==null;){switch(se.tag){case 5:Ri=se.stateNode,Jl=!1;break e;case 3:Ri=se.stateNode.containerInfo,Jl=!0;break e;case 4:Ri=se.stateNode.containerInfo,Jl=!0;break e}se=se.return}if(Ri===null)throw Error(n(160));HH(z,Q,L),Ri=null,Jl=!1;var me=L.alternate;me!==null&&(me.return=null),L.return=null}catch(Oe){Io(L,b,Oe)}}if(b.subtreeFlags&12854)for(b=b.child;b!==null;)WH(b,p),b=b.sibling}function WH(p,b){var _=p.alternate,O=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(ec(b,p),Yc(p),O&4){try{Ay(3,p,p.return),_1(3,p)}catch(Kt){Io(p,p.return,Kt)}try{Ay(5,p,p.return)}catch(Kt){Io(p,p.return,Kt)}}break;case 1:ec(b,p),Yc(p),O&512&&_!==null&&Ug(_,_.return);break;case 5:if(ec(b,p),Yc(p),O&512&&_!==null&&Ug(_,_.return),p.flags&32){var L=p.stateNode;try{pe(L,"")}catch(Kt){Io(p,p.return,Kt)}}if(O&4&&(L=p.stateNode,L!=null)){var z=p.memoizedProps,Q=_!==null?_.memoizedProps:z,se=p.type,me=p.updateQueue;if(p.updateQueue=null,me!==null)try{se==="input"&&z.type==="radio"&&z.name!=null&&ue(L,z),Ne(se,Q);var Oe=Ne(se,z);for(Q=0;Q<me.length;Q+=2){var Je=me[Q],st=me[Q+1];Je==="style"?qe(L,st):Je==="dangerouslySetInnerHTML"?et(L,st):Je==="children"?pe(L,st):C(L,Je,st,Oe)}switch(se){case"input":Ce(L,z);break;case"textarea":$e(L,z);break;case"select":var Ze=L._wrapperState.wasMultiple;L._wrapperState.wasMultiple=!!z.multiple;var $t=z.value;$t!=null?Ue(L,!!z.multiple,$t,!1):Ze!==!!z.multiple&&(z.defaultValue!=null?Ue(L,!!z.multiple,z.defaultValue,!0):Ue(L,!!z.multiple,z.multiple?[]:"",!1))}L[wy]=z}catch(Kt){Io(p,p.return,Kt)}}break;case 6:if(ec(b,p),Yc(p),O&4){if(p.stateNode===null)throw Error(n(162));L=p.stateNode,z=p.memoizedProps;try{L.nodeValue=z}catch(Kt){Io(p,p.return,Kt)}}break;case 3:if(ec(b,p),Yc(p),O&4&&_!==null&&_.memoizedState.isDehydrated)try{sl(b.containerInfo)}catch(Kt){Io(p,p.return,Kt)}break;case 4:ec(b,p),Yc(p);break;case 13:ec(b,p),Yc(p),L=p.child,L.flags&8192&&(z=L.memoizedState!==null,L.stateNode.isHidden=z,!z||L.alternate!==null&&L.alternate.memoizedState!==null||(fR=ze())),O&4&&UH(p);break;case 22:if(Je=_!==null&&_.memoizedState!==null,p.mode&1?(es=(Oe=es)||Je,ec(b,p),es=Oe):ec(b,p),Yc(p),O&8192){if(Oe=p.memoizedState!==null,(p.stateNode.isHidden=Oe)&&!Je&&(p.mode&1)!==0)for(zt=p,Je=p.child;Je!==null;){for(st=zt=Je;zt!==null;){switch(Ze=zt,$t=Ze.child,Ze.tag){case 0:case 11:case 14:case 15:Ay(4,Ze,Ze.return);break;case 1:Ug(Ze,Ze.return);var Ht=Ze.stateNode;if(typeof Ht.componentWillUnmount=="function"){O=Ze,_=Ze.return;try{b=O,Ht.props=b.memoizedProps,Ht.state=b.memoizedState,Ht.componentWillUnmount()}catch(Kt){Io(O,_,Kt)}}break;case 5:Ug(Ze,Ze.return);break;case 22:if(Ze.memoizedState!==null){KH(st);continue}}$t!==null?($t.return=Ze,zt=$t):KH(st)}Je=Je.sibling}e:for(Je=null,st=p;;){if(st.tag===5){if(Je===null){Je=st;try{L=st.stateNode,Oe?(z=L.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(se=st.stateNode,me=st.memoizedProps.style,Q=me!=null&&me.hasOwnProperty("display")?me.display:null,se.style.display=Le("display",Q))}catch(Kt){Io(p,p.return,Kt)}}}else if(st.tag===6){if(Je===null)try{st.stateNode.nodeValue=Oe?"":st.memoizedProps}catch(Kt){Io(p,p.return,Kt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===p)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===p)break e;for(;st.sibling===null;){if(st.return===null||st.return===p)break e;Je===st&&(Je=null),st=st.return}Je===st&&(Je=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:ec(b,p),Yc(p),O&4&&UH(p);break;case 21:break;default:ec(b,p),Yc(p)}}function Yc(p){var b=p.flags;if(b&2){try{e:{for(var _=p.return;_!==null;){if(zH(_)){var O=_;break e}_=_.return}throw Error(n(160))}switch(O.tag){case 5:var L=O.stateNode;O.flags&32&&(pe(L,""),O.flags&=-33);var z=BH(p);cR(p,z,L);break;case 3:case 4:var Q=O.stateNode.containerInfo,se=BH(p);lR(p,se,Q);break;default:throw Error(n(161))}}catch(me){Io(p,p.return,me)}p.flags&=-3}b&4096&&(p.flags&=-4097)}function Gxe(p,b,_){zt=p,VH(p)}function VH(p,b,_){for(var O=(p.mode&1)!==0;zt!==null;){var L=zt,z=L.child;if(L.tag===22&&O){var Q=L.memoizedState!==null||P1;if(!Q){var se=L.alternate,me=se!==null&&se.memoizedState!==null||es;se=P1;var Oe=es;if(P1=Q,(es=me)&&!Oe)for(zt=L;zt!==null;)Q=zt,me=Q.child,Q.tag===22&&Q.memoizedState!==null?GH(L):me!==null?(me.return=Q,zt=me):GH(L);for(;z!==null;)zt=z,VH(z),z=z.sibling;zt=L,P1=se,es=Oe}qH(p)}else(L.subtreeFlags&8772)!==0&&z!==null?(z.return=L,zt=z):qH(p)}}function qH(p){for(;zt!==null;){var b=zt;if((b.flags&8772)!==0){var _=b.alternate;try{if((b.flags&8772)!==0)switch(b.tag){case 0:case 11:case 15:es||_1(5,b);break;case 1:var O=b.stateNode;if(b.flags&4&&!es)if(_===null)O.componentDidMount();else{var L=b.elementType===b.type?_.memoizedProps:Zl(b.type,_.memoizedProps);O.componentDidUpdate(L,_.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var z=b.updateQueue;z!==null&&K8(b,z,O);break;case 3:var Q=b.updateQueue;if(Q!==null){if(_=null,b.child!==null)switch(b.child.tag){case 5:_=b.child.stateNode;break;case 1:_=b.child.stateNode}K8(b,Q,_)}break;case 5:var se=b.stateNode;if(_===null&&b.flags&4){_=se;var me=b.memoizedProps;switch(b.type){case"button":case"input":case"select":case"textarea":me.autoFocus&&_.focus();break;case"img":me.src&&(_.src=me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(b.memoizedState===null){var Oe=b.alternate;if(Oe!==null){var Je=Oe.memoizedState;if(Je!==null){var st=Je.dehydrated;st!==null&&sl(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}es||b.flags&512&&aR(b)}catch(Ze){Io(b,b.return,Ze)}}if(b===p){zt=null;break}if(_=b.sibling,_!==null){_.return=b.return,zt=_;break}zt=b.return}}function KH(p){for(;zt!==null;){var b=zt;if(b===p){zt=null;break}var _=b.sibling;if(_!==null){_.return=b.return,zt=_;break}zt=b.return}}function GH(p){for(;zt!==null;){var b=zt;try{switch(b.tag){case 0:case 11:case 15:var _=b.return;try{_1(4,b)}catch(me){Io(b,_,me)}break;case 1:var O=b.stateNode;if(typeof O.componentDidMount=="function"){var L=b.return;try{O.componentDidMount()}catch(me){Io(b,L,me)}}var z=b.return;try{aR(b)}catch(me){Io(b,z,me)}break;case 5:var Q=b.return;try{aR(b)}catch(me){Io(b,Q,me)}}}catch(me){Io(b,b.return,me)}if(b===p){zt=null;break}var se=b.sibling;if(se!==null){se.return=b.return,zt=se;break}zt=b.return}}var Xxe=Math.ceil,I1=E.ReactCurrentDispatcher,uR=E.ReactCurrentOwner,dl=E.ReactCurrentBatchConfig,dr=0,hi=null,Xo=null,ki=0,Ta=0,Wg=Yd(0),oi=0,$y=null,Ah=0,T1=0,dR=0,Dy=null,sa=null,fR=0,Vg=1/0,Xu=null,M1=!1,hR=null,nf=null,O1=!1,rf=null,R1=0,jy=0,pR=null,k1=-1,A1=0;function Rs(){return(dr&6)!==0?ze():k1!==-1?k1:k1=ze()}function of(p){return(p.mode&1)===0?1:(dr&2)!==0&&ki!==0?ki&-ki:kxe.transition!==null?(A1===0&&(A1=Un()),A1):(p=on,p!==0||(p=window.event,p=p===void 0?16:$o(p.type)),p)}function tc(p,b,_,O){if(50<jy)throw jy=0,pR=null,Error(n(185));vn(p,_,O),((dr&2)===0||p!==hi)&&(p===hi&&((dr&2)===0&&(T1|=_),oi===4&&sf(p,ki)),aa(p,O),_===1&&dr===0&&(b.mode&1)===0&&(Vg=ze()+500,a1&&Zd()))}function aa(p,b){var _=p.callbackNode;ct(p,b);var O=$n(p,p===hi?ki:0);if(O===0)_!==null&&De(_),p.callbackNode=null,p.callbackPriority=0;else if(b=O&-O,p.callbackPriority!==b){if(_!=null&&De(_),b===1)p.tag===0?Rxe(YH.bind(null,p)):D8(YH.bind(null,p)),Ixe(function(){(dr&6)===0&&Zd()}),_=null;else{switch(Or(O)){case 1:_=mn;break;case 4:_=An;break;case 16:_=Qn;break;case 536870912:_=Mt;break;default:_=Qn}_=o9(_,XH.bind(null,p))}p.callbackPriority=b,p.callbackNode=_}}function XH(p,b){if(k1=-1,A1=0,(dr&6)!==0)throw Error(n(327));var _=p.callbackNode;if(qg()&&p.callbackNode!==_)return null;var O=$n(p,p===hi?ki:0);if(O===0)return null;if((O&30)!==0||(O&p.expiredLanes)!==0||b)b=$1(p,O);else{b=O;var L=dr;dr|=2;var z=ZH();(hi!==p||ki!==b)&&(Xu=null,Vg=ze()+500,Dh(p,b));do try{Zxe();break}catch(se){QH(p,se)}while(!0);kO(),I1.current=z,dr=L,Xo!==null?b=0:(hi=null,ki=0,b=oi)}if(b!==0){if(b===2&&(L=Fn(p),L!==0&&(O=L,b=gR(p,L))),b===1)throw _=$y,Dh(p,0),sf(p,O),aa(p,ze()),_;if(b===6)sf(p,O);else{if(L=p.current.alternate,(O&30)===0&&!Yxe(L)&&(b=$1(p,O),b===2&&(z=Fn(p),z!==0&&(O=z,b=gR(p,z))),b===1))throw _=$y,Dh(p,0),sf(p,O),aa(p,ze()),_;switch(p.finishedWork=L,p.finishedLanes=O,b){case 0:case 1:throw Error(n(345));case 2:jh(p,sa,Xu);break;case 3:if(sf(p,O),(O&130023424)===O&&(b=fR+500-ze(),10<b)){if($n(p,0)!==0)break;if(L=p.suspendedLanes,(L&O)!==O){Rs(),p.pingedLanes|=p.suspendedLanes&L;break}p.timeoutHandle=xO(jh.bind(null,p,sa,Xu),b);break}jh(p,sa,Xu);break;case 4:if(sf(p,O),(O&4194240)===O)break;for(b=p.eventTimes,L=-1;0<O;){var Q=31-Dr(O);z=1<<Q,Q=b[Q],Q>L&&(L=Q),O&=~z}if(O=L,O=ze()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*Xxe(O/1960))-O,10<O){p.timeoutHandle=xO(jh.bind(null,p,sa,Xu),O);break}jh(p,sa,Xu);break;case 5:jh(p,sa,Xu);break;default:throw Error(n(329))}}}return aa(p,ze()),p.callbackNode===_?XH.bind(null,p):null}function gR(p,b){var _=Dy;return p.current.memoizedState.isDehydrated&&(Dh(p,b).flags|=256),p=$1(p,b),p!==2&&(b=sa,sa=_,b!==null&&mR(b)),p}function mR(p){sa===null?sa=p:sa.push.apply(sa,p)}function Yxe(p){for(var b=p;;){if(b.flags&16384){var _=b.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var O=0;O<_.length;O++){var L=_[O],z=L.getSnapshot;L=L.value;try{if(!Yl(z(),L))return!1}catch{return!1}}}if(_=b.child,b.subtreeFlags&16384&&_!==null)_.return=b,b=_;else{if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function sf(p,b){for(b&=~dR,b&=~T1,p.suspendedLanes|=b,p.pingedLanes&=~b,p=p.expirationTimes;0<b;){var _=31-Dr(b),O=1<<_;p[_]=-1,b&=~O}}function YH(p){if((dr&6)!==0)throw Error(n(327));qg();var b=$n(p,0);if((b&1)===0)return aa(p,ze()),null;var _=$1(p,b);if(p.tag!==0&&_===2){var O=Fn(p);O!==0&&(b=O,_=gR(p,O))}if(_===1)throw _=$y,Dh(p,0),sf(p,b),aa(p,ze()),_;if(_===6)throw Error(n(345));return p.finishedWork=p.current.alternate,p.finishedLanes=b,jh(p,sa,Xu),aa(p,ze()),null}function vR(p,b){var _=dr;dr|=1;try{return p(b)}finally{dr=_,dr===0&&(Vg=ze()+500,a1&&Zd())}}function $h(p){rf!==null&&rf.tag===0&&(dr&6)===0&&qg();var b=dr;dr|=1;var _=dl.transition,O=on;try{if(dl.transition=null,on=1,p)return p()}finally{on=O,dl.transition=_,dr=b,(dr&6)===0&&Zd()}}function yR(){Ta=Wg.current,Zr(Wg)}function Dh(p,b){p.finishedWork=null,p.finishedLanes=0;var _=p.timeoutHandle;if(_!==-1&&(p.timeoutHandle=-1,_xe(_)),Xo!==null)for(_=Xo.return;_!==null;){var O=_;switch(IO(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&i1();break;case 3:Bg(),Zr(ra),Zr(Qi),zO();break;case 5:NO(O);break;case 4:Bg();break;case 13:Zr(ho);break;case 19:Zr(ho);break;case 10:AO(O.type._context);break;case 22:case 23:yR()}_=_.return}if(hi=p,Xo=p=af(p.current,null),ki=Ta=b,oi=0,$y=null,dR=T1=Ah=0,sa=Dy=null,Oh!==null){for(b=0;b<Oh.length;b++)if(_=Oh[b],O=_.interleaved,O!==null){_.interleaved=null;var L=O.next,z=_.pending;if(z!==null){var Q=z.next;z.next=L,O.next=Q}_.pending=O}Oh=null}return p}function QH(p,b){do{var _=Xo;try{if(kO(),v1.current=x1,y1){for(var O=po.memoizedState;O!==null;){var L=O.queue;L!==null&&(L.pending=null),O=O.next}y1=!1}if(kh=0,fi=ri=po=null,Ty=!1,My=0,uR.current=null,_===null||_.return===null){oi=1,$y=b,Xo=null;break}e:{var z=p,Q=_.return,se=_,me=b;if(b=ki,se.flags|=32768,me!==null&&typeof me=="object"&&typeof me.then=="function"){var Oe=me,Je=se,st=Je.tag;if((Je.mode&1)===0&&(st===0||st===11||st===15)){var Ze=Je.alternate;Ze?(Je.updateQueue=Ze.updateQueue,Je.memoizedState=Ze.memoizedState,Je.lanes=Ze.lanes):(Je.updateQueue=null,Je.memoizedState=null)}var $t=wH(Q);if($t!==null){$t.flags&=-257,CH($t,Q,se,z,b),$t.mode&1&&xH(z,Oe,b),b=$t,me=Oe;var Ht=b.updateQueue;if(Ht===null){var Kt=new Set;Kt.add(me),b.updateQueue=Kt}else Ht.add(me);break e}else{if((b&1)===0){xH(z,Oe,b),bR();break e}me=Error(n(426))}}else if(ro&&se.mode&1){var jo=wH(Q);if(jo!==null){(jo.flags&65536)===0&&(jo.flags|=256),CH(jo,Q,se,z,b),OO(Hg(me,se));break e}}z=me=Hg(me,se),oi!==4&&(oi=2),Dy===null?Dy=[z]:Dy.push(z),z=Q;do{switch(z.tag){case 3:z.flags|=65536,b&=-b,z.lanes|=b;var _e=bH(z,me,b);q8(z,_e);break e;case 1:se=me;var be=z.type,Te=z.stateNode;if((z.flags&128)===0&&(typeof be.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(nf===null||!nf.has(Te)))){z.flags|=65536,b&=-b,z.lanes|=b;var mt=SH(z,se,b);q8(z,mt);break e}}z=z.return}while(z!==null)}e9(_)}catch(Yt){b=Yt,Xo===_&&_!==null&&(Xo=_=_.return);continue}break}while(!0)}function ZH(){var p=I1.current;return I1.current=x1,p===null?x1:p}function bR(){(oi===0||oi===3||oi===2)&&(oi=4),hi===null||(Ah&268435455)===0&&(T1&268435455)===0||sf(hi,ki)}function $1(p,b){var _=dr;dr|=2;var O=ZH();(hi!==p||ki!==b)&&(Xu=null,Dh(p,b));do try{Qxe();break}catch(L){QH(p,L)}while(!0);if(kO(),dr=_,I1.current=O,Xo!==null)throw Error(n(261));return hi=null,ki=0,oi}function Qxe(){for(;Xo!==null;)JH(Xo)}function Zxe(){for(;Xo!==null&&!pt();)JH(Xo)}function JH(p){var b=r9(p.alternate,p,Ta);p.memoizedProps=p.pendingProps,b===null?e9(p):Xo=b,uR.current=null}function e9(p){var b=p;do{var _=b.alternate;if(p=b.return,(b.flags&32768)===0){if(_=Wxe(_,b,Ta),_!==null){Xo=_;return}}else{if(_=Vxe(_,b),_!==null){_.flags&=32767,Xo=_;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{oi=6,Xo=null;return}}if(b=b.sibling,b!==null){Xo=b;return}Xo=b=p}while(b!==null);oi===0&&(oi=5)}function jh(p,b,_){var O=on,L=dl.transition;try{dl.transition=null,on=1,Jxe(p,b,_,O)}finally{dl.transition=L,on=O}return null}function Jxe(p,b,_,O){do qg();while(rf!==null);if((dr&6)!==0)throw Error(n(327));_=p.finishedWork;var L=p.finishedLanes;if(_===null)return null;if(p.finishedWork=null,p.finishedLanes=0,_===p.current)throw Error(n(177));p.callbackNode=null,p.callbackPriority=0;var z=_.lanes|_.childLanes;if(xr(p,z),p===hi&&(Xo=hi=null,ki=0),(_.subtreeFlags&2064)===0&&(_.flags&2064)===0||O1||(O1=!0,o9(Qn,function(){return qg(),null})),z=(_.flags&15990)!==0,(_.subtreeFlags&15990)!==0||z){z=dl.transition,dl.transition=null;var Q=on;on=1;var se=dr;dr|=4,uR.current=null,Kxe(p,_),WH(_,p),bxe(bO),we=!!yO,bO=yO=null,p.current=_,Gxe(_),yt(),dr=se,on=Q,dl.transition=z}else p.current=_;if(O1&&(O1=!1,rf=p,R1=L),z=p.pendingLanes,z===0&&(nf=null),Co(_.stateNode),aa(p,ze()),b!==null)for(O=p.onRecoverableError,_=0;_<b.length;_++)L=b[_],O(L.value,{componentStack:L.stack,digest:L.digest});if(M1)throw M1=!1,p=hR,hR=null,p;return(R1&1)!==0&&p.tag!==0&&qg(),z=p.pendingLanes,(z&1)!==0?p===pR?jy++:(jy=0,pR=p):jy=0,Zd(),null}function qg(){if(rf!==null){var p=Or(R1),b=dl.transition,_=on;try{if(dl.transition=null,on=16>p?16:p,rf===null)var O=!1;else{if(p=rf,rf=null,R1=0,(dr&6)!==0)throw Error(n(331));var L=dr;for(dr|=4,zt=p.current;zt!==null;){var z=zt,Q=z.child;if((zt.flags&16)!==0){var se=z.deletions;if(se!==null){for(var me=0;me<se.length;me++){var Oe=se[me];for(zt=Oe;zt!==null;){var Je=zt;switch(Je.tag){case 0:case 11:case 15:Ay(8,Je,z)}var st=Je.child;if(st!==null)st.return=Je,zt=st;else for(;zt!==null;){Je=zt;var Ze=Je.sibling,$t=Je.return;if(FH(Je),Je===Oe){zt=null;break}if(Ze!==null){Ze.return=$t,zt=Ze;break}zt=$t}}}var Ht=z.alternate;if(Ht!==null){var Kt=Ht.child;if(Kt!==null){Ht.child=null;do{var jo=Kt.sibling;Kt.sibling=null,Kt=jo}while(Kt!==null)}}zt=z}}if((z.subtreeFlags&2064)!==0&&Q!==null)Q.return=z,zt=Q;else e:for(;zt!==null;){if(z=zt,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:Ay(9,z,z.return)}var _e=z.sibling;if(_e!==null){_e.return=z.return,zt=_e;break e}zt=z.return}}var be=p.current;for(zt=be;zt!==null;){Q=zt;var Te=Q.child;if((Q.subtreeFlags&2064)!==0&&Te!==null)Te.return=Q,zt=Te;else e:for(Q=be;zt!==null;){if(se=zt,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:_1(9,se)}}catch(Yt){Io(se,se.return,Yt)}if(se===Q){zt=null;break e}var mt=se.sibling;if(mt!==null){mt.return=se.return,zt=mt;break e}zt=se.return}}if(dr=L,Zd(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(un,p)}catch{}O=!0}return O}finally{on=_,dl.transition=b}}return!1}function t9(p,b,_){b=Hg(_,b),b=bH(p,b,1),p=ef(p,b,1),b=Rs(),p!==null&&(vn(p,1,b),aa(p,b))}function Io(p,b,_){if(p.tag===3)t9(p,p,_);else for(;b!==null;){if(b.tag===3){t9(b,p,_);break}else if(b.tag===1){var O=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(nf===null||!nf.has(O))){p=Hg(_,p),p=SH(b,p,1),b=ef(b,p,1),p=Rs(),b!==null&&(vn(b,1,p),aa(b,p));break}}b=b.return}}function ewe(p,b,_){var O=p.pingCache;O!==null&&O.delete(b),b=Rs(),p.pingedLanes|=p.suspendedLanes&_,hi===p&&(ki&_)===_&&(oi===4||oi===3&&(ki&130023424)===ki&&500>ze()-fR?Dh(p,0):dR|=_),aa(p,b)}function n9(p,b){b===0&&((p.mode&1)===0?b=1:(b=pr,pr<<=1,(pr&130023424)===0&&(pr=4194304)));var _=Rs();p=qu(p,b),p!==null&&(vn(p,b,_),aa(p,_))}function twe(p){var b=p.memoizedState,_=0;b!==null&&(_=b.retryLane),n9(p,_)}function nwe(p,b){var _=0;switch(p.tag){case 13:var O=p.stateNode,L=p.memoizedState;L!==null&&(_=L.retryLane);break;case 19:O=p.stateNode;break;default:throw Error(n(314))}O!==null&&O.delete(b),n9(p,_)}var r9;r9=function(p,b,_){if(p!==null)if(p.memoizedProps!==b.pendingProps||ra.current)ia=!0;else{if((p.lanes&_)===0&&(b.flags&128)===0)return ia=!1,Uxe(p,b,_);ia=(p.flags&131072)!==0}else ia=!1,ro&&(b.flags&1048576)!==0&&j8(b,c1,b.index);switch(b.lanes=0,b.tag){case 2:var O=b.type;E1(p,b),p=b.pendingProps;var L=$g(b,Qi.current);zg(b,_),L=UO(null,b,O,p,L,_);var z=WO();return b.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(b.tag=1,b.memoizedState=null,b.updateQueue=null,oa(O)?(z=!0,s1(b)):z=!1,b.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,jO(b),L.updater=w1,b.stateNode=L,L._reactInternals=b,YO(b,O,p,_),b=eR(null,b,O,!0,z,_)):(b.tag=0,ro&&z&&_O(b),Os(null,b,L,_),b=b.child),b;case 16:O=b.elementType;e:{switch(E1(p,b),p=b.pendingProps,L=O._init,O=L(O._payload),b.type=O,L=b.tag=owe(O),p=Zl(O,p),L){case 0:b=JO(null,b,O,p,_);break e;case 1:b=MH(null,b,O,p,_);break e;case 11:b=EH(null,b,O,p,_);break e;case 14:b=PH(null,b,O,Zl(O.type,p),_);break e}throw Error(n(306,O,""))}return b;case 0:return O=b.type,L=b.pendingProps,L=b.elementType===O?L:Zl(O,L),JO(p,b,O,L,_);case 1:return O=b.type,L=b.pendingProps,L=b.elementType===O?L:Zl(O,L),MH(p,b,O,L,_);case 3:e:{if(OH(b),p===null)throw Error(n(387));O=b.pendingProps,z=b.memoizedState,L=z.element,V8(p,b),g1(b,O,null,_);var Q=b.memoizedState;if(O=Q.element,z.isDehydrated)if(z={element:O,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},b.updateQueue.baseState=z,b.memoizedState=z,b.flags&256){L=Hg(Error(n(423)),b),b=RH(p,b,O,_,L);break e}else if(O!==L){L=Hg(Error(n(424)),b),b=RH(p,b,O,_,L);break e}else for(Ia=Xd(b.stateNode.containerInfo.firstChild),_a=b,ro=!0,Ql=null,_=U8(b,null,O,_),b.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Lg(),O===L){b=Gu(p,b,_);break e}Os(p,b,O,_)}b=b.child}return b;case 5:return G8(b),p===null&&MO(b),O=b.type,L=b.pendingProps,z=p!==null?p.memoizedProps:null,Q=L.children,SO(O,L)?Q=null:z!==null&&SO(O,z)&&(b.flags|=32),TH(p,b),Os(p,b,Q,_),b.child;case 6:return p===null&&MO(b),null;case 13:return kH(p,b,_);case 4:return LO(b,b.stateNode.containerInfo),O=b.pendingProps,p===null?b.child=Ng(b,null,O,_):Os(p,b,O,_),b.child;case 11:return O=b.type,L=b.pendingProps,L=b.elementType===O?L:Zl(O,L),EH(p,b,O,L,_);case 7:return Os(p,b,b.pendingProps,_),b.child;case 8:return Os(p,b,b.pendingProps.children,_),b.child;case 12:return Os(p,b,b.pendingProps.children,_),b.child;case 10:e:{if(O=b.type._context,L=b.pendingProps,z=b.memoizedProps,Q=L.value,qr(f1,O._currentValue),O._currentValue=Q,z!==null)if(Yl(z.value,Q)){if(z.children===L.children&&!ra.current){b=Gu(p,b,_);break e}}else for(z=b.child,z!==null&&(z.return=b);z!==null;){var se=z.dependencies;if(se!==null){Q=z.child;for(var me=se.firstContext;me!==null;){if(me.context===O){if(z.tag===1){me=Ku(-1,_&-_),me.tag=2;var Oe=z.updateQueue;if(Oe!==null){Oe=Oe.shared;var Je=Oe.pending;Je===null?me.next=me:(me.next=Je.next,Je.next=me),Oe.pending=me}}z.lanes|=_,me=z.alternate,me!==null&&(me.lanes|=_),$O(z.return,_,b),se.lanes|=_;break}me=me.next}}else if(z.tag===10)Q=z.type===b.type?null:z.child;else if(z.tag===18){if(Q=z.return,Q===null)throw Error(n(341));Q.lanes|=_,se=Q.alternate,se!==null&&(se.lanes|=_),$O(Q,_,b),Q=z.sibling}else Q=z.child;if(Q!==null)Q.return=z;else for(Q=z;Q!==null;){if(Q===b){Q=null;break}if(z=Q.sibling,z!==null){z.return=Q.return,Q=z;break}Q=Q.return}z=Q}Os(p,b,L.children,_),b=b.child}return b;case 9:return L=b.type,O=b.pendingProps.children,zg(b,_),L=cl(L),O=O(L),b.flags|=1,Os(p,b,O,_),b.child;case 14:return O=b.type,L=Zl(O,b.pendingProps),L=Zl(O.type,L),PH(p,b,O,L,_);case 15:return _H(p,b,b.type,b.pendingProps,_);case 17:return O=b.type,L=b.pendingProps,L=b.elementType===O?L:Zl(O,L),E1(p,b),b.tag=1,oa(O)?(p=!0,s1(b)):p=!1,zg(b,_),vH(b,O,L),YO(b,O,L,_),eR(null,b,O,!0,p,_);case 19:return $H(p,b,_);case 22:return IH(p,b,_)}throw Error(n(156,b.tag))};function o9(p,b){return gt(p,b)}function rwe(p,b,_,O){this.tag=p,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fl(p,b,_,O){return new rwe(p,b,_,O)}function SR(p){return p=p.prototype,!(!p||!p.isReactComponent)}function owe(p){if(typeof p=="function")return SR(p)?1:0;if(p!=null){if(p=p.$$typeof,p===N)return 11;if(p===F)return 14}return 2}function af(p,b){var _=p.alternate;return _===null?(_=fl(p.tag,b,p.key,p.mode),_.elementType=p.elementType,_.type=p.type,_.stateNode=p.stateNode,_.alternate=p,p.alternate=_):(_.pendingProps=b,_.type=p.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=p.flags&14680064,_.childLanes=p.childLanes,_.lanes=p.lanes,_.child=p.child,_.memoizedProps=p.memoizedProps,_.memoizedState=p.memoizedState,_.updateQueue=p.updateQueue,b=p.dependencies,_.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},_.sibling=p.sibling,_.index=p.index,_.ref=p.ref,_}function D1(p,b,_,O,L,z){var Q=2;if(O=p,typeof p=="function")SR(p)&&(Q=1);else if(typeof p=="string")Q=5;else e:switch(p){case T:return Lh(_.children,L,z,b);case M:Q=8,L|=8;break;case R:return p=fl(12,_,b,L|2),p.elementType=R,p.lanes=z,p;case k:return p=fl(13,_,b,L),p.elementType=k,p.lanes=z,p;case D:return p=fl(19,_,b,L),p.elementType=D,p.lanes=z,p;case U:return j1(_,L,z,b);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case A:Q=10;break e;case j:Q=9;break e;case N:Q=11;break e;case F:Q=14;break e;case H:Q=16,O=null;break e}throw Error(n(130,p==null?p:typeof p,""))}return b=fl(Q,_,b,L),b.elementType=p,b.type=O,b.lanes=z,b}function Lh(p,b,_,O){return p=fl(7,p,O,b),p.lanes=_,p}function j1(p,b,_,O){return p=fl(22,p,O,b),p.elementType=U,p.lanes=_,p.stateNode={isHidden:!1},p}function xR(p,b,_){return p=fl(6,p,null,b),p.lanes=_,p}function wR(p,b,_){return b=fl(4,p.children!==null?p.children:[],p.key,b),b.lanes=_,b.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},b}function iwe(p,b,_,O,L){this.tag=b,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rn(0),this.expirationTimes=rn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.identifierPrefix=O,this.onRecoverableError=L,this.mutableSourceEagerHydrationData=null}function CR(p,b,_,O,L,z,Q,se,me){return p=new iwe(p,b,_,se,me),b===1?(b=1,z===!0&&(b|=8)):b=0,z=fl(3,null,null,b),p.current=z,z.stateNode=p,z.memoizedState={element:O,isDehydrated:_,cache:null,transitions:null,pendingSuspenseBoundaries:null},jO(z),p}function swe(p,b,_){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:O==null?null:""+O,children:p,containerInfo:b,implementation:_}}function i9(p){if(!p)return Qd;p=p._reactInternals;e:{if(en(p)!==p||p.tag!==1)throw Error(n(170));var b=p;do{switch(b.tag){case 3:b=b.stateNode.context;break e;case 1:if(oa(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break e}}b=b.return}while(b!==null);throw Error(n(171))}if(p.tag===1){var _=p.type;if(oa(_))return A8(p,_,b)}return b}function s9(p,b,_,O,L,z,Q,se,me){return p=CR(_,O,!0,p,L,z,Q,se,me),p.context=i9(null),_=p.current,O=Rs(),L=of(_),z=Ku(O,L),z.callback=b??null,ef(_,z,L),p.current.lanes=L,vn(p,L,O),aa(p,O),p}function L1(p,b,_,O){var L=b.current,z=Rs(),Q=of(L);return _=i9(_),b.context===null?b.context=_:b.pendingContext=_,b=Ku(z,Q),b.payload={element:p},O=O===void 0?null:O,O!==null&&(b.callback=O),p=ef(L,b,Q),p!==null&&(tc(p,L,Q,z),p1(p,L,Q)),Q}function N1(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return p.child.stateNode;default:return p.child.stateNode}}function a9(p,b){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var _=p.retryLane;p.retryLane=_!==0&&_<b?_:b}}function ER(p,b){a9(p,b),(p=p.alternate)&&a9(p,b)}function awe(){return null}var l9=typeof reportError=="function"?reportError:function(p){console.error(p)};function PR(p){this._internalRoot=p}F1.prototype.render=PR.prototype.render=function(p){var b=this._internalRoot;if(b===null)throw Error(n(409));L1(p,b,null,null)},F1.prototype.unmount=PR.prototype.unmount=function(){var p=this._internalRoot;if(p!==null){this._internalRoot=null;var b=p.containerInfo;$h(function(){L1(null,p,null,null)}),b[Hu]=null}};function F1(p){this._internalRoot=p}F1.prototype.unstable_scheduleHydration=function(p){if(p){var b=Wc();p={blockedOn:null,target:p,priority:b};for(var _=0;_<Ts.length&&b!==0&&b<Ts[_].priority;_++);Ts.splice(_,0,p),_===0&&Lr(p)}};function _R(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)}function z1(p){return!(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11&&(p.nodeType!==8||p.nodeValue!==" react-mount-point-unstable "))}function c9(){}function lwe(p,b,_,O,L){if(L){if(typeof O=="function"){var z=O;O=function(){var Oe=N1(Q);z.call(Oe)}}var Q=s9(b,O,p,0,null,!1,!1,"",c9);return p._reactRootContainer=Q,p[Hu]=Q.current,Sy(p.nodeType===8?p.parentNode:p),$h(),Q}for(;L=p.lastChild;)p.removeChild(L);if(typeof O=="function"){var se=O;O=function(){var Oe=N1(me);se.call(Oe)}}var me=CR(p,0,!1,null,null,!1,!1,"",c9);return p._reactRootContainer=me,p[Hu]=me.current,Sy(p.nodeType===8?p.parentNode:p),$h(function(){L1(b,me,_,O)}),me}function B1(p,b,_,O,L){var z=_._reactRootContainer;if(z){var Q=z;if(typeof L=="function"){var se=L;L=function(){var me=N1(Q);se.call(me)}}L1(b,Q,p,L)}else Q=lwe(_,b,p,L,O);return N1(Q)}uo=function(p){switch(p.tag){case 3:var b=p.stateNode;if(b.current.memoizedState.isDehydrated){var _=no(b.pendingLanes);_!==0&&(or(b,_|1),aa(b,ze()),(dr&6)===0&&(Vg=ze()+500,Zd()))}break;case 13:$h(function(){var O=qu(p,1);if(O!==null){var L=Rs();tc(O,p,1,L)}}),ER(p,1)}},Eo=function(p){if(p.tag===13){var b=qu(p,134217728);if(b!==null){var _=Rs();tc(b,p,134217728,_)}ER(p,134217728)}},wr=function(p){if(p.tag===13){var b=of(p),_=qu(p,b);if(_!==null){var O=Rs();tc(_,p,b,O)}ER(p,b)}},Wc=function(){return on},zu=function(p,b){var _=on;try{return on=p,b()}finally{on=_}},gn=function(p,b,_){switch(b){case"input":if(Ce(p,_),b=_.name,_.type==="radio"&&b!=null){for(_=p;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]'),b=0;b<_.length;b++){var O=_[b];if(O!==p&&O.form===p.form){var L=o1(O);if(!L)throw Error(n(90));ie(O),Ce(O,L)}}}break;case"textarea":$e(p,_);break;case"select":b=_.value,b!=null&&Ue(p,!!_.multiple,b,!1)}},wt=vR,bt=$h;var cwe={usingClientEntryPoint:!1,Events:[Cy,kg,o1,Vt,an,vR]},Ly={findFiberByHostInstance:_h,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uwe={bundleType:Ly.bundleType,version:Ly.version,rendererPackageName:Ly.rendererPackageName,rendererConfig:Ly.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(p){return p=ur(p),p===null?null:p.stateNode},findFiberByHostInstance:Ly.findFiberByHostInstance||awe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var H1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!H1.isDisabled&&H1.supportsFiber)try{un=H1.inject(uwe),In=H1}catch{}}return la.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cwe,la.createPortal=function(p,b){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_R(b))throw Error(n(200));return swe(p,b,null,_)},la.createRoot=function(p,b){if(!_R(p))throw Error(n(299));var _=!1,O="",L=l9;return b!=null&&(b.unstable_strictMode===!0&&(_=!0),b.identifierPrefix!==void 0&&(O=b.identifierPrefix),b.onRecoverableError!==void 0&&(L=b.onRecoverableError)),b=CR(p,1,!1,null,null,_,!1,O,L),p[Hu]=b.current,Sy(p.nodeType===8?p.parentNode:p),new PR(b)},la.findDOMNode=function(p){if(p==null)return null;if(p.nodeType===1)return p;var b=p._reactInternals;if(b===void 0)throw typeof p.render=="function"?Error(n(188)):(p=Object.keys(p).join(","),Error(n(268,p)));return p=ur(b),p=p===null?null:p.stateNode,p},la.flushSync=function(p){return $h(p)},la.hydrate=function(p,b,_){if(!z1(b))throw Error(n(200));return B1(null,p,b,!0,_)},la.hydrateRoot=function(p,b,_){if(!_R(p))throw Error(n(405));var O=_!=null&&_.hydratedSources||null,L=!1,z="",Q=l9;if(_!=null&&(_.unstable_strictMode===!0&&(L=!0),_.identifierPrefix!==void 0&&(z=_.identifierPrefix),_.onRecoverableError!==void 0&&(Q=_.onRecoverableError)),b=s9(b,null,p,1,_??null,L,!1,z,Q),p[Hu]=b.current,Sy(p),O)for(p=0;p<O.length;p++)_=O[p],L=_._getVersion,L=L(_._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[_,L]:b.mutableSourceEagerHydrationData.push(_,L);return new F1(b)},la.render=function(p,b,_){if(!z1(b))throw Error(n(200));return B1(null,p,b,!1,_)},la.unmountComponentAtNode=function(p){if(!z1(p))throw Error(n(40));return p._reactRootContainer?($h(function(){B1(null,null,p,!1,function(){p._reactRootContainer=null,p[Hu]=null})}),!0):!1},la.unstable_batchedUpdates=vR,la.unstable_renderSubtreeIntoContainer=function(p,b,_,O){if(!z1(_))throw Error(n(200));if(p==null||p._reactInternals===void 0)throw Error(n(38));return B1(p,b,_,!1,O)},la.version="18.3.1-next-f1338f8080-20240426",la}var v9;function vte(){if(v9)return MR.exports;v9=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),MR.exports=bwe(),MR.exports}var y9;function Swe(){if(y9)return U1;y9=1;var t=vte();return U1.createRoot=t.createRoot,U1.hydrateRoot=t.hydrateRoot,U1}var yte=Swe(),Fy={},b9;function xwe(){if(b9)return Fy;b9=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.parse=s,Fy.serialize=c;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,i=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function s(f,h){const g=new i,y=f.length;if(y<2)return g;const m=(h==null?void 0:h.decode)||u;let S=0;do{const x=f.indexOf("=",S);if(x===-1)break;const C=f.indexOf(";",S),E=C===-1?y:C;if(x>E){S=f.lastIndexOf(";",x-1)+1;continue}const P=a(f,S,x),I=l(f,x,P),T=f.slice(P,I);if(g[T]===void 0){let M=a(f,x+1,E),R=l(f,E,M);const A=m(f.slice(M,R));g[T]=A}S=E+1}while(S<y);return g}function a(f,h,g){do{const y=f.charCodeAt(h);if(y!==32&&y!==9)return h}while(++h<g);return g}function l(f,h,g){for(;h>g;){const y=f.charCodeAt(--h);if(y!==32&&y!==9)return h+1}return g}function c(f,h,g){const y=(g==null?void 0:g.encode)||encodeURIComponent;if(!t.test(f))throw new TypeError(`argument name is invalid: ${f}`);const m=y(h);if(!e.test(m))throw new TypeError(`argument val is invalid: ${h}`);let S=f+"="+m;if(!g)return S;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);S+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);S+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);S+="; Path="+g.path}if(g.expires){if(!d(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);S+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(S+="; HttpOnly"),g.secure&&(S+="; Secure"),g.partitioned&&(S+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return S}function u(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function d(f){return o.call(f)==="[object Date]"}return Fy}xwe();var S9="popstate";function wwe(t={}){function e(r,o){let{pathname:i,search:s,hash:a}=r.location;return kL("",{pathname:i,search:s,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:LS(o)}return Ewe(e,n,null,t)}function wo(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cwe(){return Math.random().toString(36).substring(2,10)}function x9(t,e){return{usr:t.state,key:t.key,idx:e}}function kL(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Lv(e):e,state:n,key:e&&e.key||r||Cwe()}}function LS({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lv(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Ewe(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,a="POP",l=null,c=u();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function u(){return(s.state||{idx:null}).idx}function d(){a="POP";let m=u(),S=m==null?null:m-c;c=m,l&&l({action:a,location:y.location,delta:S})}function f(m,S){a="PUSH";let x=kL(y.location,m,S);c=u()+1;let C=x9(x,c),E=y.createHref(x);try{s.pushState(C,"",E)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;o.location.assign(E)}i&&l&&l({action:a,location:y.location,delta:1})}function h(m,S){a="REPLACE";let x=kL(y.location,m,S);c=u();let C=x9(x,c),E=y.createHref(x);s.replaceState(C,"",E),i&&l&&l({action:a,location:y.location,delta:0})}function g(m){return Pwe(m)}let y={get action(){return a},get location(){return t(o,s)},listen(m){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(S9,d),l=m,()=>{o.removeEventListener(S9,d),l=null}},createHref(m){return e(o,m)},createURL:g,encodeLocation(m){let S=g(m);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:h,go(m){return s.go(m)}};return y}function Pwe(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wo(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:LS(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function bte(t,e,n="/"){return _we(t,e,n,!1)}function _we(t,e,n,r){let o=typeof e=="string"?Lv(e):e,i=Ed(o.pathname||"/",n);if(i==null)return null;let s=Ste(t);Iwe(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=Nwe(i);a=jwe(s[l],c,r)}return a}function Ste(t,e=[],n=[],r=""){let o=(i,s,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};l.relativePath.startsWith("/")&&(wo(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=md([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(wo(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Ste(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:$we(c,i.index),routesMeta:u})};return t.forEach((i,s)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))o(i,s);else for(let l of xte(i.path))o(i,s,l)}),e}function xte(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let s=xte(r.join("/")),a=[];return a.push(...s.map(l=>l===""?i:[i,l].join("/"))),o&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Iwe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Dwe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Twe=/^:[\w-]+$/,Mwe=3,Owe=2,Rwe=1,kwe=10,Awe=-2,w9=t=>t==="*";function $we(t,e){let n=t.split("/"),r=n.length;return n.some(w9)&&(r+=Awe),e&&(r+=Owe),n.filter(o=>!w9(o)).reduce((o,i)=>o+(Twe.test(i)?Mwe:i===""?Rwe:kwe),r)}function Dwe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function jwe(t,e,n=!1){let{routesMeta:r}=t,o={},i="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=ZP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=ZP({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(o,d.params),s.push({params:o,pathname:md([i,d.pathname]),pathnameBase:Hwe(md([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=md([i,d.pathnameBase]))}return s}function ZP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Lwe(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let i=o[0],s=i.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let g=a[f]||"";s=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?c[u]=void 0:c[u]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:s,pattern:t}}function Lwe(t,e=!1,n=!0){bu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Nwe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bu(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ed(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Fwe(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Lv(t):t;return{pathname:n?n.startsWith("/")?n:zwe(n,e):e,search:Uwe(r),hash:Wwe(o)}}function zwe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function kR(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bwe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wte(t){let e=Bwe(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Cte(t,e,n,r=!1){let o;typeof t=="string"?o=Lv(t):(o={...t},wo(!o.pathname||!o.pathname.includes("?"),kR("?","pathname","search",o)),wo(!o.pathname||!o.pathname.includes("#"),kR("#","pathname","hash",o)),wo(!o.search||!o.search.includes("#"),kR("#","search","hash",o)));let i=t===""||o.pathname==="",s=i?"/":o.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;o.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Fwe(o,a),c=s&&s!=="/"&&s.endsWith("/"),u=(i||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var md=t=>t.join("/").replace(/\/\/+/g,"/"),Hwe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Uwe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wwe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Vwe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Ete=["POST","PUT","PATCH","DELETE"];new Set(Ete);var qwe=["GET",...Ete];new Set(qwe);var Nv=v.createContext(null);Nv.displayName="DataRouter";var OT=v.createContext(null);OT.displayName="DataRouterState";var Pte=v.createContext({isTransitioning:!1});Pte.displayName="ViewTransition";var Kwe=v.createContext(new Map);Kwe.displayName="Fetchers";var Gwe=v.createContext(null);Gwe.displayName="Await";var ku=v.createContext(null);ku.displayName="Navigation";var zx=v.createContext(null);zx.displayName="Location";var Au=v.createContext({outlet:null,matches:[],isDataRoute:!1});Au.displayName="Route";var H3=v.createContext(null);H3.displayName="RouteError";function Xwe(t,{relative:e}={}){wo(Bx(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=v.useContext(ku),{hash:o,pathname:i,search:s}=Hx(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:md([n,i])),r.createHref({pathname:a,search:s,hash:o})}function Bx(){return v.useContext(zx)!=null}function dg(){return wo(Bx(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(zx).location}var _te="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ite(t){v.useContext(ku).static||v.useLayoutEffect(t)}function U3(){let{isDataRoute:t}=v.useContext(Au);return t?c1e():Ywe()}function Ywe(){wo(Bx(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Nv),{basename:e,navigator:n}=v.useContext(ku),{matches:r}=v.useContext(Au),{pathname:o}=dg(),i=JSON.stringify(wte(r)),s=v.useRef(!1);return Ite(()=>{s.current=!0}),v.useCallback((l,c={})=>{if(bu(s.current,_te),!s.current)return;if(typeof l=="number"){n.go(l);return}let u=Cte(l,JSON.parse(i),o,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:md([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,i,o,t])}v.createContext(null);function Qwe(){let{matches:t}=v.useContext(Au),e=t[t.length-1];return e?e.params:{}}function Hx(t,{relative:e}={}){let{matches:n}=v.useContext(Au),{pathname:r}=dg(),o=JSON.stringify(wte(n));return v.useMemo(()=>Cte(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function Zwe(t,e){return Tte(t,e)}function Tte(t,e,n,r){var S;wo(Bx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=v.useContext(ku),{matches:i}=v.useContext(Au),s=i[i.length-1],a=s?s.params:{},l=s?s.pathname:"/",c=s?s.pathnameBase:"/",u=s&&s.route;{let x=u&&u.path||"";Mte(l,!u||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let d=dg(),f;if(e){let x=typeof e=="string"?Lv(e):e;wo(c==="/"||((S=x.pathname)==null?void 0:S.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=d;let h=f.pathname||"/",g=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=bte(t,{pathname:g});bu(u||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),bu(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=r1e(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:md([c,o.encodeLocation?o.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:md([c,o.encodeLocation?o.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&m?v.createElement(zx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},m):m}function Jwe(){let t=l1e(),e=Vwe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:o},n):null,s)}var e1e=v.createElement(Jwe,null),t1e=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(Au.Provider,{value:this.props.routeContext},v.createElement(H3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function n1e({routeContext:t,match:e,children:n}){let r=v.useContext(Nv);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(Au.Provider,{value:t},n)}function r1e(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,i=n==null?void 0:n.errors;if(i!=null){let l=o.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);wo(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let s=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=n,f=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||f){s=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,u)=>{let d,f=!1,h=null,g=null;n&&(d=i&&c.route.id?i[c.route.id]:void 0,h=c.route.errorElement||e1e,s&&(a<0&&u===0?(Mte("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,g=null):a===u&&(f=!0,g=c.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,u+1)),m=()=>{let S;return d?S=h:f?S=g:c.route.Component?S=v.createElement(c.route.Component,null):c.route.element?S=c.route.element:S=l,v.createElement(n1e,{match:c,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:S})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?v.createElement(t1e,{location:n.location,revalidation:n.revalidation,component:h,error:d,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}function W3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o1e(t){let e=v.useContext(Nv);return wo(e,W3(t)),e}function i1e(t){let e=v.useContext(OT);return wo(e,W3(t)),e}function s1e(t){let e=v.useContext(Au);return wo(e,W3(t)),e}function V3(t){let e=s1e(t),n=e.matches[e.matches.length-1];return wo(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function a1e(){return V3("useRouteId")}function l1e(){var r;let t=v.useContext(H3),e=i1e("useRouteError"),n=V3("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function c1e(){let{router:t}=o1e("useNavigate"),e=V3("useNavigate"),n=v.useRef(!1);return Ite(()=>{n.current=!0}),v.useCallback(async(o,i={})=>{bu(n.current,_te),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...i}))},[t,e])}var C9={};function Mte(t,e,n){!e&&!C9[t]&&(C9[t]=!0,bu(!1,n))}v.memo(u1e);function u1e({routes:t,future:e,state:n}){return Tte(t,void 0,n,e)}function qE(t){wo(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function d1e({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:i=!1}){wo(!Bx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),a=v.useMemo(()=>({basename:s,navigator:o,static:i,future:{}}),[s,o,i]);typeof n=="string"&&(n=Lv(n));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:f="default"}=n,h=v.useMemo(()=>{let g=Ed(l,s);return g==null?null:{location:{pathname:g,search:c,hash:u,state:d,key:f},navigationType:r}},[s,l,c,u,d,f,r]);return bu(h!=null,`<Router basename="${s}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:v.createElement(ku.Provider,{value:a},v.createElement(zx.Provider,{children:e,value:h}))}function f1e({children:t,location:e}){return Zwe(AL(t),e)}function AL(t,e=[]){let n=[];return v.Children.forEach(t,(r,o)=>{if(!v.isValidElement(r))return;let i=[...e,o];if(r.type===v.Fragment){n.push.apply(n,AL(r.props.children,i));return}wo(r.type===qE,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wo(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=AL(r.props.children,i)),n.push(s)}),n}var KE="get",GE="application/x-www-form-urlencoded";function RT(t){return t!=null&&typeof t.tagName=="string"}function h1e(t){return RT(t)&&t.tagName.toLowerCase()==="button"}function p1e(t){return RT(t)&&t.tagName.toLowerCase()==="form"}function g1e(t){return RT(t)&&t.tagName.toLowerCase()==="input"}function m1e(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function v1e(t,e){return t.button===0&&(!e||e==="_self")&&!m1e(t)}var W1=null;function y1e(){if(W1===null)try{new FormData(document.createElement("form"),0),W1=!1}catch{W1=!0}return W1}var b1e=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function AR(t){return t!=null&&!b1e.has(t)?(bu(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${GE}"`),null):t}function S1e(t,e){let n,r,o,i,s;if(p1e(t)){let a=t.getAttribute("action");r=a?Ed(a,e):null,n=t.getAttribute("method")||KE,o=AR(t.getAttribute("enctype"))||GE,i=new FormData(t)}else if(h1e(t)||g1e(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ed(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||KE,o=AR(t.getAttribute("formenctype"))||AR(a.getAttribute("enctype"))||GE,i=new FormData(a,t),!y1e()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,d)}}else{if(RT(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=KE,r=null,o=GE,s=t}return i&&o==="text/plain"&&(s=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:s}}function q3(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function x1e(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w1e(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function C1e(t,e,n){let r=await Promise.all(t.map(async o=>{let i=e.routes[o.route.id];if(i){let s=await x1e(i,n);return s.links?s.links():[]}return[]}));return I1e(r.flat(1).filter(w1e).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function E9(t,e,n,r,o,i){let s=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>s(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(s(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function E1e(t,e,{includeHydrateFallback:n}={}){return P1e(t.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let i=[o.module];return o.clientActionModule&&(i=i.concat(o.clientActionModule)),o.clientLoaderModule&&(i=i.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(i=i.concat(o.hydrateFallbackModule)),o.imports&&(i=i.concat(o.imports)),i}).flat(1))}function P1e(t){return[...new Set(t)]}function _1e(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function I1e(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let i=JSON.stringify(_1e(o));return n.has(i)||(n.add(i),r.push({key:i,link:o})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var T1e=new Set([100,101,204,205]);function M1e(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Ed(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function Ote(){let t=v.useContext(Nv);return q3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function O1e(){let t=v.useContext(OT);return q3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var K3=v.createContext(void 0);K3.displayName="FrameworkContext";function Rte(){let t=v.useContext(K3);return q3(t,"You must render this element inside a <HydratedRouter> element"),t}function R1e(t,e){let n=v.useContext(K3),[r,o]=v.useState(!1),[i,s]=v.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=v.useRef(null);v.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let y=S=>{S.forEach(x=>{s(x.isIntersecting)})},m=new IntersectionObserver(y,{threshold:.5});return f.current&&m.observe(f.current),()=>{m.disconnect()}}},[t]),v.useEffect(()=>{if(r){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[r]);let h=()=>{o(!0)},g=()=>{o(!1),s(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:zy(a,h),onBlur:zy(l,g),onMouseEnter:zy(c,h),onMouseLeave:zy(u,g),onTouchStart:zy(d,h)}]:[!1,f,{}]}function zy(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function k1e({page:t,...e}){let{router:n}=Ote(),r=v.useMemo(()=>bte(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?v.createElement($1e,{page:t,matches:r,...e}):null}function A1e(t){let{manifest:e,routeModules:n}=Rte(),[r,o]=v.useState([]);return v.useEffect(()=>{let i=!1;return C1e(t,e,n).then(s=>{i||o(s)}),()=>{i=!0}},[t,e,n]),r}function $1e({page:t,matches:e,...n}){let r=dg(),{manifest:o,routeModules:i}=Rte(),{basename:s}=Ote(),{loaderData:a,matches:l}=O1e(),c=v.useMemo(()=>E9(t,e,l,o,r,"data"),[t,e,l,o,r]),u=v.useMemo(()=>E9(t,e,l,o,r,"assets"),[t,e,l,o,r]),d=v.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,y=!1;if(e.forEach(S=>{var C;let x=o.routes[S.route.id];!x||!x.hasLoader||(!c.some(E=>E.route.id===S.route.id)&&S.route.id in a&&((C=i[S.route.id])!=null&&C.shouldRevalidate)||x.hasClientLoader?y=!0:g.add(S.route.id))}),g.size===0)return[];let m=M1e(t,s);return y&&g.size>0&&m.searchParams.set("_routes",e.filter(S=>g.has(S.route.id)).map(S=>S.route.id).join(",")),[m.pathname+m.search]},[s,a,r,o,c,e,t,i]),f=v.useMemo(()=>E1e(u,o),[u,o]),h=A1e(u);return v.createElement(v.Fragment,null,d.map(g=>v.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),f.map(g=>v.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),h.map(({key:g,link:y})=>v.createElement("link",{key:g,...y})))}function D1e(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var kte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kte&&(window.__reactRouterVersion="7.6.2")}catch{}function j1e({basename:t,children:e,window:n}){let r=v.useRef();r.current==null&&(r.current=wwe({window:n,v5Compat:!0}));let o=r.current,[i,s]=v.useState({action:o.action,location:o.location}),a=v.useCallback(l=>{v.startTransition(()=>s(l))},[s]);return v.useLayoutEffect(()=>o.listen(a),[o,a]),v.createElement(d1e,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:o})}var Ate=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$te=v.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:i,replace:s,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...f},h){let{basename:g}=v.useContext(ku),y=typeof c=="string"&&Ate.test(c),m,S=!1;if(typeof c=="string"&&y&&(m=c,kte))try{let R=new URL(window.location.href),A=c.startsWith("//")?new URL(R.protocol+c):new URL(c),j=Ed(A.pathname,g);A.origin===R.origin&&j!=null?c=j+A.search+A.hash:S=!0}catch{bu(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Xwe(c,{relative:o}),[C,E,P]=R1e(r,f),I=z1e(c,{replace:s,state:a,target:l,preventScrollReset:u,relative:o,viewTransition:d});function T(R){e&&e(R),R.defaultPrevented||I(R)}let M=v.createElement("a",{...f,...P,href:m||x,onClick:S||i?e:T,ref:D1e(h,E),target:l,"data-discover":!y&&n==="render"?"true":void 0});return C&&!y?v.createElement(v.Fragment,null,M,v.createElement(k1e,{page:x})):M});$te.displayName="Link";var L1e=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:i,to:s,viewTransition:a,children:l,...c},u){let d=Hx(s,{relative:c.relative}),f=dg(),h=v.useContext(OT),{navigator:g,basename:y}=v.useContext(ku),m=h!=null&&V1e(d)&&a===!0,S=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=f.pathname,C=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(x=x.toLowerCase(),C=C?C.toLowerCase():null,S=S.toLowerCase()),C&&y&&(C=Ed(C,y)||C);const E=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let P=x===S||!o&&x.startsWith(S)&&x.charAt(E)==="/",I=C!=null&&(C===S||!o&&C.startsWith(S)&&C.charAt(S.length)==="/"),T={isActive:P,isPending:I,isTransitioning:m},M=P?e:void 0,R;typeof r=="function"?R=r(T):R=[r,P?"active":null,I?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(T):i;return v.createElement($te,{...c,"aria-current":M,className:R,ref:u,style:A,to:s,viewTransition:a},typeof l=="function"?l(T):l)});L1e.displayName="NavLink";var N1e=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:i,method:s=KE,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...f},h)=>{let g=U1e(),y=W1e(a,{relative:c}),m=s.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&Ate.test(a),x=C=>{if(l&&l(C),C.defaultPrevented)return;C.preventDefault();let E=C.nativeEvent.submitter,P=(E==null?void 0:E.getAttribute("formmethod"))||s;g(E||C.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:o,state:i,relative:c,preventScrollReset:u,viewTransition:d})};return v.createElement("form",{ref:h,method:m,action:y,onSubmit:r?l:x,...f,"data-discover":!S&&t==="render"?"true":void 0})});N1e.displayName="Form";function F1e(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Dte(t){let e=v.useContext(Nv);return wo(e,F1e(t)),e}function z1e(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:i,viewTransition:s}={}){let a=U3(),l=dg(),c=Hx(t,{relative:i});return v.useCallback(u=>{if(v1e(u,e)){u.preventDefault();let d=n!==void 0?n:LS(l)===LS(c);a(t,{replace:d,state:r,preventScrollReset:o,relative:i,viewTransition:s})}},[l,a,c,n,r,e,t,o,i,s])}var B1e=0,H1e=()=>`__${String(++B1e)}__`;function U1e(){let{router:t}=Dte("useSubmit"),{basename:e}=v.useContext(ku),n=a1e();return v.useCallback(async(r,o={})=>{let{action:i,method:s,encType:a,formData:l,body:c}=S1e(r,e);if(o.navigate===!1){let u=o.fetcherKey||H1e();await t.fetch(u,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||s,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function W1e(t,{relative:e}={}){let{basename:n}=v.useContext(ku),r=v.useContext(Au);wo(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),i={...Hx(t||".",{relative:e})},s=dg();if(t==null){i.search=s.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:md([n,i.pathname])),LS(i)}function V1e(t,e={}){let n=v.useContext(Pte);wo(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Dte("useViewTransitionState"),o=Hx(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Ed(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Ed(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ZP(o.pathname,s)!=null||ZP(o.pathname,i)!=null}[...T1e];var Ya=vte();const JP=jc(Ya),q1e=mte({__proto__:null,default:JP},[Ya]);var By={},$R={exports:{}},P9;function Lt(){return P9||(P9=1,function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}($R)),$R.exports}var DR={exports:{}},jR={exports:{}},_9;function lh(){return _9||(_9=1,function(t){function e(n){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(jR)),jR.exports}var I9;function Ln(){return I9||(I9=1,function(t){var e=lh().default;function n(r,o){if(typeof WeakMap=="function")var i=new WeakMap,s=new WeakMap;return(t.exports=n=function(l,c){if(!c&&l&&l.__esModule)return l;var u,d,f={__proto__:null,default:l};if(l===null||e(l)!="object"&&typeof l!="function")return f;if(u=c?s:i){if(u.has(l))return u.get(l);u.set(l,f)}for(var h in l)h!=="default"&&{}.hasOwnProperty.call(l,h)&&((d=(u=Object.defineProperty)&&Object.getOwnPropertyDescriptor(l,h))&&(d.get||d.set)?u(f,h,d):f[h]=l[h]);return f},t.exports.__esModule=!0,t.exports.default=t.exports)(r,o)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(DR)),DR.exports}var nc={},Ma={},T9;function G3(){if(T9)return Ma;T9=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.call=i,Ma.default=void 0,Ma.note=r,Ma.noteOnce=a,Ma.preMessage=void 0,Ma.resetWarned=o,Ma.warning=n,Ma.warningOnce=s;var t={},e=Ma.preMessage=function(c){};function n(l,c){}function r(l,c){}function o(){t={}}function i(l,c,u){!c&&!t[u]&&(l(!1,u),t[u]=!0)}function s(l,c){i(n,l,c)}function a(l,c){i(r,l,c)}return s.preMessage=e,s.resetWarned=o,s.noteOnce=a,Ma.default=s,Ma}var M9;function kT(){if(M9)return nc;M9=1;var t=Ln().default;Object.defineProperty(nc,"__esModule",{value:!0}),nc.devUseWarning=nc.default=nc.WarningContext=void 0,nc.noop=r,nc.resetWarned=o;var e=t(Gt()),n=t(G3());function r(){}function o(){(0,n.resetWarned)()}let i=r;return nc.WarningContext=e.createContext({}),nc.devUseWarning=()=>{const s=()=>{};return s.deprecated=r,s},nc.default=i,nc}var Hy={},LR={exports:{}},NR={exports:{}},FR={exports:{}},O9;function jte(){return O9||(O9=1,function(t){function e(n,r){(r==null||r>n.length)&&(r=n.length);for(var o=0,i=Array(r);o<r;o++)i[o]=n[o];return i}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(FR)),FR.exports}var R9;function K1e(){return R9||(R9=1,function(t){var e=jte();function n(r){if(Array.isArray(r))return e(r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(NR)),NR.exports}var zR={exports:{}},k9;function Lte(){return k9||(k9=1,function(t){function e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(zR)),zR.exports}var BR={exports:{}},A9;function X3(){return A9||(A9=1,function(t){var e=jte();function n(r,o){if(r){if(typeof r=="string")return e(r,o);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(r,o):void 0}}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(BR)),BR.exports}var HR={exports:{}},$9;function G1e(){return $9||($9=1,function(t){function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(HR)),HR.exports}var D9;function AT(){return D9||(D9=1,function(t){var e=K1e(),n=Lte(),r=X3(),o=G1e();function i(s){return e(s)||n(s)||r(s)||o()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(LR)),LR.exports}var V1={exports:{}},Uy={},UR={exports:{}},j9;function fg(){return j9||(j9=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var i in o)({}).hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(UR)),UR.exports}var q1={},L9;function X1e(){if(L9)return q1;L9=1,Object.defineProperty(q1,"__esModule",{value:!0});var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};return q1.default=t,q1}var Wy={},WR={exports:{}},VR={exports:{}},N9;function Nte(){return N9||(N9=1,function(t){function e(n){if(Array.isArray(n))return n}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(VR)),VR.exports}var qR={exports:{}},F9;function Y1e(){return F9||(F9=1,function(t){function e(n,r){var o=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var i,s,a,l,c=[],u=!0,d=!1;try{if(a=(o=o.call(n)).next,r===0){if(Object(o)!==o)return;u=!1}else for(;!(u=(i=a.call(o)).done)&&(c.push(i.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&o.return!=null&&(l=o.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(qR)),qR.exports}var KR={exports:{}},z9;function Fte(){return z9||(z9=1,function(t){function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(KR)),KR.exports}var B9;function $T(){return B9||(B9=1,function(t){var e=Nte(),n=Y1e(),r=X3(),o=Fte();function i(s,a){return e(s)||n(s,a)||r(s,a)||o()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(WR)),WR.exports}var GR={exports:{}},XR={exports:{}},YR={exports:{}},H9;function Q1e(){return H9||(H9=1,function(t){var e=lh().default;function n(r,o){if(e(r)!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,o||"default");if(e(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(YR)),YR.exports}var U9;function Z1e(){return U9||(U9=1,function(t){var e=lh().default,n=Q1e();function r(o){var i=n(o,"string");return e(i)=="symbol"?i:i+""}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(XR)),XR.exports}var W9;function zte(){return W9||(W9=1,function(t){var e=Z1e();function n(r,o,i){return(o=e(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(GR)),GR.exports}var QR={exports:{}},ZR={exports:{}},V9;function J1e(){return V9||(V9=1,function(t){function e(n,r){if(n==null)return{};var o={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(r.indexOf(i)!==-1)continue;o[i]=n[i]}return o}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(ZR)),ZR.exports}var q9;function Bte(){return q9||(q9=1,function(t){var e=J1e();function n(r,o){if(r==null)return{};var i,s,a=e(r,o);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(s=0;s<l.length;s++)i=l[s],o.indexOf(i)===-1&&{}.propertyIsEnumerable.call(r,i)&&(a[i]=r[i])}return a}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(QR)),QR.exports}var JR={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var K9;function tl(){return K9||(K9=1,function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(i=o(i,r(a)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var a in i)e.call(i,a)&&i[a]&&(s=o(s,a));return s}function o(i,s){return s?i?i+" "+s:i+s:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()}(JR)),JR.exports}function Wt(t){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(t)}function eCe(t,e){if(Wt(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hte(t){var e=eCe(t,"string");return Wt(e)=="symbol"?e:e+""}function oe(t,e,n){return(e=Hte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const gi=Math.round;function ek(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(o=>parseFloat(o));for(let o=0;o<3;o+=1)r[o]=e(r[o]||0,n[o]||"",o);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const G9=(t,e,n)=>n===0?t:t/100;function Vy(t,e){const n=e||255;return t>n?n:t<0?0:t}let Xr=class Ute{constructor(e){oe(this,"isValid",!0),oe(this,"r",0),oe(this,"g",0),oe(this,"b",0),oe(this,"a",1),oe(this,"_h",void 0),oe(this,"_s",void 0),oe(this,"_l",void 0),oe(this,"_v",void 0),oe(this,"_max",void 0),oe(this,"_min",void 0),oe(this,"_brightness",void 0);function n(o){return o[0]in e&&o[1]in e&&o[2]in e}if(e)if(typeof e=="string"){let i=function(s){return o.startsWith(s)};var r=i;const o=e.trim();/^#?[A-F\d]{3,8}$/i.test(o)?this.fromHexString(o):i("rgb")?this.fromRgbString(o):i("hsl")?this.fromHslString(o):(i("hsv")||i("hsb"))&&this.fromHsvString(o)}else if(e instanceof Ute)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=Vy(e.r),this.g=Vy(e.g),this.b=Vy(e.b),this.a=typeof e.a=="number"?Vy(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(i){const s=i/255;return s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),o=e(this.b);return .2126*n+.7152*r+.0722*o}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=gi(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let o=this.getLightness()-e/100;return o<0&&(o=0),this._c({h:n,s:r,l:o,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let o=this.getLightness()+e/100;return o>1&&(o=1),this._c({h:n,s:r,l:o,a:this.a})}mix(e,n=50){const r=this._c(e),o=n/100,i=a=>(r[a]-this[a])*o+this[a],s={r:gi(i("r")),g:gi(i("g")),b:gi(i("b")),a:gi(i("a")*100)/100};return this._c(s)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),o=i=>gi((this[i]*this.a+n[i]*n.a*(1-this.a))/r);return this._c({r:o("r"),g:o("g"),b:o("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const o=(this.b||0).toString(16);if(e+=o.length===2?o:"0"+o,typeof this.a=="number"&&this.a>=0&&this.a<1){const i=gi(this.a*255).toString(16);e+=i.length===2?i:"0"+i}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=gi(this.getSaturation()*100),r=gi(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const o=this.clone();return o[e]=Vy(n,r),o}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(o,i){return parseInt(n[o]+n[i||o],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:o}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof o=="number"?o:1,n<=0){const f=gi(r*255);this.r=f,this.g=f,this.b=f}let i=0,s=0,a=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(i=c,s=u):l>=1&&l<2?(i=u,s=c):l>=2&&l<3?(s=c,a=u):l>=3&&l<4?(s=u,a=c):l>=4&&l<5?(i=u,a=c):l>=5&&l<6&&(i=c,a=u);const d=r-c/2;this.r=gi((i+d)*255),this.g=gi((s+d)*255),this.b=gi((a+d)*255)}fromHsv({h:e,s:n,v:r,a:o}){this._h=e%360,this._s=n,this._v=r,this.a=typeof o=="number"?o:1;const i=gi(r*255);if(this.r=i,this.g=i,this.b=i,n<=0)return;const s=e/60,a=Math.floor(s),l=s-a,c=gi(r*(1-n)*255),u=gi(r*(1-n*l)*255),d=gi(r*(1-n*(1-l))*255);switch(a){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=ek(e,G9);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=ek(e,G9);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=ek(e,(r,o)=>o.includes("%")?gi(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}};const tCe=Object.freeze(Object.defineProperty({__proto__:null,FastColor:Xr},Symbol.toStringTag,{value:"Module"}));var K1=2,X9=.16,nCe=.05,rCe=.05,oCe=.15,Wte=5,Vte=4,iCe=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function Y9(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-K1*e:Math.round(t.h)+K1*e:r=n?Math.round(t.h)+K1*e:Math.round(t.h)-K1*e,r<0?r+=360:r>=360&&(r-=360),r}function Q9(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-X9*e:e===Vte?r=t.s+X9:r=t.s+nCe*e,r>1&&(r=1),n&&e===Wte&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function Z9(t,e,n){var r;return n?r=t.v+rCe*e:r=t.v-oCe*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function ov(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new Xr(t),o=r.toHsv(),i=Wte;i>0;i-=1){var s=new Xr({h:Y9(o,i,!0),s:Q9(o,i,!0),v:Z9(o,i,!0)});n.push(s)}n.push(r);for(var a=1;a<=Vte;a+=1){var l=new Xr({h:Y9(o,a),s:Q9(o,a),v:Z9(o,a)});n.push(l)}return e.theme==="dark"?iCe.map(function(c){var u=c.index,d=c.amount;return new Xr(e.backgroundColor||"#141414").mix(n[u],d).toHexString()}):n.map(function(c){return c.toHexString()})}var XE={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},e_=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];e_.primary=e_[5];var t_=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];t_.primary=t_[5];var n_=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];n_.primary=n_[5];var NS=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];NS.primary=NS[5];var r_=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];r_.primary=r_[5];var o_=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];o_.primary=o_[5];var i_=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];i_.primary=i_[5];var s_=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];s_.primary=s_[5];var FS=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];FS.primary=FS[5];var a_=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];a_.primary=a_[5];var l_=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];l_.primary=l_[5];var c_=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];c_.primary=c_[5];var zS=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];zS.primary=zS[5];var sCe=zS,YE={red:e_,volcano:t_,orange:n_,gold:NS,yellow:r_,lime:o_,green:i_,cyan:s_,blue:FS,geekblue:a_,purple:l_,magenta:c_,grey:zS},u_=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];u_.primary=u_[5];var d_=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];d_.primary=d_[5];var f_=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];f_.primary=f_[5];var h_=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];h_.primary=h_[5];var p_=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];p_.primary=p_[5];var g_=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];g_.primary=g_[5];var m_=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];m_.primary=m_[5];var v_=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];v_.primary=v_[5];var y_=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];y_.primary=y_[5];var b_=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];b_.primary=b_[5];var S_=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];S_.primary=S_[5];var x_=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];x_.primary=x_[5];var w_=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];w_.primary=w_[5];var aCe={red:u_,volcano:d_,orange:f_,gold:h_,yellow:p_,lime:g_,green:m_,cyan:v_,blue:y_,geekblue:b_,purple:S_,magenta:x_,grey:w_};const lCe=Object.freeze(Object.defineProperty({__proto__:null,blue:FS,blueDark:y_,cyan:s_,cyanDark:v_,geekblue:a_,geekblueDark:b_,generate:ov,gold:NS,goldDark:h_,gray:sCe,green:i_,greenDark:m_,grey:zS,greyDark:w_,lime:o_,limeDark:g_,magenta:c_,magentaDark:x_,orange:n_,orangeDark:f_,presetDarkPalettes:aCe,presetPalettes:YE,presetPrimaryColors:XE,purple:l_,purpleDark:S_,red:e_,redDark:u_,volcano:t_,volcanoDark:d_,yellow:r_,yellowDark:p_},Symbol.toStringTag,{value:"Module"})),Fv=Ru(lCe);var qy={},J9;function Y3(){if(J9)return qy;J9=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.default=void 0;var t=Gt(),e=(0,t.createContext)({});return qy.default=e,qy}var Ky={},tk={exports:{}},e7;function Ux(){return e7||(e7=1,function(t){var e=zte();function n(o,i){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);i&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(o,l).enumerable})),s.push.apply(s,a)}return s}function r(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?n(Object(s),!0).forEach(function(a){e(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}(tk)),tk.exports}var ks={},Nh={},G1={},t7;function Wx(){if(t7)return G1;t7=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.default=t;function t(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return G1}var X1={},n7;function cCe(){if(n7)return X1;n7=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.default=t;function t(e,n){if(!e)return!1;if(e.contains)return e.contains(n);for(var r=n;r;){if(r===e)return!0;r=r.parentNode}return!1}return X1}var r7;function qte(){if(r7)return Nh;r7=1;var t=Lt().default;Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.clearContainerCache=m,Nh.injectCSS=f,Nh.removeCSS=g,Nh.updateCSS=S;var e=t(Ux()),n=t(Wx()),r=t(cCe()),o="data-rc-order",i="data-rc-priority",s="rc-util-key",a=new Map;function l(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=x.mark;return C?C.startsWith("data-")?C:"data-".concat(C):s}function c(x){if(x.attachTo)return x.attachTo;var C=document.querySelector("head");return C||document.body}function u(x){return x==="queue"?"prependQueue":x?"prepend":"append"}function d(x){return Array.from((a.get(x)||x).children).filter(function(C){return C.tagName==="STYLE"})}function f(x){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,n.default)())return null;var E=C.csp,P=C.prepend,I=C.priority,T=I===void 0?0:I,M=u(P),R=M==="prependQueue",A=document.createElement("style");A.setAttribute(o,M),R&&T&&A.setAttribute(i,"".concat(T)),E!=null&&E.nonce&&(A.nonce=E==null?void 0:E.nonce),A.innerHTML=x;var j=c(C),N=j.firstChild;if(P){if(R){var k=(C.styles||d(j)).filter(function(D){if(!["prepend","prependQueue"].includes(D.getAttribute(o)))return!1;var F=Number(D.getAttribute(i)||0);return T>=F});if(k.length)return j.insertBefore(A,k[k.length-1].nextSibling),A}j.insertBefore(A,N)}else j.appendChild(A);return A}function h(x){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=c(C);return(C.styles||d(E)).find(function(P){return P.getAttribute(l(C))===x})}function g(x){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E=h(x,C);if(E){var P=c(C);P.removeChild(E)}}function y(x,C){var E=a.get(x);if(!E||!(0,r.default)(document,E)){var P=f("",C),I=P.parentNode;a.set(x,I),x.removeChild(P)}}function m(){a.clear()}function S(x,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=c(E),I=d(P),T=(0,e.default)((0,e.default)({},E),{},{styles:I});y(P,T);var M=h(C,T);if(M){var R,A;if((R=T.csp)!==null&&R!==void 0&&R.nonce&&M.nonce!==((A=T.csp)===null||A===void 0?void 0:A.nonce)){var j;M.nonce=(j=T.csp)===null||j===void 0?void 0:j.nonce}return M.innerHTML!==x&&(M.innerHTML=x),M}var N=f(x,T);return N.setAttribute(l(T),C),N}return Nh}var Gy={},o7;function uCe(){if(o7)return Gy;o7=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.getShadowRoot=n,Gy.inShadow=e;function t(r){var o;return r==null||(o=r.getRootNode)===null||o===void 0?void 0:o.call(r)}function e(r){return t(r)instanceof ShadowRoot}function n(r){return e(r)?t(r):null}return Gy}var i7;function Q3(){if(i7)return ks;i7=1;var t=Ln().default,e=Lt().default;Object.defineProperty(ks,"__esModule",{value:!0}),ks.generate=g,ks.getSecondaryColor=y,ks.iconStyles=void 0,ks.isIconDefinition=f,ks.normalizeAttrs=h,ks.normalizeTwoToneColors=m,ks.useInsertStyles=ks.svgBaseProps=void 0,ks.warning=d;var n=e(Ux()),r=e(lh()),o=Fv,i=qte(),s=uCe(),a=e(G3()),l=t(Gt()),c=e(Y3());function u(x){return x.replace(/-(.)/g,function(C,E){return E.toUpperCase()})}function d(x,C){(0,a.default)(x,"[@ant-design/icons] ".concat(C))}function f(x){return(0,r.default)(x)==="object"&&typeof x.name=="string"&&typeof x.theme=="string"&&((0,r.default)(x.icon)==="object"||typeof x.icon=="function")}function h(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(x).reduce(function(C,E){var P=x[E];switch(E){case"class":C.className=P,delete C.class;break;default:delete C[E],C[u(E)]=P}return C},{})}function g(x,C,E){return E?l.default.createElement(x.tag,(0,n.default)((0,n.default)({key:C},h(x.attrs)),E),(x.children||[]).map(function(P,I){return g(P,"".concat(C,"-").concat(x.tag,"-").concat(I))})):l.default.createElement(x.tag,(0,n.default)({key:C},h(x.attrs)),(x.children||[]).map(function(P,I){return g(P,"".concat(C,"-").concat(x.tag,"-").concat(I))}))}function y(x){return(0,o.generate)(x)[0]}function m(x){return x?Array.isArray(x)?x:[x]:[]}ks.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var S=ks.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;return ks.useInsertStyles=function(C){var E=(0,l.useContext)(c.default),P=E.csp,I=E.prefixCls,T=E.layer,M=S;I&&(M=M.replace(/anticon/g,I)),T&&(M="@layer ".concat(T,` {
`).concat(M,`
}`)),(0,l.useEffect)(function(){var R=C.current,A=(0,s.getShadowRoot)(R);(0,i.updateCSS)(M,"@ant-design-icons",{prepend:!T,csp:P,attachTo:A})},[])},ks}var s7;function Kte(){if(s7)return Ky;s7=1;var t=Lt().default,e=Ln().default;Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.default=void 0;var n=t(Bte()),r=t(Ux()),o=e(Gt()),i=Q3(),s=["icon","className","onClick","style","primaryColor","secondaryColor"],a={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function l(d){var f=d.primaryColor,h=d.secondaryColor;a.primaryColor=f,a.secondaryColor=h||(0,i.getSecondaryColor)(f),a.calculated=!!h}function c(){return(0,r.default)({},a)}var u=function(f){var h=f.icon,g=f.className,y=f.onClick,m=f.style,S=f.primaryColor,x=f.secondaryColor,C=(0,n.default)(f,s),E=o.useRef(),P=a;if(S&&(P={primaryColor:S,secondaryColor:x||(0,i.getSecondaryColor)(S)}),(0,i.useInsertStyles)(E),(0,i.warning)((0,i.isIconDefinition)(h),"icon should be icon definiton, but got ".concat(h)),!(0,i.isIconDefinition)(h))return null;var I=h;return I&&typeof I.icon=="function"&&(I=(0,r.default)((0,r.default)({},I),{},{icon:I.icon(P.primaryColor,P.secondaryColor)})),(0,i.generate)(I.icon,"svg-".concat(I.name),(0,r.default)((0,r.default)({className:g,onClick:y,style:m,"data-icon":I.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},C),{},{ref:E}))};return u.displayName="IconReact",u.getTwoToneColors=c,u.setTwoToneColors=l,Ky.default=u,Ky}var Xy={},a7;function dCe(){if(a7)return Xy;a7=1;var t=Lt().default;Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.getTwoToneColor=i,Xy.setTwoToneColor=o;var e=t($T()),n=t(Kte()),r=Q3();function o(s){var a=(0,r.normalizeTwoToneColors)(s),l=(0,e.default)(a,2),c=l[0],u=l[1];return n.default.setTwoToneColors({primaryColor:c,secondaryColor:u})}function i(){var s=n.default.getTwoToneColors();return s.calculated?[s.primaryColor,s.secondaryColor]:s.primaryColor}return Xy}var l7;function zv(){if(l7)return Wy;l7=1;var t=Lt().default,e=Ln().default;Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.default=void 0;var n=t(fg()),r=t($T()),o=t(zte()),i=t(Bte()),s=e(Gt()),a=t(tl()),l=Fv,c=t(Y3()),u=t(Kte()),d=dCe(),f=Q3(),h=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,d.setTwoToneColor)(l.blue.primary);var g=s.forwardRef(function(y,m){var S=y.className,x=y.icon,C=y.spin,E=y.rotate,P=y.tabIndex,I=y.onClick,T=y.twoToneColor,M=(0,i.default)(y,h),R=s.useContext(c.default),A=R.prefixCls,j=A===void 0?"anticon":A,N=R.rootClassName,k=(0,a.default)(N,j,(0,o.default)((0,o.default)({},"".concat(j,"-").concat(x.name),!!x.name),"".concat(j,"-spin"),!!C||x.name==="loading"),S),D=P;D===void 0&&I&&(D=-1);var F=E?{msTransform:"rotate(".concat(E,"deg)"),transform:"rotate(".concat(E,"deg)")}:void 0,H=(0,f.normalizeTwoToneColors)(T),U=(0,r.default)(H,2),B=U[0],W=U[1];return s.createElement("span",(0,n.default)({role:"img","aria-label":x.name},M,{ref:m,tabIndex:D,onClick:I,className:k}),s.createElement(u.default,{icon:x,primaryColor:B,secondaryColor:W,style:F}))});return g.displayName="AntdIcon",g.getTwoToneColor=d.getTwoToneColor,g.setTwoToneColor=d.setTwoToneColor,Wy.default=g,Wy}var c7;function fCe(){if(c7)return Uy;c7=1;var t=Ln().default,e=Lt().default;Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.default=void 0;var n=e(fg()),r=t(Gt()),o=e(X1e()),i=e(zv()),s=function(c,u){return r.createElement(i.default,(0,n.default)({},c,{ref:u,icon:o.default}))},a=r.forwardRef(s);return Uy.default=a,Uy}var u7;function hCe(){return u7||(u7=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(fCe());function r(i){return i&&i.__esModule?i:{default:i}}const o=n;e.default=o,t.exports=o}(V1,V1.exports)),V1.exports}function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(null,arguments)}var pCe=Symbol.for("react.element"),gCe=Symbol.for("react.transitional.element"),mCe=Symbol.for("react.fragment");function Gte(t){return t&&Wt(t)==="object"&&(t.$$typeof===pCe||t.$$typeof===gCe)&&t.type===mCe}function Su(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return ce.Children.forEach(t,function(r){r==null&&!e.keepEmpty||(Array.isArray(r)?n=n.concat(Su(r)):Gte(r)&&r.props?n=n.concat(Su(r.props.children,e)):n.push(r))}),n}var $L={},vCe=function(e){};function yCe(t,e){}function bCe(t,e){}function SCe(){$L={}}function Xte(t,e,n){!e&&!$L[n]&&(t(!1,n),$L[n]=!0)}function Vi(t,e){Xte(yCe,t,e)}function xCe(t,e){Xte(bCe,t,e)}Vi.preMessage=vCe;Vi.resetWarned=SCe;Vi.noteOnce=xCe;function d7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d7(Object(n),!0).forEach(function(r){oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BS(t){return t instanceof HTMLElement||t instanceof SVGElement}function Yte(t){return t&&Wt(t)==="object"&&BS(t.nativeElement)?t.nativeElement:BS(t)?t:null}function QE(t){var e=Yte(t);if(e)return e;if(t instanceof ce.Component){var n;return(n=JP.findDOMNode)===null||n===void 0?void 0:n.call(JP,t)}return null}var nk={exports:{}},Cr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f7;function wCe(){if(f7)return Cr;f7=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function y(m){if(typeof m=="object"&&m!==null){var S=m.$$typeof;switch(S){case t:switch(m=m.type,m){case n:case o:case r:case c:case u:return m;default:switch(m=m&&m.$$typeof,m){case a:case s:case l:case f:case d:case i:return m;default:return S}}case e:return S}}}return Cr.ContextConsumer=s,Cr.ContextProvider=i,Cr.Element=t,Cr.ForwardRef=l,Cr.Fragment=n,Cr.Lazy=f,Cr.Memo=d,Cr.Portal=e,Cr.Profiler=o,Cr.StrictMode=r,Cr.Suspense=c,Cr.SuspenseList=u,Cr.isAsyncMode=function(){return!1},Cr.isConcurrentMode=function(){return!1},Cr.isContextConsumer=function(m){return y(m)===s},Cr.isContextProvider=function(m){return y(m)===i},Cr.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===t},Cr.isForwardRef=function(m){return y(m)===l},Cr.isFragment=function(m){return y(m)===n},Cr.isLazy=function(m){return y(m)===f},Cr.isMemo=function(m){return y(m)===d},Cr.isPortal=function(m){return y(m)===e},Cr.isProfiler=function(m){return y(m)===o},Cr.isStrictMode=function(m){return y(m)===r},Cr.isSuspense=function(m){return y(m)===c},Cr.isSuspenseList=function(m){return y(m)===u},Cr.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===n||m===o||m===r||m===c||m===u||m===h||typeof m=="object"&&m!==null&&(m.$$typeof===f||m.$$typeof===d||m.$$typeof===i||m.$$typeof===s||m.$$typeof===l||m.$$typeof===g||m.getModuleId!==void 0)},Cr.typeOf=y,Cr}var h7;function Qte(){return h7||(h7=1,nk.exports=wCe()),nk.exports}var rk=Qte();function Bv(t,e,n){var r=v.useRef({});return(!("value"in r.current)||n(r.current.condition,e))&&(r.current.value=t(),r.current.condition=e),r.current.value}var CCe=Number(v.version.split(".")[0]),Z3=function(e,n){typeof e=="function"?e(n):Wt(e)==="object"&&e&&"current"in e&&(e.current=n)},xa=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=n.filter(Boolean);return o.length<=1?o[0]:function(i){n.forEach(function(s){Z3(s,i)})}},hg=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Bv(function(){return xa.apply(void 0,n)},n,function(o,i){return o.length!==i.length||o.every(function(s,a){return s!==i[a]})})},ch=function(e){var n,r;if(!e)return!1;if(Zte(e)&&CCe>=19)return!0;var o=rk.isMemo(e)?e.type.type:e.type;return!(typeof o=="function"&&!((n=o.prototype)!==null&&n!==void 0&&n.render)&&o.$$typeof!==rk.ForwardRef||typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==rk.ForwardRef)};function Zte(t){return v.isValidElement(t)&&!Gte(t)}var pg=function(e){if(e&&Zte(e)){var n=e;return n.props.propertyIsEnumerable("ref")?n.props.ref:n.ref}return null},DL=v.createContext(null);function ECe(t){var e=t.children,n=t.onBatchResize,r=v.useRef(0),o=v.useRef([]),i=v.useContext(DL),s=v.useCallback(function(a,l,c){r.current+=1;var u=r.current;o.current.push({size:a,element:l,data:c}),Promise.resolve().then(function(){u===r.current&&(n==null||n(o.current),o.current=[])}),i==null||i(a,l,c)},[n,i]);return v.createElement(DL.Provider,{value:s},e)}var Jte=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(o,i){return o[0]===n?(r=i,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),o=this.__entries__[r];return o&&o[1]},e.prototype.set=function(n,r){var o=t(this.__entries__,n);~o?this.__entries__[o][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,o=t(r,n);~o&&r.splice(o,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var o=0,i=this.__entries__;o<i.length;o++){var s=i[o];n.call(r,s[1],s[0])}},e}()}(),jL=typeof window<"u"&&typeof document<"u"&&window.document===document,C_=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),PCe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(C_):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),_Ce=2;function ICe(t,e){var n=!1,r=!1,o=0;function i(){n&&(n=!1,t()),r&&a()}function s(){PCe(i)}function a(){var l=Date.now();if(n){if(l-o<_Ce)return;r=!0}else n=!0,r=!1,setTimeout(s,e);o=l}return a}var TCe=20,MCe=["top","right","bottom","left","width","height","size","weight"],OCe=typeof MutationObserver<"u",RCe=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=ICe(this.refresh.bind(this),TCe)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!jL||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),OCe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!jL||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,o=MCe.some(function(i){return!!~r.indexOf(i)});o&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),ene=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},iv=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||C_},tne=DT(0,0,0,0);function E_(t){return parseFloat(t)||0}function p7(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,o){var i=t["border-"+o+"-width"];return r+E_(i)},0)}function kCe(t){for(var e=["top","right","bottom","left"],n={},r=0,o=e;r<o.length;r++){var i=o[r],s=t["padding-"+i];n[i]=E_(s)}return n}function ACe(t){var e=t.getBBox();return DT(0,0,e.width,e.height)}function $Ce(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return tne;var r=iv(t).getComputedStyle(t),o=kCe(r),i=o.left+o.right,s=o.top+o.bottom,a=E_(r.width),l=E_(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+i)!==e&&(a-=p7(r,"left","right")+i),Math.round(l+s)!==n&&(l-=p7(r,"top","bottom")+s)),!jCe(t)){var c=Math.round(a+i)-e,u=Math.round(l+s)-n;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return DT(o.left,o.top,a,l)}var DCe=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof iv(t).SVGGraphicsElement}:function(t){return t instanceof iv(t).SVGElement&&typeof t.getBBox=="function"}}();function jCe(t){return t===iv(t).document.documentElement}function LCe(t){return jL?DCe(t)?ACe(t):$Ce(t):tne}function NCe(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(i.prototype);return ene(s,{x:e,y:n,width:r,height:o,top:n,right:e+r,bottom:o+n,left:e}),s}function DT(t,e,n,r){return{x:t,y:e,width:n,height:r}}var FCe=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=DT(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=LCe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),zCe=function(){function t(e,n){var r=NCe(n);ene(this,{target:e,contentRect:r})}return t}(),BCe=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Jte,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof iv(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new FCe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof iv(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new zCe(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),nne=typeof WeakMap<"u"?new WeakMap:new Jte,rne=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=RCe.getInstance(),r=new BCe(e,n,this);nne.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){rne.prototype[t]=function(){var e;return(e=nne.get(this))[t].apply(e,arguments)}});var HCe=function(){return typeof C_.ResizeObserver<"u"?C_.ResizeObserver:rne}(),Of=new Map;function UCe(t){t.forEach(function(e){var n,r=e.target;(n=Of.get(r))===null||n===void 0||n.forEach(function(o){return o(r)})})}var one=new HCe(UCe),WCe=null;function VCe(t,e){Of.has(t)||(Of.set(t,new Set),one.observe(t)),Of.get(t).add(e)}function qCe(t,e){Of.has(t)&&(Of.get(t).delete(e),Of.get(t).size||(one.unobserve(t),Of.delete(t)))}function ao(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hte(r.key),r)}}function lo(t,e,n){return e&&g7(t.prototype,e),n&&g7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HS(t,e){return HS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},HS(t,e)}function Nl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HS(t,e)}function $p(t){return $p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$p(t)}function jT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jT=function(){return!!t})()}function Rn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ine(t,e){if(e&&(Wt(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rn(t)}function Lc(t){var e=jT();return function(){var n,r=$p(t);if(e){var o=$p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ine(this,n)}}var KCe=function(t){Nl(n,t);var e=Lc(n);function n(){return ao(this,n),e.apply(this,arguments)}return lo(n,[{key:"render",value:function(){return this.props.children}}]),n}(v.Component);function GCe(t,e){var n=t.children,r=t.disabled,o=v.useRef(null),i=v.useRef(null),s=v.useContext(DL),a=typeof n=="function",l=a?n(o):n,c=v.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!a&&v.isValidElement(l)&&ch(l),d=u?pg(l):null,f=hg(d,o),h=function(){var S;return QE(o.current)||(o.current&&Wt(o.current)==="object"?QE((S=o.current)===null||S===void 0?void 0:S.nativeElement):null)||QE(i.current)};v.useImperativeHandle(e,function(){return h()});var g=v.useRef(t);g.current=t;var y=v.useCallback(function(m){var S=g.current,x=S.onResize,C=S.data,E=m.getBoundingClientRect(),P=E.width,I=E.height,T=m.offsetWidth,M=m.offsetHeight,R=Math.floor(P),A=Math.floor(I);if(c.current.width!==R||c.current.height!==A||c.current.offsetWidth!==T||c.current.offsetHeight!==M){var j={width:R,height:A,offsetWidth:T,offsetHeight:M};c.current=j;var N=T===Math.round(P)?P:T,k=M===Math.round(I)?I:M,D=de(de({},j),{},{offsetWidth:N,offsetHeight:k});s==null||s(D,m,C),x&&Promise.resolve().then(function(){x(D,m)})}},[]);return v.useEffect(function(){var m=h();return m&&!r&&VCe(m,y),function(){return qCe(m,y)}},[o.current,r]),v.createElement(KCe,{ref:i},u?v.cloneElement(l,{ref:f}):l)}var XCe=v.forwardRef(GCe),YCe="rc-observer-key";function QCe(t,e){var n=t.children,r=typeof n=="function"?[n]:Su(n);return r.map(function(o,i){var s=(o==null?void 0:o.key)||"".concat(YCe,"-").concat(i);return v.createElement(XCe,vt({},t,{key:s,ref:i===0?e:void 0}),o)})}var Ha=v.forwardRef(QCe);Ha.Collection=ECe;const ZCe=Object.freeze(Object.defineProperty({__proto__:null,_rs:WCe,default:Ha},Symbol.toStringTag,{value:"Module"})),JCe=Ru(ZCe);var Y1={},Q1={},m7;function sne(){if(m7)return Q1;m7=1;var t=Lt().default;Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.default=i;var e=t(lh()),n=Symbol.for("react.element"),r=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function i(s){return s&&(0,e.default)(s)==="object"&&(s.$$typeof===n||s.$$typeof===r)&&s.type===o}return Q1}var v7;function J3(){if(v7)return Y1;v7=1;var t=Lt().default;Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.default=r;var e=t(sne()),n=t(Gt());function r(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=[];return n.default.Children.forEach(o,function(a){a==null&&!i.keepEmpty||(Array.isArray(a)?s=s.concat(r(a)):(0,e.default)(a)&&a.props?s=s.concat(r(a.props.children,i)):s.push(a))}),s}return Y1}var Fh={},y7;function ez(){if(y7)return Fh;y7=1;var t=Lt().default,e=Ln().default;Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.useLayoutUpdateEffect=Fh.default=void 0;var n=e(Gt()),r=t(Wx()),o=(0,r.default)()?n.useLayoutEffect:n.useEffect,i=function(a,l){var c=n.useRef(!0);o(function(){return a(c.current)},l),o(function(){return c.current=!1,function(){c.current=!0}},[])};return Fh.useLayoutUpdateEffect=function(a,l){i(function(c){if(!c)return a()},l)},Fh.default=i,Fh}var Z1={},J1={},b7;function ane(){if(b7)return J1;b7=1;var t=Ln().default;Object.defineProperty(J1,"__esModule",{value:!0}),J1.default=n;var e=t(Gt());function n(r){var o=e.useRef();o.current=r;var i=e.useCallback(function(){for(var s,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(s=o.current)===null||s===void 0?void 0:s.call.apply(s,[o].concat(l))},[]);return i}return J1}var eC={},S7;function eEe(){if(S7)return eC;S7=1;var t=Ln().default,e=Lt().default;Object.defineProperty(eC,"__esModule",{value:!0}),eC.default=o;var n=e($T()),r=t(Gt());function o(i){var s=r.useRef(!1),a=r.useState(i),l=(0,n.default)(a,2),c=l[0],u=l[1];r.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]);function d(f,h){h&&s.current||u(f)}return[c,d]}return eC}var x7;function lne(){if(x7)return Z1;x7=1;var t=Lt().default;Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.default=s;var e=t($T()),n=t(ane()),r=ez(),o=t(eEe());function i(a){return a!==void 0}function s(a,l){var c=l||{},u=c.defaultValue,d=c.value,f=c.onChange,h=c.postState,g=(0,o.default)(function(){return i(d)?d:i(u)?typeof u=="function"?u():u:typeof a=="function"?a():a}),y=(0,e.default)(g,2),m=y[0],S=y[1],x=d!==void 0?d:m,C=h?h(x):x,E=(0,n.default)(f),P=(0,o.default)([x]),I=(0,e.default)(P,2),T=I[0],M=I[1];(0,r.useLayoutUpdateEffect)(function(){var A=T[0];m!==A&&E(m,A)},[T]),(0,r.useLayoutUpdateEffect)(function(){i(d)||S(d)},[d]);var R=(0,n.default)(function(A,j){S(A,j),M([x],j)});return[C,R]}return Z1}var tC={},w7;function cne(){if(w7)return tC;w7=1,Object.defineProperty(tC,"__esModule",{value:!0}),tC.default=t;function t(e,n){var r=Object.assign({},e);return Array.isArray(n)&&n.forEach(function(o){delete r[o]}),r}return tC}var As={},nC={},C7;function tz(){if(C7)return nC;C7=1;var t=Ln().default;Object.defineProperty(nC,"__esModule",{value:!0}),nC.default=n;var e=t(Gt());function n(r,o,i){var s=e.useRef({});return(!("value"in s.current)||i(s.current.condition,o))&&(s.current.value=r(),s.current.condition=o),s.current.value}return nC}var E7;function nz(){if(E7)return As;E7=1;var t=Lt().default;Object.defineProperty(As,"__esModule",{value:!0}),As.useComposeRef=As.supportRef=As.supportNodeRef=As.getNodeRef=As.fillRef=As.composeRef=void 0;var e=t(lh()),n=Gt(),r=Qte(),o=t(tz()),i=t(sne()),s=Number(n.version.split(".")[0]),a=As.fillRef=function(f,h){typeof f=="function"?f(h):(0,e.default)(f)==="object"&&f&&"current"in f&&(f.current=h)},l=As.composeRef=function(){for(var f=arguments.length,h=new Array(f),g=0;g<f;g++)h[g]=arguments[g];var y=h.filter(Boolean);return y.length<=1?y[0]:function(m){h.forEach(function(S){a(S,m)})}};As.useComposeRef=function(){for(var f=arguments.length,h=new Array(f),g=0;g<f;g++)h[g]=arguments[g];return(0,o.default)(function(){return l.apply(void 0,h)},h,function(y,m){return y.length!==m.length||y.every(function(S,x){return S!==m[x]})})};var c=As.supportRef=function(f){var h,g;if(!f)return!1;if(u(f)&&s>=19)return!0;var y=(0,r.isMemo)(f)?f.type.type:f.type;return!(typeof y=="function"&&!((h=y.prototype)!==null&&h!==void 0&&h.render)&&y.$$typeof!==r.ForwardRef||typeof f=="function"&&!((g=f.prototype)!==null&&g!==void 0&&g.render)&&f.$$typeof!==r.ForwardRef)};function u(d){return(0,n.isValidElement)(d)&&!(0,i.default)(d)}return As.supportNodeRef=function(f){return u(f)&&c(f)},As.getNodeRef=function(f){if(f&&u(f)){var h=f;return h.props.propertyIsEnumerable("ref")?h.props.ref:h.ref}return null},As}var ok={},rC={},P7;function tEe(){if(P7)return rC;P7=1;var t=Lt().default;Object.defineProperty(rC,"__esModule",{value:!0}),rC.isStyleSupport=o;var e=t(Wx()),n=function(s){if((0,e.default)()&&window.document.documentElement){var a=Array.isArray(s)?s:[s],l=window.document.documentElement;return a.some(function(c){return c in l.style})}return!1},r=function(s,a){if(!n(s))return!1;var l=document.createElement("div"),c=l.style[s];return l.style[s]=a,l.style[s]!==c};function o(i,s){return!Array.isArray(i)&&s!==void 0?r(i,s):n(i)}return rC}var _7;function nEe(){return _7||(_7=1,function(t){var e=Lt().default;Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDocElement=void 0,Object.defineProperty(t,"isStyleSupport",{enumerable:!0,get:function(){return r.isStyleSupport}});var n=e(Wx()),r=tEe();const o=()=>(0,n.default)()&&window.document.documentElement;t.canUseDocElement=o}(ok)),ok}var ik={};function une(t){if(Array.isArray(t))return t}function rEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,o,i,s,a=[],l=!0,c=!1;try{if(i=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,o=u}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}function LL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rz(t,e){if(t){if(typeof t=="string")return LL(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LL(t,e):void 0}}function dne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xe(t,e){return une(t)||rEe(t,e)||rz(t,e)||dne()}function oEe(t){if(Array.isArray(t))return LL(t)}function fne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function it(t){return oEe(t)||fne(t)||rz(t)||iEe()}function US(t){for(var e=0,n,r=0,o=t.length;o>=4;++r,o-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(o){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function vs(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function sEe(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var I7="data-rc-order",T7="data-rc-priority",aEe="rc-util-key",NL=new Map;function hne(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):aEe}function LT(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function lEe(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function oz(t){return Array.from((NL.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function pne(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!vs())return null;var n=e.csp,r=e.prepend,o=e.priority,i=o===void 0?0:o,s=lEe(r),a=s==="prependQueue",l=document.createElement("style");l.setAttribute(I7,s),a&&i&&l.setAttribute(T7,"".concat(i)),n!=null&&n.nonce&&(l.nonce=n==null?void 0:n.nonce),l.innerHTML=t;var c=LT(e),u=c.firstChild;if(r){if(a){var d=(e.styles||oz(c)).filter(function(f){if(!["prepend","prependQueue"].includes(f.getAttribute(I7)))return!1;var h=Number(f.getAttribute(T7)||0);return i>=h});if(d.length)return c.insertBefore(l,d[d.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function gne(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=LT(e);return(e.styles||oz(n)).find(function(r){return r.getAttribute(hne(e))===t})}function sv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=gne(t,e);if(n){var r=LT(e);r.removeChild(n)}}function cEe(t,e){var n=NL.get(t);if(!n||!sEe(document,n)){var r=pne("",e),o=r.parentNode;NL.set(t,o),t.removeChild(r)}}function hu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=LT(n),o=oz(r),i=de(de({},n),{},{styles:o});cEe(r,i);var s=gne(e,i);if(s){var a,l;if((a=i.csp)!==null&&a!==void 0&&a.nonce&&s.nonce!==((l=i.csp)===null||l===void 0?void 0:l.nonce)){var c;s.nonce=(c=i.csp)===null||c===void 0?void 0:c.nonce}return s.innerHTML!==t&&(s.innerHTML=t),s}var u=pne(t,i);return u.setAttribute(hne(i),e),u}function uEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Sn(t,e){if(t==null)return{};var n,r,o=uEe(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function Dp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function o(i,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=r.has(i);if(Vi(!l,"Warning: There may be circular references"),l)return!1;if(i===s)return!0;if(n&&a>1)return!1;r.add(i);var c=a+1;if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var u=0;u<i.length;u++)if(!o(i[u],s[u],c))return!1;return!0}if(i&&s&&Wt(i)==="object"&&Wt(s)==="object"){var d=Object.keys(i);return d.length!==Object.keys(s).length?!1:d.every(function(f){return o(i[f],s[f],c)})}return!1}return o(t,e)}var dEe="%";function FL(t){return t.join(dEe)}var fEe=function(){function t(e){ao(this,t),oe(this,"instanceId",void 0),oe(this,"cache",new Map),this.instanceId=e}return lo(t,[{key:"get",value:function(n){return this.opGet(FL(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(FL(n),r)}},{key:"opUpdate",value:function(n,r){var o=this.cache.get(n),i=r(o);i===null?this.cache.delete(n):this.cache.set(n,i)}}]),t}(),hEe=["children"],av="data-token-hash",yc="data-css-hash",Rf="__cssinjs_instance__";function iz(){var t=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(yc,"]"))||[],n=document.head.firstChild;Array.from(e).forEach(function(o){o[Rf]=o[Rf]||t,o[Rf]===t&&document.head.insertBefore(o,n)});var r={};Array.from(document.querySelectorAll("style[".concat(yc,"]"))).forEach(function(o){var i=o.getAttribute(yc);if(r[i]){if(o[Rf]===t){var s;(s=o.parentNode)===null||s===void 0||s.removeChild(o)}}else r[i]=!0})}return new fEe(t)}var Kf=v.createContext({hashPriority:"low",cache:iz(),defaultCache:!0}),pEe=function(e){var n=e.children,r=Sn(e,hEe),o=v.useContext(Kf),i=Bv(function(){var s=de({},o);Object.keys(r).forEach(function(l){var c=r[l];r[l]!==void 0&&(s[l]=c)});var a=r.cache;return s.cache=s.cache||iz(),s.defaultCache=!a&&o.defaultCache,s},[o,r],function(s,a){return!Dp(s[0],a[0],!0)||!Dp(s[1],a[1],!0)});return v.createElement(Kf.Provider,{value:i},n)},mne=lo(function t(){ao(this,t)}),vne="CALC_UNIT",gEe=new RegExp(vne,"g");function sk(t){return typeof t=="number"?"".concat(t).concat(vne):t}var mEe=function(t){Nl(n,t);var e=Lc(n);function n(r,o){var i;ao(this,n),i=e.call(this),oe(Rn(i),"result",""),oe(Rn(i),"unitlessCssVar",void 0),oe(Rn(i),"lowPriority",void 0);var s=Wt(r);return i.unitlessCssVar=o,r instanceof n?i.result="(".concat(r.result,")"):s==="number"?i.result=sk(r):s==="string"&&(i.result=r),i}return lo(n,[{key:"add",value:function(o){return o instanceof n?this.result="".concat(this.result," + ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," + ").concat(sk(o))),this.lowPriority=!0,this}},{key:"sub",value:function(o){return o instanceof n?this.result="".concat(this.result," - ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," - ").concat(sk(o))),this.lowPriority=!0,this}},{key:"mul",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof n?this.result="".concat(this.result," * ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," * ").concat(o)),this.lowPriority=!1,this}},{key:"div",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof n?this.result="".concat(this.result," / ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," / ").concat(o)),this.lowPriority=!1,this}},{key:"getResult",value:function(o){return this.lowPriority||o?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(o){var i=this,s=o||{},a=s.unit,l=!0;return typeof a=="boolean"?l=a:Array.from(this.unitlessCssVar).some(function(c){return i.result.includes(c)})&&(l=!1),this.result=this.result.replace(gEe,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(mne),vEe=function(t){Nl(n,t);var e=Lc(n);function n(r){var o;return ao(this,n),o=e.call(this),oe(Rn(o),"result",0),r instanceof n?o.result=r.result:typeof r=="number"&&(o.result=r),o}return lo(n,[{key:"add",value:function(o){return o instanceof n?this.result+=o.result:typeof o=="number"&&(this.result+=o),this}},{key:"sub",value:function(o){return o instanceof n?this.result-=o.result:typeof o=="number"&&(this.result-=o),this}},{key:"mul",value:function(o){return o instanceof n?this.result*=o.result:typeof o=="number"&&(this.result*=o),this}},{key:"div",value:function(o){return o instanceof n?this.result/=o.result:typeof o=="number"&&(this.result/=o),this}},{key:"equal",value:function(){return this.result}}]),n}(mne),yEe=function(e,n){var r=e==="css"?mEe:vEe;return function(o){return new r(o,n)}};function bEe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var sz=function(){function t(){ao(this,t),oe(this,"cache",void 0),oe(this,"keys",void 0),oe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return lo(t,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,o,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s={map:this.cache};return n.forEach(function(a){if(!s)s=void 0;else{var l;s=(l=s)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(a)}}),(r=s)!==null&&r!==void 0&&r.value&&i&&(s.value[1]=this.cacheCallTimes++),(o=s)===null||o===void 0?void 0:o.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var o=this;if(!this.has(n)){if(this.size()+1>t.MAX_CACHE_SIZE+t.MAX_CACHE_OFFSET){var i=this.keys.reduce(function(c,u){var d=xe(c,2),f=d[1];return o.internalGet(u)[1]<f?[u,o.internalGet(u)[1]]:c},[this.keys[0],this.cacheCallTimes]),s=xe(i,1),a=s[0];this.delete(a)}this.keys.push(n)}var l=this.cache;n.forEach(function(c,u){if(u===n.length-1)l.set(c,{value:[r,o.cacheCallTimes++]});else{var d=l.get(c);d?d.map||(d.map=new Map):l.set(c,{map:new Map}),l=l.get(c).map}})}},{key:"deleteByPath",value:function(n,r){var o=n.get(r[0]);if(r.length===1){var i;return o.map?n.set(r[0],{map:o.map}):n.delete(r[0]),(i=o.value)===null||i===void 0?void 0:i[0]}var s=this.deleteByPath(o.map,r.slice(1));return(!o.map||o.map.size===0)&&!o.value&&n.delete(r[0]),s}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!bEe(r,n)}),this.deleteByPath(this.cache,n)}}]),t}();oe(sz,"MAX_CACHE_SIZE",20);oe(sz,"MAX_CACHE_OFFSET",5);var M7=0,az=function(){function t(e){ao(this,t),oe(this,"derivatives",void 0),oe(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=M7,e.length===0&&(e.length>0,void 0),M7+=1}return lo(t,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,o){return o(n,r)},void 0)}}]),t}(),ak=new sz;function P_(t){var e=Array.isArray(t)?t:[t];return ak.has(e)||ak.set(e,new az(e)),ak.get(e)}var SEe=new WeakMap,lk={};function xEe(t,e){for(var n=SEe,r=0;r<e.length;r+=1){var o=e[r];n.has(o)||n.set(o,new WeakMap),n=n.get(o)}return n.has(lk)||n.set(lk,t()),n.get(lk)}var O7=new WeakMap;function nS(t){var e=O7.get(t)||"";return e||(Object.keys(t).forEach(function(n){var r=t[n];e+=n,r instanceof az?e+=r.id:r&&Wt(r)==="object"?e+=nS(r):e+=r}),e=US(e),O7.set(t,e)),e}function R7(t,e){return US("".concat(e,"_").concat(nS(t)))}var lv="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),yne="_bAmBoO_";function bne(t,e,n){if(vs()){var r,o;hu(t,lv);var i=document.createElement("div");i.style.position="fixed",i.style.left="0",i.style.top="0",e==null||e(i),document.body.appendChild(i);var s=n?n(i):(r=getComputedStyle(i).content)===null||r===void 0?void 0:r.includes(yne);return(o=i.parentNode)===null||o===void 0||o.removeChild(i),sv(lv),s}return!1}var ck=void 0;function wEe(){return ck===void 0&&(ck=bne(":where(.".concat(lv,') { content: "').concat(yne,'"!important; }'),function(t){t.className=lv})),ck}var uk=void 0;function CEe(){return uk===void 0&&(uk=bne(".".concat(lv," { inset-block: 93px !important; }"),function(t){t.className=lv},function(t){return getComputedStyle(t).bottom==="93px"})),uk}var zL=vs();function Re(t){return typeof t=="number"?"".concat(t,"px"):t}function WS(t,e,n){var r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(i)return t;var s=de(de({},o),{},(r={},oe(r,av,e),oe(r,yc,n),r)),a=Object.keys(s).map(function(l){var c=s[l];return c?"".concat(l,'="').concat(c,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(a,">").concat(t,"</style>")}var rS=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},EEe=function(e,n,r){return Object.keys(e).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(e).map(function(o){var i=xe(o,2),s=i[0],a=i[1];return"".concat(s,":").concat(a,";")}).join(""),"}"):""},Sne=function(e,n,r){var o={},i={};return Object.entries(e).forEach(function(s){var a,l,c=xe(s,2),u=c[0],d=c[1];if(r!=null&&(a=r.preserve)!==null&&a!==void 0&&a[u])i[u]=d;else if((typeof d=="string"||typeof d=="number")&&!(r!=null&&(l=r.ignore)!==null&&l!==void 0&&l[u])){var f,h=rS(u,r==null?void 0:r.prefix);o[h]=typeof d=="number"&&!(r!=null&&(f=r.unitless)!==null&&f!==void 0&&f[u])?"".concat(d,"px"):String(d),i[u]="var(".concat(h,")")}}),[i,EEe(o,n,{scope:r==null?void 0:r.scope})]},k7=vs()?v.useLayoutEffect:v.useEffect,lr=function(e,n){var r=v.useRef(!0);k7(function(){return e(r.current)},n),k7(function(){return r.current=!1,function(){r.current=!0}},[])},BL=function(e,n){lr(function(r){if(!r)return e()},n)},PEe=de({},jv),A7=PEe.useInsertionEffect,_Ee=function(e,n,r){v.useMemo(e,r),lr(function(){return n(!0)},r)},IEe=A7?function(t,e,n){return A7(function(){return t(),e()},n)}:_Ee,TEe=de({},jv),MEe=TEe.useInsertionEffect,OEe=function(e){var n=[],r=!1;function o(i){r||n.push(i)}return v.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(i){return i()})}},e),o},REe=function(){return function(e){e()}},kEe=typeof MEe<"u"?OEe:REe;function lz(t,e,n,r,o){var i=v.useContext(Kf),s=i.cache,a=[t].concat(it(e)),l=FL(a),c=kEe([l]),u=function(g){s.opUpdate(l,function(y){var m=y||[void 0,void 0],S=xe(m,2),x=S[0],C=x===void 0?0:x,E=S[1],P=E,I=P||n(),T=[C,I];return g?g(T):T})};v.useMemo(function(){u()},[l]);var d=s.opGet(l),f=d[1];return IEe(function(){o==null||o(f)},function(h){return u(function(g){var y=xe(g,2),m=y[0],S=y[1];return h&&m===0&&(o==null||o(f)),[m+1,S]}),function(){s.opUpdate(l,function(g){var y=g||[],m=xe(y,2),S=m[0],x=S===void 0?0:S,C=m[1],E=x-1;return E===0?(c(function(){(h||!s.opGet(l))&&(r==null||r(C,!1))}),null):[x-1,C]})}},[l]),f}var AEe={},$Ee="css",lp=new Map;function DEe(t){lp.set(t,(lp.get(t)||0)+1)}function jEe(t,e){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(av,'="').concat(t,'"]'));n.forEach(function(r){if(r[Rf]===e){var o;(o=r.parentNode)===null||o===void 0||o.removeChild(r)}})}}var LEe=0;function NEe(t,e){lp.set(t,(lp.get(t)||0)-1);var n=Array.from(lp.keys()),r=n.filter(function(o){var i=lp.get(o)||0;return i<=0});n.length-r.length>LEe&&r.forEach(function(o){jEe(o,e),lp.delete(o)})}var xne=function(e,n,r,o){var i=r.getDerivativeToken(e),s=de(de({},i),n);return o&&(s=o(s)),s},wne="token";function Cne(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=v.useContext(Kf),o=r.cache.instanceId,i=r.container,s=n.salt,a=s===void 0?"":s,l=n.override,c=l===void 0?AEe:l,u=n.formatToken,d=n.getComputedToken,f=n.cssVar,h=xEe(function(){return Object.assign.apply(Object,[{}].concat(it(e)))},e),g=nS(h),y=nS(c),m=f?nS(f):"",S=lz(wne,[a,t.id,g,y,m],function(){var x,C=d?d(h,c,t):xne(h,c,t,u),E=de({},C),P="";if(f){var I=Sne(C,f.key,{prefix:f.prefix,ignore:f.ignore,unitless:f.unitless,preserve:f.preserve}),T=xe(I,2);C=T[0],P=T[1]}var M=R7(C,a);C._tokenKey=M,E._tokenKey=R7(E,a);var R=(x=f==null?void 0:f.key)!==null&&x!==void 0?x:M;C._themeKey=R,DEe(R);var A="".concat($Ee,"-").concat(US(M));return C._hashId=A,[C,A,E,P,(f==null?void 0:f.key)||""]},function(x){NEe(x[0]._themeKey,o)},function(x){var C=xe(x,4),E=C[0],P=C[3];if(f&&P){var I=hu(P,US("css-variables-".concat(E._themeKey)),{mark:yc,prepend:"queue",attachTo:i,priority:-999});I[Rf]=o,I.setAttribute(av,E._themeKey)}});return S}var FEe=function(e,n,r){var o=xe(e,5),i=o[2],s=o[3],a=o[4],l=r||{},c=l.plain;if(!s)return null;var u=i._tokenKey,d=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},h=WS(s,a,u,f,c);return[d,u,h]},Ene={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pne="comm",_ne="rule",Ine="decl",zEe="@import",BEe="@namespace",HEe="@keyframes",UEe="@layer",Tne=Math.abs,cz=String.fromCharCode;function Mne(t){return t.trim()}function ZE(t,e,n){return t.replace(e,n)}function WEe(t,e,n){return t.indexOf(e,n)}function Hm(t,e){return t.charCodeAt(e)|0}function cv(t,e,n){return t.slice(e,n)}function su(t){return t.length}function VEe(t){return t.length}function oC(t,e){return e.push(t),t}var NT=1,uv=1,One=0,jl=0,Jo=0,Hv="";function uz(t,e,n,r,o,i,s,a){return{value:t,root:e,parent:n,type:r,props:o,children:i,line:NT,column:uv,length:s,return:"",siblings:a}}function qEe(){return Jo}function KEe(){return Jo=jl>0?Hm(Hv,--jl):0,uv--,Jo===10&&(uv=1,NT--),Jo}function bc(){return Jo=jl<One?Hm(Hv,jl++):0,uv++,Jo===10&&(uv=1,NT++),Jo}function kf(){return Hm(Hv,jl)}function JE(){return jl}function FT(t,e){return cv(Hv,t,e)}function VS(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function GEe(t){return NT=uv=1,One=su(Hv=t),jl=0,[]}function XEe(t){return Hv="",t}function dk(t){return Mne(FT(jl-1,HL(t===91?t+2:t===40?t+1:t)))}function YEe(t){for(;(Jo=kf())&&Jo<33;)bc();return VS(t)>2||VS(Jo)>3?"":" "}function QEe(t,e){for(;--e&&bc()&&!(Jo<48||Jo>102||Jo>57&&Jo<65||Jo>70&&Jo<97););return FT(t,JE()+(e<6&&kf()==32&&bc()==32))}function HL(t){for(;bc();)switch(Jo){case t:return jl;case 34:case 39:t!==34&&t!==39&&HL(Jo);break;case 40:t===41&&HL(t);break;case 92:bc();break}return jl}function ZEe(t,e){for(;bc()&&t+Jo!==57;)if(t+Jo===84&&kf()===47)break;return"/*"+FT(e,jl-1)+"*"+cz(t===47?t:bc())}function JEe(t){for(;!VS(kf());)bc();return FT(t,jl)}function ePe(t){return XEe(eP("",null,null,null,[""],t=GEe(t),0,[0],t))}function eP(t,e,n,r,o,i,s,a,l){for(var c=0,u=0,d=s,f=0,h=0,g=0,y=1,m=1,S=1,x=0,C="",E=o,P=i,I=r,T=C;m;)switch(g=x,x=bc()){case 40:if(g!=108&&Hm(T,d-1)==58){WEe(T+=ZE(dk(x),"&","&\f"),"&\f",Tne(c?a[c-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:T+=dk(x);break;case 9:case 10:case 13:case 32:T+=YEe(g);break;case 92:T+=QEe(JE()-1,7);continue;case 47:switch(kf()){case 42:case 47:oC(tPe(ZEe(bc(),JE()),e,n,l),l),(VS(g||1)==5||VS(kf()||1)==5)&&su(T)&&cv(T,-1,void 0)!==" "&&(T+=" ");break;default:T+="/"}break;case 123*y:a[c++]=su(T)*S;case 125*y:case 59:case 0:switch(x){case 0:case 125:m=0;case 59+u:S==-1&&(T=ZE(T,/\f/g,"")),h>0&&(su(T)-d||y===0&&g===47)&&oC(h>32?D7(T+";",r,n,d-1,l):D7(ZE(T," ","")+";",r,n,d-2,l),l);break;case 59:T+=";";default:if(oC(I=$7(T,e,n,c,u,o,a,C,E=[],P=[],d,i),i),x===123)if(u===0)eP(T,e,I,I,E,i,d,a,P);else{switch(f){case 99:if(Hm(T,3)===110)break;case 108:if(Hm(T,2)===97)break;default:u=0;case 100:case 109:case 115:}u?eP(t,I,I,r&&oC($7(t,I,I,0,0,o,a,C,o,E=[],d,P),P),o,P,d,a,r?E:P):eP(T,I,I,I,[""],P,0,a,P)}}c=u=h=0,y=S=1,C=T="",d=s;break;case 58:d=1+su(T),h=g;default:if(y<1){if(x==123)--y;else if(x==125&&y++==0&&KEe()==125)continue}switch(T+=cz(x),x*y){case 38:S=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(su(T)-1)*S,S=1;break;case 64:kf()===45&&(T+=dk(bc())),f=kf(),u=d=su(C=T+=JEe(JE())),x++;break;case 45:g===45&&su(T)==2&&(y=0)}}return i}function $7(t,e,n,r,o,i,s,a,l,c,u,d){for(var f=o-1,h=o===0?i:[""],g=VEe(h),y=0,m=0,S=0;y<r;++y)for(var x=0,C=cv(t,f+1,f=Tne(m=s[y])),E=t;x<g;++x)(E=Mne(m>0?h[x]+" "+C:ZE(C,/&\f/g,h[x])))&&(l[S++]=E);return uz(t,e,n,o===0?_ne:a,l,c,u,d)}function tPe(t,e,n,r){return uz(t,e,n,Pne,cz(qEe()),cv(t,2,-2),0,r)}function D7(t,e,n,r,o){return uz(t,e,n,Ine,cv(t,0,r),cv(t,r+1,-1),r,o)}function UL(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function nPe(t,e,n,r){switch(t.type){case UEe:if(t.children.length)break;case zEe:case BEe:case Ine:return t.return=t.return||t.value;case Pne:return"";case HEe:return t.return=t.value+"{"+UL(t.children,r)+"}";case _ne:if(!su(t.value=t.props.join(",")))return""}return su(n=UL(t.children,r))?t.return=t.value+"{"+n+"}":""}function fp(t,e){var n=e.path,r=e.parentSelectors;Vi(!1,"[Ant Design CSS-in-JS] ".concat(n?"Error in ".concat(n,": "):"").concat(t).concat(r.length?" Selector: ".concat(r.join(" | ")):""))}function rPe(t){var e,n=((e=t.match(/:not\(([^)]*)\)/))===null||e===void 0?void 0:e[1])||"",r=n.split(/(\[[^[]*])|(?=[.#])/).filter(function(o){return o});return r.length>1}function oPe(t){return t.parentSelectors.reduce(function(e,n){return e?n.includes("&")?n.replace(/&/g,e):"".concat(e," ").concat(n):n},"")}var iPe=function(e,n,r){var o=oPe(r),i=o.match(/:not\([^)]*\)/g)||[];i.length>0&&i.some(rPe)&&fp("Concat ':not' selector not support in legacy browsers.",r)},sPe=function(e,n,r){switch(e){case"marginLeft":case"marginRight":case"paddingLeft":case"paddingRight":case"left":case"right":case"borderLeft":case"borderLeftWidth":case"borderLeftStyle":case"borderLeftColor":case"borderRight":case"borderRightWidth":case"borderRightStyle":case"borderRightColor":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomLeftRadius":case"borderBottomRightRadius":fp("You seem to be using non-logical property '".concat(e,"' which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),r);return;case"margin":case"padding":case"borderWidth":case"borderStyle":if(typeof n=="string"){var o=n.split(" ").map(function(a){return a.trim()});o.length===4&&o[1]!==o[3]&&fp("You seem to be using '".concat(e,"' property with different left ").concat(e," and right ").concat(e,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),r)}return;case"clear":case"textAlign":(n==="left"||n==="right")&&fp("You seem to be using non-logical value '".concat(n,"' of ").concat(e,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),r);return;case"borderRadius":if(typeof n=="string"){var i=n.split("/").map(function(a){return a.trim()}),s=i.reduce(function(a,l){if(a)return a;var c=l.split(" ").map(function(u){return u.trim()});return c.length>=2&&c[0]!==c[1]||c.length===3&&c[1]!==c[2]||c.length===4&&c[2]!==c[3]?!0:a},!1);s&&fp("You seem to be using non-logical value '".concat(n,"' of ").concat(e,", which is not compatible with RTL mode. Please use logical properties and values instead. For more information: https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Logical_Properties."),r)}return}},aPe=function(e,n,r){(typeof n=="string"&&/NaN/g.test(n)||Number.isNaN(n))&&fp("Unexpected 'NaN' in property '".concat(e,": ").concat(n,"'."),r)},lPe=function(e,n,r){r.parentSelectors.some(function(o){var i=o.split(",");return i.some(function(s){return s.split("&").length>2})})&&fp("Should not use more than one `&` in a selector.",r)},oS="data-ant-cssinjs-cache-path",Rne="_FILE_STYLE__";function cPe(t){return Object.keys(t).map(function(e){var n=t[e];return"".concat(e,":").concat(n)}).join(";")}var wp,kne=!0;function uPe(){if(!wp&&(wp={},vs())){var t=document.createElement("div");t.className=oS,t.style.position="fixed",t.style.visibility="hidden",t.style.top="-9999px",document.body.appendChild(t);var e=getComputedStyle(t).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(o){var i=o.split(":"),s=xe(i,2),a=s[0],l=s[1];wp[a]=l});var n=document.querySelector("style[".concat(oS,"]"));if(n){var r;kne=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(t)}}function dPe(t){return uPe(),!!wp[t]}function fPe(t){var e=wp[t],n=null;if(e&&vs())if(kne)n=Rne;else{var r=document.querySelector("style[".concat(yc,'="').concat(wp[t],'"]'));r?n=r.innerHTML:delete wp[t]}return[n,e]}var hPe="_skip_check_",Ane="_multi_value_";function tP(t){var e=UL(ePe(t),nPe);return e.replace(/\{%%%\:[^;];}/g,";")}function pPe(t){return Wt(t)==="object"&&t&&(hPe in t||Ane in t)}function j7(t,e,n){if(!e)return t;var r=".".concat(e),o=n==="low"?":where(".concat(r,")"):r,i=t.split(",").map(function(s){var a,l=s.trim().split(/\s+/),c=l[0]||"",u=((a=c.match(/^\w+/))===null||a===void 0?void 0:a[0])||"";return c="".concat(u).concat(o).concat(c.slice(u.length)),[c].concat(it(l.slice(1))).join(" ")});return i.join(",")}var gPe=function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},o=r.root,i=r.injectHash,s=r.parentSelectors,a=n.hashId,l=n.layer;n.path;var c=n.hashPriority,u=n.transformers,d=u===void 0?[]:u;n.linters;var f="",h={};function g(S){var x=S.getName(a);if(!h[x]){var C=t(S.style,n,{root:!1,parentSelectors:s}),E=xe(C,1),P=E[0];h[x]="@keyframes ".concat(S.getName(a)).concat(P)}}function y(S){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return S.forEach(function(C){Array.isArray(C)?y(C,x):C&&x.push(C)}),x}var m=y(Array.isArray(e)?e:[e]);return m.forEach(function(S){var x=typeof S=="string"&&!o?{}:S;if(typeof x=="string")f+="".concat(x,`
`);else if(x._keyframe)g(x);else{var C=d.reduce(function(E,P){var I;return(P==null||(I=P.visit)===null||I===void 0?void 0:I.call(P,E))||E},x);Object.keys(C).forEach(function(E){var P=C[E];if(Wt(P)==="object"&&P&&(E!=="animationName"||!P._keyframe)&&!pPe(P)){var I=!1,T=E.trim(),M=!1;(o||i)&&a?T.startsWith("@")?I=!0:T==="&"?T=j7("",a,c):T=j7(E,a,c):o&&!a&&(T==="&"||T==="")&&(T="",M=!0);var R=t(P,n,{root:M,injectHash:I,parentSelectors:[].concat(it(s),[T])}),A=xe(R,2),j=A[0],N=A[1];h=de(de({},h),N),f+="".concat(T).concat(j)}else{let F=function(H,U){var B=H.replace(/[A-Z]/g,function(K){return"-".concat(K.toLowerCase())}),W=U;!Ene[H]&&typeof W=="number"&&W!==0&&(W="".concat(W,"px")),H==="animationName"&&U!==null&&U!==void 0&&U._keyframe&&(g(U),W=U.getName(a)),f+="".concat(B,":").concat(W,";")};var k,D=(k=P==null?void 0:P.value)!==null&&k!==void 0?k:P;Wt(P)==="object"&&P!==null&&P!==void 0&&P[Ane]&&Array.isArray(D)?D.forEach(function(H){F(E,H)}):F(E,D)}})}}),o?l&&(f&&(f="@layer ".concat(l.name," {").concat(f,"}")),l.dependencies&&(h["@layer ".concat(l.name)]=l.dependencies.map(function(S){return"@layer ".concat(S,", ").concat(l.name,";")}).join(`
`))):f="{".concat(f,"}"),[f,h]};function $ne(t,e){return US("".concat(t.join("%")).concat(e))}function mPe(){return null}var Dne="style";function __(t,e){var n=t.token,r=t.path,o=t.hashId,i=t.layer,s=t.nonce,a=t.clientOnly,l=t.order,c=l===void 0?0:l,u=v.useContext(Kf),d=u.autoClear;u.mock;var f=u.defaultCache,h=u.hashPriority,g=u.container,y=u.ssrInline,m=u.transformers,S=u.linters,x=u.cache,C=u.layer,E=n._tokenKey,P=[E];C&&P.push("layer"),P.push.apply(P,it(r));var I=zL,T=lz(Dne,P,function(){var N=P.join("|");if(dPe(N)){var k=fPe(N),D=xe(k,2),F=D[0],H=D[1];if(F)return[F,E,H,{},a,c]}var U=e(),B=gPe(U,{hashId:o,hashPriority:h,layer:C?i:void 0,path:r.join("-"),transformers:m,linters:S}),W=xe(B,2),K=W[0],q=W[1],X=tP(K),Z=$ne(P,X);return[X,E,Z,q,a,c]},function(N,k){var D=xe(N,3),F=D[2];(k||d)&&zL&&sv(F,{mark:yc})},function(N){var k=xe(N,4),D=k[0];k[1];var F=k[2],H=k[3];if(I&&D!==Rne){var U={mark:yc,prepend:C?!1:"queue",attachTo:g,priority:c},B=typeof s=="function"?s():s;B&&(U.csp={nonce:B});var W=[],K=[];Object.keys(H).forEach(function(X){X.startsWith("@layer")?W.push(X):K.push(X)}),W.forEach(function(X){hu(tP(H[X]),"_layer-".concat(X),de(de({},U),{},{prepend:!0}))});var q=hu(D,F,U);q[Rf]=x.instanceId,q.setAttribute(av,E),K.forEach(function(X){hu(tP(H[X]),"_effect-".concat(X),U)})}}),M=xe(T,3),R=M[0],A=M[1],j=M[2];return function(N){var k;if(!y||I||!f)k=v.createElement(mPe,null);else{var D;k=v.createElement("style",vt({},(D={},oe(D,av,A),oe(D,yc,j),D),{dangerouslySetInnerHTML:{__html:R}}))}return v.createElement(v.Fragment,null,k,N)}}var vPe=function(e,n,r){var o=xe(e,6),i=o[0],s=o[1],a=o[2],l=o[3],c=o[4],u=o[5],d=r||{},f=d.plain;if(c)return null;var h=i,g={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)};return h=WS(i,s,a,g,f),l&&Object.keys(l).forEach(function(y){if(!n[y]){n[y]=!0;var m=tP(l[y]),S=WS(m,s,"_effect-".concat(y),g,f);y.startsWith("@layer")?h=S+h:h+=S}}),[u,a,h]},jne="cssVar",Lne=function(e,n){var r=e.key,o=e.prefix,i=e.unitless,s=e.ignore,a=e.token,l=e.scope,c=l===void 0?"":l,u=v.useContext(Kf),d=u.cache.instanceId,f=u.container,h=a._tokenKey,g=[].concat(it(e.path),[r,c,h]),y=lz(jne,g,function(){var m=n(),S=Sne(m,r,{prefix:o,unitless:i,ignore:s,scope:c}),x=xe(S,2),C=x[0],E=x[1],P=$ne(g,E);return[C,E,P,r]},function(m){var S=xe(m,3),x=S[2];zL&&sv(x,{mark:yc})},function(m){var S=xe(m,3),x=S[1],C=S[2];if(x){var E=hu(x,C,{mark:yc,prepend:"queue",attachTo:f,priority:-999});E[Rf]=d,E.setAttribute(av,r)}});return y},yPe=function(e,n,r){var o=xe(e,4),i=o[1],s=o[2],a=o[3],l=r||{},c=l.plain;if(!i)return null;var u=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(u)},f=WS(i,a,s,d,c);return[u,s,f]},Yy,bPe=(Yy={},oe(Yy,Dne,vPe),oe(Yy,wne,FEe),oe(Yy,jne,yPe),Yy);function SPe(t){return t!==null}function xPe(t,e){var n=typeof e=="boolean"?{plain:e}:e||{},r=n.plain,o=r===void 0?!1:r,i=n.types,s=i===void 0?["style","token","cssVar"]:i,a=new RegExp("^(".concat((typeof s=="string"?[s]:s).join("|"),")%")),l=Array.from(t.cache.keys()).filter(function(f){return a.test(f)}),c={},u={},d="";return l.map(function(f){var h=f.replace(a,"").replace(/%/g,"|"),g=f.split("%"),y=xe(g,1),m=y[0],S=bPe[m],x=S(t.cache.get(f)[1],c,{plain:o});if(!x)return null;var C=xe(x,3),E=C[0],P=C[1],I=C[2];return f.startsWith("style")&&(u[h]=P),[E,I]}).filter(SPe).sort(function(f,h){var g=xe(f,1),y=g[0],m=xe(h,1),S=m[0];return y-S}).forEach(function(f){var h=xe(f,2),g=h[1];d+=g}),d+=WS(".".concat(oS,'{content:"').concat(cPe(u),'";}'),void 0,void 0,oe({},oS,oS),o),d}var Yn=function(){function t(e,n){ao(this,t),oe(this,"name",void 0),oe(this,"style",void 0),oe(this,"_keyframe",!0),this.name=e,this.style=n}return lo(t,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),t}();function wPe(t){if(typeof t=="number")return[[t],!1];var e=String(t).trim(),n=e.match(/(.*)(!important)/),r=(n?n[1]:e).trim().split(/\s+/),o=[],i=0;return[r.reduce(function(s,a){if(a.includes("(")||a.includes(")")){var l=a.split("(").length-1,c=a.split(")").length-1;i+=l-c}return i>=0&&o.push(a),i===0&&(s.push(o.join(" ")),o=[]),s},[]),!!n]}function Kg(t){return t.notSplit=!0,t}var CPe={inset:["top","right","bottom","left"],insetBlock:["top","bottom"],insetBlockStart:["top"],insetBlockEnd:["bottom"],insetInline:["left","right"],insetInlineStart:["left"],insetInlineEnd:["right"],marginBlock:["marginTop","marginBottom"],marginBlockStart:["marginTop"],marginBlockEnd:["marginBottom"],marginInline:["marginLeft","marginRight"],marginInlineStart:["marginLeft"],marginInlineEnd:["marginRight"],paddingBlock:["paddingTop","paddingBottom"],paddingBlockStart:["paddingTop"],paddingBlockEnd:["paddingBottom"],paddingInline:["paddingLeft","paddingRight"],paddingInlineStart:["paddingLeft"],paddingInlineEnd:["paddingRight"],borderBlock:Kg(["borderTop","borderBottom"]),borderBlockStart:Kg(["borderTop"]),borderBlockEnd:Kg(["borderBottom"]),borderInline:Kg(["borderLeft","borderRight"]),borderInlineStart:Kg(["borderLeft"]),borderInlineEnd:Kg(["borderRight"]),borderBlockWidth:["borderTopWidth","borderBottomWidth"],borderBlockStartWidth:["borderTopWidth"],borderBlockEndWidth:["borderBottomWidth"],borderInlineWidth:["borderLeftWidth","borderRightWidth"],borderInlineStartWidth:["borderLeftWidth"],borderInlineEndWidth:["borderRightWidth"],borderBlockStyle:["borderTopStyle","borderBottomStyle"],borderBlockStartStyle:["borderTopStyle"],borderBlockEndStyle:["borderBottomStyle"],borderInlineStyle:["borderLeftStyle","borderRightStyle"],borderInlineStartStyle:["borderLeftStyle"],borderInlineEndStyle:["borderRightStyle"],borderBlockColor:["borderTopColor","borderBottomColor"],borderBlockStartColor:["borderTopColor"],borderBlockEndColor:["borderBottomColor"],borderInlineColor:["borderLeftColor","borderRightColor"],borderInlineStartColor:["borderLeftColor"],borderInlineEndColor:["borderRightColor"],borderStartStartRadius:["borderTopLeftRadius"],borderStartEndRadius:["borderTopRightRadius"],borderEndStartRadius:["borderBottomLeftRadius"],borderEndEndRadius:["borderBottomRightRadius"]};function iC(t,e){var n=t;return e&&(n="".concat(n," !important")),{_skip_check_:!0,value:n}}var EPe={visit:function(e){var n={};return Object.keys(e).forEach(function(r){var o=e[r],i=CPe[r];if(i&&(typeof o=="number"||typeof o=="string")){var s=wPe(o),a=xe(s,2),l=a[0],c=a[1];i.length&&i.notSplit?i.forEach(function(u){n[u]=iC(o,c)}):i.length===1?n[i[0]]=iC(l[0],c):i.length===2?i.forEach(function(u,d){var f;n[u]=iC((f=l[d])!==null&&f!==void 0?f:l[0],c)}):i.length===4?i.forEach(function(u,d){var f,h;n[u]=iC((f=(h=l[d])!==null&&h!==void 0?h:l[d-2])!==null&&f!==void 0?f:l[0],c)}):n[r]=o}else n[r]=o}),n}},fk=/url\([^)]+\)|var\([^)]+\)|(\d*\.?\d+)px/g;function PPe(t,e){var n=Math.pow(10,e+1),r=Math.floor(t*n);return Math.round(r/10)*10/n}var _Pe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.rootValue,r=n===void 0?16:n,o=e.precision,i=o===void 0?5:o,s=e.mediaQuery,a=s===void 0?!1:s,l=function(d,f){if(!f)return d;var h=parseFloat(f);if(h<=1)return d;var g=PPe(h/r,i);return"".concat(g,"rem")},c=function(d){var f=de({},d);return Object.entries(d).forEach(function(h){var g=xe(h,2),y=g[0],m=g[1];if(typeof m=="string"&&m.includes("px")){var S=m.replace(fk,l);f[y]=S}!Ene[y]&&typeof m=="number"&&m!==0&&(f[y]="".concat(m,"px").replace(fk,l));var x=y.trim();if(x.startsWith("@")&&x.includes("px")&&a){var C=y.replace(fk,l);f[C]=f[y],delete f[y]}}),f};return{visit:c}},IPe={supportModernCSS:function(){return wEe()&&CEe()}};const TPe=Object.freeze(Object.defineProperty({__proto__:null,Keyframes:Yn,NaNLinter:aPe,StyleContext:Kf,StyleProvider:pEe,Theme:az,_experimental:IPe,createCache:iz,createTheme:P_,extractStyle:xPe,genCalc:yEe,getComputedToken:xne,legacyLogicalPropertiesTransformer:EPe,legacyNotSelectorLinter:iPe,logicalPropertiesLinter:sPe,parentSelectorLinter:lPe,px2remTransformer:_Pe,token2CSSVar:rS,unit:Re,useCSSVarRegister:Lne,useCacheToken:Cne,useStyleRegister:__},Symbol.toStringTag,{value:"Module"})),Ss=Ru(TPe);var Qy={},hk={exports:{}},L7;function MPe(){return L7||(L7=1,function(t){var e=Nte(),n=Lte(),r=X3(),o=Fte();function i(s){return e(s)||n(s)||r(s)||o()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(hk)),hk.exports}var sC={},N7;function OPe(){if(N7)return sC;N7=1,Object.defineProperty(sC,"__esModule",{value:!0}),sC.default=t;function t(e,n){for(var r=e,o=0;o<n.length;o+=1){if(r==null)return;r=r[n[o]]}return r}return sC}var F7;function RPe(){if(F7)return Qy;F7=1;var t=Lt().default;Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.default=a,Qy.merge=d;var e=t(lh()),n=t(Ux()),r=t(AT()),o=t(MPe()),i=t(OPe());function s(f,h,g,y){if(!h.length)return g;var m=(0,o.default)(h),S=m[0],x=m.slice(1),C;return!f&&typeof S=="number"?C=[]:Array.isArray(f)?C=(0,r.default)(f):C=(0,n.default)({},f),y&&g===void 0&&x.length===1?delete C[S][x[0]]:C[S]=s(C[S],x,g,y),C}function a(f,h,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return h.length&&y&&g===void 0&&!(0,i.default)(f,h.slice(0,-1))?f:s(f,h,g,y)}function l(f){return(0,e.default)(f)==="object"&&f!==null&&Object.getPrototypeOf(f)===Object.prototype}function c(f){return Array.isArray(f)?[]:{}}var u=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function d(){for(var f=arguments.length,h=new Array(f),g=0;g<f;g++)h[g]=arguments[g];var y=c(h[0]);return h.forEach(function(m){function S(x,C){var E=new Set(C),P=(0,i.default)(m,x),I=Array.isArray(P);if(I||l(P)){if(!E.has(P)){E.add(P);var T=(0,i.default)(y,x);I?y=a(y,x,[]):(!T||(0,e.default)(T)!=="object")&&(y=a(y,x,c(P))),u(P).forEach(function(M){S([].concat((0,r.default)(x),[M]),E)})}}else y=a(y,x,P)}S([])}),y}return Qy}var Zy={},z7;function kPe(){if(z7)return Zy;z7=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.default=void 0;var t=Gt();return Zy.default=(0,t.createContext)(void 0),Zy}var pk={},Jy={},e0={},t0={},B7;function APe(){if(B7)return t0;B7=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.default=void 0;var t={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};return t0.default=t,t0}var n0={},r0={},o0={},i0={},H7;function $Pe(){return H7||(H7=1,Object.defineProperty(i0,"__esModule",{value:!0}),i0.commonLocale=void 0,i0.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),i0}var U7;function DPe(){if(U7)return o0;U7=1;var t=Lt().default;Object.defineProperty(o0,"__esModule",{value:!0}),o0.default=void 0;var e=t(Ux()),n=$Pe(),r=(0,e.default)((0,e.default)({},n.commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});return o0.default=r,o0}var s0={},W7;function Nne(){if(W7)return s0;W7=1,Object.defineProperty(s0,"__esModule",{value:!0}),s0.default=void 0;const t={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};return s0.default=t,s0}var V7;function Fne(){if(V7)return r0;V7=1;var t=Lt().default;Object.defineProperty(r0,"__esModule",{value:!0}),r0.default=void 0;var e=t(DPe()),n=t(Nne());const r={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},e.default),timePickerLocale:Object.assign({},n.default)};return r0.default=r,r0}var q7;function jPe(){if(q7)return n0;q7=1;var t=Lt().default;Object.defineProperty(n0,"__esModule",{value:!0}),n0.default=void 0;var e=t(Fne());return n0.default=e.default,n0}var K7;function dz(){if(K7)return e0;K7=1;var t=Lt().default;Object.defineProperty(e0,"__esModule",{value:!0}),e0.default=void 0;var e=t(APe()),n=t(jPe()),r=t(Fne()),o=t(Nne());const i="${label} is not a valid ${type}",s={locale:"en",Pagination:e.default,DatePicker:r.default,TimePicker:o.default,Calendar:n.default,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:i,method:i,array:i,object:i,number:i,date:i,boolean:i,integer:i,float:i,regexp:i,email:i,url:i,hex:i},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};return e0.default=s,e0}var G7;function LPe(){if(G7)return Jy;G7=1;var t=Lt().default;Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.changeConfirmLocale=i,Jy.getConfirmLocale=s;var e=t(dz());let n=Object.assign({},e.default.Modal),r=[];const o=()=>r.reduce((a,l)=>Object.assign(Object.assign({},a),l),e.default.Modal);function i(a){if(a){const l=Object.assign({},a);return r.push(l),n=o(),()=>{r=r.filter(c=>c!==l),n=o()}}n=Object.assign({},e.default.Modal)}function s(){return n}return Jy}var a0={},X7;function fz(){if(X7)return a0;X7=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.default=void 0;var t=Gt();const e=(0,t.createContext)(void 0);return a0.default=e,a0}var l0={},Y7;function zne(){if(Y7)return l0;Y7=1;var t=Lt().default,e=Ln().default;Object.defineProperty(l0,"__esModule",{value:!0}),l0.default=void 0;var n=e(Gt()),r=t(fz()),o=t(dz());const i=(s,a)=>{const l=n.useContext(r.default),c=n.useMemo(()=>{var d;const f=a||o.default[s],h=(d=l==null?void 0:l[s])!==null&&d!==void 0?d:{};return Object.assign(Object.assign({},typeof f=="function"?f():f),h||{})},[s,a,l]),u=n.useMemo(()=>{const d=l==null?void 0:l.locale;return l!=null&&l.exist&&!d?o.default.locale:d},[l]);return[c,u]};return l0.default=i,l0}var Q7;function NPe(){return Q7||(Q7=1,function(t){"use client";var e=Lt().default,n=Ln().default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ANT_MARK=void 0,Object.defineProperty(t,"useLocale",{enumerable:!0,get:function(){return s.default}});var r=n(Gt()),o=LPe(),i=e(fz()),s=e(zne());t.ANT_MARK="internalMark";const a=l=>{const{locale:c={},children:u,_ANT_MARK__:d}=l;r.useEffect(()=>(0,o.changeConfirmLocale)(c==null?void 0:c.Modal),[c]);const f=r.useMemo(()=>Object.assign(Object.assign({},c),{exist:!0}),[c]);return r.createElement(i.default.Provider,{value:f},u)};t.default=a}(pk)),pk}var gk={},zh={},Z7;function Vx(){if(Z7)return zh;Z7=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.defaultPresetColors=zh.default=void 0;const t=zh.defaultPresetColors={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},e=Object.assign(Object.assign({},t),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});return zh.default=e,zh}var c0={},aC={},lC={};const qx=Ru(tCe);var J7;function FPe(){if(J7)return lC;J7=1,Object.defineProperty(lC,"__esModule",{value:!0}),lC.default=e;var t=qx;function e(n,{generateColorPalettes:r,generateNeutralColorPalettes:o}){const{colorSuccess:i,colorWarning:s,colorError:a,colorInfo:l,colorPrimary:c,colorBgBase:u,colorTextBase:d}=n,f=r(c),h=r(i),g=r(s),y=r(a),m=r(l),S=o(u,d),x=n.colorLink||n.colorInfo,C=r(x),E=new t.FastColor(y[1]).mix(new t.FastColor(y[3]),50).toHexString();return Object.assign(Object.assign({},S),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:y[1],colorErrorBgHover:y[2],colorErrorBgFilledHover:E,colorErrorBgActive:y[3],colorErrorBorder:y[3],colorErrorBorderHover:y[4],colorErrorHover:y[5],colorError:y[6],colorErrorActive:y[7],colorErrorTextHover:y[8],colorErrorText:y[9],colorErrorTextActive:y[10],colorWarningBg:g[1],colorWarningBgHover:g[2],colorWarningBorder:g[3],colorWarningBorderHover:g[4],colorWarningHover:g[4],colorWarning:g[6],colorWarningActive:g[7],colorWarningTextHover:g[8],colorWarningText:g[9],colorWarningTextActive:g[10],colorInfoBg:m[1],colorInfoBgHover:m[2],colorInfoBorder:m[3],colorInfoBorderHover:m[4],colorInfoHover:m[4],colorInfo:m[6],colorInfoActive:m[7],colorInfoTextHover:m[8],colorInfoText:m[9],colorInfoTextActive:m[10],colorLinkHover:C[4],colorLink:C[6],colorLinkActive:C[7],colorBgMask:new t.FastColor("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}return lC}var cC={},u0={},eU;function zPe(){if(eU)return u0;eU=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.default=void 0;const t=e=>{let n=e,r=e,o=e,i=e;return e<6&&e>=5?n=e+1:e<16&&e>=6?n=e+2:e>=16&&(n=16),e<7&&e>=5?r=4:e<8&&e>=7?r=5:e<14&&e>=8?r=6:e<16&&e>=14?r=7:e>=16&&(r=8),e<6&&e>=2?o=1:e>=6&&(o=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e,borderRadiusXS:o,borderRadiusSM:r,borderRadiusLG:n,borderRadiusOuter:i}};return u0.default=t,u0}var tU;function BPe(){if(tU)return cC;tU=1;var t=Lt().default;Object.defineProperty(cC,"__esModule",{value:!0}),cC.default=n;var e=t(zPe());function n(r){const{motionUnit:o,motionBase:i,borderRadius:s,lineWidth:a}=r;return Object.assign({motionDurationFast:`${(i+o).toFixed(1)}s`,motionDurationMid:`${(i+o*2).toFixed(1)}s`,motionDurationSlow:`${(i+o*3).toFixed(1)}s`,lineWidthBold:a+1},(0,e.default)(s))}return cC}var d0={},nU;function HPe(){if(nU)return d0;nU=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.default=void 0;const t=e=>{const{controlHeight:n}=e;return{controlHeightSM:n*.75,controlHeightXS:n*.5,controlHeightLG:n*1.25}};return d0.default=t,d0}var f0={},h0={},rU;function Bne(){if(rU)return h0;rU=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.default=e,h0.getLineHeight=t;function t(n){return(n+8)/n}function e(n){const r=Array.from({length:10}).map((o,i)=>{const s=i-1,a=n*Math.pow(Math.E,s/5),l=i>1?Math.floor(a):Math.ceil(a);return Math.floor(l/2)*2});return r[1]=n,r.map(o=>({size:o,lineHeight:t(o)}))}return h0}var oU;function UPe(){if(oU)return f0;oU=1;var t=Lt().default;Object.defineProperty(f0,"__esModule",{value:!0}),f0.default=void 0;var e=t(Bne());const n=r=>{const o=(0,e.default)(r),i=o.map(h=>h.size),s=o.map(h=>h.lineHeight),a=i[1],l=i[0],c=i[2],u=s[1],d=s[0],f=s[2];return{fontSizeSM:l,fontSize:a,fontSizeLG:c,fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:u,lineHeightLG:f,lineHeightSM:d,fontHeight:Math.round(u*a),fontHeightLG:Math.round(f*c),fontHeightSM:Math.round(d*l),lineHeightHeading1:s[6],lineHeightHeading2:s[5],lineHeightHeading3:s[4],lineHeightHeading4:s[3],lineHeightHeading5:s[2]}};return f0.default=n,f0}var uC={},iU;function WPe(){if(iU)return uC;iU=1,Object.defineProperty(uC,"__esModule",{value:!0}),uC.default=t;function t(e){const{sizeUnit:n,sizeStep:r}=e;return{sizeXXL:n*(r+8),sizeXL:n*(r+4),sizeLG:n*(r+2),sizeMD:n*(r+1),sizeMS:n*r,size:n*r,sizeSM:n*(r-1),sizeXS:n*(r-2),sizeXXS:n*(r-3)}}return uC}var Bh={},Hh={},sU;function VPe(){if(sU)return Hh;sU=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.getSolidColor=Hh.getAlphaColor=void 0;var t=qx;const e=(r,o)=>new t.FastColor(r).setA(o).toRgbString();Hh.getAlphaColor=e;const n=(r,o)=>new t.FastColor(r).darken(o).toHexString();return Hh.getSolidColor=n,Hh}var aU;function qPe(){if(aU)return Bh;aU=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.generateNeutralColorPalettes=Bh.generateColorPalettes=void 0;var t=Fv,e=VPe();const n=o=>{const i=(0,t.generate)(o);return{1:i[0],2:i[1],3:i[2],4:i[3],5:i[4],6:i[5],7:i[6],8:i[4],9:i[5],10:i[6]}};Bh.generateColorPalettes=n;const r=(o,i)=>{const s=o||"#fff",a=i||"#000";return{colorBgBase:s,colorTextBase:a,colorText:(0,e.getAlphaColor)(a,.88),colorTextSecondary:(0,e.getAlphaColor)(a,.65),colorTextTertiary:(0,e.getAlphaColor)(a,.45),colorTextQuaternary:(0,e.getAlphaColor)(a,.25),colorFill:(0,e.getAlphaColor)(a,.15),colorFillSecondary:(0,e.getAlphaColor)(a,.06),colorFillTertiary:(0,e.getAlphaColor)(a,.04),colorFillQuaternary:(0,e.getAlphaColor)(a,.02),colorBgSolid:(0,e.getAlphaColor)(a,1),colorBgSolidHover:(0,e.getAlphaColor)(a,.75),colorBgSolidActive:(0,e.getAlphaColor)(a,.95),colorBgLayout:(0,e.getSolidColor)(s,4),colorBgContainer:(0,e.getSolidColor)(s,0),colorBgElevated:(0,e.getSolidColor)(s,0),colorBgSpotlight:(0,e.getAlphaColor)(a,.85),colorBgBlur:"transparent",colorBorder:(0,e.getSolidColor)(s,15),colorBorderSecondary:(0,e.getSolidColor)(s,6)}};return Bh.generateNeutralColorPalettes=r,Bh}var lU;function KPe(){if(lU)return aC;lU=1;var t=Lt().default;Object.defineProperty(aC,"__esModule",{value:!0}),aC.default=c;var e=Fv,n=Vx(),r=t(FPe()),o=t(BPe()),i=t(HPe()),s=t(UPe()),a=t(WPe()),l=qPe();function c(u){e.presetPrimaryColors.pink=e.presetPrimaryColors.magenta,e.presetPalettes.pink=e.presetPalettes.magenta;const d=Object.keys(n.defaultPresetColors).map(f=>{const h=u[f]===e.presetPrimaryColors[f]?e.presetPalettes[f]:(0,e.generate)(u[f]);return Array.from({length:10},()=>1).reduce((g,y,m)=>(g[`${f}-${m+1}`]=h[m],g[`${f}${m+1}`]=h[m],g),{})}).reduce((f,h)=>(f=Object.assign(Object.assign({},f),h),f),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u),d),(0,r.default)(u,{generateColorPalettes:l.generateColorPalettes,generateNeutralColorPalettes:l.generateNeutralColorPalettes})),(0,s.default)(u.fontSize)),(0,a.default)(u)),(0,i.default)(u)),(0,o.default)(u))}return aC}var cU;function GPe(){if(cU)return c0;cU=1;var t=Lt().default;Object.defineProperty(c0,"__esModule",{value:!0}),c0.default=void 0;var e=Ss,n=t(KPe());const r=(0,e.createTheme)(n.default);return c0.default=r,c0}var uU;function hz(){return uU||(uU=1,function(t){var e=Lt().default;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultConfig=t.DesignTokenContext=void 0,Object.defineProperty(t,"defaultTheme",{enumerable:!0,get:function(){return o.default}});var n=e(Gt()),r=e(Vx()),o=e(GPe());const i=t.defaultConfig={token:r.default,override:{override:r.default},hashed:!0};t.DesignTokenContext=n.default.createContext(i)}(gk)),gk}var ca={},dU;function Uv(){if(dU)return ca;dU=1;var t=Ln().default;Object.defineProperty(ca,"__esModule",{value:!0}),ca.defaultPrefixCls=ca.defaultIconPrefixCls=ca.Variants=ca.ConfigContext=ca.ConfigConsumer=void 0,ca.useComponentConfig=l;var e=t(Gt());const n=ca.defaultPrefixCls="ant",r=ca.defaultIconPrefixCls="anticon";ca.Variants=["outlined","borderless","filled","underlined"];const o=(c,u)=>u||(c?`${n}-${c}`:n),i=ca.ConfigContext=e.createContext({getPrefixCls:o,iconPrefixCls:r}),{Consumer:s}=i;ca.ConfigConsumer=s;const a={};function l(c){const u=e.useContext(i),{getPrefixCls:d,direction:f,getPopupContainer:h}=u,g=u[c];return Object.assign(Object.assign({classNames:a,styles:a},g),{getPrefixCls:d,direction:f,getPopupContainer:h})}return ca}var p0={},fU;function XPe(){if(fU)return p0;fU=1;var t=Lt().default;Object.defineProperty(p0,"__esModule",{value:!0}),p0.getStyle=s,p0.registerTheme=a;var e=Fv,n=qx,r=t(Wx()),o=qte();t(kT());const i=`-ant-${Date.now()}-${Math.random()}`;function s(l,c){const u={},d=(g,y)=>{let m=g.clone();return m=(y==null?void 0:y(m))||m,m.toRgbString()},f=(g,y)=>{const m=new n.FastColor(g),S=(0,e.generate)(m.toRgbString());u[`${y}-color`]=d(m),u[`${y}-color-disabled`]=S[1],u[`${y}-color-hover`]=S[4],u[`${y}-color-active`]=S[6],u[`${y}-color-outline`]=m.clone().setA(.2).toRgbString(),u[`${y}-color-deprecated-bg`]=S[0],u[`${y}-color-deprecated-border`]=S[2]};if(c.primaryColor){f(c.primaryColor,"primary");const g=new n.FastColor(c.primaryColor),y=(0,e.generate)(g.toRgbString());y.forEach((S,x)=>{u[`primary-${x+1}`]=S}),u["primary-color-deprecated-l-35"]=d(g,S=>S.lighten(35)),u["primary-color-deprecated-l-20"]=d(g,S=>S.lighten(20)),u["primary-color-deprecated-t-20"]=d(g,S=>S.tint(20)),u["primary-color-deprecated-t-50"]=d(g,S=>S.tint(50)),u["primary-color-deprecated-f-12"]=d(g,S=>S.setA(S.a*.12));const m=new n.FastColor(y[0]);u["primary-color-active-deprecated-f-30"]=d(m,S=>S.setA(S.a*.3)),u["primary-color-active-deprecated-d-02"]=d(m,S=>S.darken(2))}return c.successColor&&f(c.successColor,"success"),c.warningColor&&f(c.warningColor,"warning"),c.errorColor&&f(c.errorColor,"error"),c.infoColor&&f(c.infoColor,"info"),`
  :root {
    ${Object.keys(u).map(g=>`--${l}-${g}: ${u[g]};`).join(`
`)}
  }
  `.trim()}function a(l,c){const u=s(l,c);(0,r.default)()&&(0,o.updateCSS)(u,`${i}-dynamic-theme`)}return p0}var Uh={},hU;function zT(){if(hU)return Uh;hU=1;var t=Ln().default;Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.default=Uh.DisabledContextProvider=void 0;var e=t(Gt());const n=e.createContext(!1),r=({children:o,disabled:i})=>{const s=e.useContext(n);return e.createElement(n.Provider,{value:i??s},o)};return Uh.DisabledContextProvider=r,Uh.default=n,Uh}var g0={},Wh={},pU;function pz(){if(pU)return Wh;pU=1;var t=Ln().default;Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.default=Wh.SizeContextProvider=void 0;var e=t(Gt());const n=e.createContext(void 0),r=({children:o,size:i})=>{const s=e.useContext(n);return e.createElement(n.Provider,{value:i||s},o)};return Wh.SizeContextProvider=r,Wh.default=n,Wh}var gU;function YPe(){if(gU)return g0;gU=1;var t=Lt().default;Object.defineProperty(g0,"__esModule",{value:!0}),g0.default=void 0;var e=Gt(),n=t(zT()),r=t(pz());function o(){const i=(0,e.useContext)(n.default),s=(0,e.useContext)(r.default);return{componentDisabled:i,componentSize:s}}return g0.default=o,g0}var dC={},m0={},mU;function QPe(){if(mU)return m0;mU=1;var t=Lt().default;Object.defineProperty(m0,"__esModule",{value:!0}),m0.default=void 0;var e=t(lh()),n=t(G3());function r(o,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function l(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,f=a.has(c);if((0,n.default)(!f,"Warning: There may be circular references"),f)return!1;if(c===u)return!0;if(s&&d>1)return!1;a.add(c);var h=d+1;if(Array.isArray(c)){if(!Array.isArray(u)||c.length!==u.length)return!1;for(var g=0;g<c.length;g++)if(!l(c[g],u[g],h))return!1;return!0}if(c&&u&&(0,e.default)(c)==="object"&&(0,e.default)(u)==="object"){var y=Object.keys(c);return y.length!==Object.keys(u).length?!1:y.every(function(m){return l(c[m],u[m],h)})}return!1}return l(o,i)}return m0.default=r,m0}var mk={},Hne=lo(function t(){ao(this,t)}),Une="CALC_UNIT",ZPe=new RegExp(Une,"g");function vk(t){return typeof t=="number"?"".concat(t).concat(Une):t}var JPe=function(t){Nl(n,t);var e=Lc(n);function n(r,o){var i;ao(this,n),i=e.call(this),oe(Rn(i),"result",""),oe(Rn(i),"unitlessCssVar",void 0),oe(Rn(i),"lowPriority",void 0);var s=Wt(r);return i.unitlessCssVar=o,r instanceof n?i.result="(".concat(r.result,")"):s==="number"?i.result=vk(r):s==="string"&&(i.result=r),i}return lo(n,[{key:"add",value:function(o){return o instanceof n?this.result="".concat(this.result," + ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," + ").concat(vk(o))),this.lowPriority=!0,this}},{key:"sub",value:function(o){return o instanceof n?this.result="".concat(this.result," - ").concat(o.getResult()):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," - ").concat(vk(o))),this.lowPriority=!0,this}},{key:"mul",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof n?this.result="".concat(this.result," * ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," * ").concat(o)),this.lowPriority=!1,this}},{key:"div",value:function(o){return this.lowPriority&&(this.result="(".concat(this.result,")")),o instanceof n?this.result="".concat(this.result," / ").concat(o.getResult(!0)):(typeof o=="number"||typeof o=="string")&&(this.result="".concat(this.result," / ").concat(o)),this.lowPriority=!1,this}},{key:"getResult",value:function(o){return this.lowPriority||o?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(o){var i=this,s=o||{},a=s.unit,l=!0;return typeof a=="boolean"?l=a:Array.from(this.unitlessCssVar).some(function(c){return i.result.includes(c)})&&(l=!1),this.result=this.result.replace(ZPe,l?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(Hne),e_e=function(t){Nl(n,t);var e=Lc(n);function n(r){var o;return ao(this,n),o=e.call(this),oe(Rn(o),"result",0),r instanceof n?o.result=r.result:typeof r=="number"&&(o.result=r),o}return lo(n,[{key:"add",value:function(o){return o instanceof n?this.result+=o.result:typeof o=="number"&&(this.result+=o),this}},{key:"sub",value:function(o){return o instanceof n?this.result-=o.result:typeof o=="number"&&(this.result-=o),this}},{key:"mul",value:function(o){return o instanceof n?this.result*=o.result:typeof o=="number"&&(this.result*=o),this}},{key:"div",value:function(o){return o instanceof n?this.result/=o.result:typeof o=="number"&&(this.result/=o),this}},{key:"equal",value:function(){return this.result}}]),n}(Hne),Wne=function(e,n){var r=e==="css"?JPe:e_e;return function(o){return new r(o,n)}},vU=function(e,n){return"".concat([n,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Bo(t){var e=v.useRef();e.current=t;var n=v.useCallback(function(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(i))},[]);return n}function dv(t){var e=v.useRef(!1),n=v.useState(t),r=xe(n,2),o=r[0],i=r[1];v.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(a,l){l&&e.current||i(a)}return[o,s]}function yk(t){return t!==void 0}function xi(t,e){var n=e||{},r=n.defaultValue,o=n.value,i=n.onChange,s=n.postState,a=dv(function(){return yk(o)?o:yk(r)?typeof r=="function"?r():r:typeof t=="function"?t():t}),l=xe(a,2),c=l[0],u=l[1],d=o!==void 0?o:c,f=s?s(d):d,h=Bo(i),g=dv([d]),y=xe(g,2),m=y[0],S=y[1];BL(function(){var C=m[0];c!==C&&h(c,C)},[m]),BL(function(){yk(o)||u(o)},[o]);var x=Bo(function(C,E){u(C,E),S([d],E)});return[f,x]}function Il(t,e){for(var n=t,r=0;r<e.length;r+=1){if(n==null)return;n=n[e[r]]}return n}function Vne(t){return une(t)||fne(t)||rz(t)||dne()}function qne(t,e,n,r){if(!e.length)return n;var o=Vne(e),i=o[0],s=o.slice(1),a;return!t&&typeof i=="number"?a=[]:Array.isArray(t)?a=it(t):a=de({},t),r&&n===void 0&&s.length===1?delete a[i][s[0]]:a[i]=qne(a[i],s,n,r),a}function Sl(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&r&&n===void 0&&!Il(t,e.slice(0,-1))?t:qne(t,e,n,r)}function t_e(t){return Wt(t)==="object"&&t!==null&&Object.getPrototypeOf(t)===Object.prototype}function yU(t){return Array.isArray(t)?[]:{}}var n_e=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Mm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=yU(e[0]);return e.forEach(function(o){function i(s,a){var l=new Set(a),c=Il(o,s),u=Array.isArray(c);if(u||t_e(c)){if(!l.has(c)){l.add(c);var d=Il(r,s);u?r=Sl(r,s,[]):(!d||Wt(d)!=="object")&&(r=Sl(r,s,yU(c))),n_e(c).forEach(function(f){i([].concat(it(s),[f]),l)})}}else r=Sl(r,s,c)}i([])}),r}function bU(t,e,n,r){var o=de({},e[t]);if(r!=null&&r.deprecatedTokens){var i=r.deprecatedTokens;i.forEach(function(a){var l=xe(a,2),c=l[0],u=l[1];if(o!=null&&o[c]||o!=null&&o[u]){var d;(d=o[u])!==null&&d!==void 0||(o[u]=o==null?void 0:o[c])}})}var s=de(de({},n),o);return Object.keys(s).forEach(function(a){s[a]===e[a]&&delete s[a]}),s}var Kne=typeof CSSINJS_STATISTIC<"u",WL=!0;function Tr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!Kne)return Object.assign.apply(Object,[{}].concat(e));WL=!1;var r={};return e.forEach(function(o){if(Wt(o)==="object"){var i=Object.keys(o);i.forEach(function(s){Object.defineProperty(r,s,{configurable:!0,enumerable:!0,get:function(){return o[s]}})})}}),WL=!0,r}var VL={};function r_e(){}var Gne=function(e){var n,r=e,o=r_e;return Kne&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(e,{get:function(s,a){if(WL){var l;(l=n)===null||l===void 0||l.add(a)}return s[a]}}),o=function(s,a){var l;VL[s]={global:Array.from(n),component:de(de({},(l=VL[s])===null||l===void 0?void 0:l.component),a)}}),{token:r,keys:n,flush:o}};function SU(t,e,n){if(typeof n=="function"){var r;return n(Tr(e,(r=e[t])!==null&&r!==void 0?r:{}))}return n??{}}function o_e(t){return t==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return"max(".concat(r.map(function(i){return Re(i)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return"min(".concat(r.map(function(i){return Re(i)}).join(","),")")}}}var i_e=1e3*60*10,s_e=function(){function t(){ao(this,t),oe(this,"map",new Map),oe(this,"objectIDMap",new WeakMap),oe(this,"nextID",0),oe(this,"lastAccessBeat",new Map),oe(this,"accessBeat",0)}return lo(t,[{key:"set",value:function(n,r){this.clear();var o=this.getCompositeKey(n);this.map.set(o,r),this.lastAccessBeat.set(o,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),o=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,o}},{key:"getCompositeKey",value:function(n){var r=this,o=n.map(function(i){return i&&Wt(i)==="object"?"obj_".concat(r.getObjectID(i)):"".concat(Wt(i),"_").concat(i)});return o.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(o,i){r-o>i_e&&(n.map.delete(i),n.lastAccessBeat.delete(i))}),this.accessBeat=0}}}]),t}(),xU=new s_e;function a_e(t,e){return ce.useMemo(function(){var n=xU.get(e);if(n)return n;var r=t();return xU.set(e,r),r},e)}var l_e=function(){return{}};function Xne(t){var e=t.useCSP,n=e===void 0?l_e:e,r=t.useToken,o=t.usePrefix,i=t.getResetStyles,s=t.getCommonStyle,a=t.getCompUnitless;function l(f,h,g,y){var m=Array.isArray(f)?f[0]:f;function S(M){return"".concat(String(m)).concat(M.slice(0,1).toUpperCase()).concat(M.slice(1))}var x=(y==null?void 0:y.unitless)||{},C=typeof a=="function"?a(f):{},E=de(de({},C),{},oe({},S("zIndexPopup"),!0));Object.keys(x).forEach(function(M){E[S(M)]=x[M]});var P=de(de({},y),{},{unitless:E,prefixToken:S}),I=u(f,h,g,P),T=c(m,g,P);return function(M){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M,A=I(M,R),j=xe(A,2),N=j[1],k=T(R),D=xe(k,2),F=D[0],H=D[1];return[F,N,H]}}function c(f,h,g){var y=g.unitless,m=g.injectStyle,S=m===void 0?!0:m,x=g.prefixToken,C=g.ignore,E=function(T){var M=T.rootCls,R=T.cssVar,A=R===void 0?{}:R,j=r(),N=j.realToken;return Lne({path:[f],prefix:A.prefix,key:A.key,unitless:y,ignore:C,token:N,scope:M},function(){var k=SU(f,N,h),D=bU(f,N,k,{deprecatedTokens:g==null?void 0:g.deprecatedTokens});return Object.keys(k).forEach(function(F){D[x(F)]=D[F],delete D[F]}),D}),null},P=function(T){var M=r(),R=M.cssVar;return[function(A){return S&&R?ce.createElement(ce.Fragment,null,ce.createElement(E,{rootCls:T,cssVar:R,component:f}),A):A},R==null?void 0:R.key]};return P}function u(f,h,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=Array.isArray(f)?f:[f,f],S=xe(m,1),x=S[0],C=m.join("-"),E=t.layer||{name:"antd"};return function(P){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P,T=r(),M=T.theme,R=T.realToken,A=T.hashId,j=T.token,N=T.cssVar,k=o(),D=k.rootPrefixCls,F=k.iconPrefixCls,H=n(),U=N?"css":"js",B=a_e(function(){var Y=new Set;return N&&Object.keys(y.unitless||{}).forEach(function(G){Y.add(rS(G,N.prefix)),Y.add(rS(G,vU(x,N.prefix)))}),Wne(U,Y)},[U,x,N==null?void 0:N.prefix]),W=o_e(U),K=W.max,q=W.min,X={theme:M,token:j,hashId:A,nonce:function(){return H.nonce},clientOnly:y.clientOnly,layer:E,order:y.order||-999};typeof i=="function"&&__(de(de({},X),{},{clientOnly:!1,path:["Shared",D]}),function(){return i(j,{prefix:{rootPrefixCls:D,iconPrefixCls:F},csp:H})});var Z=__(de(de({},X),{},{path:[C,P,F]}),function(){if(y.injectStyle===!1)return[];var Y=Gne(j),G=Y.token,J=Y.flush,ne=SU(x,R,g),ee=".".concat(P),re=bU(x,R,ne,{deprecatedTokens:y.deprecatedTokens});N&&ne&&Wt(ne)==="object"&&Object.keys(ne).forEach(function(ge){ne[ge]="var(".concat(rS(ge,vU(x,N.prefix)),")")});var le=Tr(G,{componentCls:ee,prefixCls:P,iconCls:".".concat(F),antCls:".".concat(D),calc:B,max:K,min:q},N?ne:re),ae=h(le,{hashId:A,prefixCls:P,rootPrefixCls:D,iconPrefixCls:F});J(x,re);var ie=typeof s=="function"?s(le,P,I,y.resetFont):null;return[y.resetStyle===!1?null:ie,ae]});return[Z,A]}}function d(f,h,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},m=u(f,h,g,de({resetStyle:!1,order:-998},y)),S=function(C){var E=C.prefixCls,P=C.rootCls,I=P===void 0?E:P;return m(E,I),null};return S}return{genStyleHooks:l,genSubStyleComponent:d,genComponentStyleHook:u}}const c_e=Object.freeze(Object.defineProperty({__proto__:null,genCalc:Wne,genStyleUtils:Xne,mergeToken:Tr,statistic:VL,statisticToken:Gne},Symbol.toStringTag,{value:"Module"})),Yne=Ru(c_e);var bk={},v0={},wU;function u_e(){return wU||(wU=1,Object.defineProperty(v0,"__esModule",{value:!0}),v0.PresetColors=void 0,v0.PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"]),v0}var CU;function gz(){return CU||(CU=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PresetColors",{enumerable:!0,get:function(){return e.PresetColors}});var e=u_e()}(bk)),bk}var Qc={},y0={},b0={},EU;function d_e(){return EU||(EU=1,Object.defineProperty(b0,"__esModule",{value:!0}),b0.default=void 0,b0.default="5.25.4"),b0}var PU;function f_e(){if(PU)return y0;PU=1;var t=Lt().default;Object.defineProperty(y0,"__esModule",{value:!0}),y0.default=void 0;var e=t(d_e());return y0.default=e.default,y0}var fC={},S0={},_U;function h_e(){if(_U)return S0;_U=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.default=void 0;var t=qx;function e(r){return r>=0&&r<=255}function n(r,o){const{r:i,g:s,b:a,a:l}=new t.FastColor(r).toRgb();if(l<1)return r;const{r:c,g:u,b:d}=new t.FastColor(o).toRgb();for(let f=.01;f<=1;f+=.01){const h=Math.round((i-c*(1-f))/f),g=Math.round((s-u*(1-f))/f),y=Math.round((a-d*(1-f))/f);if(e(h)&&e(g)&&e(y))return new t.FastColor({r:h,g,b:y,a:Math.round(f*100)/100}).toRgbString()}return new t.FastColor({r:i,g:s,b:a,a:1}).toRgbString()}return S0.default=n,S0}var IU;function p_e(){if(IU)return fC;IU=1;var t=Lt().default;Object.defineProperty(fC,"__esModule",{value:!0}),fC.default=i;var e=qx,n=t(Vx()),r=t(h_e()),o=function(s,a){var l={};for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.indexOf(c)<0&&(l[c]=s[c]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,c=Object.getOwnPropertySymbols(s);u<c.length;u++)a.indexOf(c[u])<0&&Object.prototype.propertyIsEnumerable.call(s,c[u])&&(l[c[u]]=s[c[u]]);return l};function i(s){const{override:a}=s,l=o(s,["override"]),c=Object.assign({},a);Object.keys(n.default).forEach(x=>{delete c[x]});const u=Object.assign(Object.assign({},l),c),d=480,f=576,h=768,g=992,y=1200,m=1600;if(u.motion===!1){const x="0s";u.motionDurationFast=x,u.motionDurationMid=x,u.motionDurationSlow=x}return Object.assign(Object.assign(Object.assign({},u),{colorFillContent:u.colorFillSecondary,colorFillContentHover:u.colorFill,colorFillAlter:u.colorFillQuaternary,colorBgContainerDisabled:u.colorFillTertiary,colorBorderBg:u.colorBgContainer,colorSplit:(0,r.default)(u.colorBorderSecondary,u.colorBgContainer),colorTextPlaceholder:u.colorTextQuaternary,colorTextDisabled:u.colorTextQuaternary,colorTextHeading:u.colorText,colorTextLabel:u.colorTextSecondary,colorTextDescription:u.colorTextTertiary,colorTextLightSolid:u.colorWhite,colorHighlight:u.colorError,colorBgTextHover:u.colorFillSecondary,colorBgTextActive:u.colorFill,colorIcon:u.colorTextTertiary,colorIconHover:u.colorText,colorErrorOutline:(0,r.default)(u.colorErrorBg,u.colorBgContainer),colorWarningOutline:(0,r.default)(u.colorWarningBg,u.colorBgContainer),fontSizeIcon:u.fontSizeSM,lineWidthFocus:u.lineWidth*3,lineWidth:u.lineWidth,controlOutlineWidth:u.lineWidth*2,controlInteractiveSize:u.controlHeight/2,controlItemBgHover:u.colorFillTertiary,controlItemBgActive:u.colorPrimaryBg,controlItemBgActiveHover:u.colorPrimaryBgHover,controlItemBgActiveDisabled:u.colorFill,controlTmpOutline:u.colorFillQuaternary,controlOutline:(0,r.default)(u.colorPrimaryBg,u.colorBgContainer),lineType:u.lineType,borderRadius:u.borderRadius,borderRadiusXS:u.borderRadiusXS,borderRadiusSM:u.borderRadiusSM,borderRadiusLG:u.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:u.sizeXXS,paddingXS:u.sizeXS,paddingSM:u.sizeSM,padding:u.size,paddingMD:u.sizeMD,paddingLG:u.sizeLG,paddingXL:u.sizeXL,paddingContentHorizontalLG:u.sizeLG,paddingContentVerticalLG:u.sizeMS,paddingContentHorizontal:u.sizeMS,paddingContentVertical:u.sizeSM,paddingContentHorizontalSM:u.size,paddingContentVerticalSM:u.sizeXS,marginXXS:u.sizeXXS,marginXS:u.sizeXS,marginSM:u.sizeSM,margin:u.size,marginMD:u.sizeMD,marginLG:u.sizeLG,marginXL:u.sizeXL,marginXXL:u.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:d,screenXSMin:d,screenXSMax:f-1,screenSM:f,screenSMMin:f,screenSMMax:h-1,screenMD:h,screenMDMin:h,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:y-1,screenXL:y,screenXLMin:y,screenXLMax:m-1,screenXXL:m,screenXXLMin:m,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new e.FastColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new e.FastColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new e.FastColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),c)}return fC}var TU;function BT(){if(TU)return Qc;TU=1;var t=Lt().default;Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.default=f,Qc.unitless=Qc.ignore=Qc.getComputedToken=void 0;var e=t(Gt()),n=Ss,r=t(f_e()),o=hz(),i=t(Vx()),s=t(p_e()),a=function(h,g){var y={};for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&g.indexOf(m)<0&&(y[m]=h[m]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var S=0,m=Object.getOwnPropertySymbols(h);S<m.length;S++)g.indexOf(m[S])<0&&Object.prototype.propertyIsEnumerable.call(h,m[S])&&(y[m[S]]=h[m[S]]);return y};const l=Qc.unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},c=Qc.ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},u={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},d=(h,g,y)=>{const m=y.getDerivativeToken(h),{override:S}=g,x=a(g,["override"]);let C=Object.assign(Object.assign({},m),{override:S});return C=(0,s.default)(C),x&&Object.entries(x).forEach(([E,P])=>{const{theme:I}=P,T=a(P,["theme"]);let M=T;I&&(M=d(Object.assign(Object.assign({},C),T),{override:T},I)),C[E]=M}),C};Qc.getComputedToken=d;function f(){const{token:h,hashed:g,theme:y,override:m,cssVar:S}=e.default.useContext(o.DesignTokenContext),x=`${r.default}-${g||""}`,C=y||o.defaultTheme,[E,P,I]=(0,n.useCacheToken)(C,[i.default,h],{salt:x,override:m,getComputedToken:d,formatToken:s.default,cssVar:S&&{prefix:S.prefix,key:S.key,unitless:l,ignore:c,preserve:u}});return[C,I,g?P:"",E,S]}return Qc}var Yu={},go={},MU;function Wv(){if(MU)return go;MU=1,Object.defineProperty(go,"__esModule",{value:!0}),go.textEllipsis=go.resetIcon=go.resetComponent=go.operationUnit=go.genLinkStyle=go.genIconStyle=go.genFocusStyle=go.genFocusOutline=go.genCommonStyle=go.clearFix=void 0;var t=Ss;go.textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"};const e=(u,d=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:u.colorText,fontSize:u.fontSize,lineHeight:u.lineHeight,listStyle:"none",fontFamily:d?"inherit":u.fontFamily});go.resetComponent=e;const n=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}});go.resetIcon=n;const r=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}});go.clearFix=r;const o=u=>({a:{color:u.colorLink,textDecoration:u.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${u.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:u.colorLinkHover},"&:active":{color:u.colorLinkActive},"&:active, &:hover":{textDecoration:u.linkHoverDecoration,outline:0},"&:focus":{textDecoration:u.linkFocusDecoration,outline:0},"&[disabled]":{color:u.colorTextDisabled,cursor:"not-allowed"}}});go.genLinkStyle=o;const i=(u,d,f,h)=>{const g=`[class^="${d}"], [class*=" ${d}"]`,y=f?`.${f}`:g,m={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let S={};return h!==!1&&(S={fontFamily:u.fontFamily,fontSize:u.fontSize}),{[y]:Object.assign(Object.assign(Object.assign({},S),m),{[g]:m})}};go.genCommonStyle=i;const s=(u,d)=>({outline:`${(0,t.unit)(u.lineWidthFocus)} solid ${u.colorPrimaryBorder}`,outlineOffset:d??1,transition:"outline-offset 0s, outline 0s"});go.genFocusOutline=s;const a=(u,d)=>({"&:focus-visible":Object.assign({},s(u,d))});go.genFocusStyle=a;const l=u=>({[`.${u}`]:Object.assign(Object.assign({},n()),{[`.${u} .${u}-icon`]:{display:"block"}})});go.genIconStyle=l;const c=u=>Object.assign(Object.assign({color:u.colorLink,textDecoration:u.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${u.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},a(u)),{"&:focus, &:hover":{color:u.colorLinkHover},"&:active":{color:u.colorLinkActive}});return go.operationUnit=c,go}var OU;function g_e(){if(OU)return Yu;OU=1;var t=Ln().default;Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.genSubStyleComponent=Yu.genStyleHooks=Yu.genComponentStyleHook=void 0;var e=Gt(),n=Yne,r=Uv(),o=Wv(),i=t(BT());const{genStyleHooks:s,genComponentStyleHook:a,genSubStyleComponent:l}=(0,n.genStyleUtils)({usePrefix:()=>{const{getPrefixCls:c,iconPrefixCls:u}=(0,e.useContext)(r.ConfigContext);return{rootPrefixCls:c(),iconPrefixCls:u}},useToken:()=>{const[c,u,d,f,h]=(0,i.default)();return{theme:c,realToken:u,hashId:d,token:f,cssVar:h}},useCSP:()=>{const{csp:c}=(0,e.useContext)(r.ConfigContext);return c??{}},getResetStyles:(c,u)=>{var d;const f=(0,o.genLinkStyle)(c);return[f,{"&":f},(0,o.genIconStyle)((d=u==null?void 0:u.prefix.iconPrefixCls)!==null&&d!==void 0?d:r.defaultIconPrefixCls)]},getCommonStyle:o.genCommonStyle,getCompUnitless:()=>i.unitless});return Yu.genSubStyleComponent=l,Yu.genComponentStyleHook=a,Yu.genStyleHooks=s,Yu}var hC={},RU;function m_e(){if(RU)return hC;RU=1,Object.defineProperty(hC,"__esModule",{value:!0}),hC.default=e;var t=gz();function e(n,r){return t.PresetColors.reduce((o,i)=>{const s=n[`${i}1`],a=n[`${i}3`],l=n[`${i}6`],c=n[`${i}7`];return Object.assign(Object.assign({},o),r(i,{lightColor:s,lightBorderColor:a,darkColor:l,textColor:c}))},{})}return hC}var x0={},kU;function v_e(){if(kU)return x0;kU=1;var t=Lt().default;Object.defineProperty(x0,"__esModule",{value:!0}),x0.default=void 0;var e=Ss,n=Wv(),r=t(BT());const o=(i,s)=>{const[a,l]=(0,r.default)();return(0,e.useStyleRegister)({theme:a,token:l,hashId:"",path:["ant-design-icons",i],nonce:()=>s==null?void 0:s.nonce,layer:{name:"antd"}},()=>[(0,n.genIconStyle)(i)])};return x0.default=o,x0}var AU;function Fl(){return AU||(AU=1,function(t){var e=Lt().default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DesignTokenContext",{enumerable:!0,get:function(){return u.DesignTokenContext}}),Object.defineProperty(t,"PresetColors",{enumerable:!0,get:function(){return o.PresetColors}}),Object.defineProperty(t,"calc",{enumerable:!0,get:function(){return r.genCalc}}),Object.defineProperty(t,"defaultConfig",{enumerable:!0,get:function(){return u.defaultConfig}}),Object.defineProperty(t,"genComponentStyleHook",{enumerable:!0,get:function(){return a.genComponentStyleHook}}),Object.defineProperty(t,"genPresetColor",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"genStyleHooks",{enumerable:!0,get:function(){return a.genStyleHooks}}),Object.defineProperty(t,"genSubStyleComponent",{enumerable:!0,get:function(){return a.genSubStyleComponent}}),Object.defineProperty(t,"getLineHeight",{enumerable:!0,get:function(){return i.getLineHeight}}),Object.defineProperty(t,"mergeToken",{enumerable:!0,get:function(){return r.mergeToken}}),Object.defineProperty(t,"statistic",{enumerable:!0,get:function(){return r.statistic}}),Object.defineProperty(t,"statisticToken",{enumerable:!0,get:function(){return r.statisticToken}}),Object.defineProperty(t,"useResetIconStyle",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"useStyleRegister",{enumerable:!0,get:function(){return n.useStyleRegister}}),Object.defineProperty(t,"useToken",{enumerable:!0,get:function(){return s.default}});var n=Ss,r=Yne,o=gz(),i=Bne(),s=e(BT()),a=g_e(),l=e(m_e()),c=e(v_e()),u=hz()}(mk)),mk}var w0={},$U;function y_e(){if($U)return w0;$U=1;var t=Ln().default;Object.defineProperty(w0,"__esModule",{value:!0}),w0.default=void 0;var e=t(Gt());const n=Object.assign({},e),{useId:r}=n,i=typeof r>"u"?()=>"":r;return w0.default=i,w0}var DU;function b_e(){if(DU)return dC;DU=1;var t=Lt().default;Object.defineProperty(dC,"__esModule",{value:!0}),dC.default=s;var e=t(tz()),n=t(QPe()),r=kT(),o=Fl(),i=t(y_e());function s(a,l,c){var u;(0,r.devUseWarning)("ConfigProvider");const d=a||{},f=d.inherit===!1||!l?Object.assign(Object.assign({},o.defaultConfig),{hashed:(u=l==null?void 0:l.hashed)!==null&&u!==void 0?u:o.defaultConfig.hashed,cssVar:l==null?void 0:l.cssVar}):l,h=(0,i.default)();return(0,e.default)(()=>{var g,y;if(!a)return l;const m=Object.assign({},f.components);Object.keys(a.components||{}).forEach(C=>{m[C]=Object.assign(Object.assign({},m[C]),a.components[C])});const S=`css-var-${h.replace(/:/g,"")}`,x=((g=d.cssVar)!==null&&g!==void 0?g:f.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:c==null?void 0:c.prefixCls},typeof f.cssVar=="object"?f.cssVar:{}),typeof d.cssVar=="object"?d.cssVar:{}),{key:typeof d.cssVar=="object"&&((y=d.cssVar)===null||y===void 0?void 0:y.key)||S});return Object.assign(Object.assign(Object.assign({},f),d),{token:Object.assign(Object.assign({},f.token),d.token),components:m,cssVar:x})},[d,f],(g,y)=>g.some((m,S)=>{const x=y[S];return!(0,n.default)(m,x,!0)}))}return dC}var pC={},S_e=tl();const he=jc(S_e);var x_e=["children"],Qne=v.createContext({});function Zne(t){var e=t.children,n=Sn(t,x_e);return v.createElement(Qne.Provider,{value:n},e)}var w_e=function(t){Nl(n,t);var e=Lc(n);function n(){return ao(this,n),e.apply(this,arguments)}return lo(n,[{key:"render",value:function(){return this.props.children}}]),n}(v.Component);function C_e(t){var e=v.useReducer(function(a){return a+1},0),n=xe(e,2),r=n[1],o=v.useRef(t),i=Bo(function(){return o.current}),s=Bo(function(a){o.current=typeof a=="function"?a(o.current):a,r()});return[i,s]}var vf="none",gC="appear",mC="enter",vC="leave",jU="none",sc="prepare",Om="start",Rm="active",mz="end",Jne="prepared";function LU(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit".concat(t)]="webkit".concat(e),n["Moz".concat(t)]="moz".concat(e),n["ms".concat(t)]="MS".concat(e),n["O".concat(t)]="o".concat(e.toLowerCase()),n}function E_e(t,e){var n={animationend:LU("Animation","AnimationEnd"),transitionend:LU("Transition","TransitionEnd")};return t&&("AnimationEvent"in e||delete n.animationend.animation,"TransitionEvent"in e||delete n.transitionend.transition),n}var P_e=E_e(vs(),typeof window<"u"?window:{}),ere={};if(vs()){var __e=document.createElement("div");ere=__e.style}var yC={};function tre(t){if(yC[t])return yC[t];var e=P_e[t];if(e)for(var n=Object.keys(e),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(e,i)&&i in ere)return yC[t]=e[i],yC[t]}return""}var nre=tre("animationend"),rre=tre("transitionend"),ore=!!(nre&&rre),NU=nre||"animationend",FU=rre||"transitionend";function zU(t,e){if(!t)return null;if(Wt(t)==="object"){var n=e.replace(/-\w/g,function(r){return r[1].toUpperCase()});return t[n]}return"".concat(t,"-").concat(e)}const I_e=function(t){var e=v.useRef();function n(o){o&&(o.removeEventListener(FU,t),o.removeEventListener(NU,t))}function r(o){e.current&&e.current!==o&&n(e.current),o&&o!==e.current&&(o.addEventListener(FU,t),o.addEventListener(NU,t),e.current=o)}return v.useEffect(function(){return function(){n(e.current)}},[]),[r,n]};var ire=vs()?v.useLayoutEffect:v.useEffect,sre=function(e){return+setTimeout(e,16)},are=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(sre=function(e){return window.requestAnimationFrame(e)},are=function(e){return window.cancelAnimationFrame(e)});var BU=0,vz=new Map;function lre(t){vz.delete(t)}var Sr=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;BU+=1;var r=BU;function o(i){if(i===0)lre(r),e();else{var s=sre(function(){o(i-1)});vz.set(r,s)}}return o(n),r};Sr.cancel=function(t){var e=vz.get(t);return lre(t),are(e)};const T_e=function(){var t=v.useRef(null);function e(){Sr.cancel(t.current)}function n(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var i=Sr(function(){o<=1?r({isCanceled:function(){return i!==t.current}}):n(r,o-1)});t.current=i}return v.useEffect(function(){return function(){e()}},[]),[n,e]};var M_e=[sc,Om,Rm,mz],O_e=[sc,Jne],cre=!1,R_e=!0;function ure(t){return t===Rm||t===mz}const k_e=function(t,e,n){var r=dv(jU),o=xe(r,2),i=o[0],s=o[1],a=T_e(),l=xe(a,2),c=l[0],u=l[1];function d(){s(sc,!0)}var f=e?O_e:M_e;return ire(function(){if(i!==jU&&i!==mz){var h=f.indexOf(i),g=f[h+1],y=n(i);y===cre?s(g,!0):g&&c(function(m){function S(){m.isCanceled()||s(g,!0)}y===!0?S():Promise.resolve(y).then(S)})}},[t,i]),v.useEffect(function(){return function(){u()}},[]),[d,i]};function A_e(t,e,n,r){var o=r.motionEnter,i=o===void 0?!0:o,s=r.motionAppear,a=s===void 0?!0:s,l=r.motionLeave,c=l===void 0?!0:l,u=r.motionDeadline,d=r.motionLeaveImmediately,f=r.onAppearPrepare,h=r.onEnterPrepare,g=r.onLeavePrepare,y=r.onAppearStart,m=r.onEnterStart,S=r.onLeaveStart,x=r.onAppearActive,C=r.onEnterActive,E=r.onLeaveActive,P=r.onAppearEnd,I=r.onEnterEnd,T=r.onLeaveEnd,M=r.onVisibleChanged,R=dv(),A=xe(R,2),j=A[0],N=A[1],k=C_e(vf),D=xe(k,2),F=D[0],H=D[1],U=dv(null),B=xe(U,2),W=B[0],K=B[1],q=F(),X=v.useRef(!1),Z=v.useRef(null);function Y(){return n()}var G=v.useRef(!1);function J(){H(vf),K(null,!0)}var ne=Bo(function(Ue){var We=F();if(We!==vf){var Me=Y();if(!(Ue&&!Ue.deadline&&Ue.target!==Me)){var $e=G.current,Qe;We===gC&&$e?Qe=P==null?void 0:P(Me,Ue):We===mC&&$e?Qe=I==null?void 0:I(Me,Ue):We===vC&&$e&&(Qe=T==null?void 0:T(Me,Ue)),$e&&Qe!==!1&&J()}}}),ee=I_e(ne),re=xe(ee,1),le=re[0],ae=function(We){switch(We){case gC:return oe(oe(oe({},sc,f),Om,y),Rm,x);case mC:return oe(oe(oe({},sc,h),Om,m),Rm,C);case vC:return oe(oe(oe({},sc,g),Om,S),Rm,E);default:return{}}},ie=v.useMemo(function(){return ae(q)},[q]),ge=k_e(q,!t,function(Ue){if(Ue===sc){var We=ie[sc];return We?We(Y()):cre}if(ue in ie){var Me;K(((Me=ie[ue])===null||Me===void 0?void 0:Me.call(ie,Y(),null))||null)}return ue===Rm&&q!==vf&&(le(Y()),u>0&&(clearTimeout(Z.current),Z.current=setTimeout(function(){ne({deadline:!0})},u))),ue===Jne&&J(),R_e}),ve=xe(ge,2),fe=ve[0],ue=ve[1],Ce=ure(ue);G.current=Ce;var ye=v.useRef(null);ire(function(){if(!(X.current&&ye.current===e)){N(e);var Ue=X.current;X.current=!0;var We;!Ue&&e&&a&&(We=gC),Ue&&e&&i&&(We=mC),(Ue&&!e&&c||!Ue&&d&&!e&&c)&&(We=vC);var Me=ae(We);We&&(t||Me[sc])?(H(We),fe()):H(vf),ye.current=e}},[e]),v.useEffect(function(){(q===gC&&!a||q===mC&&!i||q===vC&&!c)&&H(vf)},[a,i,c]),v.useEffect(function(){return function(){X.current=!1,clearTimeout(Z.current)}},[]);var ke=v.useRef(!1);v.useEffect(function(){j&&(ke.current=!0),j!==void 0&&q===vf&&((ke.current||j)&&(M==null||M(j)),ke.current=!0)},[j,q]);var Be=W;return ie[sc]&&ue===Om&&(Be=de({transition:"none"},Be)),[q,ue,Be,j??e]}function $_e(t){var e=t;Wt(t)==="object"&&(e=t.transitionSupport);function n(o,i){return!!(o.motionName&&e&&i!==!1)}var r=v.forwardRef(function(o,i){var s=o.visible,a=s===void 0?!0:s,l=o.removeOnLeave,c=l===void 0?!0:l,u=o.forceRender,d=o.children,f=o.motionName,h=o.leavedClassName,g=o.eventProps,y=v.useContext(Qne),m=y.motion,S=n(o,m),x=v.useRef(),C=v.useRef();function E(){try{return x.current instanceof HTMLElement?x.current:QE(C.current)}catch{return null}}var P=A_e(S,a,E,o),I=xe(P,4),T=I[0],M=I[1],R=I[2],A=I[3],j=v.useRef(A);A&&(j.current=!0);var N=v.useCallback(function(B){x.current=B,Z3(i,B)},[i]),k,D=de(de({},g),{},{visible:a});if(!d)k=null;else if(T===vf)A?k=d(de({},D),N):!c&&j.current&&h?k=d(de(de({},D),{},{className:h}),N):u||!c&&!h?k=d(de(de({},D),{},{style:{display:"none"}}),N):k=null;else{var F;M===sc?F="prepare":ure(M)?F="active":M===Om&&(F="start");var H=zU(f,"".concat(T,"-").concat(F));k=d(de(de({},D),{},{className:he(zU(f,T),oe(oe({},H,H&&F),f,typeof f=="string")),style:R}),N)}if(v.isValidElement(k)&&ch(k)){var U=pg(k);U||(k=v.cloneElement(k,{ref:N}))}return v.createElement(w_e,{ref:C},k)});return r.displayName="CSSMotion",r}const $u=$_e(ore);var qL="add",KL="keep",GL="remove",Sk="removed";function D_e(t){var e;return t&&Wt(t)==="object"&&"key"in t?e=t:e={key:t},de(de({},e),{},{key:String(e.key)})}function XL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.map(D_e)}function j_e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,o=e.length,i=XL(t),s=XL(e);i.forEach(function(c){for(var u=!1,d=r;d<o;d+=1){var f=s[d];if(f.key===c.key){r<d&&(n=n.concat(s.slice(r,d).map(function(h){return de(de({},h),{},{status:qL})})),r=d),n.push(de(de({},f),{},{status:KL})),r+=1,u=!0;break}}u||n.push(de(de({},c),{},{status:GL}))}),r<o&&(n=n.concat(s.slice(r).map(function(c){return de(de({},c),{},{status:qL})})));var a={};n.forEach(function(c){var u=c.key;a[u]=(a[u]||0)+1});var l=Object.keys(a).filter(function(c){return a[c]>1});return l.forEach(function(c){n=n.filter(function(u){var d=u.key,f=u.status;return d!==c||f!==GL}),n.forEach(function(u){u.key===c&&(u.status=KL)})}),n}var L_e=["component","children","onVisibleChanged","onAllRemoved"],N_e=["status"],F_e=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function z_e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$u,n=function(r){Nl(i,r);var o=Lc(i);function i(){var s;ao(this,i);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return s=o.call.apply(o,[this].concat(l)),oe(Rn(s),"state",{keyEntities:[]}),oe(Rn(s),"removeKey",function(u){s.setState(function(d){var f=d.keyEntities.map(function(h){return h.key!==u?h:de(de({},h),{},{status:Sk})});return{keyEntities:f}},function(){var d=s.state.keyEntities,f=d.filter(function(h){var g=h.status;return g!==Sk}).length;f===0&&s.props.onAllRemoved&&s.props.onAllRemoved()})}),s}return lo(i,[{key:"render",value:function(){var a=this,l=this.state.keyEntities,c=this.props,u=c.component,d=c.children,f=c.onVisibleChanged;c.onAllRemoved;var h=Sn(c,L_e),g=u||v.Fragment,y={};return F_e.forEach(function(m){y[m]=h[m],delete h[m]}),delete h.keys,v.createElement(g,h,l.map(function(m,S){var x=m.status,C=Sn(m,N_e),E=x===qL||x===KL;return v.createElement(e,vt({},y,{key:C.key,visible:E,eventProps:C,onVisibleChanged:function(I){f==null||f(I,{key:C.key}),I||a.removeKey(C.key)}}),function(P,I){return d(de(de({},P),{},{index:S}),I)})}))}}],[{key:"getDerivedStateFromProps",value:function(a,l){var c=a.keys,u=l.keyEntities,d=XL(c),f=j_e(u,d);return{keyEntities:f.filter(function(h){var g=u.find(function(y){var m=y.key;return h.key===m});return!(g&&g.status===Sk&&h.status===GL)})}}}]),i}(v.Component);return oe(n,"defaultProps",{component:"div"}),n}const yz=z_e(ore),B_e=Object.freeze(Object.defineProperty({__proto__:null,CSSMotionList:yz,Provider:Zne,default:$u},Symbol.toStringTag,{value:"Module"})),H_e=Ru(B_e);var HU;function U_e(){if(HU)return pC;HU=1;var t=Ln().default;Object.defineProperty(pC,"__esModule",{value:!0}),pC.default=o;var e=t(Gt()),n=H_e,r=Fl();function o(i){const{children:s}=i,[,a]=(0,r.useToken)(),{motion:l}=a,c=e.useRef(!1);return c.current=c.current||l===!1,c.current?e.createElement(n.Provider,{motion:l},s):s}return pC}var C0={},UU;function W_e(){if(UU)return C0;UU=1;var t=Ln().default;return Object.defineProperty(C0,"__esModule",{value:!0}),C0.default=void 0,t(Gt()),C0.default=()=>null,C0}var xk={},WU;function V_e(){return WU||(WU=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.useResetIconStyle}});var e=Fl()}(xk)),xk}var VU;function Kx(){return VU||(VU=1,function(t){"use client";var e=Lt().default,n=Ln().default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ConfigConsumer",{enumerable:!0,get:function(){return y.ConfigConsumer}}),Object.defineProperty(t,"ConfigContext",{enumerable:!0,get:function(){return y.ConfigContext}}),Object.defineProperty(t,"Variants",{enumerable:!0,get:function(){return y.Variants}}),t.default=t.configConsumerProps=void 0,Object.defineProperty(t,"defaultIconPrefixCls",{enumerable:!0,get:function(){return y.defaultIconPrefixCls}}),Object.defineProperty(t,"defaultPrefixCls",{enumerable:!0,get:function(){return y.defaultPrefixCls}}),t.warnContext=t.globalConfig=void 0;var r=n(Gt()),o=Ss,i=e(Y3()),s=e(tz()),a=RPe(),l=n(kT()),c=e(kPe()),u=n(NPe()),d=e(fz()),f=e(dz()),h=hz(),g=e(Vx()),y=Uv(),m=XPe(),S=zT(),x=e(YPe()),C=e(b_e()),E=e(U_e()),P=e(W_e()),I=n(pz()),T=e(V_e()),M=function(q,X){var Z={};for(var Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&X.indexOf(Y)<0&&(Z[Y]=q[Y]);if(q!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,Y=Object.getOwnPropertySymbols(q);G<Y.length;G++)X.indexOf(Y[G])<0&&Object.prototype.propertyIsEnumerable.call(q,Y[G])&&(Z[Y[G]]=q[Y[G]]);return Z};t.warnContext=null,t.configConsumerProps=["getTargetContainer","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","autoInsertSpaceInButton","locale"];const R=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let A,j,N,k;function D(){return A||y.defaultPrefixCls}function F(){return j||y.defaultIconPrefixCls}function H(q){return Object.keys(q).some(X=>X.endsWith("Color"))}const U=q=>{const{prefixCls:X,iconPrefixCls:Z,theme:Y,holderRender:G}=q;X!==void 0&&(A=X),Z!==void 0&&(j=Z),"holderRender"in q&&(k=G),Y&&(H(Y)?(0,m.registerTheme)(D(),Y):N=Y)},B=()=>({getPrefixCls:(q,X)=>X||(q?`${D()}-${q}`:D()),getIconPrefixCls:F,getRootPrefixCls:()=>A||D(),getTheme:()=>N,holderRender:k});t.globalConfig=B;const W=q=>{const{children:X,csp:Z,autoInsertSpaceInButton:Y,alert:G,anchor:J,form:ne,locale:ee,componentSize:re,direction:le,space:ae,splitter:ie,virtual:ge,dropdownMatchSelectWidth:ve,popupMatchSelectWidth:fe,popupOverflow:ue,legacyLocale:Ce,parentContext:ye,iconPrefixCls:ke,theme:Be,componentDisabled:Ue,segmented:We,statistic:Me,spin:$e,calendar:Qe,carousel:nt,cascader:ht,collapse:ft,typography:et,checkbox:pe,descriptions:Pe,divider:je,drawer:Le,skeleton:qe,steps:at,image:Ae,layout:Ne,list:xt,mentions:Pt,modal:gn,progress:Xt,result:sn,slider:Zt,breadcrumb:Vt,menu:an,pagination:wt,input:bt,textArea:ot,empty:Xe,badge:qt,radio:Tt,rate:Fe,switch:Ge,transfer:ut,avatar:St,message:lt,tag:kt,table:_n,card:bn,tabs:ln,timeline:en,timePicker:wn,upload:nr,notification:rr,tree:ur,colorPicker:Nn,datePicker:gt,rangePicker:De,flex:pt,wave:yt,dropdown:ze,warning:Nt,tour:mn,tooltip:An,popover:Qn,popconfirm:_t,floatButtonGroup:Mt,variant:un,inputNumber:In,treeSelect:Co}=q,Dr=r.useCallback((rn,vn)=>{const{prefixCls:xr}=q;if(vn)return vn;const or=xr||ye.getPrefixCls("");return rn?`${or}-${rn}`:or},[ye.getPrefixCls,q.prefixCls]),Mr=ke||ye.iconPrefixCls||y.defaultIconPrefixCls,jr=Z||ye.csp;(0,T.default)(Mr,jr);const ko=(0,C.default)(Be,ye.theme,{prefixCls:Dr("")}),Ao={csp:jr,autoInsertSpaceInButton:Y,alert:G,anchor:J,locale:ee||Ce,direction:le,space:ae,splitter:ie,virtual:ge,popupMatchSelectWidth:fe??ve,popupOverflow:ue,getPrefixCls:Dr,iconPrefixCls:Mr,theme:ko,segmented:We,statistic:Me,spin:$e,calendar:Qe,carousel:nt,cascader:ht,collapse:ft,typography:et,checkbox:pe,descriptions:Pe,divider:je,drawer:Le,skeleton:qe,steps:at,image:Ae,input:bt,textArea:ot,layout:Ne,list:xt,mentions:Pt,modal:gn,progress:Xt,result:sn,slider:Zt,breadcrumb:Vt,menu:an,pagination:wt,empty:Xe,badge:qt,radio:Tt,rate:Fe,switch:Ge,transfer:ut,avatar:St,message:lt,tag:kt,table:_n,card:bn,tabs:ln,timeline:en,timePicker:wn,upload:nr,notification:rr,tree:ur,colorPicker:Nn,datePicker:gt,rangePicker:De,flex:pt,wave:yt,dropdown:ze,warning:Nt,tour:mn,tooltip:An,popover:Qn,popconfirm:_t,floatButtonGroup:Mt,variant:un,inputNumber:In,treeSelect:Co},pr=Object.assign({},ye);Object.keys(Ao).forEach(rn=>{Ao[rn]!==void 0&&(pr[rn]=Ao[rn])}),R.forEach(rn=>{const vn=q[rn];vn&&(pr[rn]=vn)}),typeof Y<"u"&&(pr.button=Object.assign({autoInsertSpace:Y},pr.button));const no=(0,s.default)(()=>pr,pr,(rn,vn)=>{const xr=Object.keys(rn),or=Object.keys(vn);return xr.length!==or.length||xr.some(on=>rn[on]!==vn[on])}),{layer:$n}=r.useContext(o.StyleContext),Ot=r.useMemo(()=>({prefixCls:Mr,csp:jr,layer:$n?"antd":void 0}),[Mr,jr,$n]);let ct=r.createElement(r.Fragment,null,r.createElement(P.default,{dropdownMatchSelectWidth:ve}),X);const Fn=r.useMemo(()=>{var rn,vn,xr,or;return(0,a.merge)(((rn=f.default.Form)===null||rn===void 0?void 0:rn.defaultValidateMessages)||{},((xr=(vn=no.locale)===null||vn===void 0?void 0:vn.Form)===null||xr===void 0?void 0:xr.defaultValidateMessages)||{},((or=no.form)===null||or===void 0?void 0:or.validateMessages)||{},(ne==null?void 0:ne.validateMessages)||{})},[no,ne==null?void 0:ne.validateMessages]);Object.keys(Fn).length>0&&(ct=r.createElement(c.default.Provider,{value:Fn},ct)),ee&&(ct=r.createElement(u.default,{locale:ee,_ANT_MARK__:u.ANT_MARK},ct)),(Mr||jr)&&(ct=r.createElement(i.default.Provider,{value:Ot},ct)),re&&(ct=r.createElement(I.SizeContextProvider,{size:re},ct)),ct=r.createElement(E.default,null,ct);const Un=r.useMemo(()=>{const rn=ko||{},{algorithm:vn,token:xr,components:or,cssVar:on}=rn,Or=M(rn,["algorithm","token","components","cssVar"]),uo=vn&&(!Array.isArray(vn)||vn.length>0)?(0,o.createTheme)(vn):h.defaultTheme,Eo={};Object.entries(or||{}).forEach(([Wc,zu])=>{const ui=Object.assign({},zu);"algorithm"in ui&&(ui.algorithm===!0?ui.theme=uo:(Array.isArray(ui.algorithm)||typeof ui.algorithm=="function")&&(ui.theme=(0,o.createTheme)(ui.algorithm)),delete ui.algorithm),Eo[Wc]=ui});const wr=Object.assign(Object.assign({},g.default),xr);return Object.assign(Object.assign({},Or),{theme:uo,token:wr,components:Eo,override:Object.assign({override:wr},Eo),cssVar:on})},[ko]);return Be&&(ct=r.createElement(h.DesignTokenContext.Provider,{value:Un},ct)),no.warning&&(ct=r.createElement(l.WarningContext.Provider,{value:no.warning},ct)),Ue!==void 0&&(ct=r.createElement(S.DisabledContextProvider,{disabled:Ue},ct)),r.createElement(y.ConfigContext.Provider,{value:no},ct)},K=q=>{const X=r.useContext(y.ConfigContext),Z=r.useContext(d.default);return r.createElement(W,Object.assign({parentContext:X,legacyLocale:Z},q))};K.ConfigContext=y.ConfigContext,K.SizeContext=I.default,K.config=U,K.useConfig=x.default,Object.defineProperty(K,"SizeContext",{get:()=>I.default}),t.default=K}(ik)),ik}var E0={};function bz(t){var e=t.children,n=t.prefixCls,r=t.id,o=t.overlayInnerStyle,i=t.bodyClassName,s=t.className,a=t.style;return v.createElement("div",{className:he("".concat(n,"-content"),s),style:a},v.createElement("div",{className:he("".concat(n,"-inner"),i),id:r,role:"tooltip",style:o},typeof e=="function"?e():e))}var dre=v.createContext(null),qU=[];function q_e(t,e){var n=v.useState(function(){if(!vs())return null;var g=document.createElement("div");return g}),r=xe(n,1),o=r[0],i=v.useRef(!1),s=v.useContext(dre),a=v.useState(qU),l=xe(a,2),c=l[0],u=l[1],d=s||(i.current?void 0:function(g){u(function(y){var m=[g].concat(it(y));return m})});function f(){o.parentElement||document.body.appendChild(o),i.current=!0}function h(){var g;(g=o.parentElement)===null||g===void 0||g.removeChild(o),i.current=!1}return lr(function(){return t?s?s(f):f():h(),h},[t]),lr(function(){c.length&&(c.forEach(function(g){return g()}),u(qU))},[c]),[o,d]}function K_e(t){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=e;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var o,i;if(t){var s=getComputedStyle(t);r.scrollbarColor=s.scrollbarColor,r.scrollbarWidth=s.scrollbarWidth;var a=getComputedStyle(t,"::-webkit-scrollbar"),l=parseInt(a.width,10),c=parseInt(a.height,10);try{var u=l?"width: ".concat(a.width,";"):"",d=c?"height: ".concat(a.height,";"):"";hu(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(u,`
`).concat(d,`
}`),e)}catch(g){console.error(g),o=l,i=c}}document.body.appendChild(n);var f=t&&o&&!isNaN(o)?o:n.offsetWidth-n.clientWidth,h=t&&i&&!isNaN(i)?i:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),sv(e),{width:f,height:h}}function G_e(t){return typeof document>"u"||!t||!(t instanceof Element)?{width:0,height:0}:K_e(t)}function X_e(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Y_e="rc-util-locker-".concat(Date.now()),KU=0;function Q_e(t){var e=!!t,n=v.useState(function(){return KU+=1,"".concat(Y_e,"_").concat(KU)}),r=xe(n,1),o=r[0];lr(function(){if(e){var i=G_e(document.body).width,s=X_e();hu(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(i,"px);"):"",`
}`),o)}else sv(o);return function(){sv(o)}},[e,o])}var Z_e=!1;function J_e(t){return Z_e}var GU=function(e){return e===!1?!1:!vs()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},fre=v.forwardRef(function(t,e){var n=t.open,r=t.autoLock,o=t.getContainer;t.debug;var i=t.autoDestroy,s=i===void 0?!0:i,a=t.children,l=v.useState(n),c=xe(l,2),u=c[0],d=c[1],f=u||n;v.useEffect(function(){(s||n)&&d(n)},[n,s]);var h=v.useState(function(){return GU(o)}),g=xe(h,2),y=g[0],m=g[1];v.useEffect(function(){var j=GU(o);m(j??null)});var S=q_e(f&&!y),x=xe(S,2),C=x[0],E=x[1],P=y??C;Q_e(r&&n&&vs()&&(P===C||P===document.body));var I=null;if(a&&ch(a)&&e){var T=a;I=T.ref}var M=hg(I,e);if(!f||!vs()||y===void 0)return null;var R=P===!1||J_e(),A=a;return e&&(A=v.cloneElement(a,{ref:M})),v.createElement(dre.Provider,{value:E},R?A:Ya.createPortal(A,P))});function hre(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function eIe(t){return hre(t)instanceof ShadowRoot}function I_(t){return eIe(t)?hre(t):null}function tIe(){var t=de({},jv);return t.useId}var XU=0,YU=tIe();const pre=YU?function(e){var n=YU();return e||n}:function(e){var n=v.useState("ssr-id"),r=xe(n,2),o=r[0],i=r[1];return v.useEffect(function(){var s=XU;XU+=1,i("rc_unique_".concat(s))},[]),e||o},Sz=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t==null?void 0:t.substr(0,4))};function nIe(t){var e=t.prefixCls,n=t.align,r=t.arrow,o=t.arrowPos,i=r||{},s=i.className,a=i.content,l=o.x,c=l===void 0?0:l,u=o.y,d=u===void 0?0:u,f=v.useRef();if(!n||!n.points)return null;var h={position:"absolute"};if(n.autoArrow!==!1){var g=n.points[0],y=n.points[1],m=g[0],S=g[1],x=y[0],C=y[1];m===x||!["t","b"].includes(m)?h.top=d:m==="t"?h.top=0:h.bottom=0,S===C||!["l","r"].includes(S)?h.left=c:S==="l"?h.left=0:h.right=0}return v.createElement("div",{ref:f,className:he("".concat(e,"-arrow"),s),style:h},a)}function rIe(t){var e=t.prefixCls,n=t.open,r=t.zIndex,o=t.mask,i=t.motion;return o?v.createElement($u,vt({},i,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(s){var a=s.className;return v.createElement("div",{style:{zIndex:r},className:he("".concat(e,"-mask"),a)})}):null}var oIe=v.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),iIe=v.forwardRef(function(t,e){var n=t.popup,r=t.className,o=t.prefixCls,i=t.style,s=t.target,a=t.onVisibleChanged,l=t.open,c=t.keepDom,u=t.fresh,d=t.onClick,f=t.mask,h=t.arrow,g=t.arrowPos,y=t.align,m=t.motion,S=t.maskMotion,x=t.forceRender,C=t.getPopupContainer,E=t.autoDestroy,P=t.portal,I=t.zIndex,T=t.onMouseEnter,M=t.onMouseLeave,R=t.onPointerEnter,A=t.onPointerDownCapture,j=t.ready,N=t.offsetX,k=t.offsetY,D=t.offsetR,F=t.offsetB,H=t.onAlign,U=t.onPrepare,B=t.stretch,W=t.targetWidth,K=t.targetHeight,q=typeof n=="function"?n():n,X=l||c,Z=(C==null?void 0:C.length)>0,Y=v.useState(!C||!Z),G=xe(Y,2),J=G[0],ne=G[1];if(lr(function(){!J&&Z&&s&&ne(!0)},[J,Z,s]),!J)return null;var ee="auto",re={left:"-1000vw",top:"-1000vh",right:ee,bottom:ee};if(j||!l){var le,ae=y.points,ie=y.dynamicInset||((le=y._experimental)===null||le===void 0?void 0:le.dynamicInset),ge=ie&&ae[0][1]==="r",ve=ie&&ae[0][0]==="b";ge?(re.right=D,re.left=ee):(re.left=N,re.right=ee),ve?(re.bottom=F,re.top=ee):(re.top=k,re.bottom=ee)}var fe={};return B&&(B.includes("height")&&K?fe.height=K:B.includes("minHeight")&&K&&(fe.minHeight=K),B.includes("width")&&W?fe.width=W:B.includes("minWidth")&&W&&(fe.minWidth=W)),l||(fe.pointerEvents="none"),v.createElement(P,{open:x||X,getContainer:C&&function(){return C(s)},autoDestroy:E},v.createElement(rIe,{prefixCls:o,open:l,zIndex:I,mask:f,motion:S}),v.createElement(Ha,{onResize:H,disabled:!l},function(ue){return v.createElement($u,vt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:x,leavedClassName:"".concat(o,"-hidden")},m,{onAppearPrepare:U,onEnterPrepare:U,visible:l,onVisibleChanged:function(ye){var ke;m==null||(ke=m.onVisibleChanged)===null||ke===void 0||ke.call(m,ye),a(ye)}}),function(Ce,ye){var ke=Ce.className,Be=Ce.style,Ue=he(o,ke,r);return v.createElement("div",{ref:xa(ue,e,ye),className:Ue,style:de(de(de(de({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},re),fe),Be),{},{boxSizing:"border-box",zIndex:I},i),onMouseEnter:T,onMouseLeave:M,onPointerEnter:R,onClick:d,onPointerDownCapture:A},h&&v.createElement(nIe,{prefixCls:o,arrow:h,arrowPos:g,align:y}),v.createElement(oIe,{cache:!l&&!u},q))})}))}),sIe=v.forwardRef(function(t,e){var n=t.children,r=t.getTriggerDOMNode,o=ch(n),i=v.useCallback(function(a){Z3(e,r?r(a):a)},[r]),s=hg(i,pg(n));return o?v.cloneElement(n,{ref:s}):n}),QU=v.createContext(null);function ZU(t){return t?Array.isArray(t)?t:[t]:[]}function aIe(t,e,n,r){return v.useMemo(function(){var o=ZU(n??e),i=ZU(r??e),s=new Set(o),a=new Set(i);return t&&(s.has("hover")&&(s.delete("hover"),s.add("click")),a.has("hover")&&(a.delete("hover"),a.add("click"))),[s,a]},[t,e,n,r])}const HT=function(t){if(!t)return!1;if(t instanceof Element){if(t.offsetParent)return!0;if(t.getBBox){var e=t.getBBox(),n=e.width,r=e.height;if(n||r)return!0}if(t.getBoundingClientRect){var o=t.getBoundingClientRect(),i=o.width,s=o.height;if(i||s)return!0}}return!1};function lIe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function cIe(t,e,n,r){for(var o=n.points,i=Object.keys(t),s=0;s<i.length;s+=1){var a,l=i[s];if(lIe((a=t[l])===null||a===void 0?void 0:a.points,o,r))return"".concat(e,"-placement-").concat(l)}return""}function JU(t,e,n,r){return e||(n?{motionName:"".concat(t,"-").concat(n)}:r?{motionName:r}:null)}function Gx(t){return t.ownerDocument.defaultView}function YL(t){for(var e=[],n=t==null?void 0:t.parentElement,r=["hidden","scroll","clip","auto"];n;){var o=Gx(n).getComputedStyle(n),i=o.overflowX,s=o.overflowY,a=o.overflow;[i,s,a].some(function(l){return r.includes(l)})&&e.push(n),n=n.parentElement}return e}function qS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function P0(t){return qS(parseFloat(t),0)}function eW(t,e){var n=de({},t);return(e||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var o=Gx(r).getComputedStyle(r),i=o.overflow,s=o.overflowClipMargin,a=o.borderTopWidth,l=o.borderBottomWidth,c=o.borderLeftWidth,u=o.borderRightWidth,d=r.getBoundingClientRect(),f=r.offsetHeight,h=r.clientHeight,g=r.offsetWidth,y=r.clientWidth,m=P0(a),S=P0(l),x=P0(c),C=P0(u),E=qS(Math.round(d.width/g*1e3)/1e3),P=qS(Math.round(d.height/f*1e3)/1e3),I=(g-y-x-C)*E,T=(f-h-m-S)*P,M=m*P,R=S*P,A=x*E,j=C*E,N=0,k=0;if(i==="clip"){var D=P0(s);N=D*E,k=D*P}var F=d.x+A-N,H=d.y+M-k,U=F+d.width+2*N-A-j-I,B=H+d.height+2*k-M-R-T;n.left=Math.max(n.left,F),n.top=Math.max(n.top,H),n.right=Math.min(n.right,U),n.bottom=Math.min(n.bottom,B)}}),n}function tW(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(e),r=n.match(/^(.*)\%$/);return r?t*(parseFloat(r[1])/100):parseFloat(n)}function nW(t,e){var n=e||[],r=xe(n,2),o=r[0],i=r[1];return[tW(t.width,o),tW(t.height,i)]}function rW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function Gg(t,e){var n=e[0],r=e[1],o,i;return n==="t"?i=t.y:n==="b"?i=t.y+t.height:i=t.y+t.height/2,r==="l"?o=t.x:r==="r"?o=t.x+t.width:o=t.x+t.width/2,{x:o,y:i}}function cf(t,e){var n={t:"b",b:"t",l:"r",r:"l"};return t.map(function(r,o){return o===e?n[r]||"c":r}).join("")}function uIe(t,e,n,r,o,i,s){var a=v.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:o[r]||{}}),l=xe(a,2),c=l[0],u=l[1],d=v.useRef(0),f=v.useMemo(function(){return e?YL(e):[]},[e]),h=v.useRef({}),g=function(){h.current={}};t||g();var y=Bo(function(){if(e&&n&&t){let Po=function(fo,Go){var ta=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$e,Is=Y.x+fo,Ts=Y.y+Go,Bu=Is+ge,Dt=Ts+ie,tn=Math.max(Is,ta.left),Er=Math.max(Ts,ta.top),Lr=Math.min(Bu,ta.right),ir=Math.min(Dt,ta.bottom);return Math.max(0,(Lr-tn)*(ir-Er))},Mi=function(){wn=Y.y+Xe,nr=wn+ie,rr=Y.x+ot,ur=rr+ge};var zu=Po,ui=Mi,x,C,E,P,I=e,T=I.ownerDocument,M=Gx(I),R=M.getComputedStyle(I),A=R.width,j=R.height,N=R.position,k=I.style.left,D=I.style.top,F=I.style.right,H=I.style.bottom,U=I.style.overflow,B=de(de({},o[r]),i),W=T.createElement("div");(x=I.parentElement)===null||x===void 0||x.appendChild(W),W.style.left="".concat(I.offsetLeft,"px"),W.style.top="".concat(I.offsetTop,"px"),W.style.position=N,W.style.height="".concat(I.offsetHeight,"px"),W.style.width="".concat(I.offsetWidth,"px"),I.style.left="0",I.style.top="0",I.style.right="auto",I.style.bottom="auto",I.style.overflow="hidden";var K;if(Array.isArray(n))K={x:n[0],y:n[1],width:0,height:0};else{var q,X,Z=n.getBoundingClientRect();Z.x=(q=Z.x)!==null&&q!==void 0?q:Z.left,Z.y=(X=Z.y)!==null&&X!==void 0?X:Z.top,K={x:Z.x,y:Z.y,width:Z.width,height:Z.height}}var Y=I.getBoundingClientRect();Y.x=(C=Y.x)!==null&&C!==void 0?C:Y.left,Y.y=(E=Y.y)!==null&&E!==void 0?E:Y.top;var G=T.documentElement,J=G.clientWidth,ne=G.clientHeight,ee=G.scrollWidth,re=G.scrollHeight,le=G.scrollTop,ae=G.scrollLeft,ie=Y.height,ge=Y.width,ve=K.height,fe=K.width,ue={left:0,top:0,right:J,bottom:ne},Ce={left:-ae,top:-le,right:ee-ae,bottom:re-le},ye=B.htmlRegion,ke="visible",Be="visibleFirst";ye!=="scroll"&&ye!==Be&&(ye=ke);var Ue=ye===Be,We=eW(Ce,f),Me=eW(ue,f),$e=ye===ke?Me:We,Qe=Ue?Me:$e;I.style.left="auto",I.style.top="auto",I.style.right="0",I.style.bottom="0";var nt=I.getBoundingClientRect();I.style.left=k,I.style.top=D,I.style.right=F,I.style.bottom=H,I.style.overflow=U,(P=I.parentElement)===null||P===void 0||P.removeChild(W);var ht=qS(Math.round(ge/parseFloat(A)*1e3)/1e3),ft=qS(Math.round(ie/parseFloat(j)*1e3)/1e3);if(ht===0||ft===0||BS(n)&&!HT(n))return;var et=B.offset,pe=B.targetOffset,Pe=nW(Y,et),je=xe(Pe,2),Le=je[0],qe=je[1],at=nW(K,pe),Ae=xe(at,2),Ne=Ae[0],xt=Ae[1];K.x-=Ne,K.y-=xt;var Pt=B.points||[],gn=xe(Pt,2),Xt=gn[0],sn=gn[1],Zt=rW(sn),Vt=rW(Xt),an=Gg(K,Zt),wt=Gg(Y,Vt),bt=de({},B),ot=an.x-wt.x+Le,Xe=an.y-wt.y+qe,qt=Po(ot,Xe),Tt=Po(ot,Xe,Me),Fe=Gg(K,["t","l"]),Ge=Gg(Y,["t","l"]),ut=Gg(K,["b","r"]),St=Gg(Y,["b","r"]),lt=B.overflow||{},kt=lt.adjustX,_n=lt.adjustY,bn=lt.shiftX,ln=lt.shiftY,en=function(Go){return typeof Go=="boolean"?Go:Go>=0},wn,nr,rr,ur;Mi();var Nn=en(_n),gt=Vt[0]===Zt[0];if(Nn&&Vt[0]==="t"&&(nr>Qe.bottom||h.current.bt)){var De=Xe;gt?De-=ie-ve:De=Fe.y-St.y-qe;var pt=Po(ot,De),yt=Po(ot,De,Me);pt>qt||pt===qt&&(!Ue||yt>=Tt)?(h.current.bt=!0,Xe=De,qe=-qe,bt.points=[cf(Vt,0),cf(Zt,0)]):h.current.bt=!1}if(Nn&&Vt[0]==="b"&&(wn<Qe.top||h.current.tb)){var ze=Xe;gt?ze+=ie-ve:ze=ut.y-Ge.y-qe;var Nt=Po(ot,ze),mn=Po(ot,ze,Me);Nt>qt||Nt===qt&&(!Ue||mn>=Tt)?(h.current.tb=!0,Xe=ze,qe=-qe,bt.points=[cf(Vt,0),cf(Zt,0)]):h.current.tb=!1}var An=en(kt),Qn=Vt[1]===Zt[1];if(An&&Vt[1]==="l"&&(ur>Qe.right||h.current.rl)){var _t=ot;Qn?_t-=ge-fe:_t=Fe.x-St.x-Le;var Mt=Po(_t,Xe),un=Po(_t,Xe,Me);Mt>qt||Mt===qt&&(!Ue||un>=Tt)?(h.current.rl=!0,ot=_t,Le=-Le,bt.points=[cf(Vt,1),cf(Zt,1)]):h.current.rl=!1}if(An&&Vt[1]==="r"&&(rr<Qe.left||h.current.lr)){var In=ot;Qn?In+=ge-fe:In=ut.x-Ge.x-Le;var Co=Po(In,Xe),Dr=Po(In,Xe,Me);Co>qt||Co===qt&&(!Ue||Dr>=Tt)?(h.current.lr=!0,ot=In,Le=-Le,bt.points=[cf(Vt,1),cf(Zt,1)]):h.current.lr=!1}Mi();var Mr=bn===!0?0:bn;typeof Mr=="number"&&(rr<Me.left&&(ot-=rr-Me.left-Le,K.x+fe<Me.left+Mr&&(ot+=K.x-Me.left+fe-Mr)),ur>Me.right&&(ot-=ur-Me.right-Le,K.x>Me.right-Mr&&(ot+=K.x-Me.right+Mr)));var jr=ln===!0?0:ln;typeof jr=="number"&&(wn<Me.top&&(Xe-=wn-Me.top-qe,K.y+ve<Me.top+jr&&(Xe+=K.y-Me.top+ve-jr)),nr>Me.bottom&&(Xe-=nr-Me.bottom-qe,K.y>Me.bottom-jr&&(Xe+=K.y-Me.bottom+jr)));var ko=Y.x+ot,Ao=ko+ge,pr=Y.y+Xe,no=pr+ie,$n=K.x,Ot=$n+fe,ct=K.y,Fn=ct+ve,Un=Math.max(ko,$n),rn=Math.min(Ao,Ot),vn=(Un+rn)/2,xr=vn-ko,or=Math.max(pr,ct),on=Math.min(no,Fn),Or=(or+on)/2,uo=Or-pr;s==null||s(e,bt);var Eo=nt.right-Y.x-(ot+Y.width),wr=nt.bottom-Y.y-(Xe+Y.height);ht===1&&(ot=Math.round(ot),Eo=Math.round(Eo)),ft===1&&(Xe=Math.round(Xe),wr=Math.round(wr));var Wc={ready:!0,offsetX:ot/ht,offsetY:Xe/ft,offsetR:Eo/ht,offsetB:wr/ft,arrowX:xr/ht,arrowY:uo/ft,scaleX:ht,scaleY:ft,align:bt};u(Wc)}}),m=function(){d.current+=1;var C=d.current;Promise.resolve().then(function(){d.current===C&&y()})},S=function(){u(function(C){return de(de({},C),{},{ready:!1})})};return lr(S,[r]),lr(function(){t||S()},[t]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,m]}function dIe(t,e,n,r,o){lr(function(){if(t&&e&&n){let f=function(){r(),o()};var d=f,i=e,s=n,a=YL(i),l=YL(s),c=Gx(s),u=new Set([c].concat(it(a),it(l)));return u.forEach(function(h){h.addEventListener("scroll",f,{passive:!0})}),c.addEventListener("resize",f,{passive:!0}),r(),function(){u.forEach(function(h){h.removeEventListener("scroll",f),c.removeEventListener("resize",f)})}}},[t,e,n])}function fIe(t,e,n,r,o,i,s,a){var l=v.useRef(t);l.current=t;var c=v.useRef(!1);v.useEffect(function(){if(e&&r&&(!o||i)){var d=function(){c.current=!1},f=function(m){var S;l.current&&!s(((S=m.composedPath)===null||S===void 0||(S=S.call(m))===null||S===void 0?void 0:S[0])||m.target)&&!c.current&&a(!1)},h=Gx(r);h.addEventListener("pointerdown",d,!0),h.addEventListener("mousedown",f,!0),h.addEventListener("contextmenu",f,!0);var g=I_(n);return g&&(g.addEventListener("mousedown",f,!0),g.addEventListener("contextmenu",f,!0)),function(){h.removeEventListener("pointerdown",d,!0),h.removeEventListener("mousedown",f,!0),h.removeEventListener("contextmenu",f,!0),g&&(g.removeEventListener("mousedown",f,!0),g.removeEventListener("contextmenu",f,!0))}}},[e,n,r,o,i]);function u(){c.current=!0}return u}var hIe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function pIe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fre,e=v.forwardRef(function(n,r){var o=n.prefixCls,i=o===void 0?"rc-trigger-popup":o,s=n.children,a=n.action,l=a===void 0?"hover":a,c=n.showAction,u=n.hideAction,d=n.popupVisible,f=n.defaultPopupVisible,h=n.onPopupVisibleChange,g=n.afterPopupVisibleChange,y=n.mouseEnterDelay,m=n.mouseLeaveDelay,S=m===void 0?.1:m,x=n.focusDelay,C=n.blurDelay,E=n.mask,P=n.maskClosable,I=P===void 0?!0:P,T=n.getPopupContainer,M=n.forceRender,R=n.autoDestroy,A=n.destroyPopupOnHide,j=n.popup,N=n.popupClassName,k=n.popupStyle,D=n.popupPlacement,F=n.builtinPlacements,H=F===void 0?{}:F,U=n.popupAlign,B=n.zIndex,W=n.stretch,K=n.getPopupClassNameFromAlign,q=n.fresh,X=n.alignPoint,Z=n.onPopupClick,Y=n.onPopupAlign,G=n.arrow,J=n.popupMotion,ne=n.maskMotion,ee=n.popupTransitionName,re=n.popupAnimation,le=n.maskTransitionName,ae=n.maskAnimation,ie=n.className,ge=n.getTriggerDOMNode,ve=Sn(n,hIe),fe=R||A||!1,ue=v.useState(!1),Ce=xe(ue,2),ye=Ce[0],ke=Ce[1];lr(function(){ke(Sz())},[]);var Be=v.useRef({}),Ue=v.useContext(QU),We=v.useMemo(function(){return{registerSubPopup:function(tn,Er){Be.current[tn]=Er,Ue==null||Ue.registerSubPopup(tn,Er)}}},[Ue]),Me=pre(),$e=v.useState(null),Qe=xe($e,2),nt=Qe[0],ht=Qe[1],ft=v.useRef(null),et=Bo(function(Dt){ft.current=Dt,BS(Dt)&&nt!==Dt&&ht(Dt),Ue==null||Ue.registerSubPopup(Me,Dt)}),pe=v.useState(null),Pe=xe(pe,2),je=Pe[0],Le=Pe[1],qe=v.useRef(null),at=Bo(function(Dt){BS(Dt)&&je!==Dt&&(Le(Dt),qe.current=Dt)}),Ae=v.Children.only(s),Ne=(Ae==null?void 0:Ae.props)||{},xt={},Pt=Bo(function(Dt){var tn,Er,Lr=je;return(Lr==null?void 0:Lr.contains(Dt))||((tn=I_(Lr))===null||tn===void 0?void 0:tn.host)===Dt||Dt===Lr||(nt==null?void 0:nt.contains(Dt))||((Er=I_(nt))===null||Er===void 0?void 0:Er.host)===Dt||Dt===nt||Object.values(Be.current).some(function(ir){return(ir==null?void 0:ir.contains(Dt))||Dt===ir})}),gn=JU(i,J,re,ee),Xt=JU(i,ne,ae,le),sn=v.useState(f||!1),Zt=xe(sn,2),Vt=Zt[0],an=Zt[1],wt=d??Vt,bt=Bo(function(Dt){d===void 0&&an(Dt)});lr(function(){an(d||!1)},[d]);var ot=v.useRef(wt);ot.current=wt;var Xe=v.useRef([]);Xe.current=[];var qt=Bo(function(Dt){var tn;bt(Dt),((tn=Xe.current[Xe.current.length-1])!==null&&tn!==void 0?tn:wt)!==Dt&&(Xe.current.push(Dt),h==null||h(Dt))}),Tt=v.useRef(),Fe=function(){clearTimeout(Tt.current)},Ge=function(tn){var Er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Fe(),Er===0?qt(tn):Tt.current=setTimeout(function(){qt(tn)},Er*1e3)};v.useEffect(function(){return Fe},[]);var ut=v.useState(!1),St=xe(ut,2),lt=St[0],kt=St[1];lr(function(Dt){(!Dt||wt)&&kt(!0)},[wt]);var _n=v.useState(null),bn=xe(_n,2),ln=bn[0],en=bn[1],wn=v.useState(null),nr=xe(wn,2),rr=nr[0],ur=nr[1],Nn=function(tn){ur([tn.clientX,tn.clientY])},gt=uIe(wt,nt,X&&rr!==null?rr:je,D,H,U,Y),De=xe(gt,11),pt=De[0],yt=De[1],ze=De[2],Nt=De[3],mn=De[4],An=De[5],Qn=De[6],_t=De[7],Mt=De[8],un=De[9],In=De[10],Co=aIe(ye,l,c,u),Dr=xe(Co,2),Mr=Dr[0],jr=Dr[1],ko=Mr.has("click"),Ao=jr.has("click")||jr.has("contextMenu"),pr=Bo(function(){lt||In()}),no=function(){ot.current&&X&&Ao&&Ge(!1)};dIe(wt,je,nt,pr,no),lr(function(){pr()},[rr,D]),lr(function(){wt&&!(H!=null&&H[D])&&pr()},[JSON.stringify(U)]);var $n=v.useMemo(function(){var Dt=cIe(H,i,un,X);return he(Dt,K==null?void 0:K(un))},[un,K,H,i,X]);v.useImperativeHandle(r,function(){return{nativeElement:qe.current,popupElement:ft.current,forceAlign:pr}});var Ot=v.useState(0),ct=xe(Ot,2),Fn=ct[0],Un=ct[1],rn=v.useState(0),vn=xe(rn,2),xr=vn[0],or=vn[1],on=function(){if(W&&je){var tn=je.getBoundingClientRect();Un(tn.width),or(tn.height)}},Or=function(){on(),pr()},uo=function(tn){kt(!1),In(),g==null||g(tn)},Eo=function(){return new Promise(function(tn){on(),en(function(){return tn})})};lr(function(){ln&&(In(),ln(),en(null))},[ln]);function wr(Dt,tn,Er,Lr){xt[Dt]=function(ir){var Vc;Lr==null||Lr(ir),Ge(tn,Er);for(var Ph=arguments.length,qc=new Array(Ph>1?Ph-1:0),sl=1;sl<Ph;sl++)qc[sl-1]=arguments[sl];(Vc=Ne[Dt])===null||Vc===void 0||Vc.call.apply(Vc,[Ne,ir].concat(qc))}}(ko||Ao)&&(xt.onClick=function(Dt){var tn;ot.current&&Ao?Ge(!1):!ot.current&&ko&&(Nn(Dt),Ge(!0));for(var Er=arguments.length,Lr=new Array(Er>1?Er-1:0),ir=1;ir<Er;ir++)Lr[ir-1]=arguments[ir];(tn=Ne.onClick)===null||tn===void 0||tn.call.apply(tn,[Ne,Dt].concat(Lr))});var Wc=fIe(wt,Ao,je,nt,E,I,Pt,Ge),zu=Mr.has("hover"),ui=jr.has("hover"),Po,Mi;zu&&(wr("onMouseEnter",!0,y,function(Dt){Nn(Dt)}),wr("onPointerEnter",!0,y,function(Dt){Nn(Dt)}),Po=function(tn){(wt||lt)&&nt!==null&&nt!==void 0&&nt.contains(tn.target)&&Ge(!0,y)},X&&(xt.onMouseMove=function(Dt){var tn;(tn=Ne.onMouseMove)===null||tn===void 0||tn.call(Ne,Dt)})),ui&&(wr("onMouseLeave",!1,S),wr("onPointerLeave",!1,S),Mi=function(){Ge(!1,S)}),Mr.has("focus")&&wr("onFocus",!0,x),jr.has("focus")&&wr("onBlur",!1,C),Mr.has("contextMenu")&&(xt.onContextMenu=function(Dt){var tn;ot.current&&jr.has("contextMenu")?Ge(!1):(Nn(Dt),Ge(!0)),Dt.preventDefault();for(var Er=arguments.length,Lr=new Array(Er>1?Er-1:0),ir=1;ir<Er;ir++)Lr[ir-1]=arguments[ir];(tn=Ne.onContextMenu)===null||tn===void 0||tn.call.apply(tn,[Ne,Dt].concat(Lr))}),ie&&(xt.className=he(Ne.className,ie));var fo=de(de({},Ne),xt),Go={},ta=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];ta.forEach(function(Dt){ve[Dt]&&(Go[Dt]=function(){for(var tn,Er=arguments.length,Lr=new Array(Er),ir=0;ir<Er;ir++)Lr[ir]=arguments[ir];(tn=fo[Dt])===null||tn===void 0||tn.call.apply(tn,[fo].concat(Lr)),ve[Dt].apply(ve,Lr)})});var Is=v.cloneElement(Ae,de(de({},fo),Go)),Ts={x:An,y:Qn},Bu=G?de({},G!==!0?G:{}):null;return v.createElement(v.Fragment,null,v.createElement(Ha,{disabled:!wt,ref:at,onResize:Or},v.createElement(sIe,{getTriggerDOMNode:ge},Is)),v.createElement(QU.Provider,{value:We},v.createElement(iIe,{portal:t,ref:et,prefixCls:i,popup:j,className:he(N,$n),style:k,target:je,onMouseEnter:Po,onMouseLeave:Mi,onPointerEnter:Po,zIndex:B,open:wt,keepDom:lt,fresh:q,onClick:Z,onPointerDownCapture:Wc,mask:E,motion:gn,maskMotion:Xt,onVisibleChanged:uo,onPrepare:Eo,forceRender:M,autoDestroy:fe,getPopupContainer:T,align:un,arrow:Bu,arrowPos:Ts,ready:pt,offsetX:yt,offsetY:ze,offsetR:Nt,offsetB:mn,onAlign:pr,stretch:W,targetWidth:Fn/_t,targetHeight:xr/Mt})))});return e}const UT=pIe(fre);var Xg={shiftX:64,adjustY:1},Yg={adjustX:1,shiftY:!0},hl=[0,0],gIe={left:{points:["cr","cl"],overflow:Yg,offset:[-4,0],targetOffset:hl},right:{points:["cl","cr"],overflow:Yg,offset:[4,0],targetOffset:hl},top:{points:["bc","tc"],overflow:Xg,offset:[0,-4],targetOffset:hl},bottom:{points:["tc","bc"],overflow:Xg,offset:[0,4],targetOffset:hl},topLeft:{points:["bl","tl"],overflow:Xg,offset:[0,-4],targetOffset:hl},leftTop:{points:["tr","tl"],overflow:Yg,offset:[-4,0],targetOffset:hl},topRight:{points:["br","tr"],overflow:Xg,offset:[0,-4],targetOffset:hl},rightTop:{points:["tl","tr"],overflow:Yg,offset:[4,0],targetOffset:hl},bottomRight:{points:["tr","br"],overflow:Xg,offset:[0,4],targetOffset:hl},rightBottom:{points:["bl","br"],overflow:Yg,offset:[4,0],targetOffset:hl},bottomLeft:{points:["tl","bl"],overflow:Xg,offset:[0,4],targetOffset:hl},leftBottom:{points:["br","bl"],overflow:Yg,offset:[-4,0],targetOffset:hl}},mIe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],vIe=function(e,n){var r=e.overlayClassName,o=e.trigger,i=o===void 0?["hover"]:o,s=e.mouseEnterDelay,a=s===void 0?0:s,l=e.mouseLeaveDelay,c=l===void 0?.1:l,u=e.overlayStyle,d=e.prefixCls,f=d===void 0?"rc-tooltip":d,h=e.children,g=e.onVisibleChange,y=e.afterVisibleChange,m=e.transitionName,S=e.animation,x=e.motion,C=e.placement,E=C===void 0?"right":C,P=e.align,I=P===void 0?{}:P,T=e.destroyTooltipOnHide,M=T===void 0?!1:T,R=e.defaultVisible,A=e.getTooltipContainer,j=e.overlayInnerStyle;e.arrowContent;var N=e.overlay,k=e.id,D=e.showArrow,F=D===void 0?!0:D,H=e.classNames,U=e.styles,B=Sn(e,mIe),W=pre(k),K=v.useRef(null);v.useImperativeHandle(n,function(){return K.current});var q=de({},B);"visible"in e&&(q.popupVisible=e.visible);var X=function(){return v.createElement(bz,{key:"content",prefixCls:f,id:W,bodyClassName:H==null?void 0:H.body,overlayInnerStyle:de(de({},j),U==null?void 0:U.body)},N)},Z=function(){var G=v.Children.only(h),J=(G==null?void 0:G.props)||{},ne=de(de({},J),{},{"aria-describedby":N?W:null});return v.cloneElement(h,ne)};return v.createElement(UT,vt({popupClassName:he(r,H==null?void 0:H.root),prefixCls:f,popup:X,action:i,builtinPlacements:gIe,popupPlacement:E,ref:K,popupAlign:I,getPopupContainer:A,onPopupVisibleChange:g,afterPopupVisibleChange:y,popupTransitionName:m,popupAnimation:S,popupMotion:x,defaultPopupVisible:R,autoDestroy:M,mouseLeaveDelay:c,popupStyle:de(de({},u),U==null?void 0:U.root),mouseEnterDelay:a,arrow:F},q),Z())};const gre=v.forwardRef(vIe),yIe=Object.freeze(Object.defineProperty({__proto__:null,Popup:bz,default:gre},Symbol.toStringTag,{value:"Module"})),mre=Ru(yIe);var _0={},Ai={};function vre(t,e){this.v=t,this.k=e}function ls(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch{o=0}ls=function(s,a,l,c){if(a)o?o(s,a,{value:l,enumerable:!c,configurable:!c,writable:!c}):s[a]=l;else{var u=function(f,h){ls(s,f,function(g){return this._invoke(f,h,g)})};u("next",0),u("throw",1),u("return",2)}},ls(t,e,n,r)}function xz(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=typeof Symbol=="function"?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(h,g,y,m){var S=g&&g.prototype instanceof a?g:a,x=Object.create(S.prototype);return ls(x,"_invoke",function(C,E,P){var I,T,M,R=0,A=P||[],j=!1,N={p:0,n:0,v:t,a:k,f:k.bind(t,4),d:function(F,H){return I=F,T=0,M=t,N.n=H,s}};function k(D,F){for(T=D,M=F,e=0;!j&&R&&!H&&e<A.length;e++){var H,U=A[e],B=N.p,W=U[2];D>3?(H=W===F)&&(M=U[(T=U[4])?5:(T=3,3)],U[4]=U[5]=t):U[0]<=B&&((H=D<2&&B<U[1])?(T=0,N.v=F,N.n=U[1]):B<W&&(H=D<3||U[0]>F||F>W)&&(U[4]=D,U[5]=F,N.n=W,T=0))}if(H||D>1)return s;throw j=!0,F}return function(D,F,H){if(R>1)throw TypeError("Generator is already running");for(j&&F===1&&k(F,H),T=F,M=H;(e=T<2?t:M)||!j;){I||(T?T<3?(T>1&&(N.n=-1),k(T,M)):N.n=M:N.v=M);try{if(R=2,I){if(T||(D="next"),e=I[D]){if(!(e=e.call(I,M)))throw TypeError("iterator result is not an object");if(!e.done)return e;M=e.value,T<2&&(T=0)}else T===1&&(e=I.return)&&e.call(I),T<2&&(M=TypeError("The iterator does not provide a '"+D+"' method"),T=1);I=t}else if((e=(j=N.n<0)?M:C.call(E,N))!==s)break}catch(U){I=t,T=1,M=U}finally{R=1}}return{value:e,done:j}}}(h,y,m),!0),x}var s={};function a(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(ls(e={},r,function(){return this}),e),d=c.prototype=a.prototype=Object.create(u);function f(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,c):(h.__proto__=c,ls(h,o,"GeneratorFunction")),h.prototype=Object.create(d),h}return l.prototype=c,ls(d,"constructor",c),ls(c,"constructor",l),l.displayName="GeneratorFunction",ls(c,o,"GeneratorFunction"),ls(d),ls(d,o,"Generator"),ls(d,r,function(){return this}),ls(d,"toString",function(){return"[object Generator]"}),(xz=function(){return{w:i,m:f}})()}function T_(t,e){function n(o,i,s,a){try{var l=t[o](i),c=l.value;return c instanceof vre?e.resolve(c.v).then(function(u){n("next",u,s,a)},function(u){n("throw",u,s,a)}):e.resolve(c).then(function(u){l.value=u,s(l)},function(u){return n("throw",u,s,a)})}catch(u){a(u)}}var r;this.next||(ls(T_.prototype),ls(T_.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),ls(this,"_invoke",function(o,i,s){function a(){return new e(function(l,c){n(o,s,l,c)})}return r=r?r.then(a,a):a()},!0)}function yre(t,e,n,r,o){return new T_(xz().w(t,e,n,r),o||Promise)}function bIe(t,e,n,r,o){var i=yre(t,e,n,r,o);return i.next().then(function(s){return s.done?s.value:i.next()})}function SIe(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function o(){for(;n.length;)if((r=n.pop())in e)return o.value=r,o.done=!1,o;return o.done=!0,o}}function oW(t){if(t!=null){var e=t[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Wt(t)+" is not iterable")}function ys(){var t=xz(),e=t.m(ys),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(s){var a=typeof s=="function"&&s.constructor;return!!a&&(a===n||(a.displayName||a.name)==="GeneratorFunction")}var o={throw:1,return:2,break:3,continue:3};function i(s){var a,l;return function(c){a||(a={stop:function(){return l(c.a,2)},catch:function(){return c.v},abrupt:function(d,f){return l(c.a,o[d],f)},delegateYield:function(d,f,h){return a.resultName=f,l(c.d,oW(d),h)},finish:function(d){return l(c.f,d)}},l=function(d,f,h){c.p=a.prev,c.n=a.next;try{return d(f,h)}finally{a.next=c.n}}),a.resultName&&(a[a.resultName]=c.v,a.resultName=void 0),a.sent=c.v,a.next=c.n;try{return s.call(this,a)}finally{c.p=a.prev,c.n=a.next}}}return(ys=function(){return{wrap:function(l,c,u,d){return t.w(i(l),c,u,d&&d.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(l,c){return new vre(l,c)},AsyncIterator:T_,async:function(l,c,u,d,f){return(r(c)?yre:bIe)(i(l),c,u,d,f)},keys:SIe,values:oW}})()}function iW(t,e,n,r,o,i,s){try{var a=t[i](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,o)}function gg(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(l){iW(i,r,o,s,a,"next",l)}function a(l){iW(i,r,o,s,a,"throw",l)}s(void 0)})}}var hp="RC_FORM_INTERNAL_HOOKS",Rr=function(){Vi(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Gf=v.createContext({getFieldValue:Rr,getFieldsValue:Rr,getFieldError:Rr,getFieldWarning:Rr,getFieldsError:Rr,isFieldsTouched:Rr,isFieldTouched:Rr,isFieldValidating:Rr,isFieldsValidating:Rr,resetFields:Rr,setFields:Rr,setFieldValue:Rr,setFieldsValue:Rr,validateFields:Rr,submit:Rr,getInternalHooks:function(){return Rr(),{dispatch:Rr,initEntityValue:Rr,registerField:Rr,useSubscribe:Rr,setInitialValues:Rr,destroyForm:Rr,setCallbacks:Rr,registerWatch:Rr,getFields:Rr,setValidateMessages:Rr,setPreserve:Rr,getInitialValue:Rr}}}),fv=v.createContext(null);function QL(t){return t==null?[]:Array.isArray(t)?t:[t]}function xIe(t){return t&&!!t._init}function ZL(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var JL=ZL();function wIe(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function CIe(t,e,n){if(jT())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&HS(o,n.prototype),o}function eN(t){var e=typeof Map=="function"?new Map:void 0;return eN=function(r){if(r===null||!wIe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,o)}function o(){return CIe(r,arguments,$p(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),HS(o,r)},eN(t)}var EIe=/%[sdj%]/g,PIe=function(){};function tN(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function Na(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=0,i=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var s=t.replace(EIe,function(a){if(a==="%%")return"%";if(o>=i)return a;switch(a){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch{return"[Circular]"}break;default:return a}});return s}return t}function _Ie(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function ai(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||_Ie(e)&&typeof t=="string"&&!t)}function IIe(t,e,n){var r=[],o=0,i=t.length;function s(a){r.push.apply(r,it(a||[])),o++,o===i&&n(r)}t.forEach(function(a){e(a,s)})}function sW(t,e,n){var r=0,o=t.length;function i(s){if(s&&s.length){n(s);return}var a=r;r=r+1,a<o?e(t[a],i):n([])}i([])}function TIe(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,it(t[n]||[]))}),e}var aW=function(t){Nl(n,t);var e=Lc(n);function n(r,o){var i;return ao(this,n),i=e.call(this,"Async Validation Error"),oe(Rn(i),"errors",void 0),oe(Rn(i),"fields",void 0),i.errors=r,i.fields=o,i}return lo(n)}(eN(Error));function MIe(t,e,n,r,o){if(e.first){var i=new Promise(function(f,h){var g=function(S){return r(S),S.length?h(new aW(S,tN(S))):f(o)},y=TIe(t);sW(y,n,g)});return i.catch(function(f){return f}),i}var s=e.firstFields===!0?Object.keys(t):e.firstFields||[],a=Object.keys(t),l=a.length,c=0,u=[],d=new Promise(function(f,h){var g=function(m){if(u.push.apply(u,m),c++,c===l)return r(u),u.length?h(new aW(u,tN(u))):f(o)};a.length||(r(u),f(o)),a.forEach(function(y){var m=t[y];s.indexOf(y)!==-1?sW(m,n,g):IIe(m,n,g)})});return d.catch(function(f){return f}),d}function OIe(t){return!!(t&&t.message!==void 0)}function RIe(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function lW(t,e){return function(n){var r;return t.fullFields?r=RIe(e,t.fullFields):r=e[n.field||t.fullField],OIe(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function cW(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];Wt(r)==="object"&&Wt(t[n])==="object"?t[n]=de(de({},t[n]),r):t[n]=r}}return t}var Qg="enum",kIe=function(e,n,r,o,i){e[Qg]=Array.isArray(e[Qg])?e[Qg]:[],e[Qg].indexOf(n)===-1&&o.push(Na(i.messages[Qg],e.fullField,e[Qg].join(", ")))},AIe=function(e,n,r,o,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||o.push(Na(i.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var s=new RegExp(e.pattern);s.test(n)||o.push(Na(i.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},$Ie=function(e,n,r,o,i){var s=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,d=null,f=typeof n=="number",h=typeof n=="string",g=Array.isArray(n);if(f?d="number":h?d="string":g&&(d="array"),!d)return!1;g&&(u=n.length),h&&(u=n.replace(c,"_").length),s?u!==e.len&&o.push(Na(i.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?o.push(Na(i.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?o.push(Na(i.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&o.push(Na(i.messages[d].range,e.fullField,e.min,e.max))},bre=function(e,n,r,o,i,s){e.required&&(!r.hasOwnProperty(e.field)||ai(n,s||e.type))&&o.push(Na(i.messages.required,e.fullField))},bC;const DIe=function(){if(bC)return bC;var t="[a-fA-F\\d:]",e=function(I){return I&&I.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",o=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],i="(?:%[0-9a-zA-Z]{1,})?",s="(?:".concat(o.join("|"),")").concat(i),a=new RegExp("(?:^".concat(n,"$)|(?:^").concat(s,"$)")),l=new RegExp("^".concat(n,"$")),c=new RegExp("^".concat(s,"$")),u=function(I){return I&&I.exact?a:new RegExp("(?:".concat(e(I)).concat(n).concat(e(I),")|(?:").concat(e(I)).concat(s).concat(e(I),")"),"g")};u.v4=function(P){return P&&P.exact?l:new RegExp("".concat(e(P)).concat(n).concat(e(P)),"g")},u.v6=function(P){return P&&P.exact?c:new RegExp("".concat(e(P)).concat(s).concat(e(P)),"g")};var d="(?:(?:[a-z]+:)?//)",f="(?:\\S+(?::\\S*)?@)?",h=u.v4().source,g=u.v6().source,y="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",S="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",x="(?::\\d{2,5})?",C='(?:[/?#][^\\s"]*)?',E="(?:".concat(d,"|www\\.)").concat(f,"(?:localhost|").concat(h,"|").concat(g,"|").concat(y).concat(m).concat(S,")").concat(x).concat(C);return bC=new RegExp("(?:^".concat(E,"$)"),"i"),bC};var uW={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Tb={integer:function(e){return Tb.number(e)&&parseInt(e,10)===e},float:function(e){return Tb.number(e)&&!Tb.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Wt(e)==="object"&&!Tb.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(uW.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(DIe())},hex:function(e){return typeof e=="string"&&!!e.match(uW.hex)}},jIe=function(e,n,r,o,i){if(e.required&&n===void 0){bre(e,n,r,o,i);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;s.indexOf(a)>-1?Tb[a](n)||o.push(Na(i.messages.types[a],e.fullField,e.type)):a&&Wt(n)!==e.type&&o.push(Na(i.messages.types[a],e.fullField,e.type))},LIe=function(e,n,r,o,i){(/^\s+$/.test(n)||n==="")&&o.push(Na(i.messages.whitespace,e.fullField))};const er={required:bre,whitespace:LIe,type:jIe,range:$Ie,enum:kIe,pattern:AIe};var NIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i)}r(s)},FIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(n==null&&!e.required)return r();er.required(e,n,o,s,i,"array"),n!=null&&(er.type(e,n,o,s,i),er.range(e,n,o,s,i))}r(s)},zIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&er.type(e,n,o,s,i)}r(s)},BIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n,"date")&&!e.required)return r();if(er.required(e,n,o,s,i),!ai(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),er.type(e,l,o,s,i),l&&er.range(e,l.getTime(),o,s,i)}}r(s)},HIe="enum",UIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&er[HIe](e,n,o,s,i)}r(s)},WIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&(er.type(e,n,o,s,i),er.range(e,n,o,s,i))}r(s)},VIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&(er.type(e,n,o,s,i),er.range(e,n,o,s,i))}r(s)},qIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&er.type(e,n,o,s,i)}r(s)},KIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(n===""&&(n=void 0),ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&(er.type(e,n,o,s,i),er.range(e,n,o,s,i))}r(s)},GIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),n!==void 0&&er.type(e,n,o,s,i)}r(s)},XIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n,"string")&&!e.required)return r();er.required(e,n,o,s,i),ai(n,"string")||er.pattern(e,n,o,s,i)}r(s)},YIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n)&&!e.required)return r();er.required(e,n,o,s,i),ai(n)||er.type(e,n,o,s,i)}r(s)},QIe=function(e,n,r,o,i){var s=[],a=Array.isArray(n)?"array":Wt(n);er.required(e,n,o,s,i,a),r(s)},ZIe=function(e,n,r,o,i){var s=[],a=e.required||!e.required&&o.hasOwnProperty(e.field);if(a){if(ai(n,"string")&&!e.required)return r();er.required(e,n,o,s,i,"string"),ai(n,"string")||(er.type(e,n,o,s,i),er.range(e,n,o,s,i),er.pattern(e,n,o,s,i),e.whitespace===!0&&er.whitespace(e,n,o,s,i))}r(s)},wk=function(e,n,r,o,i){var s=e.type,a=[],l=e.required||!e.required&&o.hasOwnProperty(e.field);if(l){if(ai(n,s)&&!e.required)return r();er.required(e,n,o,a,i,s),ai(n,s)||er.type(e,n,o,a,i)}r(a)};const iS={string:ZIe,method:qIe,number:KIe,boolean:zIe,regexp:YIe,integer:VIe,float:WIe,array:FIe,object:GIe,enum:UIe,pattern:XIe,date:BIe,url:wk,hex:wk,email:wk,required:QIe,any:NIe};var Xx=function(){function t(e){ao(this,t),oe(this,"rules",null),oe(this,"_messages",JL),this.define(e)}return lo(t,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(Wt(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(o){var i=n[o];r.rules[o]=Array.isArray(i)?i:[i]})}},{key:"messages",value:function(n){return n&&(this._messages=cW(ZL(),n)),this._messages}},{key:"validate",value:function(n){var r=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},s=n,a=o,l=i;if(typeof a=="function"&&(l=a,a={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,s),Promise.resolve(s);function c(g){var y=[],m={};function S(C){if(Array.isArray(C)){var E;y=(E=y).concat.apply(E,it(C))}else y.push(C)}for(var x=0;x<g.length;x++)S(g[x]);y.length?(m=tN(y),l(y,m)):l(null,s)}if(a.messages){var u=this.messages();u===JL&&(u=ZL()),cW(u,a.messages),a.messages=u}else a.messages=this.messages();var d={},f=a.keys||Object.keys(this.rules);f.forEach(function(g){var y=r.rules[g],m=s[g];y.forEach(function(S){var x=S;typeof x.transform=="function"&&(s===n&&(s=de({},s)),m=s[g]=x.transform(m),m!=null&&(x.type=x.type||(Array.isArray(m)?"array":Wt(m)))),typeof x=="function"?x={validator:x}:x=de({},x),x.validator=r.getValidationMethod(x),x.validator&&(x.field=g,x.fullField=x.fullField||g,x.type=r.getType(x),d[g]=d[g]||[],d[g].push({rule:x,value:m,source:s,field:g}))})});var h={};return MIe(d,a,function(g,y){var m=g.rule,S=(m.type==="object"||m.type==="array")&&(Wt(m.fields)==="object"||Wt(m.defaultField)==="object");S=S&&(m.required||!m.required&&g.value),m.field=g.field;function x(T,M){return de(de({},M),{},{fullField:"".concat(m.fullField,".").concat(T),fullFields:m.fullFields?[].concat(it(m.fullFields),[T]):[T]})}function C(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=Array.isArray(T)?T:[T];!a.suppressWarning&&M.length&&t.warning("async-validator:",M),M.length&&m.message!==void 0&&(M=[].concat(m.message));var R=M.map(lW(m,s));if(a.first&&R.length)return h[m.field]=1,y(R);if(!S)y(R);else{if(m.required&&!g.value)return m.message!==void 0?R=[].concat(m.message).map(lW(m,s)):a.error&&(R=[a.error(m,Na(a.messages.required,m.field))]),y(R);var A={};m.defaultField&&Object.keys(g.value).map(function(k){A[k]=m.defaultField}),A=de(de({},A),g.rule.fields);var j={};Object.keys(A).forEach(function(k){var D=A[k],F=Array.isArray(D)?D:[D];j[k]=F.map(x.bind(null,k))});var N=new t(j);N.messages(a.messages),g.rule.options&&(g.rule.options.messages=a.messages,g.rule.options.error=a.error),N.validate(g.value,g.rule.options||a,function(k){var D=[];R&&R.length&&D.push.apply(D,it(R)),k&&k.length&&D.push.apply(D,it(k)),y(D.length?D:null)})}}var E;if(m.asyncValidator)E=m.asyncValidator(m,g.value,C,g.source,a);else if(m.validator){try{E=m.validator(m,g.value,C,g.source,a)}catch(T){var P,I;(P=(I=console).error)===null||P===void 0||P.call(I,T),a.suppressValidatorError||setTimeout(function(){throw T},0),C(T.message)}E===!0?C():E===!1?C(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||"".concat(m.fullField||m.field," fails")):E instanceof Array?C(E):E instanceof Error&&C(E.message)}E&&E.then&&E.then(function(){return C()},function(T){return C(T)})},function(g){c(g)},s)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!iS.hasOwnProperty(n.type))throw new Error(Na("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),o=r.indexOf("message");return o!==-1&&r.splice(o,1),r.length===1&&r[0]==="required"?iS.required:iS[this.getType(n)]||void 0}}]),t}();oe(Xx,"register",function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");iS[e]=n});oe(Xx,"warning",PIe);oe(Xx,"messages",JL);oe(Xx,"validators",iS);var Oa="'${name}' is not a valid ${type}",Sre={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Oa,method:Oa,array:Oa,object:Oa,number:Oa,date:Oa,boolean:Oa,integer:Oa,float:Oa,regexp:Oa,email:Oa,url:Oa,hex:Oa},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},dW=Xx;function JIe(t,e){return t.replace(/\\?\$\{\w+\}/g,function(n){if(n.startsWith("\\"))return n.slice(1);var r=n.slice(2,-1);return e[r]})}var fW="CODE_LOGIC_ERROR";function nN(t,e,n,r,o){return rN.apply(this,arguments)}function rN(){return rN=gg(ys().mark(function t(e,n,r,o,i){var s,a,l,c,u,d,f,h,g;return ys().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return s=de({},r),delete s.ruleIndex,dW.warning=function(){},s.validator&&(a=s.validator,s.validator=function(){try{return a.apply(void 0,arguments)}catch(S){return console.error(S),Promise.reject(fW)}}),l=null,s&&s.type==="array"&&s.defaultField&&(l=s.defaultField,delete s.defaultField),c=new dW(oe({},e,[s])),u=Mm(Sre,o.validateMessages),c.messages(u),d=[],m.prev=10,m.next=13,Promise.resolve(c.validate(oe({},e,n),de({},o)));case 13:m.next=18;break;case 15:m.prev=15,m.t0=m.catch(10),m.t0.errors&&(d=m.t0.errors.map(function(S,x){var C=S.message,E=C===fW?u.default:C;return v.isValidElement(E)?v.cloneElement(E,{key:"error_".concat(x)}):E}));case 18:if(!(!d.length&&l)){m.next=23;break}return m.next=21,Promise.all(n.map(function(S,x){return nN("".concat(e,".").concat(x),S,l,o,i)}));case 21:return f=m.sent,m.abrupt("return",f.reduce(function(S,x){return[].concat(it(S),it(x))},[]));case 23:return h=de(de({},r),{},{name:e,enum:(r.enum||[]).join(", ")},i),g=d.map(function(S){return typeof S=="string"?JIe(S,h):S}),m.abrupt("return",g);case 26:case"end":return m.stop()}},t,null,[[10,15]])})),rN.apply(this,arguments)}function eTe(t,e,n,r,o,i){var s=t.join("."),a=n.map(function(u,d){var f=u.validator,h=de(de({},u),{},{ruleIndex:d});return f&&(h.validator=function(g,y,m){var S=!1,x=function(){for(var P=arguments.length,I=new Array(P),T=0;T<P;T++)I[T]=arguments[T];Promise.resolve().then(function(){Vi(!S,"Your validator function has already return a promise. `callback` will be ignored."),S||m.apply(void 0,I)})},C=f(g,y,x);S=C&&typeof C.then=="function"&&typeof C.catch=="function",Vi(S,"`callback` is deprecated. Please return a promise instead."),S&&C.then(function(){m()}).catch(function(E){m(E||" ")})}),h}).sort(function(u,d){var f=u.warningOnly,h=u.ruleIndex,g=d.warningOnly,y=d.ruleIndex;return!!f==!!g?h-y:f?1:-1}),l;if(o===!0)l=new Promise(function(){var u=gg(ys().mark(function d(f,h){var g,y,m;return ys().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:g=0;case 1:if(!(g<a.length)){x.next=12;break}return y=a[g],x.next=5,nN(s,e,y,r,i);case 5:if(m=x.sent,!m.length){x.next=9;break}return h([{errors:m,rule:y}]),x.abrupt("return");case 9:g+=1,x.next=1;break;case 12:f([]);case 13:case"end":return x.stop()}},d)}));return function(d,f){return u.apply(this,arguments)}}());else{var c=a.map(function(u){return nN(s,e,u,r,i).then(function(d){return{errors:d,rule:u}})});l=(o?nTe(c):tTe(c)).then(function(u){return Promise.reject(u)})}return l.catch(function(u){return u}),l}function tTe(t){return oN.apply(this,arguments)}function oN(){return oN=gg(ys().mark(function t(e){return ys().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(e).then(function(o){var i,s=(i=[]).concat.apply(i,it(o));return s}));case 1:case"end":return r.stop()}},t)})),oN.apply(this,arguments)}function nTe(t){return iN.apply(this,arguments)}function iN(){return iN=gg(ys().mark(function t(e){var n;return ys().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return n=0,o.abrupt("return",new Promise(function(i){e.forEach(function(s){s.then(function(a){a.errors.length&&i([a]),n+=1,n===e.length&&i([])})})}));case 2:case"end":return o.stop()}},t)})),iN.apply(this,arguments)}function Fo(t){return QL(t)}function hW(t,e){var n={};return e.forEach(function(r){var o=Il(t,r);n=Sl(n,r,o)}),n}function Um(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t&&t.some(function(r){return xre(e,r,n)})}function xre(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!t||!e||!n&&t.length!==e.length?!1:e.every(function(r,o){return t[o]===r})}function rTe(t,e){if(t===e)return!0;if(!t&&e||t&&!e||!t||!e||Wt(t)!=="object"||Wt(e)!=="object")return!1;var n=Object.keys(t),r=Object.keys(e),o=new Set([].concat(n,r));return it(o).every(function(i){var s=t[i],a=e[i];return typeof s=="function"&&typeof a=="function"?!0:s===a})}function oTe(t){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&Wt(e.target)==="object"&&t in e.target?e.target[t]:e}function pW(t,e,n){var r=t.length;if(e<0||e>=r||n<0||n>=r)return t;var o=t[e],i=e-n;return i>0?[].concat(it(t.slice(0,n)),[o],it(t.slice(n,e)),it(t.slice(e+1,r))):i<0?[].concat(it(t.slice(0,e)),it(t.slice(e+1,n+1)),[o],it(t.slice(n+1,r))):t}var iTe=["name"],pl=[];function Ck(t,e,n,r,o,i){return typeof t=="function"?t(e,n,"source"in i?{source:i.source}:{}):r!==o}var wz=function(t){Nl(n,t);var e=Lc(n);function n(r){var o;if(ao(this,n),o=e.call(this,r),oe(Rn(o),"state",{resetCount:0}),oe(Rn(o),"cancelRegisterFunc",null),oe(Rn(o),"mounted",!1),oe(Rn(o),"touched",!1),oe(Rn(o),"dirty",!1),oe(Rn(o),"validatePromise",void 0),oe(Rn(o),"prevValidating",void 0),oe(Rn(o),"errors",pl),oe(Rn(o),"warnings",pl),oe(Rn(o),"cancelRegister",function(){var l=o.props,c=l.preserve,u=l.isListField,d=l.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(u,c,Fo(d)),o.cancelRegisterFunc=null}),oe(Rn(o),"getNamePath",function(){var l=o.props,c=l.name,u=l.fieldContext,d=u.prefixName,f=d===void 0?[]:d;return c!==void 0?[].concat(it(f),it(c)):[]}),oe(Rn(o),"getRules",function(){var l=o.props,c=l.rules,u=c===void 0?[]:c,d=l.fieldContext;return u.map(function(f){return typeof f=="function"?f(d):f})}),oe(Rn(o),"refresh",function(){o.mounted&&o.setState(function(l){var c=l.resetCount;return{resetCount:c+1}})}),oe(Rn(o),"metaCache",null),oe(Rn(o),"triggerMetaEvent",function(l){var c=o.props.onMetaChange;if(c){var u=de(de({},o.getMeta()),{},{destroy:l});Dp(o.metaCache,u)||c(u),o.metaCache=u}else o.metaCache=null}),oe(Rn(o),"onStoreChange",function(l,c,u){var d=o.props,f=d.shouldUpdate,h=d.dependencies,g=h===void 0?[]:h,y=d.onReset,m=u.store,S=o.getNamePath(),x=o.getValue(l),C=o.getValue(m),E=c&&Um(c,S);switch(u.type==="valueUpdate"&&u.source==="external"&&!Dp(x,C)&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=pl,o.warnings=pl,o.triggerMetaEvent()),u.type){case"reset":if(!c||E){o.touched=!1,o.dirty=!1,o.validatePromise=void 0,o.errors=pl,o.warnings=pl,o.triggerMetaEvent(),y==null||y(),o.refresh();return}break;case"remove":{if(f&&Ck(f,l,m,x,C,u)){o.reRender();return}break}case"setField":{var P=u.data;if(E){"touched"in P&&(o.touched=P.touched),"validating"in P&&!("originRCField"in P)&&(o.validatePromise=P.validating?Promise.resolve([]):null),"errors"in P&&(o.errors=P.errors||pl),"warnings"in P&&(o.warnings=P.warnings||pl),o.dirty=!0,o.triggerMetaEvent(),o.reRender();return}else if("value"in P&&Um(c,S,!0)){o.reRender();return}if(f&&!S.length&&Ck(f,l,m,x,C,u)){o.reRender();return}break}case"dependenciesUpdate":{var I=g.map(Fo);if(I.some(function(T){return Um(u.relatedFields,T)})){o.reRender();return}break}default:if(E||(!g.length||S.length||f)&&Ck(f,l,m,x,C,u)){o.reRender();return}break}f===!0&&o.reRender()}),oe(Rn(o),"validateRules",function(l){var c=o.getNamePath(),u=o.getValue(),d=l||{},f=d.triggerName,h=d.validateOnly,g=h===void 0?!1:h,y=Promise.resolve().then(gg(ys().mark(function m(){var S,x,C,E,P,I,T;return ys().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(o.mounted){R.next=2;break}return R.abrupt("return",[]);case 2:if(S=o.props,x=S.validateFirst,C=x===void 0?!1:x,E=S.messageVariables,P=S.validateDebounce,I=o.getRules(),f&&(I=I.filter(function(A){return A}).filter(function(A){var j=A.validateTrigger;if(!j)return!0;var N=QL(j);return N.includes(f)})),!(P&&f)){R.next=10;break}return R.next=8,new Promise(function(A){setTimeout(A,P)});case 8:if(o.validatePromise===y){R.next=10;break}return R.abrupt("return",[]);case 10:return T=eTe(c,u,I,l,C,E),T.catch(function(A){return A}).then(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pl;if(o.validatePromise===y){var j;o.validatePromise=null;var N=[],k=[];(j=A.forEach)===null||j===void 0||j.call(A,function(D){var F=D.rule.warningOnly,H=D.errors,U=H===void 0?pl:H;F?k.push.apply(k,it(U)):N.push.apply(N,it(U))}),o.errors=N,o.warnings=k,o.triggerMetaEvent(),o.reRender()}}),R.abrupt("return",T);case 13:case"end":return R.stop()}},m)})));return g||(o.validatePromise=y,o.dirty=!0,o.errors=pl,o.warnings=pl,o.triggerMetaEvent(),o.reRender()),y}),oe(Rn(o),"isFieldValidating",function(){return!!o.validatePromise}),oe(Rn(o),"isFieldTouched",function(){return o.touched}),oe(Rn(o),"isFieldDirty",function(){if(o.dirty||o.props.initialValue!==void 0)return!0;var l=o.props.fieldContext,c=l.getInternalHooks(hp),u=c.getInitialValue;return u(o.getNamePath())!==void 0}),oe(Rn(o),"getErrors",function(){return o.errors}),oe(Rn(o),"getWarnings",function(){return o.warnings}),oe(Rn(o),"isListField",function(){return o.props.isListField}),oe(Rn(o),"isList",function(){return o.props.isList}),oe(Rn(o),"isPreserve",function(){return o.props.preserve}),oe(Rn(o),"getMeta",function(){o.prevValidating=o.isFieldValidating();var l={touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,warnings:o.warnings,name:o.getNamePath(),validated:o.validatePromise===null};return l}),oe(Rn(o),"getOnlyChild",function(l){if(typeof l=="function"){var c=o.getMeta();return de(de({},o.getOnlyChild(l(o.getControlled(),c,o.props.fieldContext))),{},{isFunction:!0})}var u=Su(l);return u.length!==1||!v.isValidElement(u[0])?{child:u,isFunction:!1}:{child:u[0],isFunction:!1}}),oe(Rn(o),"getValue",function(l){var c=o.props.fieldContext.getFieldsValue,u=o.getNamePath();return Il(l||c(!0),u)}),oe(Rn(o),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=o.props,u=c.name,d=c.trigger,f=c.validateTrigger,h=c.getValueFromEvent,g=c.normalize,y=c.valuePropName,m=c.getValueProps,S=c.fieldContext,x=f!==void 0?f:S.validateTrigger,C=o.getNamePath(),E=S.getInternalHooks,P=S.getFieldsValue,I=E(hp),T=I.dispatch,M=o.getValue(),R=m||function(D){return oe({},y,D)},A=l[d],j=u!==void 0?R(M):{},N=de(de({},l),j);N[d]=function(){o.touched=!0,o.dirty=!0,o.triggerMetaEvent();for(var D,F=arguments.length,H=new Array(F),U=0;U<F;U++)H[U]=arguments[U];h?D=h.apply(void 0,H):D=oTe.apply(void 0,[y].concat(H)),g&&(D=g(D,M,P(!0))),D!==M&&T({type:"updateValue",namePath:C,value:D}),A&&A.apply(void 0,H)};var k=QL(x||[]);return k.forEach(function(D){var F=N[D];N[D]=function(){F&&F.apply(void 0,arguments);var H=o.props.rules;H&&H.length&&T({type:"validateField",namePath:C,triggerName:D})}}),N}),r.fieldContext){var i=r.fieldContext.getInternalHooks,s=i(hp),a=s.initEntityValue;a(Rn(o))}return o}return lo(n,[{key:"componentDidMount",value:function(){var o=this.props,i=o.shouldUpdate,s=o.fieldContext;if(this.mounted=!0,s){var a=s.getInternalHooks,l=a(hp),c=l.registerField;this.cancelRegisterFunc=c(this)}i===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var o=this.state.resetCount,i=this.props.children,s=this.getOnlyChild(i),a=s.child,l=s.isFunction,c;return l?c=a:v.isValidElement(a)?c=v.cloneElement(a,this.getControlled(a.props)):(Vi(!a,"`children` of Field is not validate ReactElement."),c=a),v.createElement(v.Fragment,{key:o},c)}}]),n}(v.Component);oe(wz,"contextType",Gf);oe(wz,"defaultProps",{trigger:"onChange",valuePropName:"value"});function WT(t){var e,n=t.name,r=Sn(t,iTe),o=v.useContext(Gf),i=v.useContext(fv),s=n!==void 0?Fo(n):void 0,a=(e=r.isListField)!==null&&e!==void 0?e:!!i,l="keep";return a||(l="_".concat((s||[]).join("_"))),v.createElement(wz,vt({key:l,name:s,isListField:a},r,{fieldContext:o}))}function Cz(t){var e=t.name,n=t.initialValue,r=t.children,o=t.rules,i=t.validateTrigger,s=t.isListField,a=v.useContext(Gf),l=v.useContext(fv),c=v.useRef({keys:[],id:0}),u=c.current,d=v.useMemo(function(){var y=Fo(a.prefixName)||[];return[].concat(it(y),it(Fo(e)))},[a.prefixName,e]),f=v.useMemo(function(){return de(de({},a),{},{prefixName:d})},[a,d]),h=v.useMemo(function(){return{getKey:function(m){var S=d.length,x=m[S];return[u.keys[x],m.slice(S+1)]}}},[d]);if(typeof r!="function")return Vi(!1,"Form.List only accepts function as children."),null;var g=function(m,S,x){var C=x.source;return C==="internal"?!1:m!==S};return v.createElement(fv.Provider,{value:h},v.createElement(Gf.Provider,{value:f},v.createElement(WT,{name:[],shouldUpdate:g,rules:o,validateTrigger:i,initialValue:n,isList:!0,isListField:s??!!l},function(y,m){var S=y.value,x=S===void 0?[]:S,C=y.onChange,E=a.getFieldValue,P=function(){var R=E(d||[]);return R||[]},I={add:function(R,A){var j=P();A>=0&&A<=j.length?(u.keys=[].concat(it(u.keys.slice(0,A)),[u.id],it(u.keys.slice(A))),C([].concat(it(j.slice(0,A)),[R],it(j.slice(A))))):(u.keys=[].concat(it(u.keys),[u.id]),C([].concat(it(j),[R]))),u.id+=1},remove:function(R){var A=P(),j=new Set(Array.isArray(R)?R:[R]);j.size<=0||(u.keys=u.keys.filter(function(N,k){return!j.has(k)}),C(A.filter(function(N,k){return!j.has(k)})))},move:function(R,A){if(R!==A){var j=P();R<0||R>=j.length||A<0||A>=j.length||(u.keys=pW(u.keys,R,A),C(pW(j,R,A)))}}},T=x||[];return Array.isArray(T)||(T=[]),r(T.map(function(M,R){var A=u.keys[R];return A===void 0&&(u.keys[R]=u.id,A=u.keys[R],u.id+=1),{name:R,key:A,isListField:!0}}),I,m)})))}function sTe(t){var e=!1,n=t.length,r=[];return t.length?new Promise(function(o,i){t.forEach(function(s,a){s.catch(function(l){return e=!0,l}).then(function(l){n-=1,r[a]=l,!(n>0)&&(e&&i(r),o(r))})})}):Promise.resolve([])}var wre="__@field_split__";function Ek(t){return t.map(function(e){return"".concat(Wt(e),":").concat(e)}).join(wre)}var Zg=function(){function t(){ao(this,t),oe(this,"kvs",new Map)}return lo(t,[{key:"set",value:function(n,r){this.kvs.set(Ek(n),r)}},{key:"get",value:function(n){return this.kvs.get(Ek(n))}},{key:"update",value:function(n,r){var o=this.get(n),i=r(o);i?this.set(n,i):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(Ek(n))}},{key:"map",value:function(n){return it(this.kvs.entries()).map(function(r){var o=xe(r,2),i=o[0],s=o[1],a=i.split(wre);return n({key:a.map(function(l){var c=l.match(/^([^:]*):(.*)$/),u=xe(c,3),d=u[1],f=u[2];return d==="number"?Number(f):f}),value:s})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var o=r.key,i=r.value;return n[o.join(".")]=i,null}),n}}]),t}(),aTe=["name"],lTe=lo(function t(e){var n=this;ao(this,t),oe(this,"formHooked",!1),oe(this,"forceRootUpdate",void 0),oe(this,"subscribable",!0),oe(this,"store",{}),oe(this,"fieldEntities",[]),oe(this,"initialValues",{}),oe(this,"callbacks",{}),oe(this,"validateMessages",null),oe(this,"preserve",null),oe(this,"lastValidatePromise",null),oe(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),oe(this,"getInternalHooks",function(r){return r===hp?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Vi(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),oe(this,"useSubscribe",function(r){n.subscribable=r}),oe(this,"prevWithoutPreserves",null),oe(this,"setInitialValues",function(r,o){if(n.initialValues=r||{},o){var i,s=Mm(r,n.store);(i=n.prevWithoutPreserves)===null||i===void 0||i.map(function(a){var l=a.key;s=Sl(s,l,Il(r,l))}),n.prevWithoutPreserves=null,n.updateStore(s)}}),oe(this,"destroyForm",function(r){if(r)n.updateStore({});else{var o=new Zg;n.getFieldEntities(!0).forEach(function(i){n.isMergedPreserve(i.isPreserve())||o.set(i.getNamePath(),!0)}),n.prevWithoutPreserves=o}}),oe(this,"getInitialValue",function(r){var o=Il(n.initialValues,r);return r.length?Mm(o):o}),oe(this,"setCallbacks",function(r){n.callbacks=r}),oe(this,"setValidateMessages",function(r){n.validateMessages=r}),oe(this,"setPreserve",function(r){n.preserve=r}),oe(this,"watchList",[]),oe(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(o){return o!==r})}}),oe(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var o=n.getFieldsValue(),i=n.getFieldsValue(!0);n.watchList.forEach(function(s){s(o,i,r)})}}),oe(this,"timeoutId",null),oe(this,"warningUnhooked",function(){}),oe(this,"updateStore",function(r){n.store=r}),oe(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(o){return o.getNamePath().length}):n.fieldEntities}),oe(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=new Zg;return n.getFieldEntities(r).forEach(function(i){var s=i.getNamePath();o.set(s,i)}),o}),oe(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var o=n.getFieldsMap(!0);return r.map(function(i){var s=Fo(i);return o.get(s)||{INVALIDATE_NAME_PATH:Fo(i)}})}),oe(this,"getFieldsValue",function(r,o){n.warningUnhooked();var i,s,a;if(r===!0||Array.isArray(r)?(i=r,s=o):r&&Wt(r)==="object"&&(a=r.strict,s=r.filter),i===!0&&!s)return n.store;var l=n.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null),c=[];return l.forEach(function(u){var d,f,h="INVALIDATE_NAME_PATH"in u?u.INVALIDATE_NAME_PATH:u.getNamePath();if(a){var g,y;if((g=(y=u).isList)!==null&&g!==void 0&&g.call(y))return}else if(!i&&(d=(f=u).isListField)!==null&&d!==void 0&&d.call(f))return;if(!s)c.push(h);else{var m="getMeta"in u?u.getMeta():null;s(m)&&c.push(h)}}),hW(n.store,c.map(Fo))}),oe(this,"getFieldValue",function(r){n.warningUnhooked();var o=Fo(r);return Il(n.store,o)}),oe(this,"getFieldsError",function(r){n.warningUnhooked();var o=n.getFieldEntitiesForNamePathList(r);return o.map(function(i,s){return i&&!("INVALIDATE_NAME_PATH"in i)?{name:i.getNamePath(),errors:i.getErrors(),warnings:i.getWarnings()}:{name:Fo(r[s]),errors:[],warnings:[]}})}),oe(this,"getFieldError",function(r){n.warningUnhooked();var o=Fo(r),i=n.getFieldsError([o])[0];return i.errors}),oe(this,"getFieldWarning",function(r){n.warningUnhooked();var o=Fo(r),i=n.getFieldsError([o])[0];return i.warnings}),oe(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var s=o[0],a=o[1],l,c=!1;o.length===0?l=null:o.length===1?Array.isArray(s)?(l=s.map(Fo),c=!1):(l=null,c=s):(l=s.map(Fo),c=a);var u=n.getFieldEntities(!0),d=function(m){return m.isFieldTouched()};if(!l)return c?u.every(function(y){return d(y)||y.isList()}):u.some(d);var f=new Zg;l.forEach(function(y){f.set(y,[])}),u.forEach(function(y){var m=y.getNamePath();l.forEach(function(S){S.every(function(x,C){return m[C]===x})&&f.update(S,function(x){return[].concat(it(x),[y])})})});var h=function(m){return m.some(d)},g=f.map(function(y){var m=y.value;return m});return c?g.every(h):g.some(h)}),oe(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),oe(this,"isFieldsValidating",function(r){n.warningUnhooked();var o=n.getFieldEntities();if(!r)return o.some(function(s){return s.isFieldValidating()});var i=r.map(Fo);return o.some(function(s){var a=s.getNamePath();return Um(i,a)&&s.isFieldValidating()})}),oe(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),oe(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=new Zg,i=n.getFieldEntities(!0);i.forEach(function(l){var c=l.props.initialValue,u=l.getNamePath();if(c!==void 0){var d=o.get(u)||new Set;d.add({entity:l,value:c}),o.set(u,d)}});var s=function(c){c.forEach(function(u){var d=u.props.initialValue;if(d!==void 0){var f=u.getNamePath(),h=n.getInitialValue(f);if(h!==void 0)Vi(!1,"Form already set 'initialValues' with path '".concat(f.join("."),"'. Field can not overwrite it."));else{var g=o.get(f);if(g&&g.size>1)Vi(!1,"Multiple Field with path '".concat(f.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var y=n.getFieldValue(f),m=u.isListField();!m&&(!r.skipExist||y===void 0)&&n.updateStore(Sl(n.store,f,it(g)[0].value))}}}})},a;r.entities?a=r.entities:r.namePathList?(a=[],r.namePathList.forEach(function(l){var c=o.get(l);if(c){var u;(u=a).push.apply(u,it(it(c).map(function(d){return d.entity})))}})):a=i,s(a)}),oe(this,"resetFields",function(r){n.warningUnhooked();var o=n.store;if(!r){n.updateStore(Mm(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(o,null,{type:"reset"}),n.notifyWatch();return}var i=r.map(Fo);i.forEach(function(s){var a=n.getInitialValue(s);n.updateStore(Sl(n.store,s,a))}),n.resetWithFieldInitialValue({namePathList:i}),n.notifyObservers(o,i,{type:"reset"}),n.notifyWatch(i)}),oe(this,"setFields",function(r){n.warningUnhooked();var o=n.store,i=[];r.forEach(function(s){var a=s.name,l=Sn(s,aTe),c=Fo(a);i.push(c),"value"in l&&n.updateStore(Sl(n.store,c,l.value)),n.notifyObservers(o,[c],{type:"setField",data:s})}),n.notifyWatch(i)}),oe(this,"getFields",function(){var r=n.getFieldEntities(!0),o=r.map(function(i){var s=i.getNamePath(),a=i.getMeta(),l=de(de({},a),{},{name:s,value:n.getFieldValue(s)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return o}),oe(this,"initEntityValue",function(r){var o=r.props.initialValue;if(o!==void 0){var i=r.getNamePath(),s=Il(n.store,i);s===void 0&&n.updateStore(Sl(n.store,i,o))}}),oe(this,"isMergedPreserve",function(r){var o=r!==void 0?r:n.preserve;return o??!0}),oe(this,"registerField",function(r){n.fieldEntities.push(r);var o=r.getNamePath();if(n.notifyWatch([o]),r.props.initialValue!==void 0){var i=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(i,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(s,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(d){return d!==r}),!n.isMergedPreserve(a)&&(!s||l.length>1)){var c=s?void 0:n.getInitialValue(o);if(o.length&&n.getFieldValue(o)!==c&&n.fieldEntities.every(function(d){return!xre(d.getNamePath(),o)})){var u=n.store;n.updateStore(Sl(u,o,c,!0)),n.notifyObservers(u,[o],{type:"remove"}),n.triggerDependenciesUpdate(u,o)}}n.notifyWatch([o])}}),oe(this,"dispatch",function(r){switch(r.type){case"updateValue":{var o=r.namePath,i=r.value;n.updateValue(o,i);break}case"validateField":{var s=r.namePath,a=r.triggerName;n.validateFields([s],{triggerName:a});break}}}),oe(this,"notifyObservers",function(r,o,i){if(n.subscribable){var s=de(de({},i),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(a){var l=a.onStoreChange;l(r,o,s)})}else n.forceRootUpdate()}),oe(this,"triggerDependenciesUpdate",function(r,o){var i=n.getDependencyChildrenFields(o);return i.length&&n.validateFields(i),n.notifyObservers(r,i,{type:"dependenciesUpdate",relatedFields:[o].concat(it(i))}),i}),oe(this,"updateValue",function(r,o){var i=Fo(r),s=n.store;n.updateStore(Sl(n.store,i,o)),n.notifyObservers(s,[i],{type:"valueUpdate",source:"internal"}),n.notifyWatch([i]);var a=n.triggerDependenciesUpdate(s,i),l=n.callbacks.onValuesChange;if(l){var c=hW(n.store,[i]);l(c,n.getFieldsValue())}n.triggerOnFieldsChange([i].concat(it(a)))}),oe(this,"setFieldsValue",function(r){n.warningUnhooked();var o=n.store;if(r){var i=Mm(n.store,r);n.updateStore(i)}n.notifyObservers(o,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),oe(this,"setFieldValue",function(r,o){n.setFields([{name:r,value:o,errors:[],warnings:[]}])}),oe(this,"getDependencyChildrenFields",function(r){var o=new Set,i=[],s=new Zg;n.getFieldEntities().forEach(function(l){var c=l.props.dependencies;(c||[]).forEach(function(u){var d=Fo(u);s.update(d,function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return f.add(l),f})})});var a=function l(c){var u=s.get(c)||new Set;u.forEach(function(d){if(!o.has(d)){o.add(d);var f=d.getNamePath();d.isFieldDirty()&&f.length&&(i.push(f),l(f))}})};return a(r),i}),oe(this,"triggerOnFieldsChange",function(r,o){var i=n.callbacks.onFieldsChange;if(i){var s=n.getFields();if(o){var a=new Zg;o.forEach(function(c){var u=c.name,d=c.errors;a.set(u,d)}),s.forEach(function(c){c.errors=a.get(c.name)||c.errors})}var l=s.filter(function(c){var u=c.name;return Um(r,u)});l.length&&i(l,s)}}),oe(this,"validateFields",function(r,o){n.warningUnhooked();var i,s;Array.isArray(r)||typeof r=="string"||typeof o=="string"?(i=r,s=o):s=r;var a=!!i,l=a?i.map(Fo):[],c=[],u=String(Date.now()),d=new Set,f=s||{},h=f.recursive,g=f.dirty;n.getFieldEntities(!0).forEach(function(x){if(a||l.push(x.getNamePath()),!(!x.props.rules||!x.props.rules.length)&&!(g&&!x.isFieldDirty())){var C=x.getNamePath();if(d.add(C.join(u)),!a||Um(l,C,h)){var E=x.validateRules(de({validateMessages:de(de({},Sre),n.validateMessages)},s));c.push(E.then(function(){return{name:C,errors:[],warnings:[]}}).catch(function(P){var I,T=[],M=[];return(I=P.forEach)===null||I===void 0||I.call(P,function(R){var A=R.rule.warningOnly,j=R.errors;A?M.push.apply(M,it(j)):T.push.apply(T,it(j))}),T.length?Promise.reject({name:C,errors:T,warnings:M}):{name:C,errors:T,warnings:M}}))}}});var y=sTe(c);n.lastValidatePromise=y,y.catch(function(x){return x}).then(function(x){var C=x.map(function(E){var P=E.name;return P});n.notifyObservers(n.store,C,{type:"validateFinish"}),n.triggerOnFieldsChange(C,x)});var m=y.then(function(){return n.lastValidatePromise===y?Promise.resolve(n.getFieldsValue(l)):Promise.reject([])}).catch(function(x){var C=x.filter(function(E){return E&&E.errors.length});return Promise.reject({values:n.getFieldsValue(l),errorFields:C,outOfDate:n.lastValidatePromise!==y})});m.catch(function(x){return x});var S=l.filter(function(x){return d.has(x.join(u))});return n.triggerOnFieldsChange(S),m}),oe(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var o=n.callbacks.onFinish;if(o)try{o(r)}catch(i){console.error(i)}}).catch(function(r){var o=n.callbacks.onFinishFailed;o&&o(r)})}),this.forceRootUpdate=e});function VT(t){var e=v.useRef(),n=v.useState({}),r=xe(n,2),o=r[1];if(!e.current)if(t)e.current=t;else{var i=function(){o({})},s=new lTe(i);e.current=s.getForm()}return[e.current]}var sN=v.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ez=function(e){var n=e.validateMessages,r=e.onFormChange,o=e.onFormFinish,i=e.children,s=v.useContext(sN),a=v.useRef({});return v.createElement(sN.Provider,{value:de(de({},s),{},{validateMessages:de(de({},s.validateMessages),n),triggerFormChange:function(c,u){r&&r(c,{changedFields:u,forms:a.current}),s.triggerFormChange(c,u)},triggerFormFinish:function(c,u){o&&o(c,{values:u,forms:a.current}),s.triggerFormFinish(c,u)},registerForm:function(c,u){c&&(a.current=de(de({},a.current),{},oe({},c,u))),s.registerForm(c,u)},unregisterForm:function(c){var u=de({},a.current);delete u[c],a.current=u,s.unregisterForm(c)}})},i)},cTe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],uTe=function(e,n){var r=e.name,o=e.initialValues,i=e.fields,s=e.form,a=e.preserve,l=e.children,c=e.component,u=c===void 0?"form":c,d=e.validateMessages,f=e.validateTrigger,h=f===void 0?"onChange":f,g=e.onValuesChange,y=e.onFieldsChange,m=e.onFinish,S=e.onFinishFailed,x=e.clearOnDestroy,C=Sn(e,cTe),E=v.useRef(null),P=v.useContext(sN),I=VT(s),T=xe(I,1),M=T[0],R=M.getInternalHooks(hp),A=R.useSubscribe,j=R.setInitialValues,N=R.setCallbacks,k=R.setValidateMessages,D=R.setPreserve,F=R.destroyForm;v.useImperativeHandle(n,function(){return de(de({},M),{},{nativeElement:E.current})}),v.useEffect(function(){return P.registerForm(r,M),function(){P.unregisterForm(r)}},[P,M,r]),k(de(de({},P.validateMessages),d)),N({onValuesChange:g,onFieldsChange:function(Y){if(P.triggerFormChange(r,Y),y){for(var G=arguments.length,J=new Array(G>1?G-1:0),ne=1;ne<G;ne++)J[ne-1]=arguments[ne];y.apply(void 0,[Y].concat(J))}},onFinish:function(Y){P.triggerFormFinish(r,Y),m&&m(Y)},onFinishFailed:S}),D(a);var H=v.useRef(null);j(o,!H.current),H.current||(H.current=!0),v.useEffect(function(){return function(){return F(x)}},[]);var U,B=typeof l=="function";if(B){var W=M.getFieldsValue(!0);U=l(W,M)}else U=l;A(!B);var K=v.useRef();v.useEffect(function(){rTe(K.current||[],i||[])||M.setFields(i||[]),K.current=i},[i,M]);var q=v.useMemo(function(){return de(de({},M),{},{validateTrigger:h})},[M,h]),X=v.createElement(fv.Provider,{value:null},v.createElement(Gf.Provider,{value:q},U));return u===!1?X:v.createElement(u,vt({},C,{ref:E,onSubmit:function(Y){Y.preventDefault(),Y.stopPropagation(),M.submit()},onReset:function(Y){var G;Y.preventDefault(),M.resetFields(),(G=C.onReset)===null||G===void 0||G.call(C,Y)}}),X)};function gW(t){try{return JSON.stringify(t)}catch{return Math.random()}}function Pz(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],o=e[1],i=o===void 0?{}:o,s=xIe(i)?{form:i}:i,a=s.form,l=v.useState(),c=xe(l,2),u=c[0],d=c[1],f=v.useMemo(function(){return gW(u)},[u]),h=v.useRef(f);h.current=f;var g=v.useContext(Gf),y=a||g,m=y&&y._init,S=Fo(r),x=v.useRef(S);return x.current=S,v.useEffect(function(){if(m){var C=y.getFieldsValue,E=y.getInternalHooks,P=E(hp),I=P.registerWatch,T=function(j,N){var k=s.preserve?N:j;return typeof r=="function"?r(k):Il(k,x.current)},M=I(function(A,j){var N=T(A,j),k=gW(N);h.current!==k&&(h.current=k,d(N))}),R=T(C(),C(!0));return u!==R&&d(R),M}},[m]),u}var dTe=v.forwardRef(uTe),mg=dTe;mg.FormProvider=Ez;mg.Field=WT;mg.List=Cz;mg.useForm=VT;mg.useWatch=Pz;const fTe=Object.freeze(Object.defineProperty({__proto__:null,Field:WT,FieldContext:Gf,FormProvider:Ez,List:Cz,ListContext:fv,default:mg,useForm:VT,useWatch:Pz},Symbol.toStringTag,{value:"Module"})),hTe=Ru(fTe);var mW;function qT(){if(mW)return Ai;mW=1;var t=Lt().default,e=Ln().default;Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.VariantContext=Ai.NoStyleItemContext=Ai.NoFormStyle=Ai.FormProvider=Ai.FormItemPrefixContext=Ai.FormItemInputContext=Ai.FormContext=void 0;var n=e(Gt()),r=hTe,o=t(cne());Ai.FormContext=n.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Ai.NoStyleItemContext=n.createContext(null);const i=l=>{const c=(0,o.default)(l,["prefixCls"]);return n.createElement(r.FormProvider,Object.assign({},c))};Ai.FormProvider=i,Ai.FormItemPrefixContext=n.createContext({prefixCls:""});const s=Ai.FormItemInputContext=n.createContext({}),a=({children:l,status:c,override:u})=>{const d=n.useContext(s),f=n.useMemo(()=>{const h=Object.assign({},d);return u&&delete h.isFormItemInput,c&&(delete h.status,delete h.hasFeedback,delete h.feedbackIcon),h},[c,u,d]);return n.createElement(s.Provider,{value:f},l)};return Ai.NoFormStyle=a,Ai.VariantContext=n.createContext(void 0),Ai}var rc={},I0={},vW;function _z(){if(vW)return I0;vW=1;var t=Lt().default;Object.defineProperty(I0,"__esModule",{value:!0}),I0.default=void 0;var e=t(Gt()),n=t(pz());const r=o=>{const i=e.default.useContext(n.default);return e.default.useMemo(()=>o?typeof o=="string"?o??i:typeof o=="function"?o(i):i:i,[o,i])};return I0.default=r,I0}var Vh={},T0={},yW;function pTe(){if(yW)return T0;yW=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.default=void 0;const t=e=>{const{componentCls:n}=e;return{[n]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}};return T0.default=t,T0}var bW;function gTe(){if(bW)return Vh;bW=1;var t=Lt().default;Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.prepareComponentToken=Vh.default=void 0;var e=Fl(),n=t(pTe());const r=s=>{const{componentCls:a,antCls:l}=s;return{[a]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${a}-item:empty`]:{display:"none"},[`${a}-item > ${l}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},o=s=>{const{componentCls:a}=s;return{[a]:{"&-gap-row-small":{rowGap:s.spaceGapSmallSize},"&-gap-row-middle":{rowGap:s.spaceGapMiddleSize},"&-gap-row-large":{rowGap:s.spaceGapLargeSize},"&-gap-col-small":{columnGap:s.spaceGapSmallSize},"&-gap-col-middle":{columnGap:s.spaceGapMiddleSize},"&-gap-col-large":{columnGap:s.spaceGapLargeSize}}}},i=()=>({});return Vh.prepareComponentToken=i,Vh.default=(0,e.genStyleHooks)("Space",s=>{const a=(0,e.mergeToken)(s,{spaceGapSmallSize:s.paddingXS,spaceGapMiddleSize:s.padding,spaceGapLargeSize:s.paddingLG});return[r(a),o(a),(0,n.default)(a)]},()=>({}),{resetStyle:!1}),Vh}var SW;function Iz(){if(SW)return rc;SW=1;var t=Lt().default,e=Ln().default;Object.defineProperty(rc,"__esModule",{value:!0}),rc.useCompactItemContext=rc.default=rc.SpaceCompactItemContext=rc.NoCompactStyle=void 0;var n=e(Gt()),r=t(tl()),o=t(J3()),i=Kx(),s=t(_z()),a=t(gTe()),l=function(g,y){var m={};for(var S in g)Object.prototype.hasOwnProperty.call(g,S)&&y.indexOf(S)<0&&(m[S]=g[S]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,S=Object.getOwnPropertySymbols(g);x<S.length;x++)y.indexOf(S[x])<0&&Object.prototype.propertyIsEnumerable.call(g,S[x])&&(m[S[x]]=g[S[x]]);return m};const c=rc.SpaceCompactItemContext=n.createContext(null),u=(g,y)=>{const m=n.useContext(c),S=n.useMemo(()=>{if(!m)return"";const{compactDirection:x,isFirstItem:C,isLastItem:E}=m,P=x==="vertical"?"-vertical-":"-";return(0,r.default)(`${g}-compact${P}item`,{[`${g}-compact${P}first-item`]:C,[`${g}-compact${P}last-item`]:E,[`${g}-compact${P}item-rtl`]:y==="rtl"})},[g,y,m]);return{compactSize:m==null?void 0:m.compactSize,compactDirection:m==null?void 0:m.compactDirection,compactItemClassnames:S}};rc.useCompactItemContext=u;const d=g=>{const{children:y}=g;return n.createElement(c.Provider,{value:null},y)};rc.NoCompactStyle=d;const f=g=>{const{children:y}=g,m=l(g,["children"]);return n.createElement(c.Provider,{value:n.useMemo(()=>m,[m])},y)},h=g=>{const{getPrefixCls:y,direction:m}=n.useContext(i.ConfigContext),{size:S,direction:x,block:C,prefixCls:E,className:P,rootClassName:I,children:T}=g,M=l(g,["size","direction","block","prefixCls","className","rootClassName","children"]),R=(0,s.default)(U=>S??U),A=y("space-compact",E),[j,N]=(0,a.default)(A),k=(0,r.default)(A,N,{[`${A}-rtl`]:m==="rtl",[`${A}-block`]:C,[`${A}-vertical`]:x==="vertical"},P,I),D=n.useContext(c),F=(0,o.default)(T),H=n.useMemo(()=>F.map((U,B)=>{const W=(U==null?void 0:U.key)||`${A}-item-${B}`;return n.createElement(f,{key:W,compactSize:R,compactDirection:x,isFirstItem:B===0&&(!D||(D==null?void 0:D.isFirstItem)),isLastItem:B===F.length-1&&(!D||(D==null?void 0:D.isLastItem))},U)}),[S,F,D]);return F.length===0?null:j(n.createElement("div",Object.assign({className:k},M),H))};return rc.default=h,rc}var xW;function Cre(){if(xW)return _0;xW=1;var t=Lt().default;Object.defineProperty(_0,"__esModule",{value:!0}),_0.default=void 0;var e=t(Gt()),n=qT(),r=Iz();const o=i=>{const{space:s,form:a,children:l}=i;if(l==null)return null;let c=l;return a&&(c=e.default.createElement(n.NoFormStyle,{override:!0,status:!0},c)),s&&(c=e.default.createElement(r.NoCompactStyle,null,c)),c};return _0.default=o,_0}var oc={},M0={},wW;function Ere(){if(wW)return M0;wW=1;var t=Lt().default;Object.defineProperty(M0,"__esModule",{value:!0}),M0.default=void 0;var e=t(Gt());const n=e.default.createContext(void 0);return M0.default=n,M0}var CW;function mTe(){if(CW)return oc;CW=1;var t=Lt().default;Object.defineProperty(oc,"__esModule",{value:!0}),oc.useZIndex=oc.containerBaseZIndexOffset=oc.consumerBaseZIndexOffset=oc.CONTAINER_MAX_OFFSET=void 0;var e=t(Gt()),n=t(BT()),r=t(Ere());const o=100,i=10;oc.CONTAINER_MAX_OFFSET=o*i;const s=oc.containerBaseZIndexOffset={Modal:o,Drawer:o,Popover:o,Popconfirm:o,Tooltip:o,Tour:o,FloatButton:o},a=oc.consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function l(u){return u in s}const c=(u,d)=>{const[,f]=(0,n.default)(),h=e.default.useContext(r.default),g=l(u);let y;if(d!==void 0)y=[d,d];else{let m=h??0;g?m+=(h?0:f.zIndexPopupBase)+s[u]:m+=a[u],y=[h===void 0?d:m,m]}return y};return oc.useZIndex=c,oc}var qh={},EW;function vTe(){if(EW)return qh;EW=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.getTransitionName=qh.default=void 0;var t=Kx();const e=()=>({height:0,opacity:0}),n=a=>{const{scrollHeight:l}=a;return{height:l,opacity:1}},r=a=>({height:a?a.offsetHeight:0}),o=(a,l)=>(l==null?void 0:l.deadline)===!0||l.propertyName==="height",i=(a=t.defaultPrefixCls)=>({motionName:`${a}-motion-collapse`,onAppearStart:e,onEnterStart:e,onAppearActive:n,onEnterActive:n,onLeaveStart:r,onLeaveActive:e,onAppearEnd:o,onEnterEnd:o,onLeaveEnd:o,motionDeadline:500}),s=(a,l,c)=>c!==void 0?c:`${a}-${l}`;return qh.getTransitionName=s,qh.default=i,qh}var O0={},Kh={},Jg={},PW;function Pre(){if(PW)return Jg;PW=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.genRoundedArrow=void 0,Jg.getArrowToken=e;var t=Ss;function e(r){const{sizePopupArrow:o,borderRadiusXS:i,borderRadiusOuter:s}=r,a=o/2,l=0,c=a,u=s*1/Math.sqrt(2),d=a-s*(1-1/Math.sqrt(2)),f=a-i*(1/Math.sqrt(2)),h=s*(Math.sqrt(2)-1)+i*(1/Math.sqrt(2)),g=2*a-f,y=h,m=2*a-u,S=d,x=2*a-l,C=c,E=a*Math.sqrt(2)+s*(Math.sqrt(2)-2),P=s*(Math.sqrt(2)-1),I=`polygon(${P}px 100%, 50% ${P}px, ${2*a-P}px 100%, ${P}px 100%)`,T=`path('M ${l} ${c} A ${s} ${s} 0 0 0 ${u} ${d} L ${f} ${h} A ${i} ${i} 0 0 1 ${g} ${y} L ${m} ${S} A ${s} ${s} 0 0 0 ${x} ${C} Z')`;return{arrowShadowWidth:E,arrowPath:T,arrowPolygon:I}}const n=(r,o,i)=>{const{sizePopupArrow:s,arrowPolygon:a,arrowPath:l,arrowShadowWidth:c,borderRadiusXS:u,calc:d}=r;return{pointerEvents:"none",width:s,height:s,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:s,height:d(s).div(2).equal(),background:o,clipPath:{_multi_value_:!0,value:[a,l]},content:'""'},"&::after":{content:'""',position:"absolute",width:c,height:c,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${(0,t.unit)(u)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:i,zIndex:0,background:"transparent"}}};return Jg.genRoundedArrow=n,Jg}var _W;function _re(){if(_W)return Kh;_W=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.MAX_VERTICAL_CONTENT_RADIUS=void 0,Kh.default=i,Kh.getArrowOffsetToken=r;var t=Ss,e=Pre();const n=Kh.MAX_VERTICAL_CONTENT_RADIUS=8;function r(s){const{contentRadius:a,limitVerticalRadius:l}=s,c=a>12?a+2:12;return{arrowOffsetHorizontal:c,arrowOffsetVertical:l?n:c}}function o(s,a){return s?a:{}}function i(s,a,l){const{componentCls:c,boxShadowPopoverArrow:u,arrowOffsetVertical:d,arrowOffsetHorizontal:f}=s,{arrowDistance:h=0,arrowPlacement:g={left:!0,right:!0,top:!0,bottom:!0}}=l||{};return{[c]:Object.assign(Object.assign(Object.assign(Object.assign({[`${c}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},(0,e.genRoundedArrow)(s,a,u)),{"&:before":{background:a}})]},o(!!g.top,{[[`&-placement-top > ${c}-arrow`,`&-placement-topLeft > ${c}-arrow`,`&-placement-topRight > ${c}-arrow`].join(",")]:{bottom:h,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${c}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":f,[`> ${c}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${(0,t.unit)(f)})`,[`> ${c}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),o(!!g.bottom,{[[`&-placement-bottom > ${c}-arrow`,`&-placement-bottomLeft > ${c}-arrow`,`&-placement-bottomRight > ${c}-arrow`].join(",")]:{top:h,transform:"translateY(-100%)"},[`&-placement-bottom > ${c}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":f,[`> ${c}-arrow`]:{left:{_skip_check_:!0,value:f}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${(0,t.unit)(f)})`,[`> ${c}-arrow`]:{right:{_skip_check_:!0,value:f}}}})),o(!!g.left,{[[`&-placement-left > ${c}-arrow`,`&-placement-leftTop > ${c}-arrow`,`&-placement-leftBottom > ${c}-arrow`].join(",")]:{right:{_skip_check_:!0,value:h},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${c}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${c}-arrow`]:{top:d},[`&-placement-leftBottom > ${c}-arrow`]:{bottom:d}})),o(!!g.right,{[[`&-placement-right > ${c}-arrow`,`&-placement-rightTop > ${c}-arrow`,`&-placement-rightBottom > ${c}-arrow`].join(",")]:{left:{_skip_check_:!0,value:h},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${c}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${c}-arrow`]:{top:d},[`&-placement-rightBottom > ${c}-arrow`]:{bottom:d}}))}}return Kh}var IW;function yTe(){if(IW)return O0;IW=1,Object.defineProperty(O0,"__esModule",{value:!0}),O0.default=i,O0.getOverflowOptions=e;var t=_re();function e(s,a,l,c){if(c===!1)return{adjustX:!1,adjustY:!1};const u=c&&typeof c=="object"?c:{},d={};switch(s){case"top":case"bottom":d.shiftX=a.arrowOffsetHorizontal*2+l,d.shiftY=!0,d.adjustY=!0;break;case"left":case"right":d.shiftY=a.arrowOffsetVertical*2+l,d.shiftX=!0,d.adjustX=!0;break}const f=Object.assign(Object.assign({},d),u);return f.shiftX||(f.adjustX=!0),f.shiftY||(f.adjustY=!0),f}const n={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},r={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},o=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function i(s){const{arrowWidth:a,autoAdjustOverflow:l,arrowPointAtCenter:c,offset:u,borderRadius:d,visibleFirst:f}=s,h=a/2,g={};return Object.keys(n).forEach(y=>{const m=c&&r[y]||n[y],S=Object.assign(Object.assign({},m),{offset:[0,0],dynamicInset:!0});switch(g[y]=S,o.has(y)&&(S.autoArrow=!1),y){case"top":case"topLeft":case"topRight":S.offset[1]=-h-u;break;case"bottom":case"bottomLeft":case"bottomRight":S.offset[1]=h+u;break;case"left":case"leftTop":case"leftBottom":S.offset[0]=-h-u;break;case"right":case"rightTop":case"rightBottom":S.offset[0]=h+u;break}const x=(0,t.getArrowOffsetToken)({contentRadius:d,limitVerticalRadius:!0});if(c)switch(y){case"topLeft":case"bottomLeft":S.offset[0]=-x.arrowOffsetHorizontal-h;break;case"topRight":case"bottomRight":S.offset[0]=x.arrowOffsetHorizontal+h;break;case"leftTop":case"rightTop":S.offset[1]=-x.arrowOffsetHorizontal*2+h;break;case"leftBottom":case"rightBottom":S.offset[1]=x.arrowOffsetHorizontal*2-h;break}S.overflow=e(y,x,a,l),f&&(S.htmlRegion="visibleFirst")}),g}return O0}var Gh={},TW;function Ire(){if(TW)return Gh;TW=1;var t=Lt().default;Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.cloneElement=o,Gh.isFragment=n,Gh.replaceElement=void 0;var e=t(Gt());function n(i){return i&&e.default.isValidElement(i)&&i.type===e.default.Fragment}const r=(i,s,a)=>e.default.isValidElement(i)?e.default.cloneElement(i,typeof a=="function"?a(i.props||{}):a):s;Gh.replaceElement=r;function o(i,s){return r(i,i,s)}return Gh}var R0={},Xh={},Pk={},k0={},MW;function bTe(){if(MW)return k0;MW=1,Object.defineProperty(k0,"__esModule",{value:!0}),k0.default=void 0;const t=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}});return k0.default=t,k0}var Qu={},A0={},OW;function KT(){if(OW)return A0;OW=1,Object.defineProperty(A0,"__esModule",{value:!0}),A0.initMotion=void 0;const t=r=>({animationDuration:r,animationFillMode:"both"}),e=r=>({animationDuration:r,animationFillMode:"both"}),n=(r,o,i,s,a=!1)=>{const l=a?"&":"";return{[`
      ${l}${r}-enter,
      ${l}${r}-appear
    `]:Object.assign(Object.assign({},t(s)),{animationPlayState:"paused"}),[`${l}${r}-leave`]:Object.assign(Object.assign({},e(s)),{animationPlayState:"paused"}),[`
      ${l}${r}-enter${r}-enter-active,
      ${l}${r}-appear${r}-appear-active
    `]:{animationName:o,animationPlayState:"running"},[`${l}${r}-leave${r}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}};return A0.initMotion=n,A0}var RW;function STe(){if(RW)return Qu;RW=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.initFadeMotion=Qu.fadeOut=Qu.fadeIn=void 0;var t=Ss,e=KT();const n=Qu.fadeIn=new t.Keyframes("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),r=Qu.fadeOut=new t.Keyframes("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),o=(i,s=!1)=>{const{antCls:a}=i,l=`${a}-fade`,c=s?"&":"";return[(0,e.initMotion)(l,n,r,i.motionDurationMid,s),{[`
        ${c}${l}-enter,
        ${c}${l}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${c}${l}-leave`]:{animationTimingFunction:"linear"}}]};return Qu.initFadeMotion=o,Qu}var Lo={},kW;function xTe(){if(kW)return Lo;kW=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.moveUpOut=Lo.moveUpIn=Lo.moveRightOut=Lo.moveRightIn=Lo.moveLeftOut=Lo.moveLeftIn=Lo.moveDownOut=Lo.moveDownIn=Lo.initMoveMotion=void 0;var t=Ss,e=KT();const n=Lo.moveDownIn=new t.Keyframes("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),r=Lo.moveDownOut=new t.Keyframes("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),o=Lo.moveLeftIn=new t.Keyframes("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),i=Lo.moveLeftOut=new t.Keyframes("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),s=Lo.moveRightIn=new t.Keyframes("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),a=Lo.moveRightOut=new t.Keyframes("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),l=Lo.moveUpIn=new t.Keyframes("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),c=Lo.moveUpOut=new t.Keyframes("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),u={"move-up":{inKeyframes:l,outKeyframes:c},"move-down":{inKeyframes:n,outKeyframes:r},"move-left":{inKeyframes:o,outKeyframes:i},"move-right":{inKeyframes:s,outKeyframes:a}},d=(f,h)=>{const{antCls:g}=f,y=`${g}-${h}`,{inKeyframes:m,outKeyframes:S}=u[h];return[(0,e.initMotion)(y,m,S,f.motionDurationMid),{[`
        ${y}-enter,
        ${y}-appear
      `]:{opacity:0,animationTimingFunction:f.motionEaseOutCirc},[`${y}-leave`]:{animationTimingFunction:f.motionEaseInOutCirc}}]};return Lo.initMoveMotion=d,Lo}var No={},AW;function wTe(){if(AW)return No;AW=1,Object.defineProperty(No,"__esModule",{value:!0}),No.slideUpOut=No.slideUpIn=No.slideRightOut=No.slideRightIn=No.slideLeftOut=No.slideLeftIn=No.slideDownOut=No.slideDownIn=No.initSlideMotion=void 0;var t=Ss,e=KT();const n=No.slideUpIn=new t.Keyframes("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),r=No.slideUpOut=new t.Keyframes("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),o=No.slideDownIn=new t.Keyframes("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),i=No.slideDownOut=new t.Keyframes("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),s=No.slideLeftIn=new t.Keyframes("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),a=No.slideLeftOut=new t.Keyframes("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),l=No.slideRightIn=new t.Keyframes("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),c=No.slideRightOut=new t.Keyframes("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),u={"slide-up":{inKeyframes:n,outKeyframes:r},"slide-down":{inKeyframes:o,outKeyframes:i},"slide-left":{inKeyframes:s,outKeyframes:a},"slide-right":{inKeyframes:l,outKeyframes:c}},d=(f,h)=>{const{antCls:g}=f,y=`${g}-${h}`,{inKeyframes:m,outKeyframes:S}=u[h];return[(0,e.initMotion)(y,m,S,f.motionDurationMid),{[`
      ${y}-enter,
      ${y}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:f.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${y}-leave`]:{animationTimingFunction:f.motionEaseInQuint}}]};return No.initSlideMotion=d,No}var _r={},$W;function CTe(){if($W)return _r;$W=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.zoomUpOut=_r.zoomUpIn=_r.zoomRightOut=_r.zoomRightIn=_r.zoomOut=_r.zoomLeftOut=_r.zoomLeftIn=_r.zoomIn=_r.zoomDownOut=_r.zoomDownIn=_r.zoomBigOut=_r.zoomBigIn=_r.initZoomMotion=void 0;var t=Ss,e=KT();const n=_r.zoomIn=new t.Keyframes("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),r=_r.zoomOut=new t.Keyframes("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),o=_r.zoomBigIn=new t.Keyframes("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),i=_r.zoomBigOut=new t.Keyframes("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),s=_r.zoomUpIn=new t.Keyframes("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),a=_r.zoomUpOut=new t.Keyframes("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),l=_r.zoomLeftIn=new t.Keyframes("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),c=_r.zoomLeftOut=new t.Keyframes("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),u=_r.zoomRightIn=new t.Keyframes("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),d=_r.zoomRightOut=new t.Keyframes("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),f=_r.zoomDownIn=new t.Keyframes("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),h=_r.zoomDownOut=new t.Keyframes("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),g={zoom:{inKeyframes:n,outKeyframes:r},"zoom-big":{inKeyframes:o,outKeyframes:i},"zoom-big-fast":{inKeyframes:o,outKeyframes:i},"zoom-left":{inKeyframes:l,outKeyframes:c},"zoom-right":{inKeyframes:u,outKeyframes:d},"zoom-up":{inKeyframes:s,outKeyframes:a},"zoom-down":{inKeyframes:f,outKeyframes:h}},y=(m,S)=>{const{antCls:x}=m,C=`${x}-${S}`,{inKeyframes:E,outKeyframes:P}=g[S];return[(0,e.initMotion)(C,E,P,S==="zoom-big-fast"?m.motionDurationFast:m.motionDurationMid),{[`
        ${C}-enter,
        ${C}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:m.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${C}-leave`]:{animationTimingFunction:m.motionEaseInOutCirc}}]};return _r.initZoomMotion=y,_r}var DW;function ETe(){return DW||(DW=1,function(t){var e=Lt().default;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fadeIn",{enumerable:!0,get:function(){return r.fadeIn}}),Object.defineProperty(t,"fadeOut",{enumerable:!0,get:function(){return r.fadeOut}}),Object.defineProperty(t,"genCollapseMotion",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"initFadeMotion",{enumerable:!0,get:function(){return r.initFadeMotion}}),Object.defineProperty(t,"initMoveMotion",{enumerable:!0,get:function(){return o.initMoveMotion}}),Object.defineProperty(t,"initSlideMotion",{enumerable:!0,get:function(){return i.initSlideMotion}}),Object.defineProperty(t,"initZoomMotion",{enumerable:!0,get:function(){return s.initZoomMotion}}),Object.defineProperty(t,"moveDownIn",{enumerable:!0,get:function(){return o.moveDownIn}}),Object.defineProperty(t,"moveDownOut",{enumerable:!0,get:function(){return o.moveDownOut}}),Object.defineProperty(t,"moveLeftIn",{enumerable:!0,get:function(){return o.moveLeftIn}}),Object.defineProperty(t,"moveLeftOut",{enumerable:!0,get:function(){return o.moveLeftOut}}),Object.defineProperty(t,"moveRightIn",{enumerable:!0,get:function(){return o.moveRightIn}}),Object.defineProperty(t,"moveRightOut",{enumerable:!0,get:function(){return o.moveRightOut}}),Object.defineProperty(t,"moveUpIn",{enumerable:!0,get:function(){return o.moveUpIn}}),Object.defineProperty(t,"moveUpOut",{enumerable:!0,get:function(){return o.moveUpOut}}),Object.defineProperty(t,"slideDownIn",{enumerable:!0,get:function(){return i.slideDownIn}}),Object.defineProperty(t,"slideDownOut",{enumerable:!0,get:function(){return i.slideDownOut}}),Object.defineProperty(t,"slideLeftIn",{enumerable:!0,get:function(){return i.slideLeftIn}}),Object.defineProperty(t,"slideLeftOut",{enumerable:!0,get:function(){return i.slideLeftOut}}),Object.defineProperty(t,"slideRightIn",{enumerable:!0,get:function(){return i.slideRightIn}}),Object.defineProperty(t,"slideRightOut",{enumerable:!0,get:function(){return i.slideRightOut}}),Object.defineProperty(t,"slideUpIn",{enumerable:!0,get:function(){return i.slideUpIn}}),Object.defineProperty(t,"slideUpOut",{enumerable:!0,get:function(){return i.slideUpOut}}),Object.defineProperty(t,"zoomBigIn",{enumerable:!0,get:function(){return s.zoomBigIn}}),Object.defineProperty(t,"zoomBigOut",{enumerable:!0,get:function(){return s.zoomBigOut}}),Object.defineProperty(t,"zoomDownIn",{enumerable:!0,get:function(){return s.zoomDownIn}}),Object.defineProperty(t,"zoomDownOut",{enumerable:!0,get:function(){return s.zoomDownOut}}),Object.defineProperty(t,"zoomIn",{enumerable:!0,get:function(){return s.zoomIn}}),Object.defineProperty(t,"zoomLeftIn",{enumerable:!0,get:function(){return s.zoomLeftIn}}),Object.defineProperty(t,"zoomLeftOut",{enumerable:!0,get:function(){return s.zoomLeftOut}}),Object.defineProperty(t,"zoomOut",{enumerable:!0,get:function(){return s.zoomOut}}),Object.defineProperty(t,"zoomRightIn",{enumerable:!0,get:function(){return s.zoomRightIn}}),Object.defineProperty(t,"zoomRightOut",{enumerable:!0,get:function(){return s.zoomRightOut}}),Object.defineProperty(t,"zoomUpIn",{enumerable:!0,get:function(){return s.zoomUpIn}}),Object.defineProperty(t,"zoomUpOut",{enumerable:!0,get:function(){return s.zoomUpOut}});var n=e(bTe()),r=STe(),o=xTe(),i=wTe(),s=CTe()}(Pk)),Pk}var jW;function Tre(){if(jW)return Xh;jW=1;var t=Ln().default;Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.prepareComponentToken=Xh.default=void 0;var e=Ss,n=Wv(),r=ETe(),o=t(_re()),i=Pre(),s=Fl();const a=u=>{const{calc:d,componentCls:f,tooltipMaxWidth:h,tooltipColor:g,tooltipBg:y,tooltipBorderRadius:m,zIndexPopup:S,controlHeight:x,boxShadowSecondary:C,paddingSM:E,paddingXS:P,arrowOffsetHorizontal:I,sizePopupArrow:T}=u,M=d(m).add(T).add(I).equal(),R=d(m).mul(2).add(T).equal();return[{[f]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,n.resetComponent)(u)),{position:"absolute",zIndex:S,display:"block",width:"max-content",maxWidth:h,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":y,[`${f}-inner`]:{minWidth:R,minHeight:x,padding:`${(0,e.unit)(u.calc(E).div(2).equal())} ${(0,e.unit)(P)}`,color:g,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:y,borderRadius:m,boxShadow:C,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:M},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${f}-inner`]:{borderRadius:u.min(m,o.MAX_VERTICAL_CONTENT_RADIUS)}},[`${f}-content`]:{position:"relative"}}),(0,s.genPresetColor)(u,(A,{darkColor:j})=>({[`&${f}-${A}`]:{[`${f}-inner`]:{backgroundColor:j},[`${f}-arrow`]:{"--antd-arrow-background-color":j}}}))),{"&-rtl":{direction:"rtl"}})},(0,o.default)(u,"var(--antd-arrow-background-color)"),{[`${f}-pure`]:{position:"relative",maxWidth:"none",margin:u.sizePopupArrow}}]},l=u=>Object.assign(Object.assign({zIndexPopup:u.zIndexPopupBase+70},(0,o.getArrowOffsetToken)({contentRadius:u.borderRadius,limitVerticalRadius:!0})),(0,i.getArrowToken)((0,s.mergeToken)(u,{borderRadiusOuter:Math.min(u.borderRadiusOuter,4)})));Xh.prepareComponentToken=l;var c=(u,d=!0)=>(0,s.genStyleHooks)("Tooltip",h=>{const{borderRadius:g,colorTextLightSolid:y,colorBgSpotlight:m}=h,S=(0,s.mergeToken)(h,{tooltipMaxWidth:250,tooltipColor:y,tooltipBorderRadius:g,tooltipBg:m});return[a(S),(0,r.initZoomMotion)(h,"zoom-big-fast")]},l,{resetStyle:!1,injectStyle:d})(u);return Xh.default=c,Xh}var SC={},Yh={},LW;function PTe(){if(LW)return Yh;LW=1;var t=Lt().default;Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.PresetStatusColorTypes=void 0,Yh.isPresetColor=i,Yh.isPresetStatusColor=s;var e=t(AT()),n=gz();const r=n.PresetColors.map(a=>`${a}-inverse`),o=Yh.PresetStatusColorTypes=["success","processing","error","default","warning"];function i(a,l=!0){return l?[].concat((0,e.default)(r),(0,e.default)(n.PresetColors)).includes(a):n.PresetColors.includes(a)}function s(a){return o.includes(a)}return Yh}var NW;function Mre(){if(NW)return SC;NW=1;var t=Lt().default;Object.defineProperty(SC,"__esModule",{value:!0}),SC.parseColor=r;var e=t(tl()),n=PTe();function r(o,i){const s=(0,n.isPresetColor)(i),a=(0,e.default)({[`${o}-${i}`]:i&&s}),l={},c={};return i&&!s&&(l.background=i,c["--antd-arrow-background-color"]=i),{className:a,overlayStyle:l,arrowStyle:c}}return SC}var FW;function _Te(){if(FW)return R0;FW=1;var t=Lt().default,e=Ln().default;Object.defineProperty(R0,"__esModule",{value:!0}),R0.default=void 0;var n=e(Gt()),r=t(tl()),o=mre,i=Kx(),s=t(Tre()),a=Mre();const l=c=>{const{prefixCls:u,className:d,placement:f="top",title:h,color:g,overlayInnerStyle:y}=c,{getPrefixCls:m}=n.useContext(i.ConfigContext),S=m("tooltip",u),[x,C,E]=(0,s.default)(S),P=(0,a.parseColor)(S,g),I=P.arrowStyle,T=Object.assign(Object.assign({},y),P.overlayStyle),M=(0,r.default)(C,E,S,`${S}-pure`,`${S}-placement-${f}`,d,P.className);return x(n.createElement("div",{className:M,style:I},n.createElement("div",{className:`${S}-arrow`}),n.createElement(o.Popup,Object.assign({},c,{className:C,prefixCls:S,overlayInnerStyle:T}),h)))};return R0.default=l,R0}var zW;function Tz(){if(zW)return E0;zW=1;var t=Lt().default,e=Ln().default;Object.defineProperty(E0,"__esModule",{value:!0}),E0.default=void 0;var n=e(Gt()),r=t(tl()),o=t(mre),i=t(lne()),s=t(Cre()),a=mTe(),l=vTe(),c=t(yTe()),u=Ire(),d=kT(),f=t(Ere()),h=Uv(),g=Fl(),y=t(_Te()),m=t(Tre()),S=Mre(),x=function(P,I){var T={};for(var M in P)Object.prototype.hasOwnProperty.call(P,M)&&I.indexOf(M)<0&&(T[M]=P[M]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var R=0,M=Object.getOwnPropertySymbols(P);R<M.length;R++)I.indexOf(M[R])<0&&Object.prototype.propertyIsEnumerable.call(P,M[R])&&(T[M[R]]=P[M[R]]);return T};const E=n.forwardRef((P,I)=>{var T,M;const{prefixCls:R,openClassName:A,getTooltipContainer:j,color:N,overlayInnerStyle:k,children:D,afterOpenChange:F,afterVisibleChange:H,destroyTooltipOnHide:U,destroyOnHidden:B,arrow:W=!0,title:K,overlay:q,builtinPlacements:X,arrowPointAtCenter:Z=!1,autoAdjustOverflow:Y=!0,motion:G,getPopupContainer:J,placement:ne="top",mouseEnterDelay:ee=.1,mouseLeaveDelay:re=.1,overlayStyle:le,rootClassName:ae,overlayClassName:ie,styles:ge,classNames:ve}=P,fe=x(P,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","destroyOnHidden","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),ue=!!W,[,Ce]=(0,g.useToken)(),{getPopupContainer:ye,getPrefixCls:ke,direction:Be,className:Ue,style:We,classNames:Me,styles:$e}=(0,h.useComponentConfig)("tooltip"),Qe=(0,d.devUseWarning)("Tooltip"),nt=n.useRef(null),ht=()=>{var Fe;(Fe=nt.current)===null||Fe===void 0||Fe.forceAlign()};n.useImperativeHandle(I,()=>{var Fe,Ge;return{forceAlign:ht,forcePopupAlign:()=>{Qe.deprecated(!1,"forcePopupAlign","forceAlign"),ht()},nativeElement:(Fe=nt.current)===null||Fe===void 0?void 0:Fe.nativeElement,popupElement:(Ge=nt.current)===null||Ge===void 0?void 0:Ge.popupElement}});const[ft,et]=(0,i.default)(!1,{value:(T=P.open)!==null&&T!==void 0?T:P.visible,defaultValue:(M=P.defaultOpen)!==null&&M!==void 0?M:P.defaultVisible}),pe=!K&&!q&&K!==0,Pe=Fe=>{var Ge,ut;et(pe?!1:Fe),pe||((Ge=P.onOpenChange)===null||Ge===void 0||Ge.call(P,Fe),(ut=P.onVisibleChange)===null||ut===void 0||ut.call(P,Fe))},je=n.useMemo(()=>{var Fe,Ge;let ut=Z;return typeof W=="object"&&(ut=(Ge=(Fe=W.pointAtCenter)!==null&&Fe!==void 0?Fe:W.arrowPointAtCenter)!==null&&Ge!==void 0?Ge:Z),X||(0,c.default)({arrowPointAtCenter:ut,autoAdjustOverflow:Y,arrowWidth:ue?Ce.sizePopupArrow:0,borderRadius:Ce.borderRadius,offset:Ce.marginXXS,visibleFirst:!0})},[Z,W,X,Ce]),Le=n.useMemo(()=>K===0?K:q||K||"",[q,K]),qe=n.createElement(s.default,{space:!0},typeof Le=="function"?Le():Le),at=ke("tooltip",R),Ae=ke(),Ne=P["data-popover-inject"];let xt=ft;!("open"in P)&&!("visible"in P)&&pe&&(xt=!1);const Pt=n.isValidElement(D)&&!(0,u.isFragment)(D)?D:n.createElement("span",null,D),gn=Pt.props,Xt=!gn.className||typeof gn.className=="string"?(0,r.default)(gn.className,A||`${at}-open`):gn.className,[sn,Zt,Vt]=(0,m.default)(at,!Ne),an=(0,S.parseColor)(at,N),wt=an.arrowStyle,bt=(0,r.default)(ie,{[`${at}-rtl`]:Be==="rtl"},an.className,ae,Zt,Vt,Ue,Me.root,ve==null?void 0:ve.root),ot=(0,r.default)(Me.body,ve==null?void 0:ve.body),[Xe,qt]=(0,a.useZIndex)("Tooltip",fe.zIndex),Tt=n.createElement(o.default,Object.assign({},fe,{zIndex:Xe,showArrow:ue,placement:ne,mouseEnterDelay:ee,mouseLeaveDelay:re,prefixCls:at,classNames:{root:bt,body:ot},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wt),$e.root),We),le),ge==null?void 0:ge.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},$e.body),k),ge==null?void 0:ge.body),an.overlayStyle)},getTooltipContainer:J||j||ye,ref:nt,builtinPlacements:je,overlay:qe,visible:xt,onVisibleChange:Pe,afterVisibleChange:F??H,arrowContent:n.createElement("span",{className:`${at}-arrow-content`}),motion:{motionName:(0,l.getTransitionName)(Ae,"zoom-big-fast",P.transitionName),motionDeadline:1e3},destroyTooltipOnHide:B??!!U}),xt?(0,u.cloneElement)(Pt,{className:Xt}):Pt);return sn(n.createElement(f.default.Provider,{value:qt},Tt))});return E._InternalPanelDoNotUseOrYouWillBeFired=y.default,E0.default=E,E0}var $0={},xC={exports:{}},D0={},wC={},BW;function ITe(){if(BW)return wC;BW=1,Object.defineProperty(wC,"__esModule",{value:!0});var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"};return wC.default=t,wC}var HW;function TTe(){if(HW)return D0;HW=1;var t=Ln().default,e=Lt().default;Object.defineProperty(D0,"__esModule",{value:!0}),D0.default=void 0;var n=e(fg()),r=t(Gt()),o=e(ITe()),i=e(zv()),s=function(c,u){return r.createElement(i.default,(0,n.default)({},c,{ref:u,icon:o.default}))},a=r.forwardRef(s);return D0.default=a,D0}var UW;function MTe(){return UW||(UW=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(TTe());function r(i){return i&&i.__esModule?i:{default:i}}const o=n;e.default=o,t.exports=o}(xC,xC.exports)),xC.exports}var j0={},WW;function OTe(){if(WW)return j0;WW=1,Object.defineProperty(j0,"__esModule",{value:!0}),j0.default=void 0;var t={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(n){var r=n.keyCode;if(n.altKey&&!n.ctrlKey||n.metaKey||r>=t.F1&&r<=t.F12)return!1;switch(r){case t.ALT:case t.CAPS_LOCK:case t.CONTEXT_MENU:case t.CTRL:case t.DOWN:case t.END:case t.ESC:case t.HOME:case t.INSERT:case t.LEFT:case t.MAC_FF_META:case t.META:case t.NUMLOCK:case t.NUM_CENTER:case t.PAGE_DOWN:case t.PAGE_UP:case t.PAUSE:case t.PRINT_SCREEN:case t.RIGHT:case t.SHIFT:case t.UP:case t.WIN_KEY:case t.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(n){if(n>=t.ZERO&&n<=t.NINE||n>=t.NUM_ZERO&&n<=t.NUM_MULTIPLY||n>=t.A&&n<=t.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&n===0)return!0;switch(n){case t.SPACE:case t.QUESTION_MARK:case t.NUM_PLUS:case t.NUM_MINUS:case t.NUM_PERIOD:case t.NUM_DIVISION:case t.SEMICOLON:case t.DASH:case t.EQUALS:case t.COMMA:case t.PERIOD:case t.SLASH:case t.APOSTROPHE:case t.SINGLE_QUOTE:case t.OPEN_SQUARE_BRACKET:case t.BACKSLASH:case t.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return j0.default=t,j0}var L0={};function RTe(t){return!!(t.addonBefore||t.addonAfter)}function kTe(t){return!!(t.prefix||t.suffix||t.allowClear)}function VW(t,e,n){var r=e.cloneNode(!0),o=Object.create(t,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(r.selectionStart=e.selectionStart,r.selectionEnd=e.selectionEnd),r.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},o}function M_(t,e,n,r){if(n){var o=e;if(e.type==="click"){o=VW(e,t,""),n(o);return}if(t.type!=="file"&&r!==void 0){o=VW(e,t,r),n(o);return}n(o)}}function Ore(t,e){if(t){t.focus(e);var n=e||{},r=n.cursor;if(r){var o=t.value.length;switch(r){case"start":t.setSelectionRange(0,0);break;case"end":t.setSelectionRange(o,o);break;default:t.setSelectionRange(0,o)}}}}var Mz=ce.forwardRef(function(t,e){var n,r,o,i=t.inputElement,s=t.children,a=t.prefixCls,l=t.prefix,c=t.suffix,u=t.addonBefore,d=t.addonAfter,f=t.className,h=t.style,g=t.disabled,y=t.readOnly,m=t.focused,S=t.triggerFocus,x=t.allowClear,C=t.value,E=t.handleReset,P=t.hidden,I=t.classes,T=t.classNames,M=t.dataAttrs,R=t.styles,A=t.components,j=t.onClear,N=s??i,k=(A==null?void 0:A.affixWrapper)||"span",D=(A==null?void 0:A.groupWrapper)||"span",F=(A==null?void 0:A.wrapper)||"span",H=(A==null?void 0:A.groupAddon)||"span",U=v.useRef(null),B=function(fe){var ue;(ue=U.current)!==null&&ue!==void 0&&ue.contains(fe.target)&&(S==null||S())},W=kTe(t),K=v.cloneElement(N,{value:C,className:he((n=N.props)===null||n===void 0?void 0:n.className,!W&&(T==null?void 0:T.variant))||null}),q=v.useRef(null);if(ce.useImperativeHandle(e,function(){return{nativeElement:q.current||U.current}}),W){var X=null;if(x){var Z=!g&&!y&&C,Y="".concat(a,"-clear-icon"),G=Wt(x)==="object"&&x!==null&&x!==void 0&&x.clearIcon?x.clearIcon:"";X=ce.createElement("button",{type:"button",tabIndex:-1,onClick:function(fe){E==null||E(fe),j==null||j()},onMouseDown:function(fe){return fe.preventDefault()},className:he(Y,oe(oe({},"".concat(Y,"-hidden"),!Z),"".concat(Y,"-has-suffix"),!!c))},G)}var J="".concat(a,"-affix-wrapper"),ne=he(J,oe(oe(oe(oe(oe({},"".concat(a,"-disabled"),g),"".concat(J,"-disabled"),g),"".concat(J,"-focused"),m),"".concat(J,"-readonly"),y),"".concat(J,"-input-with-clear-btn"),c&&x&&C),I==null?void 0:I.affixWrapper,T==null?void 0:T.affixWrapper,T==null?void 0:T.variant),ee=(c||x)&&ce.createElement("span",{className:he("".concat(a,"-suffix"),T==null?void 0:T.suffix),style:R==null?void 0:R.suffix},X,c);K=ce.createElement(k,vt({className:ne,style:R==null?void 0:R.affixWrapper,onClick:B},M==null?void 0:M.affixWrapper,{ref:U}),l&&ce.createElement("span",{className:he("".concat(a,"-prefix"),T==null?void 0:T.prefix),style:R==null?void 0:R.prefix},l),K,ee)}if(RTe(t)){var re="".concat(a,"-group"),le="".concat(re,"-addon"),ae="".concat(re,"-wrapper"),ie=he("".concat(a,"-wrapper"),re,I==null?void 0:I.wrapper,T==null?void 0:T.wrapper),ge=he(ae,oe({},"".concat(ae,"-disabled"),g),I==null?void 0:I.group,T==null?void 0:T.groupWrapper);K=ce.createElement(D,{className:ge,ref:q},ce.createElement(F,{className:ie},u&&ce.createElement(H,{className:le},u),K,d&&ce.createElement(H,{className:le},d)))}return ce.cloneElement(K,{className:he((r=K.props)===null||r===void 0?void 0:r.className,f)||null,style:de(de({},(o=K.props)===null||o===void 0?void 0:o.style),h),hidden:P})});function zl(t,e){var n=Object.assign({},t);return Array.isArray(e)&&e.forEach(function(r){delete n[r]}),n}var ATe=["show"];function Rre(t,e){return v.useMemo(function(){var n={};e&&(n.show=Wt(e)==="object"&&e.formatter?e.formatter:!!e),n=de(de({},n),t);var r=n,o=r.show,i=Sn(r,ATe);return de(de({},i),{},{show:!!o,showFormatter:typeof o=="function"?o:void 0,strategy:i.strategy||function(s){return s.length}})},[t,e])}var $Te=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],kre=v.forwardRef(function(t,e){var n=t.autoComplete,r=t.onChange,o=t.onFocus,i=t.onBlur,s=t.onPressEnter,a=t.onKeyDown,l=t.onKeyUp,c=t.prefixCls,u=c===void 0?"rc-input":c,d=t.disabled,f=t.htmlSize,h=t.className,g=t.maxLength,y=t.suffix,m=t.showCount,S=t.count,x=t.type,C=x===void 0?"text":x,E=t.classes,P=t.classNames,I=t.styles,T=t.onCompositionStart,M=t.onCompositionEnd,R=Sn(t,$Te),A=v.useState(!1),j=xe(A,2),N=j[0],k=j[1],D=v.useRef(!1),F=v.useRef(!1),H=v.useRef(null),U=v.useRef(null),B=function($e){H.current&&Ore(H.current,$e)},W=xi(t.defaultValue,{value:t.value}),K=xe(W,2),q=K[0],X=K[1],Z=q==null?"":String(q),Y=v.useState(null),G=xe(Y,2),J=G[0],ne=G[1],ee=Rre(S,m),re=ee.max||g,le=ee.strategy(Z),ae=!!re&&le>re;v.useImperativeHandle(e,function(){var Me;return{focus:B,blur:function(){var Qe;(Qe=H.current)===null||Qe===void 0||Qe.blur()},setSelectionRange:function(Qe,nt,ht){var ft;(ft=H.current)===null||ft===void 0||ft.setSelectionRange(Qe,nt,ht)},select:function(){var Qe;(Qe=H.current)===null||Qe===void 0||Qe.select()},input:H.current,nativeElement:((Me=U.current)===null||Me===void 0?void 0:Me.nativeElement)||H.current}}),v.useEffect(function(){F.current&&(F.current=!1),k(function(Me){return Me&&d?!1:Me})},[d]);var ie=function($e,Qe,nt){var ht=Qe;if(!D.current&&ee.exceedFormatter&&ee.max&&ee.strategy(Qe)>ee.max){if(ht=ee.exceedFormatter(Qe,{max:ee.max}),Qe!==ht){var ft,et;ne([((ft=H.current)===null||ft===void 0?void 0:ft.selectionStart)||0,((et=H.current)===null||et===void 0?void 0:et.selectionEnd)||0])}}else if(nt.source==="compositionEnd")return;X(ht),H.current&&M_(H.current,$e,r,ht)};v.useEffect(function(){if(J){var Me;(Me=H.current)===null||Me===void 0||Me.setSelectionRange.apply(Me,it(J))}},[J]);var ge=function($e){ie($e,$e.target.value,{source:"change"})},ve=function($e){D.current=!1,ie($e,$e.currentTarget.value,{source:"compositionEnd"}),M==null||M($e)},fe=function($e){s&&$e.key==="Enter"&&!F.current&&(F.current=!0,s($e)),a==null||a($e)},ue=function($e){$e.key==="Enter"&&(F.current=!1),l==null||l($e)},Ce=function($e){k(!0),o==null||o($e)},ye=function($e){F.current&&(F.current=!1),k(!1),i==null||i($e)},ke=function($e){X(""),B(),H.current&&M_(H.current,$e,r)},Be=ae&&"".concat(u,"-out-of-range"),Ue=function(){var $e=zl(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return ce.createElement("input",vt({autoComplete:n},$e,{onChange:ge,onFocus:Ce,onBlur:ye,onKeyDown:fe,onKeyUp:ue,className:he(u,oe({},"".concat(u,"-disabled"),d),P==null?void 0:P.input),style:I==null?void 0:I.input,ref:H,size:f,type:C,onCompositionStart:function(nt){D.current=!0,T==null||T(nt)},onCompositionEnd:ve}))},We=function(){var $e=Number(re)>0;if(y||ee.show){var Qe=ee.showFormatter?ee.showFormatter({value:Z,count:le,maxLength:re}):"".concat(le).concat($e?" / ".concat(re):"");return ce.createElement(ce.Fragment,null,ee.show&&ce.createElement("span",{className:he("".concat(u,"-show-count-suffix"),oe({},"".concat(u,"-show-count-has-suffix"),!!y),P==null?void 0:P.count),style:de({},I==null?void 0:I.count)},Qe),y)}return null};return ce.createElement(Mz,vt({},R,{prefixCls:u,className:he(h,Be),handleReset:ke,value:Z,focused:N,triggerFocus:B,suffix:We(),disabled:d,classes:E,classNames:P,styles:I,ref:U}),Ue())});const DTe=Object.freeze(Object.defineProperty({__proto__:null,BaseInput:Mz,default:kre},Symbol.toStringTag,{value:"Module"}));var jTe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,LTe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],_k={},Ra;function NTe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=t.getAttribute("id")||t.getAttribute("data-reactid")||t.getAttribute("name");if(e&&_k[n])return _k[n];var r=window.getComputedStyle(t),o=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),i=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),s=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),a=LTe.map(function(c){return"".concat(c,":").concat(r.getPropertyValue(c))}).join(";"),l={sizingStyle:a,paddingSize:i,borderSize:s,boxSizing:o};return e&&n&&(_k[n]=l),l}function FTe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Ra||(Ra=document.createElement("textarea"),Ra.setAttribute("tab-index","-1"),Ra.setAttribute("aria-hidden","true"),Ra.setAttribute("name","hiddenTextarea"),document.body.appendChild(Ra)),t.getAttribute("wrap")?Ra.setAttribute("wrap",t.getAttribute("wrap")):Ra.removeAttribute("wrap");var o=NTe(t,e),i=o.paddingSize,s=o.borderSize,a=o.boxSizing,l=o.sizingStyle;Ra.setAttribute("style","".concat(l,";").concat(jTe)),Ra.value=t.value||t.placeholder||"";var c=void 0,u=void 0,d,f=Ra.scrollHeight;if(a==="border-box"?f+=s:a==="content-box"&&(f-=i),n!==null||r!==null){Ra.value=" ";var h=Ra.scrollHeight-i;n!==null&&(c=h*n,a==="border-box"&&(c=c+i+s),f=Math.max(c,f)),r!==null&&(u=h*r,a==="border-box"&&(u=u+i+s),d=f>u?"":"hidden",f=Math.min(u,f))}var g={height:f,overflowY:d,resize:"none"};return c&&(g.minHeight=c),u&&(g.maxHeight=u),g}var zTe=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Ik=0,Tk=1,Mk=2,Are=v.forwardRef(function(t,e){var n=t,r=n.prefixCls,o=n.defaultValue,i=n.value,s=n.autoSize,a=n.onResize,l=n.className,c=n.style,u=n.disabled,d=n.onChange;n.onInternalAutoSize;var f=Sn(n,zTe),h=xi(o,{value:i,postState:function(Y){return Y??""}}),g=xe(h,2),y=g[0],m=g[1],S=function(Y){m(Y.target.value),d==null||d(Y)},x=v.useRef();v.useImperativeHandle(e,function(){return{textArea:x.current}});var C=v.useMemo(function(){return s&&Wt(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),E=xe(C,2),P=E[0],I=E[1],T=!!s,M=function(){try{if(document.activeElement===x.current){var Y=x.current,G=Y.selectionStart,J=Y.selectionEnd,ne=Y.scrollTop;x.current.setSelectionRange(G,J),x.current.scrollTop=ne}}catch{}},R=v.useState(Mk),A=xe(R,2),j=A[0],N=A[1],k=v.useState(),D=xe(k,2),F=D[0],H=D[1],U=function(){N(Ik)};lr(function(){T&&U()},[i,P,I,T]),lr(function(){if(j===Ik)N(Tk);else if(j===Tk){var Z=FTe(x.current,!1,P,I);N(Mk),H(Z)}else M()},[j]);var B=v.useRef(),W=function(){Sr.cancel(B.current)},K=function(Y){j===Mk&&(a==null||a(Y),s&&(W(),B.current=Sr(function(){U()})))};v.useEffect(function(){return W},[]);var q=T?F:null,X=de(de({},c),q);return(j===Ik||j===Tk)&&(X.overflowY="hidden",X.overflowX="hidden"),v.createElement(Ha,{onResize:K,disabled:!(s||a)},v.createElement("textarea",vt({},f,{ref:x,style:X,className:he(r,l,oe({},"".concat(r,"-disabled"),u)),disabled:u,value:y,onChange:S})))}),BTe=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],$re=ce.forwardRef(function(t,e){var n,r=t.defaultValue,o=t.value,i=t.onFocus,s=t.onBlur,a=t.onChange,l=t.allowClear,c=t.maxLength,u=t.onCompositionStart,d=t.onCompositionEnd,f=t.suffix,h=t.prefixCls,g=h===void 0?"rc-textarea":h,y=t.showCount,m=t.count,S=t.className,x=t.style,C=t.disabled,E=t.hidden,P=t.classNames,I=t.styles,T=t.onResize,M=t.onClear,R=t.onPressEnter,A=t.readOnly,j=t.autoSize,N=t.onKeyDown,k=Sn(t,BTe),D=xi(r,{value:o,defaultValue:r}),F=xe(D,2),H=F[0],U=F[1],B=H==null?"":String(H),W=ce.useState(!1),K=xe(W,2),q=K[0],X=K[1],Z=ce.useRef(!1),Y=ce.useState(null),G=xe(Y,2),J=G[0],ne=G[1],ee=v.useRef(null),re=v.useRef(null),le=function(){var qe;return(qe=re.current)===null||qe===void 0?void 0:qe.textArea},ae=function(){le().focus()};v.useImperativeHandle(e,function(){var Le;return{resizableTextArea:re.current,focus:ae,blur:function(){le().blur()},nativeElement:((Le=ee.current)===null||Le===void 0?void 0:Le.nativeElement)||le()}}),v.useEffect(function(){X(function(Le){return!C&&Le})},[C]);var ie=ce.useState(null),ge=xe(ie,2),ve=ge[0],fe=ge[1];ce.useEffect(function(){if(ve){var Le;(Le=le()).setSelectionRange.apply(Le,it(ve))}},[ve]);var ue=Rre(m,y),Ce=(n=ue.max)!==null&&n!==void 0?n:c,ye=Number(Ce)>0,ke=ue.strategy(B),Be=!!Ce&&ke>Ce,Ue=function(qe,at){var Ae=at;!Z.current&&ue.exceedFormatter&&ue.max&&ue.strategy(at)>ue.max&&(Ae=ue.exceedFormatter(at,{max:ue.max}),at!==Ae&&fe([le().selectionStart||0,le().selectionEnd||0])),U(Ae),M_(qe.currentTarget,qe,a,Ae)},We=function(qe){Z.current=!0,u==null||u(qe)},Me=function(qe){Z.current=!1,Ue(qe,qe.currentTarget.value),d==null||d(qe)},$e=function(qe){Ue(qe,qe.target.value)},Qe=function(qe){qe.key==="Enter"&&R&&R(qe),N==null||N(qe)},nt=function(qe){X(!0),i==null||i(qe)},ht=function(qe){X(!1),s==null||s(qe)},ft=function(qe){U(""),ae(),M_(le(),qe,a)},et=f,pe;ue.show&&(ue.showFormatter?pe=ue.showFormatter({value:B,count:ke,maxLength:Ce}):pe="".concat(ke).concat(ye?" / ".concat(Ce):""),et=ce.createElement(ce.Fragment,null,et,ce.createElement("span",{className:he("".concat(g,"-data-count"),P==null?void 0:P.count),style:I==null?void 0:I.count},pe)));var Pe=function(qe){var at;T==null||T(qe),(at=le())!==null&&at!==void 0&&at.style.height&&ne(!0)},je=!j&&!y&&!l;return ce.createElement(Mz,{ref:ee,value:B,allowClear:l,handleReset:ft,suffix:et,prefixCls:g,classNames:de(de({},P),{},{affixWrapper:he(P==null?void 0:P.affixWrapper,oe(oe({},"".concat(g,"-show-count"),y),"".concat(g,"-textarea-allow-clear"),l))}),disabled:C,focused:q,className:he(S,Be&&"".concat(g,"-out-of-range")),style:de(de({},x),J&&!je?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof pe=="string"?pe:void 0}},hidden:E,readOnly:A,onClear:M},ce.createElement(Are,vt({},k,{autoSize:j,maxLength:c,onKeyDown:Qe,onChange:$e,onFocus:nt,onBlur:ht,onCompositionStart:We,onCompositionEnd:Me,className:he(P==null?void 0:P.textarea),style:de(de({},I==null?void 0:I.textarea),{},{resize:x==null?void 0:x.resize}),disabled:C,prefixCls:g,onResize:Pe,ref:re,readOnly:A})))});const HTe=Object.freeze(Object.defineProperty({__proto__:null,ResizableTextArea:Are,default:$re},Symbol.toStringTag,{value:"Module"})),UTe=Ru(HTe);var N0={},CC={exports:{}},F0={},EC={},qW;function WTe(){if(qW)return EC;qW=1,Object.defineProperty(EC,"__esModule",{value:!0});var t={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};return EC.default=t,EC}var KW;function VTe(){if(KW)return F0;KW=1;var t=Ln().default,e=Lt().default;Object.defineProperty(F0,"__esModule",{value:!0}),F0.default=void 0;var n=e(fg()),r=t(Gt()),o=e(WTe()),i=e(zv()),s=function(c,u){return r.createElement(i.default,(0,n.default)({},c,{ref:u,icon:o.default}))},a=r.forwardRef(s);return F0.default=a,F0}var GW;function qTe(){return GW||(GW=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(VTe());function r(i){return i&&i.__esModule?i:{default:i}}const o=n;e.default=o,t.exports=o}(CC,CC.exports)),CC.exports}var XW;function Dre(){if(XW)return N0;XW=1;var t=Lt().default;Object.defineProperty(N0,"__esModule",{value:!0}),N0.default=void 0;var e=t(Gt()),n=t(qTe());const r=o=>{let i;return typeof o=="object"&&(o!=null&&o.clearIcon)?i=o:o&&(i={clearIcon:e.default.createElement(n.default,null)}),i};return N0.default=r,N0}var em={},YW;function jre(){if(YW)return em;YW=1;var t=Lt().default;Object.defineProperty(em,"__esModule",{value:!0}),em.getMergedStatus=void 0,em.getStatusClassNames=n;var e=t(tl());function n(o,i,s){return(0,e.default)({[`${o}-status-success`]:i==="success",[`${o}-status-warning`]:i==="warning",[`${o}-status-error`]:i==="error",[`${o}-status-validating`]:i==="validating",[`${o}-has-feedback`]:s})}const r=(o,i)=>i||o;return em.getMergedStatus=r,em}var z0={},QW;function Lre(){if(QW)return z0;QW=1,Object.defineProperty(z0,"__esModule",{value:!0}),z0.default=void 0;var t=Fl();const e=n=>{const[,,,,r]=(0,t.useToken)();return r?`${n}-css-var`:""};return z0.default=e,z0}var B0={},ZW;function Nre(){if(ZW)return B0;ZW=1;var t=Ln().default;Object.defineProperty(B0,"__esModule",{value:!0}),B0.default=void 0;var e=t(Gt()),n=qT(),r=Kx();const o=(i,s,a=void 0)=>{var l,c;const{variant:u,[i]:d}=e.useContext(r.ConfigContext),f=e.useContext(n.VariantContext),h=d==null?void 0:d.variant;let g;typeof s<"u"?g=s:a===!1?g="borderless":g=(c=(l=f??h)!==null&&l!==void 0?l:u)!==null&&c!==void 0?c:"outlined";const y=r.Variants.includes(g);return[g,y]};return B0.default=o,B0}var Ok={};const KTe=Ru(DTe);var Qh={},JW;function GTe(){if(JW)return Qh;JW=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.hasAddon=t,Qh.hasPrefixSuffix=e,Qh.resolveOnChange=r,Qh.triggerFocus=o;function t(i){return!!(i.addonBefore||i.addonAfter)}function e(i){return!!(i.prefix||i.suffix||i.allowClear)}function n(i,s,a){var l=s.cloneNode(!0),c=Object.create(i,{target:{value:l},currentTarget:{value:l}});return l.value=a,typeof s.selectionStart=="number"&&typeof s.selectionEnd=="number"&&(l.selectionStart=s.selectionStart,l.selectionEnd=s.selectionEnd),l.setSelectionRange=function(){s.setSelectionRange.apply(s,arguments)},c}function r(i,s,a,l){if(a){var c=s;if(s.type==="click"){c=n(s,i,""),a(c);return}if(i.type!=="file"&&l!==void 0){c=n(s,i,l),a(c);return}a(c)}}function o(i,s){if(i){i.focus(s);var a=s||{},l=a.cursor;if(l){var c=i.value.length;switch(l){case"start":i.setSelectionRange(0,0);break;case"end":i.setSelectionRange(c,c);break;default:i.setSelectionRange(0,c)}}}}return Qh}var PC={},eV;function XTe(){if(eV)return PC;eV=1,Object.defineProperty(PC,"__esModule",{value:!0}),PC.default=e;var t=Gt();function e(n,r){const o=(0,t.useRef)([]),i=()=>{o.current.push(setTimeout(()=>{var s,a,l,c;!((s=n.current)===null||s===void 0)&&s.input&&((a=n.current)===null||a===void 0?void 0:a.input.getAttribute("type"))==="password"&&(!((l=n.current)===null||l===void 0)&&l.input.hasAttribute("value"))&&((c=n.current)===null||c===void 0||c.input.removeAttribute("value"))}))};return(0,t.useEffect)(()=>(r&&i(),()=>o.current.forEach(s=>{s&&clearTimeout(s)})),[]),i}return PC}var Rk={},_C={},tV;function YTe(){if(tV)return _C;tV=1,Object.defineProperty(_C,"__esModule",{value:!0}),_C.genCompactItemStyle=n;function t(r,o,i){const{focusElCls:s,focus:a,borderElCls:l}=i,c=l?"> *":"",u=["hover",a?"focus":null,"active"].filter(Boolean).map(d=>`&:${d} ${c}`).join(",");return{[`&-item:not(${o}-last-item)`]:{marginInlineEnd:r.calc(r.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[u]:{zIndex:2}},s?{[`&${s}`]:{zIndex:2}}:{}),{[`&[disabled] ${c}`]:{zIndex:0}})}}function e(r,o,i){const{borderElCls:s}=i,a=s?`> ${s}`:"";return{[`&-item:not(${o}-first-item):not(${o}-last-item) ${a}`]:{borderRadius:0},[`&-item:not(${o}-last-item)${o}-first-item`]:{[`& ${a}, &${r}-sm ${a}, &${r}-lg ${a}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${o}-first-item)${o}-last-item`]:{[`& ${a}, &${r}-sm ${a}, &${r}-lg ${a}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function n(r,o={focus:!0}){const{componentCls:i}=r,s=`${i}-compact`;return{[s]:Object.assign(Object.assign({},t(r,s,o)),e(i,s,o))}}return _C}var tm={},nV;function Fre(){if(nV)return tm;nV=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.initComponentToken=void 0,tm.initInputToken=e;var t=Fl();function e(r){return(0,t.mergeToken)(r,{inputAffixPadding:r.paddingXXS})}const n=r=>{const{controlHeight:o,fontSize:i,lineHeight:s,lineWidth:a,controlHeightSM:l,controlHeightLG:c,fontSizeLG:u,lineHeightLG:d,paddingSM:f,controlPaddingHorizontalSM:h,controlPaddingHorizontal:g,colorFillAlter:y,colorPrimaryHover:m,colorPrimary:S,controlOutlineWidth:x,controlOutline:C,colorErrorOutline:E,colorWarningOutline:P,colorBgContainer:I,inputFontSize:T,inputFontSizeLG:M,inputFontSizeSM:R}=r,A=T||i,j=R||A,N=M||u,k=Math.round((o-A*s)/2*10)/10-a,D=Math.round((l-j*s)/2*10)/10-a,F=Math.ceil((c-N*d)/2*10)/10-a;return{paddingBlock:Math.max(k,0),paddingBlockSM:Math.max(D,0),paddingBlockLG:Math.max(F,0),paddingInline:f-a,paddingInlineSM:h-a,paddingInlineLG:g-a,addonBg:y,activeBorderColor:S,hoverBorderColor:m,activeShadow:`0 0 0 ${x}px ${C}`,errorActiveShadow:`0 0 0 ${x}px ${E}`,warningActiveShadow:`0 0 0 ${x}px ${P}`,hoverBg:I,activeBg:I,inputFontSize:A,inputFontSizeLG:N,inputFontSizeSM:j}};return tm.initComponentToken=n,tm}var mo={},rV;function QTe(){if(rV)return mo;rV=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.genUnderlinedStyle=mo.genOutlinedStyle=mo.genOutlinedGroupStyle=mo.genHoverStyle=mo.genFilledStyle=mo.genFilledGroupStyle=mo.genDisabledStyle=mo.genBorderlessStyle=mo.genBaseUnderlinedStyle=mo.genBaseOutlinedStyle=void 0;var t=Ss,e=Fl();const n=x=>({borderColor:x.hoverBorderColor,backgroundColor:x.hoverBg});mo.genHoverStyle=n;const r=x=>({color:x.colorTextDisabled,backgroundColor:x.colorBgContainerDisabled,borderColor:x.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},n((0,e.mergeToken)(x,{hoverBorderColor:x.colorBorder,hoverBg:x.colorBgContainerDisabled})))});mo.genDisabledStyle=r;const o=(x,C)=>({background:x.colorBgContainer,borderWidth:x.lineWidth,borderStyle:x.lineType,borderColor:C.borderColor,"&:hover":{borderColor:C.hoverBorderColor,backgroundColor:x.hoverBg},"&:focus, &:focus-within":{borderColor:C.activeBorderColor,boxShadow:C.activeShadow,outline:0,backgroundColor:x.activeBg}});mo.genBaseOutlinedStyle=o;const i=(x,C)=>({[`&${x.componentCls}-status-${C.status}:not(${x.componentCls}-disabled)`]:Object.assign(Object.assign({},o(x,C)),{[`${x.componentCls}-prefix, ${x.componentCls}-suffix`]:{color:C.affixColor}}),[`&${x.componentCls}-status-${C.status}${x.componentCls}-disabled`]:{borderColor:C.borderColor}}),s=(x,C)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o(x,{borderColor:x.colorBorder,hoverBorderColor:x.hoverBorderColor,activeBorderColor:x.activeBorderColor,activeShadow:x.activeShadow})),{[`&${x.componentCls}-disabled, &[disabled]`]:Object.assign({},r(x))}),i(x,{status:"error",borderColor:x.colorError,hoverBorderColor:x.colorErrorBorderHover,activeBorderColor:x.colorError,activeShadow:x.errorActiveShadow,affixColor:x.colorError})),i(x,{status:"warning",borderColor:x.colorWarning,hoverBorderColor:x.colorWarningBorderHover,activeBorderColor:x.colorWarning,activeShadow:x.warningActiveShadow,affixColor:x.colorWarning})),C)});mo.genOutlinedStyle=s;const a=(x,C)=>({[`&${x.componentCls}-group-wrapper-status-${C.status}`]:{[`${x.componentCls}-group-addon`]:{borderColor:C.addonBorderColor,color:C.addonColor}}}),l=x=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${x.componentCls}-group`]:{"&-addon":{background:x.addonBg,border:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},a(x,{status:"error",addonBorderColor:x.colorError,addonColor:x.colorErrorText})),a(x,{status:"warning",addonBorderColor:x.colorWarning,addonColor:x.colorWarningText})),{[`&${x.componentCls}-group-wrapper-disabled`]:{[`${x.componentCls}-group-addon`]:Object.assign({},r(x))}})});mo.genOutlinedGroupStyle=l;const c=(x,C)=>{const{componentCls:E}=x;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${E}-disabled, &[disabled]`]:{color:x.colorTextDisabled,cursor:"not-allowed"},[`&${E}-status-error`]:{"&, & input, & textarea":{color:x.colorError}},[`&${E}-status-warning`]:{"&, & input, & textarea":{color:x.colorWarning}}},C)}};mo.genBorderlessStyle=c;const u=(x,C)=>{var E;return{background:C.bg,borderWidth:x.lineWidth,borderStyle:x.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:(E=C==null?void 0:C.inputColor)!==null&&E!==void 0?E:"unset"},"&:hover":{background:C.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:C.activeBorderColor,backgroundColor:x.activeBg}}},d=(x,C)=>({[`&${x.componentCls}-status-${C.status}:not(${x.componentCls}-disabled)`]:Object.assign(Object.assign({},u(x,C)),{[`${x.componentCls}-prefix, ${x.componentCls}-suffix`]:{color:C.affixColor}})}),f=(x,C)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u(x,{bg:x.colorFillTertiary,hoverBg:x.colorFillSecondary,activeBorderColor:x.activeBorderColor})),{[`&${x.componentCls}-disabled, &[disabled]`]:Object.assign({},r(x))}),d(x,{status:"error",bg:x.colorErrorBg,hoverBg:x.colorErrorBgHover,activeBorderColor:x.colorError,inputColor:x.colorErrorText,affixColor:x.colorError})),d(x,{status:"warning",bg:x.colorWarningBg,hoverBg:x.colorWarningBgHover,activeBorderColor:x.colorWarning,inputColor:x.colorWarningText,affixColor:x.colorWarning})),C)});mo.genFilledStyle=f;const h=(x,C)=>({[`&${x.componentCls}-group-wrapper-status-${C.status}`]:{[`${x.componentCls}-group-addon`]:{background:C.addonBg,color:C.addonColor}}}),g=x=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${x.componentCls}-group-addon`]:{background:x.colorFillTertiary,"&:last-child":{position:"static"}}},h(x,{status:"error",addonBg:x.colorErrorBg,addonColor:x.colorErrorText})),h(x,{status:"warning",addonBg:x.colorWarningBg,addonColor:x.colorWarningText})),{[`&${x.componentCls}-group-wrapper-disabled`]:{[`${x.componentCls}-group`]:{"&-addon":{background:x.colorFillTertiary,color:x.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`,borderTop:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`,borderBottom:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`,borderTop:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`,borderBottom:`${(0,t.unit)(x.lineWidth)} ${x.lineType} ${x.colorBorder}`}}}})});mo.genFilledGroupStyle=g;const y=(x,C)=>({background:x.colorBgContainer,borderWidth:`${(0,t.unit)(x.lineWidth)} 0`,borderStyle:`${x.lineType} none`,borderColor:`transparent transparent ${C.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${C.borderColor} transparent`,backgroundColor:x.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${C.borderColor} transparent`,outline:0,backgroundColor:x.activeBg}});mo.genBaseUnderlinedStyle=y;const m=(x,C)=>({[`&${x.componentCls}-status-${C.status}:not(${x.componentCls}-disabled)`]:Object.assign(Object.assign({},y(x,C)),{[`${x.componentCls}-prefix, ${x.componentCls}-suffix`]:{color:C.affixColor}}),[`&${x.componentCls}-status-${C.status}${x.componentCls}-disabled`]:{borderColor:`transparent transparent ${C.borderColor} transparent`}}),S=(x,C)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},y(x,{borderColor:x.colorBorder,hoverBorderColor:x.hoverBorderColor,activeBorderColor:x.activeBorderColor,activeShadow:x.activeShadow})),{[`&${x.componentCls}-disabled, &[disabled]`]:{color:x.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${x.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),m(x,{status:"error",borderColor:x.colorError,hoverBorderColor:x.colorErrorBorderHover,activeBorderColor:x.colorError,activeShadow:x.errorActiveShadow,affixColor:x.colorError})),m(x,{status:"warning",borderColor:x.colorWarning,hoverBorderColor:x.colorWarningBorderHover,activeBorderColor:x.colorWarning,activeShadow:x.warningActiveShadow,affixColor:x.colorWarning})),C)});return mo.genUnderlinedStyle=S,mo}var oV;function zre(){return oV||(oV=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.genPlaceholderStyle=t.genInputStyle=t.genInputSmallStyle=t.genInputGroupStyle=t.genBasicInputStyle=t.genAffixStyle=t.genActiveStyle=t.default=void 0,Object.defineProperty(t,"initComponentToken",{enumerable:!0,get:function(){return i.initComponentToken}}),Object.defineProperty(t,"initInputToken",{enumerable:!0,get:function(){return i.initInputToken}}),t.useSharedStyle=void 0;var e=Ss,n=Wv(),r=YTe(),o=Fl(),i=Fre(),s=QTe();const a=C=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:C,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}});t.genPlaceholderStyle=a;const l=C=>({borderColor:C.activeBorderColor,boxShadow:C.activeShadow,outline:0,backgroundColor:C.activeBg});t.genActiveStyle=l;const c=C=>{const{paddingBlockLG:E,lineHeightLG:P,borderRadiusLG:I,paddingInlineLG:T}=C;return{padding:`${(0,e.unit)(E)} ${(0,e.unit)(T)}`,fontSize:C.inputFontSizeLG,lineHeight:P,borderRadius:I}},u=C=>({padding:`${(0,e.unit)(C.paddingBlockSM)} ${(0,e.unit)(C.paddingInlineSM)}`,fontSize:C.inputFontSizeSM,borderRadius:C.borderRadiusSM});t.genInputSmallStyle=u;const d=C=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${(0,e.unit)(C.paddingBlock)} ${(0,e.unit)(C.paddingInline)}`,color:C.colorText,fontSize:C.inputFontSize,lineHeight:C.lineHeight,borderRadius:C.borderRadius,transition:`all ${C.motionDurationMid}`},a(C.colorTextPlaceholder)),{"&-lg":Object.assign({},c(C)),"&-sm":Object.assign({},u(C)),"&-rtl, &-textarea-rtl":{direction:"rtl"}});t.genBasicInputStyle=d;const f=C=>{const{componentCls:E,antCls:P}=C;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:C.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${E}, &-lg > ${E}-group-addon`]:Object.assign({},c(C)),[`&-sm ${E}, &-sm > ${E}-group-addon`]:Object.assign({},u(C)),[`&-lg ${P}-select-single ${P}-select-selector`]:{height:C.controlHeightLG},[`&-sm ${P}-select-single ${P}-select-selector`]:{height:C.controlHeightSM},[`> ${E}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${E}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${(0,e.unit)(C.paddingInline)}`,color:C.colorText,fontWeight:"normal",fontSize:C.inputFontSize,textAlign:"center",borderRadius:C.borderRadius,transition:`all ${C.motionDurationSlow}`,lineHeight:1,[`${P}-select`]:{margin:`${(0,e.unit)(C.calc(C.paddingBlock).add(1).mul(-1).equal())} ${(0,e.unit)(C.calc(C.paddingInline).mul(-1).equal())}`,[`&${P}-select-single:not(${P}-select-customize-input):not(${P}-pagination-size-changer)`]:{[`${P}-select-selector`]:{backgroundColor:"inherit",border:`${(0,e.unit)(C.lineWidth)} ${C.lineType} transparent`,boxShadow:"none"}}},[`${P}-cascader-picker`]:{margin:`-9px ${(0,e.unit)(C.calc(C.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${P}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[E]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${E}-search-with-button &`]:{zIndex:0}}},[`> ${E}:first-child, ${E}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${P}-select ${P}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${E}-affix-wrapper`]:{[`&:not(:first-child) ${E}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${E}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${E}:last-child, ${E}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${P}-select ${P}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${E}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${E}-search &`]:{borderStartStartRadius:C.borderRadius,borderEndStartRadius:C.borderRadius}},[`&:not(:first-child), ${E}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${E}-group-compact`]:Object.assign(Object.assign({display:"block"},(0,n.clearFix)()),{[`${E}-group-addon, ${E}-group-wrap, > ${E}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:C.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${E}-affix-wrapper,
        & > ${E}-number-affix-wrapper,
        & > ${P}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:C.calc(C.lineWidth).mul(-1).equal(),borderInlineEndWidth:C.lineWidth},[E]:{float:"none"},[`& > ${P}-select > ${P}-select-selector,
      & > ${P}-select-auto-complete ${E},
      & > ${P}-cascader-picker ${E},
      & > ${E}-group-wrapper ${E}`]:{borderInlineEndWidth:C.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${P}-select-focused`]:{zIndex:1},[`& > ${P}-select > ${P}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${P}-select:first-child > ${P}-select-selector,
      & > ${P}-select-auto-complete:first-child ${E},
      & > ${P}-cascader-picker:first-child ${E}`]:{borderStartStartRadius:C.borderRadius,borderEndStartRadius:C.borderRadius},[`& > *:last-child,
      & > ${P}-select:last-child > ${P}-select-selector,
      & > ${P}-cascader-picker:last-child ${E},
      & > ${P}-cascader-picker-focused:last-child ${E}`]:{borderInlineEndWidth:C.lineWidth,borderStartEndRadius:C.borderRadius,borderEndEndRadius:C.borderRadius},[`& > ${P}-select-auto-complete ${E}`]:{verticalAlign:"top"},[`${E}-group-wrapper + ${E}-group-wrapper`]:{marginInlineStart:C.calc(C.lineWidth).mul(-1).equal(),[`${E}-affix-wrapper`]:{borderRadius:0}},[`${E}-group-wrapper:not(:last-child)`]:{[`&${E}-search > ${E}-group`]:{[`& > ${E}-group-addon > ${E}-search-button`]:{borderRadius:0},[`& > ${E}`]:{borderStartStartRadius:C.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:C.borderRadius}}}})}};t.genInputGroupStyle=f;const h=C=>{const{componentCls:E,controlHeightSM:P,lineWidth:I,calc:T}=C,R=T(P).sub(T(I).mul(2)).sub(16).div(2).equal();return{[E]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(0,n.resetComponent)(C)),d(C)),(0,s.genOutlinedStyle)(C)),(0,s.genFilledStyle)(C)),(0,s.genBorderlessStyle)(C)),(0,s.genUnderlinedStyle)(C)),{'&[type="color"]':{height:C.controlHeight,[`&${E}-lg`]:{height:C.controlHeightLG},[`&${E}-sm`]:{height:P,paddingTop:R,paddingBottom:R}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}})}};t.genInputStyle=h;const g=C=>{const{componentCls:E}=C;return{[`${E}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:C.colorTextQuaternary,fontSize:C.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${C.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:C.colorIcon},"&:active":{color:C.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${(0,e.unit)(C.inputAffixPadding)}`}}}},y=C=>{const{componentCls:E,inputAffixPadding:P,colorTextDescription:I,motionDurationSlow:T,colorIcon:M,colorIconHover:R,iconCls:A}=C,j=`${E}-affix-wrapper`,N=`${E}-affix-wrapper-disabled`;return{[j]:Object.assign(Object.assign(Object.assign(Object.assign({},d(C)),{display:"inline-flex",[`&:not(${E}-disabled):hover`]:{zIndex:1,[`${E}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${E}`]:{padding:0},[`> input${E}, > textarea${E}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[E]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:C.paddingXS}},"&-show-count-suffix":{color:I,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:C.paddingXXS},"&-prefix":{marginInlineEnd:P},"&-suffix":{marginInlineStart:P}}}),g(C)),{[`${A}${E}-password-icon`]:{color:M,cursor:"pointer",transition:`all ${T}`,"&:hover":{color:R}}}),[`${E}-underlined`]:{borderRadius:0},[N]:{[`${A}${E}-password-icon`]:{color:M,cursor:"not-allowed","&:hover":{color:M}}}}};t.genAffixStyle=y;const m=C=>{const{componentCls:E,borderRadiusLG:P,borderRadiusSM:I}=C;return{[`${E}-group`]:Object.assign(Object.assign(Object.assign({},(0,n.resetComponent)(C)),f(C)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${E}-group-addon`]:{borderRadius:P,fontSize:C.inputFontSizeLG}},"&-sm":{[`${E}-group-addon`]:{borderRadius:I}}},(0,s.genOutlinedGroupStyle)(C)),(0,s.genFilledGroupStyle)(C)),{[`&:not(${E}-compact-first-item):not(${E}-compact-last-item)${E}-compact-item`]:{[`${E}, ${E}-group-addon`]:{borderRadius:0}},[`&:not(${E}-compact-last-item)${E}-compact-first-item`]:{[`${E}, ${E}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${E}-compact-first-item)${E}-compact-last-item`]:{[`${E}, ${E}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${E}-compact-last-item)${E}-compact-item`]:{[`${E}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${E}-compact-first-item)${E}-compact-item`]:{[`${E}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},S=C=>{const{componentCls:E,antCls:P}=C,I=`${E}-search`;return{[I]:{[E]:{"&:hover, &:focus":{[`+ ${E}-group-addon ${I}-button:not(${P}-btn-color-primary):not(${P}-btn-variant-text)`]:{borderInlineStartColor:C.colorPrimaryHover}}},[`${E}-affix-wrapper`]:{height:C.controlHeight,borderRadius:0},[`${E}-lg`]:{lineHeight:C.calc(C.lineHeightLG).sub(2e-4).equal()},[`> ${E}-group`]:{[`> ${E}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${I}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${I}-button:not(${P}-btn-color-primary)`]:{color:C.colorTextDescription,"&:hover":{color:C.colorPrimaryHover},"&:active":{color:C.colorPrimaryActive},[`&${P}-btn-loading::before`]:{inset:0}}}},[`${I}-button`]:{height:C.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${E}-affix-wrapper, ${I}-button`]:{height:C.controlHeightLG}},"&-small":{[`${E}-affix-wrapper, ${I}-button`]:{height:C.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${E}-compact-item`]:{[`&:not(${E}-compact-last-item)`]:{[`${E}-group-addon`]:{[`${E}-search-button`]:{marginInlineEnd:C.calc(C.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${E}-compact-first-item)`]:{[`${E},${E}-affix-wrapper`]:{borderRadius:0}},[`> ${E}-group-addon ${E}-search-button,
        > ${E},
        ${E}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${E}-affix-wrapper-focused`]:{zIndex:2}}}}},x=C=>{const{componentCls:E}=C;return{[`${E}-out-of-range`]:{[`&, & input, & textarea, ${E}-show-count-suffix, ${E}-data-count`]:{color:C.colorError}}}};t.useSharedStyle=(0,o.genStyleHooks)(["Input","Shared"],C=>{const E=(0,o.mergeToken)(C,(0,i.initInputToken)(C));return[h(E),y(E)]},i.initComponentToken,{resetFont:!1}),t.default=(0,o.genStyleHooks)(["Input","Component"],C=>{const E=(0,o.mergeToken)(C,(0,i.initInputToken)(C));return[m(E),S(E),x(E),(0,r.genCompactItemStyle)(E)]},i.initComponentToken,{resetFont:!1})}(Rk)),Rk}var IC={},iV;function ZTe(){if(iV)return IC;iV=1,Object.defineProperty(IC,"__esModule",{value:!0}),IC.hasPrefixSuffix=t;function t(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}return IC}var sV;function JTe(){return sV||(sV=1,function(t){"use client";var e=Lt().default,n=Ln().default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"triggerFocus",{enumerable:!0,get:function(){return s.triggerFocus}});var r=n(Gt()),o=e(tl()),i=e(KTe),s=GTe(),a=nz(),l=e(Cre()),c=e(Dre()),u=jre(),d=Uv(),f=e(zT()),h=e(Lre()),g=e(_z()),y=qT(),m=e(Nre()),S=Iz(),x=e(XTe()),C=n(zre()),E=ZTe(),P=function(T,M){var R={};for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&M.indexOf(A)<0&&(R[A]=T[A]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,A=Object.getOwnPropertySymbols(T);j<A.length;j++)M.indexOf(A[j])<0&&Object.prototype.propertyIsEnumerable.call(T,A[j])&&(R[A[j]]=T[A[j]]);return R};const I=(0,r.forwardRef)((T,M)=>{const{prefixCls:R,bordered:A=!0,status:j,size:N,disabled:k,onBlur:D,onFocus:F,suffix:H,allowClear:U,addonAfter:B,addonBefore:W,className:K,style:q,styles:X,rootClassName:Z,onChange:Y,classNames:G,variant:J}=T,ne=P(T,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:ee,direction:re,allowClear:le,autoComplete:ae,className:ie,style:ge,classNames:ve,styles:fe}=(0,d.useComponentConfig)("input"),ue=ee("input",R),Ce=(0,r.useRef)(null),ye=(0,h.default)(ue),[ke,Be,Ue]=(0,C.useSharedStyle)(ue,Z),[We]=(0,C.default)(ue,ye),{compactSize:Me,compactItemClassnames:$e}=(0,S.useCompactItemContext)(ue,re),Qe=(0,g.default)(Xt=>{var sn;return(sn=N??Me)!==null&&sn!==void 0?sn:Xt}),nt=r.default.useContext(f.default),ht=k??nt,{status:ft,hasFeedback:et,feedbackIcon:pe}=(0,r.useContext)(y.FormItemInputContext),Pe=(0,u.getMergedStatus)(ft,j),je=(0,E.hasPrefixSuffix)(T)||!!et;(0,r.useRef)(je);const Le=(0,x.default)(Ce,!0),qe=Xt=>{Le(),D==null||D(Xt)},at=Xt=>{Le(),F==null||F(Xt)},Ae=Xt=>{Le(),Y==null||Y(Xt)},Ne=(et||H)&&r.default.createElement(r.default.Fragment,null,H,et&&pe),xt=(0,c.default)(U??le),[Pt,gn]=(0,m.default)("input",J,A);return ke(We(r.default.createElement(i.default,Object.assign({ref:(0,a.composeRef)(M,Ce),prefixCls:ue,autoComplete:ae},ne,{disabled:ht,onBlur:qe,onFocus:at,style:Object.assign(Object.assign({},ge),q),styles:Object.assign(Object.assign({},fe),X),suffix:Ne,allowClear:xt,className:(0,o.default)(K,Z,Ue,ye,$e,ie),onChange:Ae,addonBefore:W&&r.default.createElement(l.default,{form:!0,space:!0},W),addonAfter:B&&r.default.createElement(l.default,{form:!0,space:!0},B),classNames:Object.assign(Object.assign(Object.assign({},G),ve),{input:(0,o.default)({[`${ue}-sm`]:Qe==="small",[`${ue}-lg`]:Qe==="large",[`${ue}-rtl`]:re==="rtl"},G==null?void 0:G.input,ve.input,Be),variant:(0,o.default)({[`${ue}-${Pt}`]:gn},(0,u.getStatusClassNames)(ue,Pe)),affixWrapper:(0,o.default)({[`${ue}-affix-wrapper-sm`]:Qe==="small",[`${ue}-affix-wrapper-lg`]:Qe==="large",[`${ue}-affix-wrapper-rtl`]:re==="rtl"},Be),wrapper:(0,o.default)({[`${ue}-group-rtl`]:re==="rtl"},Be),groupWrapper:(0,o.default)({[`${ue}-group-wrapper-sm`]:Qe==="small",[`${ue}-group-wrapper-lg`]:Qe==="large",[`${ue}-group-wrapper-rtl`]:re==="rtl",[`${ue}-group-wrapper-${Pt}`]:gn},(0,u.getStatusClassNames)(`${ue}-group-wrapper`,Pe,et),Be)})}))))});t.default=I}(Ok)),Ok}var kk={},aV;function eMe(){return aV||(aV=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"initComponentToken",{enumerable:!0,get:function(){return n.initComponentToken}}),Object.defineProperty(t,"initInputToken",{enumerable:!0,get:function(){return n.initInputToken}});var e=Fl(),n=Fre();const r=o=>{const{componentCls:i,paddingLG:s}=o,a=`${i}-textarea`;return{[`textarea${i}`]:{maxWidth:"100%",height:"auto",minHeight:o.controlHeight,lineHeight:o.lineHeight,verticalAlign:"bottom",transition:`all ${o.motionDurationSlow}`,resize:"vertical",[`&${i}-mouse-active`]:{transition:`all ${o.motionDurationSlow}, height 0s, width 0s`}},[`${i}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[a]:{position:"relative","&-show-count":{[`${i}-data-count`]:{position:"absolute",bottom:o.calc(o.fontSize).mul(o.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:o.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${i},
        &-affix-wrapper${a}-has-feedback ${i}
      `]:{paddingInlineEnd:s},[`&-affix-wrapper${i}-affix-wrapper`]:{padding:0,[`> textarea${i}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:o.calc(o.controlHeight).sub(o.calc(o.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${i}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${i}-clear-icon`]:{position:"absolute",insetInlineEnd:o.paddingInline,insetBlockStart:o.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:o.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${i}-affix-wrapper-rtl`]:{[`${i}-suffix`]:{[`${i}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${i}-affix-wrapper-sm`]:{[`${i}-suffix`]:{[`${i}-clear-icon`]:{insetInlineEnd:o.paddingInlineSM}}}}}};t.default=(0,e.genStyleHooks)(["Input","TextArea"],o=>{const i=(0,e.mergeToken)(o,(0,n.initInputToken)(o));return[r(i)]},n.initComponentToken,{resetFont:!1})}(kk)),kk}var lV;function tMe(){if(lV)return L0;lV=1;var t=Lt().default,e=Ln().default;Object.defineProperty(L0,"__esModule",{value:!0}),L0.default=void 0;var n=e(Gt()),r=n,o=t(tl()),i=t(UTe),s=t(Dre()),a=jre(),l=Uv(),c=t(zT()),u=t(Lre()),d=t(_z()),f=qT(),h=t(Nre()),g=Iz(),y=JTe(),m=zre(),S=t(eMe()),x=function(E,P){var I={};for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&P.indexOf(T)<0&&(I[T]=E[T]);if(E!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,T=Object.getOwnPropertySymbols(E);M<T.length;M++)P.indexOf(T[M])<0&&Object.prototype.propertyIsEnumerable.call(E,T[M])&&(I[T[M]]=E[T[M]]);return I};const C=(0,n.forwardRef)((E,P)=>{var I;const{prefixCls:T,bordered:M=!0,size:R,disabled:A,status:j,allowClear:N,classNames:k,rootClassName:D,className:F,style:H,styles:U,variant:B,showCount:W,onMouseDown:K,onResize:q}=E,X=x(E,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:Z,direction:Y,allowClear:G,autoComplete:J,className:ne,style:ee,classNames:re,styles:le}=(0,l.useComponentConfig)("textArea"),ae=r.useContext(c.default),ie=A??ae,{status:ge,hasFeedback:ve,feedbackIcon:fe}=r.useContext(f.FormItemInputContext),ue=(0,a.getMergedStatus)(ge,j),Ce=r.useRef(null);r.useImperativeHandle(P,()=>{var Ae;return{resizableTextArea:(Ae=Ce.current)===null||Ae===void 0?void 0:Ae.resizableTextArea,focus:Ne=>{var xt,Pt;(0,y.triggerFocus)((Pt=(xt=Ce.current)===null||xt===void 0?void 0:xt.resizableTextArea)===null||Pt===void 0?void 0:Pt.textArea,Ne)},blur:()=>{var Ne;return(Ne=Ce.current)===null||Ne===void 0?void 0:Ne.blur()}}});const ye=Z("input",T),ke=(0,u.default)(ye),[Be,Ue,We]=(0,m.useSharedStyle)(ye,D),[Me]=(0,S.default)(ye,ke),{compactSize:$e,compactItemClassnames:Qe}=(0,g.useCompactItemContext)(ye,Y),nt=(0,d.default)(Ae=>{var Ne;return(Ne=R??$e)!==null&&Ne!==void 0?Ne:Ae}),[ht,ft]=(0,h.default)("textArea",B,M),et=(0,s.default)(N??G),[pe,Pe]=r.useState(!1),[je,Le]=r.useState(!1),qe=Ae=>{Pe(!0),K==null||K(Ae);const Ne=()=>{Pe(!1),document.removeEventListener("mouseup",Ne)};document.addEventListener("mouseup",Ne)},at=Ae=>{var Ne,xt;if(q==null||q(Ae),pe&&typeof getComputedStyle=="function"){const Pt=(xt=(Ne=Ce.current)===null||Ne===void 0?void 0:Ne.nativeElement)===null||xt===void 0?void 0:xt.querySelector("textarea");Pt&&getComputedStyle(Pt).resize==="both"&&Le(!0)}};return Be(Me(r.createElement(i.default,Object.assign({autoComplete:J},X,{style:Object.assign(Object.assign({},ee),H),styles:Object.assign(Object.assign({},le),U),disabled:ie,allowClear:et,className:(0,o.default)(We,ke,F,D,Qe,ne,je&&`${ye}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},k),re),{textarea:(0,o.default)({[`${ye}-sm`]:nt==="small",[`${ye}-lg`]:nt==="large"},Ue,k==null?void 0:k.textarea,re.textarea,pe&&`${ye}-mouse-active`),variant:(0,o.default)({[`${ye}-${ht}`]:ft},(0,a.getStatusClassNames)(ye,ue)),affixWrapper:(0,o.default)(`${ye}-textarea-affix-wrapper`,{[`${ye}-affix-wrapper-rtl`]:Y==="rtl",[`${ye}-affix-wrapper-sm`]:nt==="small",[`${ye}-affix-wrapper-lg`]:nt==="large",[`${ye}-textarea-show-count`]:W||((I=E.count)===null||I===void 0?void 0:I.show)},Ue)}),prefixCls:ye,suffix:ve&&r.createElement("span",{className:`${ye}-textarea-suffix`},fe),showCount:W,ref:Ce,onResize:at,onMouseDown:qe}))))});return L0.default=C,L0}var Zh={},$s={},cV;function nMe(){if(cV)return $s;cV=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.getTitleStyles=$s.getResetStyles=$s.getLinkStyles=$s.getEllipsisStyles=$s.getEditableStyles=$s.getCopyableStyles=void 0;var t=Fv,e=Ss,n=Wv();const r=(u,d,f,h)=>{const{titleMarginBottom:g,fontWeightStrong:y}=h;return{marginBottom:g,color:f,fontWeight:y,fontSize:u,lineHeight:d}},o=u=>{const d=[1,2,3,4,5],f={};return d.forEach(h=>{f[`
      h${h}&,
      div&-h${h},
      div&-h${h} > textarea,
      h${h}
    `]=r(u[`fontSizeHeading${h}`],u[`lineHeightHeading${h}`],u.colorTextHeading,u)}),f};$s.getTitleStyles=o;const i=u=>{const{componentCls:d}=u;return{"a&, a":Object.assign(Object.assign({},(0,n.operationUnit)(u)),{userSelect:"text",[`&[disabled], &${d}-disabled`]:{color:u.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:u.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}};$s.getLinkStyles=i;const s=u=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:u.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:u.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:t.gold[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:u.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}});$s.getResetStyles=s;const a=u=>{const{componentCls:d,paddingSM:f}=u,h=f;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:u.calc(u.paddingSM).mul(-1).equal(),marginTop:u.calc(h).mul(-1).equal(),marginBottom:`calc(1em - ${(0,e.unit)(h)})`},[`${d}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:u.calc(u.marginXS).add(2).equal(),insetBlockEnd:u.marginXS,color:u.colorIcon,fontWeight:"normal",fontSize:u.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}};$s.getEditableStyles=a;const l=u=>({[`${u.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:u.colorSuccess}},[`${u.componentCls}-copy-icon-only`]:{marginInlineStart:0}});$s.getCopyableStyles=l;const c=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}});return $s.getEllipsisStyles=c,$s}var uV;function Bre(){if(uV)return Zh;uV=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.prepareComponentToken=Zh.default=void 0;var t=Wv(),e=Fl(),n=nMe();const r=i=>{const{componentCls:s,titleMarginTop:a}=i;return{[s]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:i.colorText,wordBreak:"break-word",lineHeight:i.lineHeight,[`&${s}-secondary`]:{color:i.colorTextDescription},[`&${s}-success`]:{color:i.colorSuccessText},[`&${s}-warning`]:{color:i.colorWarningText},[`&${s}-danger`]:{color:i.colorErrorText,"a&:active, a&:focus":{color:i.colorErrorTextActive},"a&:hover":{color:i.colorErrorTextHover}},[`&${s}-disabled`]:{color:i.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},(0,n.getTitleStyles)(i)),{[`
      & + h1${s},
      & + h2${s},
      & + h3${s},
      & + h4${s},
      & + h5${s}
      `]:{marginTop:a},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:a}}}),(0,n.getResetStyles)(i)),(0,n.getLinkStyles)(i)),{[`
        ${s}-expand,
        ${s}-collapse,
        ${s}-edit,
        ${s}-copy
      `]:Object.assign(Object.assign({},(0,t.operationUnit)(i)),{marginInlineStart:i.marginXXS})}),(0,n.getEditableStyles)(i)),(0,n.getCopyableStyles)(i)),(0,n.getEllipsisStyles)()),{"&-rtl":{direction:"rtl"}})}},o=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"});return Zh.prepareComponentToken=o,Zh.default=(0,e.genStyleHooks)("Typography",i=>[r(i)],o),Zh}var dV;function rMe(){if(dV)return $0;dV=1;var t=Lt().default,e=Ln().default;Object.defineProperty($0,"__esModule",{value:!0}),$0.default=void 0;var n=e(Gt()),r=t(MTe()),o=t(tl()),i=t(OTe()),s=Ire(),a=t(tMe()),l=t(Bre());const c=u=>{const{prefixCls:d,"aria-label":f,className:h,style:g,direction:y,maxLength:m,autoSize:S=!0,value:x,onSave:C,onCancel:E,onEnd:P,component:I,enterIcon:T=n.createElement(r.default,null)}=u,M=n.useRef(null),R=n.useRef(!1),A=n.useRef(null),[j,N]=n.useState(x);n.useEffect(()=>{N(x)},[x]),n.useEffect(()=>{var Y;if(!((Y=M.current)===null||Y===void 0)&&Y.resizableTextArea){const{textArea:G}=M.current.resizableTextArea;G.focus();const{length:J}=G.value;G.setSelectionRange(J,J)}},[]);const k=({target:Y})=>{N(Y.value.replace(/[\n\r]/g,""))},D=()=>{R.current=!0},F=()=>{R.current=!1},H=({keyCode:Y})=>{R.current||(A.current=Y)},U=()=>{C(j.trim())},B=({keyCode:Y,ctrlKey:G,altKey:J,metaKey:ne,shiftKey:ee})=>{A.current!==Y||R.current||G||J||ne||ee||(Y===i.default.ENTER?(U(),P==null||P()):Y===i.default.ESC&&E())},W=()=>{U()},[K,q,X]=(0,l.default)(d),Z=(0,o.default)(d,`${d}-edit-content`,{[`${d}-rtl`]:y==="rtl",[`${d}-${I}`]:!!I},h,q,X);return K(n.createElement("div",{className:Z,style:g},n.createElement(a.default,{ref:M,maxLength:m,value:j,onChange:k,onKeyDown:H,onKeyUp:B,onCompositionStart:D,onCompositionEnd:F,onBlur:W,"aria-label":f,rows:1,autoSize:S}),T!==null?(0,s.cloneElement)(T,{className:`${d}-edit-content-confirm`}):null))};return $0.default=c,$0}var H0={},Ak,fV;function oMe(){return fV||(fV=1,Ak=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(o){t.addRange(o)}),e&&e.focus()}}),Ak}var $k,hV;function Hre(){if(hV)return $k;hV=1;var t=oMe(),e={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(i){var s=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return i.replace(/#{\s*key\s*}/g,s)}function o(i,s){var a,l,c,u,d,f,h=!1;s||(s={}),a=s.debug||!1;try{c=t(),u=document.createRange(),d=document.getSelection(),f=document.createElement("span"),f.textContent=i,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(y){if(y.stopPropagation(),s.format)if(y.preventDefault(),typeof y.clipboardData>"u"){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var m=e[s.format]||e.default;window.clipboardData.setData(m,i)}else y.clipboardData.clearData(),y.clipboardData.setData(s.format,i);s.onCopy&&(y.preventDefault(),s.onCopy(y.clipboardData))}),document.body.appendChild(f),u.selectNodeContents(f),d.addRange(u);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");h=!0}catch(y){a&&console.error("unable to copy using execCommand: ",y),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(s.format||"text",i),s.onCopy&&s.onCopy(window.clipboardData),h=!0}catch(m){a&&console.error("unable to copy using clipboardData: ",m),a&&console.error("falling back to prompt"),l=r("message"in s?s.message:n),window.prompt(l,i)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),f&&document.body.removeChild(f),c()}return h}return $k=o,$k}var U0={},pV;function iMe(){if(pV)return U0;pV=1,Object.defineProperty(U0,"__esModule",{value:!0}),U0.default=void 0;const t=(e,n=!1)=>n&&e==null?[]:Array.isArray(e)?e:[e];return U0.default=t,U0}var gV;function sMe(){if(gV)return H0;gV=1;var t=Lt().default,e=Ln().default;Object.defineProperty(H0,"__esModule",{value:!0}),H0.default=void 0;var n=e(Gt()),r=t(Hre()),o=t(ane()),i=t(iMe()),s=function(l,c,u,d){function f(h){return h instanceof u?h:new u(function(g){g(h)})}return new(u||(u=Promise))(function(h,g){function y(x){try{S(d.next(x))}catch(C){g(C)}}function m(x){try{S(d.throw(x))}catch(C){g(C)}}function S(x){x.done?h(x.value):f(x.value).then(y,m)}S((d=d.apply(l,c||[])).next())})};const a=({copyConfig:l,children:c})=>{const[u,d]=n.useState(!1),[f,h]=n.useState(!1),g=n.useRef(null),y=()=>{g.current&&clearTimeout(g.current)},m={};l.format&&(m.format=l.format),n.useEffect(()=>y,[]);const S=(0,o.default)(x=>s(void 0,void 0,void 0,function*(){var C;x==null||x.preventDefault(),x==null||x.stopPropagation(),h(!0);try{const E=typeof l.text=="function"?yield l.text():l.text;(0,r.default)(E||(0,i.default)(c,!0).join("")||"",m),h(!1),d(!0),y(),g.current=setTimeout(()=>{d(!1)},3e3),(C=l.onCopy)===null||C===void 0||C.call(l,x)}catch(E){throw h(!1),E}}));return{copied:u,copyLoading:f,onClick:S}};return H0.default=a,H0}var TC={},mV;function aMe(){if(mV)return TC;mV=1;var t=Ln().default;Object.defineProperty(TC,"__esModule",{value:!0}),TC.default=n;var e=t(Gt());function n(r,o){return e.useMemo(()=>{const i=!!r;return[i,Object.assign(Object.assign({},o),i&&typeof r=="object"?r:null)]},[r])}return TC}var W0={},vV;function lMe(){if(vV)return W0;vV=1,Object.defineProperty(W0,"__esModule",{value:!0}),W0.default=void 0;var t=Gt();const e=n=>{const r=(0,t.useRef)(void 0);return(0,t.useEffect)(()=>{r.current=n}),r.current};return W0.default=e,W0}var V0={},yV;function cMe(){if(yV)return V0;yV=1,Object.defineProperty(V0,"__esModule",{value:!0}),V0.default=void 0;var t=Gt();const e=(n,r,o)=>(0,t.useMemo)(()=>n===!0?{title:r??o}:(0,t.isValidElement)(n)?{title:n}:typeof n=="object"?Object.assign({title:r??o},n):{title:n},[n,r,o]);return V0.default=e,V0}var q0={},bV;function uMe(){if(bV)return q0;bV=1;var t=Lt().default,e=Ln().default;Object.defineProperty(q0,"__esModule",{value:!0}),q0.default=void 0;var n=e(Gt()),r=t(tl()),o=nz(),i=Uv(),s=t(Bre()),a=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]]);return d};const l=n.forwardRef((c,u)=>{const{prefixCls:d,component:f="article",className:h,rootClassName:g,setContentRef:y,children:m,direction:S,style:x}=c,C=a(c,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:E,direction:P,className:I,style:T}=(0,i.useComponentConfig)("typography"),M=S??P,R=y?(0,o.composeRef)(u,y):u,A=E("typography",d),[j,N,k]=(0,s.default)(A),D=(0,r.default)(A,I,{[`${A}-rtl`]:M==="rtl"},h,g,N,k),F=Object.assign(Object.assign({},T),x);return j(n.createElement(f,Object.assign({className:D,style:F,ref:R},C),m))});return q0.default=l,q0}var K0={},MC={exports:{}},G0={},OC={},SV;function dMe(){if(SV)return OC;SV=1,Object.defineProperty(OC,"__esModule",{value:!0});var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};return OC.default=t,OC}var xV;function fMe(){if(xV)return G0;xV=1;var t=Ln().default,e=Lt().default;Object.defineProperty(G0,"__esModule",{value:!0}),G0.default=void 0;var n=e(fg()),r=t(Gt()),o=e(dMe()),i=e(zv()),s=function(c,u){return r.createElement(i.default,(0,n.default)({},c,{ref:u,icon:o.default}))},a=r.forwardRef(s);return G0.default=a,G0}var wV;function hMe(){return wV||(wV=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(fMe());function r(i){return i&&i.__esModule?i:{default:i}}const o=n;e.default=o,t.exports=o}(MC,MC.exports)),MC.exports}var RC={exports:{}},X0={},kC={},CV;function pMe(){if(CV)return kC;CV=1,Object.defineProperty(kC,"__esModule",{value:!0});var t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"};return kC.default=t,kC}var EV;function gMe(){if(EV)return X0;EV=1;var t=Ln().default,e=Lt().default;Object.defineProperty(X0,"__esModule",{value:!0}),X0.default=void 0;var n=e(fg()),r=t(Gt()),o=e(pMe()),i=e(zv()),s=function(c,u){return r.createElement(i.default,(0,n.default)({},c,{ref:u,icon:o.default}))},a=r.forwardRef(s);return X0.default=a,X0}var PV;function mMe(){return PV||(PV=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(gMe());function r(i){return i&&i.__esModule?i:{default:i}}const o=n;e.default=o,t.exports=o}(RC,RC.exports)),RC.exports}var AC={exports:{}},Y0={},$C={},_V;function vMe(){if(_V)return $C;_V=1,Object.defineProperty($C,"__esModule",{value:!0});var t={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};return $C.default=t,$C}var IV;function yMe(){if(IV)return Y0;IV=1;var t=Ln().default,e=Lt().default;Object.defineProperty(Y0,"__esModule",{value:!0}),Y0.default=void 0;var n=e(fg()),r=t(Gt()),o=e(vMe()),i=e(zv()),s=function(c,u){return r.createElement(i.default,(0,n.default)({},c,{ref:u,icon:o.default}))},a=r.forwardRef(s);return Y0.default=a,Y0}var TV;function bMe(){return TV||(TV=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=r(yMe());function r(i){return i&&i.__esModule?i:{default:i}}const o=n;e.default=o,t.exports=o}(AC,AC.exports)),AC.exports}var uf={},MV;function Oz(){if(MV)return uf;MV=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.getNode=e,uf.isEleEllipsis=n,uf.isValidText=void 0,uf.toList=t;function t(o){return o===!1?[!1,!1]:Array.isArray(o)?o:[o]}function e(o,i,s){return o===!0||o===void 0?i:o||s&&i}function n(o){const i=document.createElement("em");o.appendChild(i);const s=o.getBoundingClientRect(),a=i.getBoundingClientRect();return o.removeChild(i),s.left>a.left||a.right>s.right||s.top>a.top||a.bottom>s.bottom}const r=o=>["string","number"].includes(typeof o);return uf.isValidText=r,uf}var OV;function SMe(){if(OV)return K0;OV=1;var t=Lt().default,e=Ln().default;Object.defineProperty(K0,"__esModule",{value:!0}),K0.default=void 0;var n=e(Gt()),r=t(hMe()),o=t(mMe()),i=t(bMe()),s=t(tl()),a=t(Tz()),l=Oz();const c=({prefixCls:u,copied:d,locale:f,iconOnly:h,tooltips:g,icon:y,tabIndex:m,onCopy:S,loading:x})=>{const C=(0,l.toList)(g),E=(0,l.toList)(y),{copied:P,copy:I}=f??{},T=d?P:I,M=(0,l.getNode)(C[d?1:0],T),R=typeof M=="string"?M:T;return n.createElement(a.default,{title:M},n.createElement("button",{type:"button",className:(0,s.default)(`${u}-copy`,{[`${u}-copy-success`]:d,[`${u}-copy-icon-only`]:h}),onClick:S,"aria-label":R,tabIndex:m},d?(0,l.getNode)(E[1],n.createElement(r.default,null),!0):(0,l.getNode)(E[0],x?n.createElement(i.default,null):n.createElement(o.default,null),!0)))};return K0.default=c,K0}var DC={},RV;function xMe(){if(RV)return DC;RV=1;var t=Ln().default,e=Lt().default;Object.defineProperty(DC,"__esModule",{value:!0}),DC.default=m;var n=e(AT()),r=t(Gt()),o=e(J3()),i=e(ez()),s=Oz();const a=r.forwardRef(({style:S,children:x},C)=>{const E=r.useRef(null);return r.useImperativeHandle(C,()=>({isExceed:()=>{const P=E.current;return P.scrollHeight>P.clientHeight},getHeight:()=>E.current.clientHeight})),r.createElement("span",{"aria-hidden":!0,ref:E,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},S)},x)}),l=S=>S.reduce((x,C)=>x+((0,s.isValidText)(C)?String(C).length:1),0);function c(S,x){let C=0;const E=[];for(let P=0;P<S.length;P+=1){if(C===x)return E;const I=S[P],M=(0,s.isValidText)(I)?String(I).length:1,R=C+M;if(R>x){const A=x-C;return E.push(String(I).slice(0,A)),E}E.push(I),C=R}return S}const u=0,d=1,f=2,h=3,g=4,y={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function m(S){const{enableMeasure:x,width:C,text:E,children:P,rows:I,expanded:T,miscDeps:M,onEllipsis:R}=S,A=r.useMemo(()=>(0,o.default)(E),[E]),j=r.useMemo(()=>l(A),[E]),N=r.useMemo(()=>P(A,!1),[E]),[k,D]=r.useState(null),F=r.useRef(null),H=r.useRef(null),U=r.useRef(null),B=r.useRef(null),W=r.useRef(null),[K,q]=r.useState(!1),[X,Z]=r.useState(u),[Y,G]=r.useState(0),[J,ne]=r.useState(null);(0,i.default)(()=>{Z(x&&C&&j?d:u)},[C,E,I,x,A]),(0,i.default)(()=>{var ae,ie,ge,ve;if(X===d){Z(f);const fe=H.current&&getComputedStyle(H.current).whiteSpace;ne(fe)}else if(X===f){const fe=!!(!((ae=U.current)===null||ae===void 0)&&ae.isExceed());Z(fe?h:g),D(fe?[0,j]:null),q(fe);const ue=((ie=U.current)===null||ie===void 0?void 0:ie.getHeight())||0,Ce=I===1?0:((ge=B.current)===null||ge===void 0?void 0:ge.getHeight())||0,ye=((ve=W.current)===null||ve===void 0?void 0:ve.getHeight())||0,ke=Math.max(ue,Ce+ye);G(ke+1),R(fe)}},[X]);const ee=k?Math.ceil((k[0]+k[1])/2):0;(0,i.default)(()=>{var ae;const[ie,ge]=k||[0,0];if(ie!==ge){const fe=(((ae=F.current)===null||ae===void 0?void 0:ae.getHeight())||0)>Y;let ue=ee;ge-ie===1&&(ue=fe?ie:ge),D(fe?[ie,ue]:[ue,ge])}},[k,ee]);const re=r.useMemo(()=>{if(!x)return P(A,!1);if(X!==h||!k||k[0]!==k[1]){const ae=P(A,!1);return[g,u].includes(X)?ae:r.createElement("span",{style:Object.assign(Object.assign({},y),{WebkitLineClamp:I})},ae)}return P(T?A:c(A,k[0]),K)},[T,X,k,A].concat((0,n.default)(M))),le={width:C,margin:0,padding:0,whiteSpace:J==="nowrap"?"normal":"inherit"};return r.createElement(r.Fragment,null,re,X===f&&r.createElement(r.Fragment,null,r.createElement(a,{style:Object.assign(Object.assign(Object.assign({},le),y),{WebkitLineClamp:I}),ref:U},N),r.createElement(a,{style:Object.assign(Object.assign(Object.assign({},le),y),{WebkitLineClamp:I-1}),ref:B},N),r.createElement(a,{style:Object.assign(Object.assign(Object.assign({},le),y),{WebkitLineClamp:1}),ref:W},P([],!0))),X===h&&k&&k[0]!==k[1]&&r.createElement(a,{style:Object.assign(Object.assign({},le),{top:400}),ref:F},P(c(A,ee),!0)),X===d&&r.createElement("span",{style:{whiteSpace:"inherit"},ref:H}))}return DC}var Q0={},kV;function wMe(){if(kV)return Q0;kV=1;var t=Lt().default,e=Ln().default;Object.defineProperty(Q0,"__esModule",{value:!0}),Q0.default=void 0;var n=e(Gt()),r=t(Tz());const o=({enableEllipsis:i,isEllipsis:s,children:a,tooltipProps:l})=>!(l!=null&&l.title)||!i?a:n.createElement(r.default,Object.assign({open:s?void 0:!1},l),a);return Q0.default=o,Q0}var AV;function Ure(){if(AV)return Hy;AV=1;var t=Ln().default,e=Lt().default;Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.default=void 0;var n=e(AT()),r=t(Gt()),o=e(hCe()),i=e(tl()),s=e(JCe),a=e(J3()),l=e(ez()),c=e(lne()),u=e(cne()),d=nz(),f=nEe(),h=Kx(),g=e(zne()),y=e(Tz()),m=e(rMe()),S=e(sMe()),x=e(aMe()),C=e(lMe()),E=e(cMe()),P=e(uMe()),I=e(SMe()),T=e(xMe()),M=e(wMe()),R=Oz(),A=function(F,H){var U={};for(var B in F)Object.prototype.hasOwnProperty.call(F,B)&&H.indexOf(B)<0&&(U[B]=F[B]);if(F!=null&&typeof Object.getOwnPropertySymbols=="function")for(var W=0,B=Object.getOwnPropertySymbols(F);W<B.length;W++)H.indexOf(B[W])<0&&Object.prototype.propertyIsEnumerable.call(F,B[W])&&(U[B[W]]=F[B[W]]);return U};function j({mark:F,code:H,underline:U,delete:B,strong:W,keyboard:K,italic:q},X){let Z=X;function Y(G,J){J&&(Z=r.createElement(G,{},Z))}return Y("strong",W),Y("u",U),Y("del",B),Y("code",H),Y("mark",F),Y("kbd",K),Y("i",q),Z}const N="...",k=["delete","mark","code","underline","strong","keyboard","italic"],D=r.forwardRef((F,H)=>{var U;const{prefixCls:B,className:W,style:K,type:q,disabled:X,children:Z,ellipsis:Y,editable:G,copyable:J,component:ne,title:ee}=F,re=A(F,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:le,direction:ae}=r.useContext(h.ConfigContext),[ie]=(0,g.default)("Text"),ge=r.useRef(null),ve=r.useRef(null),fe=le("typography",B),ue=(0,u.default)(re,k),[Ce,ye]=(0,x.default)(G),[ke,Be]=(0,c.default)(!1,{value:ye.editing}),{triggerType:Ue=["icon"]}=ye,We=gt=>{var De;gt&&((De=ye.onStart)===null||De===void 0||De.call(ye)),Be(gt)},Me=(0,C.default)(ke);(0,l.default)(()=>{var gt;!ke&&Me&&((gt=ve.current)===null||gt===void 0||gt.focus())},[ke]);const $e=gt=>{gt==null||gt.preventDefault(),We(!0)},Qe=gt=>{var De;(De=ye.onChange)===null||De===void 0||De.call(ye,gt),We(!1)},nt=()=>{var gt;(gt=ye.onCancel)===null||gt===void 0||gt.call(ye),We(!1)},[ht,ft]=(0,x.default)(J),{copied:et,copyLoading:pe,onClick:Pe}=(0,S.default)({copyConfig:ft,children:Z}),[je,Le]=r.useState(!1),[qe,at]=r.useState(!1),[Ae,Ne]=r.useState(!1),[xt,Pt]=r.useState(!1),[gn,Xt]=r.useState(!0),[sn,Zt]=(0,x.default)(Y,{expandable:!1,symbol:gt=>gt?ie==null?void 0:ie.collapse:ie==null?void 0:ie.expand}),[Vt,an]=(0,c.default)(Zt.defaultExpanded||!1,{value:Zt.expanded}),wt=sn&&(!Vt||Zt.expandable==="collapsible"),{rows:bt=1}=Zt,ot=r.useMemo(()=>wt&&(Zt.suffix!==void 0||Zt.onEllipsis||Zt.expandable||Ce||ht),[wt,Zt,Ce,ht]);(0,l.default)(()=>{sn&&!ot&&(Le((0,f.isStyleSupport)("webkitLineClamp")),at((0,f.isStyleSupport)("textOverflow")))},[ot,sn]);const[Xe,qt]=r.useState(wt),Tt=r.useMemo(()=>ot?!1:bt===1?qe:je,[ot,qe,je]);(0,l.default)(()=>{qt(Tt&&wt)},[Tt,wt]);const Fe=wt&&(Xe?xt:Ae),Ge=wt&&bt===1&&Xe,ut=wt&&bt>1&&Xe,St=(gt,De)=>{var pt;an(De.expanded),(pt=Zt.onExpand)===null||pt===void 0||pt.call(Zt,gt,De)},[lt,kt]=r.useState(0),_n=({offsetWidth:gt})=>{kt(gt)},bn=gt=>{var De;Ne(gt),Ae!==gt&&((De=Zt.onEllipsis)===null||De===void 0||De.call(Zt,gt))};r.useEffect(()=>{const gt=ge.current;if(sn&&Xe&&gt){const De=(0,R.isEleEllipsis)(gt);xt!==De&&Pt(De)}},[sn,Xe,Z,ut,gn,lt]),r.useEffect(()=>{const gt=ge.current;if(typeof IntersectionObserver>"u"||!gt||!Xe||!wt)return;const De=new IntersectionObserver(()=>{Xt(!!gt.offsetParent)});return De.observe(gt),()=>{De.disconnect()}},[Xe,wt]);const ln=(0,E.default)(Zt.tooltip,ye.text,Z),en=r.useMemo(()=>{if(!(!sn||Xe))return[ye.text,Z,ee,ln.title].find(R.isValidText)},[sn,Xe,ee,ln.title,Fe]);if(ke)return r.createElement(m.default,{value:(U=ye.text)!==null&&U!==void 0?U:typeof Z=="string"?Z:"",onSave:Qe,onCancel:nt,onEnd:ye.onEnd,prefixCls:fe,className:W,style:K,direction:ae,component:ne,maxLength:ye.maxLength,autoSize:ye.autoSize,enterIcon:ye.enterIcon});const wn=()=>{const{expandable:gt,symbol:De}=Zt;return gt?r.createElement("button",{type:"button",key:"expand",className:`${fe}-${Vt?"collapse":"expand"}`,onClick:pt=>St(pt,{expanded:!Vt}),"aria-label":Vt?ie.collapse:ie==null?void 0:ie.expand},typeof De=="function"?De(Vt):De):null},nr=()=>{if(!Ce)return;const{icon:gt,tooltip:De,tabIndex:pt}=ye,yt=(0,a.default)(De)[0]||(ie==null?void 0:ie.edit),ze=typeof yt=="string"?yt:"";return Ue.includes("icon")?r.createElement(y.default,{key:"edit",title:De===!1?"":yt},r.createElement("button",{type:"button",ref:ve,className:`${fe}-edit`,onClick:$e,"aria-label":ze,tabIndex:pt},gt||r.createElement(o.default,{role:"button"}))):null},rr=()=>ht?r.createElement(I.default,Object.assign({key:"copy"},ft,{prefixCls:fe,copied:et,locale:ie,onCopy:Pe,loading:pe,iconOnly:Z==null})):null,ur=gt=>[gt&&wn(),nr(),rr()],Nn=gt=>[gt&&!Vt&&r.createElement("span",{"aria-hidden":!0,key:"ellipsis"},N),Zt.suffix,ur(gt)];return r.createElement(s.default,{onResize:_n,disabled:!wt},gt=>r.createElement(M.default,{tooltipProps:ln,enableEllipsis:wt,isEllipsis:Fe},r.createElement(P.default,Object.assign({className:(0,i.default)({[`${fe}-${q}`]:q,[`${fe}-disabled`]:X,[`${fe}-ellipsis`]:sn,[`${fe}-ellipsis-single-line`]:Ge,[`${fe}-ellipsis-multiple-line`]:ut},W),prefixCls:B,style:Object.assign(Object.assign({},K),{WebkitLineClamp:ut?bt:void 0}),component:ne,ref:(0,d.composeRef)(gt,ge,H),direction:ae,onClick:Ue.includes("text")?$e:void 0,"aria-label":en==null?void 0:en.toString(),title:ee},ue),r.createElement(T.default,{enableMeasure:wt&&!Xe,text:Z,rows:bt,width:lt,onEllipsis:bn,expanded:Vt,miscDeps:[et,Vt,pe,Ce,ht,ie].concat((0,n.default)(k.map(De=>F[De])))},(De,pt)=>j(F,r.createElement(r.Fragment,null,De.length>0&&pt&&!Vt&&en?r.createElement("span",{key:"show-content","aria-hidden":!0},De):De,Nn(pt)))))))});return Hy.default=D,Hy}var $V;function CMe(){if($V)return By;$V=1;var t=Lt().default,e=Ln().default;Object.defineProperty(By,"__esModule",{value:!0}),By.default=void 0;var n=e(Gt()),r=t(Ure()),o=function(a,l){var c={};for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&l.indexOf(u)<0&&(c[u]=a[u]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,u=Object.getOwnPropertySymbols(a);d<u.length;d++)l.indexOf(u[d])<0&&Object.prototype.propertyIsEnumerable.call(a,u[d])&&(c[u[d]]=a[u[d]]);return c};const i=[1,2,3,4,5],s=n.forwardRef((a,l)=>{const{level:c=1}=a,u=o(a,["level"]),d=i.includes(c)?`h${c}`:"h1";return n.createElement(r.default,Object.assign({ref:l},u,{component:d}))});return By.default=s,By}var EMe=CMe();const Rz=jc(EMe);var Z0={},DV;function PMe(){if(DV)return Z0;DV=1;var t=Lt().default,e=Ln().default;Object.defineProperty(Z0,"__esModule",{value:!0}),Z0.default=void 0;var n=e(Gt()),r=t(Ure());const o=n.forwardRef((i,s)=>n.createElement(r.default,Object.assign({ref:s},i,{component:"div"})));return Z0.default=o,Z0}var _Me=PMe();const aN=jc(_Me);var kz=v.createContext({});function IMe(){}const TMe=v.createContext({}),Yx=()=>{const t=()=>{};return t.deprecated=IMe,t},Wre=v.createContext(void 0);var Vre={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},MMe={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},OMe=de(de({},MMe),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const qre={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},jV={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},OMe),timePickerLocale:Object.assign({},qre)},ka="${label} is not a valid ${type}",jp={locale:"en",Pagination:Vre,DatePicker:jV,TimePicker:qre,Calendar:jV,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ka,method:ka,array:ka,object:ka,number:ka,date:ka,boolean:ka,integer:ka,float:ka,regexp:ka,email:ka,url:ka,hex:ka},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};Object.assign({},jp.Modal);let nP=[];const LV=()=>nP.reduce((t,e)=>Object.assign(Object.assign({},t),e),jp.Modal);function RMe(t){if(t){const e=Object.assign({},t);return nP.push(e),LV(),()=>{nP=nP.filter(n=>n!==e),LV()}}Object.assign({},jp.Modal)}const Az=v.createContext(void 0),Vv=(t,e)=>{const n=v.useContext(Az),r=v.useMemo(()=>{var i;const s=e||jp[t],a=(i=n==null?void 0:n[t])!==null&&i!==void 0?i:{};return Object.assign(Object.assign({},typeof s=="function"?s():s),a||{})},[t,e,n]),o=v.useMemo(()=>{const i=n==null?void 0:n.locale;return n!=null&&n.exist&&!i?jp.locale:i},[n]);return[r,o]},kMe="internalMark",AMe=t=>{const{locale:e={},children:n,_ANT_MARK__:r}=t;v.useEffect(()=>RMe(e==null?void 0:e.Modal),[e]);const o=v.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return v.createElement(Az.Provider,{value:o},n)},Kre={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},KS=Object.assign(Object.assign({},Kre),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function $Me(t,{generateColorPalettes:e,generateNeutralColorPalettes:n}){const{colorSuccess:r,colorWarning:o,colorError:i,colorInfo:s,colorPrimary:a,colorBgBase:l,colorTextBase:c}=t,u=e(a),d=e(r),f=e(o),h=e(i),g=e(s),y=n(l,c),m=t.colorLink||t.colorInfo,S=e(m),x=new Xr(h[1]).mix(new Xr(h[3]),50).toHexString();return Object.assign(Object.assign({},y),{colorPrimaryBg:u[1],colorPrimaryBgHover:u[2],colorPrimaryBorder:u[3],colorPrimaryBorderHover:u[4],colorPrimaryHover:u[5],colorPrimary:u[6],colorPrimaryActive:u[7],colorPrimaryTextHover:u[8],colorPrimaryText:u[9],colorPrimaryTextActive:u[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:h[1],colorErrorBgHover:h[2],colorErrorBgFilledHover:x,colorErrorBgActive:h[3],colorErrorBorder:h[3],colorErrorBorderHover:h[4],colorErrorHover:h[5],colorError:h[6],colorErrorActive:h[7],colorErrorTextHover:h[8],colorErrorText:h[9],colorErrorTextActive:h[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:g[1],colorInfoBgHover:g[2],colorInfoBorder:g[3],colorInfoBorderHover:g[4],colorInfoHover:g[4],colorInfo:g[6],colorInfoActive:g[7],colorInfoTextHover:g[8],colorInfoText:g[9],colorInfoTextActive:g[10],colorLinkHover:S[4],colorLink:S[6],colorLinkActive:S[7],colorBgMask:new Xr("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const DMe=t=>{let e=t,n=t,r=t,o=t;return t<6&&t>=5?e=t+1:t<16&&t>=6?e=t+2:t>=16&&(e=16),t<7&&t>=5?n=4:t<8&&t>=7?n=5:t<14&&t>=8?n=6:t<16&&t>=14?n=7:t>=16&&(n=8),t<6&&t>=2?r=1:t>=6&&(r=2),t>4&&t<8?o=4:t>=8&&(o=6),{borderRadius:t,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:e,borderRadiusOuter:o}};function jMe(t){const{motionUnit:e,motionBase:n,borderRadius:r,lineWidth:o}=t;return Object.assign({motionDurationFast:`${(n+e).toFixed(1)}s`,motionDurationMid:`${(n+e*2).toFixed(1)}s`,motionDurationSlow:`${(n+e*3).toFixed(1)}s`,lineWidthBold:o+1},DMe(r))}const LMe=t=>{const{controlHeight:e}=t;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function rP(t){return(t+8)/t}function NMe(t){const e=Array.from({length:10}).map((n,r)=>{const o=r-1,i=t*Math.pow(Math.E,o/5),s=r>1?Math.floor(i):Math.ceil(i);return Math.floor(s/2)*2});return e[1]=t,e.map(n=>({size:n,lineHeight:rP(n)}))}const FMe=t=>{const e=NMe(t),n=e.map(u=>u.size),r=e.map(u=>u.lineHeight),o=n[1],i=n[0],s=n[2],a=r[1],l=r[0],c=r[2];return{fontSizeSM:i,fontSize:o,fontSizeLG:s,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:a,lineHeightLG:c,lineHeightSM:l,fontHeight:Math.round(a*o),fontHeightLG:Math.round(c*s),fontHeightSM:Math.round(l*i),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function zMe(t){const{sizeUnit:e,sizeStep:n}=t;return{sizeXXL:e*(n+8),sizeXL:e*(n+4),sizeLG:e*(n+2),sizeMD:e*(n+1),sizeMS:e*n,size:e*n,sizeSM:e*(n-1),sizeXS:e*(n-2),sizeXXS:e*(n-3)}}const gl=(t,e)=>new Xr(t).setA(e).toRgbString(),J0=(t,e)=>new Xr(t).darken(e).toHexString(),BMe=t=>{const e=ov(t);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},HMe=(t,e)=>{const n=t||"#fff",r=e||"#000";return{colorBgBase:n,colorTextBase:r,colorText:gl(r,.88),colorTextSecondary:gl(r,.65),colorTextTertiary:gl(r,.45),colorTextQuaternary:gl(r,.25),colorFill:gl(r,.15),colorFillSecondary:gl(r,.06),colorFillTertiary:gl(r,.04),colorFillQuaternary:gl(r,.02),colorBgSolid:gl(r,1),colorBgSolidHover:gl(r,.75),colorBgSolidActive:gl(r,.95),colorBgLayout:J0(n,4),colorBgContainer:J0(n,0),colorBgElevated:J0(n,0),colorBgSpotlight:gl(r,.85),colorBgBlur:"transparent",colorBorder:J0(n,15),colorBorderSecondary:J0(n,6)}};function UMe(t){XE.pink=XE.magenta,YE.pink=YE.magenta;const e=Object.keys(Kre).map(n=>{const r=t[n]===XE[n]?YE[n]:ov(t[n]);return Array.from({length:10},()=>1).reduce((o,i,s)=>(o[`${n}-${s+1}`]=r[s],o[`${n}${s+1}`]=r[s],o),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t),e),$Me(t,{generateColorPalettes:BMe,generateNeutralColorPalettes:HMe})),FMe(t.fontSize)),zMe(t)),LMe(t)),jMe(t))}const Gre=P_(UMe),lN={token:KS,override:{override:KS},hashed:!0},Xre=ce.createContext(lN),GS="ant",GT="anticon",WMe=["outlined","borderless","filled","underlined"],VMe=(t,e)=>e||(t?`${GS}-${t}`:GS),tr=v.createContext({getPrefixCls:VMe,iconPrefixCls:GT}),{Consumer:u0t}=tr,NV={};function Bl(t){const e=v.useContext(tr),{getPrefixCls:n,direction:r,getPopupContainer:o}=e,i=e[t];return Object.assign(Object.assign({classNames:NV,styles:NV},i),{getPrefixCls:n,direction:r,getPopupContainer:o})}const qMe=`-ant-${Date.now()}-${Math.random()}`;function KMe(t,e){const n={},r=(s,a)=>{let l=s.clone();return l=(a==null?void 0:a(l))||l,l.toRgbString()},o=(s,a)=>{const l=new Xr(s),c=ov(l.toRgbString());n[`${a}-color`]=r(l),n[`${a}-color-disabled`]=c[1],n[`${a}-color-hover`]=c[4],n[`${a}-color-active`]=c[6],n[`${a}-color-outline`]=l.clone().setA(.2).toRgbString(),n[`${a}-color-deprecated-bg`]=c[0],n[`${a}-color-deprecated-border`]=c[2]};if(e.primaryColor){o(e.primaryColor,"primary");const s=new Xr(e.primaryColor),a=ov(s.toRgbString());a.forEach((c,u)=>{n[`primary-${u+1}`]=c}),n["primary-color-deprecated-l-35"]=r(s,c=>c.lighten(35)),n["primary-color-deprecated-l-20"]=r(s,c=>c.lighten(20)),n["primary-color-deprecated-t-20"]=r(s,c=>c.tint(20)),n["primary-color-deprecated-t-50"]=r(s,c=>c.tint(50)),n["primary-color-deprecated-f-12"]=r(s,c=>c.setA(c.a*.12));const l=new Xr(a[0]);n["primary-color-active-deprecated-f-30"]=r(l,c=>c.setA(c.a*.3)),n["primary-color-active-deprecated-d-02"]=r(l,c=>c.darken(2))}return e.successColor&&o(e.successColor,"success"),e.warningColor&&o(e.warningColor,"warning"),e.errorColor&&o(e.errorColor,"error"),e.infoColor&&o(e.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(s=>`--${t}-${s}: ${n[s]};`).join(`
`)}
  }
  `.trim()}function GMe(t,e){const n=KMe(t,e);vs()&&hu(n,`${qMe}-dynamic-theme`)}const Pd=v.createContext(!1),Yre=({children:t,disabled:e})=>{const n=v.useContext(Pd);return v.createElement(Pd.Provider,{value:e??n},t)},Lp=v.createContext(void 0),XMe=({children:t,size:e})=>{const n=v.useContext(Lp);return v.createElement(Lp.Provider,{value:e||n},t)};function YMe(){const t=v.useContext(Pd),e=v.useContext(Lp);return{componentDisabled:t,componentSize:e}}const Np=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],QMe="5.25.4";function Dk(t){return t>=0&&t<=255}function Mb(t,e){const{r:n,g:r,b:o,a:i}=new Xr(t).toRgb();if(i<1)return t;const{r:s,g:a,b:l}=new Xr(e).toRgb();for(let c=.01;c<=1;c+=.01){const u=Math.round((n-s*(1-c))/c),d=Math.round((r-a*(1-c))/c),f=Math.round((o-l*(1-c))/c);if(Dk(u)&&Dk(d)&&Dk(f))return new Xr({r:u,g:d,b:f,a:Math.round(c*100)/100}).toRgbString()}return new Xr({r:n,g:r,b:o,a:1}).toRgbString()}var ZMe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Qre(t){const{override:e}=t,n=ZMe(t,["override"]),r=Object.assign({},e);Object.keys(KS).forEach(f=>{delete r[f]});const o=Object.assign(Object.assign({},n),r),i=480,s=576,a=768,l=992,c=1200,u=1600;if(o.motion===!1){const f="0s";o.motionDurationFast=f,o.motionDurationMid=f,o.motionDurationSlow=f}return Object.assign(Object.assign(Object.assign({},o),{colorFillContent:o.colorFillSecondary,colorFillContentHover:o.colorFill,colorFillAlter:o.colorFillQuaternary,colorBgContainerDisabled:o.colorFillTertiary,colorBorderBg:o.colorBgContainer,colorSplit:Mb(o.colorBorderSecondary,o.colorBgContainer),colorTextPlaceholder:o.colorTextQuaternary,colorTextDisabled:o.colorTextQuaternary,colorTextHeading:o.colorText,colorTextLabel:o.colorTextSecondary,colorTextDescription:o.colorTextTertiary,colorTextLightSolid:o.colorWhite,colorHighlight:o.colorError,colorBgTextHover:o.colorFillSecondary,colorBgTextActive:o.colorFill,colorIcon:o.colorTextTertiary,colorIconHover:o.colorText,colorErrorOutline:Mb(o.colorErrorBg,o.colorBgContainer),colorWarningOutline:Mb(o.colorWarningBg,o.colorBgContainer),fontSizeIcon:o.fontSizeSM,lineWidthFocus:o.lineWidth*3,lineWidth:o.lineWidth,controlOutlineWidth:o.lineWidth*2,controlInteractiveSize:o.controlHeight/2,controlItemBgHover:o.colorFillTertiary,controlItemBgActive:o.colorPrimaryBg,controlItemBgActiveHover:o.colorPrimaryBgHover,controlItemBgActiveDisabled:o.colorFill,controlTmpOutline:o.colorFillQuaternary,controlOutline:Mb(o.colorPrimaryBg,o.colorBgContainer),lineType:o.lineType,borderRadius:o.borderRadius,borderRadiusXS:o.borderRadiusXS,borderRadiusSM:o.borderRadiusSM,borderRadiusLG:o.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:o.sizeXXS,paddingXS:o.sizeXS,paddingSM:o.sizeSM,padding:o.size,paddingMD:o.sizeMD,paddingLG:o.sizeLG,paddingXL:o.sizeXL,paddingContentHorizontalLG:o.sizeLG,paddingContentVerticalLG:o.sizeMS,paddingContentHorizontal:o.sizeMS,paddingContentVertical:o.sizeSM,paddingContentHorizontalSM:o.size,paddingContentVerticalSM:o.sizeXS,marginXXS:o.sizeXXS,marginXS:o.sizeXS,marginSM:o.sizeSM,margin:o.size,marginMD:o.sizeMD,marginLG:o.sizeLG,marginXL:o.sizeXL,marginXXL:o.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:i,screenXSMin:i,screenXSMax:s-1,screenSM:s,screenSMMin:s,screenSMMax:a-1,screenMD:a,screenMDMin:a,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:c-1,screenXL:c,screenXLMin:c,screenXLMax:u-1,screenXXL:u,screenXXLMin:u,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Xr("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Xr("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Xr("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var FV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Zre={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},JMe={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},e2e={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Jre=(t,e,n)=>{const r=n.getDerivativeToken(t),{override:o}=e,i=FV(e,["override"]);let s=Object.assign(Object.assign({},r),{override:o});return s=Qre(s),i&&Object.entries(i).forEach(([a,l])=>{const{theme:c}=l,u=FV(l,["theme"]);let d=u;c&&(d=Jre(Object.assign(Object.assign({},s),u),{override:u},c)),s[a]=d}),s};function wa(){const{token:t,hashed:e,theme:n,override:r,cssVar:o}=ce.useContext(Xre),i=`${QMe}-${e||""}`,s=n||Gre,[a,l,c]=Cne(s,[KS,t],{salt:i,override:r,getComputedToken:Jre,formatToken:Qre,cssVar:o&&{prefix:o.prefix,key:o.key,unitless:Zre,ignore:JMe,preserve:e2e}});return[s,c,e?l:"",a,o]}const O_={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},xs=(t,e=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight,listStyle:"none",fontFamily:e?"inherit":t.fontFamily}),XT=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),t2e=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),n2e=t=>({a:{color:t.colorLink,textDecoration:t.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${t.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive},"&:active, &:hover":{textDecoration:t.linkHoverDecoration,outline:0},"&:focus":{textDecoration:t.linkFocusDecoration,outline:0},"&[disabled]":{color:t.colorTextDisabled,cursor:"not-allowed"}}}),r2e=(t,e,n,r)=>{const o=`[class^="${e}"], [class*=" ${e}"]`,i=n?`.${n}`:o,s={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let a={};return r!==!1&&(a={fontFamily:t.fontFamily,fontSize:t.fontSize}),{[i]:Object.assign(Object.assign(Object.assign({},a),s),{[o]:s})}},XS=(t,e)=>({outline:`${Re(t.lineWidthFocus)} solid ${t.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),Fp=(t,e)=>({"&:focus-visible":Object.assign({},XS(t,e))}),eoe=t=>({[`.${t}`]:Object.assign(Object.assign({},XT()),{[`.${t} .${t}-icon`]:{display:"block"}})}),toe=t=>Object.assign(Object.assign({color:t.colorLink,textDecoration:t.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},Fp(t)),{"&:focus, &:hover":{color:t.colorLinkHover},"&:active":{color:t.colorLinkActive}}),{genStyleHooks:li,genComponentStyleHook:o2e,genSubStyleComponent:YT}=Xne({usePrefix:()=>{const{getPrefixCls:t,iconPrefixCls:e}=v.useContext(tr);return{rootPrefixCls:t(),iconPrefixCls:e}},useToken:()=>{const[t,e,n,r,o]=wa();return{theme:t,realToken:e,hashId:n,token:r,cssVar:o}},useCSP:()=>{const{csp:t}=v.useContext(tr);return t??{}},getResetStyles:(t,e)=>{var n;const r=n2e(t);return[r,{"&":r},eoe((n=e==null?void 0:e.prefix.iconPrefixCls)!==null&&n!==void 0?n:GT)]},getCommonStyle:r2e,getCompUnitless:()=>Zre});function i2e(t,e){return Np.reduce((n,r)=>{const o=t[`${r}1`],i=t[`${r}3`],s=t[`${r}6`],a=t[`${r}7`];return Object.assign(Object.assign({},n),e(r,{lightColor:o,lightBorderColor:i,darkColor:s,textColor:a}))},{})}const s2e=(t,e)=>{const[n,r]=wa();return __({token:r,hashId:"",path:["ant-design-icons",t],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[eoe(t)])},a2e=Object.assign({},jv),{useId:zV}=a2e,l2e=()=>"",c2e=typeof zV>"u"?l2e:zV;function u2e(t,e,n){var r;Yx();const o=t||{},i=o.inherit===!1||!e?Object.assign(Object.assign({},lN),{hashed:(r=e==null?void 0:e.hashed)!==null&&r!==void 0?r:lN.hashed,cssVar:e==null?void 0:e.cssVar}):e,s=c2e();return Bv(()=>{var a,l;if(!t)return e;const c=Object.assign({},i.components);Object.keys(t.components||{}).forEach(f=>{c[f]=Object.assign(Object.assign({},c[f]),t.components[f])});const u=`css-var-${s.replace(/:/g,"")}`,d=((a=o.cssVar)!==null&&a!==void 0?a:i.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof i.cssVar=="object"?i.cssVar:{}),typeof o.cssVar=="object"?o.cssVar:{}),{key:typeof o.cssVar=="object"&&((l=o.cssVar)===null||l===void 0?void 0:l.key)||u});return Object.assign(Object.assign(Object.assign({},i),o),{token:Object.assign(Object.assign({},i.token),o.token),components:c,cssVar:d})},[o,i],(a,l)=>a.some((c,u)=>{const d=l[u];return!Dp(c,d,!0)}))}function d2e(t){const{children:e}=t,[,n]=wa(),{motion:r}=n,o=v.useRef(!1);return o.current=o.current||r===!1,o.current?v.createElement(Zne,{motion:r},e):e}const f2e=()=>null;var h2e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const p2e=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let R_,noe,roe,ooe;function oP(){return R_||GS}function g2e(){return noe||GT}function m2e(t){return Object.keys(t).some(e=>e.endsWith("Color"))}const v2e=t=>{const{prefixCls:e,iconPrefixCls:n,theme:r,holderRender:o}=t;e!==void 0&&(R_=e),n!==void 0&&(noe=n),"holderRender"in t&&(ooe=o),r&&(m2e(r)?GMe(oP(),r):roe=r)},ioe=()=>({getPrefixCls:(t,e)=>e||(t?`${oP()}-${t}`:oP()),getIconPrefixCls:g2e,getRootPrefixCls:()=>R_||oP(),getTheme:()=>roe,holderRender:ooe}),y2e=t=>{const{children:e,csp:n,autoInsertSpaceInButton:r,alert:o,anchor:i,form:s,locale:a,componentSize:l,direction:c,space:u,splitter:d,virtual:f,dropdownMatchSelectWidth:h,popupMatchSelectWidth:g,popupOverflow:y,legacyLocale:m,parentContext:S,iconPrefixCls:x,theme:C,componentDisabled:E,segmented:P,statistic:I,spin:T,calendar:M,carousel:R,cascader:A,collapse:j,typography:N,checkbox:k,descriptions:D,divider:F,drawer:H,skeleton:U,steps:B,image:W,layout:K,list:q,mentions:X,modal:Z,progress:Y,result:G,slider:J,breadcrumb:ne,menu:ee,pagination:re,input:le,textArea:ae,empty:ie,badge:ge,radio:ve,rate:fe,switch:ue,transfer:Ce,avatar:ye,message:ke,tag:Be,table:Ue,card:We,tabs:Me,timeline:$e,timePicker:Qe,upload:nt,notification:ht,tree:ft,colorPicker:et,datePicker:pe,rangePicker:Pe,flex:je,wave:Le,dropdown:qe,warning:at,tour:Ae,tooltip:Ne,popover:xt,popconfirm:Pt,floatButtonGroup:gn,variant:Xt,inputNumber:sn,treeSelect:Zt}=t,Vt=v.useCallback((lt,kt)=>{const{prefixCls:_n}=t;if(kt)return kt;const bn=_n||S.getPrefixCls("");return lt?`${bn}-${lt}`:bn},[S.getPrefixCls,t.prefixCls]),an=x||S.iconPrefixCls||GT,wt=n||S.csp;s2e(an,wt);const bt=u2e(C,S.theme,{prefixCls:Vt("")}),ot={csp:wt,autoInsertSpaceInButton:r,alert:o,anchor:i,locale:a||m,direction:c,space:u,splitter:d,virtual:f,popupMatchSelectWidth:g??h,popupOverflow:y,getPrefixCls:Vt,iconPrefixCls:an,theme:bt,segmented:P,statistic:I,spin:T,calendar:M,carousel:R,cascader:A,collapse:j,typography:N,checkbox:k,descriptions:D,divider:F,drawer:H,skeleton:U,steps:B,image:W,input:le,textArea:ae,layout:K,list:q,mentions:X,modal:Z,progress:Y,result:G,slider:J,breadcrumb:ne,menu:ee,pagination:re,empty:ie,badge:ge,radio:ve,rate:fe,switch:ue,transfer:Ce,avatar:ye,message:ke,tag:Be,table:Ue,card:We,tabs:Me,timeline:$e,timePicker:Qe,upload:nt,notification:ht,tree:ft,colorPicker:et,datePicker:pe,rangePicker:Pe,flex:je,wave:Le,dropdown:qe,warning:at,tour:Ae,tooltip:Ne,popover:xt,popconfirm:Pt,floatButtonGroup:gn,variant:Xt,inputNumber:sn,treeSelect:Zt},Xe=Object.assign({},S);Object.keys(ot).forEach(lt=>{ot[lt]!==void 0&&(Xe[lt]=ot[lt])}),p2e.forEach(lt=>{const kt=t[lt];kt&&(Xe[lt]=kt)}),typeof r<"u"&&(Xe.button=Object.assign({autoInsertSpace:r},Xe.button));const qt=Bv(()=>Xe,Xe,(lt,kt)=>{const _n=Object.keys(lt),bn=Object.keys(kt);return _n.length!==bn.length||_n.some(ln=>lt[ln]!==kt[ln])}),{layer:Tt}=v.useContext(Kf),Fe=v.useMemo(()=>({prefixCls:an,csp:wt,layer:Tt?"antd":void 0}),[an,wt,Tt]);let Ge=v.createElement(v.Fragment,null,v.createElement(f2e,{dropdownMatchSelectWidth:h}),e);const ut=v.useMemo(()=>{var lt,kt,_n,bn;return Mm(((lt=jp.Form)===null||lt===void 0?void 0:lt.defaultValidateMessages)||{},((_n=(kt=qt.locale)===null||kt===void 0?void 0:kt.Form)===null||_n===void 0?void 0:_n.defaultValidateMessages)||{},((bn=qt.form)===null||bn===void 0?void 0:bn.validateMessages)||{},(s==null?void 0:s.validateMessages)||{})},[qt,s==null?void 0:s.validateMessages]);Object.keys(ut).length>0&&(Ge=v.createElement(Wre.Provider,{value:ut},Ge)),a&&(Ge=v.createElement(AMe,{locale:a,_ANT_MARK__:kMe},Ge)),Ge=v.createElement(kz.Provider,{value:Fe},Ge),l&&(Ge=v.createElement(XMe,{size:l},Ge)),Ge=v.createElement(d2e,null,Ge);const St=v.useMemo(()=>{const lt=bt||{},{algorithm:kt,token:_n,components:bn,cssVar:ln}=lt,en=h2e(lt,["algorithm","token","components","cssVar"]),wn=kt&&(!Array.isArray(kt)||kt.length>0)?P_(kt):Gre,nr={};Object.entries(bn||{}).forEach(([ur,Nn])=>{const gt=Object.assign({},Nn);"algorithm"in gt&&(gt.algorithm===!0?gt.theme=wn:(Array.isArray(gt.algorithm)||typeof gt.algorithm=="function")&&(gt.theme=P_(gt.algorithm)),delete gt.algorithm),nr[ur]=gt});const rr=Object.assign(Object.assign({},KS),_n);return Object.assign(Object.assign({},en),{theme:wn,token:rr,components:nr,override:Object.assign({override:rr},nr),cssVar:ln})},[bt]);return C&&(Ge=v.createElement(Xre.Provider,{value:St},Ge)),qt.warning&&(Ge=v.createElement(TMe.Provider,{value:qt.warning},Ge)),E!==void 0&&(Ge=v.createElement(Yre,{disabled:E},Ge)),v.createElement(tr.Provider,{value:qt},Ge)},uh=t=>{const e=v.useContext(tr),n=v.useContext(Az);return v.createElement(y2e,Object.assign({parentContext:e,legacyLocale:n},t))};uh.ConfigContext=tr;uh.SizeContext=Lp;uh.config=v2e;uh.useConfig=YMe;Object.defineProperty(uh,"SizeContext",{get:()=>Lp});var b2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function S2e(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function x2e(t,e){Vi(t,"[@ant-design/icons] ".concat(e))}function BV(t){return Wt(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(Wt(t.icon)==="object"||typeof t.icon=="function")}function HV(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[S2e(n)]=r}return e},{})}function cN(t,e,n){return n?ce.createElement(t.tag,de(de({key:e},HV(t.attrs)),n),(t.children||[]).map(function(r,o){return cN(r,"".concat(e,"-").concat(t.tag,"-").concat(o))})):ce.createElement(t.tag,de({key:e},HV(t.attrs)),(t.children||[]).map(function(r,o){return cN(r,"".concat(e,"-").concat(t.tag,"-").concat(o))}))}function soe(t){return ov(t)[0]}function aoe(t){return t?Array.isArray(t)?t:[t]:[]}var w2e=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,C2e=function(e){var n=v.useContext(kz),r=n.csp,o=n.prefixCls,i=n.layer,s=w2e;o&&(s=s.replace(/anticon/g,o)),i&&(s="@layer ".concat(i,` {
`).concat(s,`
}`)),v.useEffect(function(){var a=e.current,l=I_(a);hu(s,"@ant-design-icons",{prepend:!i,csp:r,attachTo:l})},[])},E2e=["icon","className","onClick","style","primaryColor","secondaryColor"],sS={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function P2e(t){var e=t.primaryColor,n=t.secondaryColor;sS.primaryColor=e,sS.secondaryColor=n||soe(e),sS.calculated=!!n}function _2e(){return de({},sS)}var qv=function(e){var n=e.icon,r=e.className,o=e.onClick,i=e.style,s=e.primaryColor,a=e.secondaryColor,l=Sn(e,E2e),c=v.useRef(),u=sS;if(s&&(u={primaryColor:s,secondaryColor:a||soe(s)}),C2e(c),x2e(BV(n),"icon should be icon definiton, but got ".concat(n)),!BV(n))return null;var d=n;return d&&typeof d.icon=="function"&&(d=de(de({},d),{},{icon:d.icon(u.primaryColor,u.secondaryColor)})),cN(d.icon,"svg-".concat(d.name),de(de({className:r,onClick:o,style:i,"data-icon":d.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};qv.displayName="IconReact";qv.getTwoToneColors=_2e;qv.setTwoToneColors=P2e;function loe(t){var e=aoe(t),n=xe(e,2),r=n[0],o=n[1];return qv.setTwoToneColors({primaryColor:r,secondaryColor:o})}function I2e(){var t=qv.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var T2e=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];loe(FS.primary);var co=v.forwardRef(function(t,e){var n=t.className,r=t.icon,o=t.spin,i=t.rotate,s=t.tabIndex,a=t.onClick,l=t.twoToneColor,c=Sn(t,T2e),u=v.useContext(kz),d=u.prefixCls,f=d===void 0?"anticon":d,h=u.rootClassName,g=he(h,f,oe(oe({},"".concat(f,"-").concat(r.name),!!r.name),"".concat(f,"-spin"),!!o||r.name==="loading"),n),y=s;y===void 0&&a&&(y=-1);var m=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,S=aoe(l),x=xe(S,2),C=x[0],E=x[1];return v.createElement("span",vt({role:"img","aria-label":r.name},c,{ref:e,tabIndex:y,onClick:a,className:g}),v.createElement(qv,{icon:r,primaryColor:C,secondaryColor:E,style:m}))});co.displayName="AntdIcon";co.getTwoToneColor=I2e;co.setTwoToneColor=loe;var M2e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:b2e}))},QT=v.forwardRef(M2e),O2e={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},R2e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:O2e}))},Kv=v.forwardRef(R2e),coe={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},k2e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:coe}))},Qx=v.forwardRef(k2e),A2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},$2e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:A2e}))},ZT=v.forwardRef($2e),D2e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},j2e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:D2e}))},$z=v.forwardRef(j2e),L2e=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,N2e=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,F2e="".concat(L2e," ").concat(N2e).split(/[\s\n]+/),z2e="aria-",B2e="data-";function UV(t,e){return t.indexOf(e)===0}function Xf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;e===!1?n={aria:!0,data:!0,attr:!0}:e===!0?n={aria:!0}:n=de({},e);var r={};return Object.keys(t).forEach(function(o){(n.aria&&(o==="role"||UV(o,z2e))||n.data&&UV(o,B2e)||n.attr&&F2e.includes(o))&&(r[o]=t[o])}),r}function uoe(t){return t&&ce.isValidElement(t)&&t.type===ce.Fragment}const doe=(t,e,n)=>ce.isValidElement(t)?ce.cloneElement(t,typeof n=="function"?n(t.props||{}):n):e;function _d(t,e){return doe(t,t,e)}const jC=(t,e,n,r,o)=>({background:t,border:`${Re(r.lineWidth)} ${r.lineType} ${e}`,[`${o}-icon`]:{color:n}}),H2e=t=>{const{componentCls:e,motionDurationSlow:n,marginXS:r,marginSM:o,fontSize:i,fontSizeLG:s,lineHeight:a,borderRadiusLG:l,motionEaseInOutCirc:c,withDescriptionIconSize:u,colorText:d,colorTextHeading:f,withDescriptionPadding:h,defaultPadding:g}=t;return{[e]:Object.assign(Object.assign({},xs(t)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:l,[`&${e}-rtl`]:{direction:"rtl"},[`${e}-content`]:{flex:1,minWidth:0},[`${e}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:i,lineHeight:a},"&-message":{color:f},[`&${e}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${c}, opacity ${n} ${c},
        padding-top ${n} ${c}, padding-bottom ${n} ${c},
        margin-bottom ${n} ${c}`},[`&${e}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${e}-with-description`]:{alignItems:"flex-start",padding:h,[`${e}-icon`]:{marginInlineEnd:o,fontSize:u,lineHeight:0},[`${e}-message`]:{display:"block",marginBottom:r,color:f,fontSize:s},[`${e}-description`]:{display:"block",color:d}},[`${e}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},U2e=t=>{const{componentCls:e,colorSuccess:n,colorSuccessBorder:r,colorSuccessBg:o,colorWarning:i,colorWarningBorder:s,colorWarningBg:a,colorError:l,colorErrorBorder:c,colorErrorBg:u,colorInfo:d,colorInfoBorder:f,colorInfoBg:h}=t;return{[e]:{"&-success":jC(o,r,n,t,e),"&-info":jC(h,f,d,t,e),"&-warning":jC(a,s,i,t,e),"&-error":Object.assign(Object.assign({},jC(u,c,l,t,e)),{[`${e}-description > pre`]:{margin:0,padding:0}})}}},W2e=t=>{const{componentCls:e,iconCls:n,motionDurationMid:r,marginXS:o,fontSizeIcon:i,colorIcon:s,colorIconHover:a}=t;return{[e]:{"&-action":{marginInlineStart:o},[`${e}-close-icon`]:{marginInlineStart:o,padding:0,overflow:"hidden",fontSize:i,lineHeight:Re(i),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:s,transition:`color ${r}`,"&:hover":{color:a}}},"&-close-text":{color:s,transition:`color ${r}`,"&:hover":{color:a}}}}},V2e=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`}),q2e=li("Alert",t=>[H2e(t),U2e(t),W2e(t)],V2e);var WV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const K2e={success:QT,info:$z,error:Kv,warning:ZT},G2e=t=>{const{icon:e,prefixCls:n,type:r}=t,o=K2e[r]||null;return e?doe(e,v.createElement("span",{className:`${n}-icon`},e),()=>({className:he(`${n}-icon`,e.props.className)})):v.createElement(o,{className:`${n}-icon`})},X2e=t=>{const{isClosable:e,prefixCls:n,closeIcon:r,handleClose:o,ariaProps:i}=t,s=r===!0||r===void 0?v.createElement(Qx,null):r;return e?v.createElement("button",Object.assign({type:"button",onClick:o,className:`${n}-close-icon`,tabIndex:0},i),s):null},foe=v.forwardRef((t,e)=>{const{description:n,prefixCls:r,message:o,banner:i,className:s,rootClassName:a,style:l,onMouseEnter:c,onMouseLeave:u,onClick:d,afterClose:f,showIcon:h,closable:g,closeText:y,closeIcon:m,action:S,id:x}=t,C=WV(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[E,P]=v.useState(!1),I=v.useRef(null);v.useImperativeHandle(e,()=>({nativeElement:I.current}));const{getPrefixCls:T,direction:M,closable:R,closeIcon:A,className:j,style:N}=Bl("alert"),k=T("alert",r),[D,F,H]=q2e(k),U=G=>{var J;P(!0),(J=t.onClose)===null||J===void 0||J.call(t,G)},B=v.useMemo(()=>t.type!==void 0?t.type:i?"warning":"info",[t.type,i]),W=v.useMemo(()=>typeof g=="object"&&g.closeIcon||y?!0:typeof g=="boolean"?g:m!==!1&&m!==null&&m!==void 0?!0:!!R,[y,m,g,R]),K=i&&h===void 0?!0:h,q=he(k,`${k}-${B}`,{[`${k}-with-description`]:!!n,[`${k}-no-icon`]:!K,[`${k}-banner`]:!!i,[`${k}-rtl`]:M==="rtl"},j,s,a,H,F),X=Xf(C,{aria:!0,data:!0}),Z=v.useMemo(()=>typeof g=="object"&&g.closeIcon?g.closeIcon:y||(m!==void 0?m:typeof R=="object"&&R.closeIcon?R.closeIcon:A),[m,g,y,A]),Y=v.useMemo(()=>{const G=g??R;if(typeof G=="object"){const{closeIcon:J}=G;return WV(G,["closeIcon"])}return{}},[g,R]);return D(v.createElement($u,{visible:!E,motionName:`${k}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:G=>({maxHeight:G.offsetHeight}),onLeaveEnd:f},({className:G,style:J},ne)=>v.createElement("div",Object.assign({id:x,ref:xa(I,ne),"data-show":!E,className:he(q,G),style:Object.assign(Object.assign(Object.assign({},N),l),J),onMouseEnter:c,onMouseLeave:u,onClick:d,role:"alert"},X),K?v.createElement(G2e,{description:n,icon:t.icon,prefixCls:k,type:B}):null,v.createElement("div",{className:`${k}-content`},o?v.createElement("div",{className:`${k}-message`},o):null,n?v.createElement("div",{className:`${k}-description`},n):null),S?v.createElement("div",{className:`${k}-action`},S):null,v.createElement(X2e,{isClosable:W,prefixCls:k,closeIcon:Z,handleClose:U,ariaProps:Y}))))});function Y2e(t,e,n){return e=$p(e),ine(t,jT()?Reflect.construct(e,n||[],$p(t).constructor):e.apply(t,n))}let Q2e=function(t){function e(){var n;return ao(this,e),n=Y2e(this,e,arguments),n.state={error:void 0,info:{componentStack:""}},n}return Nl(e,t),lo(e,[{key:"componentDidCatch",value:function(r,o){this.setState({error:r,info:o})}},{key:"render",value:function(){const{message:r,description:o,id:i,children:s}=this.props,{error:a,info:l}=this.state,c=(l==null?void 0:l.componentStack)||null,u=typeof r>"u"?(a||"").toString():r,d=typeof o>"u"?c:o;return a?v.createElement(foe,{id:i,type:"error",message:u,description:v.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},d)}):s}}])}(v.Component);const YS=foe;YS.ErrorBoundary=Q2e;const VV=t=>typeof t=="object"&&t!=null&&t.nodeType===1,qV=(t,e)=>(!e||t!=="hidden")&&t!=="visible"&&t!=="clip",LC=(t,e)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const n=getComputedStyle(t,null);return qV(n.overflowY,e)||qV(n.overflowX,e)||(r=>{const o=(i=>{if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!o&&(o.clientHeight<r.scrollHeight||o.clientWidth<r.scrollWidth)})(t)}return!1},NC=(t,e,n,r,o,i,s,a)=>i<t&&s>e||i>t&&s<e?0:i<=t&&a<=n||s>=e&&a>=n?i-t-r:s>e&&a<n||i<t&&a>n?s-e+o:0,Z2e=t=>{const e=t.parentElement;return e??(t.getRootNode().host||null)},KV=(t,e)=>{var n,r,o,i;if(typeof document>"u")return[];const{scrollMode:s,block:a,inline:l,boundary:c,skipOverflowHiddenElements:u}=e,d=typeof c=="function"?c:H=>H!==c;if(!VV(t))throw new TypeError("Invalid target");const f=document.scrollingElement||document.documentElement,h=[];let g=t;for(;VV(g)&&d(g);){if(g=Z2e(g),g===f){h.push(g);break}g!=null&&g===document.body&&LC(g)&&!LC(document.documentElement)||g!=null&&LC(g,u)&&h.push(g)}const y=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,m=(i=(o=window.visualViewport)==null?void 0:o.height)!=null?i:innerHeight,{scrollX:S,scrollY:x}=window,{height:C,width:E,top:P,right:I,bottom:T,left:M}=t.getBoundingClientRect(),{top:R,right:A,bottom:j,left:N}=(H=>{const U=window.getComputedStyle(H);return{top:parseFloat(U.scrollMarginTop)||0,right:parseFloat(U.scrollMarginRight)||0,bottom:parseFloat(U.scrollMarginBottom)||0,left:parseFloat(U.scrollMarginLeft)||0}})(t);let k=a==="start"||a==="nearest"?P-R:a==="end"?T+j:P+C/2-R+j,D=l==="center"?M+E/2-N+A:l==="end"?I+A:M-N;const F=[];for(let H=0;H<h.length;H++){const U=h[H],{height:B,width:W,top:K,right:q,bottom:X,left:Z}=U.getBoundingClientRect();if(s==="if-needed"&&P>=0&&M>=0&&T<=m&&I<=y&&(U===f&&!LC(U)||P>=K&&T<=X&&M>=Z&&I<=q))return F;const Y=getComputedStyle(U),G=parseInt(Y.borderLeftWidth,10),J=parseInt(Y.borderTopWidth,10),ne=parseInt(Y.borderRightWidth,10),ee=parseInt(Y.borderBottomWidth,10);let re=0,le=0;const ae="offsetWidth"in U?U.offsetWidth-U.clientWidth-G-ne:0,ie="offsetHeight"in U?U.offsetHeight-U.clientHeight-J-ee:0,ge="offsetWidth"in U?U.offsetWidth===0?0:W/U.offsetWidth:0,ve="offsetHeight"in U?U.offsetHeight===0?0:B/U.offsetHeight:0;if(f===U)re=a==="start"?k:a==="end"?k-m:a==="nearest"?NC(x,x+m,m,J,ee,x+k,x+k+C,C):k-m/2,le=l==="start"?D:l==="center"?D-y/2:l==="end"?D-y:NC(S,S+y,y,G,ne,S+D,S+D+E,E),re=Math.max(0,re+x),le=Math.max(0,le+S);else{re=a==="start"?k-K-J:a==="end"?k-X+ee+ie:a==="nearest"?NC(K,X,B,J,ee+ie,k,k+C,C):k-(K+B/2)+ie/2,le=l==="start"?D-Z-G:l==="center"?D-(Z+W/2)+ae/2:l==="end"?D-q+ne+ae:NC(Z,q,W,G,ne+ae,D,D+E,E);const{scrollLeft:fe,scrollTop:ue}=U;re=ve===0?0:Math.max(0,Math.min(ue+re/ve,U.scrollHeight-B/ve+ie)),le=ge===0?0:Math.max(0,Math.min(fe+le/ge,U.scrollWidth-W/ge+ae)),k+=ue-re,D+=fe-le}F.push({el:U,top:re,left:le})}return F},J2e=t=>t===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(t)?t:{block:"start",inline:"nearest"};function eOe(t,e){if(!t.isConnected||!(o=>{let i=o;for(;i&&i.parentNode;){if(i.parentNode===document)return!0;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(t))return;const n=(o=>{const i=window.getComputedStyle(o);return{top:parseFloat(i.scrollMarginTop)||0,right:parseFloat(i.scrollMarginRight)||0,bottom:parseFloat(i.scrollMarginBottom)||0,left:parseFloat(i.scrollMarginLeft)||0}})(t);if((o=>typeof o=="object"&&typeof o.behavior=="function")(e))return e.behavior(KV(t,e));const r=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:o,top:i,left:s}of KV(t,J2e(e))){const a=i-n.top+n.bottom,l=s-n.left+n.right;o.scroll({top:a,left:l,behavior:r})}}const Nc=t=>{const[,,,,e]=wa();return e?`${t}-css-var`:""};var It={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,N:78,P:80,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,EQUALS:187,WIN_KEY:224},Dz=v.forwardRef(function(t,e){var n=t.prefixCls,r=t.style,o=t.className,i=t.duration,s=i===void 0?4.5:i,a=t.showProgress,l=t.pauseOnHover,c=l===void 0?!0:l,u=t.eventKey,d=t.content,f=t.closable,h=t.closeIcon,g=h===void 0?"x":h,y=t.props,m=t.onClick,S=t.onNoticeClose,x=t.times,C=t.hovering,E=v.useState(!1),P=xe(E,2),I=P[0],T=P[1],M=v.useState(0),R=xe(M,2),A=R[0],j=R[1],N=v.useState(0),k=xe(N,2),D=k[0],F=k[1],H=C||I,U=s>0&&a,B=function(){S(u)},W=function(G){(G.key==="Enter"||G.code==="Enter"||G.keyCode===It.ENTER)&&B()};v.useEffect(function(){if(!H&&s>0){var Y=Date.now()-D,G=setTimeout(function(){B()},s*1e3-D);return function(){c&&clearTimeout(G),F(Date.now()-Y)}}},[s,H,x]),v.useEffect(function(){if(!H&&U&&(c||D===0)){var Y=performance.now(),G,J=function ne(){cancelAnimationFrame(G),G=requestAnimationFrame(function(ee){var re=ee+D-Y,le=Math.min(re/(s*1e3),1);j(le*100),le<1&&ne()})};return J(),function(){c&&cancelAnimationFrame(G)}}},[s,D,H,U,x]);var K=v.useMemo(function(){return Wt(f)==="object"&&f!==null?f:f?{closeIcon:g}:{}},[f,g]),q=Xf(K,!0),X=100-(!A||A<0?0:A>100?100:A),Z="".concat(n,"-notice");return v.createElement("div",vt({},y,{ref:e,className:he(Z,o,oe({},"".concat(Z,"-closable"),f)),style:r,onMouseEnter:function(G){var J;T(!0),y==null||(J=y.onMouseEnter)===null||J===void 0||J.call(y,G)},onMouseLeave:function(G){var J;T(!1),y==null||(J=y.onMouseLeave)===null||J===void 0||J.call(y,G)},onClick:m}),v.createElement("div",{className:"".concat(Z,"-content")},d),f&&v.createElement("a",vt({tabIndex:0,className:"".concat(Z,"-close"),onKeyDown:W,"aria-label":"Close"},q,{onClick:function(G){G.preventDefault(),G.stopPropagation(),B()}}),K.closeIcon),U&&v.createElement("progress",{className:"".concat(Z,"-progress"),max:"100",value:X},X+"%"))}),hoe=ce.createContext({}),poe=function(e){var n=e.children,r=e.classNames;return ce.createElement(hoe.Provider,{value:{classNames:r}},n)},GV=8,XV=3,YV=16,tOe=function(e){var n={offset:GV,threshold:XV,gap:YV};if(e&&Wt(e)==="object"){var r,o,i;n.offset=(r=e.offset)!==null&&r!==void 0?r:GV,n.threshold=(o=e.threshold)!==null&&o!==void 0?o:XV,n.gap=(i=e.gap)!==null&&i!==void 0?i:YV}return[!!e,n]},nOe=["className","style","classNames","styles"],rOe=function(e){var n=e.configList,r=e.placement,o=e.prefixCls,i=e.className,s=e.style,a=e.motion,l=e.onAllNoticeRemoved,c=e.onNoticeClose,u=e.stack,d=v.useContext(hoe),f=d.classNames,h=v.useRef({}),g=v.useState(null),y=xe(g,2),m=y[0],S=y[1],x=v.useState([]),C=xe(x,2),E=C[0],P=C[1],I=n.map(function(H){return{config:H,key:String(H.key)}}),T=tOe(u),M=xe(T,2),R=M[0],A=M[1],j=A.offset,N=A.threshold,k=A.gap,D=R&&(E.length>0||I.length<=N),F=typeof a=="function"?a(r):a;return v.useEffect(function(){R&&E.length>1&&P(function(H){return H.filter(function(U){return I.some(function(B){var W=B.key;return U===W})})})},[E,I,R]),v.useEffect(function(){var H;if(R&&h.current[(H=I[I.length-1])===null||H===void 0?void 0:H.key]){var U;S(h.current[(U=I[I.length-1])===null||U===void 0?void 0:U.key])}},[I,R]),ce.createElement(yz,vt({key:r,className:he(o,"".concat(o,"-").concat(r),f==null?void 0:f.list,i,oe(oe({},"".concat(o,"-stack"),!!R),"".concat(o,"-stack-expanded"),D)),style:s,keys:I,motionAppear:!0},F,{onAllRemoved:function(){l(r)}}),function(H,U){var B=H.config,W=H.className,K=H.style,q=H.index,X=B,Z=X.key,Y=X.times,G=String(Z),J=B,ne=J.className,ee=J.style,re=J.classNames,le=J.styles,ae=Sn(J,nOe),ie=I.findIndex(function($e){return $e.key===G}),ge={};if(R){var ve=I.length-1-(ie>-1?ie:q-1),fe=r==="top"||r==="bottom"?"-50%":"0";if(ve>0){var ue,Ce,ye;ge.height=D?(ue=h.current[G])===null||ue===void 0?void 0:ue.offsetHeight:m==null?void 0:m.offsetHeight;for(var ke=0,Be=0;Be<ve;Be++){var Ue;ke+=((Ue=h.current[I[I.length-1-Be].key])===null||Ue===void 0?void 0:Ue.offsetHeight)+k}var We=(D?ke:ve*j)*(r.startsWith("top")?1:-1),Me=!D&&m!==null&&m!==void 0&&m.offsetWidth&&(Ce=h.current[G])!==null&&Ce!==void 0&&Ce.offsetWidth?((m==null?void 0:m.offsetWidth)-j*2*(ve<3?ve:3))/((ye=h.current[G])===null||ye===void 0?void 0:ye.offsetWidth):1;ge.transform="translate3d(".concat(fe,", ").concat(We,"px, 0) scaleX(").concat(Me,")")}else ge.transform="translate3d(".concat(fe,", 0, 0)")}return ce.createElement("div",{ref:U,className:he("".concat(o,"-notice-wrapper"),W,re==null?void 0:re.wrapper),style:de(de(de({},K),ge),le==null?void 0:le.wrapper),onMouseEnter:function(){return P(function(Qe){return Qe.includes(G)?Qe:[].concat(it(Qe),[G])})},onMouseLeave:function(){return P(function(Qe){return Qe.filter(function(nt){return nt!==G})})}},ce.createElement(Dz,vt({},ae,{ref:function(Qe){ie>-1?h.current[G]=Qe:delete h.current[G]},prefixCls:o,classNames:re,styles:le,className:he(ne,f==null?void 0:f.notice),style:ee,times:Y,key:Z,eventKey:Z,onNoticeClose:c,hovering:R&&E.length>0})))})},oOe=v.forwardRef(function(t,e){var n=t.prefixCls,r=n===void 0?"rc-notification":n,o=t.container,i=t.motion,s=t.maxCount,a=t.className,l=t.style,c=t.onAllRemoved,u=t.stack,d=t.renderNotifications,f=v.useState([]),h=xe(f,2),g=h[0],y=h[1],m=function(R){var A,j=g.find(function(N){return N.key===R});j==null||(A=j.onClose)===null||A===void 0||A.call(j),y(function(N){return N.filter(function(k){return k.key!==R})})};v.useImperativeHandle(e,function(){return{open:function(R){y(function(A){var j=it(A),N=j.findIndex(function(F){return F.key===R.key}),k=de({},R);if(N>=0){var D;k.times=(((D=A[N])===null||D===void 0?void 0:D.times)||0)+1,j[N]=k}else k.times=0,j.push(k);return s>0&&j.length>s&&(j=j.slice(-s)),j})},close:function(R){m(R)},destroy:function(){y([])}}});var S=v.useState({}),x=xe(S,2),C=x[0],E=x[1];v.useEffect(function(){var M={};g.forEach(function(R){var A=R.placement,j=A===void 0?"topRight":A;j&&(M[j]=M[j]||[],M[j].push(R))}),Object.keys(C).forEach(function(R){M[R]=M[R]||[]}),E(M)},[g]);var P=function(R){E(function(A){var j=de({},A),N=j[R]||[];return N.length||delete j[R],j})},I=v.useRef(!1);if(v.useEffect(function(){Object.keys(C).length>0?I.current=!0:I.current&&(c==null||c(),I.current=!1)},[C]),!o)return null;var T=Object.keys(C);return Ya.createPortal(v.createElement(v.Fragment,null,T.map(function(M){var R=C[M],A=v.createElement(rOe,{key:M,configList:R,placement:M,prefixCls:r,className:a==null?void 0:a(M),style:l==null?void 0:l(M),motion:i,onNoticeClose:m,onAllNoticeRemoved:P,stack:u});return d?d(A,{prefixCls:r,key:M}):A})),o)}),iOe=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],sOe=function(){return document.body},QV=0;function aOe(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(o){o&&Object.keys(o).forEach(function(i){var s=o[i];s!==void 0&&(t[i]=s)})}),t}function goe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.getContainer,n=e===void 0?sOe:e,r=t.motion,o=t.prefixCls,i=t.maxCount,s=t.className,a=t.style,l=t.onAllRemoved,c=t.stack,u=t.renderNotifications,d=Sn(t,iOe),f=v.useState(),h=xe(f,2),g=h[0],y=h[1],m=v.useRef(),S=v.createElement(oOe,{container:g,ref:m,prefixCls:o,motion:r,maxCount:i,className:s,style:a,onAllRemoved:l,stack:c,renderNotifications:u}),x=v.useState([]),C=xe(x,2),E=C[0],P=C[1],I=Bo(function(M){var R=aOe(d,M);(R.key===null||R.key===void 0)&&(R.key="rc-notification-".concat(QV),QV+=1),P(function(A){return[].concat(it(A),[{type:"open",config:R}])})}),T=v.useMemo(function(){return{open:I,close:function(R){P(function(A){return[].concat(it(A),[{type:"close",key:R}])})},destroy:function(){P(function(R){return[].concat(it(R),[{type:"destroy"}])})}}},[]);return v.useEffect(function(){y(n())}),v.useEffect(function(){if(m.current&&E.length){E.forEach(function(A){switch(A.type){case"open":m.current.open(A.config);break;case"close":m.current.close(A.key);break;case"destroy":m.current.destroy();break}});var M,R;P(function(A){return(M!==A||!R)&&(M=A,R=A.filter(function(j){return!E.includes(j)})),R})}},[E]),[T,S]}var lOe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},cOe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:lOe}))},Zx=v.forwardRef(cOe);const moe=ce.createContext(void 0),yf=100,uOe=10,voe=yf*uOe,yoe={Modal:yf,Drawer:yf,Popover:yf,Popconfirm:yf,Tooltip:yf,Tour:yf,FloatButton:yf},dOe={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function fOe(t){return t in yoe}const boe=(t,e)=>{const[,n]=wa(),r=ce.useContext(moe),o=fOe(t);let i;if(e!==void 0)i=[e,e];else{let s=r??0;o?s+=(r?0:n.zIndexPopupBase)+yoe[t]:s+=dOe[t],i=[r===void 0?e:s,s]}return i},hOe=t=>{const{componentCls:e,iconCls:n,boxShadow:r,colorText:o,colorSuccess:i,colorError:s,colorWarning:a,colorInfo:l,fontSizeLG:c,motionEaseInOutCirc:u,motionDurationSlow:d,marginXS:f,paddingXS:h,borderRadiusLG:g,zIndexPopup:y,contentPadding:m,contentBg:S}=t,x=`${e}-notice`,C=new Yn("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:h,transform:"translateY(0)",opacity:1}}),E=new Yn("MessageMoveOut",{"0%":{maxHeight:t.height,padding:h,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),P={padding:h,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${n}`]:{marginInlineEnd:f,fontSize:c},[`${x}-content`]:{display:"inline-block",padding:m,background:S,borderRadius:g,boxShadow:r,pointerEvents:"all"},[`${e}-success > ${n}`]:{color:i},[`${e}-error > ${n}`]:{color:s},[`${e}-warning > ${n}`]:{color:a},[`${e}-info > ${n},
      ${e}-loading > ${n}`]:{color:l}};return[{[e]:Object.assign(Object.assign({},xs(t)),{color:o,position:"fixed",top:f,width:"100%",pointerEvents:"none",zIndex:y,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:C,animationDuration:d,animationPlayState:"paused",animationTimingFunction:u},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:E,animationDuration:d,animationPlayState:"paused",animationTimingFunction:u},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${x}-wrapper`]:Object.assign({},P)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},P),{padding:0,textAlign:"start"})}]},pOe=t=>({zIndexPopup:t.zIndexPopupBase+voe+10,contentBg:t.colorBgElevated,contentPadding:`${(t.controlHeightLG-t.fontSize*t.lineHeight)/2}px ${t.paddingSM}px`}),Soe=li("Message",t=>{const e=Tr(t,{height:150});return[hOe(e)]},pOe);var gOe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const mOe={info:v.createElement($z,null),success:v.createElement(QT,null),error:v.createElement(Kv,null),warning:v.createElement(ZT,null),loading:v.createElement(Zx,null)},xoe=({prefixCls:t,type:e,icon:n,children:r})=>v.createElement("div",{className:he(`${t}-custom-content`,`${t}-${e}`)},n||mOe[e],v.createElement("span",null,r)),vOe=t=>{const{prefixCls:e,className:n,type:r,icon:o,content:i}=t,s=gOe(t,["prefixCls","className","type","icon","content"]),{getPrefixCls:a}=v.useContext(tr),l=e||a("message"),c=Nc(l),[u,d,f]=Soe(l,c);return u(v.createElement(Dz,Object.assign({},s,{prefixCls:l,className:he(n,d,`${l}-notice-pure-panel`,f,c),eventKey:"pure",duration:null,content:v.createElement(xoe,{prefixCls:l,type:r,icon:o},i)})))};function yOe(t,e){return{motionName:e??`${t}-move-up`}}function jz(t){let e;const n=new Promise(o=>{e=t(()=>{o(!0)})}),r=()=>{e==null||e()};return r.then=(o,i)=>n.then(o,i),r.promise=n,r}var bOe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const SOe=8,xOe=3,wOe=({children:t,prefixCls:e})=>{const n=Nc(e),[r,o,i]=Soe(e,n);return r(v.createElement(poe,{classNames:{list:he(o,i,n)}},t))},COe=(t,{prefixCls:e,key:n})=>v.createElement(wOe,{prefixCls:e,key:n},t),EOe=v.forwardRef((t,e)=>{const{top:n,prefixCls:r,getContainer:o,maxCount:i,duration:s=xOe,rtl:a,transitionName:l,onAllRemoved:c}=t,{getPrefixCls:u,getPopupContainer:d,message:f,direction:h}=v.useContext(tr),g=r||u("message"),y=()=>({left:"50%",transform:"translateX(-50%)",top:n??SOe}),m=()=>he({[`${g}-rtl`]:a??h==="rtl"}),S=()=>yOe(g,l),x=v.createElement("span",{className:`${g}-close-x`},v.createElement(Qx,{className:`${g}-close-icon`})),[C,E]=goe({prefixCls:g,style:y,className:m,motion:S,closable:!1,closeIcon:x,duration:s,getContainer:()=>(o==null?void 0:o())||(d==null?void 0:d())||document.body,maxCount:i,onAllRemoved:c,renderNotifications:COe});return v.useImperativeHandle(e,()=>Object.assign(Object.assign({},C),{prefixCls:g,message:f})),E});let ZV=0;function woe(t){const e=v.useRef(null);return Yx(),[v.useMemo(()=>{const r=l=>{var c;(c=e.current)===null||c===void 0||c.close(l)},o=l=>{if(!e.current){const I=()=>{};return I.then=()=>{},I}const{open:c,prefixCls:u,message:d}=e.current,f=`${u}-notice`,{content:h,icon:g,type:y,key:m,className:S,style:x,onClose:C}=l,E=bOe(l,["content","icon","type","key","className","style","onClose"]);let P=m;return P==null&&(ZV+=1,P=`antd-message-${ZV}`),jz(I=>(c(Object.assign(Object.assign({},E),{key:P,content:v.createElement(xoe,{prefixCls:u,type:y,icon:g},h),placement:"top",className:he(y&&`${f}-${y}`,S,d==null?void 0:d.className),style:Object.assign(Object.assign({},d==null?void 0:d.style),x),onClose:()=>{C==null||C(),I()}})),()=>{r(P)}))},s={open:o,destroy:l=>{var c;l!==void 0?r(l):(c=e.current)===null||c===void 0||c.destroy()}};return["info","success","warning","error","loading"].forEach(l=>{const c=(u,d,f)=>{let h;u&&typeof u=="object"&&"content"in u?h=u:h={content:u};let g,y;typeof d=="function"?y=d:(g=d,y=f);const m=Object.assign(Object.assign({onClose:y,duration:g},h),{type:l});return o(m)};s[l]=c}),s},[]),v.createElement(EOe,Object.assign({key:"message-holder"},t,{ref:e}))]}function POe(t){return woe(t)}var Jx=de({},q1e),_Oe=Jx.version,jk=Jx.render,IOe=Jx.unmountComponentAtNode,JT;try{var TOe=Number((_Oe||"").split(".")[0]);TOe>=18&&(JT=Jx.createRoot)}catch{}function JV(t){var e=Jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&Wt(e)==="object"&&(e.usingClientEntryPoint=t)}var k_="__rc_react_root__";function MOe(t,e){JV(!0);var n=e[k_]||JT(e);JV(!1),n.render(t),e[k_]=n}function OOe(t,e){jk==null||jk(t,e)}function ROe(t,e){if(JT){MOe(t,e);return}OOe(t,e)}function kOe(t){return uN.apply(this,arguments)}function uN(){return uN=gg(ys().mark(function t(e){return ys().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var o;(o=e[k_])===null||o===void 0||o.unmount(),delete e[k_]}));case 1:case"end":return r.stop()}},t)})),uN.apply(this,arguments)}function AOe(t){IOe(t)}function $Oe(t){return dN.apply(this,arguments)}function dN(){return dN=gg(ys().mark(function t(e){return ys().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(JT===void 0){r.next=2;break}return r.abrupt("return",kOe(e));case 2:AOe(e);case 3:case"end":return r.stop()}},t)})),dN.apply(this,arguments)}const DOe=(t,e)=>(ROe(t,e),()=>$Oe(e));let jOe=DOe;function Lz(t){return jOe}const Lk=()=>({height:0,opacity:0}),eq=t=>{const{scrollHeight:e}=t;return{height:e,opacity:1}},LOe=t=>({height:t?t.offsetHeight:0}),Nk=(t,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",tq=(t=GS)=>({motionName:`${t}-motion-collapse`,onAppearStart:Lk,onEnterStart:Lk,onAppearActive:eq,onEnterActive:eq,onLeaveStart:LOe,onLeaveActive:Lk,onAppearEnd:Nk,onEnterEnd:Nk,onLeaveEnd:Nk,motionDeadline:500}),Nz=(t,e,n)=>n!==void 0?n:`${t}-${e}`,NOe=t=>{const{componentCls:e,colorPrimary:n}=t;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${t.motionEaseOutCirc}`,`opacity 2s ${t.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${t.motionDurationSlow} ${t.motionEaseInOut}`,`opacity ${t.motionDurationSlow} ${t.motionEaseInOut}`].join(",")}}}}},FOe=o2e("Wave",t=>[NOe(t)]),Coe=`${GS}-wave-target`;function Fk(t){return t&&t!=="#fff"&&t!=="#ffffff"&&t!=="rgb(255, 255, 255)"&&t!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(t)&&t!=="transparent"}function zOe(t){const{borderTopColor:e,borderColor:n,backgroundColor:r}=getComputedStyle(t);return Fk(e)?e:Fk(n)?n:Fk(r)?r:null}function zk(t){return Number.isNaN(t)?0:t}const BOe=t=>{const{className:e,target:n,component:r,registerUnmount:o}=t,i=v.useRef(null),s=v.useRef(null);v.useEffect(()=>{s.current=o()},[]);const[a,l]=v.useState(null),[c,u]=v.useState([]),[d,f]=v.useState(0),[h,g]=v.useState(0),[y,m]=v.useState(0),[S,x]=v.useState(0),[C,E]=v.useState(!1),P={left:d,top:h,width:y,height:S,borderRadius:c.map(M=>`${M}px`).join(" ")};a&&(P["--wave-color"]=a);function I(){const M=getComputedStyle(n);l(zOe(n));const R=M.position==="static",{borderLeftWidth:A,borderTopWidth:j}=M;f(R?n.offsetLeft:zk(-parseFloat(A))),g(R?n.offsetTop:zk(-parseFloat(j))),m(n.offsetWidth),x(n.offsetHeight);const{borderTopLeftRadius:N,borderTopRightRadius:k,borderBottomLeftRadius:D,borderBottomRightRadius:F}=M;u([N,k,F,D].map(H=>zk(parseFloat(H))))}if(v.useEffect(()=>{if(n){const M=Sr(()=>{I(),E(!0)});let R;return typeof ResizeObserver<"u"&&(R=new ResizeObserver(I),R.observe(n)),()=>{Sr.cancel(M),R==null||R.disconnect()}}},[]),!C)return null;const T=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(Coe));return v.createElement($u,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(M,R)=>{var A,j;if(R.deadline||R.propertyName==="opacity"){const N=(A=i.current)===null||A===void 0?void 0:A.parentElement;(j=s.current)===null||j===void 0||j.call(s).then(()=>{N==null||N.remove()})}return!1}},({className:M},R)=>v.createElement("div",{ref:xa(i,R),className:he(e,M,{"wave-quick":T}),style:P}))},HOe=(t,e)=>{var n;const{component:r}=e;if(r==="Checkbox"&&!(!((n=t.querySelector("input"))===null||n===void 0)&&n.checked))return;const o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",t==null||t.insertBefore(o,t==null?void 0:t.firstChild);const i=Lz();let s=null;function a(){return s}s=i(v.createElement(BOe,Object.assign({},e,{target:t,registerUnmount:a})),o)},UOe=(t,e,n)=>{const{wave:r}=v.useContext(tr),[,o,i]=wa(),s=Bo(c=>{const u=t.current;if(r!=null&&r.disabled||!u)return;const d=u.querySelector(`.${Coe}`)||u,{showEffect:f}=r||{};(f||HOe)(d,{className:e,token:o,component:n,event:c,hashId:i})}),a=v.useRef(null);return c=>{Sr.cancel(a.current),a.current=Sr(()=>{s(c)})}},WOe=t=>{const{children:e,disabled:n,component:r}=t,{getPrefixCls:o}=v.useContext(tr),i=v.useRef(null),s=o("wave"),[,a]=FOe(s),l=UOe(i,he(s,a),r);if(ce.useEffect(()=>{const u=i.current;if(!u||u.nodeType!==1||n)return;const d=f=>{!HT(f.target)||!u.getAttribute||u.getAttribute("disabled")||u.disabled||u.className.includes("disabled")||u.className.includes("-leave")||l(f)};return u.addEventListener("click",d,!0),()=>{u.removeEventListener("click",d,!0)}},[n]),!ce.isValidElement(e))return e??null;const c=ch(e)?xa(pg(e),i):i;return _d(e,{ref:c})},Du=t=>{const e=ce.useContext(Lp);return ce.useMemo(()=>t?typeof t=="string"?t??e:typeof t=="function"?t(e):e:e,[t,e])},Eoe=v.createContext(null),ew=(t,e)=>{const n=v.useContext(Eoe),r=v.useMemo(()=>{if(!n)return"";const{compactDirection:o,isFirstItem:i,isLastItem:s}=n,a=o==="vertical"?"-vertical-":"-";return he(`${t}-compact${a}item`,{[`${t}-compact${a}first-item`]:i,[`${t}-compact${a}last-item`]:s,[`${t}-compact${a}item-rtl`]:e==="rtl"})},[t,e,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},VOe=t=>{const{children:e}=t;return v.createElement(Eoe.Provider,{value:null},e)};var qOe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Poe=v.createContext(void 0),KOe=t=>{const{getPrefixCls:e,direction:n}=v.useContext(tr),{prefixCls:r,size:o,className:i}=t,s=qOe(t,["prefixCls","size","className"]),a=e("btn-group",r),[,,l]=wa(),c=v.useMemo(()=>{switch(o){case"large":return"lg";case"small":return"sm";default:return""}},[o]),u=he(a,{[`${a}-${c}`]:c,[`${a}-rtl`]:n==="rtl"},i,l);return v.createElement(Poe.Provider,{value:o},v.createElement("div",Object.assign({},s,{className:u})))},nq=/^[\u4E00-\u9FA5]{2}$/,fN=nq.test.bind(nq);function rq(t){return typeof t=="string"}function Bk(t){return t==="text"||t==="link"}function GOe(t,e){if(t==null)return;const n=e?" ":"";return typeof t!="string"&&typeof t!="number"&&rq(t.type)&&fN(t.props.children)?_d(t,{children:t.props.children.split("").join(n)}):rq(t)?fN(t)?ce.createElement("span",null,t.split("").join(n)):ce.createElement("span",null,t):uoe(t)?ce.createElement("span",null,t):t}function XOe(t,e){let n=!1;const r=[];return ce.Children.forEach(t,o=>{const i=typeof o,s=i==="string"||i==="number";if(n&&s){const a=r.length-1,l=r[a];r[a]=`${l}${o}`}else r.push(o);n=s}),ce.Children.map(r,o=>GOe(o,e))}["default","primary","danger"].concat(it(Np));const hN=v.forwardRef((t,e)=>{const{className:n,style:r,children:o,prefixCls:i}=t,s=he(`${i}-icon`,n);return ce.createElement("span",{ref:e,className:s,style:r},o)}),oq=v.forwardRef((t,e)=>{const{prefixCls:n,className:r,style:o,iconClassName:i}=t,s=he(`${n}-loading-icon`,r);return ce.createElement(hN,{prefixCls:n,className:s,style:o,ref:e},ce.createElement(Zx,{className:i}))}),Hk=()=>({width:0,opacity:0,transform:"scale(0)"}),Uk=t=>({width:t.scrollWidth,opacity:1,transform:"scale(1)"}),YOe=t=>{const{prefixCls:e,loading:n,existIcon:r,className:o,style:i,mount:s}=t,a=!!n;return r?ce.createElement(oq,{prefixCls:e,className:o,style:i}):ce.createElement($u,{visible:a,motionName:`${e}-loading-icon-motion`,motionAppear:!s,motionEnter:!s,motionLeave:!s,removeOnLeave:!0,onAppearStart:Hk,onAppearActive:Uk,onEnterStart:Hk,onEnterActive:Uk,onLeaveStart:Uk,onLeaveActive:Hk},({className:l,style:c},u)=>{const d=Object.assign(Object.assign({},i),c);return ce.createElement(oq,{prefixCls:e,className:he(o,l),style:d,ref:u})})},iq=(t,e)=>({[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${t}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),QOe=t=>{const{componentCls:e,fontSize:n,lineWidth:r,groupBorderColor:o,colorErrorHover:i}=t;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:t.calc(r).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:n}},iq(`${e}-primary`,o),iq(`${e}-danger`,i)]}};var ZOe=["b"],JOe=["v"],Wk=function(e){return Math.round(Number(e||0))},eRe=function(e){if(e instanceof Xr)return e;if(e&&Wt(e)==="object"&&"h"in e&&"b"in e){var n=e,r=n.b,o=Sn(n,ZOe);return de(de({},o),{},{v:r})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},QS=function(t){Nl(n,t);var e=Lc(n);function n(r){return ao(this,n),e.call(this,eRe(r))}return lo(n,[{key:"toHsbString",value:function(){var o=this.toHsb(),i=Wk(o.s*100),s=Wk(o.b*100),a=Wk(o.h),l=o.a,c="hsb(".concat(a,", ").concat(i,"%, ").concat(s,"%)"),u="hsba(".concat(a,", ").concat(i,"%, ").concat(s,"%, ").concat(l.toFixed(l===0?0:2),")");return l===1?c:u}},{key:"toHsb",value:function(){var o=this.toHsv(),i=o.v,s=Sn(o,JOe);return de(de({},s),{},{b:i,a:this.a})}}]),n}(Xr),tRe=function(e){return e instanceof QS?e:new QS(e)};tRe("#1677ff");const nRe=(t,e)=>(t==null?void 0:t.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",rRe=(t,e)=>t?nRe(t,e):"";let oRe=function(){function t(e){ao(this,t);var n;if(this.cleared=!1,e instanceof t){this.metaColor=e.metaColor.clone(),this.colors=(n=e.colors)===null||n===void 0?void 0:n.map(o=>({color:new t(o.color),percent:o.percent})),this.cleared=e.cleared;return}const r=Array.isArray(e);r&&e.length?(this.colors=e.map(({color:o,percent:i})=>({color:new t(o),percent:i})),this.metaColor=new QS(this.colors[0].color.metaColor)):this.metaColor=new QS(r?"":e),(!e||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return lo(t,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return rRe(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(o=>`${o.color.toRgbString()} ${o.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((r,o)=>{const i=n.colors[o];return r.percent===i.percent&&r.color.equals(i.color)}):this.toHexString()===n.toHexString()}}])}();var iRe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},sRe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:iRe}))},sq=v.forwardRef(sRe);const aRe=t=>({[t.componentCls]:{[`${t.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}},[`${t.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${t.motionDurationMid} ${t.motionEaseInOut},
        opacity ${t.motionDurationMid} ${t.motionEaseInOut} !important`}}}),lRe=t=>({animationDuration:t,animationFillMode:"both"}),cRe=t=>({animationDuration:t,animationFillMode:"both"}),Fz=(t,e,n,r,o=!1)=>{const i=o?"&":"";return{[`
      ${i}${t}-enter,
      ${i}${t}-appear
    `]:Object.assign(Object.assign({},lRe(r)),{animationPlayState:"paused"}),[`${i}${t}-leave`]:Object.assign(Object.assign({},cRe(r)),{animationPlayState:"paused"}),[`
      ${i}${t}-enter${t}-enter-active,
      ${i}${t}-appear${t}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${i}${t}-leave${t}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},uRe=new Yn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),dRe=new Yn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),fRe=new Yn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),hRe=new Yn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),pRe=new Yn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),gRe=new Yn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),mRe=new Yn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),vRe=new Yn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),yRe={"move-up":{inKeyframes:mRe,outKeyframes:vRe},"move-down":{inKeyframes:uRe,outKeyframes:dRe},"move-left":{inKeyframes:fRe,outKeyframes:hRe},"move-right":{inKeyframes:pRe,outKeyframes:gRe}},aq=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:o,outKeyframes:i}=yRe[e];return[Fz(r,o,i,t.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:t.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},_oe=new Yn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),Ioe=new Yn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),Toe=new Yn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),Moe=new Yn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),bRe=new Yn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),SRe=new Yn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),xRe=new Yn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),wRe=new Yn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),CRe={"slide-up":{inKeyframes:_oe,outKeyframes:Ioe},"slide-down":{inKeyframes:Toe,outKeyframes:Moe},"slide-left":{inKeyframes:bRe,outKeyframes:SRe},"slide-right":{inKeyframes:xRe,outKeyframes:wRe}},A_=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:o,outKeyframes:i}=CRe[e];return[Fz(r,o,i,t.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:t.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInQuint}}]},zz=new Yn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),ERe=new Yn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),lq=new Yn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),cq=new Yn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),PRe=new Yn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),_Re=new Yn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),IRe=new Yn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),TRe=new Yn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),MRe=new Yn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),ORe=new Yn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),RRe=new Yn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),kRe=new Yn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),ARe={zoom:{inKeyframes:zz,outKeyframes:ERe},"zoom-big":{inKeyframes:lq,outKeyframes:cq},"zoom-big-fast":{inKeyframes:lq,outKeyframes:cq},"zoom-left":{inKeyframes:IRe,outKeyframes:TRe},"zoom-right":{inKeyframes:MRe,outKeyframes:ORe},"zoom-up":{inKeyframes:PRe,outKeyframes:_Re},"zoom-down":{inKeyframes:RRe,outKeyframes:kRe}},$Re=(t,e)=>{const{antCls:n}=t,r=`${n}-${e}`,{inKeyframes:o,outKeyframes:i}=ARe[e];return[Fz(r,o,i,t.motionDurationFast),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:t.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:t.motionEaseInOutCirc}}]},DRe=(t,e)=>{const{r:n,g:r,b:o,a:i}=t.toRgb(),s=new QS(t.toRgbString()).onBackground(e).toHsv();return i<=.5?s.v>.5:n*.299+r*.587+o*.114>192},Ooe=t=>{const{paddingInline:e,onlyIconSize:n}=t;return Tr(t,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:n})},Roe=t=>{var e,n,r,o,i,s;const a=(e=t.contentFontSize)!==null&&e!==void 0?e:t.fontSize,l=(n=t.contentFontSizeSM)!==null&&n!==void 0?n:t.fontSize,c=(r=t.contentFontSizeLG)!==null&&r!==void 0?r:t.fontSizeLG,u=(o=t.contentLineHeight)!==null&&o!==void 0?o:rP(a),d=(i=t.contentLineHeightSM)!==null&&i!==void 0?i:rP(l),f=(s=t.contentLineHeightLG)!==null&&s!==void 0?s:rP(c),h=DRe(new oRe(t.colorBgSolid),"#fff")?"#000":"#fff",g=Np.reduce((y,m)=>Object.assign(Object.assign({},y),{[`${m}ShadowColor`]:`0 ${Re(t.controlOutlineWidth)} 0 ${Mb(t[`${m}1`],t.colorBgContainer)}`}),{});return Object.assign(Object.assign({},g),{fontWeight:400,defaultShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlTmpOutline}`,primaryShadow:`0 ${t.controlOutlineWidth}px 0 ${t.controlOutline}`,dangerShadow:`0 ${t.controlOutlineWidth}px 0 ${t.colorErrorOutline}`,primaryColor:t.colorTextLightSolid,dangerColor:t.colorTextLightSolid,borderColorDisabled:t.colorBorder,defaultGhostColor:t.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:t.colorBgContainer,paddingInline:t.paddingContentHorizontal-t.lineWidth,paddingInlineLG:t.paddingContentHorizontal-t.lineWidth,paddingInlineSM:8-t.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:t.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:t.colorText,textTextHoverColor:t.colorText,textTextActiveColor:t.colorText,textHoverBg:t.colorFillTertiary,defaultColor:t.colorText,defaultBg:t.colorBgContainer,defaultBorderColor:t.colorBorder,defaultBorderColorDisabled:t.colorBorder,defaultHoverBg:t.colorBgContainer,defaultHoverColor:t.colorPrimaryHover,defaultHoverBorderColor:t.colorPrimaryHover,defaultActiveBg:t.colorBgContainer,defaultActiveColor:t.colorPrimaryActive,defaultActiveBorderColor:t.colorPrimaryActive,solidTextColor:h,contentFontSize:a,contentFontSizeSM:l,contentFontSizeLG:c,contentLineHeight:u,contentLineHeightSM:d,contentLineHeightLG:f,paddingBlock:Math.max((t.controlHeight-a*u)/2-t.lineWidth,0),paddingBlockSM:Math.max((t.controlHeightSM-l*d)/2-t.lineWidth,0),paddingBlockLG:Math.max((t.controlHeightLG-c*f)/2-t.lineWidth,0)})},jRe=t=>{const{componentCls:e,iconCls:n,fontWeight:r,opacityLoading:o,motionDurationSlow:i,motionEaseInOut:s,marginXS:a,calc:l}=t;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:t.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Re(t.lineWidth)} ${t.lineType} transparent`,cursor:"pointer",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:t.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:XT(),"> a":{color:"currentColor"},"&:not(:disabled)":Fp(t),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:o,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(c=>`${c} ${i} ${s}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:l(a).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:l(a).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:l(a).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:l(a).mul(-1).equal()}}}}}},koe=(t,e,n)=>({[`&:not(:disabled):not(${t}-disabled)`]:{"&:hover":e,"&:active":n}}),LRe=t=>({minWidth:t.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),NRe=t=>({borderRadius:t.controlHeight,paddingInlineStart:t.calc(t.controlHeight).div(2).equal(),paddingInlineEnd:t.calc(t.controlHeight).div(2).equal()}),FRe=t=>({cursor:"not-allowed",borderColor:t.borderColorDisabled,color:t.colorTextDisabled,background:t.colorBgContainerDisabled,boxShadow:"none"}),eM=(t,e,n,r,o,i,s,a)=>({[`&${t}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:e,borderColor:r||void 0,boxShadow:"none"},koe(t,Object.assign({background:e},s),Object.assign({background:e},a))),{"&:disabled":{cursor:"not-allowed",color:o||void 0,borderColor:i||void 0}})}),zRe=t=>({[`&:disabled, &${t.componentCls}-disabled`]:Object.assign({},FRe(t))}),BRe=t=>({[`&:disabled, &${t.componentCls}-disabled`]:{cursor:"not-allowed",color:t.colorTextDisabled}}),tM=(t,e,n,r)=>{const i=r&&["link","text"].includes(r)?BRe:zRe;return Object.assign(Object.assign({},i(t)),koe(t.componentCls,e,n))},nM=(t,e,n,r,o)=>({[`&${t.componentCls}-variant-solid`]:Object.assign({color:e,background:n},tM(t,r,o))}),rM=(t,e,n,r,o)=>({[`&${t.componentCls}-variant-outlined, &${t.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:n},tM(t,r,o))}),oM=t=>({[`&${t.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),iM=(t,e,n,r)=>({[`&${t.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},tM(t,n,r))}),xu=(t,e,n,r,o)=>({[`&${t.componentCls}-variant-${n}`]:Object.assign({color:e,boxShadow:"none"},tM(t,r,o,n))}),HRe=t=>{const{componentCls:e}=t;return Np.reduce((n,r)=>{const o=t[`${r}6`],i=t[`${r}1`],s=t[`${r}5`],a=t[`${r}2`],l=t[`${r}3`],c=t[`${r}7`];return Object.assign(Object.assign({},n),{[`&${e}-color-${r}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:o,boxShadow:t[`${r}ShadowColor`]},nM(t,t.colorTextLightSolid,o,{background:s},{background:c})),rM(t,o,t.colorBgContainer,{color:s,borderColor:s,background:t.colorBgContainer},{color:c,borderColor:c,background:t.colorBgContainer})),oM(t)),iM(t,i,{background:a},{background:l})),xu(t,o,"link",{color:s},{color:c})),xu(t,o,"text",{color:s,background:i},{color:c,background:l}))})},{})},URe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.defaultColor,boxShadow:t.defaultShadow},nM(t,t.solidTextColor,t.colorBgSolid,{color:t.solidTextColor,background:t.colorBgSolidHover},{color:t.solidTextColor,background:t.colorBgSolidActive})),oM(t)),iM(t,t.colorFillTertiary,{background:t.colorFillSecondary},{background:t.colorFill})),eM(t.componentCls,t.ghostBg,t.defaultGhostColor,t.defaultGhostBorderColor,t.colorTextDisabled,t.colorBorder)),xu(t,t.textTextColor,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),WRe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorPrimary,boxShadow:t.primaryShadow},rM(t,t.colorPrimary,t.colorBgContainer,{color:t.colorPrimaryTextHover,borderColor:t.colorPrimaryHover,background:t.colorBgContainer},{color:t.colorPrimaryTextActive,borderColor:t.colorPrimaryActive,background:t.colorBgContainer})),oM(t)),iM(t,t.colorPrimaryBg,{background:t.colorPrimaryBgHover},{background:t.colorPrimaryBorder})),xu(t,t.colorPrimaryText,"text",{color:t.colorPrimaryTextHover,background:t.colorPrimaryBg},{color:t.colorPrimaryTextActive,background:t.colorPrimaryBorder})),xu(t,t.colorPrimaryText,"link",{color:t.colorPrimaryTextHover,background:t.linkHoverBg},{color:t.colorPrimaryTextActive})),eM(t.componentCls,t.ghostBg,t.colorPrimary,t.colorPrimary,t.colorTextDisabled,t.colorBorder,{color:t.colorPrimaryHover,borderColor:t.colorPrimaryHover},{color:t.colorPrimaryActive,borderColor:t.colorPrimaryActive})),VRe=t=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorError,boxShadow:t.dangerShadow},nM(t,t.dangerColor,t.colorError,{background:t.colorErrorHover},{background:t.colorErrorActive})),rM(t,t.colorError,t.colorBgContainer,{color:t.colorErrorHover,borderColor:t.colorErrorBorderHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),oM(t)),iM(t,t.colorErrorBg,{background:t.colorErrorBgFilledHover},{background:t.colorErrorBgActive})),xu(t,t.colorError,"text",{color:t.colorErrorHover,background:t.colorErrorBg},{color:t.colorErrorHover,background:t.colorErrorBgActive})),xu(t,t.colorError,"link",{color:t.colorErrorHover},{color:t.colorErrorActive})),eM(t.componentCls,t.ghostBg,t.colorError,t.colorError,t.colorTextDisabled,t.colorBorder,{color:t.colorErrorHover,borderColor:t.colorErrorHover},{color:t.colorErrorActive,borderColor:t.colorErrorActive})),qRe=t=>Object.assign(Object.assign({},xu(t,t.colorLink,"link",{color:t.colorLinkHover},{color:t.colorLinkActive})),eM(t.componentCls,t.ghostBg,t.colorInfo,t.colorInfo,t.colorTextDisabled,t.colorBorder,{color:t.colorInfoHover,borderColor:t.colorInfoHover},{color:t.colorInfoActive,borderColor:t.colorInfoActive})),KRe=t=>{const{componentCls:e}=t;return Object.assign({[`${e}-color-default`]:URe(t),[`${e}-color-primary`]:WRe(t),[`${e}-color-dangerous`]:VRe(t),[`${e}-color-link`]:qRe(t)},HRe(t))},GRe=t=>Object.assign(Object.assign(Object.assign(Object.assign({},rM(t,t.defaultBorderColor,t.defaultBg,{color:t.defaultHoverColor,borderColor:t.defaultHoverBorderColor,background:t.defaultHoverBg},{color:t.defaultActiveColor,borderColor:t.defaultActiveBorderColor,background:t.defaultActiveBg})),xu(t,t.textTextColor,"text",{color:t.textTextHoverColor,background:t.textHoverBg},{color:t.textTextActiveColor,background:t.colorBgTextActive})),nM(t,t.primaryColor,t.colorPrimary,{background:t.colorPrimaryHover,color:t.primaryColor},{background:t.colorPrimaryActive,color:t.primaryColor})),xu(t,t.colorLink,"link",{color:t.colorLinkHover,background:t.linkHoverBg},{color:t.colorLinkActive})),Bz=(t,e="")=>{const{componentCls:n,controlHeight:r,fontSize:o,borderRadius:i,buttonPaddingHorizontal:s,iconCls:a,buttonPaddingVertical:l,buttonIconOnlyFontSize:c}=t;return[{[e]:{fontSize:o,height:r,padding:`${Re(l)} ${Re(s)}`,borderRadius:i,[`&${n}-icon-only`]:{width:r,[a]:{fontSize:c}}}},{[`${n}${n}-circle${e}`]:LRe(t)},{[`${n}${n}-round${e}`]:NRe(t)}]},XRe=t=>{const e=Tr(t,{fontSize:t.contentFontSize});return Bz(e,t.componentCls)},YRe=t=>{const e=Tr(t,{controlHeight:t.controlHeightSM,fontSize:t.contentFontSizeSM,padding:t.paddingXS,buttonPaddingHorizontal:t.paddingInlineSM,buttonPaddingVertical:0,borderRadius:t.borderRadiusSM,buttonIconOnlyFontSize:t.onlyIconSizeSM});return Bz(e,`${t.componentCls}-sm`)},QRe=t=>{const e=Tr(t,{controlHeight:t.controlHeightLG,fontSize:t.contentFontSizeLG,buttonPaddingHorizontal:t.paddingInlineLG,buttonPaddingVertical:0,borderRadius:t.borderRadiusLG,buttonIconOnlyFontSize:t.onlyIconSizeLG});return Bz(e,`${t.componentCls}-lg`)},ZRe=t=>{const{componentCls:e}=t;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},JRe=li("Button",t=>{const e=Ooe(t);return[jRe(e),XRe(e),YRe(e),QRe(e),ZRe(e),KRe(e),GRe(e),QOe(e)]},Roe,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function eke(t,e,n){const{focusElCls:r,focus:o,borderElCls:i}=n,s=i?"> *":"",a=["hover",o?"focus":null,"active"].filter(Boolean).map(l=>`&:${l} ${s}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[a]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${s}`]:{zIndex:0}})}}function tke(t,e,n){const{borderElCls:r}=n,o=r?`> ${r}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${o}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${o}, &${t}-sm ${o}, &${t}-lg ${o}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${o}, &${t}-sm ${o}, &${t}-lg ${o}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function Hz(t,e={focus:!0}){const{componentCls:n}=t,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},eke(t,r,e)),tke(n,r,e))}}function nke(t,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:t.calc(t.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function rke(t,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${t}-sm, &${t}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function oke(t){const e=`${t.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},nke(t,e)),rke(t.componentCls,e))}}const ike=t=>{const{componentCls:e,colorPrimaryHover:n,lineWidth:r,calc:o}=t,i=o(r).mul(-1).equal(),s=a=>{const l=`${e}-compact${a?"-vertical":""}-item${e}-primary:not([disabled])`;return{[`${l} + ${l}::before`]:{position:"absolute",top:a?i:0,insetInlineStart:a?0:i,backgroundColor:n,content:'""',width:a?"100%":r,height:a?r:"100%"}}};return Object.assign(Object.assign({},s()),s(!0))},ske=YT(["Button","compact"],t=>{const e=Ooe(t);return[Hz(e),oke(e),ike(e)]},Roe);var ake=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function lke(t){if(typeof t=="object"&&t){let e=t==null?void 0:t.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!t,delay:0}}const cke={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},uke=ce.forwardRef((t,e)=>{var n,r;const{loading:o=!1,prefixCls:i,color:s,variant:a,type:l,danger:c=!1,shape:u="default",size:d,styles:f,disabled:h,className:g,rootClassName:y,children:m,icon:S,iconPosition:x="start",ghost:C=!1,block:E=!1,htmlType:P="button",classNames:I,style:T={},autoInsertSpace:M,autoFocus:R}=t,A=ake(t,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),j=l||"default",{button:N}=ce.useContext(tr),[k,D]=v.useMemo(()=>{if(s&&a)return[s,a];if(l||c){const Ae=cke[j]||[];return c?["danger",Ae[1]]:Ae}return N!=null&&N.color&&(N!=null&&N.variant)?[N.color,N.variant]:["default","outlined"]},[l,s,a,c,N==null?void 0:N.variant,N==null?void 0:N.color]),H=k==="danger"?"dangerous":k,{getPrefixCls:U,direction:B,autoInsertSpace:W,className:K,style:q,classNames:X,styles:Z}=Bl("button"),Y=(n=M??W)!==null&&n!==void 0?n:!0,G=U("btn",i),[J,ne,ee]=JRe(G),re=v.useContext(Pd),le=h??re,ae=v.useContext(Poe),ie=v.useMemo(()=>lke(o),[o]),[ge,ve]=v.useState(ie.loading),[fe,ue]=v.useState(!1),Ce=v.useRef(null),ye=hg(e,Ce),ke=v.Children.count(m)===1&&!S&&!Bk(D),Be=v.useRef(!0);ce.useEffect(()=>(Be.current=!1,()=>{Be.current=!0}),[]),v.useEffect(()=>{let Ae=null;ie.delay>0?Ae=setTimeout(()=>{Ae=null,ve(!0)},ie.delay):ve(ie.loading);function Ne(){Ae&&(clearTimeout(Ae),Ae=null)}return Ne},[ie]),v.useEffect(()=>{if(!Ce.current||!Y)return;const Ae=Ce.current.textContent||"";ke&&fN(Ae)?fe||ue(!0):fe&&ue(!1)}),v.useEffect(()=>{R&&Ce.current&&Ce.current.focus()},[]);const Ue=ce.useCallback(Ae=>{var Ne;if(ge||le){Ae.preventDefault();return}(Ne=t.onClick)===null||Ne===void 0||Ne.call(t,("href"in t,Ae))},[t.onClick,ge,le]),{compactSize:We,compactItemClassnames:Me}=ew(G,B),$e={large:"lg",small:"sm",middle:void 0},Qe=Du(Ae=>{var Ne,xt;return(xt=(Ne=d??We)!==null&&Ne!==void 0?Ne:ae)!==null&&xt!==void 0?xt:Ae}),nt=Qe&&(r=$e[Qe])!==null&&r!==void 0?r:"",ht=ge?"loading":S,ft=zl(A,["navigate"]),et=he(G,ne,ee,{[`${G}-${u}`]:u!=="default"&&u,[`${G}-${j}`]:j,[`${G}-dangerous`]:c,[`${G}-color-${H}`]:H,[`${G}-variant-${D}`]:D,[`${G}-${nt}`]:nt,[`${G}-icon-only`]:!m&&m!==0&&!!ht,[`${G}-background-ghost`]:C&&!Bk(D),[`${G}-loading`]:ge,[`${G}-two-chinese-chars`]:fe&&Y&&!ge,[`${G}-block`]:E,[`${G}-rtl`]:B==="rtl",[`${G}-icon-end`]:x==="end"},Me,g,y,K),pe=Object.assign(Object.assign({},q),T),Pe=he(I==null?void 0:I.icon,X.icon),je=Object.assign(Object.assign({},(f==null?void 0:f.icon)||{}),Z.icon||{}),Le=S&&!ge?ce.createElement(hN,{prefixCls:G,className:Pe,style:je},S):o&&typeof o=="object"&&o.icon?ce.createElement(hN,{prefixCls:G,className:Pe,style:je},o.icon):ce.createElement(YOe,{existIcon:!!S,prefixCls:G,loading:ge,mount:Be.current}),qe=m||m===0?XOe(m,ke&&Y):null;if(ft.href!==void 0)return J(ce.createElement("a",Object.assign({},ft,{className:he(et,{[`${G}-disabled`]:le}),href:le?void 0:ft.href,style:pe,onClick:Ue,ref:ye,tabIndex:le?-1:0}),Le,qe));let at=ce.createElement("button",Object.assign({},A,{type:P,className:et,style:pe,onClick:Ue,disabled:le,ref:ye}),Le,qe,Me&&ce.createElement(ske,{prefixCls:G}));return Bk(D)||(at=ce.createElement(WOe,{component:"Button",disabled:ge},at)),J(at)}),Rl=uke;Rl.Group=KOe;Rl.__ANT_BUTTON=!0;const Id=v.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),Aoe=v.createContext(null),$oe=t=>{const e=zl(t,["prefixCls"]);return v.createElement(Ez,Object.assign({},e))},Uz=v.createContext({prefixCls:""}),Qa=v.createContext({}),dke=({children:t,status:e,override:n})=>{const r=v.useContext(Qa),o=v.useMemo(()=>{const i=Object.assign({},r);return n&&delete i.isFormItemInput,e&&(delete i.status,delete i.hasFeedback,delete i.feedbackIcon),i},[e,n,r]);return v.createElement(Qa.Provider,{value:o},t)},Doe=v.createContext(void 0),pN=t=>{const{space:e,form:n,children:r}=t;if(r==null)return null;let o=r;return n&&(o=ce.createElement(dke,{override:!0,status:!0},o)),e&&(o=ce.createElement(VOe,null,o)),o};function fke(...t){const e={};return t.forEach(n=>{n&&Object.keys(n).forEach(r=>{n[r]!==void 0&&(e[r]=n[r])})}),e}var hke=function(e){if(vs()&&window.document.documentElement){var n=Array.isArray(e)?e:[e],r=window.document.documentElement;return n.some(function(o){return o in r.style})}return!1};function uq(t,e){return hke(t)}const pke=t=>{const{componentCls:e}=t;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},gke=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},mke=(t,e)=>{const{prefixCls:n,componentCls:r,gridColumns:o}=t,i={};for(let s=o;s>=0;s--)s===0?(i[`${r}${e}-${s}`]={display:"none"},i[`${r}-push-${s}`]={insetInlineStart:"auto"},i[`${r}-pull-${s}`]={insetInlineEnd:"auto"},i[`${r}${e}-push-${s}`]={insetInlineStart:"auto"},i[`${r}${e}-pull-${s}`]={insetInlineEnd:"auto"},i[`${r}${e}-offset-${s}`]={marginInlineStart:0},i[`${r}${e}-order-${s}`]={order:0}):(i[`${r}${e}-${s}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${s/o*100}%`,maxWidth:`${s/o*100}%`}],i[`${r}${e}-push-${s}`]={insetInlineStart:`${s/o*100}%`},i[`${r}${e}-pull-${s}`]={insetInlineEnd:`${s/o*100}%`},i[`${r}${e}-offset-${s}`]={marginInlineStart:`${s/o*100}%`},i[`${r}${e}-order-${s}`]={order:s});return i[`${r}${e}-flex`]={flex:`var(--${n}${e}-flex)`},i},gN=(t,e)=>mke(t,e),vke=(t,e,n)=>({[`@media (min-width: ${Re(e)})`]:Object.assign({},gN(t,n))}),yke=()=>({}),bke=()=>({}),Ske=li("Grid",pke,yke),xke=t=>({xs:t.screenXSMin,sm:t.screenSMMin,md:t.screenMDMin,lg:t.screenLGMin,xl:t.screenXLMin,xxl:t.screenXXLMin}),wke=li("Grid",t=>{const e=Tr(t,{gridColumns:24}),n=xke(e);return delete n.xs,[gke(e),gN(e,""),gN(e,"-xs"),Object.keys(n).map(r=>vke(e,n[r],`-${r}`)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{})]},bke),Cke=t=>{const{componentCls:e,notificationMarginEdge:n,animationMaxHeight:r}=t,o=`${e}-notice`,i=new Yn("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),s=new Yn("antNotificationTopFadeIn",{"0%":{top:-r,opacity:0},"100%":{top:0,opacity:1}}),a=new Yn("antNotificationBottomFadeIn",{"0%":{bottom:t.calc(r).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),l=new Yn("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[e]:{[`&${e}-top, &${e}-bottom`]:{marginInline:0,[o]:{marginInline:"auto auto"}},[`&${e}-top`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:s}},[`&${e}-bottom`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:a}},[`&${e}-topRight, &${e}-bottomRight`]:{[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:i}},[`&${e}-topLeft, &${e}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[o]:{marginInlineEnd:"auto",marginInlineStart:0},[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationName:l}}}}},Eke=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Pke={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},_ke=(t,e)=>{const{componentCls:n}=t;return{[`${n}-${e}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[e.startsWith("top")?"top":"bottom"]:0,[Pke[e]]:{value:0,_skip_check_:!0}}}}},Ike=t=>{const e={};for(let n=1;n<t.notificationStackLayer;n++)e[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${t.componentCls}-notice`]:{opacity:0,transition:`opacity ${t.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${t.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},e)},Tke=t=>{const e={};for(let n=1;n<t.notificationStackLayer;n++)e[`&:nth-last-child(${n+1})`]={background:t.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},e)},Mke=t=>{const{componentCls:e}=t;return Object.assign({[`${e}-stack`]:{[`& > ${e}-notice-wrapper`]:Object.assign({transition:`transform ${t.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},Ike(t))},[`${e}-stack:not(${e}-stack-expanded)`]:{[`& > ${e}-notice-wrapper`]:Object.assign({},Tke(t))},[`${e}-stack${e}-stack-expanded`]:{[`& > ${e}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${t.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:t.margin,width:"100%",insetInline:0,bottom:t.calc(t.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Eke.map(n=>_ke(t,n)).reduce((n,r)=>Object.assign(Object.assign({},n),r),{}))},joe=t=>{const{iconCls:e,componentCls:n,boxShadow:r,fontSizeLG:o,notificationMarginBottom:i,borderRadiusLG:s,colorSuccess:a,colorInfo:l,colorWarning:c,colorError:u,colorTextHeading:d,notificationBg:f,notificationPadding:h,notificationMarginEdge:g,notificationProgressBg:y,notificationProgressHeight:m,fontSize:S,lineHeight:x,width:C,notificationIconSize:E,colorText:P}=t,I=`${n}-notice`;return{position:"relative",marginBottom:i,marginInlineStart:"auto",background:f,borderRadius:s,boxShadow:r,[I]:{padding:h,width:C,maxWidth:`calc(100vw - ${Re(t.calc(g).mul(2).equal())})`,overflow:"hidden",lineHeight:x,wordWrap:"break-word"},[`${I}-message`]:{marginBottom:t.marginXS,color:d,fontSize:o,lineHeight:t.lineHeightLG},[`${I}-description`]:{fontSize:S,color:P},[`${I}-closable ${I}-message`]:{paddingInlineEnd:t.paddingLG},[`${I}-with-icon ${I}-message`]:{marginBottom:t.marginXS,marginInlineStart:t.calc(t.marginSM).add(E).equal(),fontSize:o},[`${I}-with-icon ${I}-description`]:{marginInlineStart:t.calc(t.marginSM).add(E).equal(),fontSize:S},[`${I}-icon`]:{position:"absolute",fontSize:E,lineHeight:1,[`&-success${e}`]:{color:a},[`&-info${e}`]:{color:l},[`&-warning${e}`]:{color:c},[`&-error${e}`]:{color:u}},[`${I}-close`]:Object.assign({position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:t.colorIconHover,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},Fp(t)),[`${I}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${Re(s)} * 2)`,left:{_skip_check_:!0,value:s},right:{_skip_check_:!0,value:s},bottom:0,blockSize:m,border:0,"&, &::-webkit-progress-bar":{borderRadius:s,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:y},"&::-webkit-progress-value":{borderRadius:s,background:y}},[`${I}-actions`]:{float:"right",marginTop:t.marginSM}}},Oke=t=>{const{componentCls:e,notificationMarginBottom:n,notificationMarginEdge:r,motionDurationMid:o,motionEaseInOut:i}=t,s=`${e}-notice`,a=new Yn("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[e]:Object.assign(Object.assign({},xs(t)),{position:"fixed",zIndex:t.zIndexPopup,marginRight:{value:r,_skip_check_:!0},[`${e}-hook-holder`]:{position:"relative"},[`${e}-fade-appear-prepare`]:{opacity:"0 !important"},[`${e}-fade-enter, ${e}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:i,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${e}-fade-leave`]:{animationTimingFunction:i,animationFillMode:"both",animationDuration:o,animationPlayState:"paused"},[`${e}-fade-enter${e}-fade-enter-active, ${e}-fade-appear${e}-fade-appear-active`]:{animationPlayState:"running"},[`${e}-fade-leave${e}-fade-leave-active`]:{animationName:a,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${s}-actions`]:{float:"left"}}})},{[e]:{[`${s}-wrapper`]:Object.assign({},joe(t))}}]},Loe=t=>({zIndexPopup:t.zIndexPopupBase+voe+50,width:384}),Noe=t=>{const e=t.paddingMD,n=t.paddingLG;return Tr(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:e,notificationPaddingHorizontal:n,notificationIconSize:t.calc(t.fontSizeLG).mul(t.lineHeightLG).equal(),notificationCloseButtonSize:t.calc(t.controlHeightLG).mul(.55).equal(),notificationMarginBottom:t.margin,notificationPadding:`${Re(t.paddingMD)} ${Re(t.paddingContentHorizontalLG)}`,notificationMarginEdge:t.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${t.colorPrimaryBorderHover}, ${t.colorPrimary})`})},Foe=li("Notification",t=>{const e=Noe(t);return[Oke(e),Cke(e),Mke(e)]},Loe),Rke=YT(["Notification","PurePanel"],t=>{const e=`${t.componentCls}-notice`,n=Noe(t);return{[`${e}-pure-panel`]:Object.assign(Object.assign({},joe(n)),{width:n.width,maxWidth:`calc(100vw - ${Re(t.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},Loe);var kke=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Wz(t,e){return e===null||e===!1?null:e||v.createElement(Qx,{className:`${t}-close-icon`})}const Ake={success:QT,info:$z,error:Kv,warning:ZT},zoe=t=>{const{prefixCls:e,icon:n,type:r,message:o,description:i,actions:s,role:a="alert"}=t;let l=null;return n?l=v.createElement("span",{className:`${e}-icon`},n):r&&(l=v.createElement(Ake[r]||null,{className:he(`${e}-icon`,`${e}-icon-${r}`)})),v.createElement("div",{className:he({[`${e}-with-icon`]:l}),role:a},l,v.createElement("div",{className:`${e}-message`},o),v.createElement("div",{className:`${e}-description`},i),s&&v.createElement("div",{className:`${e}-actions`},s))},$ke=t=>{const{prefixCls:e,className:n,icon:r,type:o,message:i,description:s,btn:a,actions:l,closable:c=!0,closeIcon:u,className:d}=t,f=kke(t,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:h}=v.useContext(tr),g=l??a,y=e||h("notification"),m=`${y}-notice`,S=Nc(y),[x,C,E]=Foe(y,S);return x(v.createElement("div",{className:he(`${m}-pure-panel`,C,n,E,S)},v.createElement(Rke,{prefixCls:y}),v.createElement(Dz,Object.assign({},f,{prefixCls:y,eventKey:"pure",duration:null,closable:c,className:he({notificationClassName:d}),closeIcon:Wz(y,u),content:v.createElement(zoe,{prefixCls:m,icon:r,type:o,message:i,description:s,actions:g})}))))};function Dke(t,e,n){let r;switch(t){case"top":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:e,bottom:"auto"};break;case"topLeft":r={left:0,top:e,bottom:"auto"};break;case"topRight":r={right:0,top:e,bottom:"auto"};break;case"bottom":r={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":r={left:0,top:"auto",bottom:n};break;default:r={right:0,top:"auto",bottom:n};break}return r}function jke(t){return{motionName:`${t}-fade`}}function Lke(t,e,n){return typeof t<"u"?t:typeof(e==null?void 0:e.closeIcon)<"u"?e.closeIcon:n==null?void 0:n.closeIcon}var Nke=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const dq=24,Fke=4.5,zke="topRight",Bke=({children:t,prefixCls:e})=>{const n=Nc(e),[r,o,i]=Foe(e,n);return r(ce.createElement(poe,{classNames:{list:he(o,i,n)}},t))},Hke=(t,{prefixCls:e,key:n})=>ce.createElement(Bke,{prefixCls:e,key:n},t),Uke=ce.forwardRef((t,e)=>{const{top:n,bottom:r,prefixCls:o,getContainer:i,maxCount:s,rtl:a,onAllRemoved:l,stack:c,duration:u,pauseOnHover:d=!0,showProgress:f}=t,{getPrefixCls:h,getPopupContainer:g,notification:y,direction:m}=v.useContext(tr),[,S]=wa(),x=o||h("notification"),C=M=>Dke(M,n??dq,r??dq),E=()=>he({[`${x}-rtl`]:a??m==="rtl"}),P=()=>jke(x),[I,T]=goe({prefixCls:x,style:C,className:E,motion:P,closable:!0,closeIcon:Wz(x),duration:u??Fke,getContainer:()=>(i==null?void 0:i())||(g==null?void 0:g())||document.body,maxCount:s,pauseOnHover:d,showProgress:f,onAllRemoved:l,renderNotifications:Hke,stack:c===!1?!1:{threshold:typeof c=="object"?c==null?void 0:c.threshold:void 0,offset:8,gap:S.margin}});return ce.useImperativeHandle(e,()=>Object.assign(Object.assign({},I),{prefixCls:x,notification:y})),T});function Boe(t){const e=ce.useRef(null);return Yx(),[ce.useMemo(()=>{const r=a=>{var l;if(!e.current)return;const{open:c,prefixCls:u,notification:d}=e.current,f=`${u}-notice`,{message:h,description:g,icon:y,type:m,btn:S,actions:x,className:C,style:E,role:P="alert",closeIcon:I,closable:T}=a,M=Nke(a,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),R=x??S,A=Wz(f,Lke(I,t,d));return c(Object.assign(Object.assign({placement:(l=t==null?void 0:t.placement)!==null&&l!==void 0?l:zke},M),{content:ce.createElement(zoe,{prefixCls:f,icon:y,type:m,message:h,description:g,actions:R,role:P}),className:he(m&&`${f}-${m}`,C,d==null?void 0:d.className),style:Object.assign(Object.assign({},d==null?void 0:d.style),E),closeIcon:A,closable:T??!!A}))},i={open:r,destroy:a=>{var l,c;a!==void 0?(l=e.current)===null||l===void 0||l.close(a):(c=e.current)===null||c===void 0||c.destroy()}};return["success","info","warning","error"].forEach(a=>{i[a]=l=>r(Object.assign(Object.assign({},l),{type:a}))}),i},[]),ce.createElement(Uke,Object.assign({key:"notification-holder"},t,{ref:e}))]}function Wke(t){return Boe(t)}const Hoe=ce.createContext({});function Vke(t){return e=>v.createElement(uh,{theme:{token:{motion:!1,zIndexPopupBase:0}}},v.createElement(t,Object.assign({},e)))}const qke=(t,e,n,r,o)=>Vke(s=>{const{prefixCls:a,style:l}=s,c=v.useRef(null),[u,d]=v.useState(0),[f,h]=v.useState(0),[g,y]=xi(!1,{value:s.open}),{getPrefixCls:m}=v.useContext(tr),S=m("select",a);v.useEffect(()=>{if(y(!0),typeof ResizeObserver<"u"){const E=new ResizeObserver(I=>{const T=I[0].target;d(T.offsetHeight+8),h(T.offsetWidth)}),P=setInterval(()=>{var I;const T=`.${S}-dropdown`,M=(I=c.current)===null||I===void 0?void 0:I.querySelector(T);M&&(clearInterval(P),E.observe(M))},10);return()=>{clearInterval(P),E.disconnect()}}},[]);let x=Object.assign(Object.assign({},s),{style:Object.assign(Object.assign({},l),{margin:0}),open:g,visible:g,getPopupContainer:()=>c.current});Object.assign(x,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const C={paddingBottom:u,position:"relative",minWidth:f};return v.createElement("div",{ref:c,style:C},v.createElement(t,Object.assign({},x)))});var sM=function(e){var n=e.className,r=e.customizeIcon,o=e.customizeIconProps,i=e.children,s=e.onMouseDown,a=e.onClick,l=typeof r=="function"?r(o):r;return v.createElement("span",{className:n,onMouseDown:function(u){u.preventDefault(),s==null||s(u)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:a,"aria-hidden":!0},l!==void 0?l:v.createElement("span",{className:he(n.split(/\s+/).map(function(c){return"".concat(c,"-icon")}))},i))},Kke=function(e,n,r,o,i){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=ce.useMemo(function(){if(Wt(o)==="object")return o.clearIcon;if(i)return i},[o,i]),u=ce.useMemo(function(){return!!(!s&&o&&(r.length||a)&&!(l==="combobox"&&a===""))},[o,s,r.length,a,l]);return{allowClear:u,clearIcon:ce.createElement(sM,{className:"".concat(e,"-clear"),onMouseDown:n,customizeIcon:c},"")}},Uoe=v.createContext(null);function Gke(){return v.useContext(Uoe)}function Xke(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=v.useState(!1),n=xe(e,2),r=n[0],o=n[1],i=v.useRef(null),s=function(){window.clearTimeout(i.current)};v.useEffect(function(){return s},[]);var a=function(c,u){s(),i.current=window.setTimeout(function(){o(c),u&&u()},t)};return[r,a,s]}function Woe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=v.useRef(null),n=v.useRef(null);v.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(o){(o||e.current===null)&&(e.current=o),window.clearTimeout(n.current),n.current=window.setTimeout(function(){e.current=null},t)}return[function(){return e.current},r]}function Yke(t,e,n,r){var o=v.useRef(null);o.current={open:e,triggerOpen:n,customizedTrigger:r},v.useEffect(function(){function i(s){var a;if(!((a=o.current)!==null&&a!==void 0&&a.customizedTrigger)){var l=s.target;l.shadowRoot&&s.composed&&(l=s.composedPath()[0]||l),o.current.open&&t().filter(function(c){return c}).every(function(c){return!c.contains(l)&&c!==l})&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function Qke(t){return t&&![It.ESC,It.SHIFT,It.BACKSPACE,It.TAB,It.WIN_KEY,It.ALT,It.META,It.WIN_KEY_RIGHT,It.CTRL,It.SEMICOLON,It.EQUALS,It.CAPS_LOCK,It.CONTEXT_MENU,It.F1,It.F2,It.F3,It.F4,It.F5,It.F6,It.F7,It.F8,It.F9,It.F10,It.F11,It.F12].includes(t)}var Zke=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],nm=void 0;function Jke(t,e){var n=t.prefixCls,r=t.invalidate,o=t.item,i=t.renderItem,s=t.responsive,a=t.responsiveDisabled,l=t.registerSize,c=t.itemKey,u=t.className,d=t.style,f=t.children,h=t.display,g=t.order,y=t.component,m=y===void 0?"div":y,S=Sn(t,Zke),x=s&&!h;function C(M){l(c,M)}v.useEffect(function(){return function(){C(null)}},[]);var E=i&&o!==nm?i(o,{index:g}):f,P;r||(P={opacity:x?0:1,height:x?0:nm,overflowY:x?"hidden":nm,order:s?g:nm,pointerEvents:x?"none":nm,position:x?"absolute":nm});var I={};x&&(I["aria-hidden"]=!0);var T=v.createElement(m,vt({className:he(!r&&n,u),style:de(de({},P),d)},I,S,{ref:e}),E);return s&&(T=v.createElement(Ha,{onResize:function(R){var A=R.offsetWidth;C(A)},disabled:a},T)),T}var aS=v.forwardRef(Jke);aS.displayName="Item";function eAe(t){if(typeof MessageChannel>"u")Sr(t);else{var e=new MessageChannel;e.port1.onmessage=function(){return t()},e.port2.postMessage(void 0)}}function tAe(){var t=v.useRef(null),e=function(r){t.current||(t.current=[],eAe(function(){Ya.unstable_batchedUpdates(function(){t.current.forEach(function(o){o()}),t.current=null})})),t.current.push(r)};return e}function eb(t,e){var n=v.useState(e),r=xe(n,2),o=r[0],i=r[1],s=Bo(function(a){t(function(){i(a)})});return[o,s]}var $_=ce.createContext(null),nAe=["component"],rAe=["className"],oAe=["className"],iAe=function(e,n){var r=v.useContext($_);if(!r){var o=e.component,i=o===void 0?"div":o,s=Sn(e,nAe);return v.createElement(i,vt({},s,{ref:n}))}var a=r.className,l=Sn(r,rAe),c=e.className,u=Sn(e,oAe);return v.createElement($_.Provider,{value:null},v.createElement(aS,vt({ref:n,className:he(a,c)},l,u)))},Voe=v.forwardRef(iAe);Voe.displayName="RawItem";var sAe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],qoe="responsive",Koe="invalidate";function aAe(t){return"+ ".concat(t.length," ...")}function lAe(t,e){var n=t.prefixCls,r=n===void 0?"rc-overflow":n,o=t.data,i=o===void 0?[]:o,s=t.renderItem,a=t.renderRawItem,l=t.itemKey,c=t.itemWidth,u=c===void 0?10:c,d=t.ssr,f=t.style,h=t.className,g=t.maxCount,y=t.renderRest,m=t.renderRawRest,S=t.suffix,x=t.component,C=x===void 0?"div":x,E=t.itemComponent,P=t.onVisibleChange,I=Sn(t,sAe),T=d==="full",M=tAe(),R=eb(M,null),A=xe(R,2),j=A[0],N=A[1],k=j||0,D=eb(M,new Map),F=xe(D,2),H=F[0],U=F[1],B=eb(M,0),W=xe(B,2),K=W[0],q=W[1],X=eb(M,0),Z=xe(X,2),Y=Z[0],G=Z[1],J=eb(M,0),ne=xe(J,2),ee=ne[0],re=ne[1],le=v.useState(null),ae=xe(le,2),ie=ae[0],ge=ae[1],ve=v.useState(null),fe=xe(ve,2),ue=fe[0],Ce=fe[1],ye=v.useMemo(function(){return ue===null&&T?Number.MAX_SAFE_INTEGER:ue||0},[ue,j]),ke=v.useState(!1),Be=xe(ke,2),Ue=Be[0],We=Be[1],Me="".concat(r,"-item"),$e=Math.max(K,Y),Qe=g===qoe,nt=i.length&&Qe,ht=g===Koe,ft=nt||typeof g=="number"&&i.length>g,et=v.useMemo(function(){var bt=i;return nt?j===null&&T?bt=i:bt=i.slice(0,Math.min(i.length,k/u)):typeof g=="number"&&(bt=i.slice(0,g)),bt},[i,u,j,g,nt]),pe=v.useMemo(function(){return nt?i.slice(ye+1):i.slice(et.length)},[i,et,nt,ye]),Pe=v.useCallback(function(bt,ot){var Xe;return typeof l=="function"?l(bt):(Xe=l&&(bt==null?void 0:bt[l]))!==null&&Xe!==void 0?Xe:ot},[l]),je=v.useCallback(s||function(bt){return bt},[s]);function Le(bt,ot,Xe){ue===bt&&(ot===void 0||ot===ie)||(Ce(bt),Xe||(We(bt<i.length-1),P==null||P(bt)),ot!==void 0&&ge(ot))}function qe(bt,ot){N(ot.clientWidth)}function at(bt,ot){U(function(Xe){var qt=new Map(Xe);return ot===null?qt.delete(bt):qt.set(bt,ot),qt})}function Ae(bt,ot){G(ot),q(Y)}function Ne(bt,ot){re(ot)}function xt(bt){return H.get(Pe(et[bt],bt))}lr(function(){if(k&&typeof $e=="number"&&et){var bt=ee,ot=et.length,Xe=ot-1;if(!ot){Le(0,null);return}for(var qt=0;qt<ot;qt+=1){var Tt=xt(qt);if(T&&(Tt=Tt||0),Tt===void 0){Le(qt-1,void 0,!0);break}if(bt+=Tt,Xe===0&&bt<=k||qt===Xe-1&&bt+xt(Xe)<=k){Le(Xe,null);break}else if(bt+$e>k){Le(qt-1,bt-Tt-ee+Y);break}}S&&xt(0)+ee>k&&ge(null)}},[k,H,Y,ee,Pe,et]);var Pt=Ue&&!!pe.length,gn={};ie!==null&&nt&&(gn={position:"absolute",left:ie,top:0});var Xt={prefixCls:Me,responsive:nt,component:E,invalidate:ht},sn=a?function(bt,ot){var Xe=Pe(bt,ot);return v.createElement($_.Provider,{key:Xe,value:de(de({},Xt),{},{order:ot,item:bt,itemKey:Xe,registerSize:at,display:ot<=ye})},a(bt,ot))}:function(bt,ot){var Xe=Pe(bt,ot);return v.createElement(aS,vt({},Xt,{order:ot,key:Xe,item:bt,renderItem:je,itemKey:Xe,registerSize:at,display:ot<=ye}))},Zt={order:Pt?ye:Number.MAX_SAFE_INTEGER,className:"".concat(Me,"-rest"),registerSize:Ae,display:Pt},Vt=y||aAe,an=m?v.createElement($_.Provider,{value:de(de({},Xt),Zt)},m(pe)):v.createElement(aS,vt({},Xt,Zt),typeof Vt=="function"?Vt(pe):Vt),wt=v.createElement(C,vt({className:he(!ht&&r,h),style:f,ref:e},I),et.map(sn),ft?an:null,S&&v.createElement(aS,vt({},Xt,{responsive:Qe,responsiveDisabled:!nt,order:ye,className:"".concat(Me,"-suffix"),registerSize:Ne,display:!0,style:gn}),S));return Qe?v.createElement(Ha,{onResize:qe,disabled:!nt},wt):wt}var pu=v.forwardRef(lAe);pu.displayName="Overflow";pu.Item=Voe;pu.RESPONSIVE=qoe;pu.INVALIDATE=Koe;function cAe(t,e,n){var r=de(de({},t),e);return Object.keys(e).forEach(function(o){var i=e[o];typeof i=="function"&&(r[o]=function(){for(var s,a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return i.apply(void 0,l),(s=t[o])===null||s===void 0?void 0:s.call.apply(s,[t].concat(l))})}),r}var uAe=["prefixCls","id","inputElement","autoFocus","autoComplete","editable","activeDescendantId","value","open","attrs"],dAe=function(e,n){var r=e.prefixCls,o=e.id,i=e.inputElement,s=e.autoFocus,a=e.autoComplete,l=e.editable,c=e.activeDescendantId,u=e.value,d=e.open,f=e.attrs,h=Sn(e,uAe),g=i||v.createElement("input",null),y=g,m=y.ref,S=y.props;return"maxLength"in g.props,g=v.cloneElement(g,de(de(de({type:"search"},cAe(h,S)),{},{id:o,ref:xa(n,m),autoComplete:a||"off",autoFocus:s,className:he("".concat(r,"-selection-search-input"),S==null?void 0:S.className),role:"combobox","aria-expanded":d||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":d?c:void 0},f),{},{value:l?u:"",readOnly:!l,unselectable:l?null:"on",style:de(de({},S.style),{},{opacity:l?null:0})})),g},Goe=v.forwardRef(dAe);function Xoe(t){return Array.isArray(t)?t:t!==void 0?[t]:[]}var fAe=typeof window<"u"&&window.document&&window.document.documentElement,hAe=fAe;function pAe(t){return t!=null}function gAe(t){return!t&&t!==0}function fq(t){return["string","number"].includes(Wt(t))}function Yoe(t){var e=void 0;return t&&(fq(t.title)?e=t.title.toString():fq(t.label)&&(e=t.label.toString())),e}function mAe(t,e){hAe?v.useLayoutEffect(t,e):v.useEffect(t,e)}function vAe(t){var e;return(e=t.key)!==null&&e!==void 0?e:t.value}var hq=function(e){e.preventDefault(),e.stopPropagation()},yAe=function(e){var n=e.id,r=e.prefixCls,o=e.values,i=e.open,s=e.searchValue,a=e.autoClearSearchValue,l=e.inputRef,c=e.placeholder,u=e.disabled,d=e.mode,f=e.showSearch,h=e.autoFocus,g=e.autoComplete,y=e.activeDescendantId,m=e.tabIndex,S=e.removeIcon,x=e.maxTagCount,C=e.maxTagTextLength,E=e.maxTagPlaceholder,P=E===void 0?function(ve){return"+ ".concat(ve.length," ...")}:E,I=e.tagRender,T=e.onToggleOpen,M=e.onRemove,R=e.onInputChange,A=e.onInputPaste,j=e.onInputKeyDown,N=e.onInputMouseDown,k=e.onInputCompositionStart,D=e.onInputCompositionEnd,F=e.onInputBlur,H=v.useRef(null),U=v.useState(0),B=xe(U,2),W=B[0],K=B[1],q=v.useState(!1),X=xe(q,2),Z=X[0],Y=X[1],G="".concat(r,"-selection"),J=i||d==="multiple"&&a===!1||d==="tags"?s:"",ne=d==="tags"||d==="multiple"&&a===!1||f&&(i||Z);mAe(function(){K(H.current.scrollWidth)},[J]);var ee=function(fe,ue,Ce,ye,ke){return v.createElement("span",{title:Yoe(fe),className:he("".concat(G,"-item"),oe({},"".concat(G,"-item-disabled"),Ce))},v.createElement("span",{className:"".concat(G,"-item-content")},ue),ye&&v.createElement(sM,{className:"".concat(G,"-item-remove"),onMouseDown:hq,onClick:ke,customizeIcon:S},""))},re=function(fe,ue,Ce,ye,ke,Be){var Ue=function(Me){hq(Me),T(!i)};return v.createElement("span",{onMouseDown:Ue},I({label:ue,value:fe,disabled:Ce,closable:ye,onClose:ke,isMaxTag:!!Be}))},le=function(fe){var ue=fe.disabled,Ce=fe.label,ye=fe.value,ke=!u&&!ue,Be=Ce;if(typeof C=="number"&&(typeof Ce=="string"||typeof Ce=="number")){var Ue=String(Be);Ue.length>C&&(Be="".concat(Ue.slice(0,C),"..."))}var We=function($e){$e&&$e.stopPropagation(),M(fe)};return typeof I=="function"?re(ye,Be,ue,ke,We):ee(fe,Be,ue,ke,We)},ae=function(fe){if(!o.length)return null;var ue=typeof P=="function"?P(fe):P;return typeof I=="function"?re(void 0,ue,!1,!1,void 0,!0):ee({title:ue},ue,!1)},ie=v.createElement("div",{className:"".concat(G,"-search"),style:{width:W},onFocus:function(){Y(!0)},onBlur:function(){Y(!1)}},v.createElement(Goe,{ref:l,open:i,prefixCls:r,id:n,inputElement:null,disabled:u,autoFocus:h,autoComplete:g,editable:ne,activeDescendantId:y,value:J,onKeyDown:j,onMouseDown:N,onChange:R,onPaste:A,onCompositionStart:k,onCompositionEnd:D,onBlur:F,tabIndex:m,attrs:Xf(e,!0)}),v.createElement("span",{ref:H,className:"".concat(G,"-search-mirror"),"aria-hidden":!0},J,"")),ge=v.createElement(pu,{prefixCls:"".concat(G,"-overflow"),data:o,renderItem:le,renderRest:ae,suffix:ie,itemKey:vAe,maxCount:x});return v.createElement("span",{className:"".concat(G,"-wrap")},ge,!o.length&&!J&&v.createElement("span",{className:"".concat(G,"-placeholder")},c))},bAe=function(e){var n=e.inputElement,r=e.prefixCls,o=e.id,i=e.inputRef,s=e.disabled,a=e.autoFocus,l=e.autoComplete,c=e.activeDescendantId,u=e.mode,d=e.open,f=e.values,h=e.placeholder,g=e.tabIndex,y=e.showSearch,m=e.searchValue,S=e.activeValue,x=e.maxLength,C=e.onInputKeyDown,E=e.onInputMouseDown,P=e.onInputChange,I=e.onInputPaste,T=e.onInputCompositionStart,M=e.onInputCompositionEnd,R=e.onInputBlur,A=e.title,j=v.useState(!1),N=xe(j,2),k=N[0],D=N[1],F=u==="combobox",H=F||y,U=f[0],B=m||"";F&&S&&!k&&(B=S),v.useEffect(function(){F&&D(!1)},[F,S]);var W=u!=="combobox"&&!d&&!y?!1:!!B,K=A===void 0?Yoe(U):A,q=v.useMemo(function(){return U?null:v.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:W?{visibility:"hidden"}:void 0},h)},[U,W,h,r]);return v.createElement("span",{className:"".concat(r,"-selection-wrap")},v.createElement("span",{className:"".concat(r,"-selection-search")},v.createElement(Goe,{ref:i,prefixCls:r,id:o,open:d,inputElement:n,disabled:s,autoFocus:a,autoComplete:l,editable:H,activeDescendantId:c,value:B,onKeyDown:C,onMouseDown:E,onChange:function(Z){D(!0),P(Z)},onPaste:I,onCompositionStart:T,onCompositionEnd:M,onBlur:R,tabIndex:g,attrs:Xf(e,!0),maxLength:F?x:void 0})),!F&&U?v.createElement("span",{className:"".concat(r,"-selection-item"),title:K,style:W?{visibility:"hidden"}:void 0},U.label):null,q)},SAe=function(e,n){var r=v.useRef(null),o=v.useRef(!1),i=e.prefixCls,s=e.open,a=e.mode,l=e.showSearch,c=e.tokenWithEnter,u=e.disabled,d=e.prefix,f=e.autoClearSearchValue,h=e.onSearch,g=e.onSearchSubmit,y=e.onToggleOpen,m=e.onInputKeyDown,S=e.onInputBlur,x=e.domRef;v.useImperativeHandle(n,function(){return{focus:function(K){r.current.focus(K)},blur:function(){r.current.blur()}}});var C=Woe(0),E=xe(C,2),P=E[0],I=E[1],T=function(K){var q=K.which,X=r.current instanceof HTMLTextAreaElement;!X&&s&&(q===It.UP||q===It.DOWN)&&K.preventDefault(),m&&m(K),q===It.ENTER&&a==="tags"&&!o.current&&!s&&(g==null||g(K.target.value)),!(X&&!s&&~[It.UP,It.DOWN,It.LEFT,It.RIGHT].indexOf(q))&&Qke(q)&&y(!0)},M=function(){I(!0)},R=v.useRef(null),A=function(K){h(K,!0,o.current)!==!1&&y(!0)},j=function(){o.current=!0},N=function(K){o.current=!1,a!=="combobox"&&A(K.target.value)},k=function(K){var q=K.target.value;if(c&&R.current&&/[\r\n]/.test(R.current)){var X=R.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");q=q.replace(X,R.current)}R.current=null,A(q)},D=function(K){var q=K.clipboardData,X=q==null?void 0:q.getData("text");R.current=X||""},F=function(K){var q=K.target;if(q!==r.current){var X=document.body.style.msTouchAction!==void 0;X?setTimeout(function(){r.current.focus()}):r.current.focus()}},H=function(K){var q=P();K.target!==r.current&&!q&&!(a==="combobox"&&u)&&K.preventDefault(),(a!=="combobox"&&(!l||!q)||!s)&&(s&&f!==!1&&h("",!0,!1),y())},U={inputRef:r,onInputKeyDown:T,onInputMouseDown:M,onInputChange:k,onInputPaste:D,onInputCompositionStart:j,onInputCompositionEnd:N,onInputBlur:S},B=a==="multiple"||a==="tags"?v.createElement(yAe,vt({},e,U)):v.createElement(bAe,vt({},e,U));return v.createElement("div",{ref:x,className:"".concat(i,"-selector"),onClick:F,onMouseDown:H},d&&v.createElement("div",{className:"".concat(i,"-prefix")},d),B)},xAe=v.forwardRef(SAe),wAe=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],CAe=function(e){var n=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},EAe=function(e,n){var r=e.prefixCls;e.disabled;var o=e.visible,i=e.children,s=e.popupElement,a=e.animation,l=e.transitionName,c=e.dropdownStyle,u=e.dropdownClassName,d=e.direction,f=d===void 0?"ltr":d,h=e.placement,g=e.builtinPlacements,y=e.dropdownMatchSelectWidth,m=e.dropdownRender,S=e.dropdownAlign,x=e.getPopupContainer,C=e.empty,E=e.getTriggerDOMNode,P=e.onPopupVisibleChange,I=e.onPopupMouseEnter,T=Sn(e,wAe),M="".concat(r,"-dropdown"),R=s;m&&(R=m(s));var A=v.useMemo(function(){return g||CAe(y)},[g,y]),j=a?"".concat(M,"-").concat(a):l,N=typeof y=="number",k=v.useMemo(function(){return N?null:y===!1?"minWidth":"width"},[y,N]),D=c;N&&(D=de(de({},D),{},{width:y}));var F=v.useRef(null);return v.useImperativeHandle(n,function(){return{getPopupElement:function(){var U;return(U=F.current)===null||U===void 0?void 0:U.popupElement}}}),v.createElement(UT,vt({},T,{showAction:P?["click"]:[],hideAction:P?["click"]:[],popupPlacement:h||(f==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:A,prefixCls:M,popupTransitionName:j,popup:v.createElement("div",{onMouseEnter:I},R),ref:F,stretch:k,popupAlign:S,popupVisible:o,getPopupContainer:x,popupClassName:he(u,oe({},"".concat(M,"-empty"),C)),popupStyle:D,getTriggerDOMNode:E,onPopupVisibleChange:P}),i)},PAe=v.forwardRef(EAe);function pq(t,e){var n=t.key,r;return"value"in t&&(r=t.value),n??(r!==void 0?r:"rc-index-key-".concat(e))}function mN(t){return typeof t<"u"&&!Number.isNaN(t)}function Qoe(t,e){var n=t||{},r=n.label,o=n.value,i=n.options,s=n.groupLabel,a=r||(e?"children":"label");return{label:a,value:o||"value",options:i||"options",groupLabel:s||a}}function _Ae(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.fieldNames,r=e.childrenAsData,o=[],i=Qoe(n,!1),s=i.label,a=i.value,l=i.options,c=i.groupLabel;function u(d,f){Array.isArray(d)&&d.forEach(function(h){if(f||!(l in h)){var g=h[a];o.push({key:pq(h,o.length),groupOption:f,data:h,label:h[s],value:g})}else{var y=h[c];y===void 0&&r&&(y=h.label),o.push({key:pq(h,o.length),group:!0,data:h,label:y}),u(h[l],!0)}})}return u(t,!1),o}function vN(t){var e=de({},t);return"props"in e||Object.defineProperty(e,"props",{get:function(){return Vi(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var IAe=function(e,n,r){if(!n||!n.length)return null;var o=!1,i=function a(l,c){var u=Vne(c),d=u[0],f=u.slice(1);if(!d)return[l];var h=l.split(d);return o=o||h.length>1,h.reduce(function(g,y){return[].concat(it(g),it(a(y,f)))},[]).filter(Boolean)},s=i(e,n);return o?typeof r<"u"?s.slice(0,r):s:null},Vz=v.createContext(null);function TAe(t){var e=t.visible,n=t.values;if(!e)return null;var r=50;return v.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(o){var i=o.label,s=o.value;return["number","string"].includes(Wt(i))?i:s}).join(", ")),n.length>r?", ...":null)}var MAe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],OAe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],yN=function(e){return e==="tags"||e==="multiple"},RAe=v.forwardRef(function(t,e){var n,r=t.id,o=t.prefixCls,i=t.className,s=t.showSearch,a=t.tagRender,l=t.direction,c=t.omitDomProps,u=t.displayValues,d=t.onDisplayValuesChange,f=t.emptyOptions,h=t.notFoundContent,g=h===void 0?"Not Found":h,y=t.onClear,m=t.mode,S=t.disabled,x=t.loading,C=t.getInputElement,E=t.getRawInputElement,P=t.open,I=t.defaultOpen,T=t.onDropdownVisibleChange,M=t.activeValue,R=t.onActiveValueChange,A=t.activeDescendantId,j=t.searchValue,N=t.autoClearSearchValue,k=t.onSearch,D=t.onSearchSplit,F=t.tokenSeparators,H=t.allowClear,U=t.prefix,B=t.suffixIcon,W=t.clearIcon,K=t.OptionList,q=t.animation,X=t.transitionName,Z=t.dropdownStyle,Y=t.dropdownClassName,G=t.dropdownMatchSelectWidth,J=t.dropdownRender,ne=t.dropdownAlign,ee=t.placement,re=t.builtinPlacements,le=t.getPopupContainer,ae=t.showAction,ie=ae===void 0?[]:ae,ge=t.onFocus,ve=t.onBlur,fe=t.onKeyUp,ue=t.onKeyDown,Ce=t.onMouseDown,ye=Sn(t,MAe),ke=yN(m),Be=(s!==void 0?s:ke)||m==="combobox",Ue=de({},ye);OAe.forEach(function(Ot){delete Ue[Ot]}),c==null||c.forEach(function(Ot){delete Ue[Ot]});var We=v.useState(!1),Me=xe(We,2),$e=Me[0],Qe=Me[1];v.useEffect(function(){Qe(Sz())},[]);var nt=v.useRef(null),ht=v.useRef(null),ft=v.useRef(null),et=v.useRef(null),pe=v.useRef(null),Pe=v.useRef(!1),je=Xke(),Le=xe(je,3),qe=Le[0],at=Le[1],Ae=Le[2];v.useImperativeHandle(e,function(){var Ot,ct;return{focus:(Ot=et.current)===null||Ot===void 0?void 0:Ot.focus,blur:(ct=et.current)===null||ct===void 0?void 0:ct.blur,scrollTo:function(Un){var rn;return(rn=pe.current)===null||rn===void 0?void 0:rn.scrollTo(Un)},nativeElement:nt.current||ht.current}});var Ne=v.useMemo(function(){var Ot;if(m!=="combobox")return j;var ct=(Ot=u[0])===null||Ot===void 0?void 0:Ot.value;return typeof ct=="string"||typeof ct=="number"?String(ct):""},[j,m,u]),xt=m==="combobox"&&typeof C=="function"&&C()||null,Pt=typeof E=="function"&&E(),gn=hg(ht,Pt==null||(n=Pt.props)===null||n===void 0?void 0:n.ref),Xt=v.useState(!1),sn=xe(Xt,2),Zt=sn[0],Vt=sn[1];lr(function(){Vt(!0)},[]);var an=xi(!1,{defaultValue:I,value:P}),wt=xe(an,2),bt=wt[0],ot=wt[1],Xe=Zt?bt:!1,qt=!g&&f;(S||qt&&Xe&&m==="combobox")&&(Xe=!1);var Tt=qt?!1:Xe,Fe=v.useCallback(function(Ot){var ct=Ot!==void 0?Ot:!Xe;S||(ot(ct),Xe!==ct&&(T==null||T(ct)))},[S,Xe,ot,T]),Ge=v.useMemo(function(){return(F||[]).some(function(Ot){return[`
`,`\r
`].includes(Ot)})},[F]),ut=v.useContext(Vz)||{},St=ut.maxCount,lt=ut.rawValues,kt=function(ct,Fn,Un){if(!(ke&&mN(St)&&(lt==null?void 0:lt.size)>=St)){var rn=!0,vn=ct;R==null||R(null);var xr=IAe(ct,F,mN(St)?St-lt.size:void 0),or=Un?null:xr;return m!=="combobox"&&or&&(vn="",D==null||D(or),Fe(!1),rn=!1),k&&Ne!==vn&&k(vn,{source:Fn?"typing":"effect"}),rn}},_n=function(ct){!ct||!ct.trim()||k(ct,{source:"submit"})};v.useEffect(function(){!Xe&&!ke&&m!=="combobox"&&kt("",!1,!1)},[Xe]),v.useEffect(function(){bt&&S&&ot(!1),S&&!Pe.current&&at(!1)},[S]);var bn=Woe(),ln=xe(bn,2),en=ln[0],wn=ln[1],nr=v.useRef(!1),rr=function(ct){var Fn=en(),Un=ct.key,rn=Un==="Enter";if(rn&&(m!=="combobox"&&ct.preventDefault(),Xe||Fe(!0)),wn(!!Ne),Un==="Backspace"&&!Fn&&ke&&!Ne&&u.length){for(var vn=it(u),xr=null,or=vn.length-1;or>=0;or-=1){var on=vn[or];if(!on.disabled){vn.splice(or,1),xr=on;break}}xr&&d(vn,{type:"remove",values:[xr]})}for(var Or=arguments.length,uo=new Array(Or>1?Or-1:0),Eo=1;Eo<Or;Eo++)uo[Eo-1]=arguments[Eo];if(Xe&&(!rn||!nr.current)){var wr;rn&&(nr.current=!0),(wr=pe.current)===null||wr===void 0||wr.onKeyDown.apply(wr,[ct].concat(uo))}ue==null||ue.apply(void 0,[ct].concat(uo))},ur=function(ct){for(var Fn=arguments.length,Un=new Array(Fn>1?Fn-1:0),rn=1;rn<Fn;rn++)Un[rn-1]=arguments[rn];if(Xe){var vn;(vn=pe.current)===null||vn===void 0||vn.onKeyUp.apply(vn,[ct].concat(Un))}ct.key==="Enter"&&(nr.current=!1),fe==null||fe.apply(void 0,[ct].concat(Un))},Nn=function(ct){var Fn=u.filter(function(Un){return Un!==ct});d(Fn,{type:"remove",values:[ct]})},gt=function(){nr.current=!1},De=v.useRef(!1),pt=function(){at(!0),S||(ge&&!De.current&&ge.apply(void 0,arguments),ie.includes("focus")&&Fe(!0)),De.current=!0},yt=function(){Pe.current=!0,at(!1,function(){De.current=!1,Pe.current=!1,Fe(!1)}),!S&&(Ne&&(m==="tags"?k(Ne,{source:"submit"}):m==="multiple"&&k("",{source:"blur"})),ve&&ve.apply(void 0,arguments))},ze=[];v.useEffect(function(){return function(){ze.forEach(function(Ot){return clearTimeout(Ot)}),ze.splice(0,ze.length)}},[]);var Nt=function(ct){var Fn,Un=ct.target,rn=(Fn=ft.current)===null||Fn===void 0?void 0:Fn.getPopupElement();if(rn&&rn.contains(Un)){var vn=setTimeout(function(){var Or=ze.indexOf(vn);if(Or!==-1&&ze.splice(Or,1),Ae(),!$e&&!rn.contains(document.activeElement)){var uo;(uo=et.current)===null||uo===void 0||uo.focus()}});ze.push(vn)}for(var xr=arguments.length,or=new Array(xr>1?xr-1:0),on=1;on<xr;on++)or[on-1]=arguments[on];Ce==null||Ce.apply(void 0,[ct].concat(or))},mn=v.useState({}),An=xe(mn,2),Qn=An[1];function _t(){Qn({})}var Mt;Pt&&(Mt=function(ct){Fe(ct)}),Yke(function(){var Ot;return[nt.current,(Ot=ft.current)===null||Ot===void 0?void 0:Ot.getPopupElement()]},Tt,Fe,!!Pt);var un=v.useMemo(function(){return de(de({},t),{},{notFoundContent:g,open:Xe,triggerOpen:Tt,id:r,showSearch:Be,multiple:ke,toggleOpen:Fe})},[t,g,Tt,Xe,r,Be,ke,Fe]),In=!!B||x,Co;In&&(Co=v.createElement(sM,{className:he("".concat(o,"-arrow"),oe({},"".concat(o,"-arrow-loading"),x)),customizeIcon:B,customizeIconProps:{loading:x,searchValue:Ne,open:Xe,focused:qe,showSearch:Be}}));var Dr=function(){var ct;y==null||y(),(ct=et.current)===null||ct===void 0||ct.focus(),d([],{type:"clear",values:u}),kt("",!1,!1)},Mr=Kke(o,Dr,u,H,W,S,Ne,m),jr=Mr.allowClear,ko=Mr.clearIcon,Ao=v.createElement(K,{ref:pe}),pr=he(o,i,oe(oe(oe(oe(oe(oe(oe(oe(oe(oe({},"".concat(o,"-focused"),qe),"".concat(o,"-multiple"),ke),"".concat(o,"-single"),!ke),"".concat(o,"-allow-clear"),H),"".concat(o,"-show-arrow"),In),"".concat(o,"-disabled"),S),"".concat(o,"-loading"),x),"".concat(o,"-open"),Xe),"".concat(o,"-customize-input"),xt),"".concat(o,"-show-search"),Be)),no=v.createElement(PAe,{ref:ft,disabled:S,prefixCls:o,visible:Tt,popupElement:Ao,animation:q,transitionName:X,dropdownStyle:Z,dropdownClassName:Y,direction:l,dropdownMatchSelectWidth:G,dropdownRender:J,dropdownAlign:ne,placement:ee,builtinPlacements:re,getPopupContainer:le,empty:f,getTriggerDOMNode:function(ct){return ht.current||ct},onPopupVisibleChange:Mt,onPopupMouseEnter:_t},Pt?v.cloneElement(Pt,{ref:gn}):v.createElement(xAe,vt({},t,{domRef:ht,prefixCls:o,inputElement:xt,ref:et,id:r,prefix:U,showSearch:Be,autoClearSearchValue:N,mode:m,activeDescendantId:A,tagRender:a,values:u,open:Xe,onToggleOpen:Fe,activeValue:M,searchValue:Ne,onSearch:kt,onSearchSubmit:_n,onRemove:Nn,tokenWithEnter:Ge,onInputBlur:gt}))),$n;return Pt?$n=no:$n=v.createElement("div",vt({className:pr},Ue,{ref:nt,onMouseDown:Nt,onKeyDown:rr,onKeyUp:ur,onFocus:pt,onBlur:yt}),v.createElement(TAe,{visible:qe&&!Xe,values:u}),no,Co,jr&&ko),v.createElement(Uoe.Provider,{value:un},$n)}),qz=function(){return null};qz.isSelectOptGroup=!0;var Kz=function(){return null};Kz.isSelectOption=!0;var Zoe=v.forwardRef(function(t,e){var n=t.height,r=t.offsetY,o=t.offsetX,i=t.children,s=t.prefixCls,a=t.onInnerResize,l=t.innerProps,c=t.rtl,u=t.extra,d={},f={display:"flex",flexDirection:"column"};return r!==void 0&&(d={height:n,position:"relative",overflow:"hidden"},f=de(de({},f),{},oe(oe(oe(oe(oe({transform:"translateY(".concat(r,"px)")},c?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),v.createElement("div",{style:d},v.createElement(Ha,{onResize:function(g){var y=g.offsetHeight;y&&a&&a()}},v.createElement("div",vt({style:f,className:he(oe({},"".concat(s,"-holder-inner"),s)),ref:e},l),i,u)))});Zoe.displayName="Filler";function kAe(t){var e=t.children,n=t.setRef,r=v.useCallback(function(o){n(o)},[]);return v.cloneElement(e,{ref:r})}function AAe(t,e,n,r,o,i,s,a){var l=a.getKey;return t.slice(e,n+1).map(function(c,u){var d=e+u,f=s(c,d,{style:{width:r},offsetX:o}),h=l(c);return v.createElement(kAe,{key:h,setRef:function(y){return i(c,y)}},f)})}function $Ae(t,e,n){var r=t.length,o=e.length,i,s;if(r===0&&o===0)return null;r<o?(i=t,s=e):(i=e,s=t);var a={__EMPTY_ITEM__:!0};function l(g){return g!==void 0?n(g):a}for(var c=null,u=Math.abs(r-o)!==1,d=0;d<s.length;d+=1){var f=l(i[d]),h=l(s[d]);if(f!==h){c=d,u=u||f!==l(s[d+1]);break}}return c===null?null:{index:c,multiple:u}}function DAe(t,e,n){var r=v.useState(t),o=xe(r,2),i=o[0],s=o[1],a=v.useState(null),l=xe(a,2),c=l[0],u=l[1];return v.useEffect(function(){var d=$Ae(i||[],t||[],e);(d==null?void 0:d.index)!==void 0&&u(t[d.index]),s(t)},[t]),[c]}var gq=(typeof navigator>"u"?"undefined":Wt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const Joe=function(t,e,n,r){var o=v.useRef(!1),i=v.useRef(null);function s(){clearTimeout(i.current),o.current=!0,i.current=setTimeout(function(){o.current=!1},50)}var a=v.useRef({top:t,bottom:e,left:n,right:r});return a.current.top=t,a.current.bottom=e,a.current.left=n,a.current.right=r,function(l,c){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=l?c<0&&a.current.left||c>0&&a.current.right:c<0&&a.current.top||c>0&&a.current.bottom;return u&&d?(clearTimeout(i.current),o.current=!1):(!d||o.current)&&s(),!o.current&&d}};function jAe(t,e,n,r,o,i,s){var a=v.useRef(0),l=v.useRef(null),c=v.useRef(null),u=v.useRef(!1),d=Joe(e,n,r,o);function f(x,C){if(Sr.cancel(l.current),!d(!1,C)){var E=x;if(!E._virtualHandled)E._virtualHandled=!0;else return;a.current+=C,c.current=C,gq||E.preventDefault(),l.current=Sr(function(){var P=u.current?10:1;s(a.current*P,!1),a.current=0})}}function h(x,C){s(C,!0),gq||x.preventDefault()}var g=v.useRef(null),y=v.useRef(null);function m(x){if(t){Sr.cancel(y.current),y.current=Sr(function(){g.current=null},2);var C=x.deltaX,E=x.deltaY,P=x.shiftKey,I=C,T=E;(g.current==="sx"||!g.current&&P&&E&&!C)&&(I=E,T=0,g.current="sx");var M=Math.abs(I),R=Math.abs(T);g.current===null&&(g.current=i&&M>R?"x":"y"),g.current==="y"?f(x,T):h(x,I)}}function S(x){t&&(u.current=x.detail===c.current)}return[m,S]}function LAe(t,e,n,r){var o=v.useMemo(function(){return[new Map,[]]},[t,n.id,r]),i=xe(o,2),s=i[0],a=i[1],l=function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,f=s.get(u),h=s.get(d);if(f===void 0||h===void 0)for(var g=t.length,y=a.length;y<g;y+=1){var m,S=t[y],x=e(S);s.set(x,y);var C=(m=n.get(x))!==null&&m!==void 0?m:r;if(a[y]=(a[y-1]||0)+C,x===u&&(f=y),x===d&&(h=y),f!==void 0&&h!==void 0)break}return{top:a[f-1]||0,bottom:a[h]}};return l}var NAe=function(){function t(){ao(this,t),oe(this,"maps",void 0),oe(this,"id",0),oe(this,"diffRecords",new Map),this.maps=Object.create(null)}return lo(t,[{key:"set",value:function(n,r){this.diffRecords.set(n,this.maps[n]),this.maps[n]=r,this.id+=1}},{key:"get",value:function(n){return this.maps[n]}},{key:"resetRecord",value:function(){this.diffRecords.clear()}},{key:"getRecord",value:function(){return this.diffRecords}}]),t}();function mq(t){var e=parseFloat(t);return isNaN(e)?0:e}function FAe(t,e,n){var r=v.useState(0),o=xe(r,2),i=o[0],s=o[1],a=v.useRef(new Map),l=v.useRef(new NAe),c=v.useRef(0);function u(){c.current+=1}function d(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;u();var g=function(){var S=!1;a.current.forEach(function(x,C){if(x&&x.offsetParent){var E=x.offsetHeight,P=getComputedStyle(x),I=P.marginTop,T=P.marginBottom,M=mq(I),R=mq(T),A=E+M+R;l.current.get(C)!==A&&(l.current.set(C,A),S=!0)}}),S&&s(function(x){return x+1})};if(h)g();else{c.current+=1;var y=c.current;Promise.resolve().then(function(){y===c.current&&g()})}}function f(h,g){var y=t(h);a.current.get(y),g?(a.current.set(y,g),d()):a.current.delete(y)}return v.useEffect(function(){return u},[]),[f,d,l.current,i]}var vq=14/15;function zAe(t,e,n){var r=v.useRef(!1),o=v.useRef(0),i=v.useRef(0),s=v.useRef(null),a=v.useRef(null),l,c=function(h){if(r.current){var g=Math.ceil(h.touches[0].pageX),y=Math.ceil(h.touches[0].pageY),m=o.current-g,S=i.current-y,x=Math.abs(m)>Math.abs(S);x?o.current=g:i.current=y;var C=n(x,x?m:S,!1,h);C&&h.preventDefault(),clearInterval(a.current),C&&(a.current=setInterval(function(){x?m*=vq:S*=vq;var E=Math.floor(x?m:S);(!n(x,E,!0)||Math.abs(E)<=.1)&&clearInterval(a.current)},16))}},u=function(){r.current=!1,l()},d=function(h){l(),h.touches.length===1&&!r.current&&(r.current=!0,o.current=Math.ceil(h.touches[0].pageX),i.current=Math.ceil(h.touches[0].pageY),s.current=h.target,s.current.addEventListener("touchmove",c,{passive:!1}),s.current.addEventListener("touchend",u,{passive:!0}))};l=function(){s.current&&(s.current.removeEventListener("touchmove",c),s.current.removeEventListener("touchend",u))},lr(function(){return t&&e.current.addEventListener("touchstart",d,{passive:!0}),function(){var f;(f=e.current)===null||f===void 0||f.removeEventListener("touchstart",d),l(),clearInterval(a.current)}},[t])}function yq(t){return Math.floor(Math.pow(t,.5))}function bN(t,e){var n="touches"in t?t.touches[0]:t;return n[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function BAe(t,e,n){v.useEffect(function(){var r=e.current;if(t&&r){var o=!1,i,s,a=function(){Sr.cancel(i)},l=function f(){a(),i=Sr(function(){n(s),f()})},c=function(h){if(!(h.target.draggable||h.button!==0)){var g=h;g._virtualHandled||(g._virtualHandled=!0,o=!0)}},u=function(){o=!1,a()},d=function(h){if(o){var g=bN(h,!1),y=r.getBoundingClientRect(),m=y.top,S=y.bottom;if(g<=m){var x=m-g;s=-yq(x),l()}else if(g>=S){var C=g-S;s=yq(C),l()}else a()}};return r.addEventListener("mousedown",c),r.ownerDocument.addEventListener("mouseup",u),r.ownerDocument.addEventListener("mousemove",d),function(){r.removeEventListener("mousedown",c),r.ownerDocument.removeEventListener("mouseup",u),r.ownerDocument.removeEventListener("mousemove",d),a()}}},[t])}var HAe=10;function UAe(t,e,n,r,o,i,s,a){var l=v.useRef(),c=v.useState(null),u=xe(c,2),d=u[0],f=u[1];return lr(function(){if(d&&d.times<HAe){if(!t.current){f(function(W){return de({},W)});return}i();var h=d.targetAlign,g=d.originAlign,y=d.index,m=d.offset,S=t.current.clientHeight,x=!1,C=h,E=null;if(S){for(var P=h||g,I=0,T=0,M=0,R=Math.min(e.length-1,y),A=0;A<=R;A+=1){var j=o(e[A]);T=I;var N=n.get(j);M=T+(N===void 0?r:N),I=M}for(var k=P==="top"?m:S-m,D=R;D>=0;D-=1){var F=o(e[D]),H=n.get(F);if(H===void 0){x=!0;break}if(k-=H,k<=0)break}switch(P){case"top":E=T-m;break;case"bottom":E=M-S+m;break;default:{var U=t.current.scrollTop,B=U+S;T<U?C="top":M>B&&(C="bottom")}}E!==null&&s(E),E!==d.lastTop&&(x=!0)}x&&f(de(de({},d),{},{times:d.times+1,targetAlign:C,lastTop:E}))}},[d,t.current]),function(h){if(h==null){a();return}if(Sr.cancel(l.current),typeof h=="number")s(h);else if(h&&Wt(h)==="object"){var g,y=h.align;"index"in h?g=h.index:g=e.findIndex(function(x){return o(x)===h.key});var m=h.offset,S=m===void 0?0:m;f({times:0,index:g,offset:S,originAlign:y})}}}var bq=v.forwardRef(function(t,e){var n=t.prefixCls,r=t.rtl,o=t.scrollOffset,i=t.scrollRange,s=t.onStartMove,a=t.onStopMove,l=t.onScroll,c=t.horizontal,u=t.spinSize,d=t.containerSize,f=t.style,h=t.thumbStyle,g=t.showScrollBar,y=v.useState(!1),m=xe(y,2),S=m[0],x=m[1],C=v.useState(null),E=xe(C,2),P=E[0],I=E[1],T=v.useState(null),M=xe(T,2),R=M[0],A=M[1],j=!r,N=v.useRef(),k=v.useRef(),D=v.useState(g),F=xe(D,2),H=F[0],U=F[1],B=v.useRef(),W=function(){g===!0||g===!1||(clearTimeout(B.current),U(!0),B.current=setTimeout(function(){U(!1)},3e3))},K=i-d||0,q=d-u||0,X=v.useMemo(function(){if(o===0||K===0)return 0;var ae=o/K;return ae*q},[o,K,q]),Z=function(ie){ie.stopPropagation(),ie.preventDefault()},Y=v.useRef({top:X,dragging:S,pageY:P,startTop:R});Y.current={top:X,dragging:S,pageY:P,startTop:R};var G=function(ie){x(!0),I(bN(ie,c)),A(Y.current.top),s(),ie.stopPropagation(),ie.preventDefault()};v.useEffect(function(){var ae=function(fe){fe.preventDefault()},ie=N.current,ge=k.current;return ie.addEventListener("touchstart",ae,{passive:!1}),ge.addEventListener("touchstart",G,{passive:!1}),function(){ie.removeEventListener("touchstart",ae),ge.removeEventListener("touchstart",G)}},[]);var J=v.useRef();J.current=K;var ne=v.useRef();ne.current=q,v.useEffect(function(){if(S){var ae,ie=function(fe){var ue=Y.current,Ce=ue.dragging,ye=ue.pageY,ke=ue.startTop;Sr.cancel(ae);var Be=N.current.getBoundingClientRect(),Ue=d/(c?Be.width:Be.height);if(Ce){var We=(bN(fe,c)-ye)*Ue,Me=ke;!j&&c?Me-=We:Me+=We;var $e=J.current,Qe=ne.current,nt=Qe?Me/Qe:0,ht=Math.ceil(nt*$e);ht=Math.max(ht,0),ht=Math.min(ht,$e),ae=Sr(function(){l(ht,c)})}},ge=function(){x(!1),a()};return window.addEventListener("mousemove",ie,{passive:!0}),window.addEventListener("touchmove",ie,{passive:!0}),window.addEventListener("mouseup",ge,{passive:!0}),window.addEventListener("touchend",ge,{passive:!0}),function(){window.removeEventListener("mousemove",ie),window.removeEventListener("touchmove",ie),window.removeEventListener("mouseup",ge),window.removeEventListener("touchend",ge),Sr.cancel(ae)}}},[S]),v.useEffect(function(){return W(),function(){clearTimeout(B.current)}},[o]),v.useImperativeHandle(e,function(){return{delayHidden:W}});var ee="".concat(n,"-scrollbar"),re={position:"absolute",visibility:H?null:"hidden"},le={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return c?(re.height=8,re.left=0,re.right=0,re.bottom=0,le.height="100%",le.width=u,j?le.left=X:le.right=X):(re.width=8,re.top=0,re.bottom=0,j?re.right=0:re.left=0,le.width="100%",le.height=u,le.top=X),v.createElement("div",{ref:N,className:he(ee,oe(oe(oe({},"".concat(ee,"-horizontal"),c),"".concat(ee,"-vertical"),!c),"".concat(ee,"-visible"),H)),style:de(de({},re),f),onMouseDown:Z,onMouseMove:W},v.createElement("div",{ref:k,className:he("".concat(ee,"-thumb"),oe({},"".concat(ee,"-thumb-moving"),S)),style:de(de({},le),h),onMouseDown:G}))}),WAe=20;function Sq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=t/e*t;return isNaN(n)&&(n=0),n=Math.max(n,WAe),Math.floor(n)}var VAe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],qAe=[],KAe={overflowY:"auto",overflowAnchor:"none"};function GAe(t,e){var n=t.prefixCls,r=n===void 0?"rc-virtual-list":n,o=t.className,i=t.height,s=t.itemHeight,a=t.fullHeight,l=a===void 0?!0:a,c=t.style,u=t.data,d=t.children,f=t.itemKey,h=t.virtual,g=t.direction,y=t.scrollWidth,m=t.component,S=m===void 0?"div":m,x=t.onScroll,C=t.onVirtualScroll,E=t.onVisibleChange,P=t.innerProps,I=t.extraRender,T=t.styles,M=t.showScrollBar,R=M===void 0?"optional":M,A=Sn(t,VAe),j=v.useCallback(function(De){return typeof f=="function"?f(De):De==null?void 0:De[f]},[f]),N=FAe(j),k=xe(N,4),D=k[0],F=k[1],H=k[2],U=k[3],B=!!(h!==!1&&i&&s),W=v.useMemo(function(){return Object.values(H.maps).reduce(function(De,pt){return De+pt},0)},[H.id,H.maps]),K=B&&u&&(Math.max(s*u.length,W)>i||!!y),q=g==="rtl",X=he(r,oe({},"".concat(r,"-rtl"),q),o),Z=u||qAe,Y=v.useRef(),G=v.useRef(),J=v.useRef(),ne=v.useState(0),ee=xe(ne,2),re=ee[0],le=ee[1],ae=v.useState(0),ie=xe(ae,2),ge=ie[0],ve=ie[1],fe=v.useState(!1),ue=xe(fe,2),Ce=ue[0],ye=ue[1],ke=function(){ye(!0)},Be=function(){ye(!1)},Ue={getKey:j};function We(De){le(function(pt){var yt;typeof De=="function"?yt=De(pt):yt=De;var ze=Vt(yt);return Y.current.scrollTop=ze,ze})}var Me=v.useRef({start:0,end:Z.length}),$e=v.useRef(),Qe=DAe(Z,j),nt=xe(Qe,1),ht=nt[0];$e.current=ht;var ft=v.useMemo(function(){if(!B)return{scrollHeight:void 0,start:0,end:Z.length-1,offset:void 0};if(!K){var De;return{scrollHeight:((De=G.current)===null||De===void 0?void 0:De.offsetHeight)||0,start:0,end:Z.length-1,offset:void 0}}for(var pt=0,yt,ze,Nt,mn=Z.length,An=0;An<mn;An+=1){var Qn=Z[An],_t=j(Qn),Mt=H.get(_t),un=pt+(Mt===void 0?s:Mt);un>=re&&yt===void 0&&(yt=An,ze=pt),un>re+i&&Nt===void 0&&(Nt=An),pt=un}return yt===void 0&&(yt=0,ze=0,Nt=Math.ceil(i/s)),Nt===void 0&&(Nt=Z.length-1),Nt=Math.min(Nt+1,Z.length-1),{scrollHeight:pt,start:yt,end:Nt,offset:ze}},[K,B,re,Z,U,i]),et=ft.scrollHeight,pe=ft.start,Pe=ft.end,je=ft.offset;Me.current.start=pe,Me.current.end=Pe,v.useLayoutEffect(function(){var De=H.getRecord();if(De.size===1){var pt=Array.from(De.keys())[0],yt=De.get(pt),ze=Z[pe];if(ze&&yt===void 0){var Nt=j(ze);if(Nt===pt){var mn=H.get(pt),An=mn-s;We(function(Qn){return Qn+An})}}}H.resetRecord()},[et]);var Le=v.useState({width:0,height:i}),qe=xe(Le,2),at=qe[0],Ae=qe[1],Ne=function(pt){Ae({width:pt.offsetWidth,height:pt.offsetHeight})},xt=v.useRef(),Pt=v.useRef(),gn=v.useMemo(function(){return Sq(at.width,y)},[at.width,y]),Xt=v.useMemo(function(){return Sq(at.height,et)},[at.height,et]),sn=et-i,Zt=v.useRef(sn);Zt.current=sn;function Vt(De){var pt=De;return Number.isNaN(Zt.current)||(pt=Math.min(pt,Zt.current)),pt=Math.max(pt,0),pt}var an=re<=0,wt=re>=sn,bt=ge<=0,ot=ge>=y,Xe=Joe(an,wt,bt,ot),qt=function(){return{x:q?-ge:ge,y:re}},Tt=v.useRef(qt()),Fe=Bo(function(De){if(C){var pt=de(de({},qt()),De);(Tt.current.x!==pt.x||Tt.current.y!==pt.y)&&(C(pt),Tt.current=pt)}});function Ge(De,pt){var yt=De;pt?(Ya.flushSync(function(){ve(yt)}),Fe()):We(yt)}function ut(De){var pt=De.currentTarget.scrollTop;pt!==re&&We(pt),x==null||x(De),Fe()}var St=function(pt){var yt=pt,ze=y?y-at.width:0;return yt=Math.max(yt,0),yt=Math.min(yt,ze),yt},lt=Bo(function(De,pt){pt?(Ya.flushSync(function(){ve(function(yt){var ze=yt+(q?-De:De);return St(ze)})}),Fe()):We(function(yt){var ze=yt+De;return ze})}),kt=jAe(B,an,wt,bt,ot,!!y,lt),_n=xe(kt,2),bn=_n[0],ln=_n[1];zAe(B,Y,function(De,pt,yt,ze){var Nt=ze;return Xe(De,pt,yt)?!1:!Nt||!Nt._virtualHandled?(Nt&&(Nt._virtualHandled=!0),bn({preventDefault:function(){},deltaX:De?pt:0,deltaY:De?0:pt}),!0):!1}),BAe(K,Y,function(De){We(function(pt){return pt+De})}),lr(function(){function De(yt){var ze=an&&yt.detail<0,Nt=wt&&yt.detail>0;B&&!ze&&!Nt&&yt.preventDefault()}var pt=Y.current;return pt.addEventListener("wheel",bn,{passive:!1}),pt.addEventListener("DOMMouseScroll",ln,{passive:!0}),pt.addEventListener("MozMousePixelScroll",De,{passive:!1}),function(){pt.removeEventListener("wheel",bn),pt.removeEventListener("DOMMouseScroll",ln),pt.removeEventListener("MozMousePixelScroll",De)}},[B,an,wt]),lr(function(){if(y){var De=St(ge);ve(De),Fe({x:De})}},[at.width,y]);var en=function(){var pt,yt;(pt=xt.current)===null||pt===void 0||pt.delayHidden(),(yt=Pt.current)===null||yt===void 0||yt.delayHidden()},wn=UAe(Y,Z,H,s,j,function(){return F(!0)},We,en);v.useImperativeHandle(e,function(){return{nativeElement:J.current,getScrollInfo:qt,scrollTo:function(pt){function yt(ze){return ze&&Wt(ze)==="object"&&("left"in ze||"top"in ze)}yt(pt)?(pt.left!==void 0&&ve(St(pt.left)),wn(pt.top)):wn(pt)}}}),lr(function(){if(E){var De=Z.slice(pe,Pe+1);E(De,Z)}},[pe,Pe,Z]);var nr=LAe(Z,j,H,s),rr=I==null?void 0:I({start:pe,end:Pe,virtual:K,offsetX:ge,offsetY:je,rtl:q,getSize:nr}),ur=AAe(Z,pe,Pe,y,ge,D,d,Ue),Nn=null;i&&(Nn=de(oe({},l?"height":"maxHeight",i),KAe),B&&(Nn.overflowY="hidden",y&&(Nn.overflowX="hidden"),Ce&&(Nn.pointerEvents="none")));var gt={};return q&&(gt.dir="rtl"),v.createElement("div",vt({ref:J,style:de(de({},c),{},{position:"relative"}),className:X},gt,A),v.createElement(Ha,{onResize:Ne},v.createElement(S,{className:"".concat(r,"-holder"),style:Nn,ref:Y,onScroll:ut,onMouseEnter:en},v.createElement(Zoe,{prefixCls:r,height:et,offsetX:ge,offsetY:je,scrollWidth:y,onInnerResize:F,ref:G,innerProps:P,rtl:q,extra:rr},ur))),K&&et>i&&v.createElement(bq,{ref:xt,prefixCls:r,scrollOffset:re,scrollRange:et,rtl:q,onScroll:Ge,onStartMove:ke,onStopMove:Be,spinSize:Xt,containerSize:at.height,style:T==null?void 0:T.verticalScrollBar,thumbStyle:T==null?void 0:T.verticalScrollBarThumb,showScrollBar:R}),K&&y>at.width&&v.createElement(bq,{ref:Pt,prefixCls:r,scrollOffset:ge,scrollRange:y,rtl:q,onScroll:Ge,onStartMove:ke,onStopMove:Be,spinSize:gn,containerSize:at.width,horizontal:!0,style:T==null?void 0:T.horizontalScrollBar,thumbStyle:T==null?void 0:T.horizontalScrollBarThumb,showScrollBar:R}))}var eie=v.forwardRef(GAe);eie.displayName="List";function XAe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var YAe=["disabled","title","children","style","className"];function xq(t){return typeof t=="string"||typeof t=="number"}var QAe=function(e,n){var r=Gke(),o=r.prefixCls,i=r.id,s=r.open,a=r.multiple,l=r.mode,c=r.searchValue,u=r.toggleOpen,d=r.notFoundContent,f=r.onPopupScroll,h=v.useContext(Vz),g=h.maxCount,y=h.flattenOptions,m=h.onActiveValue,S=h.defaultActiveFirstOption,x=h.onSelect,C=h.menuItemSelectedIcon,E=h.rawValues,P=h.fieldNames,I=h.virtual,T=h.direction,M=h.listHeight,R=h.listItemHeight,A=h.optionRender,j="".concat(o,"-item"),N=Bv(function(){return y},[s,y],function(ae,ie){return ie[0]&&ae[1]!==ie[1]}),k=v.useRef(null),D=v.useMemo(function(){return a&&mN(g)&&(E==null?void 0:E.size)>=g},[a,g,E==null?void 0:E.size]),F=function(ie){ie.preventDefault()},H=function(ie){var ge;(ge=k.current)===null||ge===void 0||ge.scrollTo(typeof ie=="number"?{index:ie}:ie)},U=v.useCallback(function(ae){return l==="combobox"?!1:E.has(ae)},[l,it(E).toString(),E.size]),B=function(ie){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ve=N.length,fe=0;fe<ve;fe+=1){var ue=(ie+fe*ge+ve)%ve,Ce=N[ue]||{},ye=Ce.group,ke=Ce.data;if(!ye&&!(ke!=null&&ke.disabled)&&(U(ke.value)||!D))return ue}return-1},W=v.useState(function(){return B(0)}),K=xe(W,2),q=K[0],X=K[1],Z=function(ie){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;X(ie);var ve={source:ge?"keyboard":"mouse"},fe=N[ie];if(!fe){m(null,-1,ve);return}m(fe.value,ie,ve)};v.useEffect(function(){Z(S!==!1?B(0):-1)},[N.length,c]);var Y=v.useCallback(function(ae){return l==="combobox"?String(ae).toLowerCase()===c.toLowerCase():E.has(ae)},[l,c,it(E).toString(),E.size]);v.useEffect(function(){var ae=setTimeout(function(){if(!a&&s&&E.size===1){var ge=Array.from(E)[0],ve=N.findIndex(function(fe){var ue=fe.data;return c?String(ue.value).startsWith(c):ue.value===ge});ve!==-1&&(Z(ve),H(ve))}});if(s){var ie;(ie=k.current)===null||ie===void 0||ie.scrollTo(void 0)}return function(){return clearTimeout(ae)}},[s,c]);var G=function(ie){ie!==void 0&&x(ie,{selected:!E.has(ie)}),a||u(!1)};if(v.useImperativeHandle(n,function(){return{onKeyDown:function(ie){var ge=ie.which,ve=ie.ctrlKey;switch(ge){case It.N:case It.P:case It.UP:case It.DOWN:{var fe=0;if(ge===It.UP?fe=-1:ge===It.DOWN?fe=1:XAe()&&ve&&(ge===It.N?fe=1:ge===It.P&&(fe=-1)),fe!==0){var ue=B(q+fe,fe);H(ue),Z(ue,!0)}break}case It.TAB:case It.ENTER:{var Ce,ye=N[q];ye&&!(ye!=null&&(Ce=ye.data)!==null&&Ce!==void 0&&Ce.disabled)&&!D?G(ye.value):G(void 0),s&&ie.preventDefault();break}case It.ESC:u(!1),s&&ie.stopPropagation()}},onKeyUp:function(){},scrollTo:function(ie){H(ie)}}}),N.length===0)return v.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(j,"-empty"),onMouseDown:F},d);var J=Object.keys(P).map(function(ae){return P[ae]}),ne=function(ie){return ie.label};function ee(ae,ie){var ge=ae.group;return{role:ge?"presentation":"option",id:"".concat(i,"_list_").concat(ie)}}var re=function(ie){var ge=N[ie];if(!ge)return null;var ve=ge.data||{},fe=ve.value,ue=ge.group,Ce=Xf(ve,!0),ye=ne(ge);return ge?v.createElement("div",vt({"aria-label":typeof ye=="string"&&!ue?ye:null},Ce,{key:ie},ee(ge,ie),{"aria-selected":Y(fe)}),fe):null},le={role:"listbox",id:"".concat(i,"_list")};return v.createElement(v.Fragment,null,I&&v.createElement("div",vt({},le,{style:{height:0,width:0,overflow:"hidden"}}),re(q-1),re(q),re(q+1)),v.createElement(eie,{itemKey:"key",ref:k,data:N,height:M,itemHeight:R,fullHeight:!1,onMouseDown:F,onScroll:f,virtual:I,direction:T,innerProps:I?null:le},function(ae,ie){var ge=ae.group,ve=ae.groupOption,fe=ae.data,ue=ae.label,Ce=ae.value,ye=fe.key;if(ge){var ke,Be=(ke=fe.title)!==null&&ke!==void 0?ke:xq(ue)?ue.toString():void 0;return v.createElement("div",{className:he(j,"".concat(j,"-group"),fe.className),title:Be},ue!==void 0?ue:ye)}var Ue=fe.disabled,We=fe.title;fe.children;var Me=fe.style,$e=fe.className,Qe=Sn(fe,YAe),nt=zl(Qe,J),ht=U(Ce),ft=Ue||!ht&&D,et="".concat(j,"-option"),pe=he(j,et,$e,oe(oe(oe(oe({},"".concat(et,"-grouped"),ve),"".concat(et,"-active"),q===ie&&!ft),"".concat(et,"-disabled"),ft),"".concat(et,"-selected"),ht)),Pe=ne(ae),je=!C||typeof C=="function"||ht,Le=typeof Pe=="number"?Pe:Pe||Ce,qe=xq(Le)?Le.toString():void 0;return We!==void 0&&(qe=We),v.createElement("div",vt({},Xf(nt),I?{}:ee(ae,ie),{"aria-selected":Y(Ce),className:pe,title:qe,onMouseMove:function(){q===ie||ft||Z(ie)},onClick:function(){ft||G(Ce)},style:Me}),v.createElement("div",{className:"".concat(et,"-content")},typeof A=="function"?A(ae,{index:ie}):Le),v.isValidElement(C)||ht,je&&v.createElement(sM,{className:"".concat(j,"-option-state"),customizeIcon:C,customizeIconProps:{value:Ce,disabled:ft,isSelected:ht}},ht?"":null))}))},ZAe=v.forwardRef(QAe);const JAe=function(t,e){var n=v.useRef({values:new Map,options:new Map}),r=v.useMemo(function(){var i=n.current,s=i.values,a=i.options,l=t.map(function(d){if(d.label===void 0){var f;return de(de({},d),{},{label:(f=s.get(d.value))===null||f===void 0?void 0:f.label})}return d}),c=new Map,u=new Map;return l.forEach(function(d){c.set(d.value,d),u.set(d.value,e.get(d.value)||a.get(d.value))}),n.current.values=c,n.current.options=u,l},[t,e]),o=v.useCallback(function(i){return e.get(i)||n.current.options.get(i)},[e]);return[r,o]};function Vk(t,e){return Xoe(t).join("").toUpperCase().includes(e)}const e$e=function(t,e,n,r,o){return v.useMemo(function(){if(!n||r===!1)return t;var i=e.options,s=e.label,a=e.value,l=[],c=typeof r=="function",u=n.toUpperCase(),d=c?r:function(h,g){return o?Vk(g[o],u):g[i]?Vk(g[s!=="children"?s:"label"],u):Vk(g[a],u)},f=c?function(h){return vN(h)}:function(h){return h};return t.forEach(function(h){if(h[i]){var g=d(n,f(h));if(g)l.push(h);else{var y=h[i].filter(function(m){return d(n,f(m))});y.length&&l.push(de(de({},h),{},oe({},i,y)))}return}d(n,f(h))&&l.push(h)}),l},[t,r,o,n,e])};var wq=0,t$e=vs();function n$e(){var t;return t$e?(t=wq,wq+=1):t="TEST_OR_SSR",t}function r$e(t){var e=v.useState(),n=xe(e,2),r=n[0],o=n[1];return v.useEffect(function(){o("rc_select_".concat(n$e()))},[]),t||r}var o$e=["children","value"],i$e=["children"];function s$e(t){var e=t,n=e.key,r=e.props,o=r.children,i=r.value,s=Sn(r,o$e);return de({key:n,value:i!==void 0?i:n,children:o},s)}function tie(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Su(t).map(function(n,r){if(!v.isValidElement(n)||!n.type)return null;var o=n,i=o.type.isSelectOptGroup,s=o.key,a=o.props,l=a.children,c=Sn(a,i$e);return e||!i?s$e(n):de(de({key:"__RC_SELECT_GRP__".concat(s===null?r:s,"__"),label:s},c),{},{options:tie(l)})}).filter(function(n){return n})}var a$e=function(e,n,r,o,i){return v.useMemo(function(){var s=e,a=!e;a&&(s=tie(n));var l=new Map,c=new Map,u=function(h,g,y){y&&typeof y=="string"&&h.set(g[y],g)},d=function f(h){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<h.length;y+=1){var m=h[y];!m[r.options]||g?(l.set(m[r.value],m),u(c,m,r.label),u(c,m,o),u(c,m,i)):f(m[r.options],!0)}};return d(s),{options:s,valueOptions:l,labelOptions:c}},[e,n,r,o,i])};function Cq(t){var e=v.useRef();e.current=t;var n=v.useCallback(function(){return e.current.apply(e,arguments)},[]);return n}var l$e=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],c$e=["inputValue"];function u$e(t){return!t||Wt(t)!=="object"}var d$e=v.forwardRef(function(t,e){var n=t.id,r=t.mode,o=t.prefixCls,i=o===void 0?"rc-select":o,s=t.backfill,a=t.fieldNames,l=t.inputValue,c=t.searchValue,u=t.onSearch,d=t.autoClearSearchValue,f=d===void 0?!0:d,h=t.onSelect,g=t.onDeselect,y=t.dropdownMatchSelectWidth,m=y===void 0?!0:y,S=t.filterOption,x=t.filterSort,C=t.optionFilterProp,E=t.optionLabelProp,P=t.options,I=t.optionRender,T=t.children,M=t.defaultActiveFirstOption,R=t.menuItemSelectedIcon,A=t.virtual,j=t.direction,N=t.listHeight,k=N===void 0?200:N,D=t.listItemHeight,F=D===void 0?20:D,H=t.labelRender,U=t.value,B=t.defaultValue,W=t.labelInValue,K=t.onChange,q=t.maxCount,X=Sn(t,l$e),Z=r$e(n),Y=yN(r),G=!!(!P&&T),J=v.useMemo(function(){return S===void 0&&r==="combobox"?!1:S},[S,r]),ne=v.useMemo(function(){return Qoe(a,G)},[JSON.stringify(a),G]),ee=xi("",{value:c!==void 0?c:l,postState:function(Ge){return Ge||""}}),re=xe(ee,2),le=re[0],ae=re[1],ie=a$e(P,T,ne,C,E),ge=ie.valueOptions,ve=ie.labelOptions,fe=ie.options,ue=v.useCallback(function(Fe){var Ge=Xoe(Fe);return Ge.map(function(ut){var St,lt,kt,_n,bn;if(u$e(ut))St=ut;else{var ln;kt=ut.key,lt=ut.label,St=(ln=ut.value)!==null&&ln!==void 0?ln:kt}var en=ge.get(St);if(en){var wn;lt===void 0&&(lt=en==null?void 0:en[E||ne.label]),kt===void 0&&(kt=(wn=en==null?void 0:en.key)!==null&&wn!==void 0?wn:St),_n=en==null?void 0:en.disabled,bn=en==null?void 0:en.title}return{label:lt,value:St,key:kt,disabled:_n,title:bn}})},[ne,E,ge]),Ce=xi(B,{value:U}),ye=xe(Ce,2),ke=ye[0],Be=ye[1],Ue=v.useMemo(function(){var Fe,Ge=Y&&ke===null?[]:ke,ut=ue(Ge);return r==="combobox"&&gAe((Fe=ut[0])===null||Fe===void 0?void 0:Fe.value)?[]:ut},[ke,ue,r,Y]),We=JAe(Ue,ge),Me=xe(We,2),$e=Me[0],Qe=Me[1],nt=v.useMemo(function(){if(!r&&$e.length===1){var Fe=$e[0];if(Fe.value===null&&(Fe.label===null||Fe.label===void 0))return[]}return $e.map(function(Ge){var ut;return de(de({},Ge),{},{label:(ut=typeof H=="function"?H(Ge):Ge.label)!==null&&ut!==void 0?ut:Ge.value})})},[r,$e,H]),ht=v.useMemo(function(){return new Set($e.map(function(Fe){return Fe.value}))},[$e]);v.useEffect(function(){if(r==="combobox"){var Fe,Ge=(Fe=$e[0])===null||Fe===void 0?void 0:Fe.value;ae(pAe(Ge)?String(Ge):"")}},[$e]);var ft=Cq(function(Fe,Ge){var ut=Ge??Fe;return oe(oe({},ne.value,Fe),ne.label,ut)}),et=v.useMemo(function(){if(r!=="tags")return fe;var Fe=it(fe),Ge=function(St){return ge.has(St)};return it($e).sort(function(ut,St){return ut.value<St.value?-1:1}).forEach(function(ut){var St=ut.value;Ge(St)||Fe.push(ft(St,ut.label))}),Fe},[ft,fe,ge,$e,r]),pe=e$e(et,ne,le,J,C),Pe=v.useMemo(function(){return r!=="tags"||!le||pe.some(function(Fe){return Fe[C||"value"]===le})||pe.some(function(Fe){return Fe[ne.value]===le})?pe:[ft(le)].concat(it(pe))},[ft,C,r,pe,le,ne]),je=function Fe(Ge){var ut=it(Ge).sort(function(St,lt){return x(St,lt,{searchValue:le})});return ut.map(function(St){return Array.isArray(St.options)?de(de({},St),{},{options:St.options.length>0?Fe(St.options):St.options}):St})},Le=v.useMemo(function(){return x?je(Pe):Pe},[Pe,x,le]),qe=v.useMemo(function(){return _Ae(Le,{fieldNames:ne,childrenAsData:G})},[Le,ne,G]),at=function(Ge){var ut=ue(Ge);if(Be(ut),K&&(ut.length!==$e.length||ut.some(function(kt,_n){var bn;return((bn=$e[_n])===null||bn===void 0?void 0:bn.value)!==(kt==null?void 0:kt.value)}))){var St=W?ut:ut.map(function(kt){return kt.value}),lt=ut.map(function(kt){return vN(Qe(kt.value))});K(Y?St:St[0],Y?lt:lt[0])}},Ae=v.useState(null),Ne=xe(Ae,2),xt=Ne[0],Pt=Ne[1],gn=v.useState(0),Xt=xe(gn,2),sn=Xt[0],Zt=Xt[1],Vt=M!==void 0?M:r!=="combobox",an=v.useCallback(function(Fe,Ge){var ut=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},St=ut.source,lt=St===void 0?"keyboard":St;Zt(Ge),s&&r==="combobox"&&Fe!==null&&lt==="keyboard"&&Pt(String(Fe))},[s,r]),wt=function(Ge,ut,St){var lt=function(){var Nn,gt=Qe(Ge);return[W?{label:gt==null?void 0:gt[ne.label],value:Ge,key:(Nn=gt==null?void 0:gt.key)!==null&&Nn!==void 0?Nn:Ge}:Ge,vN(gt)]};if(ut&&h){var kt=lt(),_n=xe(kt,2),bn=_n[0],ln=_n[1];h(bn,ln)}else if(!ut&&g&&St!=="clear"){var en=lt(),wn=xe(en,2),nr=wn[0],rr=wn[1];g(nr,rr)}},bt=Cq(function(Fe,Ge){var ut,St=Y?Ge.selected:!0;St?ut=Y?[].concat(it($e),[Fe]):[Fe]:ut=$e.filter(function(lt){return lt.value!==Fe}),at(ut),wt(Fe,St),r==="combobox"?Pt(""):(!yN||f)&&(ae(""),Pt(""))}),ot=function(Ge,ut){at(Ge);var St=ut.type,lt=ut.values;(St==="remove"||St==="clear")&&lt.forEach(function(kt){wt(kt.value,!1,St)})},Xe=function(Ge,ut){if(ae(Ge),Pt(null),ut.source==="submit"){var St=(Ge||"").trim();if(St){var lt=Array.from(new Set([].concat(it(ht),[St])));at(lt),wt(St,!0),ae("")}return}ut.source!=="blur"&&(r==="combobox"&&at(Ge),u==null||u(Ge))},qt=function(Ge){var ut=Ge;r!=="tags"&&(ut=Ge.map(function(lt){var kt=ve.get(lt);return kt==null?void 0:kt.value}).filter(function(lt){return lt!==void 0}));var St=Array.from(new Set([].concat(it(ht),it(ut))));at(St),St.forEach(function(lt){wt(lt,!0)})},Tt=v.useMemo(function(){var Fe=A!==!1&&m!==!1;return de(de({},ie),{},{flattenOptions:qe,onActiveValue:an,defaultActiveFirstOption:Vt,onSelect:bt,menuItemSelectedIcon:R,rawValues:ht,fieldNames:ne,virtual:Fe,direction:j,listHeight:k,listItemHeight:F,childrenAsData:G,maxCount:q,optionRender:I})},[q,ie,qe,an,Vt,bt,R,ht,ne,A,m,j,k,F,G,I]);return v.createElement(Vz.Provider,{value:Tt},v.createElement(RAe,vt({},X,{id:Z,prefixCls:i,ref:e,omitDomProps:c$e,mode:r,displayValues:nt,onDisplayValuesChange:ot,direction:j,searchValue:le,onSearch:Xe,autoClearSearchValue:f,onSearchSplit:qt,dropdownMatchSelectWidth:m,OptionList:ZAe,emptyOptions:!qe.length,activeValue:xt,activeDescendantId:"".concat(Z,"_list_").concat(sn)})))}),Gz=d$e;Gz.Option=Kz;Gz.OptGroup=qz;function D_(t,e,n){return he({[`${t}-status-success`]:e==="success",[`${t}-status-warning`]:e==="warning",[`${t}-status-error`]:e==="error",[`${t}-status-validating`]:e==="validating",[`${t}-has-feedback`]:n})}const aM=(t,e)=>e||t,f$e=()=>{const[,t]=wa(),[e]=Vv("Empty"),r=new Xr(t.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return v.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},v.createElement("title",null,(e==null?void 0:e.description)||"Empty"),v.createElement("g",{fill:"none",fillRule:"evenodd"},v.createElement("g",{transform:"translate(24 31.67)"},v.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),v.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),v.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),v.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),v.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),v.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),v.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},v.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),v.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},h$e=()=>{const[,t]=wa(),[e]=Vv("Empty"),{colorFill:n,colorFillTertiary:r,colorFillQuaternary:o,colorBgContainer:i}=t,{borderColor:s,shadowColor:a,contentColor:l}=v.useMemo(()=>({borderColor:new Xr(n).onBackground(i).toHexString(),shadowColor:new Xr(r).onBackground(i).toHexString(),contentColor:new Xr(o).onBackground(i).toHexString()}),[n,r,o,i]);return v.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},v.createElement("title",null,(e==null?void 0:e.description)||"Empty"),v.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},v.createElement("ellipse",{fill:a,cx:"32",cy:"33",rx:"32",ry:"7"}),v.createElement("g",{fillRule:"nonzero",stroke:s},v.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),v.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:l}))))},p$e=t=>{const{componentCls:e,margin:n,marginXS:r,marginXL:o,fontSize:i,lineHeight:s}=t;return{[e]:{marginInline:r,fontSize:i,lineHeight:s,textAlign:"center",[`${e}-image`]:{height:t.emptyImgHeight,marginBottom:r,opacity:t.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:t.colorTextDescription},[`${e}-footer`]:{marginTop:n},"&-normal":{marginBlock:o,color:t.colorTextDescription,[`${e}-description`]:{color:t.colorTextDescription},[`${e}-image`]:{height:t.emptyImgHeightMD}},"&-small":{marginBlock:r,color:t.colorTextDescription,[`${e}-image`]:{height:t.emptyImgHeightSM}}}}},g$e=li("Empty",t=>{const{componentCls:e,controlHeightLG:n,calc:r}=t,o=Tr(t,{emptyImgCls:`${e}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[p$e(o)]});var m$e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const nie=v.createElement(f$e,null),rie=v.createElement(h$e,null),cp=t=>{const{className:e,rootClassName:n,prefixCls:r,image:o=nie,description:i,children:s,imageStyle:a,style:l,classNames:c,styles:u}=t,d=m$e(t,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:f,direction:h,className:g,style:y,classNames:m,styles:S}=Bl("empty"),x=f("empty",r),[C,E,P]=g$e(x),[I]=Vv("Empty"),T=typeof i<"u"?i:I==null?void 0:I.description,M=typeof T=="string"?T:"empty";let R=null;return typeof o=="string"?R=v.createElement("img",{alt:M,src:o}):R=o,C(v.createElement("div",Object.assign({className:he(E,P,x,g,{[`${x}-normal`]:o===rie,[`${x}-rtl`]:h==="rtl"},e,n,m.root,c==null?void 0:c.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},S.root),y),u==null?void 0:u.root),l)},d),v.createElement("div",{className:he(`${x}-image`,m.image,c==null?void 0:c.image),style:Object.assign(Object.assign(Object.assign({},a),S.image),u==null?void 0:u.image)},R),T&&v.createElement("div",{className:he(`${x}-description`,m.description,c==null?void 0:c.description),style:Object.assign(Object.assign({},S.description),u==null?void 0:u.description)},T),s&&v.createElement("div",{className:he(`${x}-footer`,m.footer,c==null?void 0:c.footer),style:Object.assign(Object.assign({},S.footer),u==null?void 0:u.footer)},s)))};cp.PRESENTED_IMAGE_DEFAULT=nie;cp.PRESENTED_IMAGE_SIMPLE=rie;const oie=t=>{const{componentName:e}=t,{getPrefixCls:n}=v.useContext(tr),r=n("empty");switch(e){case"Table":case"List":return ce.createElement(cp,{image:cp.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return ce.createElement(cp,{image:cp.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return ce.createElement(cp,null)}},Xz=(t,e,n=void 0)=>{var r,o;const{variant:i,[t]:s}=v.useContext(tr),a=v.useContext(Doe),l=s==null?void 0:s.variant;let c;typeof e<"u"?c=e:n===!1?c="borderless":c=(o=(r=a??l)!==null&&r!==void 0?r:i)!==null&&o!==void 0?o:"outlined";const u=WMe.includes(c);return[c,u]},v$e=t=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:t==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function y$e(t,e){return t||v$e(e)}const Eq=t=>{const{optionHeight:e,optionFontSize:n,optionLineHeight:r,optionPadding:o}=t;return{position:"relative",display:"block",minHeight:e,padding:o,color:t.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},b$e=t=>{const{antCls:e,componentCls:n}=t,r=`${n}-item`,o=`&${e}-slide-up-enter${e}-slide-up-enter-active`,i=`&${e}-slide-up-appear${e}-slide-up-appear-active`,s=`&${e}-slide-up-leave${e}-slide-up-leave-active`,a=`${n}-dropdown-placement-`,l=`${r}-option-selected`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},xs(t)),{position:"absolute",top:-9999,zIndex:t.zIndexPopup,boxSizing:"border-box",padding:t.paddingXXS,overflow:"hidden",fontSize:t.fontSize,fontVariant:"initial",backgroundColor:t.colorBgElevated,borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,[`
          ${o}${a}bottomLeft,
          ${i}${a}bottomLeft
        `]:{animationName:_oe},[`
          ${o}${a}topLeft,
          ${i}${a}topLeft,
          ${o}${a}topRight,
          ${i}${a}topRight
        `]:{animationName:Toe},[`${s}${a}bottomLeft`]:{animationName:Ioe},[`
          ${s}${a}topLeft,
          ${s}${a}topRight
        `]:{animationName:Moe},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},Eq(t)),{cursor:"pointer",transition:`background ${t.motionDurationSlow} ease`,borderRadius:t.borderRadiusSM,"&-group":{color:t.colorTextDescription,fontSize:t.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},O_),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:t.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:t.optionSelectedColor,fontWeight:t.optionSelectedFontWeight,backgroundColor:t.optionSelectedBg,[`${r}-option-state`]:{color:t.colorPrimary}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:t.colorBgContainerDisabled},color:t.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:t.calc(t.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Eq(t)),{color:t.colorTextDisabled})}),[`${l}:has(+ ${l})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${l}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},A_(t,"slide-up"),A_(t,"slide-down"),aq(t,"move-up"),aq(t,"move-down")]},S$e=t=>{const{multipleSelectItemHeight:e,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:o}=t,i=t.max(t.calc(n).sub(r).equal(),0),s=t.max(t.calc(i).sub(o).equal(),0);return{basePadding:i,containerPadding:s,itemHeight:Re(e),itemLineHeight:Re(t.calc(e).sub(t.calc(t.lineWidth).mul(2)).equal())}},x$e=t=>{const{multipleSelectItemHeight:e,selectHeight:n,lineWidth:r}=t;return t.calc(n).sub(e).div(2).sub(r).equal()},w$e=t=>{const{componentCls:e,iconCls:n,borderRadiusSM:r,motionDurationSlow:o,paddingXS:i,multipleItemColorDisabled:s,multipleItemBorderColorDisabled:a,colorIcon:l,colorIconHover:c,INTERNAL_FIXED_ITEM_MARGIN:u}=t;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:u,borderRadius:r,cursor:"default",transition:`font-size ${o}, line-height ${o}, height ${o}`,marginInlineEnd:t.calc(u).mul(2).equal(),paddingInlineStart:i,paddingInlineEnd:t.calc(i).div(2).equal(),[`${e}-disabled&`]:{color:s,borderColor:a,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:t.calc(i).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},XT()),{display:"inline-flex",alignItems:"center",color:l,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:c}})}}}},C$e=(t,e)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=t,o=`${n}-selection-overflow`,i=t.multipleSelectItemHeight,s=x$e(t),a=e?`${n}-${e}`:"",l=S$e(t);return{[`${n}-multiple${a}`]:Object.assign(Object.assign({},w$e(t)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:l.basePadding,paddingBlock:l.containerPadding,borderRadius:t.borderRadius,[`${n}-disabled&`]:{background:t.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Re(r)} 0`,lineHeight:Re(i),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:l.itemHeight,lineHeight:Re(l.itemLineHeight)},[`${n}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:Re(i),marginBlock:r}},[`${n}-prefix`]:{marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(l.basePadding).equal()},[`${o}-item + ${o}-item,
        ${n}-prefix + ${n}-selection-wrap
      `]:{[`${n}-selection-search`]:{marginInlineStart:0},[`${n}-selection-placeholder`]:{insetInlineStart:0}},[`${o}-item-suffix`]:{minHeight:l.itemHeight,marginBlock:r},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(s).equal(),"\n          &-input,\n          &-mirror\n        ":{height:i,fontFamily:t.fontFamily,lineHeight:Re(i),transition:`all ${t.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:t.calc(t.inputPaddingHorizontalBase).sub(l.basePadding).equal(),insetInlineEnd:t.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${t.motionDurationSlow}`}})}};function qk(t,e){const{componentCls:n}=t,r=e?`${n}-${e}`:"",o={[`${n}-multiple${r}`]:{fontSize:t.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:t.calc(t.fontSizeIcon).add(t.controlPaddingHorizontal).equal()}}};return[C$e(t,e),o]}const E$e=t=>{const{componentCls:e}=t,n=Tr(t,{selectHeight:t.controlHeightSM,multipleSelectItemHeight:t.multipleItemHeightSM,borderRadius:t.borderRadiusSM,borderRadiusSM:t.borderRadiusXS}),r=Tr(t,{fontSize:t.fontSizeLG,selectHeight:t.controlHeightLG,multipleSelectItemHeight:t.multipleItemHeightLG,borderRadius:t.borderRadiusLG,borderRadiusSM:t.borderRadius});return[qk(t),qk(n,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},qk(r,"lg")]};function Kk(t,e){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:o}=t,i=t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),s=e?`${n}-${e}`:"";return{[`${n}-single${s}`]:{fontSize:t.fontSize,height:t.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},xs(t,!0)),{display:"flex",borderRadius:o,flex:"1 1 auto",[`${n}-selection-wrap:after`]:{lineHeight:Re(i)},[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:Re(i),transition:`all ${t.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-search,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:t.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:t.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${Re(r)}`,[`${n}-selection-search-input`]:{height:i,fontSize:t.fontSize},"&:after":{lineHeight:Re(i)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Re(r)}`,"&:after":{display:"none"}}}}}}}function P$e(t){const{componentCls:e}=t,n=t.calc(t.controlPaddingHorizontalSM).sub(t.lineWidth).equal();return[Kk(t),Kk(Tr(t,{controlHeight:t.controlHeightSM,borderRadius:t.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${Re(n)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:t.calc(n).add(t.calc(t.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:t.calc(t.fontSize).mul(1.5).equal()}}}},Kk(Tr(t,{controlHeight:t.singleItemHeightLG,fontSize:t.fontSizeLG,borderRadius:t.borderRadiusLG}),"lg")]}const _$e=t=>{const{fontSize:e,lineHeight:n,lineWidth:r,controlHeight:o,controlHeightSM:i,controlHeightLG:s,paddingXXS:a,controlPaddingHorizontal:l,zIndexPopupBase:c,colorText:u,fontWeightStrong:d,controlItemBgActive:f,controlItemBgHover:h,colorBgContainer:g,colorFillSecondary:y,colorBgContainerDisabled:m,colorTextDisabled:S,colorPrimaryHover:x,colorPrimary:C,controlOutline:E}=t,P=a*2,I=r*2,T=Math.min(o-P,o-I),M=Math.min(i-P,i-I),R=Math.min(s-P,s-I);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(a/2),zIndexPopup:c+50,optionSelectedColor:u,optionSelectedFontWeight:d,optionSelectedBg:f,optionActiveBg:h,optionPadding:`${(o-e*n)/2}px ${l}px`,optionFontSize:e,optionLineHeight:n,optionHeight:o,selectorBg:g,clearBg:g,singleItemHeightLG:s,multipleItemBg:y,multipleItemBorderColor:"transparent",multipleItemHeight:T,multipleItemHeightSM:M,multipleItemHeightLG:R,multipleSelectorBgDisabled:m,multipleItemColorDisabled:S,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(t.fontSize*1.25),hoverBorderColor:x,activeBorderColor:C,activeOutlineColor:E,selectAffixPadding:a}},iie=(t,e)=>{const{componentCls:n,antCls:r,controlOutlineWidth:o}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${Re(t.lineWidth)} ${t.lineType} ${e.borderColor}`,background:t.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${Re(o)} ${e.activeOutlineColor}`,outline:0},[`${n}-prefix`]:{color:e.color}}}},Pq=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},iie(t,e))}),I$e=t=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},iie(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Pq(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Pq(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Re(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),sie=(t,e)=>{const{componentCls:n,antCls:r}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:e.bg,border:`${Re(t.lineWidth)} ${t.lineType} transparent`,color:e.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:e.hoverBg},[`${n}-focused& ${n}-selector`]:{background:t.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},_q=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},sie(t,e))}),T$e=t=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},sie(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor,color:t.colorText})),_q(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,color:t.colorError})),_q(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{borderColor:t.colorBorder,background:t.colorBgContainerDisabled,color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.colorBgContainer,border:`${Re(t.lineWidth)} ${t.lineType} ${t.colorSplit}`}})}),M$e=t=>({"&-borderless":{[`${t.componentCls}-selector`]:{background:"transparent",border:`${Re(t.lineWidth)} ${t.lineType} transparent`},[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Re(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`},[`&${t.componentCls}-status-error`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorError}},[`&${t.componentCls}-status-warning`]:{[`${t.componentCls}-prefix, ${t.componentCls}-selection-item`]:{color:t.colorWarning}}}}),aie=(t,e)=>{const{componentCls:n,antCls:r}=t;return{[`&:not(${n}-customize-input) ${n}-selector`]:{borderWidth:`0 0 ${Re(t.lineWidth)} 0`,borderStyle:`none none ${t.lineType} none`,borderColor:e.borderColor,background:t.selectorBg,borderRadius:0},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:e.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:e.activeBorderColor,outline:0},[`${n}-prefix`]:{color:e.color}}}},Iq=(t,e)=>({[`&${t.componentCls}-status-${e.status}`]:Object.assign({},aie(t,e))}),O$e=t=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},aie(t,{borderColor:t.colorBorder,hoverBorderHover:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeOutlineColor:t.activeOutlineColor,color:t.colorText})),Iq(t,{status:"error",borderColor:t.colorError,hoverBorderHover:t.colorErrorHover,activeBorderColor:t.colorError,activeOutlineColor:t.colorErrorOutline,color:t.colorError})),Iq(t,{status:"warning",borderColor:t.colorWarning,hoverBorderHover:t.colorWarningHover,activeBorderColor:t.colorWarning,activeOutlineColor:t.colorWarningOutline,color:t.colorWarning})),{[`&${t.componentCls}-disabled`]:{[`&:not(${t.componentCls}-customize-input) ${t.componentCls}-selector`]:{color:t.colorTextDisabled}},[`&${t.componentCls}-multiple ${t.componentCls}-selection-item`]:{background:t.multipleItemBg,border:`${Re(t.lineWidth)} ${t.lineType} ${t.multipleItemBorderColor}`}})}),R$e=t=>({[t.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},I$e(t)),T$e(t)),M$e(t)),O$e(t))}),k$e=t=>{const{componentCls:e}=t;return{position:"relative",transition:`all ${t.motionDurationMid} ${t.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},A$e=t=>{const{componentCls:e}=t;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none",appearance:"none"}}}},$$e=t=>{const{antCls:e,componentCls:n,inputPaddingHorizontalBase:r,iconCls:o}=t,i={[`${n}-clear`]:{opacity:1,background:t.colorBgBase,borderRadius:"50%"}};return{[n]:Object.assign(Object.assign({},xs(t)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},k$e(t)),A$e(t)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},O_),{[`> ${e}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},O_),{flex:1,color:t.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},XT()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${t.motionDurationSlow} ease`,[o]:{verticalAlign:"top",transition:`transform ${t.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${n}-prefix`]:{flex:"none",marginInlineEnd:t.selectAffixPadding},[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:t.fontSizeIcon,height:t.fontSizeIcon,marginTop:t.calc(t.fontSizeIcon).mul(-1).div(2).equal(),color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${t.motionDurationMid} ease, opacity ${t.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:t.colorIcon}},"@media(hover:none)":i,"&:hover":i}),[`${n}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:t.calc(r).add(t.fontSize).add(t.paddingXS).equal()}}}}}},D$e=t=>{const{componentCls:e}=t;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},$$e(t),P$e(t),E$e(t),b$e(t),{[`${e}-rtl`]:{direction:"rtl"}},Hz(t,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},j$e=li("Select",(t,{rootPrefixCls:e})=>{const n=Tr(t,{rootPrefixCls:e,inputPaddingHorizontalBase:t.calc(t.paddingSM).sub(1).equal(),multipleSelectItemHeight:t.multipleItemHeight,selectHeight:t.controlHeight});return[D$e(n),R$e(n)]},_$e,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var L$e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},N$e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:L$e}))},lie=v.forwardRef(N$e),F$e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},z$e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:F$e}))},B$e=v.forwardRef(z$e),H$e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},U$e=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:H$e}))},cie=v.forwardRef(U$e);function W$e({suffixIcon:t,clearIcon:e,menuItemSelectedIcon:n,removeIcon:r,loading:o,multiple:i,hasFeedback:s,prefixCls:a,showSuffixIcon:l,feedbackIcon:c,showArrow:u,componentName:d}){const f=e??v.createElement(Kv,null),h=S=>t===null&&!s&&!u?null:v.createElement(v.Fragment,null,l!==!1&&S,s&&c);let g=null;if(t!==void 0)g=h(t);else if(o)g=h(v.createElement(Zx,{spin:!0}));else{const S=`${a}-suffix`;g=({open:x,showSearch:C})=>h(x&&C?v.createElement(cie,{className:S}):v.createElement(B$e,{className:S}))}let y=null;n!==void 0?y=n:i?y=v.createElement(lie,null):y=null;let m=null;return r!==void 0?m=r:m=v.createElement(Qx,null),{clearIcon:f,suffixIcon:g,itemIcon:y,removeIcon:m}}function V$e(t,e){return e!==void 0?e:t!==null}var q$e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const uie="SECRET_COMBOBOX_MODE_DO_NOT_USE",K$e=(t,e)=>{var n,r,o,i,s;const{prefixCls:a,bordered:l,className:c,rootClassName:u,getPopupContainer:d,popupClassName:f,dropdownClassName:h,listHeight:g=256,placement:y,listItemHeight:m,size:S,disabled:x,notFoundContent:C,status:E,builtinPlacements:P,dropdownMatchSelectWidth:I,popupMatchSelectWidth:T,direction:M,style:R,allowClear:A,variant:j,dropdownStyle:N,transitionName:k,tagRender:D,maxCount:F,prefix:H,dropdownRender:U,popupRender:B,onDropdownVisibleChange:W,onOpenChange:K,styles:q,classNames:X}=t,Z=q$e(t,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix","dropdownRender","popupRender","onDropdownVisibleChange","onOpenChange","styles","classNames"]),{getPopupContainer:Y,getPrefixCls:G,renderEmpty:J,direction:ne,virtual:ee,popupMatchSelectWidth:re,popupOverflow:le}=v.useContext(tr),{showSearch:ae,style:ie,styles:ge,className:ve,classNames:fe}=Bl("select"),[,ue]=wa(),Ce=m??(ue==null?void 0:ue.controlHeight),ye=G("select",a),ke=G(),Be=M??ne,{compactSize:Ue,compactItemClassnames:We}=ew(ye,Be),[Me,$e]=Xz("select",j,l),Qe=Nc(ye),[nt,ht,ft]=j$e(ye,Qe),et=v.useMemo(()=>{const{mode:St}=t;if(St!=="combobox")return St===uie?"combobox":St},[t.mode]),pe=et==="multiple"||et==="tags",Pe=V$e(t.suffixIcon,t.showArrow),je=(n=T??I)!==null&&n!==void 0?n:re,Le=((r=q==null?void 0:q.popup)===null||r===void 0?void 0:r.root)||((o=ge.popup)===null||o===void 0?void 0:o.root)||N,qe=B||U,at=K||W,{status:Ae,hasFeedback:Ne,isFormItemInput:xt,feedbackIcon:Pt}=v.useContext(Qa),gn=aM(Ae,E);let Xt;C!==void 0?Xt=C:et==="combobox"?Xt=null:Xt=(J==null?void 0:J("Select"))||v.createElement(oie,{componentName:"Select"});const{suffixIcon:sn,itemIcon:Zt,removeIcon:Vt,clearIcon:an}=W$e(Object.assign(Object.assign({},Z),{multiple:pe,hasFeedback:Ne,feedbackIcon:Pt,showSuffixIcon:Pe,prefixCls:ye,componentName:"Select"})),wt=A===!0?{clearIcon:an}:A,bt=zl(Z,["suffixIcon","itemIcon"]),ot=he(((i=X==null?void 0:X.popup)===null||i===void 0?void 0:i.root)||((s=fe==null?void 0:fe.popup)===null||s===void 0?void 0:s.root)||f||h,{[`${ye}-dropdown-${Be}`]:Be==="rtl"},u,fe.root,X==null?void 0:X.root,ft,Qe,ht),Xe=Du(St=>{var lt;return(lt=S??Ue)!==null&&lt!==void 0?lt:St}),qt=v.useContext(Pd),Tt=x??qt,Fe=he({[`${ye}-lg`]:Xe==="large",[`${ye}-sm`]:Xe==="small",[`${ye}-rtl`]:Be==="rtl",[`${ye}-${Me}`]:$e,[`${ye}-in-form-item`]:xt},D_(ye,gn,Ne),We,ve,c,fe.root,X==null?void 0:X.root,u,ft,Qe,ht),Ge=v.useMemo(()=>y!==void 0?y:Be==="rtl"?"bottomRight":"bottomLeft",[y,Be]),[ut]=boe("SelectLike",Le==null?void 0:Le.zIndex);return nt(v.createElement(Gz,Object.assign({ref:e,virtual:ee,showSearch:ae},bt,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ge.root),q==null?void 0:q.root),ie),R),dropdownMatchSelectWidth:je,transitionName:Nz(ke,"slide-up",k),builtinPlacements:y$e(P,le),listHeight:g,listItemHeight:Ce,mode:et,prefixCls:ye,placement:Ge,direction:Be,prefix:H,suffixIcon:sn,menuItemSelectedIcon:Zt,removeIcon:Vt,allowClear:wt,notFoundContent:Xt,className:Fe,getPopupContainer:d||Y,dropdownClassName:ot,disabled:Tt,dropdownStyle:Object.assign(Object.assign({},Le),{zIndex:ut}),maxCount:pe?F:void 0,tagRender:pe?D:void 0,dropdownRender:qe,onDropdownVisibleChange:at})))},Gv=v.forwardRef(K$e),G$e=qke(Gv,"dropdownAlign");Gv.SECRET_COMBOBOX_MODE_DO_NOT_USE=uie;Gv.Option=Kz;Gv.OptGroup=qz;Gv._InternalPanelDoNotUseOrYouWillBeFired=G$e;const X$e=(t,e)=>{typeof(t==null?void 0:t.addEventListener)<"u"?t.addEventListener("change",e):typeof(t==null?void 0:t.addListener)<"u"&&t.addListener(e)},Y$e=(t,e)=>{typeof(t==null?void 0:t.removeEventListener)<"u"?t.removeEventListener("change",e):typeof(t==null?void 0:t.removeListener)<"u"&&t.removeListener(e)},zp=["xxl","xl","lg","md","sm","xs"],Q$e=t=>({xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`}),Z$e=t=>{const e=t,n=[].concat(zp).reverse();return n.forEach((r,o)=>{const i=r.toUpperCase(),s=`screen${i}Min`,a=`screen${i}`;if(!(e[s]<=e[a]))throw new Error(`${s}<=${a} fails : !(${e[s]}<=${e[a]})`);if(o<n.length-1){const l=`screen${i}Max`;if(!(e[a]<=e[l]))throw new Error(`${a}<=${l} fails : !(${e[a]}<=${e[l]})`);const u=`screen${n[o+1].toUpperCase()}Min`;if(!(e[l]<=e[u]))throw new Error(`${l}<=${u} fails : !(${e[l]}<=${e[u]})`)}}),t},J$e=()=>{const[,t]=wa(),e=Q$e(Z$e(t));return ce.useMemo(()=>{const n=new Map;let r=-1,o={};return{responsiveMap:e,matchHandlers:{},dispatch(i){return o=i,n.forEach(s=>s(o)),n.size>=1},subscribe(i){return n.size||this.register(),r+=1,n.set(r,i),i(o),r},unsubscribe(i){n.delete(i),n.size||this.unregister()},register(){Object.entries(e).forEach(([i,s])=>{const a=({matches:c})=>{this.dispatch(Object.assign(Object.assign({},o),{[i]:c}))},l=window.matchMedia(s);X$e(l,a),this.matchHandlers[s]={mql:l,listener:a},a(l)})},unregister(){Object.values(e).forEach(i=>{const s=this.matchHandlers[i];Y$e(s==null?void 0:s.mql,s==null?void 0:s.listener)}),n.clear()}}},[t])};function eDe(){const[,t]=v.useReducer(e=>e+1,0);return t}function Yz(t=!0,e={}){const n=v.useRef(e),r=eDe(),o=J$e();return lr(()=>{const i=o.subscribe(s=>{n.current=s,t&&r()});return()=>o.unsubscribe(i)},[]),n.current}function tDe(t){const{sizePopupArrow:e,borderRadiusXS:n,borderRadiusOuter:r}=t,o=e/2,i=0,s=o,a=r*1/Math.sqrt(2),l=o-r*(1-1/Math.sqrt(2)),c=o-n*(1/Math.sqrt(2)),u=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),d=2*o-c,f=u,h=2*o-a,g=l,y=2*o-i,m=s,S=o*Math.sqrt(2)+r*(Math.sqrt(2)-2),x=r*(Math.sqrt(2)-1),C=`polygon(${x}px 100%, 50% ${x}px, ${2*o-x}px 100%, ${x}px 100%)`,E=`path('M ${i} ${s} A ${r} ${r} 0 0 0 ${a} ${l} L ${c} ${u} A ${n} ${n} 0 0 1 ${d} ${f} L ${h} ${g} A ${r} ${r} 0 0 0 ${y} ${m} Z')`;return{arrowShadowWidth:S,arrowPath:E,arrowPolygon:C}}const nDe=(t,e,n)=>{const{sizePopupArrow:r,arrowPolygon:o,arrowPath:i,arrowShadowWidth:s,borderRadiusXS:a,calc:l}=t;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:l(r).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[o,i]},content:'""'},"&::after":{content:'""',position:"absolute",width:s,height:s,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Re(a)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},die=8;function fie(t){const{contentRadius:e,limitVerticalRadius:n}=t,r=e>12?e+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?die:r}}function FC(t,e){return t?e:{}}function rDe(t,e,n){const{componentCls:r,boxShadowPopoverArrow:o,arrowOffsetVertical:i,arrowOffsetHorizontal:s}=t,{arrowDistance:a=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}={};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},nDe(t,e,o)),{"&:before":{background:e}})]},FC(!!l.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:a,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":s,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:s}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Re(s)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:s}}}})),FC(!!l.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:a,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":s,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:s}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Re(s)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:s}}}})),FC(!!l.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:a},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:i},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:i}})),FC(!!l.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:a},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:i},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:i}}))}}function oDe(t,e,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const o=r&&typeof r=="object"?r:{},i={};switch(t){case"top":case"bottom":i.shiftX=e.arrowOffsetHorizontal*2+n,i.shiftY=!0,i.adjustY=!0;break;case"left":case"right":i.shiftY=e.arrowOffsetVertical*2+n,i.shiftX=!0,i.adjustX=!0;break}const s=Object.assign(Object.assign({},i),o);return s.shiftX||(s.adjustX=!0),s.shiftY||(s.adjustY=!0),s}const Tq={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},iDe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},sDe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function aDe(t){const{arrowWidth:e,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:o,borderRadius:i}=t,s=e/2,a={};return Object.keys(Tq).forEach(l=>{const c=r&&iDe[l]||Tq[l],u=Object.assign(Object.assign({},c),{offset:[0,0],dynamicInset:!0});switch(a[l]=u,sDe.has(l)&&(u.autoArrow=!1),l){case"top":case"topLeft":case"topRight":u.offset[1]=-s-o;break;case"bottom":case"bottomLeft":case"bottomRight":u.offset[1]=s+o;break;case"left":case"leftTop":case"leftBottom":u.offset[0]=-s-o;break;case"right":case"rightTop":case"rightBottom":u.offset[0]=s+o;break}const d=fie({contentRadius:i,limitVerticalRadius:!0});if(r)switch(l){case"topLeft":case"bottomLeft":u.offset[0]=-d.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":u.offset[0]=d.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":u.offset[1]=-d.arrowOffsetHorizontal*2+s;break;case"leftBottom":case"rightBottom":u.offset[1]=d.arrowOffsetHorizontal*2-s;break}u.overflow=oDe(l,d,e,n),u.htmlRegion="visibleFirst"}),a}const lDe=t=>{const{calc:e,componentCls:n,tooltipMaxWidth:r,tooltipColor:o,tooltipBg:i,tooltipBorderRadius:s,zIndexPopup:a,controlHeight:l,boxShadowSecondary:c,paddingSM:u,paddingXS:d,arrowOffsetHorizontal:f,sizePopupArrow:h}=t,g=e(s).add(h).add(f).equal(),y=e(s).mul(2).add(h).equal();return[{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},xs(t)),{position:"absolute",zIndex:a,display:"block",width:"max-content",maxWidth:r,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":i,[`${n}-inner`]:{minWidth:y,minHeight:l,padding:`${Re(t.calc(u).div(2).equal())} ${Re(d)}`,color:o,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:i,borderRadius:s,boxShadow:c,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:g},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:t.min(s,die)}},[`${n}-content`]:{position:"relative"}}),i2e(t,(m,{darkColor:S})=>({[`&${n}-${m}`]:{[`${n}-inner`]:{backgroundColor:S},[`${n}-arrow`]:{"--antd-arrow-background-color":S}}}))),{"&-rtl":{direction:"rtl"}})},rDe(t,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:t.sizePopupArrow}}]},cDe=t=>Object.assign(Object.assign({zIndexPopup:t.zIndexPopupBase+70},fie({contentRadius:t.borderRadius,limitVerticalRadius:!0})),tDe(Tr(t,{borderRadiusOuter:Math.min(t.borderRadiusOuter,4)}))),hie=(t,e=!0)=>li("Tooltip",r=>{const{borderRadius:o,colorTextLightSolid:i,colorBgSpotlight:s}=r,a=Tr(r,{tooltipMaxWidth:250,tooltipColor:i,tooltipBorderRadius:o,tooltipBg:s});return[lDe(a),$Re(r,"zoom-big-fast")]},cDe,{resetStyle:!1,injectStyle:e})(t),uDe=Np.map(t=>`${t}-inverse`);function dDe(t,e=!0){return e?[].concat(it(uDe),it(Np)).includes(t):Np.includes(t)}function pie(t,e){const n=dDe(e),r=he({[`${t}-${e}`]:e&&n}),o={},i={};return e&&!n&&(o.background=e,i["--antd-arrow-background-color"]=e),{className:r,overlayStyle:o,arrowStyle:i}}const fDe=t=>{const{prefixCls:e,className:n,placement:r="top",title:o,color:i,overlayInnerStyle:s}=t,{getPrefixCls:a}=v.useContext(tr),l=a("tooltip",e),[c,u,d]=hie(l),f=pie(l,i),h=f.arrowStyle,g=Object.assign(Object.assign({},s),f.overlayStyle),y=he(u,d,l,`${l}-pure`,`${l}-placement-${r}`,n,f.className);return c(v.createElement("div",{className:y,style:h},v.createElement("div",{className:`${l}-arrow`}),v.createElement(bz,Object.assign({},t,{className:u,prefixCls:l,overlayInnerStyle:g}),o)))};var hDe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const pDe=v.forwardRef((t,e)=>{var n,r;const{prefixCls:o,openClassName:i,getTooltipContainer:s,color:a,overlayInnerStyle:l,children:c,afterOpenChange:u,afterVisibleChange:d,destroyTooltipOnHide:f,destroyOnHidden:h,arrow:g=!0,title:y,overlay:m,builtinPlacements:S,arrowPointAtCenter:x=!1,autoAdjustOverflow:C=!0,motion:E,getPopupContainer:P,placement:I="top",mouseEnterDelay:T=.1,mouseLeaveDelay:M=.1,overlayStyle:R,rootClassName:A,overlayClassName:j,styles:N,classNames:k}=t,D=hDe(t,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","destroyOnHidden","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),F=!!g,[,H]=wa(),{getPopupContainer:U,getPrefixCls:B,direction:W,className:K,style:q,classNames:X,styles:Z}=Bl("tooltip"),Y=Yx(),G=v.useRef(null),J=()=>{var Pe;(Pe=G.current)===null||Pe===void 0||Pe.forceAlign()};v.useImperativeHandle(e,()=>{var Pe,je;return{forceAlign:J,forcePopupAlign:()=>{Y.deprecated(!1,"forcePopupAlign","forceAlign"),J()},nativeElement:(Pe=G.current)===null||Pe===void 0?void 0:Pe.nativeElement,popupElement:(je=G.current)===null||je===void 0?void 0:je.popupElement}});const[ne,ee]=xi(!1,{value:(n=t.open)!==null&&n!==void 0?n:t.visible,defaultValue:(r=t.defaultOpen)!==null&&r!==void 0?r:t.defaultVisible}),re=!y&&!m&&y!==0,le=Pe=>{var je,Le;ee(re?!1:Pe),re||((je=t.onOpenChange)===null||je===void 0||je.call(t,Pe),(Le=t.onVisibleChange)===null||Le===void 0||Le.call(t,Pe))},ae=v.useMemo(()=>{var Pe,je;let Le=x;return typeof g=="object"&&(Le=(je=(Pe=g.pointAtCenter)!==null&&Pe!==void 0?Pe:g.arrowPointAtCenter)!==null&&je!==void 0?je:x),S||aDe({arrowPointAtCenter:Le,autoAdjustOverflow:C,arrowWidth:F?H.sizePopupArrow:0,borderRadius:H.borderRadius,offset:H.marginXXS})},[x,g,S,H]),ie=v.useMemo(()=>y===0?y:m||y||"",[m,y]),ge=v.createElement(pN,{space:!0},typeof ie=="function"?ie():ie),ve=B("tooltip",o),fe=B(),ue=t["data-popover-inject"];let Ce=ne;!("open"in t)&&!("visible"in t)&&re&&(Ce=!1);const ye=v.isValidElement(c)&&!uoe(c)?c:v.createElement("span",null,c),ke=ye.props,Be=!ke.className||typeof ke.className=="string"?he(ke.className,i||`${ve}-open`):ke.className,[Ue,We,Me]=hie(ve,!ue),$e=pie(ve,a),Qe=$e.arrowStyle,nt=he(j,{[`${ve}-rtl`]:W==="rtl"},$e.className,A,We,Me,K,X.root,k==null?void 0:k.root),ht=he(X.body,k==null?void 0:k.body),[ft,et]=boe("Tooltip",D.zIndex),pe=v.createElement(gre,Object.assign({},D,{zIndex:ft,showArrow:F,placement:I,mouseEnterDelay:T,mouseLeaveDelay:M,prefixCls:ve,classNames:{root:nt,body:ht},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Qe),Z.root),q),R),N==null?void 0:N.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},Z.body),l),N==null?void 0:N.body),$e.overlayStyle)},getTooltipContainer:P||s||U,ref:G,builtinPlacements:ae,overlay:ge,visible:Ce,onVisibleChange:le,afterVisibleChange:u??d,arrowContent:v.createElement("span",{className:`${ve}-arrow-content`}),motion:{motionName:Nz(fe,"zoom-big-fast",t.transitionName),motionDeadline:1e3},destroyTooltipOnHide:h??!!f}),Ce?_d(ye,{className:Be}):ye);return Ue(v.createElement(moe.Provider,{value:et},pe))}),tw=pDe;tw._InternalPanelDoNotUseOrYouWillBeFired=fDe;var gDe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},mDe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:gDe}))},Mq=v.forwardRef(mDe),vDe=It.ESC,yDe=It.TAB;function bDe(t){var e=t.visible,n=t.triggerRef,r=t.onVisibleChange,o=t.autoFocus,i=t.overlayRef,s=v.useRef(!1),a=function(){if(e){var d,f;(d=n.current)===null||d===void 0||(f=d.focus)===null||f===void 0||f.call(d),r==null||r(!1)}},l=function(){var d;return(d=i.current)!==null&&d!==void 0&&d.focus?(i.current.focus(),s.current=!0,!0):!1},c=function(d){switch(d.keyCode){case vDe:a();break;case yDe:{var f=!1;s.current||(f=l()),f?d.preventDefault():a();break}}};v.useEffect(function(){return e?(window.addEventListener("keydown",c),o&&Sr(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}},[e])}var SDe=v.forwardRef(function(t,e){var n=t.overlay,r=t.arrow,o=t.prefixCls,i=v.useMemo(function(){var a;return typeof n=="function"?a=n():a=n,a},[n]),s=xa(e,pg(i));return ce.createElement(ce.Fragment,null,r&&ce.createElement("div",{className:"".concat(o,"-arrow")}),ce.cloneElement(i,{ref:ch(i)?s:void 0}))}),rm={adjustX:1,adjustY:1},om=[0,0],xDe={topLeft:{points:["bl","tl"],overflow:rm,offset:[0,-4],targetOffset:om},top:{points:["bc","tc"],overflow:rm,offset:[0,-4],targetOffset:om},topRight:{points:["br","tr"],overflow:rm,offset:[0,-4],targetOffset:om},bottomLeft:{points:["tl","bl"],overflow:rm,offset:[0,4],targetOffset:om},bottom:{points:["tc","bc"],overflow:rm,offset:[0,4],targetOffset:om},bottomRight:{points:["tr","br"],overflow:rm,offset:[0,4],targetOffset:om}},wDe=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function CDe(t,e){var n,r=t.arrow,o=r===void 0?!1:r,i=t.prefixCls,s=i===void 0?"rc-dropdown":i,a=t.transitionName,l=t.animation,c=t.align,u=t.placement,d=u===void 0?"bottomLeft":u,f=t.placements,h=f===void 0?xDe:f,g=t.getPopupContainer,y=t.showAction,m=t.hideAction,S=t.overlayClassName,x=t.overlayStyle,C=t.visible,E=t.trigger,P=E===void 0?["hover"]:E,I=t.autoFocus,T=t.overlay,M=t.children,R=t.onVisibleChange,A=Sn(t,wDe),j=ce.useState(),N=xe(j,2),k=N[0],D=N[1],F="visible"in t?C:k,H=ce.useRef(null),U=ce.useRef(null),B=ce.useRef(null);ce.useImperativeHandle(e,function(){return H.current});var W=function(ee){D(ee),R==null||R(ee)};bDe({visible:F,triggerRef:B,onVisibleChange:W,autoFocus:I,overlayRef:U});var K=function(ee){var re=t.onOverlayClick;D(!1),re&&re(ee)},q=function(){return ce.createElement(SDe,{ref:U,overlay:T,prefixCls:s,arrow:o})},X=function(){return typeof T=="function"?q:q()},Z=function(){var ee=t.minOverlayWidthMatchTrigger,re=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?ee:!re},Y=function(){var ee=t.openClassName;return ee!==void 0?ee:"".concat(s,"-open")},G=ce.cloneElement(M,{className:he((n=M.props)===null||n===void 0?void 0:n.className,F&&Y()),ref:ch(M)?xa(B,pg(M)):void 0}),J=m;return!J&&P.indexOf("contextMenu")!==-1&&(J=["click"]),ce.createElement(UT,vt({builtinPlacements:h},A,{prefixCls:s,ref:H,popupClassName:he(S,oe({},"".concat(s,"-show-arrow"),o)),popupStyle:x,action:P,showAction:y,hideAction:J,popupPlacement:d,popupAlign:c,popupTransitionName:a,popupAnimation:l,popupVisible:F,stretch:Z()?"minWidth":"",popup:X(),onPopupVisibleChange:W,onPopupClick:K,getPopupContainer:g}),G)}const EDe=ce.forwardRef(CDe);var gie=v.createContext(null);function mie(t,e){return t===void 0?null:"".concat(t,"-").concat(e)}function vie(t){var e=v.useContext(gie);return mie(e,t)}var PDe=["children","locked"],Rc=v.createContext(null);function _De(t,e){var n=de({},t);return Object.keys(e).forEach(function(r){var o=e[r];o!==void 0&&(n[r]=o)}),n}function ZS(t){var e=t.children,n=t.locked,r=Sn(t,PDe),o=v.useContext(Rc),i=Bv(function(){return _De(o,r)},[o,r],function(s,a){return!n&&(s[0]!==a[0]||!Dp(s[1],a[1],!0))});return v.createElement(Rc.Provider,{value:i},e)}var IDe=[],yie=v.createContext(null);function lM(){return v.useContext(yie)}var bie=v.createContext(IDe);function nw(t){var e=v.useContext(bie);return v.useMemo(function(){return t!==void 0?[].concat(it(e),[t]):e},[e,t])}var Sie=v.createContext(null),Qz=v.createContext({});function Oq(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(HT(t)){var n=t.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||t.isContentEditable||n==="a"&&!!t.getAttribute("href"),o=t.getAttribute("tabindex"),i=Number(o),s=null;return o&&!Number.isNaN(i)?s=i:r&&s===null&&(s=0),r&&t.disabled&&(s=null),s!==null&&(s>=0||e&&s<0)}return!1}function TDe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=it(t.querySelectorAll("*")).filter(function(r){return Oq(r,e)});return Oq(t,e)&&n.unshift(t),n}var SN=It.LEFT,xN=It.RIGHT,wN=It.UP,iP=It.DOWN,sP=It.ENTER,xie=It.ESC,tb=It.HOME,nb=It.END,Rq=[wN,iP,SN,xN];function MDe(t,e,n,r){var o,i="prev",s="next",a="children",l="parent";if(t==="inline"&&r===sP)return{inlineTrigger:!0};var c=oe(oe({},wN,i),iP,s),u=oe(oe(oe(oe({},SN,n?s:i),xN,n?i:s),iP,a),sP,a),d=oe(oe(oe(oe(oe(oe({},wN,i),iP,s),sP,a),xie,l),SN,n?a:l),xN,n?l:a),f={inline:c,horizontal:u,vertical:d,inlineSub:c,horizontalSub:d,verticalSub:d},h=(o=f["".concat(t).concat(e?"":"Sub")])===null||o===void 0?void 0:o[r];switch(h){case i:return{offset:-1,sibling:!0};case s:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case a:return{offset:1,sibling:!1};default:return null}}function ODe(t){for(var e=t;e;){if(e.getAttribute("data-menu-list"))return e;e=e.parentElement}return null}function RDe(t,e){for(var n=t||document.activeElement;n;){if(e.has(n))return n;n=n.parentElement}return null}function Zz(t,e){var n=TDe(t,!0);return n.filter(function(r){return e.has(r)})}function kq(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!t)return null;var o=Zz(t,e),i=o.length,s=o.findIndex(function(a){return n===a});return r<0?s===-1?s=i-1:s-=1:r>0&&(s+=1),s=(s+i)%i,o[s]}var CN=function(e,n){var r=new Set,o=new Map,i=new Map;return e.forEach(function(s){var a=document.querySelector("[data-menu-id='".concat(mie(n,s),"']"));a&&(r.add(a),i.set(a,s),o.set(s,a))}),{elements:r,key2element:o,element2key:i}};function kDe(t,e,n,r,o,i,s,a,l,c){var u=v.useRef(),d=v.useRef();d.current=e;var f=function(){Sr.cancel(u.current)};return v.useEffect(function(){return function(){f()}},[]),function(h){var g=h.which;if([].concat(Rq,[sP,xie,tb,nb]).includes(g)){var y=i(),m=CN(y,r),S=m,x=S.elements,C=S.key2element,E=S.element2key,P=C.get(e),I=RDe(P,x),T=E.get(I),M=MDe(t,s(T,!0).length===1,n,g);if(!M&&g!==tb&&g!==nb)return;(Rq.includes(g)||[tb,nb].includes(g))&&h.preventDefault();var R=function(U){if(U){var B=U,W=U.querySelector("a");W!=null&&W.getAttribute("href")&&(B=W);var K=E.get(U);a(K),f(),u.current=Sr(function(){d.current===K&&B.focus()})}};if([tb,nb].includes(g)||M.sibling||!I){var A;!I||t==="inline"?A=o.current:A=ODe(I);var j,N=Zz(A,x);g===tb?j=N[0]:g===nb?j=N[N.length-1]:j=kq(A,x,I,M.offset),R(j)}else if(M.inlineTrigger)l(T);else if(M.offset>0)l(T,!0),f(),u.current=Sr(function(){m=CN(y,r);var H=I.getAttribute("aria-controls"),U=document.getElementById(H),B=kq(U,m.elements);R(B)},5);else if(M.offset<0){var k=s(T,!0),D=k[k.length-2],F=C.get(D);l(D,!1),R(F)}}c==null||c(h)}}function ADe(t){Promise.resolve().then(t)}var Jz="__RC_UTIL_PATH_SPLIT__",Aq=function(e){return e.join(Jz)},$De=function(e){return e.split(Jz)},EN="rc-menu-more";function DDe(){var t=v.useState({}),e=xe(t,2),n=e[1],r=v.useRef(new Map),o=v.useRef(new Map),i=v.useState([]),s=xe(i,2),a=s[0],l=s[1],c=v.useRef(0),u=v.useRef(!1),d=function(){u.current||n({})},f=v.useCallback(function(C,E){var P=Aq(E);o.current.set(P,C),r.current.set(C,P),c.current+=1;var I=c.current;ADe(function(){I===c.current&&d()})},[]),h=v.useCallback(function(C,E){var P=Aq(E);o.current.delete(P),r.current.delete(C)},[]),g=v.useCallback(function(C){l(C)},[]),y=v.useCallback(function(C,E){var P=r.current.get(C)||"",I=$De(P);return E&&a.includes(I[0])&&I.unshift(EN),I},[a]),m=v.useCallback(function(C,E){return C.filter(function(P){return P!==void 0}).some(function(P){var I=y(P,!0);return I.includes(E)})},[y]),S=function(){var E=it(r.current.keys());return a.length&&E.push(EN),E},x=v.useCallback(function(C){var E="".concat(r.current.get(C)).concat(Jz),P=new Set;return it(o.current.keys()).forEach(function(I){I.startsWith(E)&&P.add(o.current.get(I))}),P},[]);return v.useEffect(function(){return function(){u.current=!0}},[]),{registerPath:f,unregisterPath:h,refreshOverflowKeys:g,isSubPathKey:m,getKeyPath:y,getKeys:S,getSubPathKeys:x}}function Ob(t){var e=v.useRef(t);e.current=t;var n=v.useCallback(function(){for(var r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(r=e.current)===null||r===void 0?void 0:r.call.apply(r,[e].concat(i))},[]);return t?n:void 0}var jDe=Math.random().toFixed(5).toString().slice(2),$q=0;function LDe(t){var e=xi(t,{value:t}),n=xe(e,2),r=n[0],o=n[1];return v.useEffect(function(){$q+=1;var i="".concat(jDe,"-").concat($q);o("rc-menu-uuid-".concat(i))},[]),r}function wie(t,e,n,r){var o=v.useContext(Rc),i=o.activeKey,s=o.onActive,a=o.onInactive,l={active:i===t};return e||(l.onMouseEnter=function(c){n==null||n({key:t,domEvent:c}),s(t)},l.onMouseLeave=function(c){r==null||r({key:t,domEvent:c}),a(t)}),l}function Cie(t){var e=v.useContext(Rc),n=e.mode,r=e.rtl,o=e.inlineIndent;if(n!=="inline")return null;var i=t;return r?{paddingRight:i*o}:{paddingLeft:i*o}}function Eie(t){var e=t.icon,n=t.props,r=t.children,o;return e===null||e===!1?null:(typeof e=="function"?o=v.createElement(e,de({},n)):typeof e!="boolean"&&(o=e),o||r||null)}var NDe=["item"];function j_(t){var e=t.item,n=Sn(t,NDe);return Object.defineProperty(n,"item",{get:function(){return Vi(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),e}}),n}var FDe=["title","attribute","elementRef"],zDe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],BDe=["active"],HDe=function(t){Nl(n,t);var e=Lc(n);function n(){return ao(this,n),e.apply(this,arguments)}return lo(n,[{key:"render",value:function(){var o=this.props,i=o.title,s=o.attribute,a=o.elementRef,l=Sn(o,FDe),c=zl(l,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Vi(!s,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),v.createElement(pu.Item,vt({},s,{title:typeof i=="string"?i:void 0},c,{ref:a}))}}]),n}(v.Component),UDe=v.forwardRef(function(t,e){var n=t.style,r=t.className,o=t.eventKey;t.warnKey;var i=t.disabled,s=t.itemIcon,a=t.children,l=t.role,c=t.onMouseEnter,u=t.onMouseLeave,d=t.onClick,f=t.onKeyDown,h=t.onFocus,g=Sn(t,zDe),y=vie(o),m=v.useContext(Rc),S=m.prefixCls,x=m.onItemClick,C=m.disabled,E=m.overflowDisabled,P=m.itemIcon,I=m.selectedKeys,T=m.onActive,M=v.useContext(Qz),R=M._internalRenderMenuItem,A="".concat(S,"-item"),j=v.useRef(),N=v.useRef(),k=C||i,D=hg(e,N),F=nw(o),H=function(re){return{key:o,keyPath:it(F).reverse(),item:j.current,domEvent:re}},U=s||P,B=wie(o,k,c,u),W=B.active,K=Sn(B,BDe),q=I.includes(o),X=Cie(F.length),Z=function(re){if(!k){var le=H(re);d==null||d(j_(le)),x(le)}},Y=function(re){if(f==null||f(re),re.which===It.ENTER){var le=H(re);d==null||d(j_(le)),x(le)}},G=function(re){T(o),h==null||h(re)},J={};t.role==="option"&&(J["aria-selected"]=q);var ne=v.createElement(HDe,vt({ref:j,elementRef:D,role:l===null?"none":l||"menuitem",tabIndex:i?null:-1,"data-menu-id":E&&y?null:y},zl(g,["extra"]),K,J,{component:"li","aria-disabled":i,style:de(de({},X),n),className:he(A,oe(oe(oe({},"".concat(A,"-active"),W),"".concat(A,"-selected"),q),"".concat(A,"-disabled"),k),r),onClick:Z,onKeyDown:Y,onFocus:G}),a,v.createElement(Eie,{props:de(de({},t),{},{isSelected:q}),icon:U}));return R&&(ne=R(ne,t,{selected:q})),ne});function WDe(t,e){var n=t.eventKey,r=lM(),o=nw(n);return v.useEffect(function(){if(r)return r.registerPath(n,o),function(){r.unregisterPath(n,o)}},[o]),r?null:v.createElement(UDe,vt({},t,{ref:e}))}const cM=v.forwardRef(WDe);var VDe=["className","children"],qDe=function(e,n){var r=e.className,o=e.children,i=Sn(e,VDe),s=v.useContext(Rc),a=s.prefixCls,l=s.mode,c=s.rtl;return v.createElement("ul",vt({className:he(a,c&&"".concat(a,"-rtl"),"".concat(a,"-sub"),"".concat(a,"-").concat(l==="inline"?"inline":"vertical"),r),role:"menu"},i,{"data-menu-list":!0,ref:n}),o)},e5=v.forwardRef(qDe);e5.displayName="SubMenuList";function t5(t,e){return Su(t).map(function(n,r){if(v.isValidElement(n)){var o,i,s=n.key,a=(o=(i=n.props)===null||i===void 0?void 0:i.eventKey)!==null&&o!==void 0?o:s,l=a==null;l&&(a="tmp_key-".concat([].concat(it(e),[r]).join("-")));var c={key:a,eventKey:a};return v.cloneElement(n,c)}return n})}var ds={adjustX:1,adjustY:1},KDe={topLeft:{points:["bl","tl"],overflow:ds},topRight:{points:["br","tr"],overflow:ds},bottomLeft:{points:["tl","bl"],overflow:ds},bottomRight:{points:["tr","br"],overflow:ds},leftTop:{points:["tr","tl"],overflow:ds},leftBottom:{points:["br","bl"],overflow:ds},rightTop:{points:["tl","tr"],overflow:ds},rightBottom:{points:["bl","br"],overflow:ds}},GDe={topLeft:{points:["bl","tl"],overflow:ds},topRight:{points:["br","tr"],overflow:ds},bottomLeft:{points:["tl","bl"],overflow:ds},bottomRight:{points:["tr","br"],overflow:ds},rightTop:{points:["tr","tl"],overflow:ds},rightBottom:{points:["br","bl"],overflow:ds},leftTop:{points:["tl","tr"],overflow:ds},leftBottom:{points:["bl","br"],overflow:ds}};function Pie(t,e,n){if(e)return e;if(n)return n[t]||n.other}var XDe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function YDe(t){var e=t.prefixCls,n=t.visible,r=t.children,o=t.popup,i=t.popupStyle,s=t.popupClassName,a=t.popupOffset,l=t.disabled,c=t.mode,u=t.onVisibleChange,d=v.useContext(Rc),f=d.getPopupContainer,h=d.rtl,g=d.subMenuOpenDelay,y=d.subMenuCloseDelay,m=d.builtinPlacements,S=d.triggerSubMenuAction,x=d.forceSubMenuRender,C=d.rootClassName,E=d.motion,P=d.defaultMotions,I=v.useState(!1),T=xe(I,2),M=T[0],R=T[1],A=de(h?de({},GDe):de({},KDe),m),j=XDe[c],N=Pie(c,E,P),k=v.useRef(N);c!=="inline"&&(k.current=N);var D=de(de({},k.current),{},{leavedClassName:"".concat(e,"-hidden"),removeOnLeave:!1,motionAppear:!0}),F=v.useRef();return v.useEffect(function(){return F.current=Sr(function(){R(n)}),function(){Sr.cancel(F.current)}},[n]),v.createElement(UT,{prefixCls:e,popupClassName:he("".concat(e,"-popup"),oe({},"".concat(e,"-rtl"),h),s,C),stretch:c==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:A,popupPlacement:j,popupVisible:M,popup:o,popupStyle:i,popupAlign:a&&{offset:a},action:l?[]:[S],mouseEnterDelay:g,mouseLeaveDelay:y,onPopupVisibleChange:u,forceRender:x,popupMotion:D,fresh:!0},r)}function QDe(t){var e=t.id,n=t.open,r=t.keyPath,o=t.children,i="inline",s=v.useContext(Rc),a=s.prefixCls,l=s.forceSubMenuRender,c=s.motion,u=s.defaultMotions,d=s.mode,f=v.useRef(!1);f.current=d===i;var h=v.useState(!f.current),g=xe(h,2),y=g[0],m=g[1],S=f.current?n:!1;v.useEffect(function(){f.current&&m(!1)},[d]);var x=de({},Pie(i,c,u));r.length>1&&(x.motionAppear=!1);var C=x.onVisibleChanged;return x.onVisibleChanged=function(E){return!f.current&&!E&&m(!0),C==null?void 0:C(E)},y?null:v.createElement(ZS,{mode:i,locked:!f.current},v.createElement($u,vt({visible:S},x,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(a,"-hidden")}),function(E){var P=E.className,I=E.style;return v.createElement(e5,{id:e,className:P,style:I},o)}))}var ZDe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],JDe=["active"],eje=v.forwardRef(function(t,e){var n=t.style,r=t.className,o=t.title,i=t.eventKey;t.warnKey;var s=t.disabled,a=t.internalPopupClose,l=t.children,c=t.itemIcon,u=t.expandIcon,d=t.popupClassName,f=t.popupOffset,h=t.popupStyle,g=t.onClick,y=t.onMouseEnter,m=t.onMouseLeave,S=t.onTitleClick,x=t.onTitleMouseEnter,C=t.onTitleMouseLeave,E=Sn(t,ZDe),P=vie(i),I=v.useContext(Rc),T=I.prefixCls,M=I.mode,R=I.openKeys,A=I.disabled,j=I.overflowDisabled,N=I.activeKey,k=I.selectedKeys,D=I.itemIcon,F=I.expandIcon,H=I.onItemClick,U=I.onOpenChange,B=I.onActive,W=v.useContext(Qz),K=W._internalRenderSubMenuItem,q=v.useContext(Sie),X=q.isSubPathKey,Z=nw(),Y="".concat(T,"-submenu"),G=A||s,J=v.useRef(),ne=v.useRef(),ee=c??D,re=u??F,le=R.includes(i),ae=!j&&le,ie=X(k,i),ge=wie(i,G,x,C),ve=ge.active,fe=Sn(ge,JDe),ue=v.useState(!1),Ce=xe(ue,2),ye=Ce[0],ke=Ce[1],Be=function(Ae){G||ke(Ae)},Ue=function(Ae){Be(!0),y==null||y({key:i,domEvent:Ae})},We=function(Ae){Be(!1),m==null||m({key:i,domEvent:Ae})},Me=v.useMemo(function(){return ve||(M!=="inline"?ye||X([N],i):!1)},[M,ve,N,ye,i,X]),$e=Cie(Z.length),Qe=function(Ae){G||(S==null||S({key:i,domEvent:Ae}),M==="inline"&&U(i,!le))},nt=Ob(function(at){g==null||g(j_(at)),H(at)}),ht=function(Ae){M!=="inline"&&U(i,Ae)},ft=function(){B(i)},et=P&&"".concat(P,"-popup"),pe=v.useMemo(function(){return v.createElement(Eie,{icon:M!=="horizontal"?re:void 0,props:de(de({},t),{},{isOpen:ae,isSubMenu:!0})},v.createElement("i",{className:"".concat(Y,"-arrow")}))},[M,re,t,ae,Y]),Pe=v.createElement("div",vt({role:"menuitem",style:$e,className:"".concat(Y,"-title"),tabIndex:G?null:-1,ref:J,title:typeof o=="string"?o:null,"data-menu-id":j&&P?null:P,"aria-expanded":ae,"aria-haspopup":!0,"aria-controls":et,"aria-disabled":G,onClick:Qe,onFocus:ft},fe),o,pe),je=v.useRef(M);if(M!=="inline"&&Z.length>1?je.current="vertical":je.current=M,!j){var Le=je.current;Pe=v.createElement(YDe,{mode:Le,prefixCls:Y,visible:!a&&ae&&M!=="inline",popupClassName:d,popupOffset:f,popupStyle:h,popup:v.createElement(ZS,{mode:Le==="horizontal"?"vertical":Le},v.createElement(e5,{id:et,ref:ne},l)),disabled:G,onVisibleChange:ht},Pe)}var qe=v.createElement(pu.Item,vt({ref:e,role:"none"},E,{component:"li",style:n,className:he(Y,"".concat(Y,"-").concat(M),r,oe(oe(oe(oe({},"".concat(Y,"-open"),ae),"".concat(Y,"-active"),Me),"".concat(Y,"-selected"),ie),"".concat(Y,"-disabled"),G)),onMouseEnter:Ue,onMouseLeave:We}),Pe,!j&&v.createElement(QDe,{id:et,open:ae,keyPath:Z},l));return K&&(qe=K(qe,t,{selected:ie,active:Me,open:ae,disabled:G})),v.createElement(ZS,{onItemClick:nt,mode:M==="horizontal"?"vertical":M,itemIcon:ee,expandIcon:re},qe)}),n5=v.forwardRef(function(t,e){var n=t.eventKey,r=t.children,o=nw(n),i=t5(r,o),s=lM();v.useEffect(function(){if(s)return s.registerPath(n,o),function(){s.unregisterPath(n,o)}},[o]);var a;return s?a=i:a=v.createElement(eje,vt({ref:e},t),i),v.createElement(bie.Provider,{value:o},a)});function _ie(t){var e=t.className,n=t.style,r=v.useContext(Rc),o=r.prefixCls,i=lM();return i?null:v.createElement("li",{role:"separator",className:he("".concat(o,"-item-divider"),e),style:n})}var tje=["className","title","eventKey","children"],nje=v.forwardRef(function(t,e){var n=t.className,r=t.title;t.eventKey;var o=t.children,i=Sn(t,tje),s=v.useContext(Rc),a=s.prefixCls,l="".concat(a,"-item-group");return v.createElement("li",vt({ref:e,role:"presentation"},i,{onClick:function(u){return u.stopPropagation()},className:he(l,n)}),v.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:typeof r=="string"?r:void 0},r),v.createElement("ul",{role:"group",className:"".concat(l,"-list")},o))}),Iie=v.forwardRef(function(t,e){var n=t.eventKey,r=t.children,o=nw(n),i=t5(r,o),s=lM();return s?i:v.createElement(nje,vt({ref:e},zl(t,["warnKey"])),i)}),rje=["label","children","key","type","extra"];function PN(t,e,n){var r=e.item,o=e.group,i=e.submenu,s=e.divider;return(t||[]).map(function(a,l){if(a&&Wt(a)==="object"){var c=a,u=c.label,d=c.children,f=c.key,h=c.type,g=c.extra,y=Sn(c,rje),m=f??"tmp-".concat(l);return d||h==="group"?h==="group"?v.createElement(o,vt({key:m},y,{title:u}),PN(d,e,n)):v.createElement(i,vt({key:m},y,{title:u}),PN(d,e,n)):h==="divider"?v.createElement(s,vt({key:m},y)):v.createElement(r,vt({key:m},y,{extra:g}),u,(!!g||g===0)&&v.createElement("span",{className:"".concat(n,"-item-extra")},g))}return null}).filter(function(a){return a})}function Dq(t,e,n,r,o){var i=t,s=de({divider:_ie,item:cM,group:Iie,submenu:n5},r);return e&&(i=PN(e,s,o)),t5(i,n)}var oje=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Jh=[],ije=v.forwardRef(function(t,e){var n,r=t,o=r.prefixCls,i=o===void 0?"rc-menu":o,s=r.rootClassName,a=r.style,l=r.className,c=r.tabIndex,u=c===void 0?0:c,d=r.items,f=r.children,h=r.direction,g=r.id,y=r.mode,m=y===void 0?"vertical":y,S=r.inlineCollapsed,x=r.disabled,C=r.disabledOverflow,E=r.subMenuOpenDelay,P=E===void 0?.1:E,I=r.subMenuCloseDelay,T=I===void 0?.1:I,M=r.forceSubMenuRender,R=r.defaultOpenKeys,A=r.openKeys,j=r.activeKey,N=r.defaultActiveFirst,k=r.selectable,D=k===void 0?!0:k,F=r.multiple,H=F===void 0?!1:F,U=r.defaultSelectedKeys,B=r.selectedKeys,W=r.onSelect,K=r.onDeselect,q=r.inlineIndent,X=q===void 0?24:q,Z=r.motion,Y=r.defaultMotions,G=r.triggerSubMenuAction,J=G===void 0?"hover":G,ne=r.builtinPlacements,ee=r.itemIcon,re=r.expandIcon,le=r.overflowedIndicator,ae=le===void 0?"...":le,ie=r.overflowedIndicatorPopupClassName,ge=r.getPopupContainer,ve=r.onClick,fe=r.onOpenChange,ue=r.onKeyDown;r.openAnimation,r.openTransitionName;var Ce=r._internalRenderMenuItem,ye=r._internalRenderSubMenuItem,ke=r._internalComponents,Be=Sn(r,oje),Ue=v.useMemo(function(){return[Dq(f,d,Jh,ke,i),Dq(f,d,Jh,{},i)]},[f,d,ke]),We=xe(Ue,2),Me=We[0],$e=We[1],Qe=v.useState(!1),nt=xe(Qe,2),ht=nt[0],ft=nt[1],et=v.useRef(),pe=LDe(g),Pe=h==="rtl",je=xi(R,{value:A,postState:function(Ot){return Ot||Jh}}),Le=xe(je,2),qe=Le[0],at=Le[1],Ae=function(Ot){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Fn(){at(Ot),fe==null||fe(Ot)}ct?Ya.flushSync(Fn):Fn()},Ne=v.useState(qe),xt=xe(Ne,2),Pt=xt[0],gn=xt[1],Xt=v.useRef(!1),sn=v.useMemo(function(){return(m==="inline"||m==="vertical")&&S?["vertical",S]:[m,!1]},[m,S]),Zt=xe(sn,2),Vt=Zt[0],an=Zt[1],wt=Vt==="inline",bt=v.useState(Vt),ot=xe(bt,2),Xe=ot[0],qt=ot[1],Tt=v.useState(an),Fe=xe(Tt,2),Ge=Fe[0],ut=Fe[1];v.useEffect(function(){qt(Vt),ut(an),Xt.current&&(wt?at(Pt):Ae(Jh))},[Vt,an]);var St=v.useState(0),lt=xe(St,2),kt=lt[0],_n=lt[1],bn=kt>=Me.length-1||Xe!=="horizontal"||C;v.useEffect(function(){wt&&gn(qe)},[qe]),v.useEffect(function(){return Xt.current=!0,function(){Xt.current=!1}},[]);var ln=DDe(),en=ln.registerPath,wn=ln.unregisterPath,nr=ln.refreshOverflowKeys,rr=ln.isSubPathKey,ur=ln.getKeyPath,Nn=ln.getKeys,gt=ln.getSubPathKeys,De=v.useMemo(function(){return{registerPath:en,unregisterPath:wn}},[en,wn]),pt=v.useMemo(function(){return{isSubPathKey:rr}},[rr]);v.useEffect(function(){nr(bn?Jh:Me.slice(kt+1).map(function($n){return $n.key}))},[kt,bn]);var yt=xi(j||N&&((n=Me[0])===null||n===void 0?void 0:n.key),{value:j}),ze=xe(yt,2),Nt=ze[0],mn=ze[1],An=Ob(function($n){mn($n)}),Qn=Ob(function(){mn(void 0)});v.useImperativeHandle(e,function(){return{list:et.current,focus:function(Ot){var ct,Fn=Nn(),Un=CN(Fn,pe),rn=Un.elements,vn=Un.key2element,xr=Un.element2key,or=Zz(et.current,rn),on=Nt??(or[0]?xr.get(or[0]):(ct=Me.find(function(Eo){return!Eo.props.disabled}))===null||ct===void 0?void 0:ct.key),Or=vn.get(on);if(on&&Or){var uo;Or==null||(uo=Or.focus)===null||uo===void 0||uo.call(Or,Ot)}}}});var _t=xi(U||[],{value:B,postState:function(Ot){return Array.isArray(Ot)?Ot:Ot==null?Jh:[Ot]}}),Mt=xe(_t,2),un=Mt[0],In=Mt[1],Co=function(Ot){if(D){var ct=Ot.key,Fn=un.includes(ct),Un;H?Fn?Un=un.filter(function(vn){return vn!==ct}):Un=[].concat(it(un),[ct]):Un=[ct],In(Un);var rn=de(de({},Ot),{},{selectedKeys:Un});Fn?K==null||K(rn):W==null||W(rn)}!H&&qe.length&&Xe!=="inline"&&Ae(Jh)},Dr=Ob(function($n){ve==null||ve(j_($n)),Co($n)}),Mr=Ob(function($n,Ot){var ct=qe.filter(function(Un){return Un!==$n});if(Ot)ct.push($n);else if(Xe!=="inline"){var Fn=gt($n);ct=ct.filter(function(Un){return!Fn.has(Un)})}Dp(qe,ct,!0)||Ae(ct,!0)}),jr=function(Ot,ct){var Fn=ct??!qe.includes(Ot);Mr(Ot,Fn)},ko=kDe(Xe,Nt,Pe,pe,et,Nn,ur,mn,jr,ue);v.useEffect(function(){ft(!0)},[]);var Ao=v.useMemo(function(){return{_internalRenderMenuItem:Ce,_internalRenderSubMenuItem:ye}},[Ce,ye]),pr=Xe!=="horizontal"||C?Me:Me.map(function($n,Ot){return v.createElement(ZS,{key:$n.key,overflowDisabled:Ot>kt},$n)}),no=v.createElement(pu,vt({id:g,ref:et,prefixCls:"".concat(i,"-overflow"),component:"ul",itemComponent:cM,className:he(i,"".concat(i,"-root"),"".concat(i,"-").concat(Xe),l,oe(oe({},"".concat(i,"-inline-collapsed"),Ge),"".concat(i,"-rtl"),Pe),s),dir:h,style:a,role:"menu",tabIndex:u,data:pr,renderRawItem:function(Ot){return Ot},renderRawRest:function(Ot){var ct=Ot.length,Fn=ct?Me.slice(-ct):null;return v.createElement(n5,{eventKey:EN,title:ae,disabled:bn,internalPopupClose:ct===0,popupClassName:ie},Fn)},maxCount:Xe!=="horizontal"||C?pu.INVALIDATE:pu.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(Ot){_n(Ot)},onKeyDown:ko},Be));return v.createElement(Qz.Provider,{value:Ao},v.createElement(gie.Provider,{value:pe},v.createElement(ZS,{prefixCls:i,rootClassName:s,mode:Xe,openKeys:qe,rtl:Pe,disabled:x,motion:ht?Z:null,defaultMotions:ht?Y:null,activeKey:Nt,onActive:An,onInactive:Qn,selectedKeys:un,inlineIndent:X,subMenuOpenDelay:P,subMenuCloseDelay:T,forceSubMenuRender:M,builtinPlacements:ne,triggerSubMenuAction:J,getPopupContainer:ge,itemIcon:ee,expandIcon:re,onItemClick:Dr,onOpenChange:Mr},v.createElement(Sie.Provider,{value:pt},no),v.createElement("div",{style:{display:"none"},"aria-hidden":!0},v.createElement(yie.Provider,{value:De},$e)))))}),rw=ije;rw.Item=cM;rw.SubMenu=n5;rw.ItemGroup=Iie;rw.Divider=_ie;var sje={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},aje=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:sje}))},lje=v.forwardRef(aje);function ow(t){return Tr(t,{inputAffixPadding:t.paddingXXS})}const iw=t=>{const{controlHeight:e,fontSize:n,lineHeight:r,lineWidth:o,controlHeightSM:i,controlHeightLG:s,fontSizeLG:a,lineHeightLG:l,paddingSM:c,controlPaddingHorizontalSM:u,controlPaddingHorizontal:d,colorFillAlter:f,colorPrimaryHover:h,colorPrimary:g,controlOutlineWidth:y,controlOutline:m,colorErrorOutline:S,colorWarningOutline:x,colorBgContainer:C,inputFontSize:E,inputFontSizeLG:P,inputFontSizeSM:I}=t,T=E||n,M=I||T,R=P||a,A=Math.round((e-T*r)/2*10)/10-o,j=Math.round((i-M*r)/2*10)/10-o,N=Math.ceil((s-R*l)/2*10)/10-o;return{paddingBlock:Math.max(A,0),paddingBlockSM:Math.max(j,0),paddingBlockLG:Math.max(N,0),paddingInline:c-o,paddingInlineSM:u-o,paddingInlineLG:d-o,addonBg:f,activeBorderColor:g,hoverBorderColor:h,activeShadow:`0 0 0 ${y}px ${m}`,errorActiveShadow:`0 0 0 ${y}px ${S}`,warningActiveShadow:`0 0 0 ${y}px ${x}`,hoverBg:C,activeBg:C,inputFontSize:T,inputFontSizeLG:R,inputFontSizeSM:M}},cje=t=>({borderColor:t.hoverBorderColor,backgroundColor:t.hoverBg}),uM=t=>({color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},cje(Tr(t,{hoverBorderColor:t.colorBorder,hoverBg:t.colorBgContainerDisabled})))}),r5=(t,e)=>({background:t.colorBgContainer,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:t.activeBg}}),jq=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},r5(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:e.borderColor}}),uje=(t,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r5(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},uM(t))}),jq(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),jq(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),Lq=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),dje=t=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group`]:{"&-addon":{background:t.addonBg,border:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Lq(t,{status:"error",addonBorderColor:t.colorError,addonColor:t.colorErrorText})),Lq(t,{status:"warning",addonBorderColor:t.colorWarning,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group-addon`]:Object.assign({},uM(t))}})}),fje=(t,e)=>{const{componentCls:n}=t;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:t.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:t.colorWarning}}},e)}},Tie=(t,e)=>{var n;return{background:e.bg,borderWidth:t.lineWidth,borderStyle:t.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:(n=e==null?void 0:e.inputColor)!==null&&n!==void 0?n:"unset"},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:t.activeBg}}},Nq=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Tie(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}})}),hje=(t,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Tie(t,{bg:t.colorFillTertiary,hoverBg:t.colorFillSecondary,activeBorderColor:t.activeBorderColor})),{[`&${t.componentCls}-disabled, &[disabled]`]:Object.assign({},uM(t))}),Nq(t,{status:"error",bg:t.colorErrorBg,hoverBg:t.colorErrorBgHover,activeBorderColor:t.colorError,inputColor:t.colorErrorText,affixColor:t.colorError})),Nq(t,{status:"warning",bg:t.colorWarningBg,hoverBg:t.colorWarningBgHover,activeBorderColor:t.colorWarning,inputColor:t.colorWarningText,affixColor:t.colorWarning})),e)}),Fq=(t,e)=>({[`&${t.componentCls}-group-wrapper-status-${e.status}`]:{[`${t.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),pje=t=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${t.componentCls}-group-addon`]:{background:t.colorFillTertiary,"&:last-child":{position:"static"}}},Fq(t,{status:"error",addonBg:t.colorErrorBg,addonColor:t.colorErrorText})),Fq(t,{status:"warning",addonBg:t.colorWarningBg,addonColor:t.colorWarningText})),{[`&${t.componentCls}-group-wrapper-disabled`]:{[`${t.componentCls}-group`]:{"&-addon":{background:t.colorFillTertiary,color:t.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderTop:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderBottom:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`}}}})}),Mie=(t,e)=>({background:t.colorBgContainer,borderWidth:`${Re(t.lineWidth)} 0`,borderStyle:`${t.lineType} none`,borderColor:`transparent transparent ${e.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${e.borderColor} transparent`,backgroundColor:t.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${e.borderColor} transparent`,outline:0,backgroundColor:t.activeBg}}),zq=(t,e)=>({[`&${t.componentCls}-status-${e.status}:not(${t.componentCls}-disabled)`]:Object.assign(Object.assign({},Mie(t,e)),{[`${t.componentCls}-prefix, ${t.componentCls}-suffix`]:{color:e.affixColor}}),[`&${t.componentCls}-status-${e.status}${t.componentCls}-disabled`]:{borderColor:`transparent transparent ${e.borderColor} transparent`}}),gje=(t,e)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Mie(t,{borderColor:t.colorBorder,hoverBorderColor:t.hoverBorderColor,activeBorderColor:t.activeBorderColor,activeShadow:t.activeShadow})),{[`&${t.componentCls}-disabled, &[disabled]`]:{color:t.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${t.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),zq(t,{status:"error",borderColor:t.colorError,hoverBorderColor:t.colorErrorBorderHover,activeBorderColor:t.colorError,activeShadow:t.errorActiveShadow,affixColor:t.colorError})),zq(t,{status:"warning",borderColor:t.colorWarning,hoverBorderColor:t.colorWarningBorderHover,activeBorderColor:t.colorWarning,activeShadow:t.warningActiveShadow,affixColor:t.colorWarning})),e)}),mje=t=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:t,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Oie=t=>{const{paddingBlockLG:e,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:o}=t;return{padding:`${Re(e)} ${Re(o)}`,fontSize:t.inputFontSizeLG,lineHeight:n,borderRadius:r}},o5=t=>({padding:`${Re(t.paddingBlockSM)} ${Re(t.paddingInlineSM)}`,fontSize:t.inputFontSizeSM,borderRadius:t.borderRadiusSM}),i5=t=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Re(t.paddingBlock)} ${Re(t.paddingInline)}`,color:t.colorText,fontSize:t.inputFontSize,lineHeight:t.lineHeight,borderRadius:t.borderRadius,transition:`all ${t.motionDurationMid}`},mje(t.colorTextPlaceholder)),{"&-lg":Object.assign({},Oie(t)),"&-sm":Object.assign({},o5(t)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),vje=t=>{const{componentCls:e,antCls:n}=t;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:t.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},Oie(t)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},o5(t)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:t.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Re(t.paddingInline)}`,color:t.colorText,fontWeight:"normal",fontSize:t.inputFontSize,textAlign:"center",borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${Re(t.calc(t.paddingBlock).add(1).mul(-1).equal())} ${Re(t.calc(t.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${Re(t.lineWidth)} ${t.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${Re(t.calc(t.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},t2e()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:t.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderInlineEndWidth:t.lineWidth},[e]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${e},
      & > ${n}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:t.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${e},
      & > ${n}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:t.borderRadius,borderEndStartRadius:t.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${e},
      & > ${n}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:t.lineWidth,borderStartEndRadius:t.borderRadius,borderEndEndRadius:t.borderRadius},[`& > ${n}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:t.calc(t.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:t.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:t.borderRadius}}}})}},yje=t=>{const{componentCls:e,controlHeightSM:n,lineWidth:r,calc:o}=t,s=o(n).sub(o(r).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},xs(t)),i5(t)),uje(t)),hje(t)),fje(t)),gje(t)),{'&[type="color"]':{height:t.controlHeight,[`&${e}-lg`]:{height:t.controlHeightLG},[`&${e}-sm`]:{height:n,paddingTop:s,paddingBottom:s}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}})}},bje=t=>{const{componentCls:e}=t;return{[`${e}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:t.colorTextQuaternary,fontSize:t.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${t.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:t.colorIcon},"&:active":{color:t.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Re(t.inputAffixPadding)}`}}}},Sje=t=>{const{componentCls:e,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:o,colorIcon:i,colorIconHover:s,iconCls:a}=t,l=`${e}-affix-wrapper`,c=`${e}-affix-wrapper-disabled`;return{[l]:Object.assign(Object.assign(Object.assign(Object.assign({},i5(t)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:t.paddingXS}},"&-show-count-suffix":{color:r,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:t.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),bje(t)),{[`${a}${e}-password-icon`]:{color:i,cursor:"pointer",transition:`all ${o}`,"&:hover":{color:s}}}),[`${e}-underlined`]:{borderRadius:0},[c]:{[`${a}${e}-password-icon`]:{color:i,cursor:"not-allowed","&:hover":{color:i}}}}},xje=t=>{const{componentCls:e,borderRadiusLG:n,borderRadiusSM:r}=t;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},xs(t)),vje(t)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:n,fontSize:t.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:r}}},dje(t)),pje(t)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},wje=t=>{const{componentCls:e,antCls:n}=t,r=`${e}-search`;return{[r]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${r}-button:not(${n}-btn-color-primary):not(${n}-btn-variant-text)`]:{borderInlineStartColor:t.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:t.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:t.calc(t.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-color-primary)`]:{color:t.colorTextDescription,"&:hover":{color:t.colorPrimaryHover},"&:active":{color:t.colorPrimaryActive},[`&${n}-btn-loading::before`]:{inset:0}}}},[`${r}-button`]:{height:t.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${r}-button`]:{height:t.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${r}-button`]:{height:t.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:t.calc(t.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},Cje=t=>{const{componentCls:e}=t;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:t.colorError}}}},Rie=li(["Input","Shared"],t=>{const e=Tr(t,ow(t));return[yje(e),Sje(e)]},iw,{resetFont:!1}),kie=li(["Input","Component"],t=>{const e=Tr(t,ow(t));return[xje(e),wje(e),Cje(e),Hz(e)]},iw,{resetFont:!1});var Eje={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Pje=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:Eje}))},_je=v.forwardRef(Pje);const dM=v.createContext(null);var Ije=function(e){var n=e.activeTabOffset,r=e.horizontal,o=e.rtl,i=e.indicator,s=i===void 0?{}:i,a=s.size,l=s.align,c=l===void 0?"center":l,u=v.useState(),d=xe(u,2),f=d[0],h=d[1],g=v.useRef(),y=ce.useCallback(function(S){return typeof a=="function"?a(S):typeof a=="number"?a:S},[a]);function m(){Sr.cancel(g.current)}return v.useEffect(function(){var S={};if(n)if(r){S.width=y(n.width);var x=o?"right":"left";c==="start"&&(S[x]=n[x]),c==="center"&&(S[x]=n[x]+n.width/2,S.transform=o?"translateX(50%)":"translateX(-50%)"),c==="end"&&(S[x]=n[x]+n.width,S.transform="translateX(-100%)")}else S.height=y(n.height),c==="start"&&(S.top=n.top),c==="center"&&(S.top=n.top+n.height/2,S.transform="translateY(-50%)"),c==="end"&&(S.top=n.top+n.height,S.transform="translateY(-100%)");return m(),g.current=Sr(function(){var C=f&&S&&Object.keys(S).every(function(E){var P=S[E],I=f[E];return typeof P=="number"&&typeof I=="number"?Math.round(P)===Math.round(I):P===I});C||h(S)}),m},[JSON.stringify(n),r,o,c,y]),{style:f}},Bq={width:0,height:0,left:0,top:0};function Tje(t,e,n){return v.useMemo(function(){for(var r,o=new Map,i=e.get((r=t[0])===null||r===void 0?void 0:r.key)||Bq,s=i.left+i.width,a=0;a<t.length;a+=1){var l=t[a].key,c=e.get(l);if(!c){var u;c=e.get((u=t[a-1])===null||u===void 0?void 0:u.key)||Bq}var d=o.get(l)||de({},c);d.right=s-d.left-d.width,o.set(l,d)}return o},[t.map(function(r){return r.key}).join("_"),e,n])}function Hq(t,e){var n=v.useRef(t),r=v.useState({}),o=xe(r,2),i=o[1];function s(a){var l=typeof a=="function"?a(n.current):a;l!==n.current&&e(l,n.current),n.current=l,i({})}return[n.current,s]}var Mje=.1,Uq=.01,aP=20,Wq=Math.pow(.995,aP);function Oje(t,e){var n=v.useState(),r=xe(n,2),o=r[0],i=r[1],s=v.useState(0),a=xe(s,2),l=a[0],c=a[1],u=v.useState(0),d=xe(u,2),f=d[0],h=d[1],g=v.useState(),y=xe(g,2),m=y[0],S=y[1],x=v.useRef();function C(R){var A=R.touches[0],j=A.screenX,N=A.screenY;i({x:j,y:N}),window.clearInterval(x.current)}function E(R){if(o){var A=R.touches[0],j=A.screenX,N=A.screenY;i({x:j,y:N});var k=j-o.x,D=N-o.y;e(k,D);var F=Date.now();c(F),h(F-l),S({x:k,y:D})}}function P(){if(o&&(i(null),S(null),m)){var R=m.x/f,A=m.y/f,j=Math.abs(R),N=Math.abs(A);if(Math.max(j,N)<Mje)return;var k=R,D=A;x.current=window.setInterval(function(){if(Math.abs(k)<Uq&&Math.abs(D)<Uq){window.clearInterval(x.current);return}k*=Wq,D*=Wq,e(k*aP,D*aP)},aP)}}var I=v.useRef();function T(R){var A=R.deltaX,j=R.deltaY,N=0,k=Math.abs(A),D=Math.abs(j);k===D?N=I.current==="x"?A:j:k>D?(N=A,I.current="x"):(N=j,I.current="y"),e(-N,-N)&&R.preventDefault()}var M=v.useRef(null);M.current={onTouchStart:C,onTouchMove:E,onTouchEnd:P,onWheel:T},v.useEffect(function(){function R(k){M.current.onTouchStart(k)}function A(k){M.current.onTouchMove(k)}function j(k){M.current.onTouchEnd(k)}function N(k){M.current.onWheel(k)}return document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",j,{passive:!0}),t.current.addEventListener("touchstart",R,{passive:!0}),t.current.addEventListener("wheel",N,{passive:!1}),function(){document.removeEventListener("touchmove",A),document.removeEventListener("touchend",j)}},[])}function Aie(t){var e=v.useState(0),n=xe(e,2),r=n[0],o=n[1],i=v.useRef(0),s=v.useRef();return s.current=t,BL(function(){var a;(a=s.current)===null||a===void 0||a.call(s)},[r]),function(){i.current===r&&(i.current+=1,o(i.current))}}function Rje(t){var e=v.useRef([]),n=v.useState({}),r=xe(n,2),o=r[1],i=v.useRef(typeof t=="function"?t():t),s=Aie(function(){var l=i.current;e.current.forEach(function(c){l=c(l)}),e.current=[],i.current=l,o({})});function a(l){e.current.push(l),s()}return[i.current,a]}var Vq={width:0,height:0,left:0,top:0,right:0};function kje(t,e,n,r,o,i,s){var a=s.tabs,l=s.tabPosition,c=s.rtl,u,d,f;return["top","bottom"].includes(l)?(u="width",d=c?"right":"left",f=Math.abs(n)):(u="height",d="top",f=-n),v.useMemo(function(){if(!a.length)return[0,0];for(var h=a.length,g=h,y=0;y<h;y+=1){var m=t.get(a[y].key)||Vq;if(Math.floor(m[d]+m[u])>Math.floor(f+e)){g=y-1;break}}for(var S=0,x=h-1;x>=0;x-=1){var C=t.get(a[x].key)||Vq;if(C[d]<f){S=x+1;break}}return S>=g?[0,0]:[S,g]},[t,e,r,o,i,f,l,a.map(function(h){return h.key}).join("_"),c])}function qq(t){var e;return t instanceof Map?(e={},t.forEach(function(n,r){e[r]=n})):e=t,JSON.stringify(e)}var Aje="TABS_DQ";function $ie(t){return String(t).replace(/"/g,Aje)}function s5(t,e,n,r){return!(!n||r||t===!1||t===void 0&&(e===!1||e===null))}var Die=v.forwardRef(function(t,e){var n=t.prefixCls,r=t.editable,o=t.locale,i=t.style;return!r||r.showAdd===!1?null:v.createElement("button",{ref:e,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(o==null?void 0:o.addAriaLabel)||"Add tab",onClick:function(a){r.onEdit("add",{event:a})}},r.addIcon||"+")}),Kq=v.forwardRef(function(t,e){var n=t.position,r=t.prefixCls,o=t.extra;if(!o)return null;var i,s={};return Wt(o)==="object"&&!v.isValidElement(o)?s=o:s.right=o,n==="right"&&(i=s.right),n==="left"&&(i=s.left),i?v.createElement("div",{className:"".concat(r,"-extra-content"),ref:e},i):null}),$je=v.forwardRef(function(t,e){var n=t.prefixCls,r=t.id,o=t.tabs,i=t.locale,s=t.mobile,a=t.more,l=a===void 0?{}:a,c=t.style,u=t.className,d=t.editable,f=t.tabBarGutter,h=t.rtl,g=t.removeAriaLabel,y=t.onTabClick,m=t.getPopupContainer,S=t.popupClassName,x=v.useState(!1),C=xe(x,2),E=C[0],P=C[1],I=v.useState(null),T=xe(I,2),M=T[0],R=T[1],A=l.icon,j=A===void 0?"More":A,N="".concat(r,"-more-popup"),k="".concat(n,"-dropdown"),D=M!==null?"".concat(N,"-").concat(M):null,F=i==null?void 0:i.dropdownAriaLabel;function H(Z,Y){Z.preventDefault(),Z.stopPropagation(),d.onEdit("remove",{key:Y,event:Z})}var U=v.createElement(rw,{onClick:function(Y){var G=Y.key,J=Y.domEvent;y(G,J),P(!1)},prefixCls:"".concat(k,"-menu"),id:N,tabIndex:-1,role:"listbox","aria-activedescendant":D,selectedKeys:[M],"aria-label":F!==void 0?F:"expanded dropdown"},o.map(function(Z){var Y=Z.closable,G=Z.disabled,J=Z.closeIcon,ne=Z.key,ee=Z.label,re=s5(Y,J,d,G);return v.createElement(cM,{key:ne,id:"".concat(N,"-").concat(ne),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(ne),disabled:G},v.createElement("span",null,ee),re&&v.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(k,"-menu-item-remove"),onClick:function(ae){ae.stopPropagation(),H(ae,ne)}},J||d.removeIcon||""))}));function B(Z){for(var Y=o.filter(function(re){return!re.disabled}),G=Y.findIndex(function(re){return re.key===M})||0,J=Y.length,ne=0;ne<J;ne+=1){G=(G+Z+J)%J;var ee=Y[G];if(!ee.disabled){R(ee.key);return}}}function W(Z){var Y=Z.which;if(!E){[It.DOWN,It.SPACE,It.ENTER].includes(Y)&&(P(!0),Z.preventDefault());return}switch(Y){case It.UP:B(-1),Z.preventDefault();break;case It.DOWN:B(1),Z.preventDefault();break;case It.ESC:P(!1);break;case It.SPACE:case It.ENTER:M!==null&&y(M,Z);break}}v.useEffect(function(){var Z=document.getElementById(D);Z&&Z.scrollIntoView&&Z.scrollIntoView(!1)},[M]),v.useEffect(function(){E||R(null)},[E]);var K=oe({},h?"marginRight":"marginLeft",f);o.length||(K.visibility="hidden",K.order=1);var q=he(oe({},"".concat(k,"-rtl"),h)),X=s?null:v.createElement(EDe,vt({prefixCls:k,overlay:U,visible:o.length?E:!1,onVisibleChange:P,overlayClassName:he(q,S),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:m},l),v.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:K,"aria-haspopup":"listbox","aria-controls":N,id:"".concat(r,"-more"),"aria-expanded":E,onKeyDown:W},j));return v.createElement("div",{className:he("".concat(n,"-nav-operations"),u),style:c,ref:e},X,v.createElement(Die,{prefixCls:n,locale:i,editable:d}))});const Dje=v.memo($je,function(t,e){return e.tabMoving});var jje=function(e){var n=e.prefixCls,r=e.id,o=e.active,i=e.focus,s=e.tab,a=s.key,l=s.label,c=s.disabled,u=s.closeIcon,d=s.icon,f=e.closable,h=e.renderWrapper,g=e.removeAriaLabel,y=e.editable,m=e.onClick,S=e.onFocus,x=e.onBlur,C=e.onKeyDown,E=e.onMouseDown,P=e.onMouseUp,I=e.style,T=e.tabCount,M=e.currentPosition,R="".concat(n,"-tab"),A=s5(f,u,y,c);function j(H){c||m(H)}function N(H){H.preventDefault(),H.stopPropagation(),y.onEdit("remove",{key:a,event:H})}var k=v.useMemo(function(){return d&&typeof l=="string"?v.createElement("span",null,l):l},[l,d]),D=v.useRef(null);v.useEffect(function(){i&&D.current&&D.current.focus()},[i]);var F=v.createElement("div",{key:a,"data-node-key":$ie(a),className:he(R,oe(oe(oe(oe({},"".concat(R,"-with-remove"),A),"".concat(R,"-active"),o),"".concat(R,"-disabled"),c),"".concat(R,"-focus"),i)),style:I,onClick:j},v.createElement("div",{ref:D,role:"tab","aria-selected":o,id:r&&"".concat(r,"-tab-").concat(a),className:"".concat(R,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(a),"aria-disabled":c,tabIndex:c?null:o?0:-1,onClick:function(U){U.stopPropagation(),j(U)},onKeyDown:C,onMouseDown:E,onMouseUp:P,onFocus:S,onBlur:x},i&&v.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(M," of ").concat(T)),d&&v.createElement("span",{className:"".concat(R,"-icon")},d),l&&k),A&&v.createElement("button",{type:"button",role:"tab","aria-label":g||"remove",tabIndex:o?0:-1,className:"".concat(R,"-remove"),onClick:function(U){U.stopPropagation(),N(U)}},u||y.removeIcon||""));return h?h(F):F},Lje=function(e,n){var r=e.offsetWidth,o=e.offsetHeight,i=e.offsetTop,s=e.offsetLeft,a=e.getBoundingClientRect(),l=a.width,c=a.height,u=a.left,d=a.top;return Math.abs(l-r)<1?[l,c,u-n.left,d-n.top]:[r,o,s,i]},im=function(e){var n=e.current||{},r=n.offsetWidth,o=r===void 0?0:r,i=n.offsetHeight,s=i===void 0?0:i;if(e.current){var a=e.current.getBoundingClientRect(),l=a.width,c=a.height;if(Math.abs(l-o)<1)return[l,c]}return[o,s]},zC=function(e,n){return e[n?0:1]},Gq=v.forwardRef(function(t,e){var n=t.className,r=t.style,o=t.id,i=t.animated,s=t.activeKey,a=t.rtl,l=t.extra,c=t.editable,u=t.locale,d=t.tabPosition,f=t.tabBarGutter,h=t.children,g=t.onTabClick,y=t.onTabScroll,m=t.indicator,S=v.useContext(dM),x=S.prefixCls,C=S.tabs,E=v.useRef(null),P=v.useRef(null),I=v.useRef(null),T=v.useRef(null),M=v.useRef(null),R=v.useRef(null),A=v.useRef(null),j=d==="top"||d==="bottom",N=Hq(0,function(yt,ze){j&&y&&y({direction:yt>ze?"left":"right"})}),k=xe(N,2),D=k[0],F=k[1],H=Hq(0,function(yt,ze){!j&&y&&y({direction:yt>ze?"top":"bottom"})}),U=xe(H,2),B=U[0],W=U[1],K=v.useState([0,0]),q=xe(K,2),X=q[0],Z=q[1],Y=v.useState([0,0]),G=xe(Y,2),J=G[0],ne=G[1],ee=v.useState([0,0]),re=xe(ee,2),le=re[0],ae=re[1],ie=v.useState([0,0]),ge=xe(ie,2),ve=ge[0],fe=ge[1],ue=Rje(new Map),Ce=xe(ue,2),ye=Ce[0],ke=Ce[1],Be=Tje(C,ye,J[0]),Ue=zC(X,j),We=zC(J,j),Me=zC(le,j),$e=zC(ve,j),Qe=Math.floor(Ue)<Math.floor(We+Me),nt=Qe?Ue-$e:Ue-Me,ht="".concat(x,"-nav-operations-hidden"),ft=0,et=0;j&&a?(ft=0,et=Math.max(0,We-nt)):(ft=Math.min(0,nt-We),et=0);function pe(yt){return yt<ft?ft:yt>et?et:yt}var Pe=v.useRef(null),je=v.useState(),Le=xe(je,2),qe=Le[0],at=Le[1];function Ae(){at(Date.now())}function Ne(){Pe.current&&clearTimeout(Pe.current)}Oje(T,function(yt,ze){function Nt(mn,An){mn(function(Qn){var _t=pe(Qn+An);return _t})}return Qe?(j?Nt(F,yt):Nt(W,ze),Ne(),Ae(),!0):!1}),v.useEffect(function(){return Ne(),qe&&(Pe.current=setTimeout(function(){at(0)},100)),Ne},[qe]);var xt=kje(Be,nt,j?D:B,We,Me,$e,de(de({},t),{},{tabs:C})),Pt=xe(xt,2),gn=Pt[0],Xt=Pt[1],sn=Bo(function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s,ze=Be.get(yt)||{width:0,height:0,left:0,right:0,top:0};if(j){var Nt=D;a?ze.right<D?Nt=ze.right:ze.right+ze.width>D+nt&&(Nt=ze.right+ze.width-nt):ze.left<-D?Nt=-ze.left:ze.left+ze.width>-D+nt&&(Nt=-(ze.left+ze.width-nt)),W(0),F(pe(Nt))}else{var mn=B;ze.top<-B?mn=-ze.top:ze.top+ze.height>-B+nt&&(mn=-(ze.top+ze.height-nt)),F(0),W(pe(mn))}}),Zt=v.useState(),Vt=xe(Zt,2),an=Vt[0],wt=Vt[1],bt=v.useState(!1),ot=xe(bt,2),Xe=ot[0],qt=ot[1],Tt=C.filter(function(yt){return!yt.disabled}).map(function(yt){return yt.key}),Fe=function(ze){var Nt=Tt.indexOf(an||s),mn=Tt.length,An=(Nt+ze+mn)%mn,Qn=Tt[An];wt(Qn)},Ge=function(ze){var Nt=ze.code,mn=a&&j,An=Tt[0],Qn=Tt[Tt.length-1];switch(Nt){case"ArrowLeft":{j&&Fe(mn?1:-1);break}case"ArrowRight":{j&&Fe(mn?-1:1);break}case"ArrowUp":{ze.preventDefault(),j||Fe(-1);break}case"ArrowDown":{ze.preventDefault(),j||Fe(1);break}case"Home":{ze.preventDefault(),wt(An);break}case"End":{ze.preventDefault(),wt(Qn);break}case"Enter":case"Space":{ze.preventDefault(),g(an??s,ze);break}case"Backspace":case"Delete":{var _t=Tt.indexOf(an),Mt=C.find(function(In){return In.key===an}),un=s5(Mt==null?void 0:Mt.closable,Mt==null?void 0:Mt.closeIcon,c,Mt==null?void 0:Mt.disabled);un&&(ze.preventDefault(),ze.stopPropagation(),c.onEdit("remove",{key:an,event:ze}),_t===Tt.length-1?Fe(-1):Fe(1));break}}},ut={};j?ut[a?"marginRight":"marginLeft"]=f:ut.marginTop=f;var St=C.map(function(yt,ze){var Nt=yt.key;return v.createElement(jje,{id:o,prefixCls:x,key:Nt,tab:yt,style:ze===0?void 0:ut,closable:yt.closable,editable:c,active:Nt===s,focus:Nt===an,renderWrapper:h,removeAriaLabel:u==null?void 0:u.removeAriaLabel,tabCount:Tt.length,currentPosition:ze+1,onClick:function(An){g(Nt,An)},onKeyDown:Ge,onFocus:function(){Xe||wt(Nt),sn(Nt),Ae(),T.current&&(a||(T.current.scrollLeft=0),T.current.scrollTop=0)},onBlur:function(){wt(void 0)},onMouseDown:function(){qt(!0)},onMouseUp:function(){qt(!1)}})}),lt=function(){return ke(function(){var ze,Nt=new Map,mn=(ze=M.current)===null||ze===void 0?void 0:ze.getBoundingClientRect();return C.forEach(function(An){var Qn,_t=An.key,Mt=(Qn=M.current)===null||Qn===void 0?void 0:Qn.querySelector('[data-node-key="'.concat($ie(_t),'"]'));if(Mt){var un=Lje(Mt,mn),In=xe(un,4),Co=In[0],Dr=In[1],Mr=In[2],jr=In[3];Nt.set(_t,{width:Co,height:Dr,left:Mr,top:jr})}}),Nt})};v.useEffect(function(){lt()},[C.map(function(yt){return yt.key}).join("_")]);var kt=Aie(function(){var yt=im(E),ze=im(P),Nt=im(I);Z([yt[0]-ze[0]-Nt[0],yt[1]-ze[1]-Nt[1]]);var mn=im(A);ae(mn);var An=im(R);fe(An);var Qn=im(M);ne([Qn[0]-mn[0],Qn[1]-mn[1]]),lt()}),_n=C.slice(0,gn),bn=C.slice(Xt+1),ln=[].concat(it(_n),it(bn)),en=Be.get(s),wn=Ije({activeTabOffset:en,horizontal:j,indicator:m,rtl:a}),nr=wn.style;v.useEffect(function(){sn()},[s,ft,et,qq(en),qq(Be),j]),v.useEffect(function(){kt()},[a]);var rr=!!ln.length,ur="".concat(x,"-nav-wrap"),Nn,gt,De,pt;return j?a?(gt=D>0,Nn=D!==et):(Nn=D<0,gt=D!==ft):(De=B<0,pt=B!==ft),v.createElement(Ha,{onResize:kt},v.createElement("div",{ref:hg(e,E),role:"tablist","aria-orientation":j?"horizontal":"vertical",className:he("".concat(x,"-nav"),n),style:r,onKeyDown:function(){Ae()}},v.createElement(Kq,{ref:P,position:"left",extra:l,prefixCls:x}),v.createElement(Ha,{onResize:kt},v.createElement("div",{className:he(ur,oe(oe(oe(oe({},"".concat(ur,"-ping-left"),Nn),"".concat(ur,"-ping-right"),gt),"".concat(ur,"-ping-top"),De),"".concat(ur,"-ping-bottom"),pt)),ref:T},v.createElement(Ha,{onResize:kt},v.createElement("div",{ref:M,className:"".concat(x,"-nav-list"),style:{transform:"translate(".concat(D,"px, ").concat(B,"px)"),transition:qe?"none":void 0}},St,v.createElement(Die,{ref:A,prefixCls:x,locale:u,editable:c,style:de(de({},St.length===0?void 0:ut),{},{visibility:rr?"hidden":null})}),v.createElement("div",{className:he("".concat(x,"-ink-bar"),oe({},"".concat(x,"-ink-bar-animated"),i.inkBar)),style:nr}))))),v.createElement(Dje,vt({},t,{removeAriaLabel:u==null?void 0:u.removeAriaLabel,ref:R,prefixCls:x,tabs:ln,className:!rr&&ht,tabMoving:!!qe})),v.createElement(Kq,{ref:I,position:"right",extra:l,prefixCls:x})))}),jie=v.forwardRef(function(t,e){var n=t.prefixCls,r=t.className,o=t.style,i=t.id,s=t.active,a=t.tabKey,l=t.children;return v.createElement("div",{id:i&&"".concat(i,"-panel-").concat(a),role:"tabpanel",tabIndex:s?0:-1,"aria-labelledby":i&&"".concat(i,"-tab-").concat(a),"aria-hidden":!s,style:o,className:he(n,s&&"".concat(n,"-active"),r),ref:e},l)}),Nje=["renderTabBar"],Fje=["label","key"],zje=function(e){var n=e.renderTabBar,r=Sn(e,Nje),o=v.useContext(dM),i=o.tabs;if(n){var s=de(de({},r),{},{panes:i.map(function(a){var l=a.label,c=a.key,u=Sn(a,Fje);return v.createElement(jie,vt({tab:l,key:c,tabKey:c},u))})});return n(s,Gq)}return v.createElement(Gq,r)},Bje=["key","forceRender","style","className","destroyInactiveTabPane"],Hje=function(e){var n=e.id,r=e.activeKey,o=e.animated,i=e.tabPosition,s=e.destroyInactiveTabPane,a=v.useContext(dM),l=a.prefixCls,c=a.tabs,u=o.tabPane,d="".concat(l,"-tabpane");return v.createElement("div",{className:he("".concat(l,"-content-holder"))},v.createElement("div",{className:he("".concat(l,"-content"),"".concat(l,"-content-").concat(i),oe({},"".concat(l,"-content-animated"),u))},c.map(function(f){var h=f.key,g=f.forceRender,y=f.style,m=f.className,S=f.destroyInactiveTabPane,x=Sn(f,Bje),C=h===r;return v.createElement($u,vt({key:h,visible:C,forceRender:g,removeOnLeave:!!(s||S),leavedClassName:"".concat(d,"-hidden")},o.tabPaneMotion),function(E,P){var I=E.style,T=E.className;return v.createElement(jie,vt({},x,{prefixCls:d,id:n,tabKey:h,animated:u,active:C,style:de(de({},y),I),className:he(m,T),ref:P}))})})))};function Uje(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},e;return t===!1?e={inkBar:!1,tabPane:!1}:t===!0?e={inkBar:!0,tabPane:!1}:e=de({inkBar:!0},Wt(t)==="object"?t:{}),e.tabPaneMotion&&e.tabPane===void 0&&(e.tabPane=!0),!e.tabPaneMotion&&e.tabPane&&(e.tabPane=!1),e}var Wje=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],Xq=0,Vje=v.forwardRef(function(t,e){var n=t.id,r=t.prefixCls,o=r===void 0?"rc-tabs":r,i=t.className,s=t.items,a=t.direction,l=t.activeKey,c=t.defaultActiveKey,u=t.editable,d=t.animated,f=t.tabPosition,h=f===void 0?"top":f,g=t.tabBarGutter,y=t.tabBarStyle,m=t.tabBarExtraContent,S=t.locale,x=t.more,C=t.destroyInactiveTabPane,E=t.renderTabBar,P=t.onChange,I=t.onTabClick,T=t.onTabScroll,M=t.getPopupContainer,R=t.popupClassName,A=t.indicator,j=Sn(t,Wje),N=v.useMemo(function(){return(s||[]).filter(function(ve){return ve&&Wt(ve)==="object"&&"key"in ve})},[s]),k=a==="rtl",D=Uje(d),F=v.useState(!1),H=xe(F,2),U=H[0],B=H[1];v.useEffect(function(){B(Sz())},[]);var W=xi(function(){var ve;return(ve=N[0])===null||ve===void 0?void 0:ve.key},{value:l,defaultValue:c}),K=xe(W,2),q=K[0],X=K[1],Z=v.useState(function(){return N.findIndex(function(ve){return ve.key===q})}),Y=xe(Z,2),G=Y[0],J=Y[1];v.useEffect(function(){var ve=N.findIndex(function(ue){return ue.key===q});if(ve===-1){var fe;ve=Math.max(0,Math.min(G,N.length-1)),X((fe=N[ve])===null||fe===void 0?void 0:fe.key)}J(ve)},[N.map(function(ve){return ve.key}).join("_"),q,G]);var ne=xi(null,{value:n}),ee=xe(ne,2),re=ee[0],le=ee[1];v.useEffect(function(){n||(le("rc-tabs-".concat(Xq)),Xq+=1)},[]);function ae(ve,fe){I==null||I(ve,fe);var ue=ve!==q;X(ve),ue&&(P==null||P(ve))}var ie={id:re,activeKey:q,animated:D,tabPosition:h,rtl:k,mobile:U},ge=de(de({},ie),{},{editable:u,locale:S,more:x,tabBarGutter:g,onTabClick:ae,onTabScroll:T,extra:m,style:y,panes:null,getPopupContainer:M,popupClassName:R,indicator:A});return v.createElement(dM.Provider,{value:{tabs:N,prefixCls:o}},v.createElement("div",vt({ref:e,id:n,className:he(o,"".concat(o,"-").concat(h),oe(oe(oe({},"".concat(o,"-mobile"),U),"".concat(o,"-editable"),u),"".concat(o,"-rtl"),k),i)},j),v.createElement(zje,vt({},ge,{renderTabBar:E})),v.createElement(Hje,vt({destroyInactiveTabPane:C},ie,{animated:D}))))});const qje={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Kje(t,e={inkBar:!0,tabPane:!1}){let n;return e===!1?n={inkBar:!1,tabPane:!1}:e===!0?n={inkBar:!0,tabPane:!0}:n=Object.assign({inkBar:!0},typeof e=="object"?e:{}),n.tabPane&&(n.tabPaneMotion=Object.assign(Object.assign({},qje),{motionName:Nz(t,"switch")})),n}var Gje=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Xje(t){return t.filter(e=>e)}function Yje(t,e){if(t)return t.map(r=>{var o;const i=(o=r.destroyOnHidden)!==null&&o!==void 0?o:r.destroyInactiveTabPane;return Object.assign(Object.assign({},r),{destroyInactiveTabPane:i})});const n=Su(e).map(r=>{if(v.isValidElement(r)){const{key:o,props:i}=r,s=i||{},{tab:a}=s,l=Gje(s,["tab"]);return Object.assign(Object.assign({key:String(o)},l),{label:a})}return null});return Xje(n)}const Qje=t=>{const{componentCls:e,motionDurationSlow:n}=t;return[{[e]:{[`${e}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${n}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${n}`}}}}},[A_(t,"slide-up"),A_(t,"slide-down")]]},Zje=t=>{const{componentCls:e,tabsCardPadding:n,cardBg:r,cardGutter:o,colorBorderSecondary:i,itemSelectedColor:s}=t;return{[`${e}-card`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{margin:0,padding:n,background:r,border:`${Re(t.lineWidth)} ${t.lineType} ${i}`,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOut}`},[`${e}-tab-active`]:{color:s,background:t.colorBgContainer},[`${e}-tab-focus:has(${e}-tab-btn:focus-visible)`]:XS(t,-3),[`& ${e}-tab${e}-tab-focus ${e}-tab-btn:focus-visible`]:{outline:"none"},[`${e}-ink-bar`]:{visibility:"hidden"}},[`&${e}-top, &${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginLeft:{_skip_check_:!0,value:Re(o)}}}},[`&${e}-top`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`${Re(t.borderRadiusLG)} ${Re(t.borderRadiusLG)} 0 0`},[`${e}-tab-active`]:{borderBottomColor:t.colorBgContainer}}},[`&${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:`0 0 ${Re(t.borderRadiusLG)} ${Re(t.borderRadiusLG)}`},[`${e}-tab-active`]:{borderTopColor:t.colorBgContainer}}},[`&${e}-left, &${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginTop:Re(o)}}},[`&${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${Re(t.borderRadiusLG)} 0 0 ${Re(t.borderRadiusLG)}`}},[`${e}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:t.colorBgContainer}}}},[`&${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${Re(t.borderRadiusLG)} ${Re(t.borderRadiusLG)} 0`}},[`${e}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:t.colorBgContainer}}}}}}},Jje=t=>{const{componentCls:e,itemHoverColor:n,dropdownEdgeChildVerticalPadding:r}=t;return{[`${e}-dropdown`]:Object.assign(Object.assign({},xs(t)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:t.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${e}-dropdown-menu`]:{maxHeight:t.tabsDropdownHeight,margin:0,padding:`${Re(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:t.colorBgContainer,backgroundClip:"padding-box",borderRadius:t.borderRadiusLG,outline:"none",boxShadow:t.boxShadowSecondary,"&-item":Object.assign(Object.assign({},O_),{display:"flex",alignItems:"center",minWidth:t.tabsDropdownWidth,margin:0,padding:`${Re(t.paddingXXS)} ${Re(t.paddingSM)}`,color:t.colorText,fontWeight:"normal",fontSize:t.fontSize,lineHeight:t.lineHeight,cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:t.marginSM},color:t.colorIcon,fontSize:t.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:n}},"&:hover":{background:t.controlItemBgHover},"&-disabled":{"&, &:hover":{color:t.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},eLe=t=>{const{componentCls:e,margin:n,colorBorderSecondary:r,horizontalMargin:o,verticalItemPadding:i,verticalItemMargin:s,calc:a}=t;return{[`${e}-top, ${e}-bottom`]:{flexDirection:"column",[`> ${e}-nav, > div > ${e}-nav`]:{margin:o,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${Re(t.lineWidth)} ${t.lineType} ${r}`,content:"''"},[`${e}-ink-bar`]:{height:t.lineWidthBold,"&-animated":{transition:`width ${t.motionDurationSlow}, left ${t.motionDurationSlow},
            right ${t.motionDurationSlow}`}},[`${e}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:t.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:t.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:t.boxShadowTabsOverflowRight},[`&${e}-nav-wrap-ping-left::before`]:{opacity:1},[`&${e}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${e}-top`]:{[`> ${e}-nav,
        > div > ${e}-nav`]:{"&::before":{bottom:0},[`${e}-ink-bar`]:{bottom:0}}},[`${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,marginTop:n,marginBottom:0,"&::before":{top:0},[`${e}-ink-bar`]:{top:0}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0}},[`${e}-left, ${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{flexDirection:"column",minWidth:a(t.controlHeight).mul(1.25).equal(),[`${e}-tab`]:{padding:i,textAlign:"center"},[`${e}-tab + ${e}-tab`]:{margin:s},[`${e}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:t.controlHeight},"&::before":{top:0,boxShadow:t.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:t.boxShadowTabsOverflowBottom},[`&${e}-nav-wrap-ping-top::before`]:{opacity:1},[`&${e}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${e}-ink-bar`]:{width:t.lineWidthBold,"&-animated":{transition:`height ${t.motionDurationSlow}, top ${t.motionDurationSlow}`}},[`${e}-nav-list, ${e}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${e}-left`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{marginLeft:{_skip_check_:!0,value:Re(a(t.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:t.paddingLG}}}},[`${e}-right`]:{[`> ${e}-nav, > div > ${e}-nav`]:{order:1,[`${e}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${e}-content-holder, > div > ${e}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:a(t.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},[`> ${e}-content > ${e}-tabpane`]:{paddingRight:{_skip_check_:!0,value:t.paddingLG}}}}}},tLe=t=>{const{componentCls:e,cardPaddingSM:n,cardPaddingLG:r,cardHeightSM:o,cardHeightLG:i,horizontalItemPaddingSM:s,horizontalItemPaddingLG:a}=t;return{[e]:{"&-small":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:s,fontSize:t.titleFontSizeSM}}},"&-large":{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:a,fontSize:t.titleFontSizeLG,lineHeight:t.lineHeightLG}}}},[`${e}-card`]:{[`&${e}-small`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:n},[`${e}-nav-add`]:{minWidth:o,minHeight:o}},[`&${e}-bottom`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`0 0 ${Re(t.borderRadius)} ${Re(t.borderRadius)}`}},[`&${e}-top`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:`${Re(t.borderRadius)} ${Re(t.borderRadius)} 0 0`}},[`&${e}-right`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${Re(t.borderRadius)} ${Re(t.borderRadius)} 0`}}},[`&${e}-left`]:{[`> ${e}-nav ${e}-tab`]:{borderRadius:{_skip_check_:!0,value:`${Re(t.borderRadius)} 0 0 ${Re(t.borderRadius)}`}}}},[`&${e}-large`]:{[`> ${e}-nav`]:{[`${e}-tab`]:{padding:r},[`${e}-nav-add`]:{minWidth:i,minHeight:i}}}}}},nLe=t=>{const{componentCls:e,itemActiveColor:n,itemHoverColor:r,iconCls:o,tabsHorizontalItemMargin:i,horizontalItemPadding:s,itemSelectedColor:a,itemColor:l}=t,c=`${e}-tab`;return{[c]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:s,fontSize:t.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:l,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:n}},"&-btn":{outline:"none",transition:`all ${t.motionDurationSlow}`,[`${c}-icon:not(:last-child)`]:{marginInlineEnd:t.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:t.calc(t.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:t.marginXS},color:t.colorIcon,fontSize:t.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${t.motionDurationSlow}`,"&:hover":{color:t.colorTextHeading}},Fp(t)),"&:hover":{color:r},[`&${c}-active ${c}-btn`]:{color:a,textShadow:t.tabsActiveTextShadow},[`&${c}-focus ${c}-btn:focus-visible`]:XS(t),[`&${c}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed"},[`&${c}-disabled ${c}-btn, &${c}-disabled ${e}-remove`]:{"&:focus, &:active":{color:t.colorTextDisabled}},[`& ${c}-remove ${o}`]:{margin:0},[`${o}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:t.marginSM}}},[`${c} + ${c}`]:{margin:{_skip_check_:!0,value:i}}}},rLe=t=>{const{componentCls:e,tabsHorizontalItemMarginRTL:n,iconCls:r,cardGutter:o,calc:i}=t;return{[`${e}-rtl`]:{direction:"rtl",[`${e}-nav`]:{[`${e}-tab`]:{margin:{_skip_check_:!0,value:n},[`${e}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:Re(t.marginSM)}},[`${e}-tab-remove`]:{marginRight:{_skip_check_:!0,value:Re(t.marginXS)},marginLeft:{_skip_check_:!0,value:Re(i(t.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${e}-left`]:{[`> ${e}-nav`]:{order:1},[`> ${e}-content-holder`]:{order:0}},[`&${e}-right`]:{[`> ${e}-nav`]:{order:0},[`> ${e}-content-holder`]:{order:1}},[`&${e}-card${e}-top, &${e}-card${e}-bottom`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-tab + ${e}-tab`]:{marginRight:{_skip_check_:!0,value:o},marginLeft:{_skip_check_:!0,value:0}}}}},[`${e}-dropdown-rtl`]:{direction:"rtl"},[`${e}-menu-item`]:{[`${e}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},oLe=t=>{const{componentCls:e,tabsCardPadding:n,cardHeight:r,cardGutter:o,itemHoverColor:i,itemActiveColor:s,colorBorderSecondary:a}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({},xs(t)),{display:"flex",[`> ${e}-nav, > div > ${e}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${e}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${t.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${e}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${t.motionDurationSlow}`},[`${e}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${e}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${e}-nav-more`]:{position:"relative",padding:n,background:"transparent",border:0,color:t.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:t.calc(t.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${e}-nav-add`]:Object.assign({minWidth:r,minHeight:r,marginLeft:{_skip_check_:!0,value:o},background:"transparent",border:`${Re(t.lineWidth)} ${t.lineType} ${a}`,borderRadius:`${Re(t.borderRadiusLG)} ${Re(t.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:t.colorText,transition:`all ${t.motionDurationSlow} ${t.motionEaseInOut}`,"&:hover":{color:i},"&:active, &:focus:not(:focus-visible)":{color:s}},Fp(t,-3))},[`${e}-extra-content`]:{flex:"none"},[`${e}-ink-bar`]:{position:"absolute",background:t.inkBarColor,pointerEvents:"none"}}),nLe(t)),{[`${e}-content`]:{position:"relative",width:"100%"},[`${e}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${e}-tabpane`]:Object.assign(Object.assign({},Fp(t)),{"&-hidden":{display:"none"}})}),[`${e}-centered`]:{[`> ${e}-nav, > div > ${e}-nav`]:{[`${e}-nav-wrap`]:{[`&:not([class*='${e}-nav-wrap-ping']) > ${e}-nav-list`]:{margin:"auto"}}}}}},iLe=t=>{const{cardHeight:e,cardHeightSM:n,cardHeightLG:r,controlHeight:o,controlHeightLG:i}=t,s=e||i,a=n||o,l=r||i+8;return{zIndexPopup:t.zIndexPopupBase+50,cardBg:t.colorFillAlter,cardHeight:s,cardHeightSM:a,cardHeightLG:l,cardPadding:`${(s-t.fontHeight)/2-t.lineWidth}px ${t.padding}px`,cardPaddingSM:`${(a-t.fontHeight)/2-t.lineWidth}px ${t.paddingXS}px`,cardPaddingLG:`${(l-t.fontHeightLG)/2-t.lineWidth}px ${t.padding}px`,titleFontSize:t.fontSize,titleFontSizeLG:t.fontSizeLG,titleFontSizeSM:t.fontSize,inkBarColor:t.colorPrimary,horizontalMargin:`0 0 ${t.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${t.paddingSM}px 0`,horizontalItemPaddingSM:`${t.paddingXS}px 0`,horizontalItemPaddingLG:`${t.padding}px 0`,verticalItemPadding:`${t.paddingXS}px ${t.paddingLG}px`,verticalItemMargin:`${t.margin}px 0 0 0`,itemColor:t.colorText,itemSelectedColor:t.colorPrimary,itemHoverColor:t.colorPrimaryHover,itemActiveColor:t.colorPrimaryActive,cardGutter:t.marginXXS/2}},sLe=li("Tabs",t=>{const e=Tr(t,{tabsCardPadding:t.cardPadding,dropdownEdgeChildVerticalPadding:t.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${Re(t.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${Re(t.horizontalItemGutter)}`});return[tLe(e),rLe(e),eLe(e),Jje(e),Zje(e),oLe(e),Qje(e)]},iLe),aLe=()=>null;var lLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Lie=t=>{var e,n,r,o,i,s,a,l,c,u,d;const{type:f,className:h,rootClassName:g,size:y,onEdit:m,hideAdd:S,centered:x,addIcon:C,removeIcon:E,moreIcon:P,more:I,popupClassName:T,children:M,items:R,animated:A,style:j,indicatorSize:N,indicator:k,destroyInactiveTabPane:D,destroyOnHidden:F}=t,H=lLe(t,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator","destroyInactiveTabPane","destroyOnHidden"]),{prefixCls:U}=H,{direction:B,tabs:W,getPrefixCls:K,getPopupContainer:q}=v.useContext(tr),X=K("tabs",U),Z=Nc(X),[Y,G,J]=sLe(X,Z);let ne;f==="editable-card"&&(ne={onEdit:(ve,{key:fe,event:ue})=>{m==null||m(ve==="add"?ue:fe,ve)},removeIcon:(e=E??(W==null?void 0:W.removeIcon))!==null&&e!==void 0?e:v.createElement(Qx,null),addIcon:(C??(W==null?void 0:W.addIcon))||v.createElement(_je,null),showAdd:S!==!0});const ee=K(),re=Du(y),le=Yje(R,M),ae=Kje(X,A),ie=Object.assign(Object.assign({},W==null?void 0:W.style),j),ge={align:(n=k==null?void 0:k.align)!==null&&n!==void 0?n:(r=W==null?void 0:W.indicator)===null||r===void 0?void 0:r.align,size:(a=(i=(o=k==null?void 0:k.size)!==null&&o!==void 0?o:N)!==null&&i!==void 0?i:(s=W==null?void 0:W.indicator)===null||s===void 0?void 0:s.size)!==null&&a!==void 0?a:W==null?void 0:W.indicatorSize};return Y(v.createElement(Vje,Object.assign({direction:B,getPopupContainer:q},H,{items:le,className:he({[`${X}-${re}`]:re,[`${X}-card`]:["card","editable-card"].includes(f),[`${X}-editable-card`]:f==="editable-card",[`${X}-centered`]:x},W==null?void 0:W.className,h,g,G,J,Z),popupClassName:he(T,G,J,Z),style:ie,editable:ne,more:Object.assign({icon:(d=(u=(c=(l=W==null?void 0:W.more)===null||l===void 0?void 0:l.icon)!==null&&c!==void 0?c:W==null?void 0:W.moreIcon)!==null&&u!==void 0?u:P)!==null&&d!==void 0?d:v.createElement(lje,null),transitionName:`${ee}-slide-up`},I),prefixCls:X,animated:ae,indicator:ge,destroyInactiveTabPane:F??D})))};Lie.TabPane=aLe;function cLe(t,e,n){var r=n||{},o=r.noTrailing,i=o===void 0?!1:o,s=r.noLeading,a=s===void 0?!1:s,l=r.debounceMode,c=l===void 0?void 0:l,u,d=!1,f=0;function h(){u&&clearTimeout(u)}function g(m){var S=m||{},x=S.upcomingOnly,C=x===void 0?!1:x;h(),d=!C}function y(){for(var m=arguments.length,S=new Array(m),x=0;x<m;x++)S[x]=arguments[x];var C=this,E=Date.now()-f;if(d)return;function P(){f=Date.now(),e.apply(C,S)}function I(){u=void 0}!a&&c&&!u&&P(),h(),c===void 0&&E>t?a?(f=Date.now(),i||(u=setTimeout(c?I:P,t))):P():i!==!0&&(u=setTimeout(c?I:P,c===void 0?t-E:t))}return y.cancel=g,y}function uLe(t,e,n){var r={},o=r.atBegin,i=o===void 0?!1:o;return cLe(t,e,{debounceMode:i!==!1})}const Nie=v.createContext({});var dLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Yq(t){return typeof t=="number"?`${t} ${t} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(t)?`0 0 ${t}`:t}const fLe=["xs","sm","md","lg","xl","xxl"],a5=v.forwardRef((t,e)=>{const{getPrefixCls:n,direction:r}=v.useContext(tr),{gutter:o,wrap:i}=v.useContext(Nie),{prefixCls:s,span:a,order:l,offset:c,push:u,pull:d,className:f,children:h,flex:g,style:y}=t,m=dLe(t,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),S=n("col",s),[x,C,E]=wke(S),P={};let I={};fLe.forEach(R=>{let A={};const j=t[R];typeof j=="number"?A.span=j:typeof j=="object"&&(A=j||{}),delete m[R],I=Object.assign(Object.assign({},I),{[`${S}-${R}-${A.span}`]:A.span!==void 0,[`${S}-${R}-order-${A.order}`]:A.order||A.order===0,[`${S}-${R}-offset-${A.offset}`]:A.offset||A.offset===0,[`${S}-${R}-push-${A.push}`]:A.push||A.push===0,[`${S}-${R}-pull-${A.pull}`]:A.pull||A.pull===0,[`${S}-rtl`]:r==="rtl"}),A.flex&&(I[`${S}-${R}-flex`]=!0,P[`--${S}-${R}-flex`]=Yq(A.flex))});const T=he(S,{[`${S}-${a}`]:a!==void 0,[`${S}-order-${l}`]:l,[`${S}-offset-${c}`]:c,[`${S}-push-${u}`]:u,[`${S}-pull-${d}`]:d},f,I,C,E),M={};if(o&&o[0]>0){const R=o[0]/2;M.paddingLeft=R,M.paddingRight=R}return g&&(M.flex=Yq(g),i===!1&&!M.minWidth&&(M.minWidth=0)),x(v.createElement("div",Object.assign({},m,{style:Object.assign(Object.assign(Object.assign({},M),y),P),className:T,ref:e}),h))});function hLe(t,e){const n=[void 0,void 0],r=Array.isArray(t)?t:[t,void 0],o=e||{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0};return r.forEach((i,s)=>{if(typeof i=="object"&&i!==null)for(let a=0;a<zp.length;a++){const l=zp[a];if(o[l]&&i[l]!==void 0){n[s]=i[l];break}}else n[s]=i}),n}var pLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function Qq(t,e){const[n,r]=v.useState(typeof t=="string"?t:""),o=()=>{if(typeof t=="string"&&r(t),typeof t=="object")for(let i=0;i<zp.length;i++){const s=zp[i];if(!e||!e[s])continue;const a=t[s];if(a!==void 0){r(a);return}}};return v.useEffect(()=>{o()},[JSON.stringify(t),e]),n}const Fie=v.forwardRef((t,e)=>{const{prefixCls:n,justify:r,align:o,className:i,style:s,children:a,gutter:l=0,wrap:c}=t,u=pLe(t,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:d,direction:f}=v.useContext(tr),h=Yz(!0,null),g=Qq(o,h),y=Qq(r,h),m=d("row",n),[S,x,C]=Ske(m),E=hLe(l,h),P=he(m,{[`${m}-no-wrap`]:c===!1,[`${m}-${y}`]:y,[`${m}-${g}`]:g,[`${m}-rtl`]:f==="rtl"},i,x,C),I={},T=E[0]!=null&&E[0]>0?E[0]/-2:void 0;T&&(I.marginLeft=T,I.marginRight=T);const[M,R]=E;I.rowGap=R;const A=v.useMemo(()=>({gutter:[M,R],wrap:c}),[M,R,c]);return S(v.createElement(Nie.Provider,{value:A},v.createElement("div",Object.assign({},u,{className:P,style:Object.assign(Object.assign({},I),s),ref:e}),a)))}),zie=t=>{let e;return typeof t=="object"&&(t!=null&&t.clearIcon)?e=t:t&&(e={clearIcon:ce.createElement(Kv,null)}),e};function Bie(t,e){const n=v.useRef([]),r=()=>{n.current.push(setTimeout(()=>{var o,i,s,a;!((o=t.current)===null||o===void 0)&&o.input&&((i=t.current)===null||i===void 0?void 0:i.input.getAttribute("type"))==="password"&&(!((s=t.current)===null||s===void 0)&&s.input.hasAttribute("value"))&&((a=t.current)===null||a===void 0||a.input.removeAttribute("value"))}))};return v.useEffect(()=>(e&&r(),()=>n.current.forEach(o=>{o&&clearTimeout(o)})),[]),r}function gLe(t){return!!(t.prefix||t.suffix||t.allowClear||t.showCount)}var mLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const fM=v.forwardRef((t,e)=>{const{prefixCls:n,bordered:r=!0,status:o,size:i,disabled:s,onBlur:a,onFocus:l,suffix:c,allowClear:u,addonAfter:d,addonBefore:f,className:h,style:g,styles:y,rootClassName:m,onChange:S,classNames:x,variant:C}=t,E=mLe(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:P,direction:I,allowClear:T,autoComplete:M,className:R,style:A,classNames:j,styles:N}=Bl("input"),k=P("input",n),D=v.useRef(null),F=Nc(k),[H,U,B]=Rie(k,m),[W]=kie(k,F),{compactSize:K,compactItemClassnames:q}=ew(k,I),X=Du(ye=>{var ke;return(ke=i??K)!==null&&ke!==void 0?ke:ye}),Z=ce.useContext(Pd),Y=s??Z,{status:G,hasFeedback:J,feedbackIcon:ne}=v.useContext(Qa),ee=aM(G,o),re=gLe(t)||!!J;v.useRef(re);const le=Bie(D,!0),ae=ye=>{le(),a==null||a(ye)},ie=ye=>{le(),l==null||l(ye)},ge=ye=>{le(),S==null||S(ye)},ve=(J||c)&&ce.createElement(ce.Fragment,null,c,J&&ne),fe=zie(u??T),[ue,Ce]=Xz("input",C,r);return H(W(ce.createElement(kre,Object.assign({ref:xa(e,D),prefixCls:k,autoComplete:M},E,{disabled:Y,onBlur:ae,onFocus:ie,style:Object.assign(Object.assign({},A),g),styles:Object.assign(Object.assign({},N),y),suffix:ve,allowClear:fe,className:he(h,m,B,F,q,R),onChange:ge,addonBefore:f&&ce.createElement(pN,{form:!0,space:!0},f),addonAfter:d&&ce.createElement(pN,{form:!0,space:!0},d),classNames:Object.assign(Object.assign(Object.assign({},x),j),{input:he({[`${k}-sm`]:X==="small",[`${k}-lg`]:X==="large",[`${k}-rtl`]:I==="rtl"},x==null?void 0:x.input,j.input,U),variant:he({[`${k}-${ue}`]:Ce},D_(k,ee)),affixWrapper:he({[`${k}-affix-wrapper-sm`]:X==="small",[`${k}-affix-wrapper-lg`]:X==="large",[`${k}-affix-wrapper-rtl`]:I==="rtl"},U),wrapper:he({[`${k}-group-rtl`]:I==="rtl"},U),groupWrapper:he({[`${k}-group-wrapper-sm`]:X==="small",[`${k}-group-wrapper-lg`]:X==="large",[`${k}-group-wrapper-rtl`]:I==="rtl",[`${k}-group-wrapper-${ue}`]:Ce},D_(`${k}-group-wrapper`,ee,J),U)})}))))});function vLe(t){return t==null?null:typeof t=="object"&&!v.isValidElement(t)?t:{title:t}}function L_(t){const[e,n]=v.useState(t);return v.useEffect(()=>{const r=setTimeout(()=>{n(t)},t.length?0:10);return()=>{clearTimeout(r)}},[t]),e}const yLe=t=>{const{componentCls:e}=t,n=`${e}-show-help`,r=`${e}-show-help-item`;return{[n]:{transition:`opacity ${t.motionDurationFast} ${t.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[r]:{overflow:"hidden",transition:`height ${t.motionDurationFast} ${t.motionEaseInOut},
                     opacity ${t.motionDurationFast} ${t.motionEaseInOut},
                     transform ${t.motionDurationFast} ${t.motionEaseInOut} !important`,[`&${r}-appear, &${r}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${r}-leave-active`]:{transform:"translateY(-5px)"}}}}},bLe=t=>({legend:{display:"block",width:"100%",marginBottom:t.marginLG,padding:0,color:t.colorTextDescription,fontSize:t.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${Re(t.controlOutlineWidth)} ${t.controlOutline}`},output:{display:"block",paddingTop:15,color:t.colorText,fontSize:t.fontSize,lineHeight:t.lineHeight}}),Zq=(t,e)=>{const{formItemCls:n}=t;return{[n]:{[`${n}-label > label`]:{height:e},[`${n}-control-input`]:{minHeight:e}}}},SLe=t=>{const{componentCls:e}=t;return{[t.componentCls]:Object.assign(Object.assign(Object.assign({},xs(t)),bLe(t)),{[`${e}-text`]:{display:"inline-block",paddingInlineEnd:t.paddingSM},"&-small":Object.assign({},Zq(t,t.controlHeightSM)),"&-large":Object.assign({},Zq(t,t.controlHeightLG))})}},xLe=t=>{const{formItemCls:e,iconCls:n,rootPrefixCls:r,antCls:o,labelRequiredMarkColor:i,labelColor:s,labelFontSize:a,labelHeight:l,labelColonMarginInlineStart:c,labelColonMarginInlineEnd:u,itemMarginBottom:d}=t;return{[e]:Object.assign(Object.assign({},xs(t)),{marginBottom:d,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${o}-row`]:{display:"none"},"&-has-warning":{[`${e}-split`]:{color:t.colorError}},"&-has-error":{[`${e}-split`]:{color:t.colorWarning}},[`${e}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:t.lineHeight,whiteSpace:"unset","> label":{verticalAlign:"middle",textWrap:"balance"}},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:l,color:s,fontSize:a,[`> ${n}`]:{fontSize:t.fontSize,verticalAlign:"top"},[`&${e}-required`]:{"&::before":{display:"inline-block",marginInlineEnd:t.marginXXS,color:i,fontSize:t.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"'},[`&${e}-required-mark-hidden, &${e}-required-mark-optional`]:{"&::before":{display:"none"}}},[`${e}-optional`]:{display:"inline-block",marginInlineStart:t.marginXXS,color:t.colorTextDescription,[`&${e}-required-mark-hidden`]:{display:"none"}},[`${e}-tooltip`]:{color:t.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:t.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:c,marginInlineEnd:u},[`&${e}-no-colon::after`]:{content:'"\\a0"'}}},[`${e}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${r}-col-'"]):not([class*="' ${r}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:t.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[e]:{"&-additional":{display:"flex",flexDirection:"column"},"&-explain, &-extra":{clear:"both",color:t.colorTextDescription,fontSize:t.fontSize,lineHeight:t.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:t.controlHeightSM,transition:`color ${t.motionDurationMid} ${t.motionEaseOut}`},"&-explain":{"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning}}},[`&-with-help ${e}-explain`]:{height:"auto",opacity:1},[`${e}-feedback-icon`]:{fontSize:t.fontSize,textAlign:"center",visibility:"visible",animationName:zz,animationDuration:t.motionDurationMid,animationTimingFunction:t.motionEaseOutBack,pointerEvents:"none","&-success":{color:t.colorSuccess},"&-error":{color:t.colorError},"&-warning":{color:t.colorWarning},"&-validating":{color:t.colorPrimary}}})}},Jq=(t,e)=>{const{formItemCls:n}=t;return{[`${e}-horizontal`]:{[`${n}-label`]:{flexGrow:0},[`${n}-control`]:{flex:"1 1 0",minWidth:0},[`${n}-label[class$='-24'], ${n}-label[class*='-24 ']`]:{[`& + ${n}-control`]:{minWidth:"unset"}}}}},wLe=t=>{const{componentCls:e,formItemCls:n,inlineItemMarginBottom:r}=t;return{[`${e}-inline`]:{display:"flex",flexWrap:"wrap",[n]:{flex:"none",marginInlineEnd:t.margin,marginBottom:r,"&-row":{flexWrap:"nowrap"},[`> ${n}-label,
        > ${n}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${n}-label`]:{flex:"none"},[`${e}-text`]:{display:"inline-block"},[`${n}-has-feedback`]:{display:"inline-block"}}}}},fc=t=>({padding:t.verticalLabelPadding,margin:t.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),Hie=t=>{const{componentCls:e,formItemCls:n,rootPrefixCls:r}=t;return{[`${n} ${n}-label`]:fc(t),[`${e}:not(${e}-inline)`]:{[n]:{flexWrap:"wrap",[`${n}-label, ${n}-control`]:{[`&:not([class*=" ${r}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},CLe=t=>{const{componentCls:e,formItemCls:n,antCls:r}=t;return{[`${e}-vertical`]:{[`${n}:not(${n}-horizontal)`]:{[`${n}-row`]:{flexDirection:"column"},[`${n}-label > label`]:{height:"auto"},[`${n}-control`]:{width:"100%"},[`${n}-label,
        ${r}-col-24${n}-label,
        ${r}-col-xl-24${n}-label`]:fc(t)}},[`@media (max-width: ${Re(t.screenXSMax)})`]:[Hie(t),{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-xs-24${n}-label`]:fc(t)}}}],[`@media (max-width: ${Re(t.screenSMMax)})`]:{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-sm-24${n}-label`]:fc(t)}}},[`@media (max-width: ${Re(t.screenMDMax)})`]:{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-md-24${n}-label`]:fc(t)}}},[`@media (max-width: ${Re(t.screenLGMax)})`]:{[e]:{[`${n}:not(${n}-horizontal)`]:{[`${r}-col-lg-24${n}-label`]:fc(t)}}}}},ELe=t=>{const{formItemCls:e,antCls:n}=t;return{[`${e}-vertical`]:{[`${e}-row`]:{flexDirection:"column"},[`${e}-label > label`]:{height:"auto"},[`${e}-control`]:{width:"100%"}},[`${e}-vertical ${e}-label,
      ${n}-col-24${e}-label,
      ${n}-col-xl-24${e}-label`]:fc(t),[`@media (max-width: ${Re(t.screenXSMax)})`]:[Hie(t),{[e]:{[`${n}-col-xs-24${e}-label`]:fc(t)}}],[`@media (max-width: ${Re(t.screenSMMax)})`]:{[e]:{[`${n}-col-sm-24${e}-label`]:fc(t)}},[`@media (max-width: ${Re(t.screenMDMax)})`]:{[e]:{[`${n}-col-md-24${e}-label`]:fc(t)}},[`@media (max-width: ${Re(t.screenLGMax)})`]:{[e]:{[`${n}-col-lg-24${e}-label`]:fc(t)}}}},PLe=t=>({labelRequiredMarkColor:t.colorError,labelColor:t.colorTextHeading,labelFontSize:t.fontSize,labelHeight:t.controlHeight,labelColonMarginInlineStart:t.marginXXS/2,labelColonMarginInlineEnd:t.marginXS,itemMarginBottom:t.marginLG,verticalLabelPadding:`0 0 ${t.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),Uie=(t,e)=>Tr(t,{formItemCls:`${t.componentCls}-item`,rootPrefixCls:e}),l5=li("Form",(t,{rootPrefixCls:e})=>{const n=Uie(t,e);return[SLe(n),xLe(n),yLe(n),Jq(n,n.componentCls),Jq(n,n.formItemCls),wLe(n),CLe(n),ELe(n),aRe(n),zz]},PLe,{order:-1e3}),eK=[];function Gk(t,e,n,r=0){return{key:typeof t=="string"?t:`${e}-${r}`,error:t,errorStatus:n}}const Wie=({help:t,helpStatus:e,errors:n=eK,warnings:r=eK,className:o,fieldId:i,onVisibleChanged:s})=>{const{prefixCls:a}=v.useContext(Uz),l=`${a}-item-explain`,c=Nc(a),[u,d,f]=l5(a,c),h=v.useMemo(()=>tq(a),[a]),g=L_(n),y=L_(r),m=v.useMemo(()=>t!=null?[Gk(t,"help",e)]:[].concat(it(g.map((C,E)=>Gk(C,"error","error",E))),it(y.map((C,E)=>Gk(C,"warning","warning",E)))),[t,e,g,y]),S=v.useMemo(()=>{const C={};return m.forEach(({key:E})=>{C[E]=(C[E]||0)+1}),m.map((E,P)=>Object.assign(Object.assign({},E),{key:C[E.key]>1?`${E.key}-fallback-${P}`:E.key}))},[m]),x={};return i&&(x.id=`${i}_help`),u(v.createElement($u,{motionDeadline:h.motionDeadline,motionName:`${a}-show-help`,visible:!!S.length,onVisibleChanged:s},C=>{const{className:E,style:P}=C;return v.createElement("div",Object.assign({},x,{className:he(l,E,f,c,o,d),style:P}),v.createElement(yz,Object.assign({keys:S},tq(a),{motionName:`${a}-show-help-item`,component:!1}),I=>{const{key:T,error:M,errorStatus:R,className:A,style:j}=I;return v.createElement("div",{key:T,className:he(A,{[`${l}-${R}`]:R}),style:j},M)}))}))},_Le=["parentNode"],ILe="form_item";function lS(t){return t===void 0||t===!1?[]:Array.isArray(t)?t:[t]}function Vie(t,e){if(!t.length)return;const n=t.join("_");return e?`${e}_${n}`:_Le.includes(n)?`${ILe}_${n}`:n}function qie(t,e,n,r,o,i){let s=r;return i!==void 0?s=i:n.validating?s="validating":t.length?s="error":e.length?s="warning":(n.touched||o&&n.validated)&&(s="success"),s}var TLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function tK(t){return lS(t).join("_")}function nK(t,e){const n=e.getFieldInstance(t),r=Yte(n);if(r)return r;const o=Vie(lS(t),e.__INTERNAL__.name);if(o)return document.getElementById(o)}function Kie(t){const[e]=VT(),n=v.useRef({}),r=v.useMemo(()=>t??Object.assign(Object.assign({},e),{__INTERNAL__:{itemRef:o=>i=>{const s=tK(o);i?n.current[s]=i:delete n.current[s]}},scrollToField:(o,i={})=>{const{focus:s}=i,a=TLe(i,["focus"]),l=nK(o,r);l&&(eOe(l,Object.assign({scrollMode:"if-needed",block:"nearest"},a)),s&&r.focusField(o))},focusField:o=>{var i,s;const a=r.getFieldInstance(o);typeof(a==null?void 0:a.focus)=="function"?a.focus():(s=(i=nK(o,r))===null||i===void 0?void 0:i.focus)===null||s===void 0||s.call(i)},getFieldInstance:o=>{const i=tK(o);return n.current[i]}}),[t,e]);return[r]}var MLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const OLe=(t,e)=>{const n=v.useContext(Pd),{getPrefixCls:r,direction:o,requiredMark:i,colon:s,scrollToFirstError:a,className:l,style:c}=Bl("form"),{prefixCls:u,className:d,rootClassName:f,size:h,disabled:g=n,form:y,colon:m,labelAlign:S,labelWrap:x,labelCol:C,wrapperCol:E,hideRequiredMark:P,layout:I="horizontal",scrollToFirstError:T,requiredMark:M,onFinishFailed:R,name:A,style:j,feedbackIcons:N,variant:k}=t,D=MLe(t,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),F=Du(h),H=v.useContext(Wre),U=v.useMemo(()=>M!==void 0?M:P?!1:i!==void 0?i:!0,[P,M,i]),B=m??s,W=r("form",u),K=Nc(W),[q,X,Z]=l5(W,K),Y=he(W,`${W}-${I}`,{[`${W}-hide-required-mark`]:U===!1,[`${W}-rtl`]:o==="rtl",[`${W}-${F}`]:F},Z,K,X,l,d,f),[G]=Kie(y),{__INTERNAL__:J}=G;J.name=A;const ne=v.useMemo(()=>({name:A,labelAlign:S,labelCol:C,labelWrap:x,wrapperCol:E,vertical:I==="vertical",colon:B,requiredMark:U,itemRef:J.itemRef,form:G,feedbackIcons:N}),[A,S,C,E,I,B,U,G,N]),ee=v.useRef(null);v.useImperativeHandle(e,()=>{var ae;return Object.assign(Object.assign({},G),{nativeElement:(ae=ee.current)===null||ae===void 0?void 0:ae.nativeElement})});const re=(ae,ie)=>{if(ae){let ge={block:"nearest"};typeof ae=="object"&&(ge=Object.assign(Object.assign({},ge),ae)),G.scrollToField(ie,ge)}},le=ae=>{if(R==null||R(ae),ae.errorFields.length){const ie=ae.errorFields[0].name;if(T!==void 0){re(T,ie);return}a!==void 0&&re(a,ie)}};return q(v.createElement(Doe.Provider,{value:k},v.createElement(Yre,{disabled:g},v.createElement(Lp.Provider,{value:F},v.createElement($oe,{validateMessages:H},v.createElement(Id.Provider,{value:ne},v.createElement(mg,Object.assign({id:A},D,{name:A,onFinishFailed:le,form:G,ref:ee,style:Object.assign(Object.assign({},c),j),className:Y}))))))))},RLe=v.forwardRef(OLe);function kLe(t){if(typeof t=="function")return t;const e=Su(t);return e.length<=1?e[0]:e}const Gie=()=>{const{status:t,errors:e=[],warnings:n=[]}=v.useContext(Qa);return{status:t,errors:e,warnings:n}};Gie.Context=Qa;function ALe(t){const[e,n]=v.useState(t),r=v.useRef(null),o=v.useRef([]),i=v.useRef(!1);v.useEffect(()=>(i.current=!1,()=>{i.current=!0,Sr.cancel(r.current),r.current=null}),[]);function s(a){i.current||(r.current===null&&(o.current=[],r.current=Sr(()=>{r.current=null,n(l=>{let c=l;return o.current.forEach(u=>{c=u(c)}),c})})),o.current.push(a))}return[e,s]}function $Le(){const{itemRef:t}=v.useContext(Id),e=v.useRef({});function n(r,o){const i=o&&typeof o=="object"&&pg(o),s=r.join("_");return(e.current.name!==s||e.current.originRef!==i)&&(e.current.name=s,e.current.originRef=i,e.current.ref=xa(t(r),i)),e.current.ref}return n}const DLe=t=>{const{formItemCls:e}=t;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${e}-control`]:{display:"flex"}}}},jLe=YT(["Form","item-item"],(t,{rootPrefixCls:e})=>{const n=Uie(t,e);return[DLe(n)]});var LLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const NLe=24,FLe=t=>{const{prefixCls:e,status:n,labelCol:r,wrapperCol:o,children:i,errors:s,warnings:a,_internalItemRender:l,extra:c,help:u,fieldId:d,marginBottom:f,onErrorVisibleChanged:h,label:g}=t,y=`${e}-item`,m=v.useContext(Id),S=v.useMemo(()=>{let D=Object.assign({},o||m.wrapperCol||{});return g===null&&!r&&!o&&m.labelCol&&[void 0,"xs","sm","md","lg","xl","xxl"].forEach(H=>{const U=H?[H]:[],B=Il(m.labelCol,U),W=typeof B=="object"?B:{},K=Il(D,U),q=typeof K=="object"?K:{};"span"in W&&!("offset"in q)&&W.span<NLe&&(D=Sl(D,[].concat(U,["offset"]),W.span))}),D},[o,m]),x=he(`${y}-control`,S.className),C=v.useMemo(()=>{const{labelCol:D,wrapperCol:F}=m;return LLe(m,["labelCol","wrapperCol"])},[m]),E=v.useRef(null),[P,I]=v.useState(0);lr(()=>{c&&E.current?I(E.current.clientHeight):I(0)},[c]);const T=v.createElement("div",{className:`${y}-control-input`},v.createElement("div",{className:`${y}-control-input-content`},i)),M=v.useMemo(()=>({prefixCls:e,status:n}),[e,n]),R=f!==null||s.length||a.length?v.createElement(Uz.Provider,{value:M},v.createElement(Wie,{fieldId:d,errors:s,warnings:a,help:u,helpStatus:n,className:`${y}-explain-connected`,onVisibleChanged:h})):null,A={};d&&(A.id=`${d}_extra`);const j=c?v.createElement("div",Object.assign({},A,{className:`${y}-extra`,ref:E}),c):null,N=R||j?v.createElement("div",{className:`${y}-additional`,style:f?{minHeight:f+P}:{}},R,j):null,k=l&&l.mark==="pro_table_render"&&l.render?l.render(t,{input:T,errorList:R,extra:j}):v.createElement(v.Fragment,null,T,N);return v.createElement(Id.Provider,{value:C},v.createElement(a5,Object.assign({},S,{className:x}),k),v.createElement(jLe,{prefixCls:e}))};var zLe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},BLe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:zLe}))},HLe=v.forwardRef(BLe),ULe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const WLe=({prefixCls:t,label:e,htmlFor:n,labelCol:r,labelAlign:o,colon:i,required:s,requiredMark:a,tooltip:l,vertical:c})=>{var u;const[d]=Vv("Form"),{labelAlign:f,labelCol:h,labelWrap:g,colon:y}=v.useContext(Id);if(!e)return null;const m=r||h||{},S=o||f,x=`${t}-item-label`,C=he(x,S==="left"&&`${x}-left`,m.className,{[`${x}-wrap`]:!!g});let E=e;const P=i===!0||y!==!1&&i!==!1;P&&!c&&typeof e=="string"&&e.trim()&&(E=e.replace(/[:|]\s*$/,""));const T=vLe(l);if(T){const{icon:k=v.createElement(HLe,null)}=T,D=ULe(T,["icon"]),F=v.createElement(tw,Object.assign({},D),v.cloneElement(k,{className:`${t}-item-tooltip`,title:"",onClick:H=>{H.preventDefault()},tabIndex:null}));E=v.createElement(v.Fragment,null,E,F)}const M=a==="optional",R=typeof a=="function",A=a===!1;R?E=a(E,{required:!!s}):M&&!s&&(E=v.createElement(v.Fragment,null,E,v.createElement("span",{className:`${t}-item-optional`,title:""},(d==null?void 0:d.optional)||((u=jp.Form)===null||u===void 0?void 0:u.optional))));let j;A?j="hidden":(M||R)&&(j="optional");const N=he({[`${t}-item-required`]:s,[`${t}-item-required-mark-${j}`]:j,[`${t}-item-no-colon`]:!P});return v.createElement(a5,Object.assign({},m,{className:C}),v.createElement("label",{htmlFor:n,className:N,title:typeof e=="string"?e:""},E))},VLe={success:QT,warning:ZT,error:Kv,validating:Zx};function Xie({children:t,errors:e,warnings:n,hasFeedback:r,validateStatus:o,prefixCls:i,meta:s,noStyle:a}){const l=`${i}-item`,{feedbackIcons:c}=v.useContext(Id),u=qie(e,n,s,null,!!r,o),{isFormItemInput:d,status:f,hasFeedback:h,feedbackIcon:g}=v.useContext(Qa),y=v.useMemo(()=>{var m;let S;if(r){const C=r!==!0&&r.icons||c,E=u&&((m=C==null?void 0:C({status:u,errors:e,warnings:n}))===null||m===void 0?void 0:m[u]),P=u&&VLe[u];S=E!==!1&&P?v.createElement("span",{className:he(`${l}-feedback-icon`,`${l}-feedback-icon-${u}`)},E||v.createElement(P,null)):null}const x={status:u||"",errors:e,warnings:n,hasFeedback:!!r,feedbackIcon:S,isFormItemInput:!0};return a&&(x.status=(u??f)||"",x.isFormItemInput=d,x.hasFeedback=!!(r??h),x.feedbackIcon=r!==void 0?x.feedbackIcon:g),x},[u,r,a,d,f]);return v.createElement(Qa.Provider,{value:y},t)}var qLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function KLe(t){const{prefixCls:e,className:n,rootClassName:r,style:o,help:i,errors:s,warnings:a,validateStatus:l,meta:c,hasFeedback:u,hidden:d,children:f,fieldId:h,required:g,isRequired:y,onSubItemMetaChange:m,layout:S}=t,x=qLe(t,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),C=`${e}-item`,{requiredMark:E,vertical:P}=v.useContext(Id),I=P||S==="vertical",T=v.useRef(null),M=L_(s),R=L_(a),A=i!=null,j=!!(A||s.length||a.length),N=!!T.current&&HT(T.current),[k,D]=v.useState(null);lr(()=>{if(j&&T.current){const W=getComputedStyle(T.current);D(parseInt(W.marginBottom,10))}},[j,N]);const F=W=>{W||D(null)},U=((W=!1)=>{const K=W?M:c.errors,q=W?R:c.warnings;return qie(K,q,c,"",!!u,l)})(),B=he(C,n,r,{[`${C}-with-help`]:A||M.length||R.length,[`${C}-has-feedback`]:U&&u,[`${C}-has-success`]:U==="success",[`${C}-has-warning`]:U==="warning",[`${C}-has-error`]:U==="error",[`${C}-is-validating`]:U==="validating",[`${C}-hidden`]:d,[`${C}-${S}`]:S});return v.createElement("div",{className:B,style:o,ref:T},v.createElement(Fie,Object.assign({className:`${C}-row`},zl(x,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),v.createElement(WLe,Object.assign({htmlFor:h},t,{requiredMark:E,required:g??y,prefixCls:e,vertical:I})),v.createElement(FLe,Object.assign({},t,c,{errors:M,warnings:R,prefixCls:e,status:U,help:i,marginBottom:k,onErrorVisibleChanged:F}),v.createElement(Aoe.Provider,{value:m},v.createElement(Xie,{prefixCls:e,meta:c,errors:c.errors,warnings:c.warnings,hasFeedback:u,validateStatus:U},f)))),!!k&&v.createElement("div",{className:`${C}-margin-offset`,style:{marginBottom:-k}}))}const GLe="__SPLIT__";function XLe(t,e){const n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(o=>{const i=t[o],s=e[o];return i===s||typeof i=="function"||typeof s=="function"})}const YLe=v.memo(({children:t})=>t,(t,e)=>XLe(t.control,e.control)&&t.update===e.update&&t.childProps.length===e.childProps.length&&t.childProps.every((n,r)=>n===e.childProps[r]));function rK(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function QLe(t){const{name:e,noStyle:n,className:r,dependencies:o,prefixCls:i,shouldUpdate:s,rules:a,children:l,required:c,label:u,messageVariables:d,trigger:f="onChange",validateTrigger:h,hidden:g,help:y,layout:m}=t,{getPrefixCls:S}=v.useContext(tr),{name:x}=v.useContext(Id),C=kLe(l),E=typeof C=="function",P=v.useContext(Aoe),{validateTrigger:I}=v.useContext(Gf),T=h!==void 0?h:I,M=e!=null,R=S("form",i),A=Nc(R),[j,N,k]=l5(R,A);Yx();const D=v.useContext(fv),F=v.useRef(null),[H,U]=ALe({}),[B,W]=dv(()=>rK()),K=ne=>{const ee=D==null?void 0:D.getKey(ne.name);if(W(ne.destroy?rK():ne,!0),n&&y!==!1&&P){let re=ne.name;if(ne.destroy)re=F.current||re;else if(ee!==void 0){const[le,ae]=ee;re=[le].concat(it(ae)),F.current=re}P(ne,re)}},q=(ne,ee)=>{U(re=>{const le=Object.assign({},re),ie=[].concat(it(ne.name.slice(0,-1)),it(ee)).join(GLe);return ne.destroy?delete le[ie]:le[ie]=ne,le})},[X,Z]=v.useMemo(()=>{const ne=it(B.errors),ee=it(B.warnings);return Object.values(H).forEach(re=>{ne.push.apply(ne,it(re.errors||[])),ee.push.apply(ee,it(re.warnings||[]))}),[ne,ee]},[H,B.errors,B.warnings]),Y=$Le();function G(ne,ee,re){return n&&!g?v.createElement(Xie,{prefixCls:R,hasFeedback:t.hasFeedback,validateStatus:t.validateStatus,meta:B,errors:X,warnings:Z,noStyle:!0},ne):v.createElement(KLe,Object.assign({key:"row"},t,{className:he(r,k,A,N),prefixCls:R,fieldId:ee,isRequired:re,errors:X,warnings:Z,meta:B,onSubItemMetaChange:q,layout:m}),ne)}if(!M&&!E&&!o)return j(G(C));let J={};return typeof u=="string"?J.label=u:e&&(J.label=String(e)),d&&(J=Object.assign(Object.assign({},J),d)),j(v.createElement(WT,Object.assign({},t,{messageVariables:J,trigger:f,validateTrigger:T,onMetaChange:K}),(ne,ee,re)=>{const le=lS(e).length&&ee?ee.name:[],ae=Vie(le,x),ie=c!==void 0?c:!!(a!=null&&a.some(fe=>{if(fe&&typeof fe=="object"&&fe.required&&!fe.warningOnly)return!0;if(typeof fe=="function"){const ue=fe(re);return(ue==null?void 0:ue.required)&&!(ue!=null&&ue.warningOnly)}return!1})),ge=Object.assign({},ne);let ve=null;if(Array.isArray(C)&&M)ve=C;else if(!(E&&(!(s||o)||M))){if(!(o&&!E&&!M))if(v.isValidElement(C)){const fe=Object.assign(Object.assign({},C.props),ge);if(fe.id||(fe.id=ae),y||X.length>0||Z.length>0||t.extra){const ye=[];(y||X.length>0)&&ye.push(`${ae}_help`),t.extra&&ye.push(`${ae}_extra`),fe["aria-describedby"]=ye.join(" ")}X.length>0&&(fe["aria-invalid"]="true"),ie&&(fe["aria-required"]="true"),ch(C)&&(fe.ref=Y(le,C)),new Set([].concat(it(lS(f)),it(lS(T)))).forEach(ye=>{fe[ye]=(...ke)=>{var Be,Ue,We,Me,$e;(We=ge[ye])===null||We===void 0||(Be=We).call.apply(Be,[ge].concat(ke)),($e=(Me=C.props)[ye])===null||$e===void 0||(Ue=$e).call.apply(Ue,[Me].concat(ke))}});const Ce=[fe["aria-required"],fe["aria-invalid"],fe["aria-describedby"]];ve=v.createElement(YLe,{control:ge,update:C,childProps:Ce},_d(C,fe))}else E&&(s||o)&&!M?ve=C(re):ve=C}return G(ve,ae,ie)}))}const Yie=QLe;Yie.useStatus=Gie;var ZLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const JLe=t=>{var{prefixCls:e,children:n}=t,r=ZLe(t,["prefixCls","children"]);const{getPrefixCls:o}=v.useContext(tr),i=o("form",e),s=v.useMemo(()=>({prefixCls:i,status:"error"}),[i]);return v.createElement(Cz,Object.assign({},r),(a,l,c)=>v.createElement(Uz.Provider,{value:s},n(a.map(u=>Object.assign(Object.assign({},u),{fieldKey:u.key})),l,{errors:c.errors,warnings:c.warnings})))};function eNe(){const{form:t}=v.useContext(Id);return t}const hs=RLe;hs.Item=Yie;hs.List=JLe;hs.ErrorList=Wie;hs.useForm=Kie;hs.useFormInstance=eNe;hs.useWatch=Pz;hs.Provider=$oe;hs.create=()=>{};var tNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},nNe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:tNe}))},rNe=v.forwardRef(nNe);const oNe=t=>{const{getPrefixCls:e,direction:n}=v.useContext(tr),{prefixCls:r,className:o}=t,i=e("input-group",r),s=e("input"),[a,l,c]=kie(s),u=he(i,c,{[`${i}-lg`]:t.size==="large",[`${i}-sm`]:t.size==="small",[`${i}-compact`]:t.compact,[`${i}-rtl`]:n==="rtl"},l,o),d=v.useContext(Qa),f=v.useMemo(()=>Object.assign(Object.assign({},d),{isFormItemInput:!1}),[d]);return a(v.createElement("span",{className:u,style:t.style,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onFocus:t.onFocus,onBlur:t.onBlur},v.createElement(Qa.Provider,{value:f},t.children)))},iNe=t=>{const{componentCls:e,paddingXS:n}=t;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,[`${e}-input-wrapper`]:{position:"relative",[`${e}-mask-icon`]:{position:"absolute",zIndex:"1",top:"50%",right:"50%",transform:"translate(50%, -50%)",pointerEvents:"none"},[`${e}-mask-input`]:{color:"transparent",caretColor:"var(--ant-color-text)"},[`${e}-mask-input[type=number]::-webkit-inner-spin-button`]:{"-webkit-appearance":"none",margin:0},[`${e}-mask-input[type=number]`]:{"-moz-appearance":"textfield"}},"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:t.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:t.calc(t.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:t.paddingXS}}}},sNe=li(["Input","OTP"],t=>{const e=Tr(t,ow(t));return[iNe(e)]},iw);var aNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const lNe=v.forwardRef((t,e)=>{const{className:n,value:r,onChange:o,onActiveChange:i,index:s,mask:a}=t,l=aNe(t,["className","value","onChange","onActiveChange","index","mask"]),{getPrefixCls:c}=v.useContext(tr),u=c("otp"),d=typeof a=="string"?a:r,f=v.useRef(null);v.useImperativeHandle(e,()=>f.current);const h=S=>{o(s,S.target.value)},g=()=>{Sr(()=>{var S;const x=(S=f.current)===null||S===void 0?void 0:S.input;document.activeElement===x&&x&&x.select()})},y=S=>{const{key:x,ctrlKey:C,metaKey:E}=S;x==="ArrowLeft"?i(s-1):x==="ArrowRight"?i(s+1):x==="z"&&(C||E)&&S.preventDefault(),g()},m=S=>{S.key==="Backspace"&&!r&&i(s-1),g()};return v.createElement("span",{className:`${u}-input-wrapper`,role:"presentation"},a&&r!==""&&r!==void 0&&v.createElement("span",{className:`${u}-mask-icon`,"aria-hidden":"true"},d),v.createElement(fM,Object.assign({"aria-label":`OTP Input ${s+1}`,type:a===!0?"password":"text"},l,{ref:f,value:r,onInput:h,onFocus:g,onKeyDown:y,onKeyUp:m,onMouseDown:g,onMouseUp:g,className:he(n,{[`${u}-mask-input`]:a})})))});var cNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function BC(t){return(t||"").split("")}const uNe=t=>{const{index:e,prefixCls:n,separator:r}=t,o=typeof r=="function"?r(e):r;return o?v.createElement("span",{className:`${n}-separator`},o):null},dNe=v.forwardRef((t,e)=>{const{prefixCls:n,length:r=6,size:o,defaultValue:i,value:s,onChange:a,formatter:l,separator:c,variant:u,disabled:d,status:f,autoFocus:h,mask:g,type:y,onInput:m,inputMode:S}=t,x=cNe(t,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:C,direction:E}=v.useContext(tr),P=C("otp",n),I=Xf(x,{aria:!0,data:!0,attr:!0}),[T,M,R]=sNe(P),A=Du(Y=>o??Y),j=v.useContext(Qa),N=aM(j.status,f),k=v.useMemo(()=>Object.assign(Object.assign({},j),{status:N,hasFeedback:!1,feedbackIcon:null}),[j,N]),D=v.useRef(null),F=v.useRef({});v.useImperativeHandle(e,()=>({focus:()=>{var Y;(Y=F.current[0])===null||Y===void 0||Y.focus()},blur:()=>{var Y;for(let G=0;G<r;G+=1)(Y=F.current[G])===null||Y===void 0||Y.blur()},nativeElement:D.current}));const H=Y=>l?l(Y):Y,[U,B]=v.useState(()=>BC(H(i||"")));v.useEffect(()=>{s!==void 0&&B(BC(s))},[s]);const W=Bo(Y=>{B(Y),m&&m(Y),a&&Y.length===r&&Y.every(G=>G)&&Y.some((G,J)=>U[J]!==G)&&a(Y.join(""))}),K=Bo((Y,G)=>{let J=it(U);for(let ee=0;ee<Y;ee+=1)J[ee]||(J[ee]="");G.length<=1?J[Y]=G:J=J.slice(0,Y).concat(BC(G)),J=J.slice(0,r);for(let ee=J.length-1;ee>=0&&!J[ee];ee-=1)J.pop();const ne=H(J.map(ee=>ee||" ").join(""));return J=BC(ne).map((ee,re)=>ee===" "&&!J[re]?J[re]:ee),J}),q=(Y,G)=>{var J;const ne=K(Y,G),ee=Math.min(Y+G.length,r-1);ee!==Y&&ne[Y]!==void 0&&((J=F.current[ee])===null||J===void 0||J.focus()),W(ne)},X=Y=>{var G;(G=F.current[Y])===null||G===void 0||G.focus()},Z={variant:u,disabled:d,status:N,mask:g,type:y,inputMode:S};return T(v.createElement("div",Object.assign({},I,{ref:D,className:he(P,{[`${P}-sm`]:A==="small",[`${P}-lg`]:A==="large",[`${P}-rtl`]:E==="rtl"},R,M),role:"group"}),v.createElement(Qa.Provider,{value:k},Array.from({length:r}).map((Y,G)=>{const J=`otp-${G}`,ne=U[G]||"";return v.createElement(v.Fragment,{key:J},v.createElement(lNe,Object.assign({ref:ee=>{F.current[G]=ee},index:G,size:A,htmlSize:1,className:`${P}-input`,onChange:q,value:ne,onActiveChange:X,autoFocus:G===0&&h},Z)),G<r-1&&v.createElement(uNe,{separator:c,index:G,prefixCls:P}))}))))});var fNe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},hNe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:fNe}))},pNe=v.forwardRef(hNe),gNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const mNe=t=>t?v.createElement(rNe,null):v.createElement(pNe,null),vNe={click:"onClick",hover:"onMouseOver"},yNe=v.forwardRef((t,e)=>{const{disabled:n,action:r="click",visibilityToggle:o=!0,iconRender:i=mNe}=t,s=v.useContext(Pd),a=n??s,l=typeof o=="object"&&o.visible!==void 0,[c,u]=v.useState(()=>l?o.visible:!1),d=v.useRef(null);v.useEffect(()=>{l&&u(o.visible)},[l,o]);const f=Bie(d),h=()=>{var A;if(a)return;c&&f();const j=!c;u(j),typeof o=="object"&&((A=o.onVisibleChange)===null||A===void 0||A.call(o,j))},g=A=>{const j=vNe[r]||"",N=i(c),k={[j]:h,className:`${A}-icon`,key:"passwordIcon",onMouseDown:D=>{D.preventDefault()},onMouseUp:D=>{D.preventDefault()}};return v.cloneElement(v.isValidElement(N)?N:v.createElement("span",null,N),k)},{className:y,prefixCls:m,inputPrefixCls:S,size:x}=t,C=gNe(t,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:E}=v.useContext(tr),P=E("input",S),I=E("input-password",m),T=o&&g(I),M=he(I,y,{[`${I}-${x}`]:!!x}),R=Object.assign(Object.assign({},zl(C,["suffix","iconRender","visibilityToggle"])),{type:c?"text":"password",className:M,prefixCls:P,suffix:T});return x&&(R.size=x),v.createElement(fM,Object.assign({ref:xa(e,d)},R))});var bNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const SNe=v.forwardRef((t,e)=>{const{prefixCls:n,inputPrefixCls:r,className:o,size:i,suffix:s,enterButton:a=!1,addonAfter:l,loading:c,disabled:u,onSearch:d,onChange:f,onCompositionStart:h,onCompositionEnd:g,variant:y,onPressEnter:m}=t,S=bNe(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd","variant","onPressEnter"]),{getPrefixCls:x,direction:C}=v.useContext(tr),E=v.useRef(!1),P=x("input-search",n),I=x("input",r),{compactSize:T}=ew(P,C),M=Du(Z=>{var Y;return(Y=i??T)!==null&&Y!==void 0?Y:Z}),R=v.useRef(null),A=Z=>{Z!=null&&Z.target&&Z.type==="click"&&d&&d(Z.target.value,Z,{source:"clear"}),f==null||f(Z)},j=Z=>{var Y;document.activeElement===((Y=R.current)===null||Y===void 0?void 0:Y.input)&&Z.preventDefault()},N=Z=>{var Y,G;d&&d((G=(Y=R.current)===null||Y===void 0?void 0:Y.input)===null||G===void 0?void 0:G.value,Z,{source:"input"})},k=Z=>{E.current||c||(m==null||m(Z),N(Z))},D=typeof a=="boolean"?v.createElement(cie,null):null,F=`${P}-button`;let H;const U=a||{},B=U.type&&U.type.__ANT_BUTTON===!0;B||U.type==="button"?H=_d(U,Object.assign({onMouseDown:j,onClick:Z=>{var Y,G;(G=(Y=U==null?void 0:U.props)===null||Y===void 0?void 0:Y.onClick)===null||G===void 0||G.call(Y,Z),N(Z)},key:"enterButton"},B?{className:F,size:M}:{})):H=v.createElement(Rl,{className:F,color:a?"primary":"default",size:M,disabled:u,key:"enterButton",onMouseDown:j,onClick:N,loading:c,icon:D,variant:y==="borderless"||y==="filled"||y==="underlined"?"text":a?"solid":void 0},a),l&&(H=[H,_d(l,{key:"addonAfter"})]);const W=he(P,{[`${P}-rtl`]:C==="rtl",[`${P}-${M}`]:!!M,[`${P}-with-button`]:!!a},o),K=Z=>{E.current=!0,h==null||h(Z)},q=Z=>{E.current=!1,g==null||g(Z)},X=Object.assign(Object.assign({},S),{className:W,prefixCls:I,type:"search",size:M,variant:y,onPressEnter:k,onCompositionStart:K,onCompositionEnd:q,addonAfter:H,suffix:s,onChange:A,disabled:u});return v.createElement(fM,Object.assign({ref:xa(R,e)},X))}),xNe=t=>{const{componentCls:e,paddingLG:n}=t,r=`${e}-textarea`;return{[`textarea${e}`]:{maxWidth:"100%",height:"auto",minHeight:t.controlHeight,lineHeight:t.lineHeight,verticalAlign:"bottom",transition:`all ${t.motionDurationSlow}`,resize:"vertical",[`&${e}-mouse-active`]:{transition:`all ${t.motionDurationSlow}, height 0s, width 0s`}},[`${e}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[r]:{position:"relative","&-show-count":{[`${e}-data-count`]:{position:"absolute",bottom:t.calc(t.fontSize).mul(t.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:t.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${r}-has-feedback ${e}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:t.calc(t.controlHeight).sub(t.calc(t.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:t.paddingInline,insetBlockStart:t.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:t.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-rtl`]:{[`${e}-suffix`]:{[`${e}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:t.paddingInlineSM}}}}}},wNe=li(["Input","TextArea"],t=>{const e=Tr(t,ow(t));return[xNe(e)]},iw,{resetFont:!1});var CNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const Qie=v.forwardRef((t,e)=>{var n;const{prefixCls:r,bordered:o=!0,size:i,disabled:s,status:a,allowClear:l,classNames:c,rootClassName:u,className:d,style:f,styles:h,variant:g,showCount:y,onMouseDown:m,onResize:S}=t,x=CNe(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:C,direction:E,allowClear:P,autoComplete:I,className:T,style:M,classNames:R,styles:A}=Bl("textArea"),j=v.useContext(Pd),N=s??j,{status:k,hasFeedback:D,feedbackIcon:F}=v.useContext(Qa),H=aM(k,a),U=v.useRef(null);v.useImperativeHandle(e,()=>{var ue;return{resizableTextArea:(ue=U.current)===null||ue===void 0?void 0:ue.resizableTextArea,focus:Ce=>{var ye,ke;Ore((ke=(ye=U.current)===null||ye===void 0?void 0:ye.resizableTextArea)===null||ke===void 0?void 0:ke.textArea,Ce)},blur:()=>{var Ce;return(Ce=U.current)===null||Ce===void 0?void 0:Ce.blur()}}});const B=C("input",r),W=Nc(B),[K,q,X]=Rie(B,u),[Z]=wNe(B,W),{compactSize:Y,compactItemClassnames:G}=ew(B,E),J=Du(ue=>{var Ce;return(Ce=i??Y)!==null&&Ce!==void 0?Ce:ue}),[ne,ee]=Xz("textArea",g,o),re=zie(l??P),[le,ae]=v.useState(!1),[ie,ge]=v.useState(!1),ve=ue=>{ae(!0),m==null||m(ue);const Ce=()=>{ae(!1),document.removeEventListener("mouseup",Ce)};document.addEventListener("mouseup",Ce)},fe=ue=>{var Ce,ye;if(S==null||S(ue),le&&typeof getComputedStyle=="function"){const ke=(ye=(Ce=U.current)===null||Ce===void 0?void 0:Ce.nativeElement)===null||ye===void 0?void 0:ye.querySelector("textarea");ke&&getComputedStyle(ke).resize==="both"&&ge(!0)}};return K(Z(v.createElement($re,Object.assign({autoComplete:I},x,{style:Object.assign(Object.assign({},M),f),styles:Object.assign(Object.assign({},A),h),disabled:N,allowClear:re,className:he(X,W,d,u,G,T,ie&&`${B}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},c),R),{textarea:he({[`${B}-sm`]:J==="small",[`${B}-lg`]:J==="large"},q,c==null?void 0:c.textarea,R.textarea,le&&`${B}-mouse-active`),variant:he({[`${B}-${ne}`]:ee},D_(B,H)),affixWrapper:he(`${B}-textarea-affix-wrapper`,{[`${B}-affix-wrapper-rtl`]:E==="rtl",[`${B}-affix-wrapper-sm`]:J==="small",[`${B}-affix-wrapper-lg`]:J==="large",[`${B}-textarea-show-count`]:y||((n=t.count)===null||n===void 0?void 0:n.show)},q)}),prefixCls:B,suffix:D&&v.createElement("span",{className:`${B}-textarea-suffix`},F),showCount:y,ref:U,onResize:fe,onMouseDown:ve}))))}),dh=fM;dh.Group=oNe;dh.Search=SNe;dh.TextArea=Qie;dh.Password=yNe;dh.OTP=dNe;var ENe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},PNe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:ENe}))},oK=v.forwardRef(PNe),_Ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},INe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:_Ne}))},iK=v.forwardRef(INe),TNe={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""},MNe=[10,20,50,100],ONe=function(e){var n=e.pageSizeOptions,r=n===void 0?MNe:n,o=e.locale,i=e.changeSize,s=e.pageSize,a=e.goButton,l=e.quickGo,c=e.rootPrefixCls,u=e.disabled,d=e.buildOptionText,f=e.showSizeChanger,h=e.sizeChangerRender,g=ce.useState(""),y=xe(g,2),m=y[0],S=y[1],x=function(){return!m||Number.isNaN(m)?void 0:Number(m)},C=typeof d=="function"?d:function(N){return"".concat(N," ").concat(o.items_per_page)},E=function(k){S(k.target.value)},P=function(k){a||m===""||(S(""),!(k.relatedTarget&&(k.relatedTarget.className.indexOf("".concat(c,"-item-link"))>=0||k.relatedTarget.className.indexOf("".concat(c,"-item"))>=0))&&(l==null||l(x())))},I=function(k){m!==""&&(k.keyCode===It.ENTER||k.type==="click")&&(S(""),l==null||l(x()))},T=function(){return r.some(function(k){return k.toString()===s.toString()})?r:r.concat([s]).sort(function(k,D){var F=Number.isNaN(Number(k))?0:Number(k),H=Number.isNaN(Number(D))?0:Number(D);return F-H})},M="".concat(c,"-options");if(!f&&!l)return null;var R=null,A=null,j=null;return f&&h&&(R=h({disabled:u,size:s,onSizeChange:function(k){i==null||i(Number(k))},"aria-label":o.page_size,className:"".concat(M,"-size-changer"),options:T().map(function(N){return{label:C(N),value:N}})})),l&&(a&&(j=typeof a=="boolean"?ce.createElement("button",{type:"button",onClick:I,onKeyUp:I,disabled:u,className:"".concat(M,"-quick-jumper-button")},o.jump_to_confirm):ce.createElement("span",{onClick:I,onKeyUp:I},a)),A=ce.createElement("div",{className:"".concat(M,"-quick-jumper")},o.jump_to,ce.createElement("input",{disabled:u,type:"text",value:m,onChange:E,onKeyUp:I,onBlur:P,"aria-label":o.page}),o.page,j)),ce.createElement("li",{className:M},R,A)},rb=function(e){var n=e.rootPrefixCls,r=e.page,o=e.active,i=e.className,s=e.showTitle,a=e.onClick,l=e.onKeyPress,c=e.itemRender,u="".concat(n,"-item"),d=he(u,"".concat(u,"-").concat(r),oe(oe({},"".concat(u,"-active"),o),"".concat(u,"-disabled"),!r),i),f=function(){a(r)},h=function(m){l(m,a,r)},g=c(r,"page",ce.createElement("a",{rel:"nofollow"},r));return g?ce.createElement("li",{title:s?String(r):null,className:d,onClick:f,onKeyDown:h,tabIndex:0},g):null},RNe=function(e,n,r){return r};function sK(){}function aK(t){var e=Number(t);return typeof e=="number"&&!Number.isNaN(e)&&isFinite(e)&&Math.floor(e)===e}function ep(t,e,n){var r=typeof t>"u"?e:t;return Math.floor((n-1)/r)+1}var kNe=function(e){var n=e.prefixCls,r=n===void 0?"rc-pagination":n,o=e.selectPrefixCls,i=o===void 0?"rc-select":o,s=e.className,a=e.current,l=e.defaultCurrent,c=l===void 0?1:l,u=e.total,d=u===void 0?0:u,f=e.pageSize,h=e.defaultPageSize,g=h===void 0?10:h,y=e.onChange,m=y===void 0?sK:y,S=e.hideOnSinglePage,x=e.align,C=e.showPrevNextJumpers,E=C===void 0?!0:C,P=e.showQuickJumper,I=e.showLessItems,T=e.showTitle,M=T===void 0?!0:T,R=e.onShowSizeChange,A=R===void 0?sK:R,j=e.locale,N=j===void 0?TNe:j,k=e.style,D=e.totalBoundaryShowSizeChanger,F=D===void 0?50:D,H=e.disabled,U=e.simple,B=e.showTotal,W=e.showSizeChanger,K=W===void 0?d>F:W,q=e.sizeChangerRender,X=e.pageSizeOptions,Z=e.itemRender,Y=Z===void 0?RNe:Z,G=e.jumpPrevIcon,J=e.jumpNextIcon,ne=e.prevIcon,ee=e.nextIcon,re=ce.useRef(null),le=xi(10,{value:f,defaultValue:g}),ae=xe(le,2),ie=ae[0],ge=ae[1],ve=xi(1,{value:a,defaultValue:c,postState:function(Mt){return Math.max(1,Math.min(Mt,ep(void 0,ie,d)))}}),fe=xe(ve,2),ue=fe[0],Ce=fe[1],ye=ce.useState(ue),ke=xe(ye,2),Be=ke[0],Ue=ke[1];v.useEffect(function(){Ue(ue)},[ue]);var We=Math.max(1,ue-(I?3:5)),Me=Math.min(ep(void 0,ie,d),ue+(I?3:5));function $e(_t,Mt){var un=_t||ce.createElement("button",{type:"button","aria-label":Mt,className:"".concat(r,"-item-link")});return typeof _t=="function"&&(un=ce.createElement(_t,de({},e))),un}function Qe(_t){var Mt=_t.target.value,un=ep(void 0,ie,d),In;return Mt===""?In=Mt:Number.isNaN(Number(Mt))?In=Be:Mt>=un?In=un:In=Number(Mt),In}function nt(_t){return aK(_t)&&_t!==ue&&aK(d)&&d>0}var ht=d>ie?P:!1;function ft(_t){(_t.keyCode===It.UP||_t.keyCode===It.DOWN)&&_t.preventDefault()}function et(_t){var Mt=Qe(_t);switch(Mt!==Be&&Ue(Mt),_t.keyCode){case It.ENTER:je(Mt);break;case It.UP:je(Mt-1);break;case It.DOWN:je(Mt+1);break}}function pe(_t){je(Qe(_t))}function Pe(_t){var Mt=ep(_t,ie,d),un=ue>Mt&&Mt!==0?Mt:ue;ge(_t),Ue(un),A==null||A(ue,_t),Ce(un),m==null||m(un,_t)}function je(_t){if(nt(_t)&&!H){var Mt=ep(void 0,ie,d),un=_t;return _t>Mt?un=Mt:_t<1&&(un=1),un!==Be&&Ue(un),Ce(un),m==null||m(un,ie),un}return ue}var Le=ue>1,qe=ue<ep(void 0,ie,d);function at(){Le&&je(ue-1)}function Ae(){qe&&je(ue+1)}function Ne(){je(We)}function xt(){je(Me)}function Pt(_t,Mt){if(_t.key==="Enter"||_t.charCode===It.ENTER||_t.keyCode===It.ENTER){for(var un=arguments.length,In=new Array(un>2?un-2:0),Co=2;Co<un;Co++)In[Co-2]=arguments[Co];Mt.apply(void 0,In)}}function gn(_t){Pt(_t,at)}function Xt(_t){Pt(_t,Ae)}function sn(_t){Pt(_t,Ne)}function Zt(_t){Pt(_t,xt)}function Vt(_t){var Mt=Y(_t,"prev",$e(ne,"prev page"));return ce.isValidElement(Mt)?ce.cloneElement(Mt,{disabled:!Le}):Mt}function an(_t){var Mt=Y(_t,"next",$e(ee,"next page"));return ce.isValidElement(Mt)?ce.cloneElement(Mt,{disabled:!qe}):Mt}function wt(_t){(_t.type==="click"||_t.keyCode===It.ENTER)&&je(Be)}var bt=null,ot=Xf(e,{aria:!0,data:!0}),Xe=B&&ce.createElement("li",{className:"".concat(r,"-total-text")},B(d,[d===0?0:(ue-1)*ie+1,ue*ie>d?d:ue*ie])),qt=null,Tt=ep(void 0,ie,d);if(S&&d<=ie)return null;var Fe=[],Ge={rootPrefixCls:r,onClick:je,onKeyPress:Pt,showTitle:M,itemRender:Y,page:-1},ut=ue-1>0?ue-1:0,St=ue+1<Tt?ue+1:Tt,lt=P&&P.goButton,kt=Wt(U)==="object"?U.readOnly:!U,_n=lt,bn=null;U&&(lt&&(typeof lt=="boolean"?_n=ce.createElement("button",{type:"button",onClick:wt,onKeyUp:wt},N.jump_to_confirm):_n=ce.createElement("span",{onClick:wt,onKeyUp:wt},lt),_n=ce.createElement("li",{title:M?"".concat(N.jump_to).concat(ue,"/").concat(Tt):null,className:"".concat(r,"-simple-pager")},_n)),bn=ce.createElement("li",{title:M?"".concat(ue,"/").concat(Tt):null,className:"".concat(r,"-simple-pager")},kt?Be:ce.createElement("input",{type:"text","aria-label":N.jump_to,value:Be,disabled:H,onKeyDown:ft,onKeyUp:et,onChange:et,onBlur:pe,size:3}),ce.createElement("span",{className:"".concat(r,"-slash")},"/"),Tt));var ln=I?1:2;if(Tt<=3+ln*2){Tt||Fe.push(ce.createElement(rb,vt({},Ge,{key:"noPager",page:1,className:"".concat(r,"-item-disabled")})));for(var en=1;en<=Tt;en+=1)Fe.push(ce.createElement(rb,vt({},Ge,{key:en,page:en,active:ue===en})))}else{var wn=I?N.prev_3:N.prev_5,nr=I?N.next_3:N.next_5,rr=Y(We,"jump-prev",$e(G,"prev page")),ur=Y(Me,"jump-next",$e(J,"next page"));E&&(bt=rr?ce.createElement("li",{title:M?wn:null,key:"prev",onClick:Ne,tabIndex:0,onKeyDown:sn,className:he("".concat(r,"-jump-prev"),oe({},"".concat(r,"-jump-prev-custom-icon"),!!G))},rr):null,qt=ur?ce.createElement("li",{title:M?nr:null,key:"next",onClick:xt,tabIndex:0,onKeyDown:Zt,className:he("".concat(r,"-jump-next"),oe({},"".concat(r,"-jump-next-custom-icon"),!!J))},ur):null);var Nn=Math.max(1,ue-ln),gt=Math.min(ue+ln,Tt);ue-1<=ln&&(gt=1+ln*2),Tt-ue<=ln&&(Nn=Tt-ln*2);for(var De=Nn;De<=gt;De+=1)Fe.push(ce.createElement(rb,vt({},Ge,{key:De,page:De,active:ue===De})));if(ue-1>=ln*2&&ue!==3&&(Fe[0]=ce.cloneElement(Fe[0],{className:he("".concat(r,"-item-after-jump-prev"),Fe[0].props.className)}),Fe.unshift(bt)),Tt-ue>=ln*2&&ue!==Tt-2){var pt=Fe[Fe.length-1];Fe[Fe.length-1]=ce.cloneElement(pt,{className:he("".concat(r,"-item-before-jump-next"),pt.props.className)}),Fe.push(qt)}Nn!==1&&Fe.unshift(ce.createElement(rb,vt({},Ge,{key:1,page:1}))),gt!==Tt&&Fe.push(ce.createElement(rb,vt({},Ge,{key:Tt,page:Tt})))}var yt=Vt(ut);if(yt){var ze=!Le||!Tt;yt=ce.createElement("li",{title:M?N.prev_page:null,onClick:at,tabIndex:ze?null:0,onKeyDown:gn,className:he("".concat(r,"-prev"),oe({},"".concat(r,"-disabled"),ze)),"aria-disabled":ze},yt)}var Nt=an(St);if(Nt){var mn,An;U?(mn=!qe,An=Le?0:null):(mn=!qe||!Tt,An=mn?null:0),Nt=ce.createElement("li",{title:M?N.next_page:null,onClick:Ae,tabIndex:An,onKeyDown:Xt,className:he("".concat(r,"-next"),oe({},"".concat(r,"-disabled"),mn)),"aria-disabled":mn},Nt)}var Qn=he(r,s,oe(oe(oe(oe(oe({},"".concat(r,"-start"),x==="start"),"".concat(r,"-center"),x==="center"),"".concat(r,"-end"),x==="end"),"".concat(r,"-simple"),U),"".concat(r,"-disabled"),H));return ce.createElement("ul",vt({className:Qn,style:k,ref:re},ot),Xe,yt,U?bn:Fe,Nt,ce.createElement(ONe,{locale:N,rootPrefixCls:r,disabled:H,selectPrefixCls:i,changeSize:Pe,pageSize:ie,pageSizeOptions:X,quickGo:ht?je:null,goButton:_n,showSizeChanger:K,sizeChangerRender:q}))};const ANe=t=>{const{componentCls:e}=t;return{[`${e}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}},[`&${e}-disabled`]:{cursor:"not-allowed",[`${e}-item`]:{cursor:"not-allowed",backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"},a:{color:t.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:t.colorBorder,backgroundColor:t.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:t.itemActiveBgDisabled},a:{color:t.itemActiveColorDisabled}}},[`${e}-item-link`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${e}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${e}-simple-pager`]:{color:t.colorTextDisabled},[`${e}-jump-prev, ${e}-jump-next`]:{[`${e}-item-link-icon`]:{opacity:0},[`${e}-item-ellipsis`]:{opacity:1}}},[`&${e}-simple`]:{[`${e}-prev, ${e}-next`]:{[`&${e}-disabled ${e}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},$Ne=t=>{const{componentCls:e}=t;return{[`&${e}-mini ${e}-total-text, &${e}-mini ${e}-simple-pager`]:{height:t.itemSizeSM,lineHeight:Re(t.itemSizeSM)},[`&${e}-mini ${e}-item`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:Re(t.calc(t.itemSizeSM).sub(2).equal())},[`&${e}-mini ${e}-prev, &${e}-mini ${e}-next`]:{minWidth:t.itemSizeSM,height:t.itemSizeSM,margin:0,lineHeight:Re(t.itemSizeSM)},[`&${e}-mini:not(${e}-disabled)`]:{[`${e}-prev, ${e}-next`]:{[`&:hover ${e}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${e}-disabled:hover ${e}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${e}-mini ${e}-prev ${e}-item-link,
    &${e}-mini ${e}-next ${e}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:t.itemSizeSM,lineHeight:Re(t.itemSizeSM)}},[`&${e}-mini ${e}-jump-prev, &${e}-mini ${e}-jump-next`]:{height:t.itemSizeSM,marginInlineEnd:0,lineHeight:Re(t.itemSizeSM)},[`&${e}-mini ${e}-options`]:{marginInlineStart:t.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:t.miniOptionsSizeChangerTop},"&-quick-jumper":{height:t.itemSizeSM,lineHeight:Re(t.itemSizeSM),input:Object.assign(Object.assign({},o5(t)),{width:t.paginationMiniQuickJumperInputWidth,height:t.controlHeightSM})}}}},DNe=t=>{const{componentCls:e}=t;return{[`
    &${e}-simple ${e}-prev,
    &${e}-simple ${e}-next
    `]:{height:t.itemSizeSM,lineHeight:Re(t.itemSizeSM),verticalAlign:"top",[`${e}-item-link`]:{height:t.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive},"&::after":{height:t.itemSizeSM,lineHeight:Re(t.itemSizeSM)}}},[`&${e}-simple ${e}-simple-pager`]:{display:"inline-block",height:t.itemSizeSM,marginInlineEnd:t.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${Re(t.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:t.itemInputBg,border:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:t.borderRadius,outline:"none",transition:`border-color ${t.motionDurationMid}`,color:"inherit","&:hover":{borderColor:t.colorPrimary},"&:focus":{borderColor:t.colorPrimaryHover,boxShadow:`${Re(t.inputOutlineOffset)} 0 ${Re(t.controlOutlineWidth)} ${t.controlOutline}`},"&[disabled]":{color:t.colorTextDisabled,backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,cursor:"not-allowed"}}}}},jNe=t=>{const{componentCls:e}=t;return{[`${e}-jump-prev, ${e}-jump-next`]:{outline:0,[`${e}-item-container`]:{position:"relative",[`${e}-item-link-icon`]:{color:t.colorPrimary,fontSize:t.fontSizeSM,opacity:0,transition:`all ${t.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${e}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:t.colorTextDisabled,letterSpacing:t.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:t.paginationEllipsisTextIndent,opacity:1,transition:`all ${t.motionDurationMid}`}},"&:hover":{[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}}},[`
    ${e}-prev,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{marginInlineEnd:t.marginXS},[`
    ${e}-prev,
    ${e}-next,
    ${e}-jump-prev,
    ${e}-jump-next
    `]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,color:t.colorText,fontFamily:t.fontFamily,lineHeight:Re(t.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}`},[`${e}-prev, ${e}-next`]:{outline:0,button:{color:t.colorText,cursor:"pointer",userSelect:"none"},[`${e}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:t.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${Re(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:"none",transition:`all ${t.motionDurationMid}`},[`&:hover ${e}-item-link`]:{backgroundColor:t.colorBgTextHover},[`&:active ${e}-item-link`]:{backgroundColor:t.colorBgTextActive},[`&${e}-disabled:hover`]:{[`${e}-item-link`]:{backgroundColor:"transparent"}}},[`${e}-slash`]:{marginInlineEnd:t.paginationSlashMarginInlineEnd,marginInlineStart:t.paginationSlashMarginInlineStart},[`${e}-options`]:{display:"inline-block",marginInlineStart:t.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:t.controlHeight,marginInlineStart:t.marginXS,lineHeight:Re(t.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},i5(t)),r5(t,{borderColor:t.colorBorder,hoverBorderColor:t.colorPrimaryHover,activeBorderColor:t.colorPrimary,activeShadow:t.activeShadow})),{"&[disabled]":Object.assign({},uM(t)),width:t.calc(t.controlHeightLG).mul(1.25).equal(),height:t.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:t.marginXS,marginInlineEnd:t.marginXS})}}}},LNe=t=>{const{componentCls:e}=t;return{[`${e}-item`]:{display:"inline-block",minWidth:t.itemSize,height:t.itemSize,marginInlineEnd:t.marginXS,fontFamily:t.fontFamily,lineHeight:Re(t.calc(t.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:t.itemBg,border:`${Re(t.lineWidth)} ${t.lineType} transparent`,borderRadius:t.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${Re(t.paginationItemPaddingInline)}`,color:t.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${e}-item-active)`]:{"&:hover":{transition:`all ${t.motionDurationMid}`,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},"&-active":{fontWeight:t.fontWeightStrong,backgroundColor:t.itemActiveBg,borderColor:t.colorPrimary,a:{color:t.colorPrimary},"&:hover":{borderColor:t.colorPrimaryHover},"&:hover a":{color:t.colorPrimaryHover}}}}},NNe=t=>{const{componentCls:e}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},xs(t)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${e}-total-text`]:{display:"inline-block",height:t.itemSize,marginInlineEnd:t.marginXS,lineHeight:Re(t.calc(t.itemSize).sub(2).equal()),verticalAlign:"middle"}}),LNe(t)),jNe(t)),DNe(t)),$Ne(t)),ANe(t)),{[`@media only screen and (max-width: ${t.screenLG}px)`]:{[`${e}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${t.screenSM}px)`]:{[`${e}-options`]:{display:"none"}}}),[`&${t.componentCls}-rtl`]:{direction:"rtl"}}},FNe=t=>{const{componentCls:e}=t;return{[`${e}:not(${e}-disabled)`]:{[`${e}-item`]:Object.assign({},Fp(t)),[`${e}-jump-prev, ${e}-jump-next`]:{"&:focus-visible":Object.assign({[`${e}-item-link-icon`]:{opacity:1},[`${e}-item-ellipsis`]:{opacity:0}},XS(t))},[`${e}-prev, ${e}-next`]:{[`&:focus-visible ${e}-item-link`]:Object.assign({},XS(t))}}}},Zie=t=>Object.assign({itemBg:t.colorBgContainer,itemSize:t.controlHeight,itemSizeSM:t.controlHeightSM,itemActiveBg:t.colorBgContainer,itemLinkBg:t.colorBgContainer,itemActiveColorDisabled:t.colorTextDisabled,itemActiveBgDisabled:t.controlItemBgActiveDisabled,itemInputBg:t.colorBgContainer,miniOptionsSizeChangerTop:0},iw(t)),Jie=t=>Tr(t,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:t.calc(t.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:t.calc(t.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:t.calc(t.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:t.calc(t.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:t.marginSM,paginationSlashMarginInlineEnd:t.marginSM,paginationEllipsisTextIndent:"0.13em"},ow(t)),zNe=li("Pagination",t=>{const e=Jie(t);return[NNe(e),FNe(e)]},Zie),BNe=t=>{const{componentCls:e}=t;return{[`${e}${e}-bordered${e}-disabled:not(${e}-mini)`]:{"&, &:hover":{[`${e}-item-link`]:{borderColor:t.colorBorder}},"&:focus-visible":{[`${e}-item-link`]:{borderColor:t.colorBorder}},[`${e}-item, ${e}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,[`&:hover:not(${e}-item-active)`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,a:{color:t.colorTextDisabled}},[`&${e}-item-active`]:{backgroundColor:t.itemActiveBgDisabled}},[`${e}-prev, ${e}-next`]:{"&:hover button":{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder,color:t.colorTextDisabled},[`${e}-item-link`]:{backgroundColor:t.colorBgContainerDisabled,borderColor:t.colorBorder}}},[`${e}${e}-bordered:not(${e}-mini)`]:{[`${e}-prev, ${e}-next`]:{"&:hover button":{borderColor:t.colorPrimaryHover,backgroundColor:t.itemBg},[`${e}-item-link`]:{backgroundColor:t.itemLinkBg,borderColor:t.colorBorder},[`&:hover ${e}-item-link`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,color:t.colorPrimary},[`&${e}-disabled`]:{[`${e}-item-link`]:{borderColor:t.colorBorder,color:t.colorTextDisabled}}},[`${e}-item`]:{backgroundColor:t.itemBg,border:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,[`&:hover:not(${e}-item-active)`]:{borderColor:t.colorPrimary,backgroundColor:t.itemBg,a:{color:t.colorPrimary}},"&-active":{borderColor:t.colorPrimary}}}}},HNe=YT(["Pagination","bordered"],t=>{const e=Jie(t);return[BNe(e)]},Zie);function lK(t){return v.useMemo(()=>typeof t=="boolean"?[t,{}]:t&&typeof t=="object"?[!0,t]:[void 0,void 0],[t])}var UNe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const WNe=t=>{const{align:e,prefixCls:n,selectPrefixCls:r,className:o,rootClassName:i,style:s,size:a,locale:l,responsive:c,showSizeChanger:u,selectComponentClass:d,pageSizeOptions:f}=t,h=UNe(t,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:g}=Yz(c),[,y]=wa(),{getPrefixCls:m,direction:S,showSizeChanger:x,className:C,style:E}=Bl("pagination"),P=m("pagination",n),[I,T,M]=zNe(P),R=Du(a),A=R==="small"||!!(g&&!R&&c),[j]=Vv("Pagination",Vre),N=Object.assign(Object.assign({},j),l),[k,D]=lK(u),[F,H]=lK(x),U=k??F,B=D??H,W=d||Gv,K=v.useMemo(()=>f?f.map(J=>Number(J)):void 0,[f]),q=J=>{var ne;const{disabled:ee,size:re,onSizeChange:le,"aria-label":ae,className:ie,options:ge}=J,{className:ve,onChange:fe}=B||{},ue=(ne=ge.find(Ce=>String(Ce.value)===String(re)))===null||ne===void 0?void 0:ne.value;return v.createElement(W,Object.assign({disabled:ee,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:Ce=>Ce.parentNode,"aria-label":ae,options:ge},B,{value:ue,onChange:(Ce,ye)=>{le==null||le(Ce),fe==null||fe(Ce,ye)},size:A?"small":"middle",className:he(ie,ve)}))},X=v.useMemo(()=>{const J=v.createElement("span",{className:`${P}-item-ellipsis`},""),ne=v.createElement("button",{className:`${P}-item-link`,type:"button",tabIndex:-1},S==="rtl"?v.createElement(sq,null):v.createElement(Mq,null)),ee=v.createElement("button",{className:`${P}-item-link`,type:"button",tabIndex:-1},S==="rtl"?v.createElement(Mq,null):v.createElement(sq,null)),re=v.createElement("a",{className:`${P}-item-link`},v.createElement("div",{className:`${P}-item-container`},S==="rtl"?v.createElement(iK,{className:`${P}-item-link-icon`}):v.createElement(oK,{className:`${P}-item-link-icon`}),J)),le=v.createElement("a",{className:`${P}-item-link`},v.createElement("div",{className:`${P}-item-container`},S==="rtl"?v.createElement(oK,{className:`${P}-item-link-icon`}):v.createElement(iK,{className:`${P}-item-link-icon`}),J));return{prevIcon:ne,nextIcon:ee,jumpPrevIcon:re,jumpNextIcon:le}},[S,P]),Z=m("select",r),Y=he({[`${P}-${e}`]:!!e,[`${P}-mini`]:A,[`${P}-rtl`]:S==="rtl",[`${P}-bordered`]:y.wireframe},C,o,i,T,M),G=Object.assign(Object.assign({},E),s);return I(v.createElement(v.Fragment,null,y.wireframe&&v.createElement(HNe,{prefixCls:P}),v.createElement(kNe,Object.assign({},X,h,{style:G,prefixCls:P,selectPrefixCls:Z,className:Y,locale:N,pageSizeOptions:K,showSizeChanger:U,sizeChangerRender:q}))))},N_=100,ese=N_/5,tse=N_/2-ese/2,Xk=tse*2*Math.PI,cK=50,uK=t=>{const{dotClassName:e,style:n,hasCircleCls:r}=t;return v.createElement("circle",{className:he(`${e}-circle`,{[`${e}-circle-bg`]:r}),r:tse,cx:cK,cy:cK,strokeWidth:ese,style:n})},VNe=({percent:t,prefixCls:e})=>{const n=`${e}-dot`,r=`${n}-holder`,o=`${r}-hidden`,[i,s]=v.useState(!1);lr(()=>{t!==0&&s(!0)},[t!==0]);const a=Math.max(Math.min(t,100),0);if(!i)return null;const l={strokeDashoffset:`${Xk/4}`,strokeDasharray:`${Xk*a/100} ${Xk*(100-a)/100}`};return v.createElement("span",{className:he(r,`${n}-progress`,a<=0&&o)},v.createElement("svg",{viewBox:`0 0 ${N_} ${N_}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":a},v.createElement(uK,{dotClassName:n,hasCircleCls:!0}),v.createElement(uK,{dotClassName:n,style:l})))};function qNe(t){const{prefixCls:e,percent:n=0}=t,r=`${e}-dot`,o=`${r}-holder`,i=`${o}-hidden`;return v.createElement(v.Fragment,null,v.createElement("span",{className:he(o,n>0&&i)},v.createElement("span",{className:he(r,`${e}-dot-spin`)},[1,2,3,4].map(s=>v.createElement("i",{className:`${e}-dot-item`,key:s})))),v.createElement(VNe,{prefixCls:e,percent:n}))}function KNe(t){const{prefixCls:e,indicator:n,percent:r}=t,o=`${e}-dot`;return n&&v.isValidElement(n)?_d(n,{className:he(n.props.className,o),percent:r}):v.createElement(qNe,{prefixCls:e,percent:r})}const GNe=new Yn("antSpinMove",{to:{opacity:1}}),XNe=new Yn("antRotate",{to:{transform:"rotate(405deg)"}}),YNe=t=>{const{componentCls:e,calc:n}=t;return{[e]:Object.assign(Object.assign({},xs(t)),{position:"absolute",display:"none",color:t.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${t.motionDurationSlow} ${t.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:t.fontSize,paddingTop:n(n(t.dotSize).sub(t.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:t.colorBgMask,zIndex:t.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${t.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:t.colorWhite},[`${e}-text`]:{color:t.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:t.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(t.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${t.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:n(t.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:n(n(t.dotSizeSM).sub(t.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:n(t.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:n(n(t.dotSizeLG).sub(t.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:n(t.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${t.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:t.colorBgContainer,opacity:0,transition:`all ${t.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:t.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:t.dotSize,display:"inline-block",transition:`transform ${t.motionDurationSlow} ease, opacity ${t.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:t.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",inset:0},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:t.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(t.dotSize).sub(n(t.marginXXS).div(2)).div(2).equal(),height:n(t.dotSize).sub(n(t.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:GNe,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:XNe,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(r=>`${r} ${t.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:t.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:t.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:n(n(t.dotSizeSM).sub(n(t.marginXXS).div(2))).div(2).equal(),height:n(n(t.dotSizeSM).sub(n(t.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:t.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:n(n(t.dotSizeLG).sub(t.marginXXS)).div(2).equal(),height:n(n(t.dotSizeLG).sub(t.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}},QNe=t=>{const{controlHeightLG:e,controlHeight:n}=t;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:n}},ZNe=li("Spin",t=>{const e=Tr(t,{spinDotDefault:t.colorTextDescription});return[YNe(e)]},QNe),JNe=200,dK=[[30,.05],[70,.03],[96,.01]];function eFe(t,e){const[n,r]=v.useState(0),o=v.useRef(null),i=e==="auto";return v.useEffect(()=>(i&&t&&(r(0),o.current=setInterval(()=>{r(s=>{const a=100-s;for(let l=0;l<dK.length;l+=1){const[c,u]=dK[l];if(s<=c)return s+a*u}return s})},JNe)),()=>{clearInterval(o.current)}),[i,t]),i?n:e}var tFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};let nse;function nFe(t,e){return!!t&&!!e&&!Number.isNaN(Number(e))}const hM=t=>{var e;const{prefixCls:n,spinning:r=!0,delay:o=0,className:i,rootClassName:s,size:a="default",tip:l,wrapperClassName:c,style:u,children:d,fullscreen:f=!1,indicator:h,percent:g}=t,y=tFe(t,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:m,direction:S,className:x,style:C,indicator:E}=Bl("spin"),P=m("spin",n),[I,T,M]=ZNe(P),[R,A]=v.useState(()=>r&&!nFe(r,o)),j=eFe(R,g);v.useEffect(()=>{if(r){const B=uLe(o,()=>{A(!0)});return B(),()=>{var W;(W=B==null?void 0:B.cancel)===null||W===void 0||W.call(B)}}A(!1)},[o,r]);const N=v.useMemo(()=>typeof d<"u"&&!f,[d,f]),k=he(P,x,{[`${P}-sm`]:a==="small",[`${P}-lg`]:a==="large",[`${P}-spinning`]:R,[`${P}-show-text`]:!!l,[`${P}-rtl`]:S==="rtl"},i,!f&&s,T,M),D=he(`${P}-container`,{[`${P}-blur`]:R}),F=(e=h??E)!==null&&e!==void 0?e:nse,H=Object.assign(Object.assign({},C),u),U=v.createElement("div",Object.assign({},y,{style:H,className:k,"aria-live":"polite","aria-busy":R}),v.createElement(KNe,{prefixCls:P,indicator:F,percent:j}),l&&(N||f)?v.createElement("div",{className:`${P}-text`},l):null);return I(N?v.createElement("div",Object.assign({},y,{className:he(`${P}-nested-loading`,c,T,M)}),R&&v.createElement("div",{key:"loading"},U),v.createElement("div",{className:D,key:"container"},d)):f?v.createElement("div",{className:he(`${P}-fullscreen`,{[`${P}-fullscreen-show`]:R},s,T,M)},U):U)};hM.setDefaultIndicator=t=>{nse=t};const c5=ce.createContext({});c5.Consumer;var rse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const rFe=t=>{var{prefixCls:e,className:n,avatar:r,title:o,description:i}=t,s=rse(t,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:a}=v.useContext(tr),l=a("list",e),c=he(`${l}-item-meta`,n),u=ce.createElement("div",{className:`${l}-item-meta-content`},o&&ce.createElement("h4",{className:`${l}-item-meta-title`},o),i&&ce.createElement("div",{className:`${l}-item-meta-description`},i));return ce.createElement("div",Object.assign({},s,{className:c}),r&&ce.createElement("div",{className:`${l}-item-meta-avatar`},r),(o||i)&&u)},oFe=ce.forwardRef((t,e)=>{const{prefixCls:n,children:r,actions:o,extra:i,styles:s,className:a,classNames:l,colStyle:c}=t,u=rse(t,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:d,itemLayout:f}=v.useContext(c5),{getPrefixCls:h,list:g}=v.useContext(tr),y=T=>{var M,R;return he((R=(M=g==null?void 0:g.item)===null||M===void 0?void 0:M.classNames)===null||R===void 0?void 0:R[T],l==null?void 0:l[T])},m=T=>{var M,R;return Object.assign(Object.assign({},(R=(M=g==null?void 0:g.item)===null||M===void 0?void 0:M.styles)===null||R===void 0?void 0:R[T]),s==null?void 0:s[T])},S=()=>{let T=!1;return v.Children.forEach(r,M=>{typeof M=="string"&&(T=!0)}),T&&v.Children.count(r)>1},x=()=>f==="vertical"?!!i:!S(),C=h("list",n),E=o&&o.length>0&&ce.createElement("ul",{className:he(`${C}-item-action`,y("actions")),key:"actions",style:m("actions")},o.map((T,M)=>ce.createElement("li",{key:`${C}-item-action-${M}`},T,M!==o.length-1&&ce.createElement("em",{className:`${C}-item-action-split`})))),P=d?"div":"li",I=ce.createElement(P,Object.assign({},u,d?{}:{ref:e},{className:he(`${C}-item`,{[`${C}-item-no-flex`]:!x()},a)}),f==="vertical"&&i?[ce.createElement("div",{className:`${C}-item-main`,key:"content"},r,E),ce.createElement("div",{className:he(`${C}-item-extra`,y("extra")),key:"extra",style:m("extra")},i)]:[r,E,_d(i,{key:"extra"})]);return d?ce.createElement(a5,{ref:e,flex:1,style:c},I):I}),ose=oFe;ose.Meta=rFe;const iFe=t=>{const{listBorderedCls:e,componentCls:n,paddingLG:r,margin:o,itemPaddingSM:i,itemPaddingLG:s,marginLG:a,borderRadiusLG:l}=t;return{[e]:{border:`${Re(t.lineWidth)} ${t.lineType} ${t.colorBorder}`,borderRadius:l,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${Re(o)} ${Re(a)}`}},[`${e}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:i}},[`${e}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:s}}}},sFe=t=>{const{componentCls:e,screenSM:n,screenMD:r,marginLG:o,marginSM:i,margin:s}=t;return{[`@media screen and (max-width:${r}px)`]:{[e]:{[`${e}-item`]:{[`${e}-item-action`]:{marginInlineStart:o}}},[`${e}-vertical`]:{[`${e}-item`]:{[`${e}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n}px)`]:{[e]:{[`${e}-item`]:{flexWrap:"wrap",[`${e}-action`]:{marginInlineStart:i}}},[`${e}-vertical`]:{[`${e}-item`]:{flexWrap:"wrap-reverse",[`${e}-item-main`]:{minWidth:t.contentWidth},[`${e}-item-extra`]:{margin:`auto auto ${Re(s)}`}}}}}},aFe=t=>{const{componentCls:e,antCls:n,controlHeight:r,minHeight:o,paddingSM:i,marginLG:s,padding:a,itemPadding:l,colorPrimary:c,itemPaddingSM:u,itemPaddingLG:d,paddingXS:f,margin:h,colorText:g,colorTextDescription:y,motionDurationSlow:m,lineWidth:S,headerBg:x,footerBg:C,emptyTextPadding:E,metaMarginBottom:P,avatarMarginRight:I,titleMarginBottom:T,descriptionFontSize:M}=t;return{[e]:Object.assign(Object.assign({},xs(t)),{position:"relative","*":{outline:"none"},[`${e}-header`]:{background:x},[`${e}-footer`]:{background:C},[`${e}-header, ${e}-footer`]:{paddingBlock:i},[`${e}-pagination`]:{marginBlockStart:s,[`${n}-pagination-options`]:{textAlign:"start"}},[`${e}-spin`]:{minHeight:o,textAlign:"center"},[`${e}-items`]:{margin:0,padding:0,listStyle:"none"},[`${e}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:l,color:g,[`${e}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${e}-item-meta-avatar`]:{marginInlineEnd:I},[`${e}-item-meta-content`]:{flex:"1 0",width:0,color:g},[`${e}-item-meta-title`]:{margin:`0 0 ${Re(t.marginXXS)} 0`,color:g,fontSize:t.fontSize,lineHeight:t.lineHeight,"> a":{color:g,transition:`all ${m}`,"&:hover":{color:c}}},[`${e}-item-meta-description`]:{color:y,fontSize:M,lineHeight:t.lineHeight}},[`${e}-item-action`]:{flex:"0 0 auto",marginInlineStart:t.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${Re(f)}`,color:y,fontSize:t.fontSize,lineHeight:t.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${e}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:S,height:t.calc(t.fontHeight).sub(t.calc(t.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:t.colorSplit}}},[`${e}-empty`]:{padding:`${Re(a)} 0`,color:y,fontSize:t.fontSizeSM,textAlign:"center"},[`${e}-empty-text`]:{padding:E,color:t.colorTextDisabled,fontSize:t.fontSize,textAlign:"center"},[`${e}-item-no-flex`]:{display:"block"}}),[`${e}-grid ${n}-col > ${e}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"},[`${e}-vertical ${e}-item`]:{alignItems:"initial",[`${e}-item-main`]:{display:"block",flex:1},[`${e}-item-extra`]:{marginInlineStart:s},[`${e}-item-meta`]:{marginBlockEnd:P,[`${e}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:T,color:g,fontSize:t.fontSizeLG,lineHeight:t.lineHeightLG}},[`${e}-item-action`]:{marginBlockStart:a,marginInlineStart:"auto","> li":{padding:`0 ${Re(a)}`,"&:first-child":{paddingInlineStart:0}}}},[`${e}-split ${e}-item`]:{borderBlockEnd:`${Re(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${e}-split ${e}-header`]:{borderBlockEnd:`${Re(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-split${e}-empty ${e}-footer`]:{borderTop:`${Re(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-loading ${e}-spin-nested-loading`]:{minHeight:r},[`${e}-split${e}-something-after-last-item ${n}-spin-container > ${e}-items > ${e}-item:last-child`]:{borderBlockEnd:`${Re(t.lineWidth)} ${t.lineType} ${t.colorSplit}`},[`${e}-lg ${e}-item`]:{padding:d},[`${e}-sm ${e}-item`]:{padding:u},[`${e}:not(${e}-vertical)`]:{[`${e}-item-no-flex`]:{[`${e}-item-action`]:{float:"right"}}}}},lFe=t=>({contentWidth:220,itemPadding:`${Re(t.paddingContentVertical)} 0`,itemPaddingSM:`${Re(t.paddingContentVerticalSM)} ${Re(t.paddingContentHorizontal)}`,itemPaddingLG:`${Re(t.paddingContentVerticalLG)} ${Re(t.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:t.padding,metaMarginBottom:t.padding,avatarMarginRight:t.padding,titleMarginBottom:t.paddingSM,descriptionFontSize:t.fontSize}),cFe=li("List",t=>{const e=Tr(t,{listBorderedCls:`${t.componentCls}-bordered`,minHeight:t.controlHeightLG});return[aFe(e),iFe(e),sFe(e)]},lFe);var uFe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function dFe(t,e){const{pagination:n=!1,prefixCls:r,bordered:o=!1,split:i=!0,className:s,rootClassName:a,style:l,children:c,itemLayout:u,loadMore:d,grid:f,dataSource:h=[],size:g,header:y,footer:m,loading:S=!1,rowKey:x,renderItem:C,locale:E}=t,P=uFe(t,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),I=n&&typeof n=="object"?n:{},[T,M]=v.useState(I.defaultCurrent||1),[R,A]=v.useState(I.defaultPageSize||10),{getPrefixCls:j,direction:N,className:k,style:D}=Bl("list"),{renderEmpty:F}=v.useContext(tr),H={current:1,total:0,position:"bottom"},U=We=>(Me,$e)=>{var Qe;M(Me),A($e),n&&((Qe=n==null?void 0:n[We])===null||Qe===void 0||Qe.call(n,Me,$e))},B=U("onChange"),W=U("onShowSizeChange"),K=(We,Me)=>{if(!C)return null;let $e;return typeof x=="function"?$e=x(We):x?$e=We[x]:$e=We.key,$e||($e=`list-item-${Me}`),v.createElement(v.Fragment,{key:$e},C(We,Me))},q=!!(d||n||m),X=j("list",r),[Z,Y,G]=cFe(X);let J=S;typeof J=="boolean"&&(J={spinning:J});const ne=!!(J!=null&&J.spinning),ee=Du(g);let re="";switch(ee){case"large":re="lg";break;case"small":re="sm";break}const le=he(X,{[`${X}-vertical`]:u==="vertical",[`${X}-${re}`]:re,[`${X}-split`]:i,[`${X}-bordered`]:o,[`${X}-loading`]:ne,[`${X}-grid`]:!!f,[`${X}-something-after-last-item`]:q,[`${X}-rtl`]:N==="rtl"},k,s,a,Y,G),ae=fke(H,{total:h.length,current:T,pageSize:R},n||{}),ie=Math.ceil(ae.total/ae.pageSize);ae.current=Math.min(ae.current,ie);const ge=n&&v.createElement("div",{className:he(`${X}-pagination`)},v.createElement(WNe,Object.assign({align:"end"},ae,{onChange:B,onShowSizeChange:W})));let ve=it(h);n&&h.length>(ae.current-1)*ae.pageSize&&(ve=it(h).splice((ae.current-1)*ae.pageSize,ae.pageSize));const fe=Object.keys(f||{}).some(We=>["xs","sm","md","lg","xl","xxl"].includes(We)),ue=Yz(fe),Ce=v.useMemo(()=>{for(let We=0;We<zp.length;We+=1){const Me=zp[We];if(ue[Me])return Me}},[ue]),ye=v.useMemo(()=>{if(!f)return;const We=Ce&&f[Ce]?f[Ce]:f.column;if(We)return{width:`${100/We}%`,maxWidth:`${100/We}%`}},[JSON.stringify(f),Ce]);let ke=ne&&v.createElement("div",{style:{minHeight:53}});if(ve.length>0){const We=ve.map(K);ke=f?v.createElement(Fie,{gutter:f.gutter},v.Children.map(We,Me=>v.createElement("div",{key:Me==null?void 0:Me.key,style:ye},Me))):v.createElement("ul",{className:`${X}-items`},We)}else!c&&!ne&&(ke=v.createElement("div",{className:`${X}-empty-text`},(E==null?void 0:E.emptyText)||(F==null?void 0:F("List"))||v.createElement(oie,{componentName:"List"})));const Be=ae.position,Ue=v.useMemo(()=>({grid:f,itemLayout:u}),[JSON.stringify(f),u]);return Z(v.createElement(c5.Provider,{value:Ue},v.createElement("div",Object.assign({ref:e,style:Object.assign(Object.assign({},D),l),className:le},P),(Be==="top"||Be==="both")&&ge,y&&v.createElement("div",{className:`${X}-header`},y),v.createElement(hM,Object.assign({},J),ke,c),m&&v.createElement("div",{className:`${X}-footer`},m),d||(Be==="bottom"||Be==="both")&&ge)))}const fFe=v.forwardRef(dFe),Cp=fFe;Cp.Item=ose;const hFe=(t,e=!1)=>e&&t==null?[]:Array.isArray(t)?t:[t];let bl=null,pp=t=>t(),JS=[],ex={};function fK(){const{getContainer:t,duration:e,rtl:n,maxCount:r,top:o}=ex,i=(t==null?void 0:t())||document.body;return{getContainer:()=>i,duration:e,rtl:n,maxCount:r,top:o}}const pFe=ce.forwardRef((t,e)=>{const{messageConfig:n,sync:r}=t,{getPrefixCls:o}=v.useContext(tr),i=ex.prefixCls||o("message"),s=v.useContext(Hoe),[a,l]=woe(Object.assign(Object.assign(Object.assign({},n),{prefixCls:i}),s.message));return ce.useImperativeHandle(e,()=>{const c=Object.assign({},a);return Object.keys(c).forEach(u=>{c[u]=(...d)=>(r(),a[u].apply(a,d))}),{instance:c,sync:r}}),l}),gFe=ce.forwardRef((t,e)=>{const[n,r]=ce.useState(fK),o=()=>{r(fK)};ce.useEffect(o,[]);const i=ioe(),s=i.getRootPrefixCls(),a=i.getIconPrefixCls(),l=i.getTheme(),c=ce.createElement(pFe,{ref:e,sync:o,messageConfig:n});return ce.createElement(uh,{prefixCls:s,iconPrefixCls:a,theme:l},i.holderRender?i.holderRender(c):c)});function pM(){if(!bl){const t=document.createDocumentFragment(),e={fragment:t};bl=e,pp(()=>{Lz()(ce.createElement(gFe,{ref:r=>{const{instance:o,sync:i}=r||{};Promise.resolve().then(()=>{!e.instance&&o&&(e.instance=o,e.sync=i,pM())})}}),t)});return}bl.instance&&(JS.forEach(t=>{const{type:e,skipped:n}=t;if(!n)switch(e){case"open":{pp(()=>{const r=bl.instance.open(Object.assign(Object.assign({},ex),t.config));r==null||r.then(t.resolve),t.setCloseFn(r)});break}case"destroy":pp(()=>{bl==null||bl.instance.destroy(t.key)});break;default:pp(()=>{var r;const o=(r=bl.instance)[e].apply(r,it(t.args));o==null||o.then(t.resolve),t.setCloseFn(o)})}}),JS=[])}function mFe(t){ex=Object.assign(Object.assign({},ex),t),pp(()=>{var e;(e=bl==null?void 0:bl.sync)===null||e===void 0||e.call(bl)})}function vFe(t){const e=jz(n=>{let r;const o={type:"open",config:t,resolve:n,setCloseFn:i=>{r=i}};return JS.push(o),()=>{r?pp(()=>{r()}):o.skipped=!0}});return pM(),e}function yFe(t,e){const n=jz(r=>{let o;const i={type:t,args:e,resolve:r,setCloseFn:s=>{o=s}};return JS.push(i),()=>{o?pp(()=>{o()}):i.skipped=!0}});return pM(),n}const bFe=t=>{JS.push({type:"destroy",key:t}),pM()},SFe=["success","info","warning","error","loading"],xFe={open:vFe,destroy:bFe,config:mFe,useMessage:POe,_InternalPanelDoNotUseOrYouWillBeFired:vOe},_N=xFe;SFe.forEach(t=>{_N[t]=(...e)=>yFe(t,e)});let ac=null,lP=t=>t(),F_=[],tx={};function hK(){const{getContainer:t,rtl:e,maxCount:n,top:r,bottom:o,showProgress:i,pauseOnHover:s}=tx,a=(t==null?void 0:t())||document.body;return{getContainer:()=>a,rtl:e,maxCount:n,top:r,bottom:o,showProgress:i,pauseOnHover:s}}const wFe=ce.forwardRef((t,e)=>{const{notificationConfig:n,sync:r}=t,{getPrefixCls:o}=v.useContext(tr),i=tx.prefixCls||o("notification"),s=v.useContext(Hoe),[a,l]=Boe(Object.assign(Object.assign(Object.assign({},n),{prefixCls:i}),s.notification));return ce.useEffect(r,[]),ce.useImperativeHandle(e,()=>{const c=Object.assign({},a);return Object.keys(c).forEach(u=>{c[u]=(...d)=>(r(),a[u].apply(a,d))}),{instance:c,sync:r}}),l}),CFe=ce.forwardRef((t,e)=>{const[n,r]=ce.useState(hK),o=()=>{r(hK)};ce.useEffect(o,[]);const i=ioe(),s=i.getRootPrefixCls(),a=i.getIconPrefixCls(),l=i.getTheme(),c=ce.createElement(wFe,{ref:e,sync:o,notificationConfig:n});return ce.createElement(uh,{prefixCls:s,iconPrefixCls:a,theme:l},i.holderRender?i.holderRender(c):c)});function u5(){if(!ac){const t=document.createDocumentFragment(),e={fragment:t};ac=e,lP(()=>{Lz()(ce.createElement(CFe,{ref:r=>{const{instance:o,sync:i}=r||{};Promise.resolve().then(()=>{!e.instance&&o&&(e.instance=o,e.sync=i,u5())})}}),t)});return}ac.instance&&(F_.forEach(t=>{switch(t.type){case"open":{lP(()=>{ac.instance.open(Object.assign(Object.assign({},tx),t.config))});break}case"destroy":lP(()=>{ac==null||ac.instance.destroy(t.key)});break}}),F_=[])}function EFe(t){tx=Object.assign(Object.assign({},tx),t),lP(()=>{var e;(e=ac==null?void 0:ac.sync)===null||e===void 0||e.call(ac)})}function ise(t){F_.push({type:"open",config:t}),u5()}const PFe=t=>{F_.push({type:"destroy",key:t}),u5()},_Fe=["success","info","warning","error"],IFe={open:ise,destroy:PFe,config:EFe,useNotification:Wke,_InternalPanelDoNotUseOrYouWillBeFired:$ke},z_=IFe;_Fe.forEach(t=>{z_[t]=e=>ise(Object.assign(Object.assign({},e),{type:t}))});var TFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"},MFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"},OFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},RFe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:OFe}))},kFe=v.forwardRef(RFe),AFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},$Fe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:AFe}))},DFe=v.forwardRef($Fe),jFe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},LFe=function(e,n){return v.createElement(co,vt({},e,{ref:n,icon:jFe}))},NFe=v.forwardRef(LFe);const FFe=(t,e,n,r)=>{const{titleMarginBottom:o,fontWeightStrong:i}=r;return{marginBottom:o,color:n,fontWeight:i,fontSize:t,lineHeight:e}},zFe=t=>{const e=[1,2,3,4,5],n={};return e.forEach(r=>{n[`
      h${r}&,
      div&-h${r},
      div&-h${r} > textarea,
      h${r}
    `]=FFe(t[`fontSizeHeading${r}`],t[`lineHeightHeading${r}`],t.colorTextHeading,t)}),n},BFe=t=>{const{componentCls:e}=t;return{"a&, a":Object.assign(Object.assign({},toe(t)),{userSelect:"text",[`&[disabled], &${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:t.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},HFe=t=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:t.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:NS[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:t.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),UFe=t=>{const{componentCls:e,paddingSM:n}=t,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:t.calc(t.paddingSM).mul(-1).equal(),marginTop:t.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${Re(r)})`},[`${e}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:t.calc(t.marginXS).add(2).equal(),insetBlockEnd:t.marginXS,color:t.colorIcon,fontWeight:"normal",fontSize:t.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},WFe=t=>({[`${t.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:t.colorSuccess}},[`${t.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),VFe=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),qFe=t=>{const{componentCls:e,titleMarginTop:n}=t;return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:t.colorText,wordBreak:"break-word",lineHeight:t.lineHeight,[`&${e}-secondary`]:{color:t.colorTextDescription},[`&${e}-success`]:{color:t.colorSuccessText},[`&${e}-warning`]:{color:t.colorWarningText},[`&${e}-danger`]:{color:t.colorErrorText,"a&:active, a&:focus":{color:t.colorErrorTextActive},"a&:hover":{color:t.colorErrorTextHover}},[`&${e}-disabled`]:{color:t.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},zFe(t)),{[`
      & + h1${e},
      & + h2${e},
      & + h3${e},
      & + h4${e},
      & + h5${e}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),HFe(t)),BFe(t)),{[`
        ${e}-expand,
        ${e}-collapse,
        ${e}-edit,
        ${e}-copy
      `]:Object.assign(Object.assign({},toe(t)),{marginInlineStart:t.marginXXS})}),UFe(t)),WFe(t)),VFe()),{"&-rtl":{direction:"rtl"}})}},KFe=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),sse=li("Typography",t=>[qFe(t)],KFe),GFe=t=>{const{prefixCls:e,"aria-label":n,className:r,style:o,direction:i,maxLength:s,autoSize:a=!0,value:l,onSave:c,onCancel:u,onEnd:d,component:f,enterIcon:h=v.createElement(NFe,null)}=t,g=v.useRef(null),y=v.useRef(!1),m=v.useRef(null),[S,x]=v.useState(l);v.useEffect(()=>{x(l)},[l]),v.useEffect(()=>{var D;if(!((D=g.current)===null||D===void 0)&&D.resizableTextArea){const{textArea:F}=g.current.resizableTextArea;F.focus();const{length:H}=F.value;F.setSelectionRange(H,H)}},[]);const C=({target:D})=>{x(D.value.replace(/[\n\r]/g,""))},E=()=>{y.current=!0},P=()=>{y.current=!1},I=({keyCode:D})=>{y.current||(m.current=D)},T=()=>{c(S.trim())},M=({keyCode:D,ctrlKey:F,altKey:H,metaKey:U,shiftKey:B})=>{m.current!==D||y.current||F||H||U||B||(D===It.ENTER?(T(),d==null||d()):D===It.ESC&&u())},R=()=>{T()},[A,j,N]=sse(e),k=he(e,`${e}-edit-content`,{[`${e}-rtl`]:i==="rtl",[`${e}-${f}`]:!!f},r,j,N);return A(v.createElement("div",{className:k,style:o},v.createElement(Qie,{ref:g,maxLength:s,value:S,onChange:C,onKeyDown:I,onKeyUp:M,onCompositionStart:E,onCompositionEnd:P,onBlur:R,"aria-label":n,rows:1,autoSize:a}),h!==null?_d(h,{className:`${e}-edit-content-confirm`}):null))};var XFe=Hre();const YFe=jc(XFe);var QFe=function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const ZFe=({copyConfig:t,children:e})=>{const[n,r]=v.useState(!1),[o,i]=v.useState(!1),s=v.useRef(null),a=()=>{s.current&&clearTimeout(s.current)},l={};t.format&&(l.format=t.format),v.useEffect(()=>a,[]);const c=Bo(u=>QFe(void 0,void 0,void 0,function*(){var d;u==null||u.preventDefault(),u==null||u.stopPropagation(),i(!0);try{const f=typeof t.text=="function"?yield t.text():t.text;YFe(f||hFe(e,!0).join("")||"",l),i(!1),r(!0),a(),s.current=setTimeout(()=>{r(!1)},3e3),(d=t.onCopy)===null||d===void 0||d.call(t,u)}catch(f){throw i(!1),f}}));return{copied:n,copyLoading:o,onClick:c}};function Yk(t,e){return v.useMemo(()=>{const n=!!t;return[n,Object.assign(Object.assign({},e),n&&typeof t=="object"?t:null)]},[t])}const JFe=t=>{const e=v.useRef(void 0);return v.useEffect(()=>{e.current=t}),e.current},e3e=(t,e,n)=>v.useMemo(()=>t===!0?{title:e??n}:v.isValidElement(t)?{title:t}:typeof t=="object"?Object.assign({title:e??n},t):{title:t},[t,e,n]);var t3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const ase=v.forwardRef((t,e)=>{const{prefixCls:n,component:r="article",className:o,rootClassName:i,setContentRef:s,children:a,direction:l,style:c}=t,u=t3e(t,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:d,direction:f,className:h,style:g}=Bl("typography"),y=l??f,m=s?xa(e,s):e,S=d("typography",n),[x,C,E]=sse(S),P=he(S,h,{[`${S}-rtl`]:y==="rtl"},o,i,C,E),I=Object.assign(Object.assign({},g),c);return x(v.createElement(r,Object.assign({className:P,style:I,ref:m},u),a))});function pK(t){return t===!1?[!1,!1]:Array.isArray(t)?t:[t]}function Qk(t,e,n){return t===!0||t===void 0?e:t||n&&e}function n3e(t){const e=document.createElement("em");t.appendChild(e);const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return t.removeChild(e),n.left>r.left||r.right>n.right||n.top>r.top||r.bottom>n.bottom}const d5=t=>["string","number"].includes(typeof t),r3e=({prefixCls:t,copied:e,locale:n,iconOnly:r,tooltips:o,icon:i,tabIndex:s,onCopy:a,loading:l})=>{const c=pK(o),u=pK(i),{copied:d,copy:f}=n??{},h=e?d:f,g=Qk(c[e?1:0],h),y=typeof g=="string"?g:h;return v.createElement(tw,{title:g},v.createElement("button",{type:"button",className:he(`${t}-copy`,{[`${t}-copy-success`]:e,[`${t}-copy-icon-only`]:r}),onClick:a,"aria-label":y,tabIndex:s},e?Qk(u[1],v.createElement(lie,null),!0):Qk(u[0],l?v.createElement(Zx,null):v.createElement(kFe,null),!0)))},HC=v.forwardRef(({style:t,children:e},n)=>{const r=v.useRef(null);return v.useImperativeHandle(n,()=>({isExceed:()=>{const o=r.current;return o.scrollHeight>o.clientHeight},getHeight:()=>r.current.clientHeight})),v.createElement("span",{"aria-hidden":!0,ref:r,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},t)},e)}),o3e=t=>t.reduce((e,n)=>e+(d5(n)?String(n).length:1),0);function gK(t,e){let n=0;const r=[];for(let o=0;o<t.length;o+=1){if(n===e)return r;const i=t[o],a=d5(i)?String(i).length:1,l=n+a;if(l>e){const c=e-n;return r.push(String(i).slice(0,c)),r}r.push(i),n=l}return t}const Zk=0,Jk=1,eA=2,tA=3,mK=4,UC={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function i3e(t){const{enableMeasure:e,width:n,text:r,children:o,rows:i,expanded:s,miscDeps:a,onEllipsis:l}=t,c=v.useMemo(()=>Su(r),[r]),u=v.useMemo(()=>o3e(c),[r]),d=v.useMemo(()=>o(c,!1),[r]),[f,h]=v.useState(null),g=v.useRef(null),y=v.useRef(null),m=v.useRef(null),S=v.useRef(null),x=v.useRef(null),[C,E]=v.useState(!1),[P,I]=v.useState(Zk),[T,M]=v.useState(0),[R,A]=v.useState(null);lr(()=>{I(e&&n&&u?Jk:Zk)},[n,r,i,e,c]),lr(()=>{var D,F,H,U;if(P===Jk){I(eA);const B=y.current&&getComputedStyle(y.current).whiteSpace;A(B)}else if(P===eA){const B=!!(!((D=m.current)===null||D===void 0)&&D.isExceed());I(B?tA:mK),h(B?[0,u]:null),E(B);const W=((F=m.current)===null||F===void 0?void 0:F.getHeight())||0,K=i===1?0:((H=S.current)===null||H===void 0?void 0:H.getHeight())||0,q=((U=x.current)===null||U===void 0?void 0:U.getHeight())||0,X=Math.max(W,K+q);M(X+1),l(B)}},[P]);const j=f?Math.ceil((f[0]+f[1])/2):0;lr(()=>{var D;const[F,H]=f||[0,0];if(F!==H){const B=(((D=g.current)===null||D===void 0?void 0:D.getHeight())||0)>T;let W=j;H-F===1&&(W=B?F:H),h(B?[F,W]:[W,H])}},[f,j]);const N=v.useMemo(()=>{if(!e)return o(c,!1);if(P!==tA||!f||f[0]!==f[1]){const D=o(c,!1);return[mK,Zk].includes(P)?D:v.createElement("span",{style:Object.assign(Object.assign({},UC),{WebkitLineClamp:i})},D)}return o(s?c:gK(c,f[0]),C)},[s,P,f,c].concat(it(a))),k={width:n,margin:0,padding:0,whiteSpace:R==="nowrap"?"normal":"inherit"};return v.createElement(v.Fragment,null,N,P===eA&&v.createElement(v.Fragment,null,v.createElement(HC,{style:Object.assign(Object.assign(Object.assign({},k),UC),{WebkitLineClamp:i}),ref:m},d),v.createElement(HC,{style:Object.assign(Object.assign(Object.assign({},k),UC),{WebkitLineClamp:i-1}),ref:S},d),v.createElement(HC,{style:Object.assign(Object.assign(Object.assign({},k),UC),{WebkitLineClamp:1}),ref:x},o([],!0))),P===tA&&f&&f[0]!==f[1]&&v.createElement(HC,{style:Object.assign(Object.assign({},k),{top:400}),ref:g},o(gK(c,j),!0)),P===Jk&&v.createElement("span",{style:{whiteSpace:"inherit"},ref:y}))}const s3e=({enableEllipsis:t,isEllipsis:e,children:n,tooltipProps:r})=>!(r!=null&&r.title)||!t?n:v.createElement(tw,Object.assign({open:e?void 0:!1},r),n);var a3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};function l3e({mark:t,code:e,underline:n,delete:r,strong:o,keyboard:i,italic:s},a){let l=a;function c(u,d){d&&(l=v.createElement(u,{},l))}return c("strong",o),c("u",n),c("del",r),c("code",e),c("mark",t),c("kbd",i),c("i",s),l}const c3e="...",vK=["delete","mark","code","underline","strong","keyboard","italic"],gM=v.forwardRef((t,e)=>{var n;const{prefixCls:r,className:o,style:i,type:s,disabled:a,children:l,ellipsis:c,editable:u,copyable:d,component:f,title:h}=t,g=a3e(t,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:y,direction:m}=v.useContext(tr),[S]=Vv("Text"),x=v.useRef(null),C=v.useRef(null),E=y("typography",r),P=zl(g,vK),[I,T]=Yk(u),[M,R]=xi(!1,{value:T.editing}),{triggerType:A=["icon"]}=T,j=Ae=>{var Ne;Ae&&((Ne=T.onStart)===null||Ne===void 0||Ne.call(T)),R(Ae)},N=JFe(M);lr(()=>{var Ae;!M&&N&&((Ae=C.current)===null||Ae===void 0||Ae.focus())},[M]);const k=Ae=>{Ae==null||Ae.preventDefault(),j(!0)},D=Ae=>{var Ne;(Ne=T.onChange)===null||Ne===void 0||Ne.call(T,Ae),j(!1)},F=()=>{var Ae;(Ae=T.onCancel)===null||Ae===void 0||Ae.call(T),j(!1)},[H,U]=Yk(d),{copied:B,copyLoading:W,onClick:K}=ZFe({copyConfig:U,children:l}),[q,X]=v.useState(!1),[Z,Y]=v.useState(!1),[G,J]=v.useState(!1),[ne,ee]=v.useState(!1),[re,le]=v.useState(!0),[ae,ie]=Yk(c,{expandable:!1,symbol:Ae=>Ae?S==null?void 0:S.collapse:S==null?void 0:S.expand}),[ge,ve]=xi(ie.defaultExpanded||!1,{value:ie.expanded}),fe=ae&&(!ge||ie.expandable==="collapsible"),{rows:ue=1}=ie,Ce=v.useMemo(()=>fe&&(ie.suffix!==void 0||ie.onEllipsis||ie.expandable||I||H),[fe,ie,I,H]);lr(()=>{ae&&!Ce&&(X(uq("webkitLineClamp")),Y(uq("textOverflow")))},[Ce,ae]);const[ye,ke]=v.useState(fe),Be=v.useMemo(()=>Ce?!1:ue===1?Z:q,[Ce,Z,q]);lr(()=>{ke(Be&&fe)},[Be,fe]);const Ue=fe&&(ye?ne:G),We=fe&&ue===1&&ye,Me=fe&&ue>1&&ye,$e=(Ae,Ne)=>{var xt;ve(Ne.expanded),(xt=ie.onExpand)===null||xt===void 0||xt.call(ie,Ae,Ne)},[Qe,nt]=v.useState(0),ht=({offsetWidth:Ae})=>{nt(Ae)},ft=Ae=>{var Ne;J(Ae),G!==Ae&&((Ne=ie.onEllipsis)===null||Ne===void 0||Ne.call(ie,Ae))};v.useEffect(()=>{const Ae=x.current;if(ae&&ye&&Ae){const Ne=n3e(Ae);ne!==Ne&&ee(Ne)}},[ae,ye,l,Me,re,Qe]),v.useEffect(()=>{const Ae=x.current;if(typeof IntersectionObserver>"u"||!Ae||!ye||!fe)return;const Ne=new IntersectionObserver(()=>{le(!!Ae.offsetParent)});return Ne.observe(Ae),()=>{Ne.disconnect()}},[ye,fe]);const et=e3e(ie.tooltip,T.text,l),pe=v.useMemo(()=>{if(!(!ae||ye))return[T.text,l,h,et.title].find(d5)},[ae,ye,h,et.title,Ue]);if(M)return v.createElement(GFe,{value:(n=T.text)!==null&&n!==void 0?n:typeof l=="string"?l:"",onSave:D,onCancel:F,onEnd:T.onEnd,prefixCls:E,className:o,style:i,direction:m,component:f,maxLength:T.maxLength,autoSize:T.autoSize,enterIcon:T.enterIcon});const Pe=()=>{const{expandable:Ae,symbol:Ne}=ie;return Ae?v.createElement("button",{type:"button",key:"expand",className:`${E}-${ge?"collapse":"expand"}`,onClick:xt=>$e(xt,{expanded:!ge}),"aria-label":ge?S.collapse:S==null?void 0:S.expand},typeof Ne=="function"?Ne(ge):Ne):null},je=()=>{if(!I)return;const{icon:Ae,tooltip:Ne,tabIndex:xt}=T,Pt=Su(Ne)[0]||(S==null?void 0:S.edit),gn=typeof Pt=="string"?Pt:"";return A.includes("icon")?v.createElement(tw,{key:"edit",title:Ne===!1?"":Pt},v.createElement("button",{type:"button",ref:C,className:`${E}-edit`,onClick:k,"aria-label":gn,tabIndex:xt},Ae||v.createElement(DFe,{role:"button"}))):null},Le=()=>H?v.createElement(r3e,Object.assign({key:"copy"},U,{prefixCls:E,copied:B,locale:S,onCopy:K,loading:W,iconOnly:l==null})):null,qe=Ae=>[Ae&&Pe(),je(),Le()],at=Ae=>[Ae&&!ge&&v.createElement("span",{"aria-hidden":!0,key:"ellipsis"},c3e),ie.suffix,qe(Ae)];return v.createElement(Ha,{onResize:ht,disabled:!fe},Ae=>v.createElement(s3e,{tooltipProps:et,enableEllipsis:fe,isEllipsis:Ue},v.createElement(ase,Object.assign({className:he({[`${E}-${s}`]:s,[`${E}-disabled`]:a,[`${E}-ellipsis`]:ae,[`${E}-ellipsis-single-line`]:We,[`${E}-ellipsis-multiple-line`]:Me},o),prefixCls:r,style:Object.assign(Object.assign({},i),{WebkitLineClamp:Me?ue:void 0}),component:f,ref:xa(Ae,x,e),direction:m,onClick:A.includes("text")?k:void 0,"aria-label":pe==null?void 0:pe.toString(),title:h},P),v.createElement(i3e,{enableMeasure:fe&&!ye,text:l,rows:ue,width:Qe,onEllipsis:ft,expanded:ge,miscDeps:[B,ge,W,I,H,S].concat(it(vK.map(Ne=>t[Ne])))},(Ne,xt)=>l3e(t,v.createElement(v.Fragment,null,Ne.length>0&&xt&&!ge&&pe?v.createElement("span",{key:"show-content","aria-hidden":!0},Ne):Ne,at(xt)))))))});var u3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const d3e=v.forwardRef((t,e)=>{var{ellipsis:n,rel:r}=t,o=u3e(t,["ellipsis","rel"]);const i=Object.assign(Object.assign({},o),{rel:r===void 0&&o.target==="_blank"?"noopener noreferrer":r});return delete i.navigate,v.createElement(gM,Object.assign({},i,{ref:e,ellipsis:!!n,component:"a"}))}),f3e=v.forwardRef((t,e)=>v.createElement(gM,Object.assign({ref:e},t,{component:"div"})));var h3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const p3e=(t,e)=>{var{ellipsis:n}=t,r=h3e(t,["ellipsis"]);const o=v.useMemo(()=>n&&typeof n=="object"?zl(n,["expandable","rows"]):n,[n]);return v.createElement(gM,Object.assign({ref:e},r,{ellipsis:o,component:"span"}))},g3e=v.forwardRef(p3e);var m3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n};const v3e=[1,2,3,4,5],y3e=v.forwardRef((t,e)=>{const{level:n=1}=t,r=m3e(t,["level"]),o=v3e.includes(n)?`h${n}`:"h1";return v.createElement(gM,Object.assign({ref:e},r,{component:o}))}),Td=ase;Td.Text=g3e;Td.Link=d3e;Td.Title=y3e;Td.Paragraph=f3e;var nA={exports:{}},rA={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yK;function b3e(){if(yK)return rA;yK=1;var t=Gt();function e(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,o=t.useRef,i=t.useEffect,s=t.useMemo,a=t.useDebugValue;return rA.useSyncExternalStoreWithSelector=function(l,c,u,d,f){var h=o(null);if(h.current===null){var g={hasValue:!1,value:null};h.current=g}else g=h.current;h=s(function(){function m(P){if(!S){if(S=!0,x=P,P=d(P),f!==void 0&&g.hasValue){var I=g.value;if(f(I,P))return C=I}return C=P}if(I=C,n(x,P))return I;var T=d(P);return f!==void 0&&f(I,T)?(x=P,I):(x=P,C=T)}var S=!1,x,C,E=u===void 0?null:u;return[function(){return m(c())},E===null?void 0:function(){return m(E())}]},[c,u,d,f]);var y=r(l,h[0],h[1]);return i(function(){g.hasValue=!0,g.value=y},[y]),a(y),y},rA}var bK;function S3e(){return bK||(bK=1,nA.exports=b3e()),nA.exports}var x3e=S3e();function lse(t){t()}function w3e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){lse(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=e={callback:n,next:null,prev:e};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var SK={notify(){},get:()=>[]};function C3e(t,e){let n,r=SK,o=0,i=!1;function s(y){u();const m=r.subscribe(y);let S=!1;return()=>{S||(S=!0,m(),d())}}function a(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return i}function u(){o++,n||(n=t.subscribe(l),r=w3e())}function d(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=SK)}function f(){i||(i=!0,u())}function h(){i&&(i=!1,d())}const g={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return g}var E3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",P3e=E3e(),_3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",I3e=_3e(),T3e=()=>P3e||I3e?v.useLayoutEffect:v.useEffect,M3e=T3e();function xK(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function cS(t,e){if(xK(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!xK(t[n[o]],e[n[o]]))return!1;return!0}var oA=Symbol.for("react-redux-context"),iA=typeof globalThis<"u"?globalThis:{};function O3e(){if(!v.createContext)return{};const t=iA[oA]??(iA[oA]=new Map);let e=t.get(v.createContext);return e||(e=v.createContext(null),t.set(v.createContext,e)),e}var Yf=O3e();function R3e(t){const{children:e,context:n,serverState:r,store:o}=t,i=v.useMemo(()=>{const l=C3e(o);return{store:o,subscription:l,getServerState:r?()=>r:void 0}},[o,r]),s=v.useMemo(()=>o.getState(),[o]);M3e(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),s!==o.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,s]);const a=n||Yf;return v.createElement(a.Provider,{value:i},e)}var k3e=R3e;function f5(t=Yf){return function(){return v.useContext(t)}}var cse=f5();function use(t=Yf){const e=t===Yf?cse:f5(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var dse=use();function A3e(t=Yf){const e=t===Yf?dse:use(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var fse=A3e(),$3e=(t,e)=>t===e;function D3e(t=Yf){const e=t===Yf?cse:f5(t),n=(r,o={})=>{const{equalityFn:i=$3e}=typeof o=="function"?{equalityFn:o}:o,s=e(),{store:a,subscription:l,getServerState:c}=s;v.useRef(!0);const u=v.useCallback({[r.name](f){return r(f)}}[r.name],[r]),d=x3e.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,c||a.getState,u,i);return v.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var hse=D3e(),j3e=lse;const sw=()=>fse(),Ep=hse;function $i(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var L3e=typeof Symbol=="function"&&Symbol.observable||"@@observable",wK=L3e,sA=()=>Math.random().toString(36).substring(7).split("").join("."),N3e={INIT:`@@redux/INIT${sA()}`,REPLACE:`@@redux/REPLACE${sA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sA()}`},B_=N3e;function Qf(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function pse(t,e,n){if(typeof t!="function")throw new Error($i(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error($i(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error($i(1));return n(pse)(t,e)}let r=t,o=e,i=new Map,s=i,a=0,l=!1;function c(){s===i&&(s=new Map,i.forEach((m,S)=>{s.set(S,m)}))}function u(){if(l)throw new Error($i(3));return o}function d(m){if(typeof m!="function")throw new Error($i(4));if(l)throw new Error($i(5));let S=!0;c();const x=a++;return s.set(x,m),function(){if(S){if(l)throw new Error($i(6));S=!1,c(),s.delete(x),i=null}}}function f(m){if(!Qf(m))throw new Error($i(7));if(typeof m.type>"u")throw new Error($i(8));if(typeof m.type!="string")throw new Error($i(17));if(l)throw new Error($i(9));try{l=!0,o=r(o,m)}finally{l=!1}return(i=s).forEach(x=>{x()}),m}function h(m){if(typeof m!="function")throw new Error($i(10));r=m,f({type:B_.REPLACE})}function g(){const m=d;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error($i(11));function x(){const E=S;E.next&&E.next(u())}return x(),{unsubscribe:m(x)}},[wK](){return this}}}return f({type:B_.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:h,[wK]:g}}function F3e(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:B_.INIT})>"u")throw new Error($i(12));if(typeof n(void 0,{type:B_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error($i(13))})}function gse(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const s=e[i];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let o;try{F3e(n)}catch(i){o=i}return function(s={},a){if(o)throw o;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],f=n[d],h=s[d],g=f(h,a);if(typeof g>"u")throw a&&a.type,new Error($i(14));c[d]=g,l=l||g!==h}return l=l||r.length!==Object.keys(s).length,l?c:s}}function H_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function z3e(...t){return e=>(n,r)=>{const o=e(n,r);let i=()=>{throw new Error($i(15))};const s={getState:o.getState,dispatch:(l,...c)=>i(l,...c)},a=t.map(l=>l(s));return i=H_(...a)(o.dispatch),{...o,dispatch:i}}}function mse(t){return Qf(t)&&"type"in t&&typeof t.type=="string"}var h5=Symbol.for("immer-nothing"),uS=Symbol.for("immer-draftable"),Sa=Symbol.for("immer-state");function Bi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Bp=Object.getPrototypeOf;function wu(t){return!!t&&!!t[Sa]}function kc(t){var e;return t?vse(t)||Array.isArray(t)||!!t[uS]||!!((e=t.constructor)!=null&&e[uS])||aw(t)||lw(t):!1}var B3e=Object.prototype.constructor.toString();function vse(t){if(!t||typeof t!="object")return!1;const e=Bp(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===B3e}function H3e(t){return wu(t)||Bi(15,t),t[Sa].base_}function nx(t,e){Hp(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function Hp(t){const e=t[Sa];return e?e.type_:Array.isArray(t)?1:aw(t)?2:lw(t)?3:0}function rx(t,e){return Hp(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function aA(t,e){return Hp(t)===2?t.get(e):t[e]}function yse(t,e,n){const r=Hp(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function U3e(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function aw(t){return t instanceof Map}function lw(t){return t instanceof Set}function op(t){return t.copy_||t.base_}function IN(t,e){if(aw(t))return new Map(t);if(lw(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=vse(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Sa];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const s=o[i],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(Bp(t),r)}else{const r=Bp(t);if(r!==null&&n)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function p5(t,e=!1){return mM(t)||wu(t)||!kc(t)||(Hp(t)>1&&(t.set=t.add=t.clear=t.delete=W3e),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>p5(r,!0))),t}function W3e(){Bi(2)}function mM(t){return Object.isFrozen(t)}var TN={};function Up(t){const e=TN[t];return e||Bi(0,t),e}function V3e(t,e){TN[t]||(TN[t]=e)}var ox;function bse(){return ox}function q3e(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function CK(t,e){e&&(Up("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function MN(t){ON(t),t.drafts_.forEach(K3e),t.drafts_=null}function ON(t){t===ox&&(ox=t.parent_)}function EK(t){return ox=q3e(ox,t)}function K3e(t){const e=t[Sa];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function PK(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Sa].modified_&&(MN(e),Bi(4)),kc(t)&&(t=U_(e,t),e.parent_||W_(e,t)),e.patches_&&Up("Patches").generateReplacementPatches_(n[Sa].base_,t,e.patches_,e.inversePatches_)):t=U_(e,n,[]),MN(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==h5?t:void 0}function U_(t,e,n){if(mM(e))return e;const r=e[Sa];if(!r)return nx(e,(o,i)=>_K(t,r,e,o,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return W_(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),nx(i,(a,l)=>_K(t,r,o,a,l,n,s)),W_(t,o,!1),n&&t.patches_&&Up("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function _K(t,e,n,r,o,i,s){if(wu(o)){const a=i&&e&&e.type_!==3&&!rx(e.assigned_,r)?i.concat(r):void 0,l=U_(t,o,a);if(yse(n,r,l),wu(l))t.canAutoFreeze_=!1;else return}else s&&n.add(o);if(kc(o)&&!mM(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;U_(t,o),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&W_(t,o)}}function W_(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&p5(e,n)}function G3e(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:bse(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=g5;n&&(o=[r],i=ix);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}var g5={get(t,e){if(e===Sa)return t;const n=op(t);if(!rx(n,e))return X3e(t,n,e);const r=n[e];return t.finalized_||!kc(r)?r:r===lA(t.base_,e)?(cA(t),t.copy_[e]=kN(r,t)):r},has(t,e){return e in op(t)},ownKeys(t){return Reflect.ownKeys(op(t))},set(t,e,n){const r=Sse(op(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const o=lA(op(t),e),i=o==null?void 0:o[Sa];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(U3e(n,o)&&(n!==void 0||rx(t.base_,e)))return!0;cA(t),RN(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return lA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,cA(t),RN(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=op(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Bi(11)},getPrototypeOf(t){return Bp(t.base_)},setPrototypeOf(){Bi(12)}},ix={};nx(g5,(t,e)=>{ix[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ix.deleteProperty=function(t,e){return ix.set.call(this,t,e,void 0)};ix.set=function(t,e,n){return g5.set.call(this,t[0],e,n,t[0])};function lA(t,e){const n=t[Sa];return(n?op(n):t)[e]}function X3e(t,e,n){var o;const r=Sse(e,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function Sse(t,e){if(!(e in t))return;let n=Bp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Bp(n)}}function RN(t){t.modified_||(t.modified_=!0,t.parent_&&RN(t.parent_))}function cA(t){t.copy_||(t.copy_=IN(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Y3e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const s=this;return function(l=i,...c){return s.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Bi(6),r!==void 0&&typeof r!="function"&&Bi(7);let o;if(kc(e)){const i=EK(this),s=kN(e,void 0);let a=!0;try{o=n(s),a=!1}finally{a?MN(i):ON(i)}return CK(i,r),PK(o,i)}else if(!e||typeof e!="object"){if(o=n(e),o===void 0&&(o=e),o===h5&&(o=void 0),this.autoFreeze_&&p5(o,!0),r){const i=[],s=[];Up("Patches").generateReplacementPatches_(e,o,i,s),r(i,s)}return o}else Bi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,l=>e(l,...a));let r,o;return[this.produce(e,n,(s,a)=>{r=s,o=a}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){kc(t)||Bi(8),wu(t)&&(t=Q3e(t));const e=EK(this),n=kN(t,void 0);return n[Sa].isManual_=!0,ON(e),n}finishDraft(t,e){const n=t&&t[Sa];(!n||!n.isManual_)&&Bi(9);const{scope_:r}=n;return CK(r,e),PK(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const o=e[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(e=e.slice(n+1));const r=Up("Patches").applyPatches_;return wu(t)?r(t,e):this.produce(t,o=>r(o,e))}};function kN(t,e){const n=aw(t)?Up("MapSet").proxyMap_(t,e):lw(t)?Up("MapSet").proxySet_(t,e):G3e(t,e);return(e?e.scope_:bse()).drafts_.push(n),n}function Q3e(t){return wu(t)||Bi(10,t),xse(t)}function xse(t){if(!kc(t)||mM(t))return t;const e=t[Sa];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=IN(t,e.scope_.immer_.useStrictShallowCopy_)}else n=IN(t,!0);return nx(n,(r,o)=>{yse(n,r,xse(o))}),e&&(e.finalized_=!1),n}function Z3e(){const e="replace",n="add",r="remove";function o(f,h,g,y){switch(f.type_){case 0:case 2:return s(f,h,g,y);case 1:return i(f,h,g,y);case 3:return a(f,h,g,y)}}function i(f,h,g,y){let{base_:m,assigned_:S}=f,x=f.copy_;x.length<m.length&&([m,x]=[x,m],[g,y]=[y,g]);for(let C=0;C<m.length;C++)if(S[C]&&x[C]!==m[C]){const E=h.concat([C]);g.push({op:e,path:E,value:d(x[C])}),y.push({op:e,path:E,value:d(m[C])})}for(let C=m.length;C<x.length;C++){const E=h.concat([C]);g.push({op:n,path:E,value:d(x[C])})}for(let C=x.length-1;m.length<=C;--C){const E=h.concat([C]);y.push({op:r,path:E})}}function s(f,h,g,y){const{base_:m,copy_:S}=f;nx(f.assigned_,(x,C)=>{const E=aA(m,x),P=aA(S,x),I=C?rx(m,x)?e:n:r;if(E===P&&I===e)return;const T=h.concat(x);g.push(I===r?{op:I,path:T}:{op:I,path:T,value:P}),y.push(I===n?{op:r,path:T}:I===r?{op:n,path:T,value:d(E)}:{op:e,path:T,value:d(E)})})}function a(f,h,g,y){let{base_:m,copy_:S}=f,x=0;m.forEach(C=>{if(!S.has(C)){const E=h.concat([x]);g.push({op:r,path:E,value:C}),y.unshift({op:n,path:E,value:C})}x++}),x=0,S.forEach(C=>{if(!m.has(C)){const E=h.concat([x]);g.push({op:n,path:E,value:C}),y.unshift({op:r,path:E,value:C})}x++})}function l(f,h,g,y){g.push({op:e,path:[],value:h===h5?void 0:h}),y.push({op:e,path:[],value:f})}function c(f,h){return h.forEach(g=>{const{path:y,op:m}=g;let S=f;for(let P=0;P<y.length-1;P++){const I=Hp(S);let T=y[P];typeof T!="string"&&typeof T!="number"&&(T=""+T),(I===0||I===1)&&(T==="__proto__"||T==="constructor")&&Bi(19),typeof S=="function"&&T==="prototype"&&Bi(19),S=aA(S,T),typeof S!="object"&&Bi(18,y.join("/"))}const x=Hp(S),C=u(g.value),E=y[y.length-1];switch(m){case e:switch(x){case 2:return S.set(E,C);case 3:Bi(16);default:return S[E]=C}case n:switch(x){case 1:return E==="-"?S.push(C):S.splice(E,0,C);case 2:return S.set(E,C);case 3:return S.add(C);default:return S[E]=C}case r:switch(x){case 1:return S.splice(E,1);case 2:return S.delete(E);case 3:return S.delete(g.value);default:return delete S[E]}default:Bi(17,m)}}),f}function u(f){if(!kc(f))return f;if(Array.isArray(f))return f.map(u);if(aw(f))return new Map(Array.from(f.entries()).map(([g,y])=>[g,u(y)]));if(lw(f))return new Set(Array.from(f).map(u));const h=Object.create(Bp(f));for(const g in f)h[g]=u(f[g]);return rx(f,uS)&&(h[uS]=f[uS]),h}function d(f){return wu(f)?u(f):f}V3e("Patches",{applyPatches_:c,generatePatches_:o,generateReplacementPatches_:l})}var Za=new Y3e,cw=Za.produce,wse=Za.produceWithPatches.bind(Za);Za.setAutoFreeze.bind(Za);Za.setUseStrictShallowCopy.bind(Za);var IK=Za.applyPatches.bind(Za);Za.createDraft.bind(Za);Za.finishDraft.bind(Za);function J3e(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function eze(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function tze(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var TK=t=>Array.isArray(t)?t:[t];function nze(t){const e=Array.isArray(t[0])?t[0]:t;return tze(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function rze(t,e){const n=[],{length:r}=t;for(let o=0;o<r;o++)n.push(t[o].apply(null,e));return n}var oze=class{constructor(t){this.value=t}deref(){return this.value}},ize=typeof WeakRef<"u"?WeakRef:oze,sze=0,MK=1;function WC(){return{s:sze,v:void 0,o:null,p:null}}function V_(t,e={}){let n=WC();const{resultEqualityCheck:r}=e;let o,i=0;function s(){var d;let a=n;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const m=y.get(g);m===void 0?(a=WC(),y.set(g,a)):a=m}else{let y=a.p;y===null&&(a.p=y=new Map);const m=y.get(g);m===void 0?(a=WC(),y.set(g,a)):a=m}}const c=a;let u;if(a.s===MK)u=a.v;else if(u=t.apply(null,arguments),i++,r){const f=((d=o==null?void 0:o.deref)==null?void 0:d.call(o))??o;f!=null&&r(f,u)&&(u=f,i!==0&&i--),o=typeof u=="object"&&u!==null||typeof u=="function"?new ize(u):u}return c.s=MK,c.v=u,u}return s.clearCache=()=>{n=WC(),s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function aze(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...o)=>{let i=0,s=0,a,l={},c=o.pop();typeof c=="object"&&(l=c,c=o.pop()),J3e(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:h=V_,argsMemoizeOptions:g=[]}=u,y=TK(f),m=TK(g),S=nze(o),x=d(function(){return i++,c.apply(null,arguments)},...y),C=h(function(){s++;const P=rze(S,arguments);return a=x.apply(null,P),a},...m);return Object.assign(C,{resultFunc:c,memoizedResultFunc:x,dependencies:S,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var m5=aze(V_),lze=Object.assign((t,e=m5)=>{eze(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((s,a,l)=>(s[n[l]]=a,s),{}))},{withTypes:()=>lze});function Cse(t){return({dispatch:n,getState:r})=>o=>i=>typeof i=="function"?i(n,r,t):o(i)}var cze=Cse(),uze=Cse,dze=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?H_:H_.apply(null,arguments)},fze=t=>t&&typeof t.match=="function";function Sc(t,e){function n(...r){if(e){let o=e(...r);if(!o)throw new Error(xc(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>mse(r)&&r.type===t,n}var Ese=class Rb extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Rb.prototype)}static get[Symbol.species](){return Rb}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Rb(...e[0].concat(this)):new Rb(...e.concat(this))}};function OK(t){return kc(t)?cw(t,()=>{}):t}function VC(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function hze(t){return typeof t=="boolean"}var pze=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:o=!0,actionCreatorCheck:i=!0}=e??{};let s=new Ese;return n&&(hze(n)?s.push(cze):s.push(uze(n.extraArgument))),s},vM="RTK_autoBatch",ob=()=>t=>({payload:t,meta:{[vM]:!0}}),RK=t=>e=>{setTimeout(e,t)},gze=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let o=!0,i=!1,s=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:RK(10):t.type==="callback"?t.queueNotification:RK(t.timeout),c=()=>{s=!1,i&&(i=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>o&&u(),f=r.subscribe(d);return a.add(u),()=>{f(),a.delete(u)}},dispatch(u){var d;try{return o=!((d=u==null?void 0:u.meta)!=null&&d[vM]),i=!o,i&&(s||(s=!0,l(c))),r.dispatch(u)}finally{o=!0}}})},mze=t=>function(n){const{autoBatch:r=!0}=n??{};let o=new Ese(t);return r&&o.push(gze(typeof r=="object"?r:void 0)),o};function vze(t){const e=pze(),{reducer:n=void 0,middleware:r,devTools:o=!0,preloadedState:i=void 0,enhancers:s=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(Qf(n))a=gse(n);else throw new Error(xc(1));let l;typeof r=="function"?l=r(e):l=e();let c=H_;o&&(c=dze({trace:!1,...typeof o=="object"&&o}));const u=z3e(...l),d=mze(u);let f=typeof s=="function"?s(d):d();const h=c(...f);return pse(a,i,h)}function Pse(t){const e={},n=[];let r;const o={addCase(i,s){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(xc(28));if(a in e)throw new Error(xc(29));return e[a]=s,o},addMatcher(i,s){return n.push({matcher:i,reducer:s}),o},addDefaultCase(i){return r=i,o}};return t(o),[e,n,r]}function yze(t){return typeof t=="function"}function bze(t,e){let[n,r,o]=Pse(e),i;if(yze(t))i=()=>OK(t());else{const a=OK(t);i=()=>a}function s(a=i(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[o]),c.reduce((u,d)=>{if(d)if(wu(u)){const h=d(u,l);return h===void 0?u:h}else{if(kc(u))return cw(u,f=>d(f,l));{const f=d(u,l);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},a)}return s.getInitialState=i,s}var _se=(t,e)=>fze(t)?t.match(e):t(e);function Md(...t){return e=>t.some(n=>_se(n,e))}function dS(...t){return e=>t.every(n=>_se(n,e))}function yM(t,e){if(!t||!t.meta)return!1;const n=typeof t.meta.requestId=="string",r=e.indexOf(t.meta.requestStatus)>-1;return n&&r}function uw(t){return typeof t[0]=="function"&&"pending"in t[0]&&"fulfilled"in t[0]&&"rejected"in t[0]}function v5(...t){return t.length===0?e=>yM(e,["pending"]):uw(t)?Md(...t.map(e=>e.pending)):v5()(t[0])}function hv(...t){return t.length===0?e=>yM(e,["rejected"]):uw(t)?Md(...t.map(e=>e.rejected)):hv()(t[0])}function bM(...t){const e=n=>n&&n.meta&&n.meta.rejectedWithValue;return t.length===0?dS(hv(...t),e):uw(t)?dS(hv(...t),e):bM()(t[0])}function Zf(...t){return t.length===0?e=>yM(e,["fulfilled"]):uw(t)?Md(...t.map(e=>e.fulfilled)):Zf()(t[0])}function AN(...t){return t.length===0?e=>yM(e,["pending","fulfilled","rejected"]):uw(t)?Md(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):AN()(t[0])}var Sze="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",y5=(t=21)=>{let e="",n=t;for(;n--;)e+=Sze[Math.random()*64|0];return e},xze=["name","message","stack","code"],uA=class{constructor(t,e){V(this,"_type");this.payload=t,this.meta=e}},kK=class{constructor(t,e){V(this,"_type");this.payload=t,this.meta=e}},wze=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of xze)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},AK="External signal was aborted",$K=(()=>{function t(e,n,r){const o=Sc(e+"/fulfilled",(l,c,u,d)=>({payload:l,meta:{...d||{},arg:u,requestId:c,requestStatus:"fulfilled"}})),i=Sc(e+"/pending",(l,c,u)=>({payload:void 0,meta:{...u||{},arg:c,requestId:l,requestStatus:"pending"}})),s=Sc(e+"/rejected",(l,c,u,d,f)=>({payload:d,error:(r&&r.serializeError||wze)(l||"Rejected"),meta:{...f||{},arg:u,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l,{signal:c}={}){return(u,d,f)=>{const h=r!=null&&r.idGenerator?r.idGenerator(l):y5(),g=new AbortController;let y,m;function S(C){m=C,g.abort()}c&&(c.aborted?S(AK):c.addEventListener("abort",()=>S(AK),{once:!0}));const x=async function(){var P,I;let C;try{let T=(P=r==null?void 0:r.condition)==null?void 0:P.call(r,l,{getState:d,extra:f});if(Eze(T)&&(T=await T),T===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const M=new Promise((R,A)=>{y=()=>{A({name:"AbortError",message:m||"Aborted"})},g.signal.addEventListener("abort",y)});u(i(h,l,(I=r==null?void 0:r.getPendingMeta)==null?void 0:I.call(r,{requestId:h,arg:l},{getState:d,extra:f}))),C=await Promise.race([M,Promise.resolve(n(l,{dispatch:u,getState:d,extra:f,requestId:h,signal:g.signal,abort:S,rejectWithValue:(R,A)=>new uA(R,A),fulfillWithValue:(R,A)=>new kK(R,A)})).then(R=>{if(R instanceof uA)throw R;return R instanceof kK?o(R.payload,h,l,R.meta):o(R,h,l)})])}catch(T){C=T instanceof uA?s(null,h,l,T.payload,T.meta):s(T,h,l)}finally{y&&g.signal.removeEventListener("abort",y)}return r&&!r.dispatchConditionRejection&&s.match(C)&&C.meta.condition||u(C),C}();return Object.assign(x,{abort:S,requestId:h,arg:l,unwrap(){return x.then(Cze)}})}}return Object.assign(a,{pending:i,rejected:s,fulfilled:o,settled:Md(s,o),typePrefix:e})}return t.withTypes=()=>t,t})();function Cze(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Eze(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Pze=Symbol.for("rtk-slice-createasyncthunk");function _ze(t,e){return`${t}/${e}`}function Ize({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Pze];return function(o){const{name:i,reducerPath:s=i}=o;if(!i)throw new Error(xc(11));const a=(typeof o.reducers=="function"?o.reducers(Mze()):o.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(E,P){const I=typeof E=="string"?E:E.type;if(!I)throw new Error(xc(12));if(I in c.sliceCaseReducersByType)throw new Error(xc(13));return c.sliceCaseReducersByType[I]=P,u},addMatcher(E,P){return c.sliceMatchers.push({matcher:E,reducer:P}),u},exposeAction(E,P){return c.actionCreators[E]=P,u},exposeCaseReducer(E,P){return c.sliceCaseReducersByName[E]=P,u}};l.forEach(E=>{const P=a[E],I={reducerName:E,type:_ze(i,E),createNotation:typeof o.reducers=="function"};Rze(P)?Aze(I,P,u,e):Oze(I,P,u)});function d(){const[E={},P=[],I=void 0]=typeof o.extraReducers=="function"?Pse(o.extraReducers):[o.extraReducers],T={...E,...c.sliceCaseReducersByType};return bze(o.initialState,M=>{for(let R in T)M.addCase(R,T[R]);for(let R of c.sliceMatchers)M.addMatcher(R.matcher,R.reducer);for(let R of P)M.addMatcher(R.matcher,R.reducer);I&&M.addDefaultCase(I)})}const f=E=>E,h=new Map,g=new WeakMap;let y;function m(E,P){return y||(y=d()),y(E,P)}function S(){return y||(y=d()),y.getInitialState()}function x(E,P=!1){function I(M){let R=M[E];return typeof R>"u"&&P&&(R=VC(g,I,S)),R}function T(M=f){const R=VC(h,P,()=>new WeakMap);return VC(R,M,()=>{const A={};for(const[j,N]of Object.entries(o.selectors??{}))A[j]=Tze(N,M,()=>VC(g,M,S),P);return A})}return{reducerPath:E,getSelectors:T,get selectors(){return T(I)},selectSlice:I}}const C={name:i,reducer:m,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:S,...x(s),injectInto(E,{reducerPath:P,...I}={}){const T=P??s;return E.inject({reducerPath:T,reducer:m},I),{...C,...x(T,!0)}}};return C}}function Tze(t,e,n,r){function o(i,...s){let a=e(i);return typeof a>"u"&&r&&(a=n()),t(a,...s)}return o.unwrapped=t,o}var Cf=Ize();function Mze(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Oze({type:t,reducerName:e,createNotation:n},r,o){let i,s;if("reducer"in r){if(n&&!kze(r))throw new Error(xc(17));i=r.reducer,s=r.prepare}else i=r;o.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,s?Sc(t,s):Sc(t))}function Rze(t){return t._reducerDefinitionType==="asyncThunk"}function kze(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Aze({type:t,reducerName:e},n,r,o){if(!o)throw new Error(xc(18));const{payloadCreator:i,fulfilled:s,pending:a,rejected:l,settled:c,options:u}=n,d=o(t,i,u);r.exposeAction(e,d),s&&r.addCase(d.fulfilled,s),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:s||qC,pending:a||qC,rejected:l||qC,settled:c||qC})}function qC(){}function xc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const $ze={nickname:""},Ise=Cf({name:"user",initialState:$ze,reducers:{setNickname(t,e){t.nickname=e.payload}}}),{setNickname:Tse}=Ise.actions,Dze=Ise.reducer,fS="generated",jze="pointerdown",Lze="pointerup",DK="pointerleave",Nze="pointerout",jK="pointermove",Fze="touchstart",LK="touchend",zze="touchmove",Bze="touchcancel",Hze="resize",Uze="visibilitychange",Wp="tsParticles - Error";class Da{constructor(e,n,r){if(this._updateFromAngle=(o,i)=>{this.x=Math.cos(o)*i,this.y=Math.sin(o)*i},!Ec(e)&&e){this.x=e.x,this.y=e.y;const o=e;this.z=o.z?o.z:0}else if(e!==void 0&&n!==void 0)this.x=e,this.y=n,this.z=r??0;else throw new Error(`${Wp} Vector3d not initialized correctly`)}static get origin(){return Da.create(0,0,0)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return Da.create(e.x,e.y,e.z)}static create(e,n,r){return new Da(e,n,r)}add(e){return Da.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return Da.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return Da.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return Da.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(1/e)}rotate(e){return Da.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),0)}setTo(e){this.x=e.x,this.y=e.y;const n=e;this.z=n.z?n.z:0}sub(e){return Da.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class wc extends Da{constructor(e,n){super(e,n,0)}static get origin(){return wc.create(0,0)}static clone(e){return wc.create(e.x,e.y)}static create(e,n){return new wc(e,n)}}let Wze=Math.random;function Ho(){return pv(Wze(),0,1-1e-16)}function pv(t,e,n){return Math.min(Math.max(t,e),n)}function dA(t,e,n,r){return Math.floor((t*n+e*r)/(n+r))}function pc(t){const e=SM(t);let n=b5(t);return e===n&&(n=0),Ho()*(e-n)+n}function Zn(t){return Ec(t)?t:pc(t)}function b5(t){return Ec(t)?t:t.min}function SM(t){return Ec(t)?t:t.max}function yr(t,e){if(t===e||e===void 0&&Ec(t))return t;const n=b5(t),r=SM(t);return e!==void 0?{min:Math.min(n,e),max:Math.max(r,e)}:yr(n,r)}function S5(t){const e=t.random,{enable:n,minimumValue:r}=zf(e)?{enable:e,minimumValue:0}:e;return Zn(n?yr(t.value,r):t.value)}function gu(t,e){const n=t.x-e.x,r=t.y-e.y;return{dx:n,dy:r,distance:Math.sqrt(n**2+r**2)}}function Ff(t,e){return gu(t,e).distance}function Vze(t,e,n){if(Ec(t))return t*Math.PI/180;switch(t){case"top":return-Math.PI/2;case"top-right":return-Math.PI/4;case"right":return 0;case"bottom-right":return Math.PI/4;case"bottom":return Math.PI/2;case"bottom-left":return 3*Math.PI/4;case"left":return Math.PI;case"top-left":return-3*Math.PI/4;case"inside":return Math.atan2(n.y-e.y,n.x-e.x);case"outside":return Math.atan2(e.y-n.y,e.x-n.x);default:return Ho()*Math.PI*2}}function qze(t){const e=wc.origin;return e.length=1,e.angle=t,e}function Kze(t){var e,n;return{x:((e=t.position)==null?void 0:e.x)??Ho()*t.size.width,y:((n=t.position)==null?void 0:n.y)??Ho()*t.size.height}}function Mse(t){return t?t.endsWith("%")?parseFloat(t)/100:parseFloat(t):1}const Gze={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function sx(){return Gze}function xM(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function Xze(){return!xM()&&typeof matchMedia<"u"}function Ose(t){if(Xze())return matchMedia(t)}function Yze(t){if(!(xM()||typeof MutationObserver>"u"))return new MutationObserver(t)}function Qze(t,e){return t===e||mu(e)&&e.indexOf(t)>-1}function Zze(t){return Math.floor(Ho()*t.length)}function x5(t,e,n=!0){return t[e!==void 0&&n?e%t.length:Zze(t)]}function w5(t,e,n,r,o){return Jze(C5(t,r??0),e,n,o)}function Jze(t,e,n,r){let o=!0;return(!r||r==="bottom")&&(o=t.top<e.height+n.x),o&&(!r||r==="left")&&(o=t.right>n.x),o&&(!r||r==="right")&&(o=t.left<e.width+n.y),o&&(!r||r==="top")&&(o=t.bottom>n.y),o}function C5(t,e){return{bottom:t.y+e,left:t.x-e,right:t.x+e,top:t.y-e}}function ms(t,...e){for(const n of e){if(n==null)continue;if(!km(n)){t=n;continue}const r=Array.isArray(n);r&&(km(t)||!t||!Array.isArray(t))?t=[]:!r&&(km(t)||!t||Array.isArray(t))&&(t={});for(const o in n){if(o==="__proto__")continue;const i=n,s=i[o],a=t;a[o]=km(s)&&Array.isArray(s)?s.map(l=>ms(a[o],l)):ms(a[o],s)}}return t}function Vp(t,e){return mu(t)?t.map((n,r)=>e(n,r)):e(t,0)}function hS(t,e,n){return mu(t)?x5(t,e,n):t}function Rse(t,e){const n=t.value,r=t.animation,o={delayTime:Zn(r.delay)*1e3,enable:r.enable,value:Zn(t.value)*e,max:SM(n)*e,min:b5(n)*e,loops:0,maxLoops:Zn(r.count),time:0};if(r.enable){switch(o.decay=1-Zn(r.decay),r.mode){case"increase":o.status="increasing";break;case"decrease":o.status="decreasing";break;case"random":o.status=Ho()>=.5?"increasing":"decreasing";break}const i=r.mode==="auto";switch(r.startValue){case"min":o.value=o.min,i&&(o.status="increasing");break;case"max":o.value=o.max,i&&(o.status="decreasing");break;case"random":default:o.value=pc(o),i&&(o.status=Ho()>=.5?"increasing":"decreasing");break}}return o.initialValue=o.value,o}function e5e(t,e){if(!(t.mode==="percent")){const{mode:o,...i}=t;return i}return"x"in t?{x:t.x/100*e.width,y:t.y/100*e.height}:{width:t.width/100*e.width,height:t.height/100*e.height}}function kse(t,e){return e5e(t,e)}function zf(t){return typeof t=="boolean"}function Cc(t){return typeof t=="string"}function Ec(t){return typeof t=="number"}function Ase(t){return typeof t=="function"}function km(t){return typeof t=="object"&&t!==null}function mu(t){return Array.isArray(t)}const q_="random",cP="mid",wM=new Map;function NK(t){wM.set(t.key,t)}function fA(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function t5e(t){for(const[,i]of wM)if(t.startsWith(i.stringPrefix))return i.parseString(t);const e=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,n=t.replace(e,(i,s,a,l,c)=>s+s+a+a+l+l+(c!==void 0?c+c:"")),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,o=r.exec(n);return o?{a:o[4]!==void 0?parseInt(o[4],16)/255:1,b:parseInt(o[3],16),g:parseInt(o[2],16),r:parseInt(o[1],16)}:void 0}function Pc(t,e,n=!0){if(!t)return;const r=Cc(t)?{value:t}:t;if(Cc(r.value))return $se(r.value,e,n);if(mu(r.value))return Pc({value:x5(r.value,e,n)});for(const[,o]of wM){const i=o.handleRangeColor(r);if(i)return i}}function $se(t,e,n=!0){if(!t)return;const r=Cc(t)?{value:t}:t;if(Cc(r.value))return r.value===q_?Dse():r5e(r.value);if(mu(r.value))return $se({value:x5(r.value,e,n)});for(const[,o]of wM){const i=o.handleColor(r);if(i)return i}}function $N(t,e,n=!0){const r=Pc(t,e,n);return r?n5e(r):void 0}function n5e(t){const e=t.r/255,n=t.g/255,r=t.b/255,o=Math.max(e,n,r),i=Math.min(e,n,r),s={h:0,l:(o+i)/2,s:0};return o!==i&&(s.s=s.l<.5?(o-i)/(o+i):(o-i)/(2-o-i),s.h=e===o?(n-r)/(o-i):s.h=n===o?2+(r-e)/(o-i):4+(e-n)/(o-i)),s.l*=100,s.s*=100,s.h*=60,s.h<0&&(s.h+=360),s.h>=360&&(s.h-=360),s}function r5e(t){return t5e(t)}function gv(t){const e={b:0,g:0,r:0},n={h:t.h/360,l:t.l/100,s:t.s/100};if(!n.s)e.r=e.g=e.b=n.l;else{const r=n.l<.5?n.l*(1+n.s):n.l+n.s-n.l*n.s,o=2*n.l-r;e.r=fA(o,r,n.h+1/3),e.g=fA(o,r,n.h),e.b=fA(o,r,n.h-1/3)}return e.r=Math.floor(e.r*255),e.g=Math.floor(e.g*255),e.b=Math.floor(e.b*255),e}function o5e(t){const e=gv(t);return{a:t.a,b:e.b,g:e.g,r:e.r}}function Dse(t){return{b:Math.floor(pc(yr(0,256))),g:Math.floor(pc(yr(0,256))),r:Math.floor(pc(yr(0,256)))}}function Pp(t,e){return`rgba(${t.r}, ${t.g}, ${t.b}, ${e??1})`}function FK(t,e){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${e??1})`}function i5e(t,e,n,r){let o=t,i=e;return o.r===void 0&&(o=gv(t)),i.r===void 0&&(i=gv(e)),{b:dA(o.b,i.b,n,r),g:dA(o.g,i.g,n,r),r:dA(o.r,i.r,n,r)}}function zK(t,e,n){if(n===q_)return Dse();if(n===cP){const r=t.getFillColor()??t.getStrokeColor(),o=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(r&&o&&e)return i5e(r,o,t.getRadius(),e.getRadius());{const i=r??o;if(i)return gv(i)}}else return n}function s5e(t,e,n){const r=Cc(t)?t:t.value;return r===q_?n?Pc({value:r}):e?q_:cP:r===cP?cP:Pc({value:r})}function BK(t){return t!==void 0?{h:t.h.value,s:t.s.value,l:t.l.value}:void 0}function a5e(t,e,n){const r={h:{enable:!1,value:t.h},s:{enable:!1,value:t.s},l:{enable:!1,value:t.l}};return e&&(hA(r.h,e.h,n),hA(r.s,e.s,n),hA(r.l,e.l,n)),r}function hA(t,e,n){t.enable=e.enable,t.enable?(t.velocity=Zn(e.speed)/100*n,t.decay=1-Zn(e.decay),t.status="increasing",t.loops=0,t.maxLoops=Zn(e.count),t.time=0,t.delayTime=Zn(e.delay)*1e3,e.sync||(t.velocity*=Ho(),t.value*=Ho()),t.initialValue=t.value):t.velocity=0}function pA(t,e,n){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.closePath()}function l5e(t,e,n,r){t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.lineTo(r.x,r.y),t.closePath()}function c5e(t,e,n){t.fillStyle=n??"rgba(0,0,0,0)",t.fillRect(0,0,e.width,e.height)}function u5e(t,e,n,r){n&&(t.globalAlpha=r,t.drawImage(n,0,0,e.width,e.height),t.globalAlpha=1)}function gA(t,e){t.clearRect(0,0,e.width,e.height)}function d5e(t){const{container:e,context:n,particle:r,delta:o,colorStyles:i,backgroundMask:s,composite:a,radius:l,opacity:c,shadow:u,transform:d}=t,f=r.getPosition(),h=r.rotation+(r.pathRotation?r.velocity.angle:0),g={sin:Math.sin(h),cos:Math.cos(h)},y={a:g.cos*(d.a??1),b:g.sin*(d.b??1),c:-g.sin*(d.c??1),d:g.cos*(d.d??1)};n.setTransform(y.a,y.b,y.c,y.d,f.x,f.y),n.beginPath(),s&&(n.globalCompositeOperation=a);const m=r.shadowColor;u.enable&&m&&(n.shadowBlur=u.blur,n.shadowColor=Pp(m),n.shadowOffsetX=u.offset.x,n.shadowOffsetY=u.offset.y),i.fill&&(n.fillStyle=i.fill);const S=r.strokeWidth??0;n.lineWidth=S,i.stroke&&(n.strokeStyle=i.stroke),f5e(e,n,r,l,c,o),S>0&&n.stroke(),r.close&&n.closePath(),r.fill&&n.fill(),h5e(e,n,r,l,c,o),n.globalCompositeOperation="source-over",n.setTransform(1,0,0,1,0,0)}function f5e(t,e,n,r,o,i){if(!n.shape)return;const s=t.drawers.get(n.shape);s&&s.draw(e,n,r,o,i,t.retina.pixelRatio)}function h5e(t,e,n,r,o,i){if(!n.shape)return;const s=t.drawers.get(n.shape);!s||!s.afterEffect||s.afterEffect(e,n,r,o,i,t.retina.pixelRatio)}function p5e(t,e,n){e.draw&&e.draw(t,n)}function g5e(t,e,n,r){e.drawParticle&&e.drawParticle(t,n,r)}function m5e(t,e,n){return{h:t.h,s:t.s,l:t.l+(e==="darken"?-1:1)*n}}function v5e(t,e,n){const r=e[n];r!==void 0&&(t[n]=(t[n]??1)*r)}class y5e{constructor(e){this.container=e,this._applyPostDrawUpdaters=n=>{for(const r of this._postDrawUpdaters)r.afterDraw&&r.afterDraw(n)},this._applyPreDrawUpdaters=(n,r,o,i,s,a)=>{for(const l of this._preDrawUpdaters){if(l.getColorStyles){const{fill:c,stroke:u}=l.getColorStyles(r,n,o,i);c&&(s.fill=c),u&&(s.stroke=u)}if(l.getTransformValues){const c=l.getTransformValues(r);for(const u in c)v5e(a,c,u)}l.beforeDraw&&l.beforeDraw(r)}},this._applyResizePlugins=()=>{for(const n of this._resizePlugins)n.resize&&n.resize()},this._getPluginParticleColors=n=>{let r,o;for(const i of this._colorPlugins)if(!r&&i.particleFillColor&&(r=$N(i.particleFillColor(n))),!o&&i.particleStrokeColor&&(o=$N(i.particleStrokeColor(n))),r&&o)break;return[r,o]},this._initCover=()=>{const n=this.container.actualOptions,r=n.backgroundMask.cover,o=r.color,i=Pc(o);if(i){const s={...i,a:r.opacity};this._coverColorStyle=Pp(s,s.a)}},this._initStyle=()=>{const n=this.element,r=this.container.actualOptions;if(n){this._fullScreen?(this._originalStyle=ms({},n.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const o in r.style){if(!o||!r.style)continue;const i=r.style[o];i&&n.style.setProperty(o,i,"important")}}},this._initTrail=async()=>{const n=this.container.actualOptions,r=n.particles.move.trail,o=r.fill;if(r.enable)if(o.color){const i=Pc(o.color);if(!i)return;const s=n.particles.move.trail;this._trailFill={color:{...i},opacity:1/s.length}}else await new Promise((i,s)=>{if(!o.image)return;const a=document.createElement("img");a.addEventListener("load",()=>{this._trailFill={image:a,opacity:1/r.length},i()}),a.addEventListener("error",l=>{s(l.error)}),a.src=o.image})},this._paintBase=n=>{this.draw(r=>c5e(r,this.size,n))},this._paintImage=(n,r)=>{this.draw(o=>u5e(o,this.size,n,r))},this._repairStyle=()=>{const n=this.element;n&&(this._safeMutationObserver(r=>r.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(r=>r.observe(n,{attributes:!0})))},this._resetOriginalStyle=()=>{const n=this.element,r=this._originalStyle;if(!(n&&r))return;const o=n.style;o.position=r.position,o.zIndex=r.zIndex,o.top=r.top,o.left=r.left,o.width=r.width,o.height=r.height},this._safeMutationObserver=n=>{this._mutationObserver&&n(this._mutationObserver)},this._setFullScreenStyle=()=>{const n=this.element;if(!n)return;const r="important",o=n.style;o.setProperty("position","fixed",r),o.setProperty("z-index",this.container.actualOptions.fullScreen.zIndex.toString(10),r),o.setProperty("top","0",r),o.setProperty("left","0",r),o.setProperty("width","100%",r),o.setProperty("height","100%",r)},this.size={height:0,width:0},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,n=e.particles.move.trail,r=this._trailFill;e.backgroundMask.enable?this.paint():n.enable&&n.length>0&&r?r.color?this._paintBase(Pp(r.color,r.opacity)):r.image&&this._paintImage(r.image,r.opacity):this.draw(o=>{gA(o,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e&&e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const n=this._context;if(n)return e(n)}drawParticle(e,n){if(e.spawning||e.destroyed)return;const r=e.getRadius();if(r<=0)return;const o=e.getFillColor(),i=e.getStrokeColor()??o;let[s,a]=this._getPluginParticleColors(e);s||(s=o),a||(a=i),!(!s&&!a)&&this.draw(l=>{var C;const c=this.container,u=c.actualOptions,d=e.options.zIndex,f=(1-e.zIndexFactor)**d.opacityRate,h=e.bubble.opacity??((C=e.opacity)==null?void 0:C.value)??1,g=e.strokeOpacity??h,y=h*f,m=g*f,S={},x={fill:s?FK(s,y):void 0};x.stroke=a?FK(a,m):x.fill,this._applyPreDrawUpdaters(l,e,r,y,x,S),d5e({container:c,context:l,particle:e,delta:n,colorStyles:x,backgroundMask:u.backgroundMask.enable,composite:u.backgroundMask.composite,radius:r*(1-e.zIndexFactor)**d.sizeRate,opacity:y,shadow:e.options.shadow,transform:S}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,n,r){this.draw(o=>g5e(o,e,n,r))}drawPlugin(e,n){this.draw(r=>p5e(r,e,n))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=Yze(e=>{for(const n of e)n.type==="attributes"&&n.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),this._initCover();try{await this._initTrail()}catch(e){sx().error(e)}this.initBackground(),this._safeMutationObserver(e=>{this.element&&e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,n=e.background,r=this.element;if(!r)return;const o=r.style;if(o){if(n.color){const i=Pc(n.color);o.backgroundColor=i?Pp(i,n.opacity):""}else o.backgroundColor="";o.backgroundImage=n.image||"",o.backgroundPosition=n.position||"",o.backgroundRepeat=n.repeat||"",o.backgroundSize=n.size||""}}initPlugins(){this._resizePlugins=[];for(const[,e]of this.container.plugins)e.resize&&this._resizePlugins.push(e),(e.particleFillColor||e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles||e.getTransformValues||e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&fS in e.dataset?e.dataset[fS]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=ms({},this.element.style),this.size.height=e.offsetHeight,this.size.width=e.offsetWidth,this._context=this.element.getContext("2d"),this._safeMutationObserver(n=>{this.element&&n.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(n=>{e.backgroundMask.enable&&e.backgroundMask.cover?(gA(n,this.size),this._paintBase(this._coverColorStyle)):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,n=e.retina.pixelRatio,r=e.canvas.size,o={width:this.element.offsetWidth*n,height:this.element.offsetHeight*n};if(o.height===r.height&&o.width===r.width&&o.height===this.element.height&&o.width===this.element.width)return!1;const i={...r};return this.element.width=r.width=this.element.offsetWidth*n,this.element.height=r.height=this.element.offsetHeight*n,this.container.started&&(this.resizeFactor={width:r.width/i.width,height:r.height/i.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>gA(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,n=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),n&&await e.refresh()}}function ml(t,e,n,r,o){if(r){let i={passive:!0};zf(o)?i.capture=o:o!==void 0&&(i=o),t.addEventListener(e,n,i)}else{const i=o;t.removeEventListener(e,n,i)}}class b5e{constructor(e){this.container=e,this._doMouseTouchClick=n=>{const r=this.container,o=r.actualOptions;if(this._canPush){const i=r.interactivity.mouse,s=i.position;if(!s)return;i.clickPosition={...s},i.clickTime=new Date().getTime();const a=o.interactivity.events.onClick;Vp(a.mode,l=>this.container.handleClickMode(l))}n.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=n=>{const r=n,o=this.container,i=o.options,s=i.defaultThemes,a=r.matches?s.dark:s.light,l=i.themes.find(c=>c.name===a);l&&l.default.auto&&o.loadTheme(a)},this._handleVisibilityChange=()=>{const n=this.container,r=n.actualOptions;this._mouseTouchFinish(),r.pauseOnBlur&&(document&&document.hidden?(n.pageHidden=!0,n.pause()):(n.pageHidden=!1,n.getAnimationStatus()?n.play(!0):n.draw(!0)))},this._handleWindowResize=async()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout),this._resizeTimeout=setTimeout(async()=>{const n=this.container.canvas;n&&await n.windowResize()},this.container.actualOptions.interactivity.events.resize.delay*1e3)},this._manageInteractivityListeners=(n,r)=>{const o=this._handlers,i=this.container,s=i.actualOptions,a=i.interactivity.element;if(!a)return;const l=a,c=i.canvas.element;c&&(c.style.pointerEvents=l===c?"initial":"none"),(s.interactivity.events.onHover.enable||s.interactivity.events.onClick.enable)&&(ml(a,jK,o.mouseMove,r),ml(a,Fze,o.touchStart,r),ml(a,zze,o.touchMove,r),s.interactivity.events.onClick.enable?(ml(a,LK,o.touchEndClick,r),ml(a,Lze,o.mouseUp,r),ml(a,jze,o.mouseDown,r)):ml(a,LK,o.touchEnd,r),ml(a,n,o.mouseLeave,r),ml(a,Bze,o.touchCancel,r))},this._manageListeners=n=>{const r=this._handlers,o=this.container,i=o.actualOptions,s=i.interactivity.detectsOn,a=o.canvas.element;let l=DK;s==="window"?(o.interactivity.element=window,l=Nze):s==="parent"&&a?o.interactivity.element=a.parentElement??a.parentNode:o.interactivity.element=a,this._manageMediaMatch(n),this._manageResize(n),this._manageInteractivityListeners(l,n),document&&ml(document,Uze,r.visibilityChange,n,!1)},this._manageMediaMatch=n=>{const r=this._handlers,o=Ose("(prefers-color-scheme: dark)");if(o){if(o.addEventListener!==void 0){ml(o,"change",r.themeChange,n);return}o.addListener!==void 0&&(n?o.addListener(r.oldThemeChange):o.removeListener(r.oldThemeChange))}},this._manageResize=n=>{const r=this._handlers,o=this.container;if(!o.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){ml(window,Hze,r.resize,n);return}const s=o.canvas.element;this._resizeObserver&&!n?(s&&this._resizeObserver.unobserve(s),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&n&&s&&(this._resizeObserver=new ResizeObserver(async a=>{a.find(c=>c.target===s)&&await this._handleWindowResize()}),this._resizeObserver.observe(s))},this._mouseDown=()=>{const{interactivity:n}=this.container;if(!n)return;const{mouse:r}=n;r.clicking=!0,r.downPosition=r.position},this._mouseTouchClick=n=>{const r=this.container,o=r.actualOptions,{mouse:i}=r.interactivity;i.inside=!0;let s=!1;const a=i.position;if(!(!a||!o.interactivity.events.onClick.enable)){for(const[,l]of r.plugins)if(l.clickPositionValid&&(s=l.clickPositionValid(a),s))break;s||this._doMouseTouchClick(n),i.clicking=!1}},this._mouseTouchFinish=()=>{const n=this.container.interactivity;if(!n)return;const r=n.mouse;delete r.position,delete r.clickPosition,delete r.downPosition,n.status=DK,r.inside=!1,r.clicking=!1},this._mouseTouchMove=n=>{const r=this.container,o=r.actualOptions,i=r.interactivity,s=r.canvas.element;if(!i||!i.element)return;i.mouse.inside=!0;let a;if(n.type.startsWith("pointer")){this._canPush=!0;const c=n;if(i.element===window){if(s){const u=s.getBoundingClientRect();a={x:c.clientX-u.left,y:c.clientY-u.top}}}else if(o.interactivity.detectsOn==="parent"){const u=c.target,d=c.currentTarget;if(u&&d&&s){const f=u.getBoundingClientRect(),h=d.getBoundingClientRect(),g=s.getBoundingClientRect();a={x:c.offsetX+2*f.left-(h.left+g.left),y:c.offsetY+2*f.top-(h.top+g.top)}}else a={x:c.offsetX??c.clientX,y:c.offsetY??c.clientY}}else c.target===s&&(a={x:c.offsetX??c.clientX,y:c.offsetY??c.clientY})}else if(this._canPush=n.type!=="touchmove",s){const c=n,u=c.touches[c.touches.length-1],d=s.getBoundingClientRect();a={x:u.clientX-(d.left??0),y:u.clientY-(d.top??0)}}const l=r.retina.pixelRatio;a&&(a.x*=l,a.y*=l),i.mouse.position=a,i.status=jK},this._touchEnd=n=>{const r=n,o=Array.from(r.changedTouches);for(const i of o)this._touches.delete(i.identifier);this._mouseTouchFinish()},this._touchEndClick=n=>{const r=n,o=Array.from(r.changedTouches);for(const i of o)this._touches.delete(i.identifier);this._mouseTouchClick(n)},this._touchStart=n=>{const r=n,o=Array.from(r.changedTouches);for(const i of o)this._touches.set(i.identifier,performance.now());this._mouseTouchMove(n)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:n=>this._mouseTouchMove(n),mouseUp:n=>this._mouseTouchClick(n),touchStart:n=>this._touchStart(n),touchMove:n=>this._mouseTouchMove(n),touchEnd:n=>this._touchEnd(n),touchCancel:n=>this._touchEnd(n),touchEndClick:n=>this._touchEndClick(n),visibilityChange:()=>this._handleVisibilityChange(),themeChange:n=>this._handleThemeChange(n),oldThemeChange:n=>this._handleThemeChange(n),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}class Hs{constructor(){this.value=""}static create(e,n){const r=new Hs;return r.load(e),n!==void 0&&(Cc(n)||mu(n)?r.load({value:n}):r.load(n)),r}load(e){(e==null?void 0:e.value)!==void 0&&(this.value=e.value)}}class S5e{constructor(){this.color=new Hs,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=Hs.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class x5e{constructor(){this.color=new Hs,this.color.value="#fff",this.opacity=1}load(e){e&&(e.color!==void 0&&(this.color=Hs.create(this.color,e.color)),e.opacity!==void 0&&(this.opacity=e.opacity))}}class w5e{constructor(){this.composite="destination-out",this.cover=new x5e,this.enable=!1}load(e){if(e){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const n=e.cover,r=Cc(e.cover)?{color:e.cover}:e.cover;this.cover.load(n.color!==void 0?n:{color:r})}e.enable!==void 0&&(this.enable=e.enable)}}}class C5e{constructor(){this.enable=!0,this.zIndex=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class E5e{constructor(){this.enable=!1,this.mode=[]}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}class HK{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type="circle"}get el(){return this.elementId}set el(e){this.elementId=e}get elementId(){return this.ids}set elementId(e){this.ids=e}get ids(){return Vp(this.selectors,e=>e.replace("#",""))}set ids(e){this.selectors=Vp(e,n=>`#${n}`)}load(e){if(!e)return;const n=e.ids??e.elementId??e.el;n!==void 0&&(this.ids=n),e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type)}}class P5e{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class _5e{constructor(){this.enable=!1,this.mode=[],this.parallax=new P5e}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class I5e{constructor(){this.delay=.5,this.enable=!0}load(e){e!==void 0&&(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class T5e{constructor(){this.onClick=new E5e,this.onDiv=new HK,this.onHover=new _5e,this.resize=new I5e}get onclick(){return this.onClick}set onclick(e){this.onClick=e}get ondiv(){return this.onDiv}set ondiv(e){this.onDiv=e}get onhover(){return this.onHover}set onhover(e){this.onHover=e}load(e){if(!e)return;this.onClick.load(e.onClick??e.onclick);const n=e.onDiv??e.ondiv;n!==void 0&&(this.onDiv=Vp(n,r=>{const o=new HK;return o.load(r),o})),this.onHover.load(e.onHover??e.onhover),zf(e.resize)?this.resize.enable=e.resize:this.resize.load(e.resize)}}class M5e{constructor(e,n){this._engine=e,this._container=n}load(e){if(!e||!this._container)return;const n=this._engine.plugins.interactors.get(this._container);if(n)for(const r of n)r.loadModeOptions&&r.loadModeOptions(this,e)}}class jse{constructor(e,n){this.detectsOn="window",this.events=new T5e,this.modes=new M5e(e,n)}get detect_on(){return this.detectsOn}set detect_on(e){this.detectsOn=e}load(e){if(!e)return;const n=e.detectsOn??e.detect_on;n!==void 0&&(this.detectsOn=n),this.events.load(e.events),this.modes.load(e.modes)}}class O5e{load(e){e&&(e.position&&(this.position={x:e.position.x??50,y:e.position.y??50,mode:e.position.mode??"percent"}),e.options&&(this.options=ms({},e.options)))}}class R5e{constructor(){this.maxWidth=1/0,this.options={},this.mode="canvas"}load(e){e&&(e.maxWidth!==void 0&&(this.maxWidth=e.maxWidth),e.mode!==void 0&&(e.mode==="screen"?this.mode="screen":this.mode="canvas"),e.options!==void 0&&(this.options=ms({},e.options)))}}class k5e{constructor(){this.auto=!1,this.mode="any",this.value=!1}load(e){e&&(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class A5e{constructor(){this.name="",this.default=new k5e}load(e){e&&(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=ms({},e.options)))}}class mA{constructor(){this.count=0,this.enable=!1,this.offset=0,this.speed=1,this.delay=0,this.decay=0,this.sync=!0}load(e){e&&(e.count!==void 0&&(this.count=yr(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(this.offset=yr(e.offset)),e.speed!==void 0&&(this.speed=yr(e.speed)),e.decay!==void 0&&(this.decay=yr(e.decay)),e.delay!==void 0&&(this.delay=yr(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class $5e{constructor(){this.h=new mA,this.s=new mA,this.l=new mA}load(e){e&&(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class ax extends Hs{constructor(){super(),this.animation=new $5e}static create(e,n){const r=new ax;return r.load(e),n!==void 0&&(Cc(n)||mu(n)?r.load({value:n}):r.load(n)),r}load(e){if(super.load(e),!e)return;const n=e.animation;n!==void 0&&(n.enable!==void 0?this.animation.h.load(n):this.animation.load(e.animation))}}class D5e{constructor(){this.speed=2}load(e){e&&e.speed!==void 0&&(this.speed=e.speed)}}class j5e{constructor(){this.enable=!0,this.retries=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class L5e{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){e&&(e.count!==void 0&&(this.count=yr(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=yr(e.speed)),e.decay!==void 0&&(this.decay=yr(e.decay)),e.delay!==void 0&&(this.delay=yr(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class Lse extends L5e{constructor(){super(),this.mode="auto",this.startValue="random"}load(e){super.load(e),e&&(e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue),e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class N5e{constructor(){this.enable=!1,this.minimumValue=0}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),e.minimumValue!==void 0&&(this.minimumValue=e.minimumValue))}}class dw{constructor(){this.random=new N5e,this.value=0}load(e){e&&(zf(e.random)?this.random.enable=e.random:this.random.load(e.random),e.value!==void 0&&(this.value=yr(e.value,this.random.enable?this.random.minimumValue:void 0)))}}class UK extends dw{constructor(){super(),this.random.minimumValue=.1,this.value=1}}class Nse{constructor(){this.horizontal=new UK,this.vertical=new UK}load(e){e&&(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class F5e{constructor(){this.absorb=new D5e,this.bounce=new Nse,this.enable=!1,this.maxSpeed=50,this.mode="bounce",this.overlap=new j5e}load(e){e&&(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=yr(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class z5e{constructor(){this.offset=0,this.value=90}load(e){e&&(e.offset!==void 0&&(this.offset=yr(e.offset)),e.value!==void 0&&(this.value=yr(e.value)))}}class B5e{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}get rotateX(){return this.rotate.x}set rotateX(e){this.rotate.x=e}get rotateY(){return this.rotate.y}set rotateY(e){this.rotate.y=e}load(e){var o,i;if(!e)return;e.distance!==void 0&&(this.distance=yr(e.distance)),e.enable!==void 0&&(this.enable=e.enable);const n=((o=e.rotate)==null?void 0:o.x)??e.rotateX;n!==void 0&&(this.rotate.x=n);const r=((i=e.rotate)==null?void 0:i.y)??e.rotateY;r!==void 0&&(this.rotate.y=r)}}class H5e{constructor(){this.x=50,this.y=50,this.mode="percent",this.radius=0}load(e){e&&(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class U5e{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=yr(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=yr(e.maxSpeed)))}}class W5e{constructor(){this.clamp=!0,this.delay=new dw,this.enable=!1,this.options={}}load(e){e&&(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=ms(this.options,e.options)))}}class V5e{load(e){e&&(e.color!==void 0&&(this.color=Hs.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class q5e{constructor(){this.enable=!1,this.length=10,this.fill=new V5e}get fillColor(){return this.fill.color}set fillColor(e){this.fill.load({color:e})}load(e){e&&(e.enable!==void 0&&(this.enable=e.enable),(e.fill!==void 0||e.fillColor!==void 0)&&this.fill.load(e.fill||{color:e.fillColor}),e.length!==void 0&&(this.length=e.length))}}class K5e{constructor(){this.default="out"}load(e){e&&(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class G5e{constructor(){this.acceleration=0,this.enable=!1}load(e){e&&(e.acceleration!==void 0&&(this.acceleration=yr(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=ms({},e.position)))}}class X5e{constructor(){this.angle=new z5e,this.attract=new B5e,this.center=new H5e,this.decay=0,this.distance={},this.direction="none",this.drift=0,this.enable=!1,this.gravity=new U5e,this.path=new W5e,this.outModes=new K5e,this.random=!1,this.size=!1,this.speed=2,this.spin=new G5e,this.straight=!1,this.trail=new q5e,this.vibrate=!1,this.warp=!1}get bounce(){return this.collisions}set bounce(e){this.collisions=e}get collisions(){return!1}set collisions(e){}get noise(){return this.path}set noise(e){this.path=e}get outMode(){return this.outModes.default}set outMode(e){this.outModes.default=e}get out_mode(){return this.outMode}set out_mode(e){this.outMode=e}load(e){if(!e)return;this.angle.load(Ec(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=yr(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=Ec(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=yr(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const n=e.outModes??e.outMode??e.out_mode;n!==void 0&&(km(n)?this.outModes.load(n):this.outModes.load({default:n})),this.path.load(e.path??e.noise),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=yr(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class Y5e extends Lse{constructor(){super(),this.destroy="none",this.speed=2}get opacity_min(){return this.minimumValue}set opacity_min(e){this.minimumValue=e}load(e){(e==null?void 0:e.opacity_min)!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.opacity_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class Q5e extends dw{constructor(){super(),this.animation=new Y5e,this.random.minimumValue=.1,this.value=1}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(!e)return;super.load(e);const n=e.animation??e.anim;n!==void 0&&(this.animation.load(n),this.value=yr(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class Z5e{constructor(){this.enable=!1,this.width=1920,this.height=1080}get area(){return this.width}set area(e){this.width=e}get factor(){return this.height}set factor(e){this.height=e}get value_area(){return this.area}set value_area(e){this.area=e}load(e){if(!e)return;e.enable!==void 0&&(this.enable=e.enable);const n=e.width??e.area??e.value_area;n!==void 0&&(this.width=n);const r=e.height??e.factor;r!==void 0&&(this.height=r)}}class J5e{constructor(){this.density=new Z5e,this.limit=0,this.value=0}get max(){return this.limit}set max(e){this.limit=e}load(e){if(!e)return;this.density.load(e.density);const n=e.limit??e.max;n!==void 0&&(this.limit=n),e.value!==void 0&&(this.value=e.value)}}class eBe{constructor(){this.blur=0,this.color=new Hs,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=Hs.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}const vA="character",yA="char",bA="image",SA="images",xA="polygon",wA="star";let tBe=class{constructor(){this.loadShape=(e,n,r,o)=>{if(!e)return;const i=mu(e),s=i?[]:{},a=i!==mu(this.options[n]),l=i!==mu(this.options[r]);a&&(this.options[n]=s),l&&o&&(this.options[r]=s),this.options[n]=ms(this.options[n]??s,e),(!this.options[r]||o)&&(this.options[r]=ms(this.options[r]??s,e))},this.close=!0,this.fill=!0,this.options={},this.type="circle"}get character(){return this.options[vA]??this.options[yA]}set character(e){this.options[yA]=this.options[vA]=e}get custom(){return this.options}set custom(e){this.options=e}get image(){return this.options[bA]??this.options[SA]}set image(e){this.options[SA]=this.options[bA]=e}get images(){return this.image}set images(e){this.image=e}get polygon(){return this.options[xA]??this.options[wA]}set polygon(e){this.options[wA]=this.options[xA]=e}get stroke(){return[]}set stroke(e){}load(e){if(!e)return;const n=e.options??e.custom;if(n!==void 0)for(const r in n){const o=n[r];o&&(this.options[r]=ms(this.options[r]??{},o))}this.loadShape(e.character,vA,yA,!0),this.loadShape(e.polygon,xA,wA,!1),this.loadShape(e.image??e.images,bA,SA,!0),e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}};class nBe extends Lse{constructor(){super(),this.destroy="none",this.speed=5}get size_min(){return this.minimumValue}set size_min(e){this.minimumValue=e}load(e){(e==null?void 0:e.size_min)!==void 0&&e.minimumValue===void 0&&(e.minimumValue=e.size_min),super.load(e),e&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class rBe extends dw{constructor(){super(),this.animation=new nBe,this.random.minimumValue=1,this.value=3}get anim(){return this.animation}set anim(e){this.animation=e}load(e){if(super.load(e),!e)return;const n=e.animation??e.anim;n!==void 0&&(this.animation.load(n),this.value=yr(this.value,this.animation.enable?this.animation.minimumValue:void 0))}}class WK{constructor(){this.width=0}load(e){e&&(e.color!==void 0&&(this.color=ax.create(this.color,e.color)),e.width!==void 0&&(this.width=yr(e.width)),e.opacity!==void 0&&(this.opacity=yr(e.opacity)))}}class oBe extends dw{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),e&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class iBe{constructor(e,n){this._engine=e,this._container=n,this.bounce=new Nse,this.collisions=new F5e,this.color=new ax,this.color.value="#fff",this.groups={},this.move=new X5e,this.number=new J5e,this.opacity=new Q5e,this.reduceDuplicates=!1,this.shadow=new eBe,this.shape=new tBe,this.size=new rBe,this.stroke=new WK,this.zIndex=new oBe}load(e){var o,i,s;if(!e)return;if(this.bounce.load(e.bounce),this.color.load(ax.create(this.color,e.color)),e.groups!==void 0)for(const a in e.groups){const l=e.groups[a];l!==void 0&&(this.groups[a]=ms(this.groups[a]??{},l))}this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex);const n=((o=e.move)==null?void 0:o.collisions)??((i=e.move)==null?void 0:i.bounce);n!==void 0&&(this.collisions.enable=n),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=ms({},e.interactivity));const r=e.stroke??((s=e.shape)==null?void 0:s.stroke);if(r&&(this.stroke=Vp(r,a=>{const l=new WK;return l.load(a),l})),this._container){const a=this._engine.plugins.updaters.get(this._container);if(a)for(const c of a)c.loadOptions&&c.loadOptions(this,e);const l=this._engine.plugins.interactors.get(this._container);if(l)for(const c of l)c.loadParticlesOptions&&c.loadParticlesOptions(this,e)}}}function Fse(t,...e){for(const n of e)t.load(n)}function zse(t,e,...n){const r=new iBe(t,e);return Fse(r,...n),r}let sBe=class{constructor(e,n){this._findDefaultTheme=r=>this.themes.find(o=>o.default.value&&o.default.mode===r)??this.themes.find(o=>o.default.value&&o.default.mode==="any"),this._importPreset=r=>{this.load(this._engine.plugins.getPreset(r))},this._engine=e,this._container=n,this.autoPlay=!0,this.background=new S5e,this.backgroundMask=new w5e,this.defaultThemes={},this.delay=0,this.fullScreen=new C5e,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new jse(e,n),this.manualParticles=[],this.particles=zse(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}get backgroundMode(){return this.fullScreen}set backgroundMode(e){this.fullScreen.load(e)}get fps_limit(){return this.fpsLimit}set fps_limit(e){this.fpsLimit=e}get retina_detect(){return this.detectRetina}set retina_detect(e){this.detectRetina=e}load(e){var s,a;if(!e)return;e.preset!==void 0&&Vp(e.preset,l=>this._importPreset(l)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.delay!==void 0&&(this.delay=yr(e.delay));const n=e.detectRetina??e.retina_detect;n!==void 0&&(this.detectRetina=n),e.duration!==void 0&&(this.duration=yr(e.duration));const r=e.fpsLimit??e.fps_limit;r!==void 0&&(this.fpsLimit=r),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const o=e.fullScreen??e.backgroundMode;zf(o)?this.fullScreen.enable=o:this.fullScreen.load(o),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(l=>{const c=new O5e;return c.load(l),c})),this.particles.load(e.particles),this.style=ms(this.style,e.style),this._engine.plugins.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const i=this._engine.plugins.interactors.get(this._container);if(i)for(const l of i)l.loadOptions&&l.loadOptions(this,e);if(e.responsive!==void 0)for(const l of e.responsive){const c=new R5e;c.load(l),this.responsive.push(c)}if(this.responsive.sort((l,c)=>l.maxWidth-c.maxWidth),e.themes!==void 0)for(const l of e.themes){const c=this.themes.find(u=>u.name===l.name);if(c)c.load(l);else{const u=new A5e;u.load(l),this.themes.push(u)}}this.defaultThemes.dark=(s=this._findDefaultTheme("dark"))==null?void 0:s.name,this.defaultThemes.light=(a=this._findDefaultTheme("light"))==null?void 0:a.name}setResponsive(e,n,r){this.load(r);const o=this.responsive.find(i=>i.mode==="screen"&&screen?i.maxWidth>screen.availWidth:i.maxWidth*n>e);return this.load(o==null?void 0:o.options),o==null?void 0:o.maxWidth}setTheme(e){if(e){const n=this.themes.find(r=>r.name===e);n&&this.load(n.options)}else{const n=Ose("(prefers-color-scheme: dark)"),r=n&&n.matches,o=this._findDefaultTheme(r?"dark":"light");o&&this.load(o.options)}}};class aBe{constructor(e,n){this.container=n,this._engine=e,this._interactors=e.plugins.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[]}async externalInteract(e){for(const n of this._externalInteractors)n.isEnabled()&&await n.interact(e)}handleClickMode(e){for(const n of this._externalInteractors)n.handleClickMode&&n.handleClickMode(e)}init(){this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case"external":this._externalInteractors.push(e);break;case"particles":this._particleInteractors.push(e);break}e.init()}}async particlesInteract(e,n){for(const r of this._externalInteractors)r.clear(e,n);for(const r of this._particleInteractors)r.isEnabled(e)&&await r.interact(e,n)}async reset(e){for(const n of this._externalInteractors)n.isEnabled()&&n.reset(e);for(const n of this._particleInteractors)n.isEnabled(e)&&n.reset(e)}}const VK=t=>{if(!Qze(t.outMode,t.checkModes))return;const e=t.radius*2;t.coord>t.maxCoord-e?t.setCb(-t.radius):t.coord<e&&t.setCb(t.radius)};class lBe{constructor(e,n,r,o,i,s){this.container=r,this._calcPosition=(a,l,c,u=0)=>{for(const[,x]of a.plugins){const C=x.particlePosition!==void 0?x.particlePosition(l,this):void 0;if(C)return Da.create(C.x,C.y,c)}const d=a.canvas.size,f=Kze({size:d,position:l}),h=Da.create(f.x,f.y,c),g=this.getRadius(),y=this.options.move.outModes,m=x=>{VK({outMode:x,checkModes:["bounce","bounce-horizontal"],coord:h.x,maxCoord:a.canvas.size.width,setCb:C=>h.x+=C,radius:g})},S=x=>{VK({outMode:x,checkModes:["bounce","bounce-vertical"],coord:h.y,maxCoord:a.canvas.size.height,setCb:C=>h.y+=C,radius:g})};return m(y.left??y.default),m(y.right??y.default),S(y.top??y.default),S(y.bottom??y.default),this._checkOverlap(h,u)?this._calcPosition(a,void 0,c,u+1):h},this._calculateVelocity=()=>{const a=qze(this.direction),l=a.copy(),c=this.options.move;if(c.direction==="inside"||c.direction==="outside")return l;const u=Math.PI/180*Zn(c.angle.value),d=Math.PI/180*Zn(c.angle.offset),f={left:d-u/2,right:d+u/2};return c.straight||(l.angle+=pc(yr(f.left,f.right))),c.random&&typeof c.speed=="number"&&(l.length*=Ho()),l},this._checkOverlap=(a,l=0)=>{const c=this.options.collisions,u=this.getRadius();if(!c.enable)return!1;const d=c.overlap;if(d.enable)return!1;const f=d.retries;if(f>=0&&l>f)throw new Error(`${Wp} particle is overlapping and can't be placed`);return!!this.container.particles.find(h=>Ff(a,h.position)<u+h.getRadius())},this._getRollColor=a=>{if(!a||!this.roll||!this.backColor&&!this.roll.alter)return a;const l=this.roll.horizontal&&this.roll.vertical?2:1,c=this.roll.horizontal?Math.PI/2:0;return Math.floor(((this.roll.angle??0)+c)/(Math.PI/l))%2?this.backColor?this.backColor:this.roll.alter?m5e(a,this.roll.alter.type,this.roll.alter.value):a:a},this._initPosition=a=>{const l=this.container,c=Zn(this.options.zIndex.value);this.position=this._calcPosition(l,a,pv(c,0,l.zLayers)),this.initialPosition=this.position.copy();const u=l.canvas.size;switch(this.moveCenter={...kse(this.options.move.center,u),radius:this.options.move.center.radius??0,mode:this.options.move.center.mode??"percent"},this.direction=Vze(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case"inside":this.outType="inside";break;case"outside":this.outType="outside";break}this.offset=wc.origin},this._loadShapeData=(a,l)=>{const c=a.options[this.shape];if(c)return ms({close:a.close,fill:a.fill},hS(c,this.id,l))},this._engine=e,this.init(n,o,i,s)}destroy(e){if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const n=this.container,r=this.pathGenerator;for(const[,o]of n.plugins)o.particleDestroyed&&o.particleDestroyed(this,e);for(const o of n.particles.updaters)o.particleDestroyed&&o.particleDestroyed(this,e);r&&r.reset(this)}draw(e){const n=this.container;for(const[,r]of n.plugins)n.canvas.drawParticlePlugin(r,this,e);n.canvas.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??BK(this.color))}getMass(){return this.getRadius()**2*Math.PI/2}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??BK(this.strokeColor))}init(e,n,r,o){const i=this.container,s=this._engine;this.id=e,this.group=o,this.fill=!0,this.pathRotation=!1,this.close=!0,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType="normal",this.ignoresResizeRatio=!0;const a=i.retina.pixelRatio,l=i.actualOptions,c=zse(this._engine,i,l.particles),u=c.shape.type,{reduceDuplicates:d}=c;this.shape=hS(u,this.id,d);const f=c.shape;if(r&&r.shape&&r.shape.type){const C=r.shape.type,E=hS(C,this.id,d);E&&(this.shape=E,f.load(r.shape))}this.shapeData=this._loadShapeData(f,d),c.load(r);const h=this.shapeData;h&&c.load(h.particles);const g=new jse(s,i);g.load(i.actualOptions.interactivity),g.load(c.interactivity),this.interactivity=g,this.fill=(h==null?void 0:h.fill)??c.shape.fill,this.close=(h==null?void 0:h.close)??c.shape.close,this.options=c;const y=this.options.move.path;this.pathDelay=S5(y.delay)*1e3,y.generator&&(this.pathGenerator=this._engine.plugins.getPathGenerator(y.generator),this.pathGenerator&&i.addPath(y.generator,this.pathGenerator)&&this.pathGenerator.init(i)),i.retina.initParticle(this),this.size=Rse(this.options.size,a),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(n),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy(),this.moveDecay=1-Zn(this.options.move.decay);const m=i.particles;m.needsSort=m.needsSort||m.lastZIndex<this.position.z,m.lastZIndex=this.position.z,this.zIndexFactor=this.position.z/i.zLayers,this.sides=24;let S=i.drawers.get(this.shape);S||(S=this._engine.plugins.getShapeDrawer(this.shape),S&&i.drawers.set(this.shape,S)),S&&S.loadShape&&S.loadShape(this);const x=S==null?void 0:S.getSidesCount;x&&(this.sides=x(this)),this.spawning=!1,this.shadowColor=Pc(this.options.shadow.color);for(const C of i.particles.updaters)C.init(this);for(const C of i.particles.movers)C.init&&C.init(this);S&&S.particleInit&&S.particleInit(i,this);for(const[,C]of i.plugins)C.particleCreated&&C.particleCreated(this)}isInsideCanvas(){const e=this.getRadius(),n=this.container.canvas.size,r=this.position;return r.x>=-e&&r.y>=-e&&r.y<=n.height+e&&r.x<=n.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){for(const e of this.container.particles.updaters)e.reset&&e.reset(this)}}class cBe{constructor(e,n){this.position=e,this.particle=n}}let Bse=class{constructor(e,n){this.position={x:e,y:n}}};class qp extends Bse{constructor(e,n,r,o){super(e,n),this.size={height:o,width:r}}contains(e){const n=this.size.width,r=this.size.height,o=this.position;return e.x>=o.x&&e.x<=o.x+n&&e.y>=o.y&&e.y<=o.y+r}intersects(e){e instanceof Kp&&e.intersects(this);const n=this.size.width,r=this.size.height,o=this.position,i=e.position,s=e instanceof qp?e.size:{width:0,height:0},a=s.width,l=s.height;return i.x<o.x+n&&i.x+a>o.x&&i.y<o.y+r&&i.y+l>o.y}}class Kp extends Bse{constructor(e,n,r){super(e,n),this.radius=r}contains(e){return Ff(e,this.position)<=this.radius}intersects(e){const n=this.position,r=e.position,o={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},i=this.radius;if(e instanceof Kp){const s=i+e.radius,a=Math.sqrt(o.x**2+o.y**2);return s>a}else if(e instanceof qp){const{width:s,height:a}=e.size;return Math.pow(o.x-s,2)+Math.pow(o.y-a,2)<=i**2||o.x<=i+s&&o.y<=i+a||o.x<=s||o.y<=a}return!1}}class K_{constructor(e,n){this.rectangle=e,this.capacity=n,this._subdivide=()=>{const{x:r,y:o}=this.rectangle.position,{width:i,height:s}=this.rectangle.size,{capacity:a}=this;for(let l=0;l<4;l++)this._subs.push(new K_(new qp(r+i/2*(l%2),o+s/2*(Math.round(l/2)-l%2),i/2,s/2),a));this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(n=>n.insert(e))):!1}query(e,n,r){const o=r||[];if(!e.intersects(this.rectangle))return[];for(const i of this._points)!e.contains(i.position)&&Ff(e.position,i.position)>i.particle.getRadius()&&(!n||n(i.particle))||o.push(i.particle);if(this._divided)for(const i of this._subs)i.query(e,n,o);return o}queryCircle(e,n,r){return this.query(new Kp(e.x,e.y,n),r)}queryRectangle(e,n,r){return this.query(new qp(e.x,e.y,n.width,n.height),r)}}const qK=4,KK=t=>new qp(-t.width/4,-t.height/4,t.width*3/2,t.height*3/2);let uBe=class{constructor(e,n){this._applyDensity=(o,i,s)=>{var h;if(!((h=o.number.density)!=null&&h.enable))return;const a=o.number,l=this._initDensityFactor(a.density),c=a.value,u=a.limit>0?a.limit:c,d=Math.min(c,u)*l+i,f=Math.min(this.count,this.filter(g=>g.group===s).length);this.limit=a.limit*l,f<d?this.push(Math.abs(d-f),void 0,o,s):f>d&&this.removeQuantity(f-d,s)},this._initDensityFactor=o=>{const i=this._container;if(!i.canvas.element||!o.enable)return 1;const s=i.canvas.element,a=i.retina.pixelRatio;return s.width*s.height/(o.factor*a**2*o.area)},this._pushParticle=(o,i,s,a)=>{try{let l=this.pool.pop();l?l.init(this._nextId,o,i,s):l=new lBe(this._engine,this._nextId,this._container,o,i,s);let c=!0;return a&&(c=a(l)),c?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent("particleAdded",{container:this._container,data:{particle:l}}),l):void 0}catch(l){sx().warning(`${Wp} adding particle: ${l}`);return}},this._removeParticle=(o,i,s)=>{const a=this._array[o];if(!a||a.group!==i)return!1;a.destroy(s);const l=this._zArray.indexOf(a);return this._array.splice(o,1),this._zArray.splice(l,1),this.pool.push(a),this._engine.dispatchEvent("particleRemoved",{container:this._container,data:{particle:a}}),!0},this._engine=e,this._container=n,this._nextId=0,this._array=[],this._zArray=[],this.pool=[],this.limit=0,this.needsSort=!1,this.lastZIndex=0,this._interactionManager=new aBe(e,n);const r=n.canvas.size;this.quadTree=new K_(KK(r),qK),this.movers=this._engine.plugins.getMovers(n,!0),this.updaters=this._engine.plugins.getUpdaters(n,!0)}get count(){return this._array.length}addManualParticles(){const e=this._container,n=e.actualOptions;for(const r of n.manualParticles)this.addParticle(r.position?kse(r.position,e.canvas.size):void 0,r.options)}addParticle(e,n,r,o){const i=this._container,s=i.actualOptions,a=s.particles.number.limit;if(a>0){const l=this.count+1-a;l>0&&this.removeQuantity(l)}return this._pushParticle(e,n,r,o)}clear(){this._array=[],this._zArray=[]}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}async draw(e){const n=this._container;n.canvas.clear(),await this.update(e);for(const[,r]of n.plugins)n.canvas.drawPlugin(r,e);for(const r of this._zArray)r.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}handleClickMode(e){this._interactionManager.handleClickMode(e)}init(){var o;const e=this._container,n=e.actualOptions;this.lastZIndex=0,this.needsSort=!1;let r=!1;this.updaters=this._engine.plugins.getUpdaters(e,!0),this._interactionManager.init();for(const[,i]of e.plugins)if(i.particlesInitialization!==void 0&&(r=i.particlesInitialization()),r)break;this._interactionManager.init();for(const[,i]of e.pathGenerators)i.init(e);if(this.addManualParticles(),!r){for(const i in n.particles.groups){const s=n.particles.groups[i];for(let a=this.count,l=0;l<((o=s.number)==null?void 0:o.value)&&a<n.particles.number.value;a++,l++)this.addParticle(void 0,s,i)}for(let i=this.count;i<n.particles.number.value;i++)this.addParticle()}}push(e,n,r,o){this.pushing=!0;for(let i=0;i<e;i++)this.addParticle(n==null?void 0:n.position,r,o);this.pushing=!1}async redraw(){this.clear(),this.init(),await this.draw({value:0,factor:0})}remove(e,n,r){this.removeAt(this._array.indexOf(e),void 0,n,r)}removeAt(e,n=1,r,o){if(e<0||e>this.count)return;let i=0;for(let s=e;i<n&&s<this.count;s++)this._removeParticle(s--,r,o)&&i++}removeQuantity(e,n){this.removeAt(0,e,n)}setDensity(){const e=this._container.actualOptions,n=e.particles.groups;for(const r in n)this._applyDensity(n[r],0,r);this._applyDensity(e.particles,e.manualParticles.length)}async update(e){const n=this._container,r=new Set;this.quadTree=new K_(KK(n.canvas.size),qK);for(const[,o]of n.pathGenerators)o.update();for(const[,o]of n.plugins)o.update&&o.update(e);for(const o of this._array){const i=n.canvas.resizeFactor;i&&!o.ignoresResizeRatio&&(o.position.x*=i.width,o.position.y*=i.height,o.initialPosition.x*=i.width,o.initialPosition.y*=i.height),o.ignoresResizeRatio=!1,await this._interactionManager.reset(o);for(const[,s]of this._container.plugins){if(o.destroyed)break;s.particleUpdate&&s.particleUpdate(o,e)}for(const s of this.movers)s.isEnabled(o)&&s.move(o,e);if(o.destroyed){r.add(o);continue}this.quadTree.insert(new cBe(o.getPosition(),o))}if(r.size){const o=i=>!r.has(i);this._array=this.filter(o),this._zArray=this._zArray.filter(o),this.pool.push(...r)}await this._interactionManager.externalInteract(e);for(const o of this._array){for(const i of this.updaters)i.update(o,e);!o.destroyed&&!o.spawning&&await this._interactionManager.particlesInteract(o,e)}if(delete n.canvas.resizeFactor,this.needsSort){const o=this._zArray;o.sort((i,s)=>s.position.z-i.position.z||i.id-s.id),this.lastZIndex=o[o.length-1].position.z,this.needsSort=!1}}};class dBe{constructor(e){this.container=e,this.pixelRatio=1,this.reduceFactor=1}init(){const e=this.container,n=e.actualOptions;this.pixelRatio=!n.detectRetina||xM()?1:window.devicePixelRatio,this.reduceFactor=1;const r=this.pixelRatio;if(e.canvas.element){const s=e.canvas.element;e.canvas.size.width=s.offsetWidth*r,e.canvas.size.height=s.offsetHeight*r}const o=n.particles,i=o.move;this.attractDistance=Zn(i.attract.distance)*r,this.maxSpeed=Zn(i.gravity.maxSpeed)*r,this.sizeAnimationSpeed=Zn(o.size.animation.speed)*r}initParticle(e){const n=e.options,r=this.pixelRatio,o=n.move,i=o.distance,s=e.retina;s.attractDistance=Zn(o.attract.distance)*r,s.moveDrift=Zn(o.drift)*r,s.moveSpeed=Zn(o.speed)*r,s.sizeAnimationSpeed=Zn(n.size.animation.speed)*r;const a=s.maxDistance;a.horizontal=i.horizontal!==void 0?i.horizontal*r:void 0,a.vertical=i.vertical!==void 0?i.vertical*r:void 0,s.maxSpeed=Zn(o.gravity.maxSpeed)*r}}function vo(t){return t&&!t.destroyed}function fBe(t,e=60,n=!1){return{value:t,factor:n?60/e:60*t/1e3}}function sm(t,e,...n){const r=new sBe(t,e);return Fse(r,...n),r}const hBe="default",GK={generate:t=>t.velocity,init:()=>{},update:()=>{},reset:()=>{}};class pBe{constructor(e,n,r){this.id=n,this._intersectionManager=o=>{if(!(!vo(this)||!this.actualOptions.pauseOnOutsideViewport))for(const i of o)i.target===this.interactivity.element&&(i.isIntersecting?this.play:this.pause)()},this._nextFrame=async o=>{try{if(!this.smooth&&this.lastFrameTime!==void 0&&o<this.lastFrameTime+1e3/this.fpsLimit){this.draw(!1);return}this.lastFrameTime??(this.lastFrameTime=o);const i=fBe(o-this.lastFrameTime,this.fpsLimit,this.smooth);if(this.addLifeTime(i.value),this.lastFrameTime=o,i.value>1e3){this.draw(!1);return}if(await this.particles.draw(i),!this.alive()){this.destroy();return}this.getAnimationStatus()&&this.draw(!1)}catch(i){sx().error(`${Wp} in animation loop`,i)}},this._engine=e,this.fpsLimit=120,this.smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this.lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._sourceOptions=r,this._initialSourceOptions=r,this.retina=new dBe(this),this.canvas=new y5e(this),this.particles=new uBe(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.drawers=new Map,this._options=sm(this._engine,this),this.actualOptions=sm(this._engine,this),this._eventListeners=new b5e(this),typeof IntersectionObserver<"u"&&IntersectionObserver&&(this._intersectionObserver=new IntersectionObserver(o=>this._intersectionManager(o))),this._engine.dispatchEvent("containerBuilt",{container:this})}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!vo(this))return;const n=this.interactivity.element;if(!n)return;const r=(d,f,h)=>{if(!vo(this))return;const g=this.retina.pixelRatio,y={x:f.x*g,y:f.y*g},m=this.particles.quadTree.queryCircle(y,h*g);e(d,m)},o=d=>{if(!vo(this))return;const f=d,h={x:f.offsetX||f.clientX,y:f.offsetY||f.clientY};r(d,h,1)},i=()=>{vo(this)&&(c=!0,u=!1)},s=()=>{vo(this)&&(u=!0)},a=d=>{if(vo(this)){if(c&&!u){const f=d;let h=f.touches[f.touches.length-1];if(!h&&(h=f.changedTouches[f.changedTouches.length-1],!h))return;const g=this.canvas.element,y=g?g.getBoundingClientRect():void 0,m={x:h.clientX-(y?y.left:0),y:h.clientY-(y?y.top:0)};r(d,m,Math.max(h.radiusX,h.radiusY))}c=!1,u=!1}},l=()=>{vo(this)&&(c=!1,u=!1)};let c=!1,u=!1;n.addEventListener("click",o),n.addEventListener("touchstart",i),n.addEventListener("touchmove",s),n.addEventListener("touchend",a),n.addEventListener("touchcancel",l)}addLifeTime(e){this._lifeTime+=e}addPath(e,n,r=!1){return!vo(this)||!r&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,n??GK),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}destroy(){if(!vo(this))return;this.stop(),this.particles.destroy(),this.canvas.destroy();for(const[,r]of this.drawers)r.destroy&&r.destroy(this);for(const r of this.drawers.keys())this.drawers.delete(r);this._engine.plugins.destroy(this),this.destroyed=!0;const e=this._engine.dom(),n=e.findIndex(r=>r===this);n>=0&&e.splice(n,1),this._engine.dispatchEvent("containerDestroyed",{container:this})}draw(e){if(!vo(this))return;let n=e;this._drawAnimationFrame=requestAnimationFrame(async r=>{n&&(this.lastFrameTime=void 0,n=!1),await this._nextFrame(r)})}async export(e,n={}){for(const[,r]of this.plugins){if(!r.export)continue;const o=await r.export(e,n);if(o.supported)return o.blob}sx().error(`${Wp} - Export plugin with type ${e} not found`)}getAnimationStatus(){return!this._paused&&!this.pageHidden&&vo(this)}handleClickMode(e){if(vo(this)){this.particles.handleClickMode(e);for(const[,n]of this.plugins)n.handleClickMode&&n.handleClickMode(e)}}async init(){if(!vo(this))return;const e=this._engine.plugins.getSupportedShapes();for(const r of e){const o=this._engine.plugins.getShapeDrawer(r);o&&this.drawers.set(r,o)}this._options=sm(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=sm(this._engine,this,this._options);const n=this._engine.plugins.getAvailablePlugins(this);for(const[r,o]of n)this.plugins.set(r,o);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize(),this.zLayers=this.actualOptions.zLayers,this._duration=Zn(this.actualOptions.duration)*1e3,this._delay=Zn(this.actualOptions.delay)*1e3,this._lifeTime=0,this.fpsLimit=this.actualOptions.fpsLimit>0?this.actualOptions.fpsLimit:120,this.smooth=this.actualOptions.smooth;for(const[,r]of this.drawers)r.init&&await r.init(this);for(const[,r]of this.plugins)r.init&&await r.init();this._engine.dispatchEvent("containerInit",{container:this}),this.particles.init(),this.particles.setDensity();for(const[,r]of this.plugins)r.particlesSetup&&r.particlesSetup();this._engine.dispatchEvent("particlesSetup",{container:this})}async loadTheme(e){vo(this)&&(this._currentTheme=e,await this.refresh())}pause(){if(vo(this)&&(this._drawAnimationFrame!==void 0&&(cancelAnimationFrame(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const[,e]of this.plugins)e.pause&&e.pause();this.pageHidden||(this._paused=!0),this._engine.dispatchEvent("containerPaused",{container:this})}}play(e){if(!vo(this))return;const n=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),n)for(const[,r]of this.plugins)r.play&&r.play();this._engine.dispatchEvent("containerPlay",{container:this}),this.draw(n||!1)}async refresh(){if(vo(this))return this.stop(),this.start()}async reset(){if(vo(this))return this._initialSourceOptions=void 0,this._options=sm(this._engine,this),this.actualOptions=sm(this._engine,this,this._options),this.refresh()}setNoise(e,n,r){vo(this)&&this.setPath(e,n,r)}setPath(e,n,r){if(!e||!vo(this))return;const o={...GK};if(Ase(e))o.generate=e,n&&(o.init=n),r&&(o.update=r);else{const i=o;o.generate=e.generate||i.generate,o.init=e.init||i.init,o.update=e.update||i.update}this.addPath(hBe,o,!0)}async start(){!vo(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{this._delayTimeout=setTimeout(async()=>{this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const[,n]of this.plugins)n.start&&await n.start();this._engine.dispatchEvent("containerStarted",{container:this}),this.play(),e()},this._delay)}))}stop(){if(!(!vo(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const[,e]of this.plugins)e.stop&&e.stop();for(const e of this.plugins.keys())this.plugins.delete(e);this._sourceOptions=this._options,this._engine.dispatchEvent("containerStopped",{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this.responsiveMaxWidth===e?!1:(this.responsiveMaxWidth=e,!0)}}class gBe{constructor(){this._listeners=new Map}addEventListener(e,n){this.removeEventListener(e,n);let r=this._listeners.get(e);r||(r=[],this._listeners.set(e,r)),r.push(n)}dispatchEvent(e,n){const r=this._listeners.get(e);r&&r.forEach(o=>o(n))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,n){const r=this._listeners.get(e);if(!r)return;const o=r.length,i=r.indexOf(n);i<0||(o===1?this._listeners.delete(e):r.splice(i,1))}}function CA(t,e,n,r=!1){let o=e.get(t);return(!o||r)&&(o=[...n.values()].map(i=>i(t)),e.set(t,o)),o}class mBe{constructor(e){this._engine=e,this.plugins=[],this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.drawers=new Map,this.pathGenerators=new Map}addInteractor(e,n){this._initializers.interactors.set(e,n)}addParticleMover(e,n){this._initializers.movers.set(e,n)}addParticleUpdater(e,n){this._initializers.updaters.set(e,n)}addPathGenerator(e,n){!this.getPathGenerator(e)&&this.pathGenerators.set(e,n)}addPlugin(e){!this.getPlugin(e.id)&&this.plugins.push(e)}addPreset(e,n,r=!1){(r||!this.getPreset(e))&&this.presets.set(e,n)}addShapeDrawer(e,n){Vp(e,r=>{!this.getShapeDrawer(r)&&this.drawers.set(r,n)})}destroy(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}getAvailablePlugins(e){const n=new Map;for(const r of this.plugins)r.needsPlugin(e.actualOptions)&&n.set(r.id,r.getPlugin(e));return n}getInteractors(e,n=!1){return CA(e,this.interactors,this._initializers.interactors,n)}getMovers(e,n=!1){return CA(e,this.movers,this._initializers.movers,n)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(n=>n.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.drawers.get(e)}getSupportedShapes(){return this.drawers.keys()}getUpdaters(e,n=!1){return CA(e,this.updaters,this._initializers.updaters,n)}loadOptions(e,n){for(const r of this.plugins)r.loadOptions(e,n)}loadParticlesOptions(e,n,...r){const o=this.updaters.get(e);if(o)for(const i of o)i.loadOptions&&i.loadOptions(n,...r)}}async function vBe(t){const e=hS(t.url,t.index);if(!e)return t.fallback;const n=await fetch(e);return n.ok?n.json():(sx().error(`${Wp} ${n.status} while retrieving config file`),t.fallback)}function yBe(t){return!t.id&&!t.element&&!t.url&&!t.options}function bBe(t){return!yBe(t)}let SBe=class{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new gBe,this._initialized=!1,this.plugins=new mBe(this)}get configs(){const e={};for(const[n,r]of this._configs)e[n]=r;return e}get version(){return"2.12.0"}addConfig(e,n){Cc(e)?n&&(n.name=e,this._configs.set(e,n)):this._configs.set(e.name??"default",e)}addEventListener(e,n){this._eventDispatcher.addEventListener(e,n)}async addInteractor(e,n,r=!0){this.plugins.addInteractor(e,n),await this.refresh(r)}async addMover(e,n,r=!0){this.plugins.addParticleMover(e,n),await this.refresh(r)}async addParticleUpdater(e,n,r=!0){this.plugins.addParticleUpdater(e,n),await this.refresh(r)}async addPathGenerator(e,n,r=!0){this.plugins.addPathGenerator(e,n),await this.refresh(r)}async addPlugin(e,n=!0){this.plugins.addPlugin(e),await this.refresh(n)}async addPreset(e,n,r=!1,o=!0){this.plugins.addPreset(e,n,r),await this.refresh(o)}async addShape(e,n,r,o,i,s=!0){let a,l=s,c,u,d;zf(r)?(l=r,c=void 0):c=r,zf(o)?(l=o,u=void 0):u=o,zf(i)?(l=i,d=void 0):d=i,Ase(n)?a={afterEffect:u,destroy:d,draw:n,init:c}:a=n,this.plugins.addShapeDrawer(e,a),await this.refresh(l)}dispatchEvent(e,n){this._eventDispatcher.dispatchEvent(e,n)}dom(){return this._domArray}domItem(e){const n=this.dom(),r=n[e];if(!r||r.destroyed){n.splice(e,1);return}return r}init(){this._initialized||(this._initialized=!0)}async load(e,n){return this.loadFromArray(e,n)}async loadFromArray(e,n,r){let o;return bBe(e)?o=e:(o={},Cc(e)?o.id=e:o.options=e,Ec(n)?o.index=n:o.options=n??o.options,o.index=r??o.index),this._loadParams(o)}async loadJSON(e,n,r){let o,i;return Ec(n)||n===void 0?o=e:(i=e,o=n),this._loadParams({id:i,url:o,index:r})}async refresh(e=!0){e&&this.dom().forEach(n=>n.refresh())}removeEventListener(e,n){this._eventDispatcher.removeEventListener(e,n)}async set(e,n,r,o){const i={index:o};return Cc(e)?i.id=e:i.element=e,n instanceof HTMLElement?i.element=n:i.options=n,Ec(r)?i.index=r:i.options=r??i.options,this._loadParams(i)}async setJSON(e,n,r,o){const i={};return e instanceof HTMLElement?(i.element=e,i.url=n,i.index=r):(i.id=e,i.element=n,i.url=r,i.index=o),this._loadParams(i)}setOnClickHandler(e){const n=this.dom();if(!n.length)throw new Error(`${Wp} can only set click handlers after calling tsParticles.load()`);for(const r of n)r.addClickHandler(e)}async _loadParams(e){const n=e.id??`tsparticles${Math.floor(Ho()*1e4)}`,{index:r,url:o}=e,i=o?await vBe({fallback:e.options,url:o,index:r}):e.options;let s=e.element??document.getElementById(n);s||(s=document.createElement("div"),s.id=n,document.body.append(s));const a=hS(i,r),l=this.dom(),c=l.findIndex(f=>f.id===n);if(c>=0){const f=this.domItem(c);f&&!f.destroyed&&(f.destroy(),l.splice(c,1))}let u;if(s.tagName.toLowerCase()==="canvas")u=s,u.dataset[fS]="false";else{const f=s.getElementsByTagName("canvas");f.length?(u=f[0],u.dataset[fS]="false"):(u=document.createElement("canvas"),u.dataset[fS]="true",s.appendChild(u))}u.style.width||(u.style.width="100%"),u.style.height||(u.style.height="100%");const d=new pBe(this,n,a);return c>=0?l.splice(c,0,d):l.push(d),d.canvas.loadCanvas(u),await d.start(),d}};class xBe{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const n=e.value,r=n.hsl??e.value;if(r.h!==void 0&&r.s!==void 0&&r.l!==void 0)return gv(r)}handleRangeColor(e){const n=e.value,r=n.hsl??e.value;if(r.h!==void 0&&r.l!==void 0)return gv({h:Zn(r.h),l:Zn(r.l),s:Zn(r.s)})}parseString(e){if(!e.startsWith("hsl"))return;const n=/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([\d.%]+)\s*)?\)/i,r=n.exec(e);return r?o5e({a:r.length>4?Mse(r[5]):1,h:parseInt(r[1],10),l:parseInt(r[3],10),s:parseInt(r[2],10)}):void 0}}class wBe{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const n=e.value,r=n.rgb??e.value;if(r.r!==void 0)return r}handleRangeColor(e){const n=e.value,r=n.rgb??e.value;if(r.r!==void 0)return{r:Zn(r.r),g:Zn(r.g),b:Zn(r.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const n=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([\d.%]+)\s*)?\)/i,r=n.exec(e);return r?{a:r.length>4?Mse(r[5]):1,b:parseInt(r[3],10),g:parseInt(r[2],10),r:parseInt(r[1],10)}:void 0}}function CBe(){const t=new wBe,e=new xBe;NK(t),NK(e);const n=new SBe;return n.init(),n}class EBe{constructor(e){this.container=e,this.type="particles"}}const DN=CBe();xM()||(window.tsParticles=DN);const Am=t=>typeof t=="object"&&t!==null;function G_(t,e,n=()=>!1){if(!Am(t)||!Am(e))return t===e;const r=Object.keys(t).filter(i=>!n(i)),o=Object.keys(e).filter(i=>!n(i));if(r.length!==o.length)return!1;for(const i of r){const s=t[i],a=e[i];if(Am(s)&&Am(a)){if(s===e&&a===t)continue;if(!G_(s,a,n))return!1}else if(Array.isArray(s)&&Array.isArray(a)){if(!Hse(s,a,n))return!1}else if(s!==a)return!1}return!0}function Hse(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const o=t[r],i=e[r];if(Array.isArray(o)&&Array.isArray(i)){if(!Hse(o,i,n))return!1}else if(Am(o)&&Am(i)){if(!G_(o,i,n))return!1}else if(o!==i)return!1}return!0}const Use="tsparticles";class CM extends v.Component{constructor(e){super(e),this.state={init:!1,library:void 0}}destroy(){this.state.library&&(this.state.library.destroy(),this.setState({library:void 0}))}shouldComponentUpdate(e){const n=e.options??e.params,r=this.props.options??this.props.params;return e.url!==this.props.url||e.id!==this.props.id||e.canvasClassName!==this.props.canvasClassName||e.className!==this.props.className||e.height!==this.props.height||e.width!==this.props.width||!G_(e.style,this.props.style)||e.init!==this.props.init||e.loaded!==this.props.loaded||!G_(n,r,o=>o.startsWith("_"))}componentDidUpdate(){this.refresh()}forceUpdate(){this.refresh().then(()=>{super.forceUpdate()})}componentDidMount(){(async()=>(this.props.init&&await this.props.init(DN),this.setState({init:!0},async()=>{await this.loadParticles()})))()}componentWillUnmount(){this.destroy()}render(){const{width:e,height:n,className:r,canvasClassName:o,id:i}=this.props;return ce.createElement("div",{className:r,id:i},ce.createElement("canvas",{className:o,style:{...this.props.style,width:e,height:n}}))}async refresh(){this.destroy(),await this.loadParticles()}async loadParticles(){if(!this.state.init)return;const e=this.props.id??CM.defaultProps.id??Use,n=await DN.load({url:this.props.url,id:e,options:this.props.options??this.props.params});this.props.container&&(this.props.container.current=n),this.setState({library:n}),this.props.loaded&&await this.props.loaded(n)}}CM.defaultProps={width:"100%",height:"100%",options:{},style:{},url:void 0,id:Use};function PBe(t){const e=t.initialPosition,{dx:n,dy:r}=gu(e,t.position),o=Math.abs(n),i=Math.abs(r),{maxDistance:s}=t.retina,a=s.horizontal,l=s.vertical;if(!(!a&&!l)){if((a&&o>=a||l&&i>=l)&&!t.misplaced)t.misplaced=!!a&&o>a||!!l&&i>l,a&&(t.velocity.x=t.velocity.y/2-t.velocity.x),l&&(t.velocity.y=t.velocity.x/2-t.velocity.y);else if((!a||o<a)&&(!l||i<l)&&t.misplaced)t.misplaced=!1;else if(t.misplaced){const c=t.position,u=t.velocity;a&&(c.x<e.x&&u.x<0||c.x>e.x&&u.x>0)&&(u.x*=-Ho()),l&&(c.y<e.y&&u.y<0||c.y>e.y&&u.y>0)&&(u.y*=-Ho())}}}function _Be(t,e,n,r,o,i){TBe(t,i);const s=t.gravity,a=s!=null&&s.enable&&s.inverse?-1:1;o&&n&&(t.velocity.x+=o*i.factor/(60*n)),s!=null&&s.enable&&n&&(t.velocity.y+=a*(s.acceleration*i.factor)/(60*n));const l=t.moveDecay;t.velocity.multTo(l);const c=t.velocity.mult(n);s!=null&&s.enable&&r>0&&(!s.inverse&&c.y>=0&&c.y>=r||s.inverse&&c.y<=0&&c.y<=-r)&&(c.y=a*r,n&&(t.velocity.y=c.y/n));const u=t.options.zIndex,d=(1-t.zIndexFactor)**u.velocityRate;c.multTo(d);const{position:f}=t;f.addTo(c),e.vibrate&&(f.x+=Math.sin(f.x*Math.cos(f.y)),f.y+=Math.cos(f.y*Math.sin(f.x)))}function IBe(t,e){const n=t.container;if(!t.spin)return;const r={x:t.spin.direction==="clockwise"?Math.cos:Math.sin,y:t.spin.direction==="clockwise"?Math.sin:Math.cos};t.position.x=t.spin.center.x+t.spin.radius*r.x(t.spin.angle),t.position.y=t.spin.center.y+t.spin.radius*r.y(t.spin.angle),t.spin.radius+=t.spin.acceleration;const o=Math.max(n.canvas.size.width,n.canvas.size.height);t.spin.radius>o/2?(t.spin.radius=o/2,t.spin.acceleration*=-1):t.spin.radius<0&&(t.spin.radius=0,t.spin.acceleration*=-1),t.spin.angle+=e/100*(1-t.spin.radius/o)}function TBe(t,e){var s;const n=t.options,r=n.move.path;if(!r.enable)return;if(t.lastPathTime<=t.pathDelay){t.lastPathTime+=e.value;return}const i=(s=t.pathGenerator)==null?void 0:s.generate(t,e);i&&t.velocity.addTo(i),r.clamp&&(t.velocity.x=pv(t.velocity.x,-1,1),t.velocity.y=pv(t.velocity.y,-1,1)),t.lastPathTime-=t.pathDelay}function MBe(t){return t.slow.inRange?t.slow.factor:1}const OBe=2;class RBe{constructor(){this._initSpin=e=>{const n=e.container,r=e.options,o=r.move.spin;if(!o.enable)return;const i=o.position??{x:50,y:50},s={x:i.x/100*n.canvas.size.width,y:i.y/100*n.canvas.size.height},a=e.getPosition(),l=Ff(a,s),c=Zn(o.acceleration);e.retina.spinAcceleration=c*n.retina.pixelRatio,e.spin={center:s,direction:e.velocity.x>=0?"clockwise":"counter-clockwise",angle:e.velocity.angle,radius:l,acceleration:e.retina.spinAcceleration}}}init(e){const n=e.options,r=n.move.gravity;e.gravity={enable:r.enable,acceleration:Zn(r.acceleration),inverse:r.inverse},this._initSpin(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,n){var g,y;const r=e.options,o=r.move;if(!o.enable)return;const i=e.container,s=i.retina.pixelRatio,a=MBe(e),l=((g=e.retina).moveSpeed??(g.moveSpeed=Zn(o.speed)*s))*i.retina.reduceFactor,c=(y=e.retina).moveDrift??(y.moveDrift=Zn(e.options.move.drift)*s),u=SM(r.size.value)*s,d=o.size?e.getRadius()/u:1,f=l*d*a*(n.factor||1)/OBe,h=e.retina.maxSpeed??i.retina.maxSpeed;o.spin.enable?IBe(e,f):_Be(e,o,f,h,c,n),PBe(e)}}async function kBe(t,e=!0){await t.addMover("base",()=>new RBe,e)}class ABe{draw(e,n,r){n.circleRange||(n.circleRange={min:0,max:Math.PI*2});const o=n.circleRange;e.arc(0,0,r,o.min,o.max,!1)}getSidesCount(){return 12}particleInit(e,n){const r=n.shapeData,o=(r==null?void 0:r.angle)??{max:360,min:0};n.circleRange=km(o)?{min:o.min*Math.PI/180,max:o.max*Math.PI/180}:{min:0,max:o*Math.PI/180}}}async function $Be(t,e=!0){await t.addShape("circle",new ABe,e)}function EA(t,e,n,r,o){if(!e||!n.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0)||(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=t.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0)))return;const i=pc(n.offset),s=(e.velocity??0)*t.factor+i*3.6,a=e.decay??1;!o||e.status==="increasing"?(e.value+=s,e.value>r&&(e.loops||(e.loops=0),e.loops++,o&&(e.status="decreasing",e.value-=e.value%r))):(e.value-=s,e.value<0&&(e.loops||(e.loops=0),e.loops++,e.status="increasing",e.value+=e.value)),e.velocity&&a!==1&&(e.velocity*=a),e.value>r&&(e.value%=r)}function DBe(t,e){const{h:n,s:r,l:o}=t.options.color.animation,{color:i}=t;if(!i)return;const{h:s,s:a,l}=i;s&&EA(e,s,n,360,!1),a&&EA(e,a,r,100,!0),l&&EA(e,l,o,100,!0)}class jBe{constructor(e){this.container=e}init(e){const n=$N(e.options.color,e.id,e.options.reduceDuplicates);n&&(e.color=a5e(n,e.options.color.animation,this.container.retina.reduceFactor))}isEnabled(e){const{h:n,s:r,l:o}=e.options.color.animation,{color:i}=e;return!e.destroyed&&!e.spawning&&((i==null?void 0:i.h.value)!==void 0&&n.enable||(i==null?void 0:i.s.value)!==void 0&&r.enable||(i==null?void 0:i.l.value)!==void 0&&o.enable)}update(e,n){DBe(e,n)}}async function LBe(t,e=!0){await t.addParticleUpdater("color",n=>new jBe(n),e)}function NBe(t,e,n,r){switch(t.options.opacity.animation.destroy){case"max":e>=r&&t.destroy();break;case"min":e<=n&&t.destroy();break}}function FBe(t,e){const n=t.opacity;if(t.destroyed||!(n!=null&&n.enable)||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const r=n.min,o=n.max,i=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=e.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=o?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=(n.velocity??0)*e.factor;break;case"decreasing":n.value<=r?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=(n.velocity??0)*e.factor;break}n.velocity&&n.decay!==1&&(n.velocity*=i),NBe(t,n.value,r,o),t.destroyed||(n.value=pv(n.value,r,o))}}class zBe{constructor(e){this.container=e}init(e){const n=e.options.opacity;e.opacity=Rse(n,1);const r=n.animation;r.enable&&(e.opacity.velocity=Zn(r.speed)/100*this.container.retina.reduceFactor,r.sync||(e.opacity.velocity*=Ho()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,n){this.isEnabled(e)&&FBe(e,n)}}async function BBe(t,e=!0){await t.addParticleUpdater("opacity",n=>new zBe(n),e)}function HBe(t){if(t.outMode!=="bounce"&&t.outMode!=="bounce-horizontal"&&t.outMode!=="bounceHorizontal"&&t.outMode!=="split"||t.direction!=="left"&&t.direction!=="right")return;t.bounds.right<0&&t.direction==="left"?t.particle.position.x=t.size+t.offset.x:t.bounds.left>t.canvasSize.width&&t.direction==="right"&&(t.particle.position.x=t.canvasSize.width-t.size-t.offset.x);const e=t.particle.velocity.x;let n=!1;if(t.direction==="right"&&t.bounds.right>=t.canvasSize.width&&e>0||t.direction==="left"&&t.bounds.left<=0&&e<0){const o=S5(t.particle.options.bounce.horizontal);t.particle.velocity.x*=-o,n=!0}if(!n)return;const r=t.offset.x+t.size;t.bounds.right>=t.canvasSize.width&&t.direction==="right"?t.particle.position.x=t.canvasSize.width-r:t.bounds.left<=0&&t.direction==="left"&&(t.particle.position.x=r),t.outMode==="split"&&t.particle.destroy()}function UBe(t){if(t.outMode!=="bounce"&&t.outMode!=="bounce-vertical"&&t.outMode!=="bounceVertical"&&t.outMode!=="split"||t.direction!=="bottom"&&t.direction!=="top")return;t.bounds.bottom<0&&t.direction==="top"?t.particle.position.y=t.size+t.offset.y:t.bounds.top>t.canvasSize.height&&t.direction==="bottom"&&(t.particle.position.y=t.canvasSize.height-t.size-t.offset.y);const e=t.particle.velocity.y;let n=!1;if(t.direction==="bottom"&&t.bounds.bottom>=t.canvasSize.height&&e>0||t.direction==="top"&&t.bounds.top<=0&&e<0){const o=S5(t.particle.options.bounce.vertical);t.particle.velocity.y*=-o,n=!0}if(!n)return;const r=t.offset.y+t.size;t.bounds.bottom>=t.canvasSize.height&&t.direction==="bottom"?t.particle.position.y=t.canvasSize.height-r:t.bounds.top<=0&&t.direction==="top"&&(t.particle.position.y=r),t.outMode==="split"&&t.particle.destroy()}class WBe{constructor(e){this.container=e,this.modes=["bounce","bounce-vertical","bounce-horizontal","bounceVertical","bounceHorizontal","split"]}update(e,n,r,o){if(!this.modes.includes(o))return;const i=this.container;let s=!1;for(const[,f]of i.plugins)if(f.particleBounce!==void 0&&(s=f.particleBounce(e,r,n)),s)break;if(s)return;const a=e.getPosition(),l=e.offset,c=e.getRadius(),u=C5(a,c),d=i.canvas.size;HBe({particle:e,outMode:o,direction:n,bounds:u,canvasSize:d,offset:l,size:c}),UBe({particle:e,outMode:o,direction:n,bounds:u,canvasSize:d,offset:l,size:c})}}class VBe{constructor(e){this.container=e,this.modes=["destroy"]}update(e,n,r,o){if(!this.modes.includes(o))return;const i=this.container;switch(e.outType){case"normal":case"outside":if(w5(e.position,i.canvas.size,wc.origin,e.getRadius(),n))return;break;case"inside":{const{dx:s,dy:a}=gu(e.position,e.moveCenter),{x:l,y:c}=e.velocity;if(l<0&&s>e.moveCenter.radius||c<0&&a>e.moveCenter.radius||l>=0&&s<-e.moveCenter.radius||c>=0&&a<-e.moveCenter.radius)return;break}}i.particles.remove(e,void 0,!0)}}class qBe{constructor(e){this.container=e,this.modes=["none"]}update(e,n,r,o){if(!this.modes.includes(o)||e.options.move.distance.horizontal&&(n==="left"||n==="right")||e.options.move.distance.vertical&&(n==="top"||n==="bottom"))return;const i=e.options.move.gravity,s=this.container,a=s.canvas.size,l=e.getRadius();if(i.enable){const c=e.position;(!i.inverse&&c.y>a.height+l&&n==="bottom"||i.inverse&&c.y<-l&&n==="top")&&s.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=a.height+l||e.velocity.y<0&&e.position.y>=-l||e.velocity.x>0&&e.position.x<=a.width+l||e.velocity.x<0&&e.position.x>=-l)return;w5(e.position,s.canvas.size,wc.origin,l,n)||s.particles.remove(e)}}}class KBe{constructor(e){this.container=e,this.modes=["out"]}update(e,n,r,o){if(!this.modes.includes(o))return;const i=this.container;switch(e.outType){case"inside":{const{x:s,y:a}=e.velocity,l=wc.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(wc.create(e.moveCenter));const{dx:c,dy:u}=gu(e.position,l);if(s<=0&&c>=0||a<=0&&u>=0||s>=0&&c<=0||a>=0&&u<=0)return;e.position.x=Math.floor(pc({min:0,max:i.canvas.size.width})),e.position.y=Math.floor(pc({min:0,max:i.canvas.size.height}));const{dx:d,dy:f}=gu(e.position,e.moveCenter);e.direction=Math.atan2(-f,-d),e.velocity.angle=e.direction;break}default:{if(w5(e.position,i.canvas.size,wc.origin,e.getRadius(),n))return;switch(e.outType){case"outside":{e.position.x=Math.floor(pc({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(pc({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:s,dy:a}=gu(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(a,s),e.velocity.angle=e.direction);break}case"normal":{const s=e.options.move.warp,a=i.canvas.size,l={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},c=e.getRadius(),u=C5(e.position,c);n==="right"&&u.left>a.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,s||(e.position.y=Ho()*a.height,e.initialPosition.y=e.position.y)):n==="left"&&u.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,s||(e.position.y=Ho()*a.height,e.initialPosition.y=e.position.y)),n==="bottom"&&u.top>a.height+e.offset.y?(s||(e.position.x=Ho()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):n==="top"&&u.bottom<-e.offset.y&&(s||(e.position.x=Ho()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}}class GBe{constructor(e){this.container=e,this._updateOutMode=(n,r,o,i)=>{for(const s of this.updaters)s.update(n,i,r,o)},this.updaters=[new WBe(e),new VBe(e),new KBe(e),new qBe(e)]}init(){}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,n){const r=e.options.move.outModes;this._updateOutMode(e,n,r.bottom??r.default,"bottom"),this._updateOutMode(e,n,r.left??r.default,"left"),this._updateOutMode(e,n,r.right??r.default,"right"),this._updateOutMode(e,n,r.top??r.default,"top")}}async function XBe(t,e=!0){await t.addParticleUpdater("outModes",n=>new GBe(n),e)}function YBe(t,e,n,r){switch(t.options.size.animation.destroy){case"max":e>=r&&t.destroy();break;case"min":e<=n&&t.destroy();break}}function QBe(t,e){const n=t.size;if(t.destroyed||!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0))return;const r=(n.velocity??0)*e.factor,o=n.min,i=n.max,s=n.decay??1;if(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=e.value),!((n.delayTime??0)>0&&n.time<(n.delayTime??0))){switch(n.status){case"increasing":n.value>=i?(n.status="decreasing",n.loops||(n.loops=0),n.loops++):n.value+=r;break;case"decreasing":n.value<=o?(n.status="increasing",n.loops||(n.loops=0),n.loops++):n.value-=r}n.velocity&&s!==1&&(n.velocity*=s),YBe(t,n.value,o,i),t.destroyed||(n.value=pv(n.value,o,i))}}class ZBe{init(e){const n=e.container,r=e.options.size,o=r.animation;o.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??n.retina.sizeAnimationSpeed)/100*n.retina.reduceFactor,o.sync||(e.size.velocity*=Ho()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,n){this.isEnabled(e)&&QBe(e,n)}}async function JBe(t,e=!0){await t.addParticleUpdater("size",()=>new ZBe,e)}async function e4e(t,e=!0){await kBe(t,!1),await $Be(t,!1),await LBe(t,!1),await BBe(t,!1),await XBe(t,!1),await JBe(t,!1),await t.refresh(e)}class t4e extends Kp{constructor(e,n,r,o){super(e,n,r),this.canvasSize=o,this.canvasSize={...o}}contains(e){const{width:n,height:r}=this.canvasSize,{x:o,y:i}=e;return super.contains(e)||super.contains({x:o-n,y:i})||super.contains({x:o-n,y:i-r})||super.contains({x:o,y:i-r})}intersects(e){if(super.intersects(e))return!0;const n=e,r=e,o={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(r.radius!==void 0){const i=new Kp(o.x,o.y,r.radius*2);return super.intersects(i)}else if(n.size!==void 0){const i=new qp(o.x,o.y,n.size.width*2,n.size.height*2);return super.intersects(i)}return!1}}class n4e{constructor(){this.blur=5,this.color=new Hs,this.color.value="#000",this.enable=!1}load(e){e&&(e.blur!==void 0&&(this.blur=e.blur),this.color=Hs.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class r4e{constructor(){this.enable=!1,this.frequency=1}load(e){e&&(e.color!==void 0&&(this.color=Hs.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class o4e{constructor(){this.blink=!1,this.color=new Hs,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new n4e,this.triangles=new r4e,this.width=1,this.warp=!1}load(e){e&&(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=Hs.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}function i4e(t,e,n,r,o){const{dx:i,dy:s,distance:a}=gu(t,e);if(!o||a<=n)return a;const l={x:Math.abs(i),y:Math.abs(s)},c={x:Math.min(l.x,r.width-l.x),y:Math.min(l.y,r.height-l.y)};return Math.sqrt(c.x**2+c.y**2)}class s4e extends EBe{constructor(e){super(e),this._setColor=n=>{if(!n.options.links)return;const r=this.linkContainer,o=n.options.links;let i=o.id===void 0?r.particles.linksColor:r.particles.linksColors.get(o.id);if(i)return;const s=o.color;i=s5e(s,o.blink,o.consent),o.id===void 0?r.particles.linksColor=i:r.particles.linksColors.set(o.id,i)},this.linkContainer=e}clear(){}init(){this.linkContainer.particles.linksColor=void 0,this.linkContainer.particles.linksColors=new Map}async interact(e){if(!e.options.links)return;e.links=[];const n=e.getPosition(),r=this.container,o=r.canvas.size;if(n.x<0||n.y<0||n.x>o.width||n.y>o.height)return;const i=e.options.links,s=i.opacity,a=e.retina.linksDistance??0,l=i.warp,c=l?new t4e(n.x,n.y,a,o):new Kp(n.x,n.y,a),u=r.particles.quadTree.query(c);for(const d of u){const f=d.options.links;if(e===d||!(f!=null&&f.enable)||i.id!==f.id||d.spawning||d.destroyed||!d.links||e.links.some(m=>m.destination===d)||d.links.some(m=>m.destination===e))continue;const h=d.getPosition();if(h.x<0||h.y<0||h.x>o.width||h.y>o.height)continue;const g=i4e(n,h,a,o,l&&f.warp);if(g>a)continue;const y=(1-g/a)*s;this._setColor(e),e.links.push({destination:d,opacity:y})}}isEnabled(e){var n;return!!((n=e.options.links)!=null&&n.enable)}loadParticlesOptions(e,...n){e.links||(e.links=new o4e);for(const r of n)e.links.load((r==null?void 0:r.links)??(r==null?void 0:r.lineLinked)??(r==null?void 0:r.line_linked))}reset(){}}async function a4e(t,e=!0){await t.addInteractor("particlesLinks",n=>new s4e(n),e)}function l4e(t){let e=!1;const{begin:n,end:r,maxDistance:o,context:i,canvasSize:s,width:a,backgroundMask:l,colorLine:c,opacity:u,links:d}=t;if(Ff(n,r)<=o)pA(i,n,r),e=!0;else if(d.warp){let h,g;const y={x:r.x-s.width,y:r.y},m=gu(n,y);if(m.distance<=o){const S=n.y-m.dy/m.dx*n.x;h={x:0,y:S},g={x:s.width,y:S}}else{const S={x:r.x,y:r.y-s.height},x=gu(n,S);if(x.distance<=o){const E=-(n.y-x.dy/x.dx*n.x)/(x.dy/x.dx);h={x:E,y:0},g={x:E,y:s.height}}else{const C={x:r.x-s.width,y:r.y-s.height},E=gu(n,C);if(E.distance<=o){const P=n.y-E.dy/E.dx*n.x;h={x:-P/(E.dy/E.dx),y:P},g={x:h.x+s.width,y:h.y+s.height}}}}h&&g&&(pA(i,n,h),pA(i,r,g),e=!0)}if(!e)return;i.lineWidth=a,l.enable&&(i.globalCompositeOperation=l.composite),i.strokeStyle=Pp(c,u);const{shadow:f}=d;if(f.enable){const h=Pc(f.color);h&&(i.shadowBlur=f.blur,i.shadowColor=Pp(h))}i.stroke()}function c4e(t){const{context:e,pos1:n,pos2:r,pos3:o,backgroundMask:i,colorTriangle:s,opacityTriangle:a}=t;l5e(e,n,r,o),i.enable&&(e.globalCompositeOperation=i.composite),e.fillStyle=Pp(s,a),e.fill()}function u4e(t){return t.sort((e,n)=>e-n),t.join("_")}function XK(t,e){const n=u4e(t.map(o=>o.id));let r=e.get(n);return r===void 0&&(r=Ho(),e.set(n,r)),r}class d4e{constructor(e){this.container=e,this._drawLinkLine=(n,r)=>{const o=n.options.links;if(!(o!=null&&o.enable))return;const i=this.container,s=i.actualOptions,a=r.destination,l=n.getPosition(),c=a.getPosition();let u=r.opacity;i.canvas.draw(d=>{var S;let f;const h=(S=n.options.twinkle)==null?void 0:S.lines;if(h!=null&&h.enable){const x=h.frequency,C=Pc(h.color);Ho()<x&&C&&(f=C,u=Zn(h.opacity))}if(!f){const x=o.id!==void 0?i.particles.linksColors.get(o.id):i.particles.linksColor;f=zK(n,a,x)}if(!f)return;const g=n.retina.linksWidth??0,y=n.retina.linksDistance??0,{backgroundMask:m}=s;l4e({context:d,width:g,begin:l,end:c,maxDistance:y,canvasSize:i.canvas.size,links:o,backgroundMask:m,colorLine:f,opacity:u})})},this._drawLinkTriangle=(n,r,o)=>{const i=n.options.links;if(!(i!=null&&i.enable))return;const s=i.triangles;if(!s.enable)return;const a=this.container,l=a.actualOptions,c=r.destination,u=o.destination,d=s.opacity??(r.opacity+o.opacity)/2;d<=0||a.canvas.draw(f=>{const h=n.getPosition(),g=c.getPosition(),y=u.getPosition(),m=n.retina.linksDistance??0;if(Ff(h,g)>m||Ff(y,g)>m||Ff(y,h)>m)return;let S=Pc(s.color);if(!S){const x=i.id!==void 0?a.particles.linksColors.get(i.id):a.particles.linksColor;S=zK(n,c,x)}S&&c4e({context:f,pos1:h,pos2:g,pos3:y,backgroundMask:l.backgroundMask,colorTriangle:S,opacityTriangle:d})})},this._drawTriangles=(n,r,o,i)=>{var l,c,u;const s=o.destination;if(!((l=n.links)!=null&&l.triangles.enable&&((c=s.options.links)!=null&&c.triangles.enable)))return;const a=(u=s.links)==null?void 0:u.filter(d=>{const f=this._getLinkFrequency(s,d.destination);return s.options.links&&f<=s.options.links.frequency&&i.findIndex(h=>h.destination===d.destination)>=0});if(a!=null&&a.length)for(const d of a){const f=d.destination;this._getTriangleFrequency(r,s,f)>n.links.triangles.frequency||this._drawLinkTriangle(r,o,d)}},this._getLinkFrequency=(n,r)=>XK([n,r],this._freqs.links),this._getTriangleFrequency=(n,r,o)=>XK([n,r,o],this._freqs.triangles),this._freqs={links:new Map,triangles:new Map}}drawParticle(e,n){const{links:r,options:o}=n;if(!r||r.length<=0)return;const i=r.filter(s=>o.links&&this._getLinkFrequency(n,s.destination)<=o.links.frequency);for(const s of i)this._drawTriangles(o,n,s,i),s.opacity>0&&(n.retina.linksWidth??0)>0&&this._drawLinkLine(n,s)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map}particleCreated(e){if(e.links=[],!e.options.links)return;const n=this.container.retina.pixelRatio,{retina:r}=e,{distance:o,width:i}=e.options.links;r.linksDistance=o*n,r.linksWidth=i*n}particleDestroyed(e){e.links=[]}}class f4e{constructor(){this.id="links"}getPlugin(e){return new d4e(e)}loadOptions(){}needsPlugin(){return!0}}async function h4e(t,e=!0){const n=new f4e;await t.addPlugin(n,e)}async function p4e(t,e=!0){await a4e(t,e),await h4e(t,e)}const g4e={background:{color:"#000000"},particles:{number:{value:100},links:{distance:150,enable:!0},move:{enable:!0},size:{value:1},shape:{type:"circle"}}};async function m4e(t,e=!0){await e4e(t,!1),await p4e(t,!1),await t.addPreset("links",g4e,e)}function v4e(){const t=v.useCallback(async e=>{await m4e(e)},[]);return w.jsx(CM,{id:"tsparticles",init:t,options:{preset:"links",background:{color:{value:"#002533"}},fullScreen:{enable:!0}}})}var y4e=class extends Error{constructor(e){super(e[0].message);V(this,"issues");this.name="SchemaError",this.issues=e}},Wse=(t=>(t.uninitialized="uninitialized",t.pending="pending",t.fulfilled="fulfilled",t.rejected="rejected",t))(Wse||{});function YK(t){return{status:t,isUninitialized:t==="uninitialized",isLoading:t==="pending",isSuccess:t==="fulfilled",isError:t==="rejected"}}var QK=Qf;function Vse(t,e){if(t===e||!(QK(t)&&QK(e)||Array.isArray(t)&&Array.isArray(e)))return e;const n=Object.keys(e),r=Object.keys(t);let o=n.length===r.length;const i=Array.isArray(e)?[]:{};for(const s of n)i[s]=Vse(t[s],e[s]),o&&(o=t[s]===i[s]);return o?t:i}function Wm(t){let e=0;for(const n in t)e++;return e}var ZK=t=>[].concat(...t);function b4e(t){return new RegExp("(^|:)//").test(t)}function S4e(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function X_(t){return t!=null}function x4e(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var w4e=t=>t.replace(/\/$/,""),C4e=t=>t.replace(/^\//,"");function E4e(t,e){if(!t)return e;if(!e)return t;if(b4e(e))return e;const n=t.endsWith("/")||!e.startsWith("?")?"/":"";return t=w4e(t),e=C4e(e),`${t}${n}${e}`}function P4e(t,e,n){return t.has(e)?t.get(e):t.set(e,n).get(e)}var JK=(...t)=>fetch(...t),_4e=t=>t.status>=200&&t.status<=299,I4e=t=>/ion\/(vnd\.api\+)?json/.test(t.get("content-type")||"");function eG(t){if(!Qf(t))return t;const e={...t};for(const[n,r]of Object.entries(e))r===void 0&&delete e[n];return e}function T4e({baseUrl:t,prepareHeaders:e=d=>d,fetchFn:n=JK,paramsSerializer:r,isJsonContentType:o=I4e,jsonContentType:i="application/json",jsonReplacer:s,timeout:a,responseHandler:l,validateStatus:c,...u}={}){return typeof fetch>"u"&&n===JK&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h,g)=>{const{getState:y,extra:m,endpoint:S,forced:x,type:C}=h;let E,{url:P,headers:I=new Headers(u.headers),params:T=void 0,responseHandler:M=l??"json",validateStatus:R=c??_4e,timeout:A=a,...j}=typeof f=="string"?{url:f}:f,N,k=h.signal;A&&(N=new AbortController,h.signal.addEventListener("abort",N.abort),k=N.signal);let D={...u,signal:k,...j};I=new Headers(eG(I)),D.headers=await e(I,{getState:y,arg:f,extra:m,endpoint:S,forced:x,type:C,extraOptions:g})||I;const F=Y=>typeof Y=="object"&&(Qf(Y)||Array.isArray(Y)||typeof Y.toJSON=="function");if(!D.headers.has("content-type")&&F(D.body)&&D.headers.set("content-type",i),F(D.body)&&o(D.headers)&&(D.body=JSON.stringify(D.body,s)),T){const Y=~P.indexOf("?")?"&":"?",G=r?r(T):new URLSearchParams(eG(T));P+=Y+G}P=E4e(t,P);const H=new Request(P,D);E={request:new Request(P,D)};let B,W=!1,K=N&&setTimeout(()=>{W=!0,N.abort()},A);try{B=await n(H)}catch(Y){return{error:{status:W?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Y)},meta:E}}finally{K&&clearTimeout(K),N==null||N.signal.removeEventListener("abort",N.abort)}const q=B.clone();E.response=q;let X,Z="";try{let Y;if(await Promise.all([d(B,M).then(G=>X=G,G=>Y=G),q.text().then(G=>Z=G,()=>{})]),Y)throw Y}catch(Y){return{error:{status:"PARSING_ERROR",originalStatus:B.status,data:Z,error:String(Y)},meta:E}}return R(B,X)?{data:X,meta:E}:{error:{status:B.status,data:X},meta:E}};async function d(f,h){if(typeof h=="function")return h(f);if(h==="content-type"&&(h=o(f.headers)?"json":"text"),h==="json"){const g=await f.text();return g.length?JSON.parse(g):null}return f.text()}}var tG=class{constructor(t,e=void 0){this.value=t,this.meta=e}},E5=Sc("__rtkq/focused"),qse=Sc("__rtkq/unfocused"),P5=Sc("__rtkq/online"),Kse=Sc("__rtkq/offline");function EM(t){return t.type==="query"}function M4e(t){return t.type==="mutation"}function PM(t){return t.type==="infinitequery"}function Y_(t){return EM(t)||PM(t)}function _5(t,e,n,r,o,i){return O4e(t)?t(e,n,r,o).filter(X_).map(jN).map(i):Array.isArray(t)?t.map(jN).map(i):[]}function O4e(t){return typeof t=="function"}function jN(t){return typeof t=="string"?{type:t}:t}function R4e(t,e){return t.catch(e)}var lx=Symbol("forceQueryFn"),LN=t=>typeof t[lx]=="function";function k4e({serializeQueryArgs:t,queryThunk:e,infiniteQueryThunk:n,mutationThunk:r,api:o,context:i}){const s=new Map,a=new Map,{unsubscribeQueryResult:l,removeMutationResult:c,updateSubscriptionOptions:u}=o.internalActions;return{buildInitiateQuery:m,buildInitiateInfiniteQuery:S,buildInitiateMutation:x,getRunningQueryThunk:d,getRunningMutationThunk:f,getRunningQueriesThunk:h,getRunningMutationsThunk:g};function d(C,E){return P=>{var M;const I=i.endpointDefinitions[C],T=t({queryArgs:E,endpointDefinition:I,endpointName:C});return(M=s.get(P))==null?void 0:M[T]}}function f(C,E){return P=>{var I;return(I=a.get(P))==null?void 0:I[E]}}function h(){return C=>Object.values(s.get(C)||{}).filter(X_)}function g(){return C=>Object.values(a.get(C)||{}).filter(X_)}function y(C,E){const P=(I,{subscribe:T=!0,forceRefetch:M,subscriptionOptions:R,[lx]:A,...j}={})=>(N,k)=>{var J;const D=t({queryArgs:I,endpointDefinition:E,endpointName:C});let F;const H={...j,type:"query",subscribe:T,forceRefetch:M,subscriptionOptions:R,endpointName:C,originalArgs:I,queryCacheKey:D,[lx]:A};if(EM(E))F=e(H);else{const{direction:ne,initialPageParam:ee}=j;F=n({...H,direction:ne,initialPageParam:ee})}const U=o.endpoints[C].select(I),B=N(F),W=U(k()),{requestId:K,abort:q}=B,X=W.requestId!==K,Z=(J=s.get(N))==null?void 0:J[D],Y=()=>U(k()),G=Object.assign(A?B.then(Y):X&&!Z?Promise.resolve(W):Promise.all([Z,B]).then(Y),{arg:I,requestId:K,subscriptionOptions:R,queryCacheKey:D,abort:q,async unwrap(){const ne=await G;if(ne.isError)throw ne.error;return ne.data},refetch:()=>N(P(I,{subscribe:!1,forceRefetch:!0})),unsubscribe(){T&&N(l({queryCacheKey:D,requestId:K}))},updateSubscriptionOptions(ne){G.subscriptionOptions=ne,N(u({endpointName:C,requestId:K,queryCacheKey:D,options:ne}))}});if(!Z&&!X&&!A){const ne=P4e(s,N,{});ne[D]=G,G.then(()=>{delete ne[D],Wm(ne)||s.delete(N)})}return G};return P}function m(C,E){return y(C,E)}function S(C,E){return y(C,E)}function x(C){return(E,{track:P=!0,fixedCacheKey:I}={})=>(T,M)=>{const R=r({type:"mutation",endpointName:C,originalArgs:E,track:P,fixedCacheKey:I}),A=T(R),{requestId:j,abort:N,unwrap:k}=A,D=R4e(A.unwrap().then(B=>({data:B})),B=>({error:B})),F=()=>{T(c({requestId:j,fixedCacheKey:I}))},H=Object.assign(D,{arg:A.arg,requestId:j,abort:N,unwrap:k,reset:F}),U=a.get(T)||{};return a.set(T,U),U[j]=H,H.then(()=>{delete U[j],Wm(U)||a.delete(T)}),I&&(U[I]=H,H.then(()=>{U[I]===H&&(delete U[I],Wm(U)||a.delete(T))})),H}}}var Gse=class extends y4e{constructor(t,e,n,r){super(t),this.value=e,this.schemaName=n,this._bqMeta=r}};async function tp(t,e,n,r){const o=await t["~standard"].validate(e);if(o.issues)throw new Gse(o.issues,e,n,r);return o.value}function A4e(t){return t}var ib=(t={})=>({...t,[vM]:!0});function $4e({reducerPath:t,baseQuery:e,context:{endpointDefinitions:n},serializeQueryArgs:r,api:o,assertTagType:i,selectors:s,onSchemaFailure:a,catchSchemaFailure:l,skipSchemaValidation:c}){const u=(j,N,k,D)=>(F,H)=>{const U=n[j],B=r({queryArgs:N,endpointDefinition:U,endpointName:j});if(F(o.internalActions.queryResultPatched({queryCacheKey:B,patches:k})),!D)return;const W=o.endpoints[j].select(N)(H()),K=_5(U.providesTags,W.data,void 0,N,{},i);F(o.internalActions.updateProvidedBy([{queryCacheKey:B,providedTags:K}]))};function d(j,N,k=0){const D=[N,...j];return k&&D.length>k?D.slice(0,-1):D}function f(j,N,k=0){const D=[...j,N];return k&&D.length>k?D.slice(1):D}const h=(j,N,k,D=!0)=>(F,H)=>{const B=o.endpoints[j].select(N)(H()),W={patches:[],inversePatches:[],undo:()=>F(o.util.patchQueryData(j,N,W.inversePatches,D))};if(B.status==="uninitialized")return W;let K;if("data"in B)if(kc(B.data)){const[q,X,Z]=wse(B.data,k);W.patches.push(...X),W.inversePatches.push(...Z),K=q}else K=k(B.data),W.patches.push({op:"replace",path:[],value:K}),W.inversePatches.push({op:"replace",path:[],value:B.data});return W.patches.length===0||F(o.util.patchQueryData(j,N,W.patches,D)),W},g=(j,N,k)=>D=>D(o.endpoints[j].initiate(N,{subscribe:!1,forceRefetch:!0,[lx]:()=>({data:k})})),y=(j,N)=>j.query&&j[N]?j[N]:A4e,m=async(j,{signal:N,abort:k,rejectWithValue:D,fulfillWithValue:F,dispatch:H,getState:U,extra:B})=>{var X,Z;const W=n[j.endpointName],{metaSchema:K,skipSchemaValidation:q=c}=W;try{let Y=y(W,"transformResponse");const G={signal:N,abort:k,dispatch:H,getState:U,extra:B,endpoint:j.endpointName,type:j.type,forced:j.type==="query"?S(j,U()):void 0,queryCacheKey:j.type==="query"?j.queryCacheKey:void 0},J=j.type==="query"?j[lx]:void 0;let ne;const ee=async(le,ae,ie,ge)=>{if(ae==null&&le.pages.length)return Promise.resolve({data:le});const ve={queryArg:j.originalArgs,pageParam:ae},fe=await re(ve),ue=ge?d:f;return{data:{pages:ue(le.pages,fe.data,ie),pageParams:ue(le.pageParams,ae,ie)},meta:fe.meta}};async function re(le){let ae;const{extraOptions:ie,argSchema:ge,rawResponseSchema:ve,responseSchema:fe}=W;if(ge&&!q&&(le=await tp(ge,le,"argSchema",{})),J?ae=J():W.query?ae=await e(W.query(le),G,ie):ae=await W.queryFn(le,G,ie,ye=>e(ye,G,ie)),typeof process<"u",ae.error)throw new tG(ae.error,ae.meta);let{data:ue}=ae;ve&&!q&&(ue=await tp(ve,ae.data,"rawResponseSchema",ae.meta));let Ce=await Y(ue,ae.meta,le);return fe&&!q&&(Ce=await tp(fe,Ce,"responseSchema",ae.meta)),{...ae,data:Ce}}if(j.type==="query"&&"infiniteQueryOptions"in W){const{infiniteQueryOptions:le}=W,{maxPages:ae=1/0}=le;let ie;const ge={pages:[],pageParams:[]},ve=(X=s.selectQueryEntry(U(),j.queryCacheKey))==null?void 0:X.data,ue=S(j,U())&&!j.direction||!ve?ge:ve;if("direction"in j&&j.direction&&ue.pages.length){const Ce=j.direction==="backward",ke=(Ce?Xse:NN)(le,ue,j.originalArgs);ie=await ee(ue,ke,ae,Ce)}else{const{initialPageParam:Ce=le.initialPageParam}=j,ye=(ve==null?void 0:ve.pageParams)??[],ke=ye[0]??Ce,Be=ye.length;ie=await ee(ue,ke,ae),J&&(ie={data:ie.data.pages[0]});for(let Ue=1;Ue<Be;Ue++){const We=NN(le,ie.data,j.originalArgs);ie=await ee(ie.data,We,ae)}}ne=ie}else ne=await re(j.originalArgs);return K&&!q&&ne.meta&&(ne.meta=await tp(K,ne.meta,"metaSchema",ne.meta)),F(ne.data,ib({fulfilledTimeStamp:Date.now(),baseQueryMeta:ne.meta}))}catch(Y){let G=Y;if(G instanceof tG){let J=y(W,"transformErrorResponse");const{rawErrorResponseSchema:ne,errorResponseSchema:ee}=W;let{value:re,meta:le}=G;try{ne&&!q&&(re=await tp(ne,re,"rawErrorResponseSchema",le)),K&&!q&&(le=await tp(K,le,"metaSchema",le));let ae=await J(re,le,j.originalArgs);return ee&&!q&&(ae=await tp(ee,ae,"errorResponseSchema",le)),D(ae,ib({baseQueryMeta:le}))}catch(ae){G=ae}}try{if(G instanceof Gse){const J={endpoint:j.endpointName,arg:j.originalArgs,type:j.type,queryCacheKey:j.type==="query"?j.queryCacheKey:void 0};(Z=W.onSchemaFailure)==null||Z.call(W,G,J),a==null||a(G,J);const{catchSchemaFailure:ne=l}=W;if(ne)return D(ne(G,J),ib({baseQueryMeta:G._bqMeta}))}}catch(J){G=J}throw console.error(G),G}};function S(j,N){const k=s.selectQueryEntry(N,j.queryCacheKey),D=s.selectConfig(N).refetchOnMountOrArgChange,F=k==null?void 0:k.fulfilledTimeStamp,H=j.forceRefetch??(j.subscribe&&D);return H?H===!0||(Number(new Date)-Number(F))/1e3>=H:!1}const x=()=>$K(`${t}/executeQuery`,m,{getPendingMeta({arg:N}){const k=n[N.endpointName];return ib({startedTimeStamp:Date.now(),...PM(k)?{direction:N.direction}:{}})},condition(N,{getState:k}){var q;const D=k(),F=s.selectQueryEntry(D,N.queryCacheKey),H=F==null?void 0:F.fulfilledTimeStamp,U=N.originalArgs,B=F==null?void 0:F.originalArgs,W=n[N.endpointName],K=N.direction;return LN(N)?!0:(F==null?void 0:F.status)==="pending"?!1:S(N,D)||EM(W)&&((q=W==null?void 0:W.forceRefetch)!=null&&q.call(W,{currentArg:U,previousArg:B,endpointState:F,state:D}))?!0:!(H&&!K)},dispatchConditionRejection:!0}),C=x(),E=x(),P=$K(`${t}/executeMutation`,m,{getPendingMeta(){return ib({startedTimeStamp:Date.now()})}}),I=j=>"force"in j,T=j=>"ifOlderThan"in j,M=(j,N,k)=>(D,F)=>{const H=I(k)&&k.force,U=T(k)&&k.ifOlderThan,B=(K=!0)=>{const q={forceRefetch:K,isPrefetch:!0};return o.endpoints[j].initiate(N,q)},W=o.endpoints[j].select(N)(F());if(H)D(B());else if(U){const K=W==null?void 0:W.fulfilledTimeStamp;if(!K){D(B());return}(Number(new Date)-Number(new Date(K)))/1e3>=U&&D(B())}else D(B(!1))};function R(j){return N=>{var k,D;return((D=(k=N==null?void 0:N.meta)==null?void 0:k.arg)==null?void 0:D.endpointName)===j}}function A(j,N){return{matchPending:dS(v5(j),R(N)),matchFulfilled:dS(Zf(j),R(N)),matchRejected:dS(hv(j),R(N))}}return{queryThunk:C,mutationThunk:P,infiniteQueryThunk:E,prefetch:M,updateQueryData:h,upsertQueryData:g,patchQueryData:u,buildMatchThunkActions:A}}function NN(t,{pages:e,pageParams:n},r){const o=e.length-1;return t.getNextPageParam(e[o],e,n[o],n,r)}function Xse(t,{pages:e,pageParams:n},r){var o;return(o=t.getPreviousPageParam)==null?void 0:o.call(t,e[0],e,n[0],n,r)}function Yse(t,e,n,r){return _5(n[t.meta.arg.endpointName][e],Zf(t)?t.payload:void 0,bM(t)?t.payload:void 0,t.meta.arg.originalArgs,"baseQueryMeta"in t.meta?t.meta.baseQueryMeta:void 0,r)}function KC(t,e,n){const r=t[e];r&&n(r)}function cx(t){return("arg"in t?t.arg.fixedCacheKey:t.fixedCacheKey)??t.requestId}function nG(t,e,n){const r=t[cx(e)];r&&n(r)}var GC={};function D4e({reducerPath:t,queryThunk:e,mutationThunk:n,serializeQueryArgs:r,context:{endpointDefinitions:o,apiUid:i,extractRehydrationInfo:s,hasRehydrationInfo:a},assertTagType:l,config:c}){const u=Sc(`${t}/resetApiState`);function d(R,A,j,N){var k;R[k=A.queryCacheKey]??(R[k]={status:"uninitialized",endpointName:A.endpointName}),KC(R,A.queryCacheKey,D=>{D.status="pending",D.requestId=j&&D.requestId?D.requestId:N.requestId,A.originalArgs!==void 0&&(D.originalArgs=A.originalArgs),D.startedTimeStamp=N.startedTimeStamp;const F=o[N.arg.endpointName];PM(F)&&"direction"in A&&(D.direction=A.direction)})}function f(R,A,j,N){KC(R,A.arg.queryCacheKey,k=>{if(k.requestId!==A.requestId&&!N)return;const{merge:D}=o[A.arg.endpointName];if(k.status="fulfilled",D)if(k.data!==void 0){const{fulfilledTimeStamp:F,arg:H,baseQueryMeta:U,requestId:B}=A;let W=cw(k.data,K=>D(K,j,{arg:H.originalArgs,baseQueryMeta:U,fulfilledTimeStamp:F,requestId:B}));k.data=W}else k.data=j;else k.data=o[A.arg.endpointName].structuralSharing??!0?Vse(wu(k.data)?H3e(k.data):k.data,j):j;delete k.error,k.fulfilledTimeStamp=A.fulfilledTimeStamp})}const h=Cf({name:`${t}/queries`,initialState:GC,reducers:{removeQueryResult:{reducer(R,{payload:{queryCacheKey:A}}){delete R[A]},prepare:ob()},cacheEntriesUpserted:{reducer(R,A){for(const j of A.payload){const{queryDescription:N,value:k}=j;d(R,N,!0,{arg:N,requestId:A.meta.requestId,startedTimeStamp:A.meta.timestamp}),f(R,{arg:N,requestId:A.meta.requestId,fulfilledTimeStamp:A.meta.timestamp,baseQueryMeta:{}},k,!0)}},prepare:R=>({payload:R.map(N=>{const{endpointName:k,arg:D,value:F}=N,H=o[k];return{queryDescription:{type:"query",endpointName:k,originalArgs:N.arg,queryCacheKey:r({queryArgs:D,endpointDefinition:H,endpointName:k})},value:F}}),meta:{[vM]:!0,requestId:y5(),timestamp:Date.now()}})},queryResultPatched:{reducer(R,{payload:{queryCacheKey:A,patches:j}}){KC(R,A,N=>{N.data=IK(N.data,j.concat())})},prepare:ob()}},extraReducers(R){R.addCase(e.pending,(A,{meta:j,meta:{arg:N}})=>{const k=LN(N);d(A,N,k,j)}).addCase(e.fulfilled,(A,{meta:j,payload:N})=>{const k=LN(j.arg);f(A,j,N,k)}).addCase(e.rejected,(A,{meta:{condition:j,arg:N,requestId:k},error:D,payload:F})=>{KC(A,N.queryCacheKey,H=>{if(!j){if(H.requestId!==k)return;H.status="rejected",H.error=F??D}})}).addMatcher(a,(A,j)=>{const{queries:N}=s(j);for(const[k,D]of Object.entries(N))((D==null?void 0:D.status)==="fulfilled"||(D==null?void 0:D.status)==="rejected")&&(A[k]=D)})}}),g=Cf({name:`${t}/mutations`,initialState:GC,reducers:{removeMutationResult:{reducer(R,{payload:A}){const j=cx(A);j in R&&delete R[j]},prepare:ob()}},extraReducers(R){R.addCase(n.pending,(A,{meta:j,meta:{requestId:N,arg:k,startedTimeStamp:D}})=>{k.track&&(A[cx(j)]={requestId:N,status:"pending",endpointName:k.endpointName,startedTimeStamp:D})}).addCase(n.fulfilled,(A,{payload:j,meta:N})=>{N.arg.track&&nG(A,N,k=>{k.requestId===N.requestId&&(k.status="fulfilled",k.data=j,k.fulfilledTimeStamp=N.fulfilledTimeStamp)})}).addCase(n.rejected,(A,{payload:j,error:N,meta:k})=>{k.arg.track&&nG(A,k,D=>{D.requestId===k.requestId&&(D.status="rejected",D.error=j??N)})}).addMatcher(a,(A,j)=>{const{mutations:N}=s(j);for(const[k,D]of Object.entries(N))((D==null?void 0:D.status)==="fulfilled"||(D==null?void 0:D.status)==="rejected")&&k!==(D==null?void 0:D.requestId)&&(A[k]=D)})}}),y={tags:{},keys:{}},m=Cf({name:`${t}/invalidation`,initialState:y,reducers:{updateProvidedBy:{reducer(R,A){var j,N,k;for(const{queryCacheKey:D,providedTags:F}of A.payload){S(R,D);for(const{type:H,id:U}of F){const B=(N=(j=R.tags)[H]??(j[H]={}))[k=U||"__internal_without_id"]??(N[k]=[]);B.includes(D)||B.push(D)}R.keys[D]=F}},prepare:ob()}},extraReducers(R){R.addCase(h.actions.removeQueryResult,(A,{payload:{queryCacheKey:j}})=>{S(A,j)}).addMatcher(a,(A,j)=>{var k,D,F;const{provided:N}=s(j);for(const[H,U]of Object.entries(N))for(const[B,W]of Object.entries(U)){const K=(D=(k=A.tags)[H]??(k[H]={}))[F=B||"__internal_without_id"]??(D[F]=[]);for(const q of W)K.includes(q)||K.push(q)}}).addMatcher(Md(Zf(e),bM(e)),(A,j)=>{x(A,[j])}).addMatcher(h.actions.cacheEntriesUpserted.match,(A,j)=>{const N=j.payload.map(({queryDescription:k,value:D})=>({type:"UNKNOWN",payload:D,meta:{requestStatus:"fulfilled",requestId:"UNKNOWN",arg:k}}));x(A,N)})}});function S(R,A){var N;const j=R.keys[A]??[];for(const k of j){const D=k.type,F=k.id??"__internal_without_id",H=(N=R.tags[D])==null?void 0:N[F];H&&(R.tags[D][F]=H.filter(U=>U!==A))}delete R.keys[A]}function x(R,A){const j=A.map(N=>{const k=Yse(N,"providesTags",o,l),{queryCacheKey:D}=N.meta.arg;return{queryCacheKey:D,providedTags:k}});m.caseReducers.updateProvidedBy(R,m.actions.updateProvidedBy(j))}const C=Cf({name:`${t}/subscriptions`,initialState:GC,reducers:{updateSubscriptionOptions(R,A){},unsubscribeQueryResult(R,A){},internal_getRTKQSubscriptions(){}}}),E=Cf({name:`${t}/internalSubscriptions`,initialState:GC,reducers:{subscriptionsUpdated:{reducer(R,A){return IK(R,A.payload)},prepare:ob()}}}),P=Cf({name:`${t}/config`,initialState:{online:x4e(),focused:S4e(),middlewareRegistered:!1,...c},reducers:{middlewareRegistered(R,{payload:A}){R.middlewareRegistered=R.middlewareRegistered==="conflict"||i!==A?"conflict":!0}},extraReducers:R=>{R.addCase(P5,A=>{A.online=!0}).addCase(Kse,A=>{A.online=!1}).addCase(E5,A=>{A.focused=!0}).addCase(qse,A=>{A.focused=!1}).addMatcher(a,A=>({...A}))}}),I=gse({queries:h.reducer,mutations:g.reducer,provided:m.reducer,subscriptions:E.reducer,config:P.reducer}),T=(R,A)=>I(u.match(A)?void 0:R,A),M={...P.actions,...h.actions,...C.actions,...E.actions,...g.actions,...m.actions,resetApiState:u};return{reducer:T,actions:M}}var ic=Symbol.for("RTKQ/skipToken"),Qse={status:"uninitialized"},rG=cw(Qse,()=>{}),oG=cw(Qse,()=>{});function j4e({serializeQueryArgs:t,reducerPath:e,createSelector:n}){const r=C=>rG,o=C=>oG;return{buildQuerySelector:f,buildInfiniteQuerySelector:h,buildMutationSelector:g,selectInvalidatedBy:y,selectCachedArgsForQuery:m,selectApiState:s,selectQueries:a,selectMutations:c,selectQueryEntry:l,selectConfig:u};function i(C){return{...C,...YK(C.status)}}function s(C){return C[e]}function a(C){var E;return(E=s(C))==null?void 0:E.queries}function l(C,E){var P;return(P=a(C))==null?void 0:P[E]}function c(C){var E;return(E=s(C))==null?void 0:E.mutations}function u(C){var E;return(E=s(C))==null?void 0:E.config}function d(C,E,P){return I=>{if(I===ic)return n(r,P);const T=t({queryArgs:I,endpointDefinition:E,endpointName:C});return n(R=>l(R,T)??rG,P)}}function f(C,E){return d(C,E,i)}function h(C,E){const{infiniteQueryOptions:P}=E;function I(T){const M={...T,...YK(T.status)},{isLoading:R,isError:A,direction:j}=M,N=j==="forward",k=j==="backward";return{...M,hasNextPage:S(P,M.data,M.originalArgs),hasPreviousPage:x(P,M.data,M.originalArgs),isFetchingNextPage:R&&N,isFetchingPreviousPage:R&&k,isFetchNextPageError:A&&N,isFetchPreviousPageError:A&&k}}return d(C,E,I)}function g(){return C=>{let E;return typeof C=="object"?E=cx(C)??ic:E=C,n(E===ic?o:T=>{var M,R;return((R=(M=s(T))==null?void 0:M.mutations)==null?void 0:R[E])??oG},i)}}function y(C,E){const P=C[e],I=new Set;for(const T of E.filter(X_).map(jN)){const M=P.provided.tags[T.type];if(!M)continue;let R=(T.id!==void 0?M[T.id]:ZK(Object.values(M)))??[];for(const A of R)I.add(A)}return ZK(Array.from(I.values()).map(T=>{const M=P.queries[T];return M?[{queryCacheKey:T,endpointName:M.endpointName,originalArgs:M.originalArgs}]:[]}))}function m(C,E){return Object.values(a(C)).filter(P=>(P==null?void 0:P.endpointName)===E&&P.status!=="uninitialized").map(P=>P.originalArgs)}function S(C,E,P){return E?NN(C,E,P)!=null:!1}function x(C,E,P){return!E||!C.getPreviousPageParam?!1:Xse(C,E,P)!=null}}var am=WeakMap?new WeakMap:void 0,Q_=({endpointName:t,queryArgs:e})=>{let n="";const r=am==null?void 0:am.get(e);if(typeof r=="string")n=r;else{const o=JSON.stringify(e,(i,s)=>(s=typeof s=="bigint"?{$bigint:s.toString()}:s,s=Qf(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=s[l],a),{}):s,s));Qf(e)&&(am==null||am.set(e,o)),n=o}return`${t}(${n})`};function Zse(...t){return function(n){const r=V_(c=>{var u;return(u=n.extractRehydrationInfo)==null?void 0:u.call(n,c,{reducerPath:n.reducerPath??"api"})}),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:r,serializeQueryArgs(c){let u=Q_;if("serializeQueryArgs"in c.endpointDefinition){const d=c.endpointDefinition.serializeQueryArgs;u=f=>{const h=d(f);return typeof h=="string"?h:Q_({...f,queryArgs:h})}}else n.serializeQueryArgs&&(u=n.serializeQueryArgs);return u(c)},tagTypes:[...n.tagTypes||[]]},i={endpointDefinitions:{},batch(c){c()},apiUid:y5(),extractRehydrationInfo:r,hasRehydrationInfo:V_(c=>r(c)!=null)},s={injectEndpoints:l,enhanceEndpoints({addTagTypes:c,endpoints:u}){if(c)for(const d of c)o.tagTypes.includes(d)||o.tagTypes.push(d);if(u)for(const[d,f]of Object.entries(u))typeof f=="function"?f(i.endpointDefinitions[d]):Object.assign(i.endpointDefinitions[d]||{},f);return s}},a=t.map(c=>c.init(s,o,i));function l(c){const u=c.endpoints({query:d=>({...d,type:"query"}),mutation:d=>({...d,type:"mutation"}),infiniteQuery:d=>({...d,type:"infinitequery"})});for(const[d,f]of Object.entries(u)){if(c.overrideExisting!==!0&&d in i.endpointDefinitions){if(c.overrideExisting==="throw")throw new Error(xc(39));continue}i.endpointDefinitions[d]=f;for(const h of a)h.injectEndpoint(d,f)}return s}return s.injectEndpoints({endpoints:n.endpoints})}}function Zu(t,...e){return Object.assign(t,...e)}var L4e=({api:t,queryThunk:e,internalState:n})=>{const r=`${t.reducerPath}/subscriptions`;let o=null,i=null;const{updateSubscriptionOptions:s,unsubscribeQueryResult:a}=t.internalActions,l=(h,g)=>{var m,S,x;if(s.match(g)){const{queryCacheKey:C,requestId:E,options:P}=g.payload;return(m=h==null?void 0:h[C])!=null&&m[E]&&(h[C][E]=P),!0}if(a.match(g)){const{queryCacheKey:C,requestId:E}=g.payload;return h[C]&&delete h[C][E],!0}if(t.internalActions.removeQueryResult.match(g))return delete h[g.payload.queryCacheKey],!0;if(e.pending.match(g)){const{meta:{arg:C,requestId:E}}=g,P=h[S=C.queryCacheKey]??(h[S]={});return P[`${E}_running`]={},C.subscribe&&(P[E]=C.subscriptionOptions??P[E]??{}),!0}let y=!1;if(e.fulfilled.match(g)||e.rejected.match(g)){const C=h[g.meta.arg.queryCacheKey]||{},E=`${g.meta.requestId}_running`;y||(y=!!C[E]),delete C[E]}if(e.rejected.match(g)){const{meta:{condition:C,arg:E,requestId:P}}=g;if(C&&E.subscribe){const I=h[x=E.queryCacheKey]??(h[x]={});I[P]=E.subscriptionOptions??I[P]??{},y=!0}}return y},c=()=>n.currentSubscriptions,f={getSubscriptions:c,getSubscriptionCount:h=>{const y=c()[h]??{};return Wm(y)},isRequestSubscribed:(h,g)=>{var m;const y=c();return!!((m=y==null?void 0:y[h])!=null&&m[g])}};return(h,g)=>{if(o||(o=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(h))return o=n.currentSubscriptions={},i=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(h))return[!1,f];const y=l(n.currentSubscriptions,h);let m=!0;if(y){i||(i=setTimeout(()=>{const C=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,E]=wse(o,()=>C);g.next(t.internalActions.subscriptionsUpdated(E)),o=C,i=null},500));const S=typeof h.type=="string"&&!!h.type.startsWith(r),x=e.rejected.match(h)&&h.meta.condition&&!!h.meta.arg.subscribe;m=!S&&!x}return[m,!1]}};function N4e(t){for(const e in t)return!1;return!0}var F4e=2147483647/1e3-1,z4e=({reducerPath:t,api:e,queryThunk:n,context:r,internalState:o,selectors:{selectQueryEntry:i,selectConfig:s}})=>{const{removeQueryResult:a,unsubscribeQueryResult:l,cacheEntriesUpserted:c}=e.internalActions,u=Md(l.match,n.fulfilled,n.rejected,c.match);function d(m){const S=o.currentSubscriptions[m];return!!S&&!N4e(S)}const f={},h=(m,S,x)=>{const C=S.getState(),E=s(C);if(u(m)){let P;if(c.match(m))P=m.payload.map(I=>I.queryDescription.queryCacheKey);else{const{queryCacheKey:I}=l.match(m)?m.payload:m.meta.arg;P=[I]}g(P,S,E)}if(e.util.resetApiState.match(m))for(const[P,I]of Object.entries(f))I&&clearTimeout(I),delete f[P];if(r.hasRehydrationInfo(m)){const{queries:P}=r.extractRehydrationInfo(m);g(Object.keys(P),S,E)}};function g(m,S,x){const C=S.getState();for(const E of m){const P=i(C,E);y(E,P==null?void 0:P.endpointName,S,x)}}function y(m,S,x,C){const E=r.endpointDefinitions[S],P=(E==null?void 0:E.keepUnusedDataFor)??C.keepUnusedDataFor;if(P===1/0)return;const I=Math.max(0,Math.min(P,F4e));if(!d(m)){const T=f[m];T&&clearTimeout(T),f[m]=setTimeout(()=>{d(m)||x.dispatch(a({queryCacheKey:m})),delete f[m]},I*1e3)}}return h},iG=new Error("Promise never resolved before cacheEntryRemoved."),B4e=({api:t,reducerPath:e,context:n,queryThunk:r,mutationThunk:o,internalState:i,selectors:{selectQueryEntry:s,selectApiState:a}})=>{const l=AN(r),c=AN(o),u=Zf(r,o),d={};function f(S,x,C){const E=d[S];E!=null&&E.valueResolved&&(E.valueResolved({data:x,meta:C}),delete E.valueResolved)}function h(S){const x=d[S];x&&(delete d[S],x.cacheEntryRemoved())}const g=(S,x,C)=>{const E=y(S);function P(I,T,M,R){const A=s(C,T),j=s(x.getState(),T);!A&&j&&m(I,R,T,x,M)}if(r.pending.match(S))P(S.meta.arg.endpointName,E,S.meta.requestId,S.meta.arg.originalArgs);else if(t.internalActions.cacheEntriesUpserted.match(S))for(const{queryDescription:I,value:T}of S.payload){const{endpointName:M,originalArgs:R,queryCacheKey:A}=I;P(M,A,S.meta.requestId,R),f(A,T,{})}else if(o.pending.match(S))x.getState()[e].mutations[E]&&m(S.meta.arg.endpointName,S.meta.arg.originalArgs,E,x,S.meta.requestId);else if(u(S))f(E,S.payload,S.meta.baseQueryMeta);else if(t.internalActions.removeQueryResult.match(S)||t.internalActions.removeMutationResult.match(S))h(E);else if(t.util.resetApiState.match(S))for(const I of Object.keys(d))h(I)};function y(S){return l(S)?S.meta.arg.queryCacheKey:c(S)?S.meta.arg.fixedCacheKey??S.meta.requestId:t.internalActions.removeQueryResult.match(S)?S.payload.queryCacheKey:t.internalActions.removeMutationResult.match(S)?cx(S.payload):""}function m(S,x,C,E,P){const I=n.endpointDefinitions[S],T=I==null?void 0:I.onCacheEntryAdded;if(!T)return;const M={},R=new Promise(F=>{M.cacheEntryRemoved=F}),A=Promise.race([new Promise(F=>{M.valueResolved=F}),R.then(()=>{throw iG})]);A.catch(()=>{}),d[C]=M;const j=t.endpoints[S].select(Y_(I)?x:C),N=E.dispatch((F,H,U)=>U),k={...E,getCacheEntry:()=>j(E.getState()),requestId:P,extra:N,updateCachedData:Y_(I)?F=>E.dispatch(t.util.updateQueryData(S,x,F)):void 0,cacheDataLoaded:A,cacheEntryRemoved:R},D=T(x,k);Promise.resolve(D).catch(F=>{if(F!==iG)throw F})}return g},H4e=({api:t,context:{apiUid:e},reducerPath:n})=>(r,o)=>{t.util.resetApiState.match(r)&&o.dispatch(t.internalActions.middlewareRegistered(e))},U4e=({reducerPath:t,context:e,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:o,api:i,assertTagType:s,refetchQuery:a,internalState:l})=>{const{removeQueryResult:c}=i.internalActions,u=Md(Zf(r),bM(r)),d=Md(Zf(r,o),hv(r,o));let f=[];const h=(m,S)=>{u(m)?y(Yse(m,"invalidatesTags",n,s),S):d(m)?y([],S):i.util.invalidateTags.match(m)&&y(_5(m.payload,void 0,void 0,void 0,void 0,s),S)};function g(m){var C;const{queries:S,mutations:x}=m;for(const E of[S,x])for(const P in E)if(((C=E[P])==null?void 0:C.status)==="pending")return!0;return!1}function y(m,S){const x=S.getState(),C=x[t];if(f.push(...m),C.config.invalidationBehavior==="delayed"&&g(C))return;const E=f;if(f=[],E.length===0)return;const P=i.util.selectInvalidatedBy(x,E);e.batch(()=>{const I=Array.from(P.values());for(const{queryCacheKey:T}of I){const M=C.queries[T],R=l.currentSubscriptions[T]??{};M&&(Wm(R)===0?S.dispatch(c({queryCacheKey:T})):M.status!=="uninitialized"&&S.dispatch(a(M)))}})}return h},W4e=({reducerPath:t,queryThunk:e,api:n,refetchQuery:r,internalState:o})=>{const i={},s=(f,h)=>{(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&l(f.payload,h),(e.pending.match(f)||e.rejected.match(f)&&f.meta.condition)&&l(f.meta.arg,h),(e.fulfilled.match(f)||e.rejected.match(f)&&!f.meta.condition)&&a(f.meta.arg,h),n.util.resetApiState.match(f)&&u()};function a({queryCacheKey:f},h){const g=h.getState()[t],y=g.queries[f],m=o.currentSubscriptions[f];if(!y||y.status==="uninitialized")return;const{lowestPollingInterval:S,skipPollingIfUnfocused:x}=d(m);if(!Number.isFinite(S))return;const C=i[f];C!=null&&C.timeout&&(clearTimeout(C.timeout),C.timeout=void 0);const E=Date.now()+S;i[f]={nextPollTimestamp:E,pollingInterval:S,timeout:setTimeout(()=>{(g.config.focused||!x)&&h.dispatch(r(y)),a({queryCacheKey:f},h)},S)}}function l({queryCacheKey:f},h){const y=h.getState()[t].queries[f],m=o.currentSubscriptions[f];if(!y||y.status==="uninitialized")return;const{lowestPollingInterval:S}=d(m);if(!Number.isFinite(S)){c(f);return}const x=i[f],C=Date.now()+S;(!x||C<x.nextPollTimestamp)&&a({queryCacheKey:f},h)}function c(f){const h=i[f];h!=null&&h.timeout&&clearTimeout(h.timeout),delete i[f]}function u(){for(const f of Object.keys(i))c(f)}function d(f={}){let h=!1,g=Number.POSITIVE_INFINITY;for(let y in f)f[y].pollingInterval&&(g=Math.min(f[y].pollingInterval,g),h=f[y].skipPollingIfUnfocused||h);return{lowestPollingInterval:g,skipPollingIfUnfocused:h}}return s},V4e=({api:t,context:e,queryThunk:n,mutationThunk:r})=>{const o=v5(n,r),i=hv(n,r),s=Zf(n,r),a={};return(c,u)=>{var d,f;if(o(c)){const{requestId:h,arg:{endpointName:g,originalArgs:y}}=c.meta,m=e.endpointDefinitions[g],S=m==null?void 0:m.onQueryStarted;if(S){const x={},C=new Promise((T,M)=>{x.resolve=T,x.reject=M});C.catch(()=>{}),a[h]=x;const E=t.endpoints[g].select(Y_(m)?y:h),P=u.dispatch((T,M,R)=>R),I={...u,getCacheEntry:()=>E(u.getState()),requestId:h,extra:P,updateCachedData:Y_(m)?T=>u.dispatch(t.util.updateQueryData(g,y,T)):void 0,queryFulfilled:C};S(y,I)}}else if(s(c)){const{requestId:h,baseQueryMeta:g}=c.meta;(d=a[h])==null||d.resolve({data:c.payload,meta:g}),delete a[h]}else if(i(c)){const{requestId:h,rejectedWithValue:g,baseQueryMeta:y}=c.meta;(f=a[h])==null||f.reject({error:c.payload??c.error,isUnhandledError:!g,meta:y}),delete a[h]}}},q4e=({reducerPath:t,context:e,api:n,refetchQuery:r,internalState:o})=>{const{removeQueryResult:i}=n.internalActions,s=(l,c)=>{E5.match(l)&&a(c,"refetchOnFocus"),P5.match(l)&&a(c,"refetchOnReconnect")};function a(l,c){const u=l.getState()[t],d=u.queries,f=o.currentSubscriptions;e.batch(()=>{for(const h of Object.keys(f)){const g=d[h],y=f[h];if(!y||!g)continue;(Object.values(y).some(S=>S[c]===!0)||Object.values(y).every(S=>S[c]===void 0)&&u.config[c])&&(Wm(y)===0?l.dispatch(i({queryCacheKey:h})):g.status!=="uninitialized"&&l.dispatch(r(g)))}})}return s};function K4e(t){const{reducerPath:e,queryThunk:n,api:r,context:o}=t,{apiUid:i}=o,s={invalidateTags:Sc(`${e}/invalidateTags`)},a=d=>d.type.startsWith(`${e}/`),l=[H4e,z4e,U4e,W4e,B4e,V4e];return{middleware:d=>{let f=!1;const g={...t,internalState:{currentSubscriptions:{}},refetchQuery:u,isThisApiSliceAction:a},y=l.map(x=>x(g)),m=L4e(g),S=q4e(g);return x=>C=>{if(!mse(C))return x(C);f||(f=!0,d.dispatch(r.internalActions.middlewareRegistered(i)));const E={...d,next:x},P=d.getState(),[I,T]=m(C,E,P);let M;if(I?M=x(C):M=T,d.getState()[e]&&(S(C,E,P),a(C)||o.hasRehydrationInfo(C)))for(const R of y)R(C,E,P);return M}},actions:s};function u(d){return t.api.endpoints[d.endpointName].initiate(d.originalArgs,{subscribe:!1,forceRefetch:!0})}}var sG=Symbol(),Jse=({createSelector:t=m5}={})=>({name:sG,init(e,{baseQuery:n,tagTypes:r,reducerPath:o,serializeQueryArgs:i,keepUnusedDataFor:s,refetchOnMountOrArgChange:a,refetchOnFocus:l,refetchOnReconnect:c,invalidationBehavior:u,onSchemaFailure:d,catchSchemaFailure:f,skipSchemaValidation:h},g){Z3e();const y=G=>G;Object.assign(e,{reducerPath:o,endpoints:{},internalActions:{onOnline:P5,onOffline:Kse,onFocus:E5,onFocusLost:qse},util:{}});const m=j4e({serializeQueryArgs:i,reducerPath:o,createSelector:t}),{selectInvalidatedBy:S,selectCachedArgsForQuery:x,buildQuerySelector:C,buildInfiniteQuerySelector:E,buildMutationSelector:P}=m;Zu(e.util,{selectInvalidatedBy:S,selectCachedArgsForQuery:x});const{queryThunk:I,infiniteQueryThunk:T,mutationThunk:M,patchQueryData:R,updateQueryData:A,upsertQueryData:j,prefetch:N,buildMatchThunkActions:k}=$4e({baseQuery:n,reducerPath:o,context:g,api:e,serializeQueryArgs:i,assertTagType:y,selectors:m,onSchemaFailure:d,catchSchemaFailure:f,skipSchemaValidation:h}),{reducer:D,actions:F}=D4e({context:g,queryThunk:I,mutationThunk:M,serializeQueryArgs:i,reducerPath:o,assertTagType:y,config:{refetchOnFocus:l,refetchOnReconnect:c,refetchOnMountOrArgChange:a,keepUnusedDataFor:s,reducerPath:o,invalidationBehavior:u}});Zu(e.util,{patchQueryData:R,updateQueryData:A,upsertQueryData:j,prefetch:N,resetApiState:F.resetApiState,upsertQueryEntries:F.cacheEntriesUpserted}),Zu(e.internalActions,F);const{middleware:H,actions:U}=K4e({reducerPath:o,context:g,queryThunk:I,mutationThunk:M,infiniteQueryThunk:T,api:e,assertTagType:y,selectors:m});Zu(e.util,U),Zu(e,{reducer:D,middleware:H});const{buildInitiateQuery:B,buildInitiateInfiniteQuery:W,buildInitiateMutation:K,getRunningMutationThunk:q,getRunningMutationsThunk:X,getRunningQueriesThunk:Z,getRunningQueryThunk:Y}=k4e({queryThunk:I,mutationThunk:M,infiniteQueryThunk:T,api:e,serializeQueryArgs:i,context:g});return Zu(e.util,{getRunningMutationThunk:q,getRunningMutationsThunk:X,getRunningQueryThunk:Y,getRunningQueriesThunk:Z}),{name:sG,injectEndpoint(G,J){var re;const ee=(re=e.endpoints)[G]??(re[G]={});EM(J)&&Zu(ee,{name:G,select:C(G,J),initiate:B(G,J)},k(I,G)),M4e(J)&&Zu(ee,{name:G,select:P(),initiate:K(G)},k(M,G)),PM(J)&&Zu(ee,{name:G,select:E(G,J),initiate:W(G,J)},k(I,G))}}}});Jse();function XC(t){return t.replace(t[0],t[0].toUpperCase())}function G4e(t){return t.type==="query"}function X4e(t){return t.type==="mutation"}function eae(t){return t.type==="infinitequery"}function sb(t,...e){return Object.assign(t,...e)}var PA=Symbol();function _A(t,e,n,r){const o=v.useMemo(()=>({queryArgs:t,serialized:typeof t=="object"?e({queryArgs:t,endpointDefinition:n,endpointName:r}):t}),[t,e,n,r]),i=v.useRef(o);return v.useEffect(()=>{i.current.serialized!==o.serialized&&(i.current=o)},[o]),i.current.serialized===o.serialized?i.current.queryArgs:t}function YC(t){const e=v.useRef(t);return v.useEffect(()=>{cS(e.current,t)||(e.current=t)},[t]),cS(e.current,t)?e.current:t}var Y4e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q4e=Y4e(),Z4e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",J4e=Z4e(),e6e=()=>Q4e||J4e?v.useLayoutEffect:v.useEffect,t6e=e6e(),aG=t=>t.isUninitialized?{...t,isUninitialized:!1,isFetching:!0,isLoading:t.data===void 0,status:Wse.pending}:t;function IA(t,...e){const n={};return e.forEach(r=>{n[r]=t[r]}),n}var TA=["data","status","isLoading","isSuccess","isError","error"];function n6e({api:t,moduleOptions:{batch:e,hooks:{useDispatch:n,useSelector:r,useStore:o},unstable__sideEffectsInRender:i,createSelector:s},serializeQueryArgs:a,context:l}){const c=i?E=>E():v.useEffect;return{buildQueryHooks:S,buildInfiniteQueryHooks:x,buildMutationHook:C,usePrefetch:f};function u(E,P,I){if(P!=null&&P.endpointName&&E.isUninitialized){const{endpointName:N}=P,k=l.endpointDefinitions[N];I!==ic&&a({queryArgs:P.originalArgs,endpointDefinition:k,endpointName:N})===a({queryArgs:I,endpointDefinition:k,endpointName:N})&&(P=void 0)}let T=E.isSuccess?E.data:P==null?void 0:P.data;T===void 0&&(T=E.data);const M=T!==void 0,R=E.isLoading,A=(!P||P.isLoading||P.isUninitialized)&&!M&&R,j=E.isSuccess||M&&(R&&!(P!=null&&P.isError)||E.isUninitialized);return{...E,data:T,currentData:E.data,isFetching:R,isLoading:A,isSuccess:j}}function d(E,P,I){if(P!=null&&P.endpointName&&E.isUninitialized){const{endpointName:N}=P,k=l.endpointDefinitions[N];I!==ic&&a({queryArgs:P.originalArgs,endpointDefinition:k,endpointName:N})===a({queryArgs:I,endpointDefinition:k,endpointName:N})&&(P=void 0)}let T=E.isSuccess?E.data:P==null?void 0:P.data;T===void 0&&(T=E.data);const M=T!==void 0,R=E.isLoading,A=(!P||P.isLoading||P.isUninitialized)&&!M&&R,j=E.isSuccess||R&&M;return{...E,data:T,currentData:E.data,isFetching:R,isLoading:A,isSuccess:j}}function f(E,P){const I=n(),T=YC(P);return v.useCallback((M,R)=>I(t.util.prefetch(E,M,{...T,...R})),[E,I,T])}function h(E,P,{refetchOnReconnect:I,refetchOnFocus:T,refetchOnMountOrArgChange:M,skip:R=!1,pollingInterval:A=0,skipPollingIfUnfocused:j=!1,...N}={}){const{initiate:k}=t.endpoints[E],D=n(),F=v.useRef(void 0);if(!F.current){const G=D(t.internalActions.internal_getRTKQSubscriptions());F.current=G}const H=_A(R?ic:P,Q_,l.endpointDefinitions[E],E),U=YC({refetchOnReconnect:I,refetchOnFocus:T,pollingInterval:A,skipPollingIfUnfocused:j}),B=N.initialPageParam,W=YC(B),K=v.useRef(void 0);let{queryCacheKey:q,requestId:X}=K.current||{},Z=!1;q&&X&&(Z=F.current.isRequestSubscribed(q,X));const Y=!Z&&K.current!==void 0;return c(()=>{Y&&(K.current=void 0)},[Y]),c(()=>{var ne;const G=K.current;if(H===ic){G==null||G.unsubscribe(),K.current=void 0;return}const J=(ne=K.current)==null?void 0:ne.subscriptionOptions;if(!G||G.arg!==H){G==null||G.unsubscribe();const ee=D(k(H,{subscriptionOptions:U,forceRefetch:M,...eae(l.endpointDefinitions[E])?{initialPageParam:W}:{}}));K.current=ee}else U!==J&&G.updateSubscriptionOptions(U)},[D,k,M,H,U,Y,W,E]),[K,D,k,U]}function g(E,P){return(T,{skip:M=!1,selectFromResult:R}={})=>{const{select:A}=t.endpoints[E],j=_A(M?ic:T,a,l.endpointDefinitions[E],E),N=v.useRef(void 0),k=v.useMemo(()=>s([A(j),(B,W)=>W,B=>j],P,{memoizeOptions:{resultEqualityCheck:cS}}),[A,j]),D=v.useMemo(()=>R?s([k],R,{devModeChecks:{identityFunctionCheck:"never"}}):k,[k,R]),F=r(B=>D(B,N.current),cS),H=o(),U=k(H.getState(),N.current);return t6e(()=>{N.current=U},[U]),F}}function y(E){v.useEffect(()=>()=>{var P,I;(I=(P=E.current)==null?void 0:P.unsubscribe)==null||I.call(P),E.current=void 0},[E])}function m(E){if(!E.current)throw new Error(xc(38));return E.current.refetch()}function S(E){const P=(M,R={})=>{const[A]=h(E,M,R);return y(A),v.useMemo(()=>({refetch:()=>m(A)}),[A])},I=({refetchOnReconnect:M,refetchOnFocus:R,pollingInterval:A=0,skipPollingIfUnfocused:j=!1}={})=>{const{initiate:N}=t.endpoints[E],k=n(),[D,F]=v.useState(PA),H=v.useRef(void 0),U=YC({refetchOnReconnect:M,refetchOnFocus:R,pollingInterval:A,skipPollingIfUnfocused:j});c(()=>{var X,Z;const q=(X=H.current)==null?void 0:X.subscriptionOptions;U!==q&&((Z=H.current)==null||Z.updateSubscriptionOptions(U))},[U]);const B=v.useRef(U);c(()=>{B.current=U},[U]);const W=v.useCallback(function(q,X=!1){let Z;return e(()=>{var Y;(Y=H.current)==null||Y.unsubscribe(),H.current=Z=k(N(q,{subscriptionOptions:B.current,forceRefetch:!X})),F(q)}),Z},[k,N]),K=v.useCallback(()=>{var q,X;(q=H.current)!=null&&q.queryCacheKey&&k(t.internalActions.removeQueryResult({queryCacheKey:(X=H.current)==null?void 0:X.queryCacheKey}))},[k]);return v.useEffect(()=>()=>{var q;(q=H==null?void 0:H.current)==null||q.unsubscribe()},[]),v.useEffect(()=>{D!==PA&&!H.current&&W(D,!0)},[D,W]),v.useMemo(()=>[W,D,{reset:K}],[W,D,K])},T=g(E,u);return{useQueryState:T,useQuerySubscription:P,useLazyQuerySubscription:I,useLazyQuery(M){const[R,A,{reset:j}]=I(M),N=T(A,{...M,skip:A===PA}),k=v.useMemo(()=>({lastArg:A}),[A]);return v.useMemo(()=>[R,{...N,reset:j},k],[R,N,j,k])},useQuery(M,R){const A=P(M,R),j=T(M,{selectFromResult:M===ic||R!=null&&R.skip?void 0:aG,...R}),N=IA(j,...TA);return v.useDebugValue(N),v.useMemo(()=>({...j,...A}),[j,A])}}}function x(E){const P=(T,M={})=>{const[R,A,j,N]=h(E,T,M),k=v.useRef(N);c(()=>{k.current=N},[N]);const D=v.useCallback(function(U,B){let W;return e(()=>{var K;(K=R.current)==null||K.unsubscribe(),R.current=W=A(j(U,{subscriptionOptions:k.current,direction:B}))}),W},[R,A,j]);y(R);const F=_A(M.skip?ic:T,Q_,l.endpointDefinitions[E],E),H=v.useCallback(()=>m(R),[R]);return v.useMemo(()=>({trigger:D,refetch:H,fetchNextPage:()=>D(F,"forward"),fetchPreviousPage:()=>D(F,"backward")}),[H,D,F])},I=g(E,d);return{useInfiniteQueryState:I,useInfiniteQuerySubscription:P,useInfiniteQuery(T,M){const{refetch:R,fetchNextPage:A,fetchPreviousPage:j}=P(T,M),N=I(T,{selectFromResult:T===ic||M!=null&&M.skip?void 0:aG,...M}),k=IA(N,...TA,"hasNextPage","hasPreviousPage");return v.useDebugValue(k),v.useMemo(()=>({...N,fetchNextPage:A,fetchPreviousPage:j,refetch:R}),[N,A,j,R])}}}function C(E){return({selectFromResult:P,fixedCacheKey:I}={})=>{const{select:T,initiate:M}=t.endpoints[E],R=n(),[A,j]=v.useState();v.useEffect(()=>()=>{A!=null&&A.arg.fixedCacheKey||A==null||A.reset()},[A]);const N=v.useCallback(function(q){const X=R(M(q,{fixedCacheKey:I}));return j(X),X},[R,M,I]),{requestId:k}=A||{},D=v.useMemo(()=>T({fixedCacheKey:I,requestId:A==null?void 0:A.requestId}),[I,A,T]),F=v.useMemo(()=>P?s([D],P):D,[P,D]),H=r(F,cS),U=I==null?A==null?void 0:A.arg.originalArgs:void 0,B=v.useCallback(()=>{e(()=>{A&&j(void 0),I&&R(t.internalActions.removeMutationResult({requestId:k,fixedCacheKey:I}))})},[R,I,A,k]),W=IA(H,...TA,"endpointName");v.useDebugValue(W);const K=v.useMemo(()=>({...H,originalArgs:U,reset:B}),[H,U,B]);return v.useMemo(()=>[N,K],[N,K])}}}var r6e=Symbol(),o6e=({batch:t=j3e,hooks:e={useDispatch:fse,useSelector:hse,useStore:dse},createSelector:n=m5,unstable__sideEffectsInRender:r=!1,...o}={})=>({name:r6e,init(i,{serializeQueryArgs:s},a){const l=i,{buildQueryHooks:c,buildInfiniteQueryHooks:u,buildMutationHook:d,usePrefetch:f}=n6e({api:i,moduleOptions:{batch:t,hooks:e,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:s,context:a});return sb(l,{usePrefetch:f}),sb(a,{batch:t}),{injectEndpoint(h,g){if(G4e(g)){const{useQuery:y,useLazyQuery:m,useLazyQuerySubscription:S,useQueryState:x,useQuerySubscription:C}=c(h);sb(l.endpoints[h],{useQuery:y,useLazyQuery:m,useLazyQuerySubscription:S,useQueryState:x,useQuerySubscription:C}),i[`use${XC(h)}Query`]=y,i[`useLazy${XC(h)}Query`]=m}if(X4e(g)){const y=d(h);sb(l.endpoints[h],{useMutation:y}),i[`use${XC(h)}Mutation`]=y}else if(eae(g)){const{useInfiniteQuery:y,useInfiniteQuerySubscription:m,useInfiniteQueryState:S}=u(h);sb(l.endpoints[h],{useInfiniteQuery:y,useInfiniteQuerySubscription:m,useInfiniteQueryState:S}),i[`use${XC(h)}InfiniteQuery`]=y}}}}}),i6e=Zse(Jse(),o6e());const Vm=i6e({reducerPath:"api",baseQuery:T4e({baseUrl:"https://presentation-app-6a87.onrender.com"}),tagTypes:["Presentations","Slides"],endpoints:()=>({})}),s6e=Vm.injectEndpoints({endpoints:t=>({registerUser:t.mutation({query:({nickname:e})=>({url:"/users",method:"POST",body:{nickname:e}})})})}),{useRegisterUserMutation:a6e}=s6e,l6e=()=>{const[t]=hs.useForm(),[e]=a6e(),[n,r]=v.useState(!1),o=sw(),i=U3(),s=async a=>{var l,c;try{r(!0),await e({nickname:a.nickname}).unwrap(),localStorage.setItem("nickname",a.nickname),o(Tse(a.nickname)),i("/presentations")}catch(u){const d=((l=u==null?void 0:u.data)==null?void 0:l.message)||((c=u==null?void 0:u.data)==null?void 0:c.error)||(u==null?void 0:u.error)||"Failed to register nickname";z_.error({message:"Registration Error",description:d,placement:"topRight",duration:3})}finally{r(!1)}};return w.jsxs("div",{children:[w.jsx(v4e,{}),w.jsx("main",{style:{position:"relative",zIndex:1},children:w.jsxs("div",{style:{maxWidth:400,margin:"80px auto",padding:24,boxShadow:"0 2px 8px rgba(0,0,0,0.15)",borderRadius:8,backgroundColor:"white"},children:[w.jsx(Rz,{level:2,children:"Collaborative Presentations"}),w.jsx(aN,{style:{textAlign:"center"},children:"Start creating and editing presentations in real time"}),w.jsxs(hs,{form:t,layout:"vertical",onFinish:s,autoComplete:"off",requiredMark:!1,children:[w.jsx(hs.Item,{label:"Nickname",name:"nickname",rules:[{required:!0,message:"Nickname is required"}],children:w.jsx(dh,{placeholder:"Enter your nickname"})}),w.jsx(hs.Item,{children:w.jsx(Rl,{color:"cyan",variant:"solid",htmlType:"submit",block:!0,disabled:n,children:n?w.jsx(hM,{size:"small"}):"Join"})})]})]})})]})},c6e=Vm.injectEndpoints({endpoints:t=>({getUserPresentations:t.query({query:e=>`/users/${e}/presentations`,providesTags:["Presentations"]}),getAllPresentations:t.query({query:e=>{const n=new URLSearchParams;return e&&n.set("query",e),`/presentations?${n.toString()}`},providesTags:["Presentations"]}),createPresentation:t.mutation({query:e=>({url:"/presentations",method:"POST",body:e}),invalidatesTags:["Presentations"]}),getPresentationById:t.query({query:({id:e,nickname:n})=>({url:`/presentations/${e}?nickname=${n}`,method:"GET"}),providesTags:["Slides"]}),updateUserRole:t.mutation({query:({id:e,nickname:n,newRole:r,requestedBy:o})=>({url:`/presentations/${e}/roles`,method:"PATCH",body:{nickname:n,newRole:r,requestedBy:o}}),invalidatesTags:["Presentations"]}),deletePresentation:t.mutation({query:({id:e,nickname:n})=>({url:`/presentations/${e}`,method:"DELETE",body:{nickname:n}}),invalidatesTags:["Presentations"]})})}),{useGetUserPresentationsQuery:u6e,useGetAllPresentationsQuery:d6e,useCreatePresentationMutation:f6e,useGetPresentationByIdQuery:h6e,useDeletePresentationMutation:p6e,useUpdateUserRoleMutation:g6e}=c6e,m6e="_createPresentationContainer_1r2pt_1",v6e="_createPresentationTitle_1r2pt_12",y6e="_createPresentationForm_1r2pt_17",b6e="_createPresentationInput_1r2pt_25",S6e="_createPresentationBtn_1r2pt_40",lm={createPresentationContainer:m6e,createPresentationTitle:v6e,createPresentationForm:y6e,createPresentationInput:b6e,createPresentationBtn:S6e},tae=v.createContext({}),x6e={aliceblue:"9ehhb",antiquewhite:"9sgk7",aqua:"1ekf",aquamarine:"4zsno",azure:"9eiv3",beige:"9lhp8",bisque:"9zg04",black:"0",blanchedalmond:"9zhe5",blue:"73",blueviolet:"5e31e",brown:"6g016",burlywood:"8ouiv",cadetblue:"3qba8",chartreuse:"4zshs",chocolate:"87k0u",coral:"9yvyo",cornflowerblue:"3xael",cornsilk:"9zjz0",crimson:"8l4xo",cyan:"1ekf",darkblue:"3v",darkcyan:"rkb",darkgoldenrod:"776yz",darkgray:"6mbhl",darkgreen:"jr4",darkgrey:"6mbhl",darkkhaki:"7ehkb",darkmagenta:"5f91n",darkolivegreen:"3bzfz",darkorange:"9yygw",darkorchid:"5z6x8",darkred:"5f8xs",darksalmon:"9441m",darkseagreen:"5lwgf",darkslateblue:"2th1n",darkslategray:"1ugcv",darkslategrey:"1ugcv",darkturquoise:"14up",darkviolet:"5rw7n",deeppink:"9yavn",deepskyblue:"11xb",dimgray:"442g9",dimgrey:"442g9",dodgerblue:"16xof",firebrick:"6y7tu",floralwhite:"9zkds",forestgreen:"1cisi",fuchsia:"9y70f",gainsboro:"8m8kc",ghostwhite:"9pq0v",goldenrod:"8j4f4",gold:"9zda8",gray:"50i2o",green:"pa8",greenyellow:"6senj",grey:"50i2o",honeydew:"9eiuo",hotpink:"9yrp0",indianred:"80gnw",indigo:"2xcoy",ivory:"9zldc",khaki:"9edu4",lavenderblush:"9ziet",lavender:"90c8q",lawngreen:"4vk74",lemonchiffon:"9zkct",lightblue:"6s73a",lightcoral:"9dtog",lightcyan:"8s1rz",lightgoldenrodyellow:"9sjiq",lightgray:"89jo3",lightgreen:"5nkwg",lightgrey:"89jo3",lightpink:"9z6wx",lightsalmon:"9z2ii",lightseagreen:"19xgq",lightskyblue:"5arju",lightslategray:"4nwk9",lightslategrey:"4nwk9",lightsteelblue:"6wau6",lightyellow:"9zlcw",lime:"1edc",limegreen:"1zcxe",linen:"9shk6",magenta:"9y70f",maroon:"4zsow",mediumaquamarine:"40eju",mediumblue:"5p",mediumorchid:"79qkz",mediumpurple:"5r3rv",mediumseagreen:"2d9ip",mediumslateblue:"4tcku",mediumspringgreen:"1di2",mediumturquoise:"2uabw",mediumvioletred:"7rn9h",midnightblue:"z980",mintcream:"9ljp6",mistyrose:"9zg0x",moccasin:"9zfzp",navajowhite:"9zest",navy:"3k",oldlace:"9wq92",olive:"50hz4",olivedrab:"472ub",orange:"9z3eo",orangered:"9ykg0",orchid:"8iu3a",palegoldenrod:"9bl4a",palegreen:"5yw0o",paleturquoise:"6v4ku",palevioletred:"8k8lv",papayawhip:"9zi6t",peachpuff:"9ze0p",peru:"80oqn",pink:"9z8wb",plum:"8nba5",powderblue:"6wgdi",purple:"4zssg",rebeccapurple:"3zk49",red:"9y6tc",rosybrown:"7cv4f",royalblue:"2jvtt",saddlebrown:"5fmkz",salmon:"9rvci",sandybrown:"9jn1c",seagreen:"1tdnb",seashell:"9zje6",sienna:"6973h",silver:"7ir40",skyblue:"5arjf",slateblue:"45e4t",slategray:"4e100",slategrey:"4e100",snow:"9zke2",springgreen:"1egv",steelblue:"2r1kk",tan:"87yx8",teal:"pds",thistle:"8ggk8",tomato:"9yqfb",turquoise:"2j4r4",violet:"9b10u",wheat:"9ld4j",white:"9zldr",whitesmoke:"9lhpx",yellow:"9zl6o",yellowgreen:"61fzm"},mi=Math.round;function MA(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(o=>parseFloat(o));for(let o=0;o<3;o+=1)r[o]=e(r[o]||0,n[o]||"",o);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const lG=(t,e,n)=>n===0?t:t/100;function ab(t,e){const n=e||255;return t>n?n:t<0?0:t}class $m{constructor(e){V(this,"isValid",!0);V(this,"r",0);V(this,"g",0);V(this,"b",0);V(this,"a",1);V(this,"_h");V(this,"_s");V(this,"_l");V(this,"_v");V(this,"_max");V(this,"_min");V(this,"_brightness");function n(o){return o[0]in e&&o[1]in e&&o[2]in e}if(e)if(typeof e=="string"){let i=function(s){return o.startsWith(s)};var r=i;const o=e.trim();if(/^#?[A-F\d]{3,8}$/i.test(o))this.fromHexString(o);else if(i("rgb"))this.fromRgbString(o);else if(i("hsl"))this.fromHslString(o);else if(i("hsv")||i("hsb"))this.fromHsvString(o);else{const s=x6e[o.toLowerCase()];s&&this.fromHexString(parseInt(s,36).toString(16).padStart(6,"0"))}}else if(e instanceof $m)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=ab(e.r),this.g=ab(e.g),this.b=ab(e.b),this.a=typeof e.a=="number"?ab(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(i){const s=i/255;return s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),o=e(this.b);return .2126*n+.7152*r+.0722*o}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=mi(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let o=this.getLightness()-e/100;return o<0&&(o=0),this._c({h:n,s:r,l:o,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let o=this.getLightness()+e/100;return o>1&&(o=1),this._c({h:n,s:r,l:o,a:this.a})}mix(e,n=50){const r=this._c(e),o=n/100,i=a=>(r[a]-this[a])*o+this[a],s={r:mi(i("r")),g:mi(i("g")),b:mi(i("b")),a:mi(i("a")*100)/100};return this._c(s)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),o=i=>mi((this[i]*this.a+n[i]*n.a*(1-this.a))/r);return this._c({r:o("r"),g:o("g"),b:o("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const o=(this.b||0).toString(16);if(e+=o.length===2?o:"0"+o,typeof this.a=="number"&&this.a>=0&&this.a<1){const i=mi(this.a*255).toString(16);e+=i.length===2?i:"0"+i}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=mi(this.getSaturation()*100),r=mi(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const o=this.clone();return o[e]=ab(n,r),o}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(o,i){return parseInt(n[o]+n[i||o],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:o}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof o=="number"?o:1,n<=0){const f=mi(r*255);this.r=f,this.g=f,this.b=f}let i=0,s=0,a=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(i=c,s=u):l>=1&&l<2?(i=u,s=c):l>=2&&l<3?(s=c,a=u):l>=3&&l<4?(s=u,a=c):l>=4&&l<5?(i=u,a=c):l>=5&&l<6&&(i=c,a=u);const d=r-c/2;this.r=mi((i+d)*255),this.g=mi((s+d)*255),this.b=mi((a+d)*255)}fromHsv({h:e,s:n,v:r,a:o}){this._h=e%360,this._s=n,this._v=r,this.a=typeof o=="number"?o:1;const i=mi(r*255);if(this.r=i,this.g=i,this.b=i,n<=0)return;const s=e/60,a=Math.floor(s),l=s-a,c=mi(r*(1-n)*255),u=mi(r*(1-n*l)*255),d=mi(r*(1-n*(1-l))*255);switch(a){case 0:this.g=d,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=d;break;case 3:this.r=c,this.g=u;break;case 4:this.r=d,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=MA(e,lG);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=MA(e,lG);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=MA(e,(r,o)=>o.includes("%")?mi(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}const QC=2,cG=.16,w6e=.05,C6e=.05,E6e=.15,nae=5,rae=4,P6e=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function uG(t,e,n){let r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-QC*e:Math.round(t.h)+QC*e:r=n?Math.round(t.h)+QC*e:Math.round(t.h)-QC*e,r<0?r+=360:r>=360&&(r-=360),r}function dG(t,e,n){if(t.h===0&&t.s===0)return t.s;let r;return n?r=t.s-cG*e:e===rae?r=t.s+cG:r=t.s+w6e*e,r>1&&(r=1),n&&e===nae&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function fG(t,e,n){let r;return n?r=t.v+C6e*e:r=t.v-E6e*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function _6e(t,e={}){const n=[],r=new $m(t),o=r.toHsv();for(let i=nae;i>0;i-=1){const s=new $m({h:uG(o,i,!0),s:dG(o,i,!0),v:fG(o,i,!0)});n.push(s)}n.push(r);for(let i=1;i<=rae;i+=1){const s=new $m({h:uG(o,i),s:dG(o,i),v:fG(o,i)});n.push(s)}return e.theme==="dark"?P6e.map(({index:i,amount:s})=>new $m(e.backgroundColor||"#141414").mix(n[i],s).toHexString()):n.map(i=>i.toHexString())}const FN=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];FN.primary=FN[5];function I6e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function T6e(t,e){if(!t)return!1;if(t.contains)return t.contains(e);let n=e;for(;n;){if(n===t)return!0;n=n.parentNode}return!1}const hG="data-rc-order",pG="data-rc-priority",M6e="rc-util-key",zN=new Map;function oae({mark:t}={}){return t?t.startsWith("data-")?t:`data-${t}`:M6e}function I5(t){return t.attachTo?t.attachTo:document.querySelector("head")||document.body}function O6e(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function T5(t){return Array.from((zN.get(t)||t).children).filter(e=>e.tagName==="STYLE")}function iae(t,e={}){if(!I6e())return null;const{csp:n,prepend:r,priority:o=0}=e,i=O6e(r),s=i==="prependQueue",a=document.createElement("style");a.setAttribute(hG,i),s&&o&&a.setAttribute(pG,`${o}`),n!=null&&n.nonce&&(a.nonce=n==null?void 0:n.nonce),a.innerHTML=t;const l=I5(e),{firstChild:c}=l;if(r){if(s){const u=(e.styles||T5(l)).filter(d=>{if(!["prepend","prependQueue"].includes(d.getAttribute(hG)))return!1;const f=Number(d.getAttribute(pG)||0);return o>=f});if(u.length)return l.insertBefore(a,u[u.length-1].nextSibling),a}l.insertBefore(a,c)}else l.appendChild(a);return a}function R6e(t,e={}){let{styles:n}=e;return n||(n=T5(I5(e))),n.find(r=>r.getAttribute(oae(e))===t)}function k6e(t,e){const n=zN.get(t);if(!n||!T6e(document,n)){const r=iae("",e),{parentNode:o}=r;zN.set(t,o),t.removeChild(r)}}function A6e(t,e,n={}){var l,c,u;const r=I5(n),o=T5(r),i={...n,styles:o};k6e(r,i);const s=R6e(e,i);if(s)return(l=i.csp)!=null&&l.nonce&&s.nonce!==((c=i.csp)==null?void 0:c.nonce)&&(s.nonce=(u=i.csp)==null?void 0:u.nonce),s.innerHTML!==t&&(s.innerHTML=t),s;const a=iae(t,i);return a.setAttribute(oae(i),e),a}function sae(t){var e;return(e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t)}function $6e(t){return sae(t)instanceof ShadowRoot}function D6e(t){return $6e(t)?sae(t):null}let BN={};const j6e=t=>{};function L6e(t,e){}function N6e(t,e){}function F6e(){BN={}}function aae(t,e,n){!e&&!BN[n]&&(t(!1,n),BN[n]=!0)}function _M(t,e){aae(L6e,t,e)}function z6e(t,e){aae(N6e,t,e)}_M.preMessage=j6e;_M.resetWarned=F6e;_M.noteOnce=z6e;function B6e(t){return t.replace(/-(.)/g,(e,n)=>n.toUpperCase())}function H6e(t,e){_M(t,`[@ant-design/icons] ${e}`)}function gG(t){return typeof t=="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(typeof t.icon=="object"||typeof t.icon=="function")}function mG(t={}){return Object.keys(t).reduce((e,n)=>{const r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[B6e(n)]=r}return e},{})}function HN(t,e,n){return n?ce.createElement(t.tag,{key:e,...mG(t.attrs),...n},(t.children||[]).map((r,o)=>HN(r,`${e}-${t.tag}-${o}`))):ce.createElement(t.tag,{key:e,...mG(t.attrs)},(t.children||[]).map((r,o)=>HN(r,`${e}-${t.tag}-${o}`)))}function lae(t){return _6e(t)[0]}function cae(t){return t?Array.isArray(t)?t:[t]:[]}const U6e=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,W6e=t=>{const{csp:e,prefixCls:n,layer:r}=v.useContext(tae);let o=U6e;n&&(o=o.replace(/anticon/g,n)),r&&(o=`@layer ${r} {
${o}
}`),v.useEffect(()=>{const i=t.current,s=D6e(i);A6e(o,"@ant-design-icons",{prepend:!r,csp:e,attachTo:s})},[])},pS={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function V6e({primaryColor:t,secondaryColor:e}){pS.primaryColor=t,pS.secondaryColor=e||lae(t),pS.calculated=!!e}function q6e(){return{...pS}}const Xv=t=>{const{icon:e,className:n,onClick:r,style:o,primaryColor:i,secondaryColor:s,...a}=t,l=v.useRef();let c=pS;if(i&&(c={primaryColor:i,secondaryColor:s||lae(i)}),W6e(l),H6e(gG(e),`icon should be icon definiton, but got ${e}`),!gG(e))return null;let u=e;return u&&typeof u.icon=="function"&&(u={...u,icon:u.icon(c.primaryColor,c.secondaryColor)}),HN(u.icon,`svg-${u.name}`,{className:n,onClick:r,style:o,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",...a,ref:l})};Xv.displayName="IconReact";Xv.getTwoToneColors=q6e;Xv.setTwoToneColors=V6e;function uae(t){const[e,n]=cae(t);return Xv.setTwoToneColors({primaryColor:e,secondaryColor:n})}function K6e(){const t=Xv.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UN.apply(this,arguments)}uae(FN.primary);const Yv=v.forwardRef((t,e)=>{const{className:n,icon:r,spin:o,rotate:i,tabIndex:s,onClick:a,twoToneColor:l,...c}=t,{prefixCls:u="anticon",rootClassName:d}=v.useContext(tae),f=he(d,u,{[`${u}-${r.name}`]:!!r.name,[`${u}-spin`]:!!o||r.name==="loading"},n);let h=s;h===void 0&&a&&(h=-1);const g=i?{msTransform:`rotate(${i}deg)`,transform:`rotate(${i}deg)`}:void 0,[y,m]=cae(l);return v.createElement("span",UN({role:"img","aria-label":r.name},c,{ref:e,tabIndex:h,onClick:a,className:f}),v.createElement(Xv,{icon:r,primaryColor:y,secondaryColor:m,style:g}))});Yv.displayName="AntdIcon";Yv.getTwoToneColor=K6e;Yv.setTwoToneColor=uae;function WN(){return WN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WN.apply(this,arguments)}const G6e=(t,e)=>v.createElement(Yv,WN({},t,{ref:e,icon:TFe})),X6e=v.forwardRef(G6e);function VN(){return VN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VN.apply(this,arguments)}const Y6e=(t,e)=>v.createElement(Yv,VN({},t,{ref:e,icon:MFe})),vG=v.forwardRef(Y6e);function qN(){return qN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qN.apply(this,arguments)}const Q6e=(t,e)=>v.createElement(Yv,qN({},t,{ref:e,icon:coe})),dae=v.forwardRef(Q6e),{Text:Z6e}=Td,fae=({presentations:t,type:e})=>{const n=U3(),[r]=p6e(),o=Ep(a=>a.user.nickname),i=async a=>{var l;try{await r({id:a,nickname:o}).unwrap(),_N.success("Presentation deleted successfully")}catch(c){const u=((l=c==null?void 0:c.data)==null?void 0:l.error)||"Failed to delete presentation";_N.error(u)}},s=a=>{n(`/presentations/${a.id}`)};return w.jsx(Cp,{itemLayout:"horizontal",dataSource:t,renderItem:a=>w.jsx(Cp.Item,{onClick:()=>s(a),style:{padding:"12px 16px",border:"1px solid #f0f0f0",borderRadius:8,marginTop:40,marginBottom:12,cursor:"pointer",position:"relative",transition:"background 0.2s ease"},onMouseEnter:l=>l.currentTarget.style.background="#fafafa",onMouseLeave:l=>l.currentTarget.style.background="white",actions:e==="my"?[w.jsx(Rl,{type:"text",size:"small",icon:w.jsx(dae,{}),onClick:l=>{l.stopPropagation(),i(a.id)}},"delete")]:[],children:w.jsx(Cp.Item.Meta,{title:w.jsx(Z6e,{style:{fontSize:"1.1rem"},strong:!0,children:a.title}),description:w.jsxs(w.Fragment,{children:[e!=="my"&&w.jsxs(aN,{style:{margin:0},children:["Author: ",a.ownerNickname]}),w.jsxs(aN,{style:{margin:0},type:"secondary",children:["Created: ",new Date(a.createdAt).toLocaleString()]})]})})})})},{Paragraph:J6e}=Td,e8e=()=>{const[t]=hs.useForm(),e=Ep(c=>c.user.nickname),{data:n=[],isLoading:r,isFetching:o,isError:i,refetch:s}=u6e(e,{skip:!e}),[a]=f6e(),l=async()=>{var u;const c=t.getFieldValue("title");if(c!=null&&c.trim())try{await a({title:c,creatorNickname:e}).unwrap(),z_.success({message:"Presentation created"}),t.resetFields(["title"]),s()}catch(d){z_.error({message:"Error",description:((u=d==null?void 0:d.data)==null?void 0:u.error)||"Failed to create presentation"})}};return i?w.jsx("div",{style:{padding:"2rem"},children:w.jsx(YS,{message:"Error loading presentations",type:"error",showIcon:!0})}):w.jsxs("div",{style:{marginTop:"2rem"},children:[w.jsxs("div",{className:lm.createPresentationContainer,children:[w.jsx(Rz,{className:lm.createPresentationTitle,level:4,children:"Create Presentation"}),w.jsxs(hs,{form:t,layout:"inline",onFinish:l,className:lm.createPresentationForm,children:[w.jsx(hs.Item,{name:"title",rules:[{required:!0,message:"Please enter a presentation title"}],style:{flexGrow:1,width:"100%"},children:w.jsx(dh,{className:lm.createPresentationInput,placeholder:"New presentation title"})}),w.jsx(hs.Item,{className:lm.createPresentationBtnItem,children:w.jsx(Rl,{className:lm.createPresentationBtn,type:"primary",htmlType:"submit",children:"Create"})})]})]}),r||o?w.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:w.jsx(hM,{tip:"Loading your presentations...",size:"large"})}):n.length>0?w.jsx(fae,{presentations:n,type:"my"}):w.jsx(J6e,{style:{textAlign:"center",marginTop:"2rem",fontSize:"1rem"},children:"You don't have your own presentations yet."})]})},t8e=()=>{const[t,e]=v.useState(""),{data:n=[],isError:r}=d6e(t||void 0),o=i=>{e(i.trim())};return r?w.jsx("div",{style:{padding:"2rem"},children:w.jsx(YS,{message:"Error loading presentations",type:"error",showIcon:!0})}):w.jsxs("div",{style:{marginTop:"1rem"},children:[w.jsx(dh.Search,{placeholder:"Search presentations",onSearch:o,style:{width:"60%",marginBottom:"1rem"},allowClear:!0,size:"large"}),w.jsx(fae,{presentations:n})]})},n8e="_tabsWrapper_1053z_1",r8e={tabsWrapper:n8e},o8e=()=>{const t=[{key:"my",label:"My Presentations",children:w.jsx(e8e,{})},{key:"all",label:"All Presentations",children:w.jsx(t8e,{})}];return w.jsx("div",{className:r8e.tabsWrapper,children:w.jsx(Lie,{defaultActiveKey:"my",type:"line",items:t})})};var kb={exports:{}};kb.exports;var yG;function i8e(){return yG||(yG=1,function(t,e){var n=200,r="__lodash_hash_undefined__",o=1,i=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",S="[object Null]",x="[object Object]",C="[object Promise]",E="[object Proxy]",P="[object RegExp]",I="[object Set]",T="[object String]",M="[object Symbol]",R="[object Undefined]",A="[object WeakMap]",j="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",D="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",U="[object Int32Array]",B="[object Uint8Array]",W="[object Uint8ClampedArray]",K="[object Uint16Array]",q="[object Uint32Array]",X=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,G={};G[k]=G[D]=G[F]=G[H]=G[U]=G[B]=G[W]=G[K]=G[q]=!0,G[a]=G[l]=G[j]=G[u]=G[N]=G[d]=G[f]=G[h]=G[y]=G[m]=G[x]=G[P]=G[I]=G[T]=G[A]=!1;var J=typeof ma=="object"&&ma&&ma.Object===Object&&ma,ne=typeof self=="object"&&self&&self.Object===Object&&self,ee=J||ne||Function("return this")(),re=e&&!e.nodeType&&e,le=re&&!0&&t&&!t.nodeType&&t,ae=le&&le.exports===re,ie=ae&&J.process,ge=function(){try{return ie&&ie.binding&&ie.binding("util")}catch{}}(),ve=ge&&ge.isTypedArray;function fe(te,we){for(var Ye=-1,jt=te==null?0:te.length,Pr=0,Cn=[];++Ye<jt;){var Wr=te[Ye];we(Wr,Ye,te)&&(Cn[Pr++]=Wr)}return Cn}function ue(te,we){for(var Ye=-1,jt=we.length,Pr=te.length;++Ye<jt;)te[Pr+Ye]=we[Ye];return te}function Ce(te,we){for(var Ye=-1,jt=te==null?0:te.length;++Ye<jt;)if(we(te[Ye],Ye,te))return!0;return!1}function ye(te,we){for(var Ye=-1,jt=Array(te);++Ye<te;)jt[Ye]=we(Ye);return jt}function ke(te){return function(we){return te(we)}}function Be(te,we){return te.has(we)}function Ue(te,we){return te==null?void 0:te[we]}function We(te){var we=-1,Ye=Array(te.size);return te.forEach(function(jt,Pr){Ye[++we]=[Pr,jt]}),Ye}function Me(te,we){return function(Ye){return te(we(Ye))}}function $e(te){var we=-1,Ye=Array(te.size);return te.forEach(function(jt){Ye[++we]=jt}),Ye}var Qe=Array.prototype,nt=Function.prototype,ht=Object.prototype,ft=ee["__core-js_shared__"],et=nt.toString,pe=ht.hasOwnProperty,Pe=function(){var te=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),je=ht.toString,Le=RegExp("^"+et.call(pe).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=ae?ee.Buffer:void 0,at=ee.Symbol,Ae=ee.Uint8Array,Ne=ht.propertyIsEnumerable,xt=Qe.splice,Pt=at?at.toStringTag:void 0,gn=Object.getOwnPropertySymbols,Xt=qe?qe.isBuffer:void 0,sn=Me(Object.keys,Object),Zt=Or(ee,"DataView"),Vt=Or(ee,"Map"),an=Or(ee,"Promise"),wt=Or(ee,"Set"),bt=Or(ee,"WeakMap"),ot=Or(Object,"create"),Xe=fo(Zt),qt=fo(Vt),Tt=fo(an),Fe=fo(wt),Ge=fo(bt),ut=at?at.prototype:void 0,St=ut?ut.valueOf:void 0;function lt(te){var we=-1,Ye=te==null?0:te.length;for(this.clear();++we<Ye;){var jt=te[we];this.set(jt[0],jt[1])}}function kt(){this.__data__=ot?ot(null):{},this.size=0}function _n(te){var we=this.has(te)&&delete this.__data__[te];return this.size-=we?1:0,we}function bn(te){var we=this.__data__;if(ot){var Ye=we[te];return Ye===r?void 0:Ye}return pe.call(we,te)?we[te]:void 0}function ln(te){var we=this.__data__;return ot?we[te]!==void 0:pe.call(we,te)}function en(te,we){var Ye=this.__data__;return this.size+=this.has(te)?0:1,Ye[te]=ot&&we===void 0?r:we,this}lt.prototype.clear=kt,lt.prototype.delete=_n,lt.prototype.get=bn,lt.prototype.has=ln,lt.prototype.set=en;function wn(te){var we=-1,Ye=te==null?0:te.length;for(this.clear();++we<Ye;){var jt=te[we];this.set(jt[0],jt[1])}}function nr(){this.__data__=[],this.size=0}function rr(te){var we=this.__data__,Ye=ko(we,te);if(Ye<0)return!1;var jt=we.length-1;return Ye==jt?we.pop():xt.call(we,Ye,1),--this.size,!0}function ur(te){var we=this.__data__,Ye=ko(we,te);return Ye<0?void 0:we[Ye][1]}function Nn(te){return ko(this.__data__,te)>-1}function gt(te,we){var Ye=this.__data__,jt=ko(Ye,te);return jt<0?(++this.size,Ye.push([te,we])):Ye[jt][1]=we,this}wn.prototype.clear=nr,wn.prototype.delete=rr,wn.prototype.get=ur,wn.prototype.has=Nn,wn.prototype.set=gt;function De(te){var we=-1,Ye=te==null?0:te.length;for(this.clear();++we<Ye;){var jt=te[we];this.set(jt[0],jt[1])}}function pt(){this.size=0,this.__data__={hash:new lt,map:new(Vt||wn),string:new lt}}function yt(te){var we=on(this,te).delete(te);return this.size-=we?1:0,we}function ze(te){return on(this,te).get(te)}function Nt(te){return on(this,te).has(te)}function mn(te,we){var Ye=on(this,te),jt=Ye.size;return Ye.set(te,we),this.size+=Ye.size==jt?0:1,this}De.prototype.clear=pt,De.prototype.delete=yt,De.prototype.get=ze,De.prototype.has=Nt,De.prototype.set=mn;function An(te){var we=-1,Ye=te==null?0:te.length;for(this.__data__=new De;++we<Ye;)this.add(te[we])}function Qn(te){return this.__data__.set(te,r),this}function _t(te){return this.__data__.has(te)}An.prototype.add=An.prototype.push=Qn,An.prototype.has=_t;function Mt(te){var we=this.__data__=new wn(te);this.size=we.size}function un(){this.__data__=new wn,this.size=0}function In(te){var we=this.__data__,Ye=we.delete(te);return this.size=we.size,Ye}function Co(te){return this.__data__.get(te)}function Dr(te){return this.__data__.has(te)}function Mr(te,we){var Ye=this.__data__;if(Ye instanceof wn){var jt=Ye.__data__;if(!Vt||jt.length<n-1)return jt.push([te,we]),this.size=++Ye.size,this;Ye=this.__data__=new De(jt)}return Ye.set(te,we),this.size=Ye.size,this}Mt.prototype.clear=un,Mt.prototype.delete=In,Mt.prototype.get=Co,Mt.prototype.has=Dr,Mt.prototype.set=Mr;function jr(te,we){var Ye=Is(te),jt=!Ye&&ta(te),Pr=!Ye&&!jt&&Bu(te),Cn=!Ye&&!jt&&!Pr&&Vc(te),Wr=Ye||jt||Pr||Cn,$o=Wr?ye(te.length,String):[],Vr=$o.length;for(var Nr in te)pe.call(te,Nr)&&!(Wr&&(Nr=="length"||Pr&&(Nr=="offset"||Nr=="parent")||Cn&&(Nr=="buffer"||Nr=="byteLength"||Nr=="byteOffset")||Wc(Nr,Vr)))&&$o.push(Nr);return $o}function ko(te,we){for(var Ye=te.length;Ye--;)if(Go(te[Ye][0],we))return Ye;return-1}function Ao(te,we,Ye){var jt=we(te);return Is(te)?jt:ue(jt,Ye(te))}function pr(te){return te==null?te===void 0?R:S:Pt&&Pt in Object(te)?uo(te):Mi(te)}function no(te){return ir(te)&&pr(te)==a}function $n(te,we,Ye,jt,Pr){return te===we?!0:te==null||we==null||!ir(te)&&!ir(we)?te!==te&&we!==we:Ot(te,we,Ye,jt,$n,Pr)}function Ot(te,we,Ye,jt,Pr,Cn){var Wr=Is(te),$o=Is(we),Vr=Wr?l:wr(te),Nr=$o?l:wr(we);Vr=Vr==a?x:Vr,Nr=Nr==a?x:Nr;var di=Vr==x,na=Nr==x,Do=Vr==Nr;if(Do&&Bu(te)){if(!Bu(we))return!1;Wr=!0,di=!1}if(Do&&!di)return Cn||(Cn=new Mt),Wr||Vc(te)?rn(te,we,Ye,jt,Pr,Cn):vn(te,we,Vr,Ye,jt,Pr,Cn);if(!(Ye&o)){var Oi=di&&pe.call(te,"__wrapped__"),Ms=na&&pe.call(we,"__wrapped__");if(Oi||Ms){var _o=Oi?te.value():te,Yi=Ms?we.value():we;return Cn||(Cn=new Mt),Pr(_o,Yi,Ye,jt,Cn)}}return Do?(Cn||(Cn=new Mt),xr(te,we,Ye,jt,Pr,Cn)):!1}function ct(te){if(!Lr(te)||ui(te))return!1;var we=tn(te)?Le:Z;return we.test(fo(te))}function Fn(te){return ir(te)&&Er(te.length)&&!!G[pr(te)]}function Un(te){if(!Po(te))return sn(te);var we=[];for(var Ye in Object(te))pe.call(te,Ye)&&Ye!="constructor"&&we.push(Ye);return we}function rn(te,we,Ye,jt,Pr,Cn){var Wr=Ye&o,$o=te.length,Vr=we.length;if($o!=Vr&&!(Wr&&Vr>$o))return!1;var Nr=Cn.get(te);if(Nr&&Cn.get(we))return Nr==we;var di=-1,na=!0,Do=Ye&i?new An:void 0;for(Cn.set(te,we),Cn.set(we,te);++di<$o;){var Oi=te[di],Ms=we[di];if(jt)var _o=Wr?jt(Ms,Oi,di,we,te,Cn):jt(Oi,Ms,di,te,we,Cn);if(_o!==void 0){if(_o)continue;na=!1;break}if(Do){if(!Ce(we,function(Yi,Xl){if(!Be(Do,Xl)&&(Oi===Yi||Pr(Oi,Yi,Ye,jt,Cn)))return Do.push(Xl)})){na=!1;break}}else if(!(Oi===Ms||Pr(Oi,Ms,Ye,jt,Cn))){na=!1;break}}return Cn.delete(te),Cn.delete(we),na}function vn(te,we,Ye,jt,Pr,Cn,Wr){switch(Ye){case N:if(te.byteLength!=we.byteLength||te.byteOffset!=we.byteOffset)return!1;te=te.buffer,we=we.buffer;case j:return!(te.byteLength!=we.byteLength||!Cn(new Ae(te),new Ae(we)));case u:case d:case m:return Go(+te,+we);case f:return te.name==we.name&&te.message==we.message;case P:case T:return te==we+"";case y:var $o=We;case I:var Vr=jt&o;if($o||($o=$e),te.size!=we.size&&!Vr)return!1;var Nr=Wr.get(te);if(Nr)return Nr==we;jt|=i,Wr.set(te,we);var di=rn($o(te),$o(we),jt,Pr,Cn,Wr);return Wr.delete(te),di;case M:if(St)return St.call(te)==St.call(we)}return!1}function xr(te,we,Ye,jt,Pr,Cn){var Wr=Ye&o,$o=or(te),Vr=$o.length,Nr=or(we),di=Nr.length;if(Vr!=di&&!Wr)return!1;for(var na=Vr;na--;){var Do=$o[na];if(!(Wr?Do in we:pe.call(we,Do)))return!1}var Oi=Cn.get(te);if(Oi&&Cn.get(we))return Oi==we;var Ms=!0;Cn.set(te,we),Cn.set(we,te);for(var _o=Wr;++na<Vr;){Do=$o[na];var Yi=te[Do],Xl=we[Do];if(jt)var qd=Wr?jt(Xl,Yi,Do,we,te,Cn):jt(Yi,Xl,Do,te,we,Cn);if(!(qd===void 0?Yi===Xl||Pr(Yi,Xl,Ye,jt,Cn):qd)){Ms=!1;break}_o||(_o=Do=="constructor")}if(Ms&&!_o){var _g=te.constructor,Kd=we.constructor;_g!=Kd&&"constructor"in te&&"constructor"in we&&!(typeof _g=="function"&&_g instanceof _g&&typeof Kd=="function"&&Kd instanceof Kd)&&(Ms=!1)}return Cn.delete(te),Cn.delete(we),Ms}function or(te){return Ao(te,Ph,Eo)}function on(te,we){var Ye=te.__data__;return zu(we)?Ye[typeof we=="string"?"string":"hash"]:Ye.map}function Or(te,we){var Ye=Ue(te,we);return ct(Ye)?Ye:void 0}function uo(te){var we=pe.call(te,Pt),Ye=te[Pt];try{te[Pt]=void 0;var jt=!0}catch{}var Pr=je.call(te);return jt&&(we?te[Pt]=Ye:delete te[Pt]),Pr}var Eo=gn?function(te){return te==null?[]:(te=Object(te),fe(gn(te),function(we){return Ne.call(te,we)}))}:qc,wr=pr;(Zt&&wr(new Zt(new ArrayBuffer(1)))!=N||Vt&&wr(new Vt)!=y||an&&wr(an.resolve())!=C||wt&&wr(new wt)!=I||bt&&wr(new bt)!=A)&&(wr=function(te){var we=pr(te),Ye=we==x?te.constructor:void 0,jt=Ye?fo(Ye):"";if(jt)switch(jt){case Xe:return N;case qt:return y;case Tt:return C;case Fe:return I;case Ge:return A}return we});function Wc(te,we){return we=we??s,!!we&&(typeof te=="number"||Y.test(te))&&te>-1&&te%1==0&&te<we}function zu(te){var we=typeof te;return we=="string"||we=="number"||we=="symbol"||we=="boolean"?te!=="__proto__":te===null}function ui(te){return!!Pe&&Pe in te}function Po(te){var we=te&&te.constructor,Ye=typeof we=="function"&&we.prototype||ht;return te===Ye}function Mi(te){return je.call(te)}function fo(te){if(te!=null){try{return et.call(te)}catch{}try{return te+""}catch{}}return""}function Go(te,we){return te===we||te!==te&&we!==we}var ta=no(function(){return arguments}())?no:function(te){return ir(te)&&pe.call(te,"callee")&&!Ne.call(te,"callee")},Is=Array.isArray;function Ts(te){return te!=null&&Er(te.length)&&!tn(te)}var Bu=Xt||sl;function Dt(te,we){return $n(te,we)}function tn(te){if(!Lr(te))return!1;var we=pr(te);return we==h||we==g||we==c||we==E}function Er(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=s}function Lr(te){var we=typeof te;return te!=null&&(we=="object"||we=="function")}function ir(te){return te!=null&&typeof te=="object"}var Vc=ve?ke(ve):Fn;function Ph(te){return Ts(te)?jr(te):Un(te)}function qc(){return[]}function sl(){return!1}t.exports=Dt}(kb,kb.exports)),kb.exports}var s8e=i8e();const Jf=jc(s8e),a8e=Vm.injectEndpoints({endpoints:t=>({addSlide:t.mutation({query:({presentationId:e,nickname:n})=>({url:`/slides/${e}`,method:"POST",body:{nickname:n}}),invalidatesTags:["Slides"]}),deleteSlide:t.mutation({query:({id:e,nickname:n})=>({url:`/slides/${e}`,method:"DELETE",body:{nickname:n}}),invalidatesTags:["Slides"]}),updateSlide:t.mutation({query:({presentationId:e,id:n,content:r,nickname:o})=>({url:`/slides/presentations/${e}/slides/${n}`,method:"PATCH",body:{content:r,nickname:o}}),invalidatesTags:["Slides"]})})}),{useAddSlideMutation:l8e,useDeleteSlideMutation:c8e,useUpdateSlideMutation:u8e}=a8e,Cu=Object.create(null);Cu.open="0";Cu.close="1";Cu.ping="2";Cu.pong="3";Cu.message="4";Cu.upgrade="5";Cu.noop="6";const uP=Object.create(null);Object.keys(Cu).forEach(t=>{uP[Cu[t]]=t});const KN={type:"error",data:"parser error"},hae=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",pae=typeof ArrayBuffer=="function",gae=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,M5=({type:t,data:e},n,r)=>hae&&e instanceof Blob?n?r(e):bG(e,r):pae&&(e instanceof ArrayBuffer||gae(e))?n?r(e):bG(new Blob([e]),r):r(Cu[t]+(e||"")),bG=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function SG(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let OA;function d8e(t,e){if(hae&&t.data instanceof Blob)return t.data.arrayBuffer().then(SG).then(e);if(pae&&(t.data instanceof ArrayBuffer||gae(t.data)))return e(SG(t.data));M5(t,!1,n=>{OA||(OA=new TextEncoder),e(OA.encode(n))})}const xG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ab=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<xG.length;t++)Ab[xG.charCodeAt(t)]=t;const f8e=t=>{let e=t.length*.75,n=t.length,r,o=0,i,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)i=Ab[t.charCodeAt(r)],s=Ab[t.charCodeAt(r+1)],a=Ab[t.charCodeAt(r+2)],l=Ab[t.charCodeAt(r+3)],u[o++]=i<<2|s>>4,u[o++]=(s&15)<<4|a>>2,u[o++]=(a&3)<<6|l&63;return c},h8e=typeof ArrayBuffer=="function",O5=(t,e)=>{if(typeof t!="string")return{type:"message",data:mae(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:p8e(t.substring(1),e)}:uP[n]?t.length>1?{type:uP[n],data:t.substring(1)}:{type:uP[n]}:KN},p8e=(t,e)=>{if(h8e){const n=f8e(t);return mae(n,e)}else return{base64:!0,data:t}},mae=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},vae="",g8e=(t,e)=>{const n=t.length,r=new Array(n);let o=0;t.forEach((i,s)=>{M5(i,!1,a=>{r[s]=a,++o===n&&e(r.join(vae))})})},m8e=(t,e)=>{const n=t.split(vae),r=[];for(let o=0;o<n.length;o++){const i=O5(n[o],e);if(r.push(i),i.type==="error")break}return r};function v8e(){return new TransformStream({transform(t,e){d8e(t,n=>{const r=n.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const i=new DataView(o.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{o=new Uint8Array(9);const i=new DataView(o.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let RA;function ZC(t){return t.reduce((e,n)=>e+n.length,0)}function JC(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let o=0;o<e;o++)n[o]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function y8e(t,e){RA||(RA=new TextDecoder);const n=[];let r=0,o=-1,i=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(r===0){if(ZC(n)<1)break;const l=JC(n,1);i=(l[0]&128)===128,o=l[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(ZC(n)<2)break;const l=JC(n,2);o=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(ZC(n)<8)break;const l=JC(n,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(KN);break}o=u*Math.pow(2,32)+c.getUint32(4),r=3}else{if(ZC(n)<o)break;const l=JC(n,o);a.enqueue(O5(i?l:RA.decode(l),e)),r=0}if(o===0||o>t){a.enqueue(KN);break}}}})}const yae=4;function ti(t){if(t)return b8e(t)}function b8e(t){for(var e in ti.prototype)t[e]=ti.prototype[e];return t}ti.prototype.on=ti.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ti.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};ti.prototype.off=ti.prototype.removeListener=ti.prototype.removeAllListeners=ti.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};ti.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this};ti.prototype.emitReserved=ti.prototype.emit;ti.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ti.prototype.hasListeners=function(t){return!!this.listeners(t).length};const IM=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Cl=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),S8e="arraybuffer";function bae(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const x8e=Cl.setTimeout,w8e=Cl.clearTimeout;function TM(t,e){e.useNativeTimers?(t.setTimeoutFn=x8e.bind(Cl),t.clearTimeoutFn=w8e.bind(Cl)):(t.setTimeoutFn=Cl.setTimeout.bind(Cl),t.clearTimeoutFn=Cl.clearTimeout.bind(Cl))}const C8e=1.33;function E8e(t){return typeof t=="string"?P8e(t):Math.ceil((t.byteLength||t.size)*C8e)}function P8e(t){let e=0,n=0;for(let r=0,o=t.length;r<o;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Sae(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _8e(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function I8e(t){let e={},n=t.split("&");for(let r=0,o=n.length;r<o;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class T8e extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class R5 extends ti{constructor(e){super(),this.writable=!1,TM(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new T8e(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=O5(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=_8e(e);return n.length?"?"+n:""}}class M8e extends R5{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};m8e(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,g8e(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Sae()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let xae=!1;try{xae=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const O8e=xae;function R8e(){}class k8e extends M8e{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(o,i)=>{this.onError("xhr post error",o,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let qm=class dP extends ti{constructor(e,n,r){super(),this.createRequest=e,TM(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=bae(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=dP.requestsCount++,dP.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=R8e,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dP.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};qm.requestsCount=0;qm.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wG);else if(typeof addEventListener=="function"){const t="onpagehide"in Cl?"pagehide":"unload";addEventListener(t,wG,!1)}}function wG(){for(let t in qm.requests)qm.requests.hasOwnProperty(t)&&qm.requests[t].abort()}const A8e=function(){const t=wae({xdomain:!1});return t&&t.responseType!==null}();class $8e extends k8e{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=A8e&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new qm(wae,this.uri(),e)}}function wae(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||O8e))return new XMLHttpRequest}catch{}if(!e)try{return new Cl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Cae=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class D8e extends R5{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Cae?{}:bae(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;M5(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}o&&IM(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Sae()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const kA=Cl.WebSocket||Cl.MozWebSocket;let j8e=class extends D8e{createSocket(e,n,r){return Cae?new kA(e,n,r):n?new kA(e,n):new kA(e)}doWrite(e,n){this.ws.send(n)}};class L8e extends R5{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=y8e(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),o=v8e();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const i=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],o=n===e.length-1;this._writer.write(r).then(()=>{o&&IM(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const N8e={websocket:j8e,webtransport:L8e,polling:$8e},F8e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,z8e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function GN(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let o=F8e.exec(t||""),i={},s=14;for(;s--;)i[z8e[s]]=o[s]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=B8e(i,i.path),i.queryKey=H8e(i,i.query),i}function B8e(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function H8e(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,i){o&&(n[o]=i)}),n}const XN=typeof addEventListener=="function"&&typeof removeEventListener=="function",fP=[];XN&&addEventListener("offline",()=>{fP.forEach(t=>t())},!1);class Bf extends ti{constructor(e,n){if(super(),this.binaryType=S8e,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=GN(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=GN(n.host).host);TM(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=I8e(this.opts.query)),XN&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},fP.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=yae,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Bf.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Bf.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(n+=E8e(o)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,IM(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,o){if(typeof n=="function"&&(o=n,n=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Bf.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),XN&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=fP.indexOf(this._offlineEventListener);r!==-1&&fP.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Bf.protocol=yae;class U8e extends Bf{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Bf.priorWebsocketSuccess=!1;const o=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Bf.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,u(),n.close(),n=null)}const s=d=>{const f=new Error("probe error: "+d);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function a(){s("transport closed")}function l(){s("socket closed")}function c(d){n&&d.name!==n.name&&i()}const u=()=>{n.removeListener("open",o),n.removeListener("error",s),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",o),n.once("error",s),n.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let W8e=class extends U8e{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>N8e[o]).filter(o=>!!o)),super(e,r)}};function V8e(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=GN(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const q8e=typeof ArrayBuffer=="function",K8e=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Eae=Object.prototype.toString,G8e=typeof Blob=="function"||typeof Blob<"u"&&Eae.call(Blob)==="[object BlobConstructor]",X8e=typeof File=="function"||typeof File<"u"&&Eae.call(File)==="[object FileConstructor]";function k5(t){return q8e&&(t instanceof ArrayBuffer||K8e(t))||G8e&&t instanceof Blob||X8e&&t instanceof File}function hP(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(hP(t[n]))return!0;return!1}if(k5(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return hP(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&hP(t[n]))return!0;return!1}function Y8e(t){const e=[],n=t.data,r=t;return r.data=YN(n,e),r.attachments=e.length,{packet:r,buffers:e}}function YN(t,e){if(!t)return t;if(k5(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=YN(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=YN(t[r],e));return n}return t}function Q8e(t,e){return t.data=QN(t.data,e),delete t.attachments,t}function QN(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=QN(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=QN(t[n],e));return t}const Z8e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],J8e=5;var sr;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(sr||(sr={}));class eHe{constructor(e){this.replacer=e}encode(e){return(e.type===sr.EVENT||e.type===sr.ACK)&&hP(e)?this.encodeAsBinary({type:e.type===sr.EVENT?sr.BINARY_EVENT:sr.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===sr.BINARY_EVENT||e.type===sr.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Y8e(e),r=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(r),o}}function CG(t){return Object.prototype.toString.call(t)==="[object Object]"}class A5 extends ti{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===sr.BINARY_EVENT;r||n.type===sr.BINARY_ACK?(n.type=r?sr.EVENT:sr.ACK,this.reconstructor=new tHe(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(k5(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(sr[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===sr.BINARY_EVENT||r.type===sr.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(i,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const i=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(A5.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case sr.CONNECT:return CG(n);case sr.DISCONNECT:return n===void 0;case sr.CONNECT_ERROR:return typeof n=="string"||CG(n);case sr.EVENT:case sr.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Z8e.indexOf(n[0])===-1);case sr.ACK:case sr.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tHe{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Q8e(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const nHe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:A5,Encoder:eHe,get PacketType(){return sr},protocol:J8e},Symbol.toStringTag,{value:"Module"}));function lc(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const rHe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Pae extends ti{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[lc(e,"open",this.onopen.bind(this)),lc(e,"packet",this.onpacket.bind(this)),lc(e,"error",this.onerror.bind(this)),lc(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,o,i;if(rHe.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:sr.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,d=n.pop();this._registerAckCallback(u,d),s.id=u}const a=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},o),s=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,o)=>{const i=(s,a)=>s?o(s):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...i)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:sr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case sr.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case sr.EVENT:case sr.BINARY_EVENT:this.onevent(e);break;case sr.ACK:case sr.BINARY_ACK:this.onack(e);break;case sr.DISCONNECT:this.ondisconnect();break;case sr.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...o){r||(r=!0,n.packet({type:sr.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:sr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Qv(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Qv.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Qv.prototype.reset=function(){this.attempts=0};Qv.prototype.setMin=function(t){this.ms=t};Qv.prototype.setMax=function(t){this.max=t};Qv.prototype.setJitter=function(t){this.jitter=t};class ZN extends ti{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,TM(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Qv({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||nHe;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new W8e(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=lc(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},s=lc(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{o(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(o),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(lc(e,"ping",this.onping.bind(this)),lc(e,"data",this.ondata.bind(this)),lc(e,"error",this.onerror.bind(this)),lc(e,"close",this.onclose.bind(this)),lc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){IM(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Pae(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const lb={};function gS(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=V8e(t,e.path||"/socket.io"),r=n.source,o=n.id,i=n.path,s=lb[o]&&i in lb[o].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let l;return a?l=new ZN(r,e):(lb[o]||(lb[o]=new ZN(r,e)),l=lb[o]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(gS,{Manager:ZN,Socket:Pae,io:gS,connect:gS});const oHe="https://presentation-app-6a87.onrender.com/",Kr=gS(oHe,{autoConnect:!1}),iHe=(t,e)=>{t.emit("join",e)},sHe=(t,e,n)=>{t.emit("cursor_move",{x:e,y:n})},AA=(t,e)=>{Kr.emit("update_slide",{slideId:t,content:e})},aHe=t=>{Kr.emit("add_slide",{slide:t})},lHe=t=>{Kr.emit("remove_slide",{slideId:t})},cHe=(t,e)=>{Kr.emit("change_role",{targetSocketId:t,newRole:e})},uHe=()=>{Kr.disconnect()},dHe={slides:[],currentSlideIndex:0},_ae=Cf({name:"slides",initialState:dHe,reducers:{setSlides(t,e){t.slides=e.payload},addSlideToStore(t,e){t.slides.push(e.payload)},updateSlideContent(t,e){const n=t.slides.find(r=>r.id===e.payload.id);n&&(n.content=e.payload.content)},removeSlideFromStore:(t,e)=>{const n=e.payload;t.slides=t.slides.filter(r=>r.id!==n),t.slides.forEach((r,o)=>{r.slideIndex=o}),t.currentSlideIndex>=t.slides.length&&(t.currentSlideIndex=Math.max(0,t.slides.length-1))},setCurrentSlideIndex(t,e){const n=e.payload;n>=0&&n<t.slides.length&&(t.currentSlideIndex=n)}}}),{setSlides:fHe,addSlideToStore:hHe,updateSlideContent:pP,removeSlideFromStore:Iae,setCurrentSlideIndex:$A}=_ae.actions,pHe=_ae.reducer,gHe=({presentationId:t,getCurrentEditor:e,onSlideAdded:n})=>{const r=Ep(C=>C.slides.slides),o=Ep(C=>C.slides.currentSlideIndex),i=Ep(C=>C.user.nickname),s=sw(),[a,{isLoading:l}]=l8e(),[c]=c8e(),[u]=u8e(),[d,f]=v.useState(null),[h,g]=v.useState(null),y=async()=>{var C,E;try{if(!i){f("User is not logged in");return}const P=r.find(M=>M.slideIndex===o),I=await a({presentationId:t,nickname:i}).unwrap();if(aHe(I),P){const M=e(),R=(C=M==null?void 0:M.store)==null?void 0:C.getSnapshot();R&&(await u({presentationId:t,id:P.id,nickname:i,content:R}).unwrap(),s(pP({id:P.id,content:R})),AA(P.id,R))}const T=e();if(T){const M=T.store.getSnapshot();M.store={},T.store.loadSnapshot(M)}s($A(I.slideIndex)),g(`Slide ${r.length+1} was added`),f(null),n()}catch(P){const T=((E=P.data)==null?void 0:E.error)||"Error adding slide";f(T),g(null)}},m=async C=>{var E;try{const P=r.find(I=>I.id===C);if(await c({id:C,nickname:i}).unwrap(),s(Iae(C)),lHe(C),(P==null?void 0:P.slideIndex)===o){const I=Math.max(0,o-1);s($A(I)),await S(I)}g("Slide deleted successfully")}catch(P){const I=((E=P==null?void 0:P.data)==null?void 0:E.error)||"Failed to delete slide";f(I)}},S=async C=>{const E=e();if(!E||!E.store){f("Editor is not ready");return}const P=r.find(I=>I.slideIndex===C);if(!P){f("Slide not found");return}try{if(o!==C){const I=r.find(T=>T.slideIndex===o);if(I){const T=E.store.getSnapshot();Jf(T,I.content)||(await u({presentationId:t,id:I.id,nickname:i,content:T}).unwrap(),s(pP({id:I.id,content:T})),AA(I.id,T))}}P.content&&P.content.store&&P.content.schema&&E.loadSnapshot(P.content),s($A(C)),f(null)}catch(I){f("Failed to switch slide: "+I.message)}},x=async()=>{const C=e();if(!C||!C.store){f("Editor is not ready");return}const E=r.find(P=>P.slideIndex===o);if(!E){f("Current slide not found");return}try{const P=C.store.getSnapshot();Jf(P,E.content)?g("No changes to save"):(await u({presentationId:t,id:E.id,nickname:i,content:P}).unwrap(),s(pP({id:E.id,content:P})),AA(E.id,P),g("Slide saved successfully")),f(null)}catch(P){f("Failed to save slide: "+P.message)}};return v.useEffect(()=>{const C=e();r.length>0&&C&&C.store&&o===0&&S(0)},[r,e]),{slides:r,currentSlideIndex:o,error:d,successMsg:h,isLoading:l,handleAddSlide:y,handleDeleteSlide:m,handleSelectSlide:S,handleSaveSlide:x}},mHe="_activeSlide_odse5_1",vHe={activeSlide:mHe},{Text:yHe}=Td,bHe=({slide:t,currentSlideIndex:e,owner:n,onSelect:r,onDelete:o})=>w.jsxs("div",{onClick:()=>r(t.slideIndex),className:t.slideIndex===e?vHe.activeSlide:"",style:{padding:"1rem",marginBottom:"1rem",border:"1px solid #d9d9d9",borderRadius:4,background:"#fafafa",display:"flex",justifyContent:"space-between",position:"relative",pointerEvents:n?"auto":"none",opacity:n?1:.5,cursor:"pointer"},children:[w.jsxs(yHe,{strong:!0,children:["Slide ",t.slideIndex+1]}),n&&w.jsx(Rl,{type:"text",size:"small",icon:w.jsx(dae,{}),onClick:i=>{i.stopPropagation(),o(t.id)},style:{position:"absolute",top:14,right:8,zIndex:10,color:"#999"}})]}),SHe=({presentationId:t,onSlideAdded:e,owner:n,getCurrentEditor:r})=>{const{slides:o,currentSlideIndex:i,error:s,successMsg:a,isLoading:l,handleAddSlide:c,handleDeleteSlide:u,handleSelectSlide:d,handleSaveSlide:f}=gHe({presentationId:t,getCurrentEditor:r,onSlideAdded:e});return w.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",borderRight:"1px solid #f0f0f0"},children:[n&&w.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #f0f0f0",display:"flex",gap:"0.5rem",flexDirection:"column"},children:[w.jsx(Rl,{color:"blue",variant:"solid",onClick:f,block:!0,children:"Save Slide"}),w.jsx(Rl,{color:"cyan",variant:"solid",onClick:c,block:!0,loading:l,children:"Add Slide"})]}),s&&w.jsx(YS,{message:s,type:"error",showIcon:!0}),a&&w.jsx(YS,{message:a,type:"success",showIcon:!0}),w.jsx("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:o.length===0?w.jsx(Rz,{style:{textAlign:"center"},type:"secondary",level:4,children:"No slides yet"}):o.slice().sort((h,g)=>h.slideIndex-g.slideIndex).map(h=>w.jsx(bHe,{slide:h,owner:n,currentSlideIndex:i,onSelect:d,onDelete:u},h.id))})]})},xHe=({x:t,y:e,nickname:n})=>w.jsx("div",{style:{position:"absolute",pointerEvents:"none",top:e,left:t,backgroundColor:"#007a70",borderRadius:"50%",width:10,height:10,transform:"translate(-50%, -50%)",zIndex:1e3},children:w.jsx("p",{children:n})});function wHe({usersInRoom:t,presentationId:e}){const n=Ep(a=>a.user.nickname),r=t.find(a=>a.nickname===n),o=(r==null?void 0:r.role)==="creator",[i]=g6e(),s=(a,l,c)=>{const u=t.find(f=>f.nickname===a);if(!r||!u){console.error("User not found");return}let d=null;c==="up"?l==="viewer"?d="editor":l==="editor"&&(d="creator"):l==="editor"&&(d="viewer"),d&&(i({id:e,nickname:a,newRole:d,requestedBy:n}),cHe(u.socketId,d))};return w.jsxs("aside",{style:{width:"18vw",borderLeft:"1px solid #f0f0f0",padding:12,overflowY:"auto",height:"100vh",backgroundColor:"#fafafa"},children:[w.jsx(Td.Title,{level:5,style:{marginBottom:12},children:"Users in Room"}),w.jsx(Cp,{dataSource:t,renderItem:a=>{const l=a.nickname===n,c=o&&!l?a.role==="viewer"?[w.jsx(Rl,{color:"cyan",variant:"solid",icon:w.jsx(vG,{}),onClick:()=>s(a.nickname,a.role,"up")},"promote-viewer")]:a.role==="editor"?[w.jsx(Rl,{color:"cyan",variant:"solid",icon:w.jsx(vG,{}),onClick:()=>s(a.nickname,a.role,"up")},"promote-editor"),w.jsx(Rl,{color:"cyan",variant:"solid",icon:w.jsx(X6e,{}),onClick:()=>s(a.nickname,a.role,"down")},"demote-editor")]:void 0:void 0;return w.jsx(Cp.Item,{actions:c,children:w.jsx(Cp.Item.Meta,{title:a.nickname,description:w.jsx(Td.Text,{type:"secondary",children:a.role})})},a.socketId)}})]})}const DA="__TLDRAW_LIBRARY_VERSIONS__";function CHe(){if(globalThis[DA])return globalThis[DA];const t={versions:[],didWarn:!1,scheduledNotice:null};return Object.defineProperty(globalThis,DA,{value:t,writable:!1,configurable:!1,enumerable:!1}),t}function fh(t,e,n){if(!t)throw new Error("Missing name/version/module system in built version of tldraw library");const r=CHe();if(r.versions.push({name:t,version:e,modules:n}),!r.scheduledNotice)try{r.scheduledNotice=setTimeout(()=>{r.scheduledNotice=null,EG(r)},100)}catch{EG(r)}}function EG(t){if(!t.versions.length||t.didWarn)return;const e=t.versions.sort((a,l)=>PG(a.version,l.version)),n=e[e.length-1].version,r=new Set,o=new Map;for(const a of e){if(o.has(a.name)){r.delete(a.name),jA(o,a.name,new Set).add(a.version);continue}a.version===n?r.add(a.name):(r.delete(a.name),jA(o,a.name,new Set).add(a.version))}if(o.size>0){const a=[`${Ju("[tldraw]",["bold","bgRed","textWhite"])} ${Ju("You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.",["textRed","bold"])}`,"",`The latest version you have installed is ${Ju(`v${n}`,["bold","textBlue"])}. The following libraries are on the latest version:`,...Array.from(r,l=>`    ${Ju(l,["bold"])}`),"","The following libraries are not on the latest version, or have multiple versions installed:",...Array.from(o,([l,c])=>{const u=Array.from(c).sort(PG).map(d=>Ju(`v${d}`,d===n?["textGreen"]:["textRed"]));return`    ${Ju(l,["bold"])} (${u.join(", ")})`})];console.log(a.join(`
`)),t.didWarn=!0;return}const i=new Map;for(const a of e)jA(i,a.name,{version:a.version,modules:[]}).modules.push(a.modules);const s=new Map;for(const[a,l]of i)l.modules.length>1&&s.set(a,l);if(s.size>0){const a=[`${Ju("[tldraw]",["bold","bgRed","textWhite"])} ${Ju("You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. ",["textRed","bold"])}`,"","This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.","","The following libraries have been imported multiple times:",...Array.from(s,([l,c])=>{const u=c.modules.map((d,f)=>d==="esm"?`      ${f+1}. ES Modules`:`      ${f+1}. CommonJS`).join(`
`);return`    ${Ju(l,["bold"])} v${c.version}: 
${u}`}),"","You should configure your bundler to only import one version of each library."];console.log(a.join(`
`)),t.didWarn=!0;return}}function PG(t,e){const n=t.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/),r=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/);return!n||!r?t.localeCompare(e):n[1]!==r[1]?Number(n[1])-Number(r[1]):n[2]!==r[2]?Number(n[2])-Number(r[2]):n[3]!==r[3]?Number(n[3])-Number(r[3]):n[4]&&r[4]?n[4].localeCompare(r[4]):n[4]?1:r[4]?-1:0}const EHe={bold:"1",textBlue:"94",textRed:"31",textGreen:"32",bgRed:"41",textWhite:"97"};function Ju(t,e=[]){return`\x1B[${e.map(n=>EHe[n]).join(";")}m${t}\x1B[m`}function jA(t,e,n){return t.has(e)?t.get(e):(t.set(e,n),n)}var LA,_G;function PHe(){if(_G)return LA;_G=1;var t="Expected a function",e=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l=typeof ma=="object"&&ma&&ma.Object===Object&&ma,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,g=Math.min,y=function(){return u.Date.now()};function m(I,T,M){var R,A,j,N,k,D,F=0,H=!1,U=!1,B=!0;if(typeof I!="function")throw new TypeError(t);T=P(T)||0,x(M)&&(H=!!M.leading,U="maxWait"in M,j=U?h(P(M.maxWait)||0,T):j,B="trailing"in M?!!M.trailing:B);function W(ee){var re=R,le=A;return R=A=void 0,F=ee,N=I.apply(le,re),N}function K(ee){return F=ee,k=setTimeout(Z,T),H?W(ee):N}function q(ee){var re=ee-D,le=ee-F,ae=T-re;return U?g(ae,j-le):ae}function X(ee){var re=ee-D,le=ee-F;return D===void 0||re>=T||re<0||U&&le>=j}function Z(){var ee=y();if(X(ee))return Y(ee);k=setTimeout(Z,q(ee))}function Y(ee){return k=void 0,B&&R?W(ee):(R=A=void 0,N)}function G(){k!==void 0&&clearTimeout(k),F=0,R=D=A=k=void 0}function J(){return k===void 0?N:Y(y())}function ne(){var ee=y(),re=X(ee);if(R=arguments,A=this,D=ee,re){if(k===void 0)return K(D);if(U)return k=setTimeout(Z,T),W(D)}return k===void 0&&(k=setTimeout(Z,T)),N}return ne.cancel=G,ne.flush=J,ne}function S(I,T,M){var R=!0,A=!0;if(typeof I!="function")throw new TypeError(t);return x(M)&&(R="leading"in M?!!M.leading:R,A="trailing"in M?!!M.trailing:A),m(I,T,{leading:R,maxWait:T,trailing:A})}function x(I){var T=typeof I;return!!I&&(T=="object"||T=="function")}function C(I){return!!I&&typeof I=="object"}function E(I){return typeof I=="symbol"||C(I)&&f.call(I)==n}function P(I){if(typeof I=="number")return I;if(E(I))return e;if(x(I)){var T=typeof I.valueOf=="function"?I.valueOf():I;I=x(T)?T+"":T}if(typeof I!="string")return I===0?I:+I;I=I.replace(r,"");var M=i.test(I);return M||s.test(I)?a(I.slice(2),M?2:8):o.test(I)?e:+I}return LA=S,LA}var _He=PHe();const $5=jc(_He);var NA,IG;function IHe(){if(IG)return NA;IG=1;var t=200,e="__lodash_hash_undefined__",n=1/0,r="[object Function]",o="[object GeneratorFunction]",i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=typeof ma=="object"&&ma&&ma.Object===Object&&ma,l=typeof self=="object"&&self&&self.Object===Object&&self,c=a||l||Function("return this")();function u(pe,Pe){var je=pe?pe.length:0;return!!je&&f(pe,Pe,0)>-1}function d(pe,Pe,je,Le){for(var qe=pe.length,at=je+-1;++at<qe;)if(Pe(pe[at],at,pe))return at;return-1}function f(pe,Pe,je){if(Pe!==Pe)return d(pe,h,je);for(var Le=je-1,qe=pe.length;++Le<qe;)if(pe[Le]===Pe)return Le;return-1}function h(pe){return pe!==pe}function g(pe,Pe){return pe.has(Pe)}function y(pe,Pe){return pe==null?void 0:pe[Pe]}function m(pe){var Pe=!1;if(pe!=null&&typeof pe.toString!="function")try{Pe=!!(pe+"")}catch{}return Pe}function S(pe){var Pe=-1,je=Array(pe.size);return pe.forEach(function(Le){je[++Pe]=Le}),je}var x=Array.prototype,C=Function.prototype,E=Object.prototype,P=c["__core-js_shared__"],I=function(){var pe=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return pe?"Symbol(src)_1."+pe:""}(),T=C.toString,M=E.hasOwnProperty,R=E.toString,A=RegExp("^"+T.call(M).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=x.splice,N=Ue(c,"Map"),k=Ue(c,"Set"),D=Ue(Object,"create");function F(pe){var Pe=-1,je=pe?pe.length:0;for(this.clear();++Pe<je;){var Le=pe[Pe];this.set(Le[0],Le[1])}}function H(){this.__data__=D?D(null):{}}function U(pe){return this.has(pe)&&delete this.__data__[pe]}function B(pe){var Pe=this.__data__;if(D){var je=Pe[pe];return je===e?void 0:je}return M.call(Pe,pe)?Pe[pe]:void 0}function W(pe){var Pe=this.__data__;return D?Pe[pe]!==void 0:M.call(Pe,pe)}function K(pe,Pe){var je=this.__data__;return je[pe]=D&&Pe===void 0?e:Pe,this}F.prototype.clear=H,F.prototype.delete=U,F.prototype.get=B,F.prototype.has=W,F.prototype.set=K;function q(pe){var Pe=-1,je=pe?pe.length:0;for(this.clear();++Pe<je;){var Le=pe[Pe];this.set(Le[0],Le[1])}}function X(){this.__data__=[]}function Z(pe){var Pe=this.__data__,je=ue(Pe,pe);if(je<0)return!1;var Le=Pe.length-1;return je==Le?Pe.pop():j.call(Pe,je,1),!0}function Y(pe){var Pe=this.__data__,je=ue(Pe,pe);return je<0?void 0:Pe[je][1]}function G(pe){return ue(this.__data__,pe)>-1}function J(pe,Pe){var je=this.__data__,Le=ue(je,pe);return Le<0?je.push([pe,Pe]):je[Le][1]=Pe,this}q.prototype.clear=X,q.prototype.delete=Z,q.prototype.get=Y,q.prototype.has=G,q.prototype.set=J;function ne(pe){var Pe=-1,je=pe?pe.length:0;for(this.clear();++Pe<je;){var Le=pe[Pe];this.set(Le[0],Le[1])}}function ee(){this.__data__={hash:new F,map:new(N||q),string:new F}}function re(pe){return Be(this,pe).delete(pe)}function le(pe){return Be(this,pe).get(pe)}function ae(pe){return Be(this,pe).has(pe)}function ie(pe,Pe){return Be(this,pe).set(pe,Pe),this}ne.prototype.clear=ee,ne.prototype.delete=re,ne.prototype.get=le,ne.prototype.has=ae,ne.prototype.set=ie;function ge(pe){var Pe=-1,je=pe?pe.length:0;for(this.__data__=new ne;++Pe<je;)this.add(pe[Pe])}function ve(pe){return this.__data__.set(pe,e),this}function fe(pe){return this.__data__.has(pe)}ge.prototype.add=ge.prototype.push=ve,ge.prototype.has=fe;function ue(pe,Pe){for(var je=pe.length;je--;)if(nt(pe[je][0],Pe))return je;return-1}function Ce(pe){if(!ft(pe)||Me(pe))return!1;var Pe=ht(pe)||m(pe)?A:s;return Pe.test($e(pe))}function ye(pe,Pe,je){var Le=-1,qe=u,at=pe.length,Ae=!0,Ne=[],xt=Ne;if(at>=t){var Pt=ke(pe);if(Pt)return S(Pt);Ae=!1,qe=g,xt=new ge}else xt=Ne;e:for(;++Le<at;){var gn=pe[Le],Xt=gn;if(gn=gn!==0?gn:0,Ae&&Xt===Xt){for(var sn=xt.length;sn--;)if(xt[sn]===Xt)continue e;Ne.push(gn)}else qe(xt,Xt,je)||(xt!==Ne&&xt.push(Xt),Ne.push(gn))}return Ne}var ke=k&&1/S(new k([,-0]))[1]==n?function(pe){return new k(pe)}:et;function Be(pe,Pe){var je=pe.__data__;return We(Pe)?je[typeof Pe=="string"?"string":"hash"]:je.map}function Ue(pe,Pe){var je=y(pe,Pe);return Ce(je)?je:void 0}function We(pe){var Pe=typeof pe;return Pe=="string"||Pe=="number"||Pe=="symbol"||Pe=="boolean"?pe!=="__proto__":pe===null}function Me(pe){return!!I&&I in pe}function $e(pe){if(pe!=null){try{return T.call(pe)}catch{}try{return pe+""}catch{}}return""}function Qe(pe){return pe&&pe.length?ye(pe):[]}function nt(pe,Pe){return pe===Pe||pe!==pe&&Pe!==Pe}function ht(pe){var Pe=ft(pe)?R.call(pe):"";return Pe==r||Pe==o}function ft(pe){var Pe=typeof pe;return!!pe&&(Pe=="object"||Pe=="function")}function et(){}return NA=Qe,NA}var THe=IHe();const MHe=jc(THe);function Tae(t){const e=(...n)=>{try{return t(...n)}catch(r){throw r instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(r,e),r}};return e}const ux=()=>{},Hf={ok(t){return{ok:!0,value:t}},err(t){return{ok:!1,error:t}}};function Jn(t,e){const n=e&&t&&typeof t=="object"&&e in t?t[e]:t;throw new Error(`Unknown switch case ${n}`)}const nn=Tae((t,e)=>{if(!t)throw new Error(e||"Assertion Error")}),Ds=Tae((t,e)=>{if(t==null)throw new Error(e??"value must be defined");return t});function D5(){let t,e;const n=new Promise((r,o)=>{t=r,e=o});return Object.assign(n,{resolve:t,reject:e})}function JN(t){return new Promise(e=>setTimeout(e,t))}const $b={Good:"#40C057",Mid:"#FFC078",Poor:"#E03131"},OHe=$b.Good;class Mae{constructor(){V(this,"startTime",0);V(this,"name","");V(this,"frames",0);V(this,"started",!1);V(this,"frame",null);V(this,"recordFrame",()=>{this.frames++,this.started&&(this.frame=requestAnimationFrame(this.recordFrame))})}start(e){this.name=e,this.frames=0,this.started=!0,this.frame!==null&&cancelAnimationFrame(this.frame),this.frame=requestAnimationFrame(this.recordFrame),this.startTime=performance.now()}stop(){this.started=!1,this.frame!==null&&cancelAnimationFrame(this.frame);const e=(performance.now()-this.startTime)/1e3,n=e===0?0:Math.floor(this.frames/e),r=n>55?$b.Good:n>30?$b.Mid:$b.Poor,o=r===$b.Mid?"black":"white",i=this.name[0].toUpperCase()+this.name.slice(1);console.debug(`%cPerf%c ${i} %c${n}%c fps`,`color: white; background: ${OHe};padding: 2px;border-radius: 3px;`,"font-weight: normal",`font-weight: bold; padding: 2px; background: ${r};color: ${o};`,"font-weight: normal")}isStarted(){return this.started}}function j5(t,e){const n=[];e:for(const r of t){for(const o of n)if(e?e(r,o):r===o)continue e;n.push(r)}return n}function Tn(t){return t.filter(e=>e!=null)}function Li(t){return t[t.length-1]}function Oae(t,e){let n,r=1/0;for(const o of t){const i=e(o);i<r&&(n=o,r=i)}return n}function RHe(t,e){let n,r=-1/0;for(const o of t){const i=e(o);i>r&&(n=o,r=i)}return n}function Z_(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Object.is(t[n],e[n]))return!1;return!0}function mS(t,e,n){const r=new Set(e.map(i=>i[t])),o=[];for(const i of n)r.has(i[t])||o.push(i);for(const i of e)o.push(i);return o}/*!
 * MIT License: https://github.com/NoHomey/bind-decorator/blob/master/License
 * Copyright (c) 2016 Ivo Stratev
 */function va(...t){if(t.length===2){const[e,n]=t;n.addInitializer(function(){nn(Reflect.isExtensible(this),"Cannot bind to a non-extensible class.");const o=e.bind(this),i=Reflect.defineProperty(this,n.name,{value:o,writable:!0,configurable:!0});nn(i,"Cannot bind a non-configurable class method.")})}else{const[e,n,r]=t;if(!r||typeof r.value!="function")throw new TypeError(`Only methods can be decorated with @bind. <${n}> is not a method!`);return{configurable:!0,get(){const o=r.value.bind(this);return Object.defineProperty(this,n,{value:o,configurable:!0,writable:!0}),o}}}}class Hl{constructor(){V(this,"items",new WeakMap)}get(e,n){return this.items.has(e)||this.items.set(e,n(e)),this.items.get(e)}}function MM(t,e){let n;const r=(...o)=>(n||(n={},n.promise=new Promise((i,s)=>{n.resolve=i,n.reject=s})),clearTimeout(n.timeout),n.latestArgs=o,n.timeout=setTimeout(()=>{const i=n;n=void 0;try{i.resolve(t(...i.latestArgs))}catch(s){i.reject(s)}},e),n.promise);return r.cancel=()=>{n&&clearTimeout(n.timeout)},r}const TG=new WeakMap;function L5(t,e){if(typeof t!="object"||t===null)return;let n=TG.get(t);n||(n={tags:{},extras:{}},TG.set(t,n)),e.tags&&(n.tags={...n.tags,...e.tags}),e.extras&&(n.extras={...n.extras,...e.extras})}async function _c(t,e){return window.fetch(t,{referrerPolicy:"strict-origin-when-cross-origin",...e})}const dx=(t,e)=>{const n=new window.Image(t,e);return n.referrerPolicy="strict-origin-when-cross-origin",n};class Fs{static async dataUrlToArrayBuffer(e){return _c(e).then(function(n){return n.arrayBuffer()})}static async urlToArrayBuffer(e){return await(await _c(e)).arrayBuffer()}static async urlToBlob(e){return await(await _c(e)).blob()}static async urlToDataUrl(e){if(e.startsWith("data:"))return e;const n=await Fs.urlToBlob(e);return await Fs.blobToDataUrl(n)}static async blobToDataUrl(e){return await new Promise((n,r)=>{if(e){const o=new FileReader;o.onload=()=>n(o.result),o.onerror=i=>r(i),o.onabort=i=>r(i),o.readAsDataURL(e)}})}static async blobToText(e){return await new Promise((n,r)=>{if(e){const o=new FileReader;o.onload=()=>n(o.result),o.onerror=i=>r(i),o.onabort=i=>r(i),o.readAsText(e)}})}static rewriteMimeType(e,n){return e.type===n?e:e instanceof File?new File([e],e.name,{type:n}):new Blob([e],{type:n})}}function N5(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e+""}function Rae(t){const e=new DataView(t);let n=0;for(let r=0;r<e.byteLength;r++)n=(n<<5)-n+e.getUint8(r),n|=0;return n+""}/*!
 * MIT License: https://github.com/ai/nanoid/blob/main/LICENSE
 * Modified code originally from <https://github.com/ai/nanoid>
 * Copyright 2017 Andrey Sitnik <andrey@sitnik.ru>
 *
 * `nanoid` is currently only distributed as an ES module. Some tools (jest, playwright) don't
 * properly support ESM-only code yet, and tldraw itself is distributed as both an ES module and a
 * CommonJS module. By including nanoid here, we can make sure it works well in every environment
 * where tldraw is used. We can also remove some unused features like custom alphabets.
 */const MG=globalThis.crypto,kHe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",AHe=128;let ip,Dm;function $He(t){!ip||ip.length<t?(ip=new Uint8Array(t*AHe),MG.getRandomValues(ip),Dm=0):Dm+t>ip.length&&(MG.getRandomValues(ip),Dm=0),Dm+=t}function DHe(t=21){$He(t-=0);let e="";for(let n=Dm-t;n<Dm;n++)e+=kHe[ip[n]&63];return e}let jHe=DHe;function br(t){return jHe(t)}/*!
 * MIT License: https://github.com/vHeemstra/is-apng/blob/main/license
 * Copyright (c) Philip van Heemstra
 */function LHe(t){const e=new Uint8Array(t);if(!e||!(typeof Buffer<"u"&&Buffer.isBuffer(e)||e instanceof Uint8Array)||e.length<16||!(e[0]===137&&e[1]===80&&e[2]===78&&e[3]===71&&e[4]===13&&e[5]===10&&e[6]===26&&e[7]===10))return!1;function r(i,s,a,l,c=1024){if(!s)return-1;s=new RegExp(s,"g");const u=s.source.length,d=new TextDecoder,f=i.length;if(typeof l>"u"&&(l=f),a>=f||l<=0||a>=l)return-1;i=i.subarray(a,l);let h=-1,g=0,y=0,m="";e:for(;g<i.length;){const S=g+c,x=i.subarray(g,S),C=d.decode(x,{stream:!0}),E=m+C;let P,I=-1;for(;(P=s.exec(E))!==null;){I=P.index-m.length,h=y+I;break e}g=S,y+=C.length;const T=I>-1?I+u:C.length-u;m=C.slice(T)}return h>=0&&(h+=a>=0?a:f+a),h}const o=r(e,"IDAT",12);return o>=12?r(e,"acTL",8,o)>=8:!1}const NHe=t=>new Uint8Array(t)[3]===44;/*!
 * MIT License
 * Modified code originally from <https://github.com/qzb/is-animated>
 * Copyright (c) 2016 Jzef Sokoowski <j.k.sokolowski@gmail.com>
 */function OG(t,e){let n=0;for(;t[e+n];)n+=t[e+n]+1;return n+1}function FHe(t){return new TextDecoder("ascii").decode(t.slice(0,3))==="GIF"}function zHe(t){const e=new Uint8Array(t);let n,r,o=0,i=0;if(!FHe(t))return!1;for(n=e[10]&128,r=e[10]&7,o+=6,o+=7,o+=n?3*Math.pow(2,r+1):0;i<2&&o<e.length;)switch(e[o]){case 44:i+=1,n=e[o+9]&128,r=e[o+9]&7,o+=10,o+=n?3*Math.pow(2,r+1):0,o+=OG(e,o+1)+1;break;case 33:o+=2,o+=OG(e,o);break;case 59:o=e.length;break;default:o=e.length;break}return i>1}/*!
 * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE
 * Copyright: 2014 Alex Gorbatchev
 * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts
 */let eF=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(eF=new Int32Array(eF));const BHe=(t,e)=>{let n=-1;for(let r=0;r<t.length;r++)n=eF[(n^t[r])&255]^n>>>8;return n^-1},RG=4,kG=4;class au{static isPng(e,n){return e.getUint8(n+0)===137&&e.getUint8(n+1)===80&&e.getUint8(n+2)===78&&e.getUint8(n+3)===71&&e.getUint8(n+4)===13&&e.getUint8(n+5)===10&&e.getUint8(n+6)===26&&e.getUint8(n+7)===10}static getChunkType(e,n){return[String.fromCharCode(e.getUint8(n)),String.fromCharCode(e.getUint8(n+1)),String.fromCharCode(e.getUint8(n+2)),String.fromCharCode(e.getUint8(n+3))].join("")}static readChunks(e,n=0){const r={};if(!au.isPng(e,n))throw new Error("Not a PNG");for(n+=8;n<=e.buffer.byteLength;){const o=n,i=e.getInt32(n);n+=4;const s=au.getChunkType(e,n);if(s==="IDAT"&&r[s]){n+=i+RG+kG;continue}if(s==="IEND")break;r[s]={start:o,dataOffset:n+4,size:i},n+=i+RG+kG}return r}static parsePhys(e,n){return{ppux:e.getUint32(n),ppuy:e.getUint32(n+4),unit:e.getUint8(n+4)}}static findChunk(e,n){return au.readChunks(e)[n]}static setPhysChunk(e,n=1,r){let o=46,i=0;const s=au.findChunk(e,"pHYs");s&&(o=s.start,i=s.size);const a=au.findChunk(e,"IDAT");a&&(o=a.start,i=0);const l=new ArrayBuffer(21),c=new DataView(l);c.setUint32(0,9),c.setUint8(4,112),c.setUint8(5,72),c.setUint8(6,89),c.setUint8(7,115);const u=2835.5;c.setInt32(8,u*n),c.setInt32(12,u*n),c.setInt8(16,1);const d=new Uint8Array(l.slice(4,17));c.setInt32(17,BHe(d));const f=e.buffer.slice(0,o),h=e.buffer.slice(o+i);return new Blob([f,l,h],r)}}/*!
 * MIT License: https://github.com/sindresorhus/is-webp/blob/main/license
 * Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)
 */function HHe(t){return!t||t.length<12?!1:t[8]===87&&t[9]===69&&t[10]===66&&t[11]===80}function UHe(t){const e=new Uint8Array(t);return!HHe(e)||!e||e.length<21?!1:(e[20]>>1&1)===1}const kae=Object.freeze(["image/svg+xml"]),Aae=Object.freeze(["image/jpeg","image/png","image/webp"]),$ae=Object.freeze(["image/gif","image/apng","image/avif"]),fw=Object.freeze([...Aae,...kae,...$ae]),OM=Object.freeze(["video/mp4","video/webm","video/quicktime"]),WHe=Object.freeze([...fw,...OM]),VHe=WHe.join(",");class Fa{static loadVideo(e){return new Promise((n,r)=>{const o=document.createElement("video");o.onloadeddata=()=>n(o),o.onerror=i=>{console.error(i),r(new Error("Could not load video"))},o.crossOrigin="anonymous",o.src=e})}static async getVideoFrameAsDataUrl(e,n=0){const r=D5();let o=!1;const i=()=>{if(!o)if(e.readyState>=e.HAVE_METADATA)o=!0,e.currentTime=n;else return;if(e.readyState>=e.HAVE_CURRENT_DATA){const a=document.createElement("canvas");a.width=e.videoWidth,a.height=e.videoHeight;const l=a.getContext("2d");if(!l)throw new Error("Could not get 2d context");l.drawImage(e,0,0),r.resolve(a.toDataURL())}},s=a=>{console.error(a),r.reject(new Error("Could not get video frame"))};e.addEventListener("loadedmetadata",i),e.addEventListener("loadeddata",i),e.addEventListener("canplay",i),e.addEventListener("seeked",i),e.addEventListener("error",s),e.addEventListener("stalled",s),i();try{return await r}finally{e.removeEventListener("loadedmetadata",i),e.removeEventListener("loadeddata",i),e.removeEventListener("canplay",i),e.removeEventListener("seeked",i),e.removeEventListener("error",s),e.removeEventListener("stalled",s)}}static getImageAndDimensions(e){return new Promise((n,r)=>{const o=dx();o.onload=()=>{let i;o.naturalWidth?i={w:o.naturalWidth,h:o.naturalHeight}:(document.body.appendChild(o),i={w:o.clientWidth,h:o.clientHeight},document.body.removeChild(o)),n({...i,image:o})},o.onerror=i=>{console.error(i),r(new Error("Could not load image"))},o.crossOrigin="anonymous",o.referrerPolicy="strict-origin-when-cross-origin",o.style.visibility="hidden",o.style.position="absolute",o.style.opacity="0",o.style.zIndex="-9999",o.src=e})}static async getVideoSize(e){return Fa.usingObjectURL(e,async n=>{const r=await Fa.loadVideo(n);return{w:r.videoWidth,h:r.videoHeight}})}static async getImageSize(e){const{w:n,h:r}=await Fa.usingObjectURL(e,Fa.getImageAndDimensions);try{if(e.type==="image/png"){const o=new DataView(await e.arrayBuffer());if(au.isPng(o,0)){const i=au.findChunk(o,"pHYs");if(i){const s=au.parsePhys(o,i.dataOffset);if(s.unit===0&&s.ppux===s.ppuy){const l=Math.max(s.ppux/2834.645669291339,1);return{w:Math.round(n/l),h:Math.round(r/l)}}}}}}catch(o){return console.error(o),{w:n,h:r}}return{w:n,h:r}}static async isAnimated(e){return e.type==="image/gif"?zHe(await e.arrayBuffer()):e.type==="image/avif"?NHe(await e.arrayBuffer()):e.type==="image/webp"?UHe(await e.arrayBuffer()):e.type==="image/apng"?LHe(await e.arrayBuffer()):!1}static isAnimatedImageType(e){return $ae.includes(e||"")}static isStaticImageType(e){return Aae.includes(e||"")}static isVectorImageType(e){return kae.includes(e||"")}static isImageType(e){return fw.includes(e||"")}static async usingObjectURL(e,n){const r=URL.createObjectURL(e);try{return await n(r)}finally{URL.revokeObjectURL(r)}}}function Pn(t,e,n){return t+(e-t)*n}function mv(t,e,n){return(n-t)/(e-t)}function Ul(t=""){let e=0,n=0,r=0,o=0;function i(){const s=e^e<<11;return e=n,n=r,r=o,o^=(o>>>19^s^s>>>8)>>>0,o/4294967296*2}for(let s=0;s<t.length+64;s++)e^=t.charCodeAt(s)|0,i();return i}function vv(t,e,n,r=!1){const[o,i]=e,[s,a]=n,l=s+(t-o)/(i-o)*(a-s);return r?s<a?Math.max(Math.min(l,a),s):Math.max(Math.min(l,s),a):l}function kl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Uo(t,e){if(kl(t,e))return t[e]}function Dae(t){return Object.keys(t)}function Mo(t){return Object.values(t)}function zs(t){return Object.entries(t)}function jae(t){return Object.fromEntries(t)}function vS(t,e){const n={};let r=!1;for(const[o,i]of zs(t))e(o,i)?n[o]=i:r=!0;return r?n:t}function hh(t,e){const n={};for(const[r,o]of zs(t)){const i=e(r,o);n[r]=i}return n}function Lae(t,e){if(t===e)return!0;const n=new Set(Object.keys(t)),r=new Set(Object.keys(e));if(n.size!==r.size)return!1;for(const o of n)if(!r.has(o)||!Object.is(t[o],e[o]))return!1;return!0}function qHe(t){const e=KHe(t.chars),n=GHe(e,t.firstPositive,t.mostPositive,t.mostNegative),r=t.jitterRange??Math.floor(Math.pow(e.length,3)/5),o=XHe(r,e.length);return{chars:t.chars,byChar:e.byChar,byCode:e.byCode,length:e.length,first:e.byCode[0],last:e.byCode[e.length-1],firstPositive:n.firstPositive,mostPositive:n.mostPositive,firstNegative:n.firstNegative,mostNegative:n.mostNegative,jitterRange:r,paddingDict:o}}function KHe(t){const e={},n={},r=t.length;for(let o=0;o<r;o++){const i=t[o];e[o]=i,n[i]=o}return{byCode:e,byChar:n,length:r}}function GHe(t,e,n,r){const o=t.byChar[e],i=t.byChar[n],s=t.byChar[r];if(o===void 0||i===void 0||s===void 0)throw new Error("invalid charSet");if(i-o<3)throw new Error("mostPositive must be at least 3 characters away from neutral");if(o-s<3)throw new Error("mostNegative must be at least 3 characters away from neutral");return{firstPositive:t.byCode[o],mostPositive:t.byCode[i],firstNegative:t.byCode[o-1],mostNegative:t.byCode[s]}}function XHe(t,e){const n={};for(let r=0;r<100&&(n[r]=Math.pow(e,r),!(n[r]>t));r++);return n}var FA=null;function F5(){return FA||(FA=qHe({chars:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",firstPositive:"a",mostPositive:"z",mostNegative:"A"}))}function Af(t,e,n){const r=n.byChar[t],o=n.byChar[e];return Math.abs(r-o)}function z5(t,e){const n=t[0];if(n>e.mostPositive||n<e.mostNegative)throw new Error("invalid firstChar on key");return n===e.mostPositive?Af(n,e.firstPositive,e)+1+J_(t.slice(1),"positive",e):n===e.mostNegative?Af(n,e.firstNegative,e)+1+J_(t.slice(1),"negative",e):n>=e.firstPositive?Af(n,e.firstPositive,e)+2:Af(n,e.firstNegative,e)+2}function J_(t,e,n){const r=t[0];if(r>n.mostPositive||r<n.mostNegative)throw new Error("invalid firstChar on key");return r===n.mostPositive&&e==="positive"?Af(r,n.mostNegative,n)+1+J_(t.slice(1),e,n):r===n.mostNegative&&e==="negative"?Af(r,n.mostPositive,n)+1+J_(t.slice(1),e,n):e==="positive"?Af(r,n.mostNegative,n)+2:Af(r,n.mostPositive,n)+2}function RM(t,e,n,r,o){const i=Math.max(t.length,e.length);return n==="start"?[t.padStart(i,r),e.padStart(i,r)]:[t.padEnd(i,r),e.padEnd(i,r)]}function YHe(t,e,n){let[r,o]=RM(t,e,"end",n.first),i=tF(r,o,n);i===1&&(r=r.padEnd(r.length+1,n.first),i=n.length);const s=zae(Math.floor(i/2),n);return B5(r,s,n)}function tF(t,e,n){const[r,o]=RM(t,e,"end",n.first).sort(),i=Nae(o,r,n);return QHe(i,n)}function B5(t,e,n){const r=n.length,[o,i]=RM(t,e,"start",n.first),s=[];let a=0;for(let l=o.length-1;l>=0;l--){const c=n.byChar[o[l]],u=n.byChar[i[l]],d=c+u+a;a=Math.floor(d/r);const f=d%r;s.unshift(n.byCode[f])}return a>0&&s.unshift(n.byCode[a]),s.join("")}function Nae(t,e,n){const r=n.length,[o,i]=RM(t,e,"start",n.first),s=[];let a=0;for(let l=o.length-1;l>=0;l--){let c=n.byChar[o[l]];const u=n.byChar[i[l]]+a;c<u?(a=1,c+=r):a=0;const d=c-u;s.unshift(n.byCode[d])}if(a>0)throw new Error("Subtraction result is negative. Ensure a is greater than or equal to b.");for(;s.length>1&&s[0]===n.byCode[0];)s.shift();return s.join("")}function Fae(t,e){return B5(t,e.byCode[1],e)}function nF(t,e){return Nae(t,e.byCode[1],e)}function zae(t,e){if(t===0)return e.byCode[0];let n="";const r=e.length;for(;t>0;)n=e.byCode[t%r]+n,t=Math.floor(t/r);return n}function QHe(t,e){let n=0;const r=t.length,o=e.length;for(let i=0;i<r;i++)n+=e.byChar[t[i]]*Math.pow(o,r-i-1);return n}function ZHe(t){return t.firstPositive+t.byCode[0]}function JHe(t,e){return z5(t,e)===t.length}function AG(t,e){eI(t,e)}function eI(t,e){const n=Uae(t,e),r=z5(n,e);if(r>t.length)throw new Error("invalid order key length: "+t);return t.slice(0,r)}function Bae(t,e){if(!JHe(t,e))throw new Error("invalid integer length: "+t)}function Hae(t,e){Bae(t,e);const[n,r]=Wae(t,e);if(r.split("").some(s=>s!==e.byCode[e.length-1])){const s=Fae(r,e);return n+s}const i=t9e(n,e);return Vae(i,"lower",e)}function e9e(t,e){Bae(t,e);const[n,r]=Wae(t,e);if(r.split("").some(s=>s!==e.byCode[0])){const s=nF(r,e);return n+s}const i=n9e(n,e);return Vae(i,"upper",e)}function Uae(t,e){let n=0;if(t[0]===e.mostPositive)for(;t[n]===e.mostPositive;)n=n+1;if(t[0]===e.mostNegative)for(;t[n]===e.mostNegative;)n=n+1;return t.slice(0,n+1)}function Wae(t,e){const n=Uae(t,e),r=t.slice(n.length);return[n,r]}function t9e(t,e){const n=t>=e.firstPositive,r=Fae(t,e),o=t[t.length-1]===e.mostPositive,i=r[r.length-1]===e.mostPositive;return n&&i?r+e.mostNegative:!n&&o?t.slice(0,t.length-1):r}function n9e(t,e){const n=t>=e.firstPositive,r=t[t.length-1]===e.mostNegative;if(n&&r){const o=t.slice(0,t.length-1);return nF(o,e)}return!n&&r?t+e.mostPositive:nF(t,e)}function Vae(t,e,n){const r=z5(t,n),o=e==="upper"?n.byCode[n.length-1]:n.byCode[0];return t+o.repeat(r-t.length)}function qae(t,e){const n=zae(Math.floor(Math.random()*e.jitterRange),e);return B5(t,n,e)}function r9e(t,e,n){const r=t.padEnd(t.length+e,n.first);return qae(r,n)}function o9e(t,e,n){const r=eI(t,n),o=Hae(r,n);let i=0;if(e!==null){const a=tF(t,e,n);a<n.jitterRange+1&&(i=Math.max(i,$G(a,n)))}const s=tF(t,o,n);return s<n.jitterRange+1&&(i=Math.max(i,$G(s,n))),i}function $G(t,e){const n=e.jitterRange-t,r=Object.entries(e.paddingDict).find(([o,i])=>i>n);return r?parseInt(r[0]):0}function i9e(t,e,n=F5()){if(t!==null&&AG(t,n),e!==null&&AG(e,n),t===null&&e===null)return ZHe(n);if(t===null){const r=eI(e,n);return e9e(r,n)}if(e===null){const r=eI(t,n);return Hae(r,n)}if(t>=e)throw new Error(t+" >= "+e);return YHe(t,e,n)}function Kae(t,e,n=F5()){const r=i9e(t,e,n),o=o9e(r,e,n);return o?r9e(r,o,n):qae(r,n)}function Gae(t,e,n,r=F5()){return s9e(t,e,n,r,Kae,Gae)}function s9e(t,e,n,r,o,i){if(n===0)return[];if(n===1)return[o(t,e,r)];if(e==null){let l=o(t,e,r);const c=[l];for(let u=0;u<n-1;u++)l=o(l,e,r),c.push(l);return c}if(t==null){let l=o(t,e,r);const c=[l];for(let u=0;u<n-1;u++)l=o(t,l,r),c.push(l);return c.reverse(),c}const s=Math.floor(n/2),a=o(t,e,r);return[...i(t,a,s,r),a,...i(a,e,n-s-1,r)]}const Zv=Gae,Xae="a0";function a9e(t){try{Kae(t,null)}catch{throw new Error("invalid index: "+t)}}function yv(t,e,n){return Zv(t??null,e??null,n)}function zA(t,e){return Zv(t??null,null,e)}function fx(t,e){return Zv(t??null,e??null,1)[0]}function cu(t=null){return Zv(t,null,1)[0]}function l9e(t=null){return Zv(null,t,1)[0]}function hx(t,e="a1"){return[e,...Zv(e,null,t)]}function Ni(t,e){return t.index<e.index?-1:t.index>e.index?1:0}function c9e(t,e){return t.id>e.id?1:-1}function H5(t){try{return localStorage.getItem(t)}catch{return null}}function U5(t,e){try{localStorage.setItem(t,e)}catch{}}function u9e(){try{localStorage.clear()}catch{}}function Yae(t){try{return sessionStorage.getItem(t)}catch{return null}}function W5(t,e){try{sessionStorage.setItem(t,e)}catch{}}function Qae(t){try{sessionStorage.removeItem(t)}catch{}}function d9e(){try{sessionStorage.clear()}catch{}}const jm=[],f9e=60,gP=Math.ceil(1e3/f9e);let cb,BA=0,rF=0;const h9e=()=>{const t=jm.splice(0,jm.length);for(const e of t)e()};function Zae(){if(cb)return;const t=Date.now(),e=t-rF;if(BA+e<gP){cb=requestAnimationFrame(()=>{cb=void 0,Zae()});return}cb=requestAnimationFrame(()=>{cb=void 0,rF=t,BA=Math.min(BA+e-gP,gP*10),h9e()})}let DG=!1;function Jae(t){return jm.includes(t)||(jm.push(t),DG||(DG=!0,rF=Date.now()-gP-1),Zae()),()=>{const e=jm.indexOf(t);e>-1&&jm.splice(e,1)}}class p9e{constructor(){V(this,"timeouts",new Map);V(this,"intervals",new Map);V(this,"rafs",new Map);this.setTimeout=this.setTimeout.bind(this),this.setInterval=this.setInterval.bind(this),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.dispose=this.dispose.bind(this)}setTimeout(e,n,r,...o){const i=window.setTimeout(n,r,o),s=this.timeouts.get(e)??[];return this.timeouts.set(e,[...s,i]),i}setInterval(e,n,r,...o){const i=window.setInterval(n,r,o),s=this.intervals.get(e)??[];return this.intervals.set(e,[...s,i]),i}requestAnimationFrame(e,n){const r=window.requestAnimationFrame(n),o=this.rafs.get(e)??[];return this.rafs.set(e,[...o,r]),r}dispose(e){var n,r,o;(n=this.timeouts.get(e))==null||n.forEach(i=>clearTimeout(i)),(r=this.intervals.get(e))==null||r.forEach(i=>clearInterval(i)),(o=this.rafs.get(e))==null||o.forEach(i=>cancelAnimationFrame(i)),this.timeouts.delete(e),this.intervals.delete(e),this.rafs.delete(e)}disposeAll(){for(const e of this.timeouts.keys())this.dispose(e)}forContext(e){return{setTimeout:(n,r,...o)=>this.setTimeout(e,n,r,o),setInterval:(n,r,...o)=>this.setInterval(e,n,r,o),requestAnimationFrame:n=>this.requestAnimationFrame(e,n),dispose:()=>this.dispose(e)}}}const yn=(t,e)=>{try{return new URL(t,e)}catch{return}};function g9e(t){return t!==void 0}function m9e(){return typeof globalThis<"u"&&globalThis.structuredClone?[globalThis.structuredClone,!0]:typeof global<"u"&&global.structuredClone?[global.structuredClone,!0]:typeof window<"u"&&window.structuredClone?[window.structuredClone,!0]:[t=>t&&JSON.parse(JSON.stringify(t)),!1]}const ele=m9e(),to=ele[0];ele[1];const v9e=Object.getPrototypeOf(to({}));fh("@tldraw/utils","3.13.1","esm");var jG={},ub,LG;function Xs(){if(LG)return ub;LG=1;var t=function(e){return e&&e.Math===Math&&e};return ub=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof ma=="object"&&ma)||t(typeof ub=="object"&&ub)||function(){return this}()||Function("return this")(),ub}var HA={},UA,NG;function Ys(){return NG||(NG=1,UA=function(t){try{return!!t()}catch{return!0}}),UA}var WA,FG;function ph(){if(FG)return WA;FG=1;var t=Ys();return WA=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),WA}var VA,zG;function kM(){if(zG)return VA;zG=1;var t=Ys();return VA=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),VA}var qA,BG;function Ld(){if(BG)return qA;BG=1;var t=kM(),e=Function.prototype.call;return qA=t?e.bind(e):function(){return e.apply(e,arguments)},qA}var KA={},HG;function y9e(){if(HG)return KA;HG=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);return KA.f=n?function(o){var i=e(this,o);return!!i&&i.enumerable}:t,KA}var GA,UG;function tle(){return UG||(UG=1,GA=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),GA}var XA,WG;function _i(){if(WG)return XA;WG=1;var t=kM(),e=Function.prototype,n=e.call,r=t&&e.bind.bind(n,n);return XA=t?r:function(o){return function(){return n.apply(o,arguments)}},XA}var YA,VG;function Jv(){if(VG)return YA;VG=1;var t=_i(),e=t({}.toString),n=t("".slice);return YA=function(r){return n(e(r),8,-1)},YA}var QA,qG;function b9e(){if(qG)return QA;qG=1;var t=_i(),e=Ys(),n=Jv(),r=Object,o=t("".split);return QA=e(function(){return!r("z").propertyIsEnumerable(0)})?function(i){return n(i)==="String"?o(i,""):r(i)}:r,QA}var ZA,KG;function nle(){return KG||(KG=1,ZA=function(t){return t==null}),ZA}var JA,GG;function ey(){if(GG)return JA;GG=1;var t=nle(),e=TypeError;return JA=function(n){if(t(n))throw new e("Can't call method on "+n);return n},JA}var e$,XG;function AM(){if(XG)return e$;XG=1;var t=b9e(),e=ey();return e$=function(n){return t(e(n))},e$}var t$,YG;function Qs(){if(YG)return t$;YG=1;var t=typeof document=="object"&&document.all;return t$=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},t$}var n$,QG;function Nd(){if(QG)return n$;QG=1;var t=Qs();return n$=function(e){return typeof e=="object"?e!==null:t(e)},n$}var r$,ZG;function $M(){if(ZG)return r$;ZG=1;var t=Xs(),e=Qs(),n=function(r){return e(r)?r:void 0};return r$=function(r,o){return arguments.length<2?n(t[r]):t[r]&&t[r][o]},r$}var o$,JG;function rle(){if(JG)return o$;JG=1;var t=_i();return o$=t({}.isPrototypeOf),o$}var i$,eX;function S9e(){if(eX)return i$;eX=1;var t=Xs(),e=t.navigator,n=e&&e.userAgent;return i$=n?String(n):"",i$}var s$,tX;function x9e(){if(tX)return s$;tX=1;var t=Xs(),e=S9e(),n=t.process,r=t.Deno,o=n&&n.versions||r&&r.version,i=o&&o.v8,s,a;return i&&(s=i.split("."),a=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!a&&e&&(s=e.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=e.match(/Chrome\/(\d+)/),s&&(a=+s[1]))),s$=a,s$}var a$,nX;function ole(){if(nX)return a$;nX=1;var t=x9e(),e=Ys(),n=Xs(),r=n.String;return a$=!!Object.getOwnPropertySymbols&&!e(function(){var o=Symbol("symbol detection");return!r(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41}),a$}var l$,rX;function ile(){if(rX)return l$;rX=1;var t=ole();return l$=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",l$}var c$,oX;function sle(){if(oX)return c$;oX=1;var t=$M(),e=Qs(),n=rle(),r=ile(),o=Object;return c$=r?function(i){return typeof i=="symbol"}:function(i){var s=t("Symbol");return e(s)&&n(s.prototype,o(i))},c$}var u$,iX;function w9e(){if(iX)return u$;iX=1;var t=String;return u$=function(e){try{return t(e)}catch{return"Object"}},u$}var d$,sX;function V5(){if(sX)return d$;sX=1;var t=Qs(),e=w9e(),n=TypeError;return d$=function(r){if(t(r))return r;throw new n(e(r)+" is not a function")},d$}var f$,aX;function q5(){if(aX)return f$;aX=1;var t=V5(),e=nle();return f$=function(n,r){var o=n[r];return e(o)?void 0:t(o)},f$}var h$,lX;function C9e(){if(lX)return h$;lX=1;var t=Ld(),e=Qs(),n=Nd(),r=TypeError;return h$=function(o,i){var s,a;if(i==="string"&&e(s=o.toString)&&!n(a=t(s,o))||e(s=o.valueOf)&&!n(a=t(s,o))||i!=="string"&&e(s=o.toString)&&!n(a=t(s,o)))return a;throw new r("Can't convert object to primitive value")},h$}var p$={exports:{}},g$,cX;function ale(){return cX||(cX=1,g$=!1),g$}var m$,uX;function K5(){if(uX)return m$;uX=1;var t=Xs(),e=Object.defineProperty;return m$=function(n,r){try{e(t,n,{value:r,configurable:!0,writable:!0})}catch{t[n]=r}return r},m$}var dX;function G5(){if(dX)return p$.exports;dX=1;var t=ale(),e=Xs(),n=K5(),r="__core-js_shared__",o=p$.exports=e[r]||n(r,{});return(o.versions||(o.versions=[])).push({version:"3.42.0",mode:t?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"}),p$.exports}var v$,fX;function X5(){if(fX)return v$;fX=1;var t=G5();return v$=function(e,n){return t[e]||(t[e]=n||{})},v$}var y$,hX;function hw(){if(hX)return y$;hX=1;var t=ey(),e=Object;return y$=function(n){return e(t(n))},y$}var b$,pX;function gh(){if(pX)return b$;pX=1;var t=_i(),e=hw(),n=t({}.hasOwnProperty);return b$=Object.hasOwn||function(o,i){return n(e(o),i)},b$}var S$,gX;function lle(){if(gX)return S$;gX=1;var t=_i(),e=0,n=Math.random(),r=t(1 .toString);return S$=function(o){return"Symbol("+(o===void 0?"":o)+")_"+r(++e+n,36)},S$}var x$,mX;function Fd(){if(mX)return x$;mX=1;var t=Xs(),e=X5(),n=gh(),r=lle(),o=ole(),i=ile(),s=t.Symbol,a=e("wks"),l=i?s.for||s:s&&s.withoutSetter||r;return x$=function(c){return n(a,c)||(a[c]=o&&n(s,c)?s[c]:l("Symbol."+c)),a[c]},x$}var w$,vX;function E9e(){if(vX)return w$;vX=1;var t=Ld(),e=Nd(),n=sle(),r=q5(),o=C9e(),i=Fd(),s=TypeError,a=i("toPrimitive");return w$=function(l,c){if(!e(l)||n(l))return l;var u=r(l,a),d;if(u){if(c===void 0&&(c="default"),d=t(u,l,c),!e(d)||n(d))return d;throw new s("Can't convert object to primitive value")}return c===void 0&&(c="number"),o(l,c)},w$}var C$,yX;function cle(){if(yX)return C$;yX=1;var t=E9e(),e=sle();return C$=function(n){var r=t(n,"string");return e(r)?r:r+""},C$}var E$,bX;function ule(){if(bX)return E$;bX=1;var t=Xs(),e=Nd(),n=t.document,r=e(n)&&e(n.createElement);return E$=function(o){return r?n.createElement(o):{}},E$}var P$,SX;function dle(){if(SX)return P$;SX=1;var t=ph(),e=Ys(),n=ule();return P$=!t&&!e(function(){return Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a!==7}),P$}var xX;function fle(){if(xX)return HA;xX=1;var t=ph(),e=Ld(),n=y9e(),r=tle(),o=AM(),i=cle(),s=gh(),a=dle(),l=Object.getOwnPropertyDescriptor;return HA.f=t?l:function(u,d){if(u=o(u),d=i(d),a)try{return l(u,d)}catch{}if(s(u,d))return r(!e(n.f,u,d),u[d])},HA}var _$={},I$,wX;function hle(){if(wX)return I$;wX=1;var t=ph(),e=Ys();return I$=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),I$}var T$,CX;function vg(){if(CX)return T$;CX=1;var t=Nd(),e=String,n=TypeError;return T$=function(r){if(t(r))return r;throw new n(e(r)+" is not an object")},T$}var EX;function pw(){if(EX)return _$;EX=1;var t=ph(),e=dle(),n=hle(),r=vg(),o=cle(),i=TypeError,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l="enumerable",c="configurable",u="writable";return _$.f=t?n?function(f,h,g){if(r(f),h=o(h),r(g),typeof f=="function"&&h==="prototype"&&"value"in g&&u in g&&!g[u]){var y=a(f,h);y&&y[u]&&(f[h]=g.value,g={configurable:c in g?g[c]:y[c],enumerable:l in g?g[l]:y[l],writable:!1})}return s(f,h,g)}:s:function(f,h,g){if(r(f),h=o(h),r(g),e)try{return s(f,h,g)}catch{}if("get"in g||"set"in g)throw new i("Accessors not supported");return"value"in g&&(f[h]=g.value),f},_$}var M$,PX;function Y5(){if(PX)return M$;PX=1;var t=ph(),e=pw(),n=tle();return M$=t?function(r,o,i){return e.f(r,o,n(1,i))}:function(r,o,i){return r[o]=i,r},M$}var O$={exports:{}},R$,_X;function P9e(){if(_X)return R$;_X=1;var t=ph(),e=gh(),n=Function.prototype,r=t&&Object.getOwnPropertyDescriptor,o=e(n,"name"),i=o&&(function(){}).name==="something",s=o&&(!t||t&&r(n,"name").configurable);return R$={EXISTS:o,PROPER:i,CONFIGURABLE:s},R$}var k$,IX;function ple(){if(IX)return k$;IX=1;var t=_i(),e=Qs(),n=G5(),r=t(Function.toString);return e(n.inspectSource)||(n.inspectSource=function(o){return r(o)}),k$=n.inspectSource,k$}var A$,TX;function _9e(){if(TX)return A$;TX=1;var t=Xs(),e=Qs(),n=t.WeakMap;return A$=e(n)&&/native code/.test(String(n)),A$}var $$,MX;function gle(){if(MX)return $$;MX=1;var t=X5(),e=lle(),n=t("keys");return $$=function(r){return n[r]||(n[r]=e(r))},$$}var D$,OX;function Q5(){return OX||(OX=1,D$={}),D$}var j$,RX;function mle(){if(RX)return j$;RX=1;var t=_9e(),e=Xs(),n=Nd(),r=Y5(),o=gh(),i=G5(),s=gle(),a=Q5(),l="Object already initialized",c=e.TypeError,u=e.WeakMap,d,f,h,g=function(x){return h(x)?f(x):d(x,{})},y=function(x){return function(C){var E;if(!n(C)||(E=f(C)).type!==x)throw new c("Incompatible receiver, "+x+" required");return E}};if(t||i.state){var m=i.state||(i.state=new u);m.get=m.get,m.has=m.has,m.set=m.set,d=function(x,C){if(m.has(x))throw new c(l);return C.facade=x,m.set(x,C),C},f=function(x){return m.get(x)||{}},h=function(x){return m.has(x)}}else{var S=s("state");a[S]=!0,d=function(x,C){if(o(x,S))throw new c(l);return C.facade=x,r(x,S,C),C},f=function(x){return o(x,S)?x[S]:{}},h=function(x){return o(x,S)}}return j$={set:d,get:f,has:h,enforce:g,getterFor:y},j$}var kX;function I9e(){if(kX)return O$.exports;kX=1;var t=_i(),e=Ys(),n=Qs(),r=gh(),o=ph(),i=P9e().CONFIGURABLE,s=ple(),a=mle(),l=a.enforce,c=a.get,u=String,d=Object.defineProperty,f=t("".slice),h=t("".replace),g=t([].join),y=o&&!e(function(){return d(function(){},"length",{value:8}).length!==8}),m=String(String).split("String"),S=O$.exports=function(x,C,E){f(u(C),0,7)==="Symbol("&&(C="["+h(u(C),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),E&&E.getter&&(C="get "+C),E&&E.setter&&(C="set "+C),(!r(x,"name")||i&&x.name!==C)&&(o?d(x,"name",{value:C,configurable:!0}):x.name=C),y&&E&&r(E,"arity")&&x.length!==E.arity&&d(x,"length",{value:E.arity});try{E&&r(E,"constructor")&&E.constructor?o&&d(x,"prototype",{writable:!1}):x.prototype&&(x.prototype=void 0)}catch{}var P=l(x);return r(P,"source")||(P.source=g(m,typeof C=="string"?C:"")),x};return Function.prototype.toString=S(function(){return n(this)&&c(this).source||s(this)},"toString"),O$.exports}var L$,AX;function vle(){if(AX)return L$;AX=1;var t=Qs(),e=pw(),n=I9e(),r=K5();return L$=function(o,i,s,a){a||(a={});var l=a.enumerable,c=a.name!==void 0?a.name:i;if(t(s)&&n(s,c,a),a.global)l?o[i]=s:r(i,s);else{try{a.unsafe?o[i]&&(l=!0):delete o[i]}catch{}l?o[i]=s:e.f(o,i,{value:s,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return o},L$}var N$={},F$,$X;function T9e(){if($X)return F$;$X=1;var t=Math.ceil,e=Math.floor;return F$=Math.trunc||function(r){var o=+r;return(o>0?e:t)(o)},F$}var z$,DX;function yg(){if(DX)return z$;DX=1;var t=T9e();return z$=function(e){var n=+e;return n!==n||n===0?0:t(n)},z$}var B$,jX;function M9e(){if(jX)return B$;jX=1;var t=yg(),e=Math.max,n=Math.min;return B$=function(r,o){var i=t(r);return i<0?e(i+o,0):n(i,o)},B$}var H$,LX;function yle(){if(LX)return H$;LX=1;var t=yg(),e=Math.min;return H$=function(n){var r=t(n);return r>0?e(r,9007199254740991):0},H$}var U$,NX;function gw(){if(NX)return U$;NX=1;var t=yle();return U$=function(e){return t(e.length)},U$}var W$,FX;function O9e(){if(FX)return W$;FX=1;var t=AM(),e=M9e(),n=gw(),r=function(o){return function(i,s,a){var l=t(i),c=n(l);if(c===0)return!o&&-1;var u=e(a,c),d;if(o&&s!==s){for(;c>u;)if(d=l[u++],d!==d)return!0}else for(;c>u;u++)if((o||u in l)&&l[u]===s)return o||u||0;return!o&&-1}};return W$={includes:r(!0),indexOf:r(!1)},W$}var V$,zX;function ble(){if(zX)return V$;zX=1;var t=_i(),e=gh(),n=AM(),r=O9e().indexOf,o=Q5(),i=t([].push);return V$=function(s,a){var l=n(s),c=0,u=[],d;for(d in l)!e(o,d)&&e(l,d)&&i(u,d);for(;a.length>c;)e(l,d=a[c++])&&(~r(u,d)||i(u,d));return u},V$}var q$,BX;function Z5(){return BX||(BX=1,q$=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),q$}var HX;function R9e(){if(HX)return N$;HX=1;var t=ble(),e=Z5(),n=e.concat("length","prototype");return N$.f=Object.getOwnPropertyNames||function(o){return t(o,n)},N$}var K$={},UX;function k9e(){return UX||(UX=1,K$.f=Object.getOwnPropertySymbols),K$}var G$,WX;function A9e(){if(WX)return G$;WX=1;var t=$M(),e=_i(),n=R9e(),r=k9e(),o=vg(),i=e([].concat);return G$=t("Reflect","ownKeys")||function(a){var l=n.f(o(a)),c=r.f;return c?i(l,c(a)):l},G$}var X$,VX;function $9e(){if(VX)return X$;VX=1;var t=gh(),e=A9e(),n=fle(),r=pw();return X$=function(o,i,s){for(var a=e(i),l=r.f,c=n.f,u=0;u<a.length;u++){var d=a[u];!t(o,d)&&!(s&&t(s,d))&&l(o,d,c(i,d))}},X$}var Y$,qX;function D9e(){if(qX)return Y$;qX=1;var t=Ys(),e=Qs(),n=/#|\.prototype\./,r=function(l,c){var u=i[o(l)];return u===a?!0:u===s?!1:e(c)?t(c):!!c},o=r.normalize=function(l){return String(l).replace(n,".").toLowerCase()},i=r.data={},s=r.NATIVE="N",a=r.POLYFILL="P";return Y$=r,Y$}var Q$,KX;function ty(){if(KX)return Q$;KX=1;var t=Xs(),e=fle().f,n=Y5(),r=vle(),o=K5(),i=$9e(),s=D9e();return Q$=function(a,l){var c=a.target,u=a.global,d=a.stat,f,h,g,y,m,S;if(u?h=t:d?h=t[c]||o(c,{}):h=t[c]&&t[c].prototype,h)for(g in l){if(m=l[g],a.dontCallGetSet?(S=e(h,g),y=S&&S.value):y=h[g],f=s(u?g:c+(d?".":"#")+g,a.forced),!f&&y!==void 0){if(typeof m==typeof y)continue;i(m,y)}(a.sham||y&&y.sham)&&n(m,"sham",!0),r(h,g,m,a)}},Q$}var Z$={},J$,GX;function j9e(){if(GX)return J$;GX=1;var t=ble(),e=Z5();return J$=Object.keys||function(r){return t(r,e)},J$}var XX;function L9e(){if(XX)return Z$;XX=1;var t=ph(),e=hle(),n=pw(),r=vg(),o=AM(),i=j9e();return Z$.f=t&&!e?Object.defineProperties:function(a,l){r(a);for(var c=o(l),u=i(l),d=u.length,f=0,h;d>f;)n.f(a,h=u[f++],c[h]);return a},Z$}var eD,YX;function N9e(){if(YX)return eD;YX=1;var t=$M();return eD=t("document","documentElement"),eD}var tD,QX;function Sle(){if(QX)return tD;QX=1;var t=vg(),e=L9e(),n=Z5(),r=Q5(),o=N9e(),i=ule(),s=gle(),a=">",l="<",c="prototype",u="script",d=s("IE_PROTO"),f=function(){},h=function(x){return l+u+a+x+l+"/"+u+a},g=function(x){x.write(h("")),x.close();var C=x.parentWindow.Object;return x=null,C},y=function(){var x=i("iframe"),C="java"+u+":",E;return x.style.display="none",o.appendChild(x),x.src=String(C),E=x.contentWindow.document,E.open(),E.write(h("document.F=Object")),E.close(),E.F},m,S=function(){try{m=new ActiveXObject("htmlfile")}catch{}S=typeof document<"u"?document.domain&&m?g(m):y():g(m);for(var x=n.length;x--;)delete S[c][n[x]];return S()};return r[d]=!0,tD=Object.create||function(C,E){var P;return C!==null?(f[c]=t(C),P=new f,f[c]=null,P[d]=C):P=S(),E===void 0?P:e.f(P,E)},tD}var nD,ZX;function J5(){if(ZX)return nD;ZX=1;var t=Fd(),e=Sle(),n=pw().f,r=t("unscopables"),o=Array.prototype;return o[r]===void 0&&n(o,r,{configurable:!0,value:e(null)}),nD=function(i){o[r][i]=!0},nD}var JX;function F9e(){if(JX)return jG;JX=1;var t=ty(),e=hw(),n=gw(),r=yg(),o=J5();return t({target:"Array",proto:!0},{at:function(s){var a=e(this),l=n(a),c=r(s),u=c>=0?c:l+c;return u<0||u>=l?void 0:a[u]}}),o("at"),jG}var rD,eY;function mw(){if(eY)return rD;eY=1;var t=Xs(),e=_i();return rD=function(n,r){return e(t[n].prototype[r])},rD}var oD,tY;function z9e(){if(tY)return oD;tY=1,F9e();var t=mw();return oD=t("Array","at"),oD}var iD,nY;function B9e(){if(nY)return iD;nY=1;var t=z9e();return iD=t,iD}B9e();var rY={},sD,oY;function xle(){if(oY)return sD;oY=1;var t=Jv();return sD=Array.isArray||function(n){return t(n)==="Array"},sD}var aD,iY;function H9e(){if(iY)return aD;iY=1;var t=TypeError,e=9007199254740991;return aD=function(n){if(n>e)throw t("Maximum allowed index exceeded");return n},aD}var lD,sY;function U9e(){if(sY)return lD;sY=1;var t=Jv(),e=_i();return lD=function(n){if(t(n)==="Function")return e(n)},lD}var cD,aY;function W9e(){if(aY)return cD;aY=1;var t=U9e(),e=V5(),n=kM(),r=t(t.bind);return cD=function(o,i){return e(o),i===void 0?o:n?r(o,i):function(){return o.apply(i,arguments)}},cD}var uD,lY;function wle(){if(lY)return uD;lY=1;var t=xle(),e=gw(),n=H9e(),r=W9e(),o=function(i,s,a,l,c,u,d,f){for(var h=c,g=0,y=d?r(d,f):!1,m,S;g<l;)g in a&&(m=y?y(a[g],g,s):a[g],u>0&&t(m)?(S=e(m),h=o(i,s,m,S,h,u-1)-1):(n(h+1),i[h]=m),h++),g++;return h};return uD=o,uD}var dD,cY;function V9e(){if(cY)return dD;cY=1;var t=Fd(),e=t("toStringTag"),n={};return n[e]="z",dD=String(n)==="[object z]",dD}var fD,uY;function Cle(){if(uY)return fD;uY=1;var t=V9e(),e=Qs(),n=Jv(),r=Fd(),o=r("toStringTag"),i=Object,s=n(function(){return arguments}())==="Arguments",a=function(l,c){try{return l[c]}catch{}};return fD=t?n:function(l){var c,u,d;return l===void 0?"Undefined":l===null?"Null":typeof(u=a(c=i(l),o))=="string"?u:s?n(c):(d=n(c))==="Object"&&e(c.callee)?"Arguments":d},fD}var hD,dY;function q9e(){if(dY)return hD;dY=1;var t=_i(),e=Ys(),n=Qs(),r=Cle(),o=$M(),i=ple(),s=function(){},a=o("Reflect","construct"),l=/^\s*(?:class|function)\b/,c=t(l.exec),u=!l.test(s),d=function(g){if(!n(g))return!1;try{return a(s,[],g),!0}catch{return!1}},f=function(g){if(!n(g))return!1;switch(r(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return u||!!c(l,i(g))}catch{return!0}};return f.sham=!0,hD=!a||e(function(){var h;return d(d.call)||!d(Object)||!d(function(){h=!0})||h})?f:d,hD}var pD,fY;function K9e(){if(fY)return pD;fY=1;var t=xle(),e=q9e(),n=Nd(),r=Fd(),o=r("species"),i=Array;return pD=function(s){var a;return t(s)&&(a=s.constructor,e(a)&&(a===i||t(a.prototype))?a=void 0:n(a)&&(a=a[o],a===null&&(a=void 0))),a===void 0?i:a},pD}var gD,hY;function Ele(){if(hY)return gD;hY=1;var t=K9e();return gD=function(e,n){return new(t(e))(n===0?0:n)},gD}var pY;function G9e(){if(pY)return rY;pY=1;var t=ty(),e=wle(),n=V5(),r=hw(),o=gw(),i=Ele();return t({target:"Array",proto:!0},{flatMap:function(a){var l=r(this),c=o(l),u;return n(a),u=i(l,0),u.length=e(u,l,l,c,0,1,a,arguments.length>1?arguments[1]:void 0),u}}),rY}var gY={},mY;function X9e(){if(mY)return gY;mY=1;var t=J5();return t("flatMap"),gY}var mD,vY;function Y9e(){if(vY)return mD;vY=1,G9e(),X9e();var t=mw();return mD=t("Array","flatMap"),mD}var vD,yY;function Q9e(){if(yY)return vD;yY=1;var t=Y9e();return vD=t,vD}Q9e();var bY={},SY;function Z9e(){if(SY)return bY;SY=1;var t=ty(),e=wle(),n=hw(),r=gw(),o=yg(),i=Ele();return t({target:"Array",proto:!0},{flat:function(){var a=arguments.length?arguments[0]:void 0,l=n(this),c=r(l),u=i(l,0);return u.length=e(u,l,l,c,0,a===void 0?1:o(a)),u}}),bY}var xY={},wY;function J9e(){if(wY)return xY;wY=1;var t=J5();return t("flat"),xY}var yD,CY;function e7e(){if(CY)return yD;CY=1,Z9e(),J9e();var t=mw();return yD=t("Array","flat"),yD}var bD,EY;function t7e(){if(EY)return bD;EY=1;var t=e7e();return bD=t,bD}t7e();var PY={},SD,_Y;function vw(){if(_Y)return SD;_Y=1;var t=Cle(),e=String;return SD=function(n){if(t(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(n)},SD}var IY;function n7e(){if(IY)return PY;IY=1;var t=ty(),e=_i(),n=ey(),r=yg(),o=vw(),i=Ys(),s=e("".charAt),a=i(function(){return"".at(-2)!=="\uD842"});return t({target:"String",proto:!0,forced:a},{at:function(c){var u=o(n(this)),d=u.length,f=r(c),h=f>=0?f:d+f;return h<0||h>=d?void 0:s(u,h)}}),PY}var xD,TY;function r7e(){if(TY)return xD;TY=1,n7e();var t=mw();return xD=t("String","at"),xD}var wD,MY;function o7e(){if(MY)return wD;MY=1;var t=r7e();return wD=t,wD}o7e();var OY={},CD,RY;function Ple(){if(RY)return CD;RY=1;var t=vg();return CD=function(){var e=t(this),n="";return e.hasIndices&&(n+="d"),e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.unicodeSets&&(n+="v"),e.sticky&&(n+="y"),n},CD}var ED,kY;function i7e(){if(kY)return ED;kY=1;var t=Ys(),e=Xs(),n=e.RegExp,r=t(function(){var s=n("a","y");return s.lastIndex=2,s.exec("abcd")!==null}),o=r||t(function(){return!n("a","y").sticky}),i=r||t(function(){var s=n("^r","gy");return s.lastIndex=2,s.exec("str")!==null});return ED={BROKEN_CARET:i,MISSED_STICKY:o,UNSUPPORTED_Y:r},ED}var PD,AY;function s7e(){if(AY)return PD;AY=1;var t=Ys(),e=Xs(),n=e.RegExp;return PD=t(function(){var r=n(".","s");return!(r.dotAll&&r.test(`
`)&&r.flags==="s")}),PD}var _D,$Y;function a7e(){if($Y)return _D;$Y=1;var t=Ys(),e=Xs(),n=e.RegExp;return _D=t(function(){var r=n("(?<a>b)","g");return r.exec("b").groups.a!=="b"||"b".replace(r,"$<a>c")!=="bc"}),_D}var ID,DY;function eB(){if(DY)return ID;DY=1;var t=Ld(),e=_i(),n=vw(),r=Ple(),o=i7e(),i=X5(),s=Sle(),a=mle().get,l=s7e(),c=a7e(),u=i("native-string-replace",String.prototype.replace),d=RegExp.prototype.exec,f=d,h=e("".charAt),g=e("".indexOf),y=e("".replace),m=e("".slice),S=function(){var P=/a/,I=/b*/g;return t(d,P,"a"),t(d,I,"a"),P.lastIndex!==0||I.lastIndex!==0}(),x=o.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,E=S||C||x||l||c;return E&&(f=function(I){var T=this,M=a(T),R=n(I),A=M.raw,j,N,k,D,F,H,U;if(A)return A.lastIndex=T.lastIndex,j=t(f,A,R),T.lastIndex=A.lastIndex,j;var B=M.groups,W=x&&T.sticky,K=t(r,T),q=T.source,X=0,Z=R;if(W&&(K=y(K,"y",""),g(K,"g")===-1&&(K+="g"),Z=m(R,T.lastIndex),T.lastIndex>0&&(!T.multiline||T.multiline&&h(R,T.lastIndex-1)!==`
`)&&(q="(?: "+q+")",Z=" "+Z,X++),N=new RegExp("^(?:"+q+")",K)),C&&(N=new RegExp("^"+q+"$(?!\\s)",K)),S&&(k=T.lastIndex),D=t(d,W?N:T,Z),W?D?(D.input=m(D.input,X),D[0]=m(D[0],X),D.index=T.lastIndex,T.lastIndex+=D[0].length):T.lastIndex=0:S&&D&&(T.lastIndex=T.global?D.index+D[0].length:k),C&&D&&D.length>1&&t(u,D[0],N,function(){for(F=1;F<arguments.length-2;F++)arguments[F]===void 0&&(D[F]=void 0)}),D&&B)for(D.groups=H=s(null),F=0;F<B.length;F++)U=B[F],H[U[0]]=D[U[1]];return D}),ID=f,ID}var jY;function _le(){if(jY)return OY;jY=1;var t=ty(),e=eB();return t({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e}),OY}var LY={},TD,NY;function l7e(){if(NY)return TD;NY=1;var t=kM(),e=Function.prototype,n=e.apply,r=e.call;return TD=typeof Reflect=="object"&&Reflect.apply||(t?r.bind(n):function(){return r.apply(n,arguments)}),TD}var MD,FY;function c7e(){if(FY)return MD;FY=1,_le();var t=Ld(),e=vle(),n=eB(),r=Ys(),o=Fd(),i=Y5(),s=o("species"),a=RegExp.prototype;return MD=function(l,c,u,d){var f=o(l),h=!r(function(){var S={};return S[f]=function(){return 7},""[l](S)!==7}),g=h&&!r(function(){var S=!1,x=/a/;return l==="split"&&(x={},x.constructor={},x.constructor[s]=function(){return x},x.flags="",x[f]=/./[f]),x.exec=function(){return S=!0,null},x[f](""),!S});if(!h||!g||u){var y=/./[f],m=c(f,""[l],function(S,x,C,E,P){var I=x.exec;return I===n||I===a.exec?h&&!P?{done:!0,value:t(y,x,C,E)}:{done:!0,value:t(S,C,x,E)}:{done:!1}});e(String.prototype,l,m[0]),e(a,f,m[1])}d&&i(a[f],"sham",!0)},MD}var OD,zY;function u7e(){if(zY)return OD;zY=1;var t=_i(),e=yg(),n=vw(),r=ey(),o=t("".charAt),i=t("".charCodeAt),s=t("".slice),a=function(l){return function(c,u){var d=n(r(c)),f=e(u),h=d.length,g,y;return f<0||f>=h?l?"":void 0:(g=i(d,f),g<55296||g>56319||f+1===h||(y=i(d,f+1))<56320||y>57343?l?o(d,f):g:l?s(d,f,f+2):(g-55296<<10)+(y-56320)+65536)}};return OD={codeAt:a(!1),charAt:a(!0)},OD}var RD,BY;function d7e(){if(BY)return RD;BY=1;var t=u7e().charAt;return RD=function(e,n,r){return n+(r?t(e,n).length:1)},RD}var kD,HY;function Ile(){if(HY)return kD;HY=1;var t=_i(),e=hw(),n=Math.floor,r=t("".charAt),o=t("".replace),i=t("".slice),s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;return kD=function(l,c,u,d,f,h){var g=u+l.length,y=d.length,m=a;return f!==void 0&&(f=e(f),m=s),o(h,m,function(S,x){var C;switch(r(x,0)){case"$":return"$";case"&":return l;case"`":return i(c,0,u);case"'":return i(c,g);case"<":C=f[i(x,1,-1)];break;default:var E=+x;if(E===0)return S;if(E>y){var P=n(E/10);return P===0?S:P<=y?d[P-1]===void 0?r(x,1):d[P-1]+r(x,1):S}C=d[E-1]}return C===void 0?"":C})},kD}var AD,UY;function f7e(){if(UY)return AD;UY=1;var t=Ld(),e=vg(),n=Qs(),r=Jv(),o=eB(),i=TypeError;return AD=function(s,a){var l=s.exec;if(n(l)){var c=t(l,s,a);return c!==null&&e(c),c}if(r(s)==="RegExp")return t(o,s,a);throw new i("RegExp#exec called on incompatible receiver")},AD}var WY;function h7e(){if(WY)return LY;WY=1;var t=l7e(),e=Ld(),n=_i(),r=c7e(),o=Ys(),i=vg(),s=Qs(),a=Nd(),l=yg(),c=yle(),u=vw(),d=ey(),f=d7e(),h=q5(),g=Ile(),y=f7e(),m=Fd(),S=m("replace"),x=Math.max,C=Math.min,E=n([].concat),P=n([].push),I=n("".indexOf),T=n("".slice),M=function(N){return N===void 0?N:String(N)},R=function(){return"a".replace(/./,"$0")==="$0"}(),A=function(){return/./[S]?/./[S]("a","$0")==="":!1}(),j=!o(function(){var N=/./;return N.exec=function(){var k=[];return k.groups={a:"7"},k},"".replace(N,"$<a>")!=="7"});return r("replace",function(N,k,D){var F=A?"$":"$0";return[function(U,B){var W=d(this),K=a(U)?h(U,S):void 0;return K?e(K,U,W,B):e(k,u(W),U,B)},function(H,U){var B=i(this),W=u(H);if(typeof U=="string"&&I(U,F)===-1&&I(U,"$<")===-1){var K=D(k,B,W,U);if(K.done)return K.value}var q=s(U);q||(U=u(U));var X=B.global,Z;X&&(Z=B.unicode,B.lastIndex=0);for(var Y=[],G;G=y(B,W),!(G===null||(P(Y,G),!X));){var J=u(G[0]);J===""&&(B.lastIndex=f(W,c(B.lastIndex),Z))}for(var ne="",ee=0,re=0;re<Y.length;re++){G=Y[re];for(var le=u(G[0]),ae=x(C(l(G.index),W.length),0),ie=[],ge,ve=1;ve<G.length;ve++)P(ie,M(G[ve]));var fe=G.groups;if(q){var ue=E([le],ie,ae,W);fe!==void 0&&P(ue,fe),ge=u(t(U,void 0,ue))}else ge=g(le,W,ae,ie,fe,U);ae>=ee&&(ne+=T(W,ee,ae)+ge,ee=ae+le.length)}return ne+T(W,ee)}]},!j||!R||A),LY}var VY={},$D,qY;function p7e(){if(qY)return $D;qY=1;var t=Nd(),e=Jv(),n=Fd(),r=n("match");return $D=function(o){var i;return t(o)&&((i=o[r])!==void 0?!!i:e(o)==="RegExp")},$D}var DD,KY;function g7e(){if(KY)return DD;KY=1;var t=Ld(),e=gh(),n=rle(),r=Ple(),o=RegExp.prototype;return DD=function(i){var s=i.flags;return s===void 0&&!("flags"in o)&&!e(i,"flags")&&n(o,i)?t(r,i):s},DD}var GY;function m7e(){if(GY)return VY;GY=1;var t=ty(),e=Ld(),n=_i(),r=ey(),o=Qs(),i=Nd(),s=p7e(),a=vw(),l=q5(),c=g7e(),u=Ile(),d=Fd(),f=ale(),h=d("replace"),g=TypeError,y=n("".indexOf),m=n("".replace),S=n("".slice),x=Math.max;return t({target:"String",proto:!0},{replaceAll:function(E,P){var I=r(this),T,M,R,A,j,N,k,D,F,H,U=0,B="";if(i(E)){if(T=s(E),T&&(M=a(r(c(E))),!~y(M,"g")))throw new g("`.replaceAll` does not allow non-global regexes");if(R=l(E,h),R)return e(R,E,I,P);if(f&&T)return m(a(I),E,P)}for(A=a(I),j=a(E),N=o(P),N||(P=a(P)),k=j.length,D=x(1,k),F=y(A,j);F!==-1;)H=N?a(P(j,F,A)):u(j,A,F,[],void 0,P),B+=S(A,U,F)+H,U=F+k,F=F+D>A.length?-1:y(A,j,F+D);return U<A.length&&(B+=S(A,U)),B}}),VY}var jD,XY;function v7e(){if(XY)return jD;XY=1,_le(),h7e(),m7e();var t=mw();return jD=t("String","replaceAll"),jD}var LD,YY;function y7e(){if(YY)return LD;YY=1;var t=v7e();return LD=t,LD}y7e();function Tle(t){return t&&typeof t=="object"&&"parents"in t}function Mle(t){for(let e=0,n=t.parents.length;e<n;e++)if(t.parents[e].__unsafe__getWithoutCapture(!0),t.parents[e].lastChangedEpoch!==t.parentEpochs[e])return!0;return!1}function tI(t,e){if(t.children.remove(e)&&t.children.isEmpty&&Tle(t))for(let n=0,r=t.parents.length;n<r;n++)tI(t.parents[n],t)}function tB(t,e){if(t.children.add(e)&&Tle(t))for(let n=0,r=t.parents.length;n<r;n++)tB(t.parents[n],t)}function Ole(t,e){return t===e||Object.is(t,e)||!!(t&&e&&typeof t.equals=="function"&&t.equals(e))}function mh(t,e){const n=Symbol.for(`com.tldraw.state/${t}`),r=globalThis;return r[n]??(r[n]=e()),r[n]}const ps=mh("empty_array",()=>Object.freeze([])),QY=8;class nI{constructor(){V(this,"arraySize",0);V(this,"array",Array(QY));V(this,"set",null)}get isEmpty(){if(this.array)return this.arraySize===0;if(this.set)return this.set.size===0;throw new Error("no set or array")}add(e){if(this.array)return this.array.indexOf(e)!==-1?!1:this.arraySize<QY?(this.array[this.arraySize]=e,this.arraySize++,!0):(this.set=new Set(this.array),this.array=null,this.set.add(e),!0);if(this.set)return this.set.has(e)?!1:(this.set.add(e),!0);throw new Error("no set or array")}remove(e){if(this.array){const n=this.array.indexOf(e);return n===-1?!1:(this.array[n]=void 0,this.arraySize--,n!==this.arraySize&&(this.array[n]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return this.set.has(e)?(this.set.delete(e),!0):!1;throw new Error("no set or array")}visit(e){if(this.array){for(let n=0;n<this.arraySize;n++){const r=this.array[n];typeof r<"u"&&e(r)}return}if(this.set){this.set.forEach(e);return}throw new Error("no set or array")}*[Symbol.iterator](){if(this.array)for(let e=0;e<this.arraySize;e++){const n=this.array[e];typeof n<"u"&&(yield n)}else if(this.set)yield*this.set;else throw new Error("no set or array")}has(e){return this.array?this.array.indexOf(e)!==-1:this.set.has(e)}clear(){this.set?this.set.clear():(this.arraySize=0,this.array=[])}size(){return this.set?this.set.size:this.arraySize}}const Ua=Symbol.for("com.tldraw.state/RESET_VALUE");class Rle{constructor(e){V(this,"index",0);V(this,"buffer");this.capacity=e,this.buffer=new Array(e)}pushEntry(e,n,r){if(r!==void 0){if(r===Ua){this.clear();return}this.buffer[this.index]=[e,n,r],this.index=(this.index+1)%this.capacity}}clear(){this.index=0,this.buffer.fill(void 0)}getChangesSince(e){const{index:n,capacity:r,buffer:o}=this;for(let i=0;i<r;i++){const s=(n-1+r-i)%r,a=o[s];if(!a)return Ua;const[l,c]=a;if(i===0&&e>=c)return[];if(l<=e&&e<c){const u=i+1,d=new Array(u);for(let f=0;f<u;f++)d[f]=o[(s+f)%r][2];return d}}return Ua}}const $f=-1;class b7e{constructor(e,n,r){V(this,"_isActivelyListening",!1);V(this,"lastTraversedEpoch",$f);V(this,"lastReactedEpoch",$f);V(this,"_scheduleCount",0);V(this,"__debug_ancestor_epochs__",null);V(this,"parentSet",new nI);V(this,"parentEpochs",[]);V(this,"parents",[]);V(this,"_scheduleEffect");V(this,"maybeExecute",()=>{this._isActivelyListening&&this.execute()});this.name=e,this.runEffect=n,this._scheduleEffect=r==null?void 0:r.scheduleEffect}get isActivelyListening(){return this._isActivelyListening}get scheduleCount(){return this._scheduleCount}maybeScheduleEffect(){if(this._isActivelyListening&&this.lastReactedEpoch!==da()){if(this.parents.length&&!Mle(this)){this.lastReactedEpoch=da();return}this.scheduleEffect()}}scheduleEffect(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}attach(){this._isActivelyListening=!0;for(let e=0,n=this.parents.length;e<n;e++)tB(this.parents[e],this)}detach(){this._isActivelyListening=!1;for(let e=0,n=this.parents.length;e<n;e++)tI(this.parents[e],this)}execute(){try{Dle(this);const e=da(),n=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=e,n}finally{jle()}}}const bg=mh("EffectScheduler",()=>b7e);function Al(t,e,n){const r=new bg(t,e,n);return r.attach(),r.scheduleEffect(),()=>{r.detach()}}function S7e(t,e,n){const r=new bg(t,e,n);return{scheduler:r,start:o=>{const i=(o==null?void 0:o.force)??!1;r.attach(),i?r.scheduleEffect():r.maybeScheduleEffect()},stop:()=>{r.detach()}}}let x7e=class{constructor(e){V(this,"initialAtomValues",new Map);this.parent=e}get isRoot(){return this.parent===null}commit(){if(mr.globalIsReacting)for(const e of this.initialAtomValues.keys())Ale(e);else this.isRoot?kle(this.initialAtomValues.keys()):this.initialAtomValues.forEach((e,n)=>{this.parent.initialAtomValues.has(n)||this.parent.initialAtomValues.set(n,e)})}abort(){mr.globalEpoch++,this.initialAtomValues.forEach((e,n)=>{var r;n.set(e),(r=n.historyBuffer)==null||r.clear()}),this.commit()}};const mr=mh("transactions",()=>({globalEpoch:$f+1,globalIsReacting:!1,currentTransaction:null,cleanupReactors:null,reactionEpoch:$f+1}));function w7e(){return mr.reactionEpoch}function da(){return mr.globalEpoch}function C7e(){return mr.globalIsReacting}function nB(t,e){e.lastTraversedEpoch!==mr.globalEpoch&&(e.lastTraversedEpoch=mr.globalEpoch,e instanceof bg?t.add(e):e.children.visit(n=>nB(t,n)))}function kle(t){var n;if(mr.globalIsReacting)throw new Error("flushChanges cannot be called during a reaction");const e=mr.currentTransaction;try{mr.currentTransaction=null,mr.globalIsReacting=!0,mr.reactionEpoch=mr.globalEpoch;const r=new Set;for(const i of t)i.children.visit(s=>nB(r,s));for(const i of r)i.maybeScheduleEffect();let o=0;for(;(n=mr.cleanupReactors)!=null&&n.size;){if(o++>1e3)throw new Error("Reaction update depth limit exceeded");const i=mr.cleanupReactors;mr.cleanupReactors=null;for(const s of i)s.maybeScheduleEffect()}}finally{mr.cleanupReactors=null,mr.globalIsReacting=!1,mr.currentTransaction=e}}function E7e(t,e){mr.currentTransaction?mr.currentTransaction.initialAtomValues.has(t)||mr.currentTransaction.initialAtomValues.set(t,e):mr.globalIsReacting?Ale(t):kle([t])}function Ale(t){const e=mr.cleanupReactors??(mr.cleanupReactors=new Set);t.children.visit(n=>nB(e,n))}function P7e(){mr.globalEpoch++}function _7e(t){const e=new x7e(mr.currentTransaction);mr.currentTransaction=e;try{let n,r=!1;try{n=t(()=>r=!0)}catch(o){throw e.abort(),o}return r?e.abort():e.commit(),n}finally{mr.currentTransaction=mr.currentTransaction.parent}}function Wa(t){return mr.currentTransaction?t():_7e(t)}let ZY=!1;function I7e(){ZY||(ZY=!0,console.warn(`Using \`@computed\` as a decorator for getters is deprecated and will be removed in the near future. Please refactor to use \`@computed\` as a decorator for methods.

// Before
@computed
get foo() {
	return 'foo'
}

// After
@computed
getFoo() {
	return 'foo'
}
`))}const as=Symbol.for("com.tldraw.state/UNINITIALIZED");function _p(t){return t===as}const oF=mh("WithDiff",()=>class{constructor(e,n){this.value=e,this.diff=n}});function Db(t,e){return new oF(t,e)}class T7e{constructor(e,n,r){V(this,"lastChangedEpoch",$f);V(this,"lastTraversedEpoch",$f);V(this,"__debug_ancestor_epochs__",null);V(this,"lastCheckedEpoch",$f);V(this,"parentSet",new nI);V(this,"parents",[]);V(this,"parentEpochs",[]);V(this,"children",new nI);V(this,"historyBuffer");V(this,"state",as);V(this,"error",null);V(this,"computeDiff");V(this,"isEqual");this.name=e,this.derive=n,r!=null&&r.historyLength&&(this.historyBuffer=new Rle(r.historyLength)),this.computeDiff=r==null?void 0:r.computeDiff,this.isEqual=(r==null?void 0:r.isEqual)??Ole}get isActivelyListening(){return!this.children.isEmpty}__unsafe__getWithoutCapture(e){var o;const n=this.lastChangedEpoch===$f,r=da();if(!n&&(this.lastCheckedEpoch===r||this.isActivelyListening&&C7e()&&this.lastTraversedEpoch<w7e()||!Mle(this)))if(this.lastCheckedEpoch=r,this.error){if(e)return this.state;throw this.error.thrownValue}else return this.state;try{Dle(this);const i=this.derive(this.state,this.lastCheckedEpoch),s=i instanceof oF?i.value:i,a=this.state===as;if(a||!this.isEqual(s,this.state)){if(this.historyBuffer&&!a){const l=i instanceof oF?i.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,da(),l??((o=this.computeDiff)==null?void 0:o.call(this,this.state,s,this.lastCheckedEpoch,da()))??Ua)}this.lastChangedEpoch=da(),this.state=s}return this.error=null,this.lastCheckedEpoch=da(),this.state}catch(i){if(this.state!==as&&(this.state=as,this.lastChangedEpoch=da()),this.lastCheckedEpoch=da(),this.historyBuffer&&this.historyBuffer.clear(),this.error={thrownValue:i},!e)throw i;return this.state}finally{jle()}}get(){try{return this.__unsafe__getWithoutCapture()}finally{rI(this)}}getDiffSince(e){var n;return this.__unsafe__getWithoutCapture(!0),rI(this),e>=this.lastChangedEpoch?ps:((n=this.historyBuffer)==null?void 0:n.getChangesSince(e))??Ua}}const yw=mh("Computed",()=>T7e);function M7e(t={},e,n,r){const o=r.value,i=Symbol.for("__@tldraw/state__computed__"+n);return r.value=function(){let s=this[i];return s||(s=new yw(n,o.bind(this),t),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:s})),s.get()},r.value[$le]=!0,r}function O7e(t={},e,n,r){const o=r.get,i=Symbol.for("__@tldraw/state__computed__"+n);return r.get=function(){let s=this[i];return s||(s=new yw(n,o.bind(this),t),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:s})),s.get()},r}function R7e(t,e,n){nn(n.kind==="method","@computed can only be used on methods");const r=Symbol.for("__@tldraw/state__computed__"+String(n.name)),o=function(){let i=this[r];return i||(i=new yw(String(n.name),e.bind(this),t),Object.defineProperty(this,r,{enumerable:!1,configurable:!1,writable:!1,value:i})),i.get()};return o[$le]=!0,o}function JY(t={},e){if(e.length===2){const[n,r]=e;return R7e(t,n,r)}else{const[n,r,o]=e;return o.get?(I7e(),O7e(t,n,r,o)):M7e(t,n,r,o)}}const $le="@@__isComputedMethod__@@";function He(){if(arguments.length===1){const t=arguments[0];return(...e)=>JY(t,e)}else return typeof arguments[0]=="string"?new yw(arguments[0],arguments[1],arguments[2]):JY(void 0,arguments)}function rB(t){return t&&t instanceof yw}class k7e{constructor(e,n){V(this,"offset",0);V(this,"maybeRemoved");this.below=e,this.child=n}}const oo=mh("capture",()=>({stack:null}));function jb(t){const e=oo.stack;oo.stack=null;try{return t()}finally{oo.stack=e}}function Dle(t){if(oo.stack=new k7e(oo.stack,t),t.__debug_ancestor_epochs__){const e=t.__debug_ancestor_epochs__;t.__debug_ancestor_epochs__=null;for(const n of t.parents)n.__unsafe__getWithoutCapture(!0);A7e(t,e)}t.parentSet.clear()}function jle(){const t=oo.stack;if(oo.stack=t.below,t.offset<t.child.parents.length){for(let e=t.offset;e<t.child.parents.length;e++){const n=t.child.parents[e];t.child.parentSet.has(n)||tI(n,t.child)}t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset}if(t.maybeRemoved)for(let e=0;e<t.maybeRemoved.length;e++){const n=t.maybeRemoved[e];t.child.parentSet.has(n)||tI(n,t.child)}t.child.__debug_ancestor_epochs__&&Lle(t.child,t.child.__debug_ancestor_epochs__)}function rI(t){if(oo.stack){if(oo.stack.child.parentSet.has(t))return;if(oo.stack.child.parentSet.add(t),oo.stack.child.isActivelyListening&&tB(t,oo.stack.child),oo.stack.offset<oo.stack.child.parents.length){const n=oo.stack.child.parents[oo.stack.offset];n!==t&&(oo.stack.maybeRemoved?oo.stack.maybeRemoved.push(n):oo.stack.maybeRemoved=[n])}oo.stack.child.parents[oo.stack.offset]=t,oo.stack.child.parentEpochs[oo.stack.offset]=t.lastChangedEpoch,oo.stack.offset++}}function Lle(t,e){for(let n=0;n<t.parents.length;n++){const r=t.parents[n],o=t.parentEpochs[n];e.set(r,o),rB(r)&&Lle(r,e)}return e}function Nle(t,e){const n={};for(let r=0;r<t.parents.length;r++){const o=t.parents[r];if(!e.has(o))continue;const i=e.get(o);o.lastChangedEpoch!==i&&(rB(o)?n[o.name]=Nle(o,e):n[o.name]=null)}return n}function A7e(t,e){const n=Nle(t,e);if(Object.keys(n).length===0){console.log(`Effect(${t.name}) was executed manually.`);return}let r=rB(t)?`Computed(${t.name}) is recomputing because:`:`Effect(${t.name}) is executing because:`;function o(i,s){const a=`
`+" ".repeat(s)+" ";for(const[l,c]of Object.entries(i))c?(r+=`${a}Computed(${l}) changed`,o(c,s+2)):r+=`${a}Atom(${l}) changed`}o(n,1),console.log(r)}class $7e{constructor(e,n,r){V(this,"isEqual");V(this,"computeDiff");V(this,"lastChangedEpoch",da());V(this,"children",new nI);V(this,"historyBuffer");this.name=e,this.current=n,this.isEqual=(r==null?void 0:r.isEqual)??null,r&&(r.historyLength&&(this.historyBuffer=new Rle(r.historyLength)),this.computeDiff=r.computeDiff)}__unsafe__getWithoutCapture(e){return this.current}get(){return rI(this),this.current}set(e,n){var o,i;if(((o=this.isEqual)==null?void 0:o.call(this,this.current,e))??Ole(this.current,e))return this.current;P7e(),this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,da(),n??((i=this.computeDiff)==null?void 0:i.call(this,this.current,e,this.lastChangedEpoch,da()))??Ua),this.lastChangedEpoch=da();const r=this.current;return this.current=e,E7e(this,r),e}update(e){return this.set(e(this.current))}getDiffSince(e){var n;return rI(this),e>=this.lastChangedEpoch?ps:((n=this.historyBuffer)==null?void 0:n.getChangesSince(e))??Ua}}const D7e=mh("Atom",()=>$7e);function bo(t,e,n){return new D7e(t,e,n)}const Fle=1,j7e=mh("apiVersion",()=>Fle);if(j7e!==Fle)throw new Error("You have multiple incompatible versions of @tldraw/state in your app. Please deduplicate the package.");fh("@tldraw/state","3.13.1","esm");function DM(t,e,n=[]){const r=ce.useRef(e);r.current=e;const[o,i,s]=ce.useMemo(()=>{let a=null;const l=d=>(a=d,()=>{a=null}),c=new bg(`useStateTracking(${t})`,()=>{var d;return(d=r.current)==null?void 0:d.call(r)},{scheduleEffect(){a==null||a()}});return[c,l,()=>c.scheduleCount]},[t,...n]);return ce.useSyncExternalStore(i,s,s),ce.useEffect(()=>(o.attach(),o.maybeScheduleEffect(),()=>{o.detach()}),[o]),o.execute()}const eQ={apply(t,e,n){return DM(t.displayName??t.name??"tracked(???)",()=>t.apply(e,n))}},L7e=Symbol.for("react.memo"),N7e=Symbol.for("react.forward_ref");function Ii(t){let e=null;const n=t.$$typeof;return n===L7e&&(t=t.type,e=t.compare),n===N7e?v.memo(v.forwardRef(new Proxy(t.render,eQ))):v.memo(new Proxy(t,eQ),e)}function bw(t,e,n){return v.useState(()=>{const r=typeof e=="function"?e():e;return bo(`useAtom(${t})`,r,n)})[0]}function F7e(){const t=arguments[0],e=arguments[1],n=arguments.length===3?void 0:arguments[2],r=arguments.length===3?arguments[2]:arguments[3];return v.useMemo(()=>He(`useComputed(${t})`,e,n),r)}function eh(t,e,n=ps){v.useEffect(()=>{const r=new bg(t,e);return r.attach(),r.execute(),()=>{r.detach()}},n)}function jM(t,e,n=[]){const r=v.useRef(-1),o=v.useMemo(()=>new bg(t,e,{scheduleEffect:i=>{const s=requestAnimationFrame(i);return r.current=s,s}}),n);v.useEffect(()=>(o.attach(),o.execute(),()=>{o.detach(),cancelAnimationFrame(r.current)}),[o])}function Ie(){const t=arguments,e=t.length===3?t[2]:[t[0]],n=t.length===3?t[0]:`useValue(${t[0].name})`,r=v.useRef(!0);r.current=!0;const o=v.useMemo(()=>t.length===1?t[0]:He(n,()=>{if(r.current)return t[1]();try{return t[1]()}catch{return{}}}),e);try{const{subscribe:i,getSnapshot:s}=v.useMemo(()=>({subscribe:a=>Al(`useValue(${n})`,()=>{o.get(),a()}),getSnapshot:()=>o.get()}),[o]);return v.useSyncExternalStore(i,s,s)}finally{r.current=!1}}fh("@tldraw/state-react","3.13.1","esm");/*!
 * This file was lovingly and delicately extracted from Immutable.js
 * MIT License: https://github.com/immutable-js/immutable-js/blob/main/LICENSE
 * Copyright (c) 2014-present, Lee Byron and other contributors.
 */function oB(t){return t>>>1&1073741824|t&3221225471}const z7e=Object.prototype.valueOf;function Gp(t){if(t==null)return tQ(t);if(typeof t.hashCode=="function")return oB(t.hashCode(t));const e=V7e(t);if(e==null)return tQ(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return B7e(e);case"string":return e.length>q7e?H7e(e):iF(e);case"object":case"function":return W7e(e);case"symbol":return U7e(e);default:if(typeof e.toString=="function")return iF(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function tQ(t){return t===null?1108378658:1108378659}function B7e(t){if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)t/=4294967295,e^=t;return oB(e)}function H7e(t){let e=zD[t];return e===void 0&&(e=iF(t),FD===K7e&&(FD=0,zD={}),FD++,zD[t]=e),e}function iF(t){let e=0;for(let n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return oB(e)}function U7e(t){let e=rQ[t];return e!==void 0||(e=zle(),rQ[t]=e),e}function W7e(t){let e=nQ.get(t);return e!==void 0||(e=zle(),nQ.set(t,e)),e}function V7e(t){return t.valueOf!==z7e&&typeof t.valueOf=="function"?t.valueOf(t):t}function zle(){const t=++ND;return ND&1073741824&&(ND=0),t}const nQ=new WeakMap,rQ=Object.create(null);let ND=0;const q7e=16,K7e=255;let FD=0,zD={};const bv=5,Sw=1<<bv,Sv=Sw-1,Od={};function oQ(){return{value:!1}}function gc(t){t&&(t.value=!0)}function iB(t,e){e=e||0;const n=Math.max(0,t.length-e),r=new Array(n);for(let o=0;o<n;o++)r[o]=t[o+e];return r}const xv=Object.is;class Ble{}class sB{constructor(e){V(this,"_root");V(this,"size");V(this,"__ownerID");V(this,"__hash");V(this,"__altered");return e==null?Km():e instanceof sB?e:Km().withMutations(n=>{for(const[r,o]of e)n.set(r,o)})}get(e,n){return this._root?this._root.get(0,void 0,e,n):n}set(e,n){return aQ(this,e,n)}delete(e){return aQ(this,e,Od)}deleteAll(e){return this.withMutations(n=>{for(const r of e)n.delete(r)})}__ensureOwner(e){return e===this.__ownerID?this:e?cB(this.size,this._root,e,this.__hash):this.size===0?Km():(this.__ownerID=e,this.__altered=!1,this)}withMutations(e){const n=this.asMutable();return e(n),n.wasAltered()?n.__ensureOwner(this.__ownerID):this}wasAltered(){return this.__altered}asMutable(){return this.__ownerID?this:this.__ensureOwner(new Ble)}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}entries(){return new BD(this,G7e,!1)}keys(){return new BD(this,Hle,!1)}values(){return new BD(this,Ule,!1)}}class aB{constructor(e,n){this.ownerID=e,this.entries=n}get(e,n,r,o){const i=this.entries;for(let s=0,a=i.length;s<a;s++)if(xv(r,i[s][0]))return i[s][1];return o}update(e,n,r,o,i,s,a){const l=i===Od,c=this.entries;let u=0;const d=c.length;for(;u<d&&!xv(o,c[u][0]);u++);const f=u<d;if(f?c[u][1]===i:l)return this;if(gc(a),(l||!f)&&gc(s),l&&c.length===1)return;if(!f&&!l&&c.length>=nUe)return Q7e(e,c,o,i);const h=e&&e===this.ownerID,g=h?c:iB(c);return f?l?u===d-1?g.pop():g[u]=g.pop():g[u]=[o,i]:g.push([o,i]),h?(this.entries=g,this):new aB(e,g)}}class LM{constructor(e,n,r){this.ownerID=e,this.bitmap=n,this.nodes=r}get(e,n,r,o){n===void 0&&(n=Gp(r));const i=1<<((e===0?n:n>>>e)&Sv),s=this.bitmap;return(s&i)===0?o:this.nodes[cQ(s&i-1)].get(e+bv,n,r,o)}update(e,n,r,o,i,s,a){r===void 0&&(r=Gp(o));const l=(n===0?r:r>>>n)&Sv,c=1<<l,u=this.bitmap,d=(u&c)!==0;if(!d&&i===Od)return this;const f=cQ(u&c-1),h=this.nodes,g=d?h[f]:void 0,y=uB(g,e,n+bv,r,o,i,s,a);if(y===g)return this;if(!d&&y&&h.length>=rUe)return J7e(e,h,u,l,y);if(d&&!y&&h.length===2&&lQ(h[f^1]))return h[f^1];if(d&&y&&h.length===1&&lQ(y))return y;const m=e&&e===this.ownerID,S=d?y?u:u^c:u|c,x=d?y?Wle(h,f,y,m):tUe(h,f,m):eUe(h,f,y,m);return m?(this.bitmap=S,this.nodes=x,this):new LM(e,S,x)}}class lB{constructor(e,n,r){this.ownerID=e,this.count=n,this.nodes=r}get(e,n,r,o){n===void 0&&(n=Gp(r));const i=(e===0?n:n>>>e)&Sv,s=this.nodes[i];return s?s.get(e+bv,n,r,o):o}update(e,n,r,o,i,s,a){r===void 0&&(r=Gp(o));const l=(n===0?r:r>>>n)&Sv,c=i===Od,u=this.nodes,d=u[l];if(c&&!d)return this;const f=uB(d,e,n+bv,r,o,i,s,a);if(f===d)return this;let h=this.count;if(!d)h++;else if(!f&&(h--,h<oUe))return Z7e(e,u,h,l);const g=e&&e===this.ownerID,y=Wle(u,l,f,g);return g?(this.count=h,this.nodes=y,this):new lB(e,h,y)}}class NM{constructor(e,n,r){this.ownerID=e,this.keyHash=n,this.entries=r}get(e,n,r,o){const i=this.entries;for(let s=0,a=i.length;s<a;s++)if(xv(r,i[s][0]))return i[s][1];return o}update(e,n,r,o,i,s,a){r===void 0&&(r=Gp(o));const l=i===Od;if(r!==this.keyHash)return l?this:(gc(a),gc(s),dB(this,e,n,r,[o,i]));const c=this.entries;let u=0;const d=c.length;for(;u<d&&!xv(o,c[u][0]);u++);const f=u<d;if(f?c[u][1]===i:l)return this;if(gc(a),(l||!f)&&gc(s),l&&d===2)return new Sg(e,this.keyHash,c[u^1]);const h=e&&e===this.ownerID,g=h?c:iB(c);return f?l?u===d-1?g.pop():g[u]=g.pop():g[u]=[o,i]:g.push([o,i]),h?(this.entries=g,this):new NM(e,this.keyHash,g)}}class Sg{constructor(e,n,r){this.ownerID=e,this.keyHash=n,this.entry=r}get(e,n,r,o){return xv(r,this.entry[0])?this.entry[1]:o}update(e,n,r,o,i,s,a){const l=i===Od,c=xv(o,this.entry[0]);if(c?i===this.entry[1]:l)return this;if(gc(a),l){gc(s);return}return c?e&&e===this.ownerID?(this.entry[1]=i,this):new Sg(e,this.keyHash,[o,i]):(gc(s),dB(this,e,n,Gp(o),[o,i]))}}class BD{constructor(e,n,r){V(this,"_stack");this._type=n,this._reverse=r,this._stack=e._root&&iQ(e._root)}[Symbol.iterator](){return this}next(){const e=this._type;let n=this._stack;for(;n;){const r=n.node,o=n.index++;let i;if(r.entry){if(o===0)return HD(e,r.entry)}else if("entries"in r&&r.entries){if(i=r.entries.length-1,o<=i)return HD(e,r.entries[this._reverse?i-o:o])}else if(i=r.nodes.length-1,o<=i){const s=r.nodes[this._reverse?i-o:o];if(s){if(s.entry)return HD(e,s.entry);n=this._stack=iQ(s,n)}continue}n=this._stack=this._stack.__prev}return Y7e()}}function HD(t,e){return X7e(t,e[0],e[1])}function iQ(t,e){return{node:t,index:0,__prev:e}}const Hle=0,Ule=1,G7e=2;function X7e(t,e,n,r){const o=t===Hle?e:t===Ule?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function Y7e(){return{value:void 0,done:!0}}function cB(t,e,n,r){const o=Object.create(sB.prototype);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}let sQ;function Km(){return sQ||(sQ=cB(0))}function aQ(t,e,n){let r,o;if(t._root){const i=oQ(),s=oQ();if(r=uB(t._root,t.__ownerID,0,void 0,e,n,i,s),!s.value)return t;o=t.size+(i.value?n===Od?-1:1:0)}else{if(n===Od)return t;o=1,r=new aB(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?cB(o,r):Km()}function uB(t,e,n,r,o,i,s,a){return t?t.update(e,n,r,o,i,s,a):i===Od?t:(gc(a),gc(s),new Sg(e,r,[o,i]))}function lQ(t){return t.constructor===Sg||t.constructor===NM}function dB(t,e,n,r,o){if(t.keyHash===r)return new NM(e,r,[t.entry,o]);const i=(n===0?t.keyHash:t.keyHash>>>n)&Sv,s=(n===0?r:r>>>n)&Sv;let a;const l=i===s?[dB(t,e,n+bv,r,o)]:(a=new Sg(e,r,o),i<s?[t,a]:[a,t]);return new LM(e,1<<i|1<<s,l)}function Q7e(t,e,n,r){t||(t=new Ble);let o=new Sg(t,Gp(n),[n,r]);for(let i=0;i<e.length;i++){const s=e[i];o=o.update(t,0,void 0,s[0],s[1])}return o}function Z7e(t,e,n,r){let o=0,i=0;const s=new Array(n);for(let a=0,l=1,c=e.length;a<c;a++,l<<=1){const u=e[a];u!==void 0&&a!==r&&(o|=l,s[i++]=u)}return new LM(t,o,s)}function J7e(t,e,n,r,o){let i=0;const s=new Array(Sw);for(let a=0;n!==0;a++,n>>>=1)s[a]=n&1?e[i++]:void 0;return s[r]=o,new lB(t,i+1,s)}function cQ(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function Wle(t,e,n,r){const o=r?t:iB(t);return o[e]=n,o}function eUe(t,e,n,r){const o=t.length+1;if(r&&e+1===o)return t[e]=n,t;const i=new Array(o);let s=0;for(let a=0;a<o;a++)a===e?(i[a]=n,s=-1):i[a]=t[a+s];return i}function tUe(t,e,n){const r=t.length-1;if(n&&e===r)return t.pop(),t;const o=new Array(r);let i=0;for(let s=0;s<r;s++)s===e&&(i=1),o[s]=t[s+i];return o}const nUe=Sw/4,rUe=Sw/2,oUe=Sw/4;var pte,gte;class sF{constructor(e,n){V(this,"atoms");V(this,pte,"AtomMap");this.name=e;let r=Km();n&&(r=r.withMutations(o=>{for(const[i,s]of n)o.set(i,bo(`${e}:${String(i)}`,s))})),this.atoms=bo(`${e}:atoms`,r)}getAtom(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);if(!n){this.atoms.get();return}return n}get(e){var r;const n=(r=this.getAtom(e))==null?void 0:r.get();return nn(n!==as),n}__unsafe__getWithoutCapture(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);if(!n)return;const r=n.__unsafe__getWithoutCapture();return nn(r!==as),r}has(e){const n=this.getAtom(e);return n?n.get()!==as:!1}__unsafe__hasWithoutCapture(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);return n?(nn(n.__unsafe__getWithoutCapture()!==as),!0):!1}set(e,n){const r=this.atoms.__unsafe__getWithoutCapture().get(e);return r?r.set(n):this.atoms.update(o=>o.set(e,bo(`${this.name}:${String(e)}`,n))),this}update(e,n){const r=this.atoms.__unsafe__getWithoutCapture().get(e);if(!r)throw new Error(`AtomMap: key ${e} not found`);const o=r.__unsafe__getWithoutCapture();nn(o!==as),r.set(n(o))}delete(e){const n=this.atoms.__unsafe__getWithoutCapture().get(e);return n?(Wa(()=>{n.set(as),this.atoms.update(r=>r.delete(e))}),!0):!1}deleteMany(e){return Wa(()=>{const n=[],r=this.atoms.get().withMutations(o=>{for(const i of e){const s=o.get(i);if(!s)continue;const a=s.get();nn(a!==as),n.push([i,a]),o.delete(i),s.set(as)}});return n.length&&this.atoms.set(r),n})}clear(){return Wa(()=>{for(const e of this.atoms.__unsafe__getWithoutCapture().values())e.set(as);this.atoms.set(Km())})}*entries(){for(const[e,n]of this.atoms.get()){const r=n.get();nn(r!==as),yield[e,r]}}*keys(){for(const e of this.atoms.get().keys())yield e}*values(){for(const e of this.atoms.get().values()){const n=e.get();nn(n!==as),yield n}}get size(){return this.atoms.get().size}forEach(e,n){for(const[r,o]of this.entries())e.call(n,o,r,this)}[(gte=Symbol.iterator,pte=Symbol.toStringTag,gte)](){return this.entries()}}class mP{constructor(e){V(this,"nextValue");V(this,"diff");this.previousValue=e}get(){var r,o,i,s;const e=((o=(r=this.diff)==null?void 0:r.removed)==null?void 0:o.size)??0,n=((s=(i=this.diff)==null?void 0:i.added)==null?void 0:s.size)??0;if(!(e===0&&n===0))return{value:this.nextValue,diff:this.diff}}_add(e,n){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),this.diff??(this.diff={}),n?(r=this.diff.removed)==null||r.delete(e):((o=this.diff).added??(o.added=new Set),this.diff.added.add(e))}add(e){var o,i,s;const n=this.previousValue.has(e);if(n)return((i=(o=this.diff)==null?void 0:o.removed)==null?void 0:i.has(e))?this._add(e,n):void 0;(s=this.nextValue)!=null&&s.has(e)||this._add(e,n)}_remove(e,n){var r,o;this.nextValue??(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),this.diff??(this.diff={}),n?((r=this.diff).removed??(r.removed=new Set),this.diff.removed.add(e)):(o=this.diff.added)==null||o.delete(e)}remove(e){var o,i,s,a;const n=this.previousValue.has(e);if(!n)return((i=(o=this.diff)==null?void 0:o.added)==null?void 0:i.has(e))?this._remove(e,n):void 0;(a=(s=this.diff)==null?void 0:s.removed)!=null&&a.has(e)||this._remove(e,n)}}class FM{constructor(e,n){V(this,"createDefaultProperties");V(this,"validator");V(this,"ephemeralKeys");V(this,"ephemeralKeySet");V(this,"scope");this.typeName=e,this.createDefaultProperties=n.createDefaultProperties,this.validator=n.validator??{validate:o=>o},this.scope=n.scope??"document",this.ephemeralKeys=n.ephemeralKeys;const r=new Set;if(n.ephemeralKeys)for(const[o,i]of zs(n.ephemeralKeys))i&&r.add(o);this.ephemeralKeySet=r}create(e){const n={...this.createDefaultProperties(),id:"id"in e?e.id:this.createId()};for(const[r,o]of Object.entries(e))o!==void 0&&(n[r]=o);return n.typeName=this.typeName,n}clone(e){return{...to(e),id:this.createId()}}createId(e){return this.typeName+":"+(e??br())}createCustomId(e){return this.typeName+":"+e}parseId(e){if(!this.isId(e))throw new Error(`ID "${e}" is not a valid ID for type "${this.typeName}"`);return e.slice(this.typeName.length+1)}isInstance(e){return(e==null?void 0:e.typeName)===this.typeName}isId(e){if(!e)return!1;for(let n=0;n<this.typeName.length;n++)if(e[n]!==this.typeName[n])return!1;return e[this.typeName.length]===":"}withDefaultProperties(e){return new FM(this.typeName,{createDefaultProperties:e,validator:this.validator,scope:this.scope,ephemeralKeys:this.ephemeralKeys})}validate(e,n){return n&&this.validator.validateUsingKnownGoodVersion?this.validator.validateUsingKnownGoodVersion(n,e):this.validator.validate(e)}}function ju(t,e){return new FM(t,{createDefaultProperties:()=>({}),validator:e.validator,scope:e.scope,ephemeralKeys:e.ephemeralKeys})}function oI(){return{added:{},updated:{},removed:{}}}function aF(t){const e={added:t.removed,removed:t.added,updated:{}};for(const[n,r]of Object.values(t.updated))e.updated[n.id]=[r,n];return e}function Vle(t){return Object.keys(t.added).length===0&&Object.keys(t.updated).length===0&&Object.keys(t.removed).length===0}function fB(t){const e={added:{},removed:{},updated:{}};return yS(e,t),e}function yS(t,e){for(const n of e){for(const[r,o]of zs(n.added))if(t.removed[r]){const i=t.removed[r];delete t.removed[r],i!==o&&(t.updated[r]=[i,o])}else t.added[r]=o;for(const[r,[o,i]]of zs(n.updated)){if(t.added[r]){t.added[r]=i,delete t.updated[r],delete t.removed[r];continue}if(t.updated[r]){t.updated[r]=[t.updated[r][0],i],delete t.removed[r];continue}t.updated[r]=n.updated[r],delete t.removed[r]}for(const[r,o]of zs(n.removed))t.added[r]?delete t.added[r]:t.updated[r]?(t.removed[r]=t.updated[r][0],delete t.updated[r]):t.removed[r]=o}}function iUe(t){if(t.length===0)return new Set;const e=t[0],n=t.slice(1),r=new Set;for(const o of e)n.every(i=>i.has(o))&&r.add(o);return r}function sUe(t,e){const n={};for(const r of e)t.has(r)||(n.added??(n.added=new Set),n.added.add(r));for(const r of t)e.has(r)||(n.removed??(n.removed=new Set),n.removed.add(r));return n.added||n.removed?n:void 0}function uQ(t,e){for(const[n,r]of Object.entries(t)){const o=r,i=e[n];if("eq"in o&&i!==o.eq||"neq"in o&&i===o.neq||"gt"in o&&(typeof i!="number"||i<=o.gt))return!1}return!0}function dQ(t,e,n){const r=Object.fromEntries(Object.keys(n).map(o=>[o,new Set]));for(const[o,i]of Object.entries(n))if("eq"in i){const a=t.index(e,o).get().get(i.eq);if(a)for(const l of a)r[o].add(l)}else if("neq"in i){const s=t.index(e,o);for(const[a,l]of s.get())if(a!==i.neq)for(const c of l)r[o].add(c)}else if("gt"in i){const s=t.index(e,o);for(const[a,l]of s.get())if(a>i.gt)for(const c of l)r[o].add(c)}return iUe(Object.values(r))}class aUe{constructor(e,n){V(this,"indexCache",new Map);V(this,"historyCache",new Map);this.recordMap=e,this.history=n}filterHistory(e){if(this.historyCache.has(e))return this.historyCache.get(e);const n=He("filterHistory:"+e,(r,o)=>{if(_p(r))return this.history.get();const i=this.history.getDiffSince(o);if(i===Ua)return this.history.get();const s={added:{},removed:{},updated:{}};let a=0,l=0,c=0;for(const u of i){for(const d of Mo(u.added))if(d.typeName===e)if(s.removed[d.id]){const f=s.removed[d.id];delete s.removed[d.id],l--,f!==d&&(s.updated[d.id]=[f,d],c++)}else s.added[d.id]=d,a++;for(const[d,f]of Mo(u.updated))f.typeName===e&&(s.added[f.id]?s.added[f.id]=f:s.updated[f.id]?s.updated[f.id]=[s.updated[f.id][0],f]:(s.updated[f.id]=[d,f],c++));for(const d of Mo(u.removed))d.typeName===e&&(s.added[d.id]?(delete s.added[d.id],a--):s.updated[d.id]?(s.removed[d.id]=s.updated[d.id][0],delete s.updated[d.id],c--,l++):(s.removed[d.id]=d,l++))}return a||l||c?Db(this.history.get(),s):r},{historyLength:100});return this.historyCache.set(e,n),n}index(e,n){const r=e+":"+n;if(this.indexCache.has(r))return this.indexCache.get(r);const o=this.__uncached_createIndex(e,n);return this.indexCache.set(r,o),o}__uncached_createIndex(e,n){const r=this.filterHistory(e),o=()=>{r.get();const i=new Map;for(const s of this.recordMap.values())if(s.typeName===e){const a=s[n];i.has(a)||i.set(a,new Set),i.get(a).add(s.id)}return i};return He("index:"+e+":"+n,(i,s)=>{if(_p(i))return o();const a=r.getDiffSince(s);if(a===Ua)return o();const l=new Map,c=(h,g)=>{let y=l.get(h);y||(y=new mP(i.get(h)??new Set)),y.add(g),l.set(h,y)},u=(h,g)=>{let y=l.get(h);y||(y=new mP(i.get(h)??new Set)),y.remove(g),l.set(h,y)};for(const h of a){for(const g of Mo(h.added))if(g.typeName===e){const y=g[n];c(y,g.id)}for(const[g,y]of Mo(h.updated))if(y.typeName===e){const m=g[n],S=y[n];m!==S&&(u(m,y.id),c(S,y.id))}for(const g of Mo(h.removed))if(g.typeName===e){const y=g[n];u(y,g.id)}}let d,f;for(const[h,g]of l){const y=g.get();y&&(d||(d=new Map(i)),f||(f=new Map),y.value.size===0?d.delete(h):d.set(h,y.value),f.set(h,y.diff))}return d&&f?Db(d,f):i},{historyLength:100})}record(e,n=()=>({}),r="record:"+e+(n?":"+n.toString():"")){const o=this.ids(e,n,r);return He(r,()=>{for(const i of o.get())return this.recordMap.get(i)})}records(e,n=()=>({}),r="records:"+e+(n?":"+n.toString():"")){const o=this.ids(e,n,"ids:"+r);return He(r,()=>Array.from(o.get(),i=>this.recordMap.get(i)),{isEqual:Z_})}ids(e,n=()=>({}),r="ids:"+e+(n?":"+n.toString():"")){const o=this.filterHistory(e),i=()=>{o.get();const l=n();if(Object.keys(l).length===0){const c=new Set;for(const u of this.recordMap.values())u.typeName===e&&c.add(u.id);return c}return dQ(this,e,l)},s=l=>{const c=i(),u=sUe(l,c);return u?Db(c,u):l},a=He("ids_query:"+r,n,{isEqual:Jf});return He("query:"+r,(l,c)=>{const u=a.get();if(_p(l))return i();if(c<a.lastChangedEpoch)return s(l);const d=o.getDiffSince(c);if(d===Ua)return s(l);const f=new mP(l);for(const g of d){for(const y of Mo(g.added))y.typeName===e&&uQ(u,y)&&f.add(y.id);for(const[y,m]of Mo(g.updated))m.typeName===e&&(uQ(u,m)?f.add(m.id):f.remove(m.id));for(const y of Mo(g.removed))y.typeName===e&&f.remove(y.id)}const h=f.get();return h?Db(h.value,h.diff):l},{historyLength:50})}exec(e,n){const r=dQ(this,e,n);return r.size===0?ps:Array.from(r,o=>this.recordMap.get(o))}}class lUe{constructor(e){V(this,"_beforeCreateHandlers",{});V(this,"_afterCreateHandlers",{});V(this,"_beforeChangeHandlers",{});V(this,"_afterChangeHandlers",{});V(this,"_beforeDeleteHandlers",{});V(this,"_afterDeleteHandlers",{});V(this,"_operationCompleteHandlers",[]);V(this,"_isEnabled",!0);this.store=e}isEnabled(){return this._isEnabled}setIsEnabled(e){this._isEnabled=e}handleBeforeCreate(e,n){if(!this._isEnabled)return e;const r=this._beforeCreateHandlers[e.typeName];if(r){let o=e;for(const i of r)o=i(o,n);return o}return e}handleAfterCreate(e,n){if(!this._isEnabled)return;const r=this._afterCreateHandlers[e.typeName];if(r)for(const o of r)o(e,n)}handleBeforeChange(e,n,r){if(!this._isEnabled)return n;const o=this._beforeChangeHandlers[n.typeName];if(o){let i=n;for(const s of o)i=s(e,i,r);return i}return n}handleAfterChange(e,n,r){if(!this._isEnabled)return;const o=this._afterChangeHandlers[n.typeName];if(o)for(const i of o)i(e,n,r)}handleBeforeDelete(e,n){if(!this._isEnabled)return!0;const r=this._beforeDeleteHandlers[e.typeName];if(r){for(const o of r)if(o(e,n)===!1)return!1}return!0}handleAfterDelete(e,n){if(!this._isEnabled)return;const r=this._afterDeleteHandlers[e.typeName];if(r)for(const o of r)o(e,n)}handleOperationComplete(e){if(this._isEnabled)for(const n of this._operationCompleteHandlers)n(e)}register(e){const n=[];for(const[r,o]of Object.entries(e))o!=null&&o.beforeCreate&&n.push(this.registerBeforeCreateHandler(r,o.beforeCreate)),o!=null&&o.afterCreate&&n.push(this.registerAfterCreateHandler(r,o.afterCreate)),o!=null&&o.beforeChange&&n.push(this.registerBeforeChangeHandler(r,o.beforeChange)),o!=null&&o.afterChange&&n.push(this.registerAfterChangeHandler(r,o.afterChange)),o!=null&&o.beforeDelete&&n.push(this.registerBeforeDeleteHandler(r,o.beforeDelete)),o!=null&&o.afterDelete&&n.push(this.registerAfterDeleteHandler(r,o.afterDelete));return()=>{for(const r of n)r()}}registerBeforeCreateHandler(e,n){return this._beforeCreateHandlers[e]||(this._beforeCreateHandlers[e]=[]),this._beforeCreateHandlers[e].push(n),()=>np(this._beforeCreateHandlers[e],n)}registerAfterCreateHandler(e,n){return this._afterCreateHandlers[e]||(this._afterCreateHandlers[e]=[]),this._afterCreateHandlers[e].push(n),()=>np(this._afterCreateHandlers[e],n)}registerBeforeChangeHandler(e,n){return this._beforeChangeHandlers[e]||(this._beforeChangeHandlers[e]=[]),this._beforeChangeHandlers[e].push(n),()=>np(this._beforeChangeHandlers[e],n)}registerAfterChangeHandler(e,n){return this._afterChangeHandlers[e]||(this._afterChangeHandlers[e]=[]),this._afterChangeHandlers[e].push(n),()=>np(this._afterChangeHandlers[e],n)}registerBeforeDeleteHandler(e,n){return this._beforeDeleteHandlers[e]||(this._beforeDeleteHandlers[e]=[]),this._beforeDeleteHandlers[e].push(n),()=>np(this._beforeDeleteHandlers[e],n)}registerAfterDeleteHandler(e,n){return this._afterDeleteHandlers[e]||(this._afterDeleteHandlers[e]=[]),this._afterDeleteHandlers[e].push(n),()=>np(this._afterDeleteHandlers[e],n)}registerOperationCompleteHandler(e){return this._operationCompleteHandlers.push(e),()=>np(this._operationCompleteHandlers,e)}}function np(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}class hB{constructor(e){V(this,"id");V(this,"records");V(this,"history",bo("history",0,{historyLength:1e3}));V(this,"query");V(this,"listeners",new Set);V(this,"historyAccumulator",new uUe);V(this,"historyReactor");V(this,"schema");V(this,"props");V(this,"scopedTypes");V(this,"sideEffects",new lUe(this));V(this,"isMergingRemoteChanges",!1);V(this,"_integrityChecker");V(this,"_isPossiblyCorrupted",!1);V(this,"pendingAfterEvents",null);V(this,"_isInAtomicOp",!1);const{initialData:n,schema:r,id:o}=e;this.id=o??br(),this.schema=r,this.props=e.props,n?this.records=new sF("store",zs(n).map(([i,s])=>[i,this.schema.validateRecord(this,s,"initialize",null)])):this.records=new sF("store"),this.query=new aUe(this.records,this.history),this.historyReactor=S7e("Store.historyReactor",()=>{this.history.get(),this._flushHistory()},{scheduleEffect:i=>this.cancelHistoryReactor=Jae(i)}),this.scopedTypes={document:new Set(Mo(this.schema.types).filter(i=>i.scope==="document").map(i=>i.typeName)),session:new Set(Mo(this.schema.types).filter(i=>i.scope==="session").map(i=>i.typeName)),presence:new Set(Mo(this.schema.types).filter(i=>i.scope==="presence").map(i=>i.typeName))}}cancelHistoryReactor(){}_flushHistory(){if(this.historyAccumulator.hasChanges()){const e=this.historyAccumulator.flush();for(const{changes:n,source:r}of e){let o=null,i=null,s=null;for(const{onHistory:a,filters:l}of this.listeners)if(!(l.source!=="all"&&l.source!==r))if(l.scope!=="all")if(l.scope==="document"){if(i??(i=this.filterChangesByScope(n,"document")),!i)continue;a({changes:i,source:r})}else if(l.scope==="session"){if(o??(o=this.filterChangesByScope(n,"session")),!o)continue;a({changes:o,source:r})}else{if(s??(s=this.filterChangesByScope(n,"presence")),!s)continue;a({changes:s,source:r})}else a({changes:n,source:r})}}}dispose(){this.cancelHistoryReactor()}filterChangesByScope(e,n){const r={added:vS(e.added,(o,i)=>this.scopedTypes[n].has(i.typeName)),updated:vS(e.updated,(o,i)=>this.scopedTypes[n].has(i[1].typeName)),removed:vS(e.removed,(o,i)=>this.scopedTypes[n].has(i.typeName))};return Object.keys(r.added).length===0&&Object.keys(r.updated).length===0&&Object.keys(r.removed).length===0?null:r}updateHistory(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),this.listeners.size===0&&this.historyAccumulator.clear(),this.history.set(this.history.get()+1,e)}validate(e){this.allRecords().forEach(n=>this.schema.validateRecord(this,n,e,null))}put(e,n){this.atomic(()=>{const r={},o={};let i,s=!1;const a=this.isMergingRemoteChanges?"remote":"user";for(let l=0,c=e.length;l<c;l++){i=e[l];const u=this.records.__unsafe__getWithoutCapture(i.id);if(u){if(i=this.sideEffects.handleBeforeChange(u,i,a),this.schema.validateRecord(this,i,n??"updateRecord",u)===u)continue;i=i,this.records.set(i.id,i),s=!0,r[i.id]=[u,i],this.addDiffForAfterEvent(u,i)}else i=this.sideEffects.handleBeforeCreate(i,a),s=!0,i=this.schema.validateRecord(this,i,n??"createRecord",null),i=i,o[i.id]=i,this.addDiffForAfterEvent(null,i),this.records.set(i.id,i)}s&&this.updateHistory({added:o,updated:r,removed:{}})})}remove(e){this.atomic(()=>{const n=new Set(e),r=this.isMergingRemoteChanges?"remote":"user";if(this.sideEffects.isEnabled())for(const s of e){const a=this.records.__unsafe__getWithoutCapture(s);a&&this.sideEffects.handleBeforeDelete(a,r)===!1&&n.delete(s)}const o=this.records.deleteMany(n);if(o.length===0)return;const i={};for(const[s,a]of o)i[s]=a,this.addDiffForAfterEvent(a,null);this.updateHistory({added:{},updated:{},removed:i})})}get(e){return this.records.get(e)}unsafeGetWithoutCapture(e){return this.records.__unsafe__getWithoutCapture(e)}serialize(e="document"){const n={};for(const[r,o]of this.records)(e==="all"||this.scopedTypes[e].has(o.typeName))&&(n[r]=o);return n}getStoreSnapshot(e="document"){return{store:this.serialize(e),schema:this.schema.serialize()}}getSnapshot(e="document"){return console.warn("[tldraw] `Store.getSnapshot` is deprecated and will be removed in a future release. Use `getSnapshot` from the `tldraw` package instead."),this.getStoreSnapshot(e)}migrateSnapshot(e){const n=this.schema.migrateStoreSnapshot(e);if(n.type==="error")throw new Error(`Failed to migrate snapshot: ${n.reason}`);return{store:n.value,schema:this.schema.serialize()}}loadStoreSnapshot(e){const n=this.schema.migrateStoreSnapshot(e);if(n.type==="error")throw new Error(`Failed to migrate snapshot: ${n.reason}`);const r=this.sideEffects.isEnabled();try{this.sideEffects.setIsEnabled(!1),this.atomic(()=>{this.clear(),this.put(Object.values(n.value)),this.ensureStoreIsUsable()})}finally{this.sideEffects.setIsEnabled(r)}}loadSnapshot(e){console.warn("[tldraw] `Store.loadSnapshot` is deprecated and will be removed in a future release. Use `loadSnapshot` from the 'tldraw' package instead."),this.loadStoreSnapshot(e)}allRecords(){return Array.from(this.records.values())}clear(){this.remove(Array.from(this.records.keys()))}update(e,n){const r=this.unsafeGetWithoutCapture(e);if(!r){console.error(`Record ${e} not found. This is probably an error`);return}this.put([n(r)])}has(e){return this.records.has(e)}listen(e,n){this._flushHistory();const r={onHistory:e,filters:{source:(n==null?void 0:n.source)??"all",scope:(n==null?void 0:n.scope)??"all"}};return this.historyReactor.scheduler.isActivelyListening||(this.historyReactor.start(),this.historyReactor.scheduler.execute()),this.listeners.add(r),()=>{this.listeners.delete(r),this.listeners.size===0&&this.historyReactor.stop()}}mergeRemoteChanges(e){if(this.isMergingRemoteChanges)return e();if(this._isInAtomicOp)throw new Error("Cannot merge remote changes while in atomic operation");try{this.atomic(e,!0,!0)}finally{this.ensureStoreIsUsable()}}extractingChanges(e){const n=[],r=this.historyAccumulator.addInterceptor(o=>n.push(o.changes));try{return Wa(e),fB(n)}finally{r()}}applyDiff(e,{runCallbacks:n=!0,ignoreEphemeralKeys:r=!1}={}){this.atomic(()=>{const o=Mo(e.added);for(const[s,a]of Mo(e.updated)){const l=this.schema.getType(a.typeName);if(r&&l.ephemeralKeySet.size){const c=this.get(a.id);if(!c){o.push(a);continue}let u=null;for(const[d,f]of Object.entries(a))l.ephemeralKeySet.has(d)||Object.is(f,Uo(c,d))||(u||(u={...c}),u[d]=f);u&&o.push(u)}else o.push(a)}const i=Dae(e.removed);o.length&&this.put(o),i.length&&this.remove(i)},n)}createCache(e){const n=new Hl;return{get:r=>{const o=this.records.getAtom(r);if(o)return n.get(o,()=>e(r,o)).get()}}}createComputedCache(e,n,r){return this.createCache((o,i)=>{const s=r!=null&&r.areRecordsEqual?He(`${e}:${o}:isEqual`,()=>i.get(),{isEqual:r.areRecordsEqual}):i;return He(e+":"+o,()=>n(s.get()),{isEqual:r==null?void 0:r.areResultsEqual})})}ensureStoreIsUsable(){this.atomic(()=>{var e;this._integrityChecker??(this._integrityChecker=this.schema.createIntegrityChecker(this)),(e=this._integrityChecker)==null||e.call(this)})}markAsPossiblyCorrupted(){this._isPossiblyCorrupted=!0}isPossiblyCorrupted(){return this._isPossiblyCorrupted}addDiffForAfterEvent(e,n){if(nn(this.pendingAfterEvents,"must be in event operation"),e===n||(e&&n&&nn(e.id===n.id),!e&&!n))return;const r=(e||n).id,o=this.pendingAfterEvents.get(r);o?o.after=n:this.pendingAfterEvents.set(r,{before:e,after:n})}flushAtomicCallbacks(e){let n=0,r=e?"remote":"user";for(;this.pendingAfterEvents;){const o=this.pendingAfterEvents;if(this.pendingAfterEvents=null,!!this.sideEffects.isEnabled()){if(n++,n>100)throw new Error("Maximum store update depth exceeded, bailing out");for(const{before:i,after:s}of o.values())i&&s&&i!==s&&!Jf(i,s)?this.sideEffects.handleAfterChange(i,s,r):i&&!s?this.sideEffects.handleAfterDelete(i,r):!i&&s&&this.sideEffects.handleAfterCreate(s,r);this.pendingAfterEvents?r="user":this.sideEffects.handleOperationComplete(r)}}}atomic(e,n=!0,r=!1){return Wa(()=>{if(this._isInAtomicOp){this.pendingAfterEvents||(this.pendingAfterEvents=new Map);const i=this.sideEffects.isEnabled();nn(!r,"cannot call mergeRemoteChanges while in atomic operation");try{return i&&!n&&this.sideEffects.setIsEnabled(!1),e()}finally{this.sideEffects.setIsEnabled(i)}}this.pendingAfterEvents=new Map;const o=this.sideEffects.isEnabled();this.sideEffects.setIsEnabled(n??o),this._isInAtomicOp=!0,r&&(this.isMergingRemoteChanges=!0);try{const i=e();return this.isMergingRemoteChanges=!1,this.flushAtomicCallbacks(r),i}finally{this.pendingAfterEvents=null,this.sideEffects.setIsEnabled(o),this._isInAtomicOp=!1,this.isMergingRemoteChanges=!1}})}addHistoryInterceptor(e){return this.historyAccumulator.addInterceptor(n=>e(n,this.isMergingRemoteChanges?"remote":"user"))}}function cUe(t){if(t.length===0)return[];const e=[];let n=[t[0]],r;for(let o=1,i=t.length;o<i;o++)r=t[o],n[0].source!==r.source&&(e.push(n),n=[]),n.push(r);return e.push(n),e.map(o=>({source:o[0].source,changes:fB(o.map(i=>i.changes))}))}class uUe{constructor(){V(this,"_history",[]);V(this,"_interceptors",new Set)}addInterceptor(e){return this._interceptors.add(e),()=>{this._interceptors.delete(e)}}add(e){this._history.push(e);for(const n of this._interceptors)n(e)}flush(){const e=cUe(this._history);return this._history=[],e}clear(){this._history=[]}hasChanges(){return this._history.length>0}}function zM(t,e,n){const r=new Hl;return{get(o,i){return r.get(o,()=>(o instanceof hB?o:o.store).createComputedCache(t,l=>e(o,l),n)).get(i)}}}function dUe(t){const e=[];for(let n=t.length-1;n>=0;n--){const r=t[n];if("id"in r)e.unshift(r);else{const o=r.dependsOn,i=e[0];i&&(e[0]={...i,dependsOn:o.concat(i.dependsOn??[])})}}return e}function Gm({sequence:t,sequenceId:e,retroactive:n=!0}){const r={sequenceId:e,retroactive:n,sequence:dUe(t)};return qle(r),r}function Ca(t,e){return Object.fromEntries(zs(e).map(([n,r])=>[n,`${t}/${r}`]))}function nl(t){const e=t.sequenceId;return Gm({sequenceId:e,retroactive:t.retroactive??!0,sequence:t.sequence.map(n=>"id"in n?{...n,scope:"record",filter:r=>{var o,i;return r.typeName===t.recordType&&(((o=n.filter)==null?void 0:o.call(n,r))??!0)&&(((i=t.filter)==null?void 0:i.call(t,r))??!0)}}:n)})}function fUe(t){const e=new Map(t.map(i=>[i.id,i])),n=new Set,r=[];function o(i){nn(!n.has(i.id),`Circular dependency in migrations: ${i.id}`),n.add(i.id);const{version:s,sequenceId:a}=iI(i.id),l=e.get(`${a}/${s-1}`);if(l&&o(l),i.dependsOn)for(const c of i.dependsOn){const u=e.get(c);u&&o(u)}e.delete(i.id),r.push(i)}for(const i of e.values())o(i);return r}function iI(t){const[e,n]=t.split("/");return{sequenceId:e,version:parseInt(n)}}function fQ(t,e){e&&nn(t.startsWith(e+"/"),`Every migration in sequence '${e}' must have an id starting with '${e}/'. Got invalid id: '${t}'`),nn(t.match(/^(.*?)\/(0|[1-9]\d*)$/),`Invalid migration id: '${t}'`)}function qle(t){if(nn(!t.sequenceId.includes("/"),`sequenceId cannot contain a '/', got ${t.sequenceId}`),nn(t.sequenceId.length,"sequenceId must be a non-empty string"),t.sequence.length===0)return;fQ(t.sequence[0].id,t.sequenceId);let e=iI(t.sequence[0].id).version;nn(e===1,`Expected the first migrationId to be '${t.sequenceId}/1' but got '${t.sequence[0].id}'`);for(let n=1;n<t.sequence.length;n++){const r=t.sequence[n].id;fQ(r,t.sequenceId);const o=iI(r).version;nn(o===e+1,`Migration id numbers must increase in increments of 1, expected ${t.sequenceId}/${e+1} but got '${t.sequence[n].id}'`),e=o}}var bf=(t=>(t.IncompatibleSubtype="incompatible-subtype",t.UnknownType="unknown-type",t.TargetVersionTooNew="target-version-too-new",t.TargetVersionTooOld="target-version-too-old",t.MigrationError="migration-error",t.UnrecognizedSubtype="unrecognized-subtype",t))(bf||{});function hUe(t){if(t.schemaVersion>2||t.schemaVersion<1)return Hf.err("Bad schema version");if(t.schemaVersion===2)return Hf.ok(t);const e={schemaVersion:2,sequences:{"com.tldraw.store":t.storeVersion}};for(const[n,r]of Object.entries(t.recordVersions))if(e.sequences[`com.tldraw.${n}`]=r.version,"subTypeKey"in r)for(const[o,i]of Object.entries(r.subTypeVersions))e.sequences[`com.tldraw.${n}.${o}`]=i;return Hf.ok(e)}class pB{constructor(e,n){V(this,"migrations",{});V(this,"sortedMigrations");var o;this.types=e,this.options=n;for(const i of n.migrations??[])nn(!this.migrations[i.sequenceId],`Duplicate migration sequenceId ${i.sequenceId}`),qle(i),this.migrations[i.sequenceId]=i;const r=Object.values(this.migrations).flatMap(i=>i.sequence);this.sortedMigrations=fUe(r);for(const i of this.sortedMigrations)if((o=i.dependsOn)!=null&&o.length)for(const s of i.dependsOn){const a=r.find(l=>l.id===s);nn(a,`Migration '${i.id}' depends on missing migration '${s}'`)}}static create(e,n){return new pB(e,n??{})}validateRecord(e,n,r,o){try{const i=Uo(this.types,n.typeName);if(!i)throw new Error(`Missing definition for record type ${n.typeName}`);return i.validate(n,o??void 0)}catch(i){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:e,record:n,phase:r,recordBefore:o,error:i});throw i}}getMigrationsSince(e){const n=hUe(e);if(!n.ok)return n;const r=n.value,o=new Set(Object.keys(r.sequences).filter(s=>this.migrations[s]));for(const s in this.migrations)r.sequences[s]===void 0&&this.migrations[s].retroactive&&o.add(s);if(o.size===0)return Hf.ok([]);const i=new Set;for(const s of o){const a=r.sequences[s];if(typeof a!="number"&&this.migrations[s].retroactive||a===0){for(const u of this.migrations[s].sequence)i.add(u.id);continue}const l=`${s}/${a}`,c=this.migrations[s].sequence.findIndex(u=>u.id===l);if(c===-1)return Hf.err("Incompatible schema?");for(const u of this.migrations[s].sequence.slice(c+1))i.add(u.id)}return Hf.ok(this.sortedMigrations.filter(({id:s})=>i.has(s)))}migratePersistedRecord(e,n,r="up"){const o=this.getMigrationsSince(n);if(!o.ok)return console.error("Error migrating record",o.error),{type:"error",reason:bf.MigrationError};let i=o.value;if(i.length===0)return{type:"success",value:e};if(i.some(s=>s.scope==="store"))return{type:"error",reason:r==="down"?bf.TargetVersionTooOld:bf.TargetVersionTooNew};if(r==="down"){if(!i.every(s=>s.down))return{type:"error",reason:bf.TargetVersionTooOld};i=i.slice().reverse()}e=to(e);try{for(const s of i){if(s.scope==="store")throw new Error;if(!(s.filter?s.filter(e):!0))continue;const l=s[r](e);l&&(e=to(l))}}catch(s){return console.error("Error migrating record",s),{type:"error",reason:bf.MigrationError}}return{type:"success",value:e}}migrateStoreSnapshot(e){let{store:n}=e;const r=this.getMigrationsSince(e.schema);if(!r.ok)return console.error("Error migrating store",r.error),{type:"error",reason:bf.MigrationError};const o=r.value;if(o.length===0)return{type:"success",value:n};n=to(n);try{for(const i of o)if(i.scope==="record")for(const[s,a]of Object.entries(n)){if(!(i.filter?i.filter(a):!0))continue;const c=i.up(a);c&&(n[s]=to(c))}else if(i.scope==="store"){const s=i.up(n);s&&(n=to(s))}else Jn(i)}catch(i){return console.error("Error migrating store",i),{type:"error",reason:bf.MigrationError}}return{type:"success",value:n}}createIntegrityChecker(e){var n,r;return((r=(n=this.options).createIntegrityChecker)==null?void 0:r.call(n,e))??void 0}serialize(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:e,sequence:n})=>[e,n.length?iI(n.at(-1).id).version:0]))}}serializeEarliestVersion(){return{schemaVersion:2,sequences:Object.fromEntries(Object.values(this.migrations).map(({sequenceId:e})=>[e,0]))}}getType(e){const n=Uo(this.types,e);return nn(n,"record type does not exists"),n}}fh("@tldraw/store","3.13.1","esm");function pUe(t){if(!t.length)return null;let e="";for(const n of t)typeof n=="number"?e+=`.${n}`:n.startsWith("(")?e.endsWith(")")?e=`${e.slice(0,-1)}, ${n.slice(1)}`:e+=n:e+=`.${n}`;return e=e.replace(/id = [^,]+, /,"").replace(/id = [^)]+/,""),e.startsWith(".")?e.slice(1):e}class ar extends Error{constructor(n,r=[]){const o=pUe(r),i=n.split(`
`).map((s,a)=>a===0?s:`  ${s}`).join(`
`);super(r?`At ${o}: ${i}`:i);V(this,"name","ValidationError");this.rawMessage=n,this.path=r}}function ya(t,e){try{return e()}catch(n){throw n instanceof ar?new ar(n.rawMessage,[t,...n.path]):new ar(n.toString(),[t])}}function th(t){if(t===null)return"null";if(Array.isArray(t))return"an array";const e=typeof t;switch(e){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return`a ${e}`;case"object":return`an ${e}`;case"undefined":return"undefined";default:Jn(e)}}class ws{constructor(e,n){this.validationFn=e,this.validateUsingKnownGoodVersionFn=n}validate(e){return this.validationFn(e)}validateUsingKnownGoodVersion(e,n){return Object.is(e,n)?e:this.validateUsingKnownGoodVersionFn?this.validateUsingKnownGoodVersionFn(e,n):this.validate(n)}isValid(e){try{return this.validate(e),!0}catch{return!1}}nullable(){return xUe(this)}optional(){return Gle(this)}refine(e){return new ws(n=>e(this.validate(n)),(n,r)=>{const o=this.validateUsingKnownGoodVersion(n,r);return Object.is(n,o)?n:e(o)})}check(e,n){return typeof e=="string"?this.refine(r=>(ya(`(check ${e})`,()=>n(r)),r)):this.refine(r=>(e(r),r))}}class gUe extends ws{constructor(e){super(n=>{const r=hQ.validate(n);for(let o=0;o<r.length;o++)ya(o,()=>e.validate(r[o]));return r},(n,r)=>{if(!e.validateUsingKnownGoodVersion)return this.validate(r);const o=hQ.validate(r);let i=n.length!==o.length;for(let s=0;s<o.length;s++){const a=o[s];if(s>=n.length){i=!0,ya(s,()=>e.validate(a));continue}if(Object.is(n[s],a))continue;const l=ya(s,()=>e.validateUsingKnownGoodVersion(n[s],a));Object.is(l,n[s])||(i=!0)}return i?r:n}),this.itemValidator=e}nonEmpty(){return this.check(e=>{if(e.length===0)throw new ar("Expected a non-empty array")})}lengthGreaterThan1(){return this.check(e=>{if(e.length<=1)throw new ar("Expected an array with length greater than 1")})}}class sI extends ws{constructor(e,n=!1){super(r=>{if(typeof r!="object"||r===null)throw new ar(`Expected object, got ${th(r)}`);for(const[o,i]of Object.entries(e))ya(o,()=>{i.validate(Uo(r,o))});if(!n){for(const o of Object.keys(r))if(!kl(e,o))throw new ar("Unexpected property",[o])}return r},(r,o)=>{if(typeof o!="object"||o===null)throw new ar(`Expected object, got ${th(o)}`);let i=!1;for(const[s,a]of Object.entries(e)){const l=Uo(r,s),c=Uo(o,s);if(Object.is(l,c))continue;const u=ya(s,()=>{const d=a;return d.validateUsingKnownGoodVersion?d.validateUsingKnownGoodVersion(l,c):d.validate(c)});Object.is(u,l)||(i=!0)}if(!n){for(const s of Object.keys(o))if(!kl(e,s))throw new ar("Unexpected property",[s])}for(const s of Object.keys(r))if(!kl(o,s)){i=!0;break}return i?o:r}),this.config=e,this.shouldAllowUnknownProperties=n}allowUnknownProperties(){return new sI(this.config,!0)}extend(e){return new sI({...this.config,...e})}}class BM extends ws{constructor(e,n,r,o){super(i=>{this.expectObject(i);const{matchingSchema:s,variant:a}=this.getMatchingSchemaAndVariant(i);return s===void 0?this.unknownValueValidation(i,a):ya(`(${e} = ${a})`,()=>s.validate(i))},(i,s)=>{this.expectObject(s),this.expectObject(i);const{matchingSchema:a,variant:l}=this.getMatchingSchemaAndVariant(s);return a===void 0?this.unknownValueValidation(s,l):Uo(i,e)!==Uo(s,e)?ya(`(${e} = ${l})`,()=>a.validate(s)):ya(`(${e} = ${l})`,()=>a.validateUsingKnownGoodVersion?a.validateUsingKnownGoodVersion(i,s):a.validate(s))}),this.key=e,this.config=n,this.unknownValueValidation=r,this.useNumberKeys=o}expectObject(e){if(typeof e!="object"||e===null)throw new ar(`Expected an object, got ${th(e)}`,[])}getMatchingSchemaAndVariant(e){const n=Uo(e,this.key);if(!this.useNumberKeys&&typeof n!="string")throw new ar(`Expected a string for key "${this.key}", got ${th(n)}`);if(this.useNumberKeys&&!Number.isFinite(Number(n)))throw new ar(`Expected a number for key "${this.key}", got "${n}"`);return{matchingSchema:kl(this.config,n)?this.config[n]:void 0,variant:n}}validateUnknownVariants(e){return new BM(this.key,this.config,e,this.useNumberKeys)}}class mUe extends ws{constructor(e,n){super(r=>{if(typeof r!="object"||r===null)throw new ar(`Expected object, got ${th(r)}`);for(const[o,i]of Object.entries(r))ya(o,()=>{e.validate(o),n.validate(i)});return r},(r,o)=>{if(typeof o!="object"||o===null)throw new ar(`Expected object, got ${th(o)}`);let i=!1;for(const[s,a]of Object.entries(o)){if(!kl(r,s)){i=!0,ya(s,()=>{e.validate(s),n.validate(a)});continue}const l=Uo(r,s),c=a;if(Object.is(l,c))continue;const u=ya(s,()=>n.validateUsingKnownGoodVersion?n.validateUsingKnownGoodVersion(l,c):n.validate(c));Object.is(u,l)||(i=!0)}for(const s of Object.keys(r))if(!kl(o,s)){i=!0;break}return i?o:r}),this.keyValidator=e,this.valueValidator=n}}function gB(t){return new ws(e=>{if(typeof e!==t)throw new ar(`Expected ${t}, got ${th(e)}`);return e})}const vUe=new ws(t=>t),yUe=new ws(t=>t),On=gB("string"),pn=gB("number").check(t=>{if(Number.isNaN(t))throw new ar("Expected a number, got NaN");if(!Number.isFinite(t))throw new ar(`Expected a finite number, got ${t}`)}),aI=pn.check(t=>{if(t<0)throw new ar(`Expected a positive number, got ${t}`)}),qo=pn.check(t=>{if(t<=0)throw new ar(`Expected a non-zero positive number, got ${t}`)}),Kle=pn.check(t=>{if(!Number.isInteger(t))throw new ar(`Expected an integer, got ${t}`)}),vP=Kle.check(t=>{if(t<0)throw new ar(`Expected a positive integer, got ${t}`)}),bUe=Kle.check(t=>{if(t<=0)throw new ar(`Expected a non-zero positive integer, got ${t}`)}),Xn=gB("boolean");function bs(t){return new ws(e=>{if(e!==t)throw new ar(`Expected ${t}, got ${JSON.stringify(e)}`);return t})}const hQ=new ws(t=>{if(!Array.isArray(t))throw new ar(`Expected an array, got ${th(t)}`);return t});function yi(t){return new gUe(t)}function Kn(t){return new sI(t)}function lF(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null||Object.getPrototypeOf(t)===v9e)}function cF(t){return t===null||typeof t=="number"||typeof t=="string"||typeof t=="boolean"?!0:Array.isArray(t)?t.every(cF):lF(t)?Object.values(t).every(cF):!1}const Hi=new ws(t=>{if(cF(t))return t;throw new ar(`Expected json serializable value, got ${typeof t}`)},(t,e)=>{if(Array.isArray(t)&&Array.isArray(e)){let n=t.length!==e.length;for(let r=0;r<e.length;r++){if(r>=t.length){n=!0,Hi.validate(e[r]);continue}const o=t[r],i=e[r];if(Object.is(o,i))continue;const s=Hi.validateUsingKnownGoodVersion(o,i);Object.is(s,o)||(n=!0)}return n?e:t}else if(lF(t)&&lF(e)){let n=!1;for(const r of Object.keys(e)){if(!kl(t,r)){n=!0,Hi.validate(e[r]);continue}const o=t[r],i=e[r];if(Object.is(o,i))continue;const s=Hi.validateUsingKnownGoodVersion(o,i);Object.is(s,o)||(n=!0)}for(const r of Object.keys(t))if(!kl(e,r)){n=!0;break}return n?e:t}else return Hi.validate(e)});function lI(t,e){return new mUe(t,e)}function mB(t,e){return new BM(t,e,(n,r)=>{throw new ar(`Expected one of ${Object.keys(e).map(o=>JSON.stringify(o)).join(" or ")}, got ${JSON.stringify(r)}`,[t])},!1)}function SUe(t,e){return new BM(t,e,(n,r)=>{throw new ar(`Expected one of ${Object.keys(e).map(o=>JSON.stringify(o)).join(" or ")}, got ${JSON.stringify(r)}`,[t])},!0)}function Lu(t,e){return new ws(n=>ya(t,()=>e.validate(n)),(n,r)=>ya(t,()=>e.validateUsingKnownGoodVersion?e.validateUsingKnownGoodVersion(n,r):e.validate(r)))}function HM(t){return new ws(e=>{if(!t.has(e)){const n=Array.from(t,r=>JSON.stringify(r)).join(" or ");throw new ar(`Expected ${n}, got ${e}`)}return e})}function Gle(t){return new ws(e=>{if(e!==void 0)return t.validate(e)},(e,n)=>{if(!(e===void 0&&n===void 0)&&n!==void 0)return t.validateUsingKnownGoodVersion&&e!==void 0?t.validateUsingKnownGoodVersion(e,n):t.validate(n)})}function xUe(t){return new ws(e=>e===null?null:t.validate(e),(e,n)=>n===null?null:t.validateUsingKnownGoodVersion&&e!==null?t.validateUsingKnownGoodVersion(e,n):t.validate(n))}function ny(...t){return HM(new Set(t))}function vB(t){try{return new URL(t)}catch{if(t.startsWith("/")||t.startsWith("./"))try{return new URL(t,"http://example.com")}catch{throw new ar(`Expected a valid url, got ${JSON.stringify(t)}`)}throw new ar(`Expected a valid url, got ${JSON.stringify(t)}`)}}const wUe=new Set(["http:","https:","mailto:"]),Ja=On.check(t=>{if(t==="")return;const e=vB(t);if(!wUe.has(e.protocol.toLowerCase()))throw new ar(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)}),CUe=new Set(["http:","https:","data:","asset:"]),Xp=On.check(t=>{if(t==="")return;const e=vB(t);if(!CUe.has(e.protocol.toLowerCase()))throw new ar(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)});On.check(t=>{if(t==="")return;if(!vB(t).protocol.toLowerCase().match(/^https?:$/))throw new ar(`Expected a valid url, got ${JSON.stringify(t)} (invalid protocol)`)});const yB=On.refine(t=>{try{return a9e(t),t}catch{throw new ar(`Expected an index key, got ${JSON.stringify(t)}`)}});fh("@tldraw/validate","3.13.1","esm");function Va(t){return On.refine(e=>{if(!e.startsWith(`${t}:`))throw new Error(`${t} ID must start with "${t}:"`);return e})}const UM=Va("asset");function bB(t,e){return Kn({id:UM,typeName:bs("asset"),type:bs(t),props:e,meta:Hi})}const Yp=Kn({x:pn,y:pn,z:pn.optional()}),bS=Kn({x:pn,y:pn,w:pn,h:pn}),Xle=pn.check(t=>{if(t<0||t>1)throw new ar("Opacity must be between 0 and 1")}),EUe=On.refine(t=>{if(!t.startsWith("page:")&&!t.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return t}),xl=Va("shape");function PUe(t,e,n){return Kn({id:xl,typeName:bs("shape"),x:pn,y:pn,rotation:pn,index:yB,parentId:EUe,type:bs(t),isLocked:Xn,opacity:Xle,props:e?Kn(e):Hi,meta:n?Kn(n):Hi})}const _Ue=Va("binding");function IUe(t,e,n){return Kn({id:_Ue,typeName:bs("binding"),type:bs(t),fromId:xl,toId:xl,props:e?Kn(e):Hi,meta:n?Kn(n):Hi})}Ca("com.tldraw.binding",{});nl({sequenceId:"com.tldraw.binding",recordType:"binding",sequence:[]});function Ip(t){return`binding:${br()}`}function TUe(t,e){return hh(e,(n,r)=>`com.tldraw.binding.${t}/${r}`)}function MUe(t){return ju("binding",{scope:"document",validator:Lu("binding",mB("type",hh(t,(e,{props:n,meta:r})=>IUe(e,n,r))))}).withDefaultProperties(()=>({meta:{}}))}class Ti{constructor(e,n,r){this.id=e,this.defaultValue=n,this.type=r}static define(e,n){const{defaultValue:r,type:o=yUe}=n;return new Ti(e,r,o)}static defineEnum(e,n){const{defaultValue:r,values:o}=n;return new OUe(e,r,o)}setDefaultValue(e){this.defaultValue=e}validate(e){return this.type.validate(e)}validateUsingKnownGoodVersion(e,n){return this.type.validateUsingKnownGoodVersion?this.type.validateUsingKnownGoodVersion(e,n):this.validate(n)}}class OUe extends Ti{constructor(e,n,r){super(e,n,ny(...r)),this.values=r}}const eE=Ca("com.tldraw.shape",{AddIsLocked:1,HoistOpacity:2,AddMeta:3,AddWhite:4}),RUe=nl({sequenceId:"com.tldraw.shape",recordType:"shape",sequence:[{id:eE.AddIsLocked,up:t=>{t.isLocked=!1},down:t=>{delete t.isLocked}},{id:eE.HoistOpacity,up:t=>{t.opacity=Number(t.props.opacity??"1"),delete t.props.opacity},down:t=>{const e=t.opacity;delete t.opacity,t.props.opacity=e<.175?"0.1":e<.375?"0.25":e<.625?"0.5":e<.875?"0.75":"1"}},{id:eE.AddMeta,up:t=>{t.meta={}}},{id:eE.AddWhite,up:t=>{},down:t=>{t.props.color==="white"&&(t.props.color="black")}}]});function Lm(t){return t?t.typeName==="shape":!1}function fa(t){return t?t.startsWith("shape:"):!1}function Ar(t){return`shape:${t??br()}`}function Yle(t){const e=new Map;for(const[n,r]of Object.entries(t))if(r instanceof Ti){if(e.has(r))throw new Error(`Duplicate style prop ${r.id}. Each style prop can only be used once within a shape.`);e.set(r,n)}return e}function Wl(t,e){return hh(e,(n,r)=>`com.tldraw.shape.${t}/${r}`)}function kUe(t){return ju("shape",{scope:"document",validator:Lu("shape",mB("type",hh(t,(e,{props:n,meta:r})=>PUe(e,n,r))))}).withDefaultProperties(()=>({x:0,y:0,rotation:0,isLocked:!1,opacity:1,meta:{}}))}function pQ(t,e){const n=[];for(const[r,{migrations:o}]of Object.entries(e)){const i=`com.tldraw.${t}.${r}`;o?"sequenceId"in o?(nn(i===o.sequenceId,`sequenceId mismatch for ${r} ${FM} migrations. Expected '${i}', got '${o.sequenceId}'`),n.push(o)):"sequence"in o?n.push(Gm({sequenceId:i,retroactive:!0,sequence:o.sequence.map(s=>"id"in s?Qle(t,r,s):s)})):n.push(Gm({sequenceId:i,retroactive:!0,sequence:Object.keys(o.migrators).map(s=>Number(s)).sort((s,a)=>s-a).map(s=>({id:`${i}/${s}`,scope:"record",filter:a=>a.typeName===t&&a.type===r,up:a=>{const l=o.migrators[s].up(a);if(l)return l},down:a=>{const l=o.migrators[s].down(a);if(l)return l}}))})):n.push(Gm({sequenceId:i,retroactive:!0,sequence:[]}))}return n}function Qle(t,e,n){return{id:n.id,dependsOn:n.dependsOn,scope:"record",filter:r=>r.typeName===t&&r.type===e,up:r=>{const o=n.up(r.props);o&&(r.props=o)},down:typeof n.down=="function"?r=>{const o=n.down(r.props);o&&(r.props=o)}:void 0}}const Zle=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red","white"],cI={lightMode:{id:"light",text:"#000000",background:"#f9fafb",solid:"#fcfffe",black:{solid:"#1d1d1d",fill:"#1d1d1d",frame:{headingStroke:"#717171",headingFill:"#ffffff",stroke:"#717171",fill:"#ffffff",text:"#000000"},note:{fill:"#FCE19C",text:"#000000"},semi:"#e8e8e8",pattern:"#494949",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8205 0.05)"}},blue:{solid:"#4465e9",fill:"#4465e9",frame:{headingStroke:"#6681ec",headingFill:"#f9fafe",stroke:"#6681ec",fill:"#f9fafe",text:"#000000"},note:{fill:"#8AA3FF",text:"#000000"},semi:"#dce1f8",pattern:"#6681ee",highlight:{srgb:"#10acff",p3:"color(display-p3 0.308 0.6632 0.9996)"}},green:{solid:"#099268",fill:"#099268",frame:{headingStroke:"#37a684",headingFill:"#f8fcfa",stroke:"#37a684",fill:"#f8fcfa",text:"#000000"},note:{fill:"#6FC896",text:"#000000"},semi:"#d3e9e3",pattern:"#39a785",highlight:{srgb:"#00ffc8",p3:"color(display-p3 0.2536 0.984 0.7981)"}},grey:{solid:"#9fa8b2",fill:"#9fa8b2",frame:{headingStroke:"#aaaaab",headingFill:"#fbfcfc",stroke:"#aaaaab",fill:"#fcfcfd",text:"#000000"},note:{fill:"#C0CAD3",text:"#000000"},semi:"#eceef0",pattern:"#bcc3c9",highlight:{srgb:"#cbe7f1",p3:"color(display-p3 0.8163 0.9023 0.9416)"}},"light-blue":{solid:"#4ba1f1",fill:"#4ba1f1",frame:{headingStroke:"#6cb2f3",headingFill:"#f8fbfe",stroke:"#6cb2f3",fill:"#fafcff",text:"#000000"},note:{fill:"#9BC4FD",text:"#000000"},semi:"#ddedfa",pattern:"#6fbbf8",highlight:{srgb:"#00f4ff",p3:"color(display-p3 0.1512 0.9414 0.9996)"}},"light-green":{solid:"#4cb05e",fill:"#4cb05e",frame:{headingStroke:"#6dbe7c",headingFill:"#f8fcf9",stroke:"#6dbe7c",fill:"#fafdfa",text:"#000000"},note:{fill:"#98D08A",text:"#000000"},semi:"#dbf0e0",pattern:"#65cb78",highlight:{srgb:"#65f641",p3:"color(display-p3 0.563 0.9495 0.3857)"}},"light-red":{solid:"#f87777",fill:"#f87777",frame:{headingStroke:"#f89090",headingFill:"#fffafa",stroke:"#f89090",fill:"#fffbfb",text:"#000000"},note:{fill:"#F7A5A1",text:"#000000"},semi:"#f4dadb",pattern:"#fe9e9e",highlight:{srgb:"#ff7fa3",p3:"color(display-p3 0.9988 0.5301 0.6397)"}},"light-violet":{solid:"#e085f4",fill:"#e085f4",frame:{headingStroke:"#e59bf5",headingFill:"#fefaff",stroke:"#e59bf5",fill:"#fefbff",text:"#000000"},note:{fill:"#DFB0F9",text:"#000000"},semi:"#f5eafa",pattern:"#e9acf8",highlight:{srgb:"#ff88ff",p3:"color(display-p3 0.9676 0.5652 0.9999)"}},orange:{solid:"#e16919",fill:"#e16919",frame:{headingStroke:"#e68544",headingFill:"#fef9f6",stroke:"#e68544",fill:"#fef9f6",text:"#000000"},note:{fill:"#FAA475",text:"#000000"},semi:"#f8e2d4",pattern:"#f78438",highlight:{srgb:"#ffa500",p3:"color(display-p3 0.9988 0.6905 0.266)"}},red:{solid:"#e03131",fill:"#e03131",frame:{headingStroke:"#e55757",headingFill:"#fef7f7",stroke:"#e55757",fill:"#fef9f9",text:"#000000"},note:{fill:"#FC8282",text:"#000000"},semi:"#f4dadb",pattern:"#e55959",highlight:{srgb:"#ff636e",p3:"color(display-p3 0.9992 0.4376 0.45)"}},violet:{solid:"#ae3ec9",fill:"#ae3ec9",frame:{headingStroke:"#bc62d3",headingFill:"#fcf7fd",stroke:"#bc62d3",fill:"#fdf9fd",text:"#000000"},note:{fill:"#DB91FD",text:"#000000"},semi:"#ecdcf2",pattern:"#bd63d3",highlight:{srgb:"#c77cff",p3:"color(display-p3 0.7469 0.5089 0.9995)"}},yellow:{solid:"#f1ac4b",fill:"#f1ac4b",frame:{headingStroke:"#f3bb6c",headingFill:"#fefcf8",stroke:"#f3bb6c",fill:"#fffdfa",text:"#000000"},note:{fill:"#FED49A",text:"#000000"},semi:"#f9f0e6",pattern:"#fecb92",highlight:{srgb:"#fddd00",p3:"color(display-p3 0.972 0.8705 0.05)"}},white:{solid:"#FFFFFF",fill:"#FFFFFF",semi:"#f5f5f5",pattern:"#f9f9f9",frame:{headingStroke:"#7d7d7d",headingFill:"#ffffff",stroke:"#7d7d7d",fill:"#ffffff",text:"#000000"},note:{fill:"#FFFFFF",text:"#000000"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}},darkMode:{id:"dark",text:"hsl(210, 17%, 98%)",background:"hsl(240, 5%, 6.5%)",solid:"#010403",black:{solid:"#f2f2f2",fill:"#f2f2f2",frame:{headingStroke:"#5c5c5c",headingFill:"#252525",stroke:"#5c5c5c",fill:"#0c0c0c",text:"#f2f2f2"},note:{fill:"#2c2c2c",text:"#f2f2f2"},semi:"#2c3036",pattern:"#989898",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.6225 0.0312)"}},blue:{solid:"#4f72fc",fill:"#4f72fc",frame:{headingStroke:"#384994",headingFill:"#1C2036",stroke:"#384994",fill:"#11141f",text:"#f2f2f2"},note:{fill:"#2A3F98",text:"#f2f2f2"},semi:"#262d40",pattern:"#3a4b9e",highlight:{srgb:"#0079d2",p3:"color(display-p3 0.0032 0.4655 0.7991)"}},green:{solid:"#099268",fill:"#099268",frame:{headingStroke:"#10513C",headingFill:"#14241f",stroke:"#10513C",fill:"#0E1614",text:"#f2f2f2"},note:{fill:"#014429",text:"#f2f2f2"},semi:"#253231",pattern:"#366a53",highlight:{srgb:"#009774",p3:"color(display-p3 0.0085 0.582 0.4604)"}},grey:{solid:"#9398b0",fill:"#9398b0",frame:{headingStroke:"#42474D",headingFill:"#23262A",stroke:"#42474D",fill:"#151719",text:"#f2f2f2"},note:{fill:"#56595F",text:"#f2f2f2"},semi:"#33373c",pattern:"#7c8187",highlight:{srgb:"#9cb4cb",p3:"color(display-p3 0.6299 0.7012 0.7856)"}},"light-blue":{solid:"#4dabf7",fill:"#4dabf7",frame:{headingStroke:"#075797",headingFill:"#142839",stroke:"#075797",fill:"#0B1823",text:"#f2f2f2"},note:{fill:"#1F5495",text:"#f2f2f2"},semi:"#2a3642",pattern:"#4d7aa9",highlight:{srgb:"#00bdc8",p3:"color(display-p3 0.0023 0.7259 0.7735)"}},"light-green":{solid:"#40c057",fill:"#40c057",frame:{headingStroke:"#1C5427",headingFill:"#18251A",stroke:"#1C5427",fill:"#0F1911",text:"#f2f2f2"},note:{fill:"#21581D",text:"#f2f2f2"},semi:"#2a3830",pattern:"#4e874e",highlight:{srgb:"#00a000",p3:"color(display-p3 0.2711 0.6172 0.0195)"}},"light-red":{solid:"#ff8787",fill:"#ff8787",frame:{headingStroke:"#6f3232",headingFill:"#341818",stroke:"#6f3232",fill:"#181212",text:"#f2f2f2"},note:{fill:"#7a3333",text:"#f2f2f2"},semi:"#3c2b2b",pattern:"#a56767",highlight:{srgb:"#db005b",p3:"color(display-p3 0.7849 0.0585 0.3589)"}},"light-violet":{solid:"#e599f7",fill:"#e599f7",frame:{headingStroke:"#6c367a",headingFill:"#2D2230",stroke:"#6c367a",fill:"#1C151E",text:"#f2f2f2"},note:{fill:"#762F8E",text:"#f2f2f2"},semi:"#383442",pattern:"#9770a9",highlight:{srgb:"#c400c7",p3:"color(display-p3 0.7024 0.0403 0.753)"}},orange:{solid:"#f76707",fill:"#f76707",frame:{headingStroke:"#773a0e",headingFill:"#2f1d13",stroke:"#773a0e",fill:"#1c1512",text:"#f2f2f2"},note:{fill:"#7c3905",text:"#f2f2f2"},semi:"#3b2e27",pattern:"#9f552d",highlight:{srgb:"#d07a00",p3:"color(display-p3 0.7699 0.4937 0.0085)"}},red:{solid:"#e03131",fill:"#e03131",frame:{headingStroke:"#701e1e",headingFill:"#301616",stroke:"#701e1e",fill:"#1b1313",text:"#f2f2f2"},note:{fill:"#7e201f",text:"#f2f2f2"},semi:"#382726",pattern:"#8f3734",highlight:{srgb:"#de002c",p3:"color(display-p3 0.7978 0.0509 0.2035)"}},violet:{solid:"#ae3ec9",fill:"#ae3ec9",frame:{headingStroke:"#6d1583",headingFill:"#27152e",stroke:"#6d1583",fill:"#1b0f21",text:"#f2f2f2"},note:{fill:"#5f1c70",text:"#f2f2f2"},semi:"#342938",pattern:"#763a8b",highlight:{srgb:"#9e00ee",p3:"color(display-p3 0.5651 0.0079 0.8986)"}},yellow:{solid:"#ffc034",fill:"#ffc034",frame:{headingStroke:"#684e12",headingFill:"#2a2113",stroke:"#684e12",fill:"#1e1911",text:"#f2f2f2"},note:{fill:"#8a5e1c",text:"#f2f2f2"},semi:"#3b352b",pattern:"#fecb92",highlight:{srgb:"#d2b700",p3:"color(display-p3 0.8078 0.7225 0.0312)"}},white:{solid:"#f3f3f3",fill:"#f3f3f3",semi:"#f5f5f5",pattern:"#f9f9f9",frame:{headingStroke:"#ffffff",headingFill:"#ffffff",stroke:"#ffffff",fill:"#ffffff",text:"#000000"},note:{fill:"#eaeaea",text:"#1d1d1d"},highlight:{srgb:"#ffffff",p3:"color(display-p3 1 1 1)"}}}};function zd(t){return t.isDarkMode?cI.darkMode:cI.lightMode}const Us=Ti.defineEnum("tldraw:color",{defaultValue:"black",values:Zle}),SB=Ti.defineEnum("tldraw:labelColor",{defaultValue:"black",values:Zle}),Qp=Ti.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),Zp=Ti.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern","fill"]}),Rd=Ti.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),Jle={draw:"'tldraw_draw', sans-serif",sans:"'tldraw_sans', sans-serif",serif:"'tldraw_serif', serif",mono:"'tldraw_mono', monospace"},Eu=Ti.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),AUe=["arc","elbow"],px=Ti.defineEnum("tldraw:arrowKind",{defaultValue:"arc",values:AUe}),ece=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],uI=Ti.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:ece}),dI=Ti.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:ece}),tce={kind:px,labelColor:SB,color:Us,fill:Zp,dash:Qp,size:Eu,arrowheadStart:uI,arrowheadEnd:dI,font:Rd,start:Yp,end:Yp,bend:pn,text:On,labelPosition:pn,scale:qo,elbowMidPoint:pn},sp=Wl("arrow",{AddLabelColor:1,AddIsPrecise:2,AddLabelPosition:3,ExtractBindings:4,AddScale:5,AddElbow:6});function db(t){return Qle("shape","arrow",t)}const nce=Gm({sequenceId:"com.tldraw.shape.arrow",retroactive:!1,sequence:[db({id:sp.AddLabelColor,up:t=>{t.labelColor="black"},down:"retired"}),db({id:sp.AddIsPrecise,up:({start:t,end:e})=>{t.type==="binding"&&(t.isPrecise=!(t.normalizedAnchor.x===.5&&t.normalizedAnchor.y===.5)),e.type==="binding"&&(e.isPrecise=!(e.normalizedAnchor.x===.5&&e.normalizedAnchor.y===.5))},down:({start:t,end:e})=>{t.type==="binding"&&(t.isPrecise||(t.normalizedAnchor={x:.5,y:.5}),delete t.isPrecise),e.type==="binding"&&(e.isPrecise||(e.normalizedAnchor={x:.5,y:.5}),delete e.isPrecise)}}),db({id:sp.AddLabelPosition,up:t=>{t.labelPosition=.5},down:t=>{delete t.labelPosition}}),{id:sp.ExtractBindings,scope:"store",up:t=>{const e=Object.values(t).filter(n=>n.typeName==="shape"&&n.type==="arrow");for(const n of e){const{start:r,end:o}=n.props;if(r.type==="binding"){const i=Ip(),s={typeName:"binding",id:i,type:"arrow",fromId:n.id,toId:r.boundShapeId,meta:{},props:{terminal:"start",normalizedAnchor:r.normalizedAnchor,isExact:r.isExact,isPrecise:r.isPrecise}};t[i]=s,n.props.start={x:0,y:0}}else delete n.props.start.type;if(o.type==="binding"){const i=Ip(),s={typeName:"binding",id:i,type:"arrow",fromId:n.id,toId:o.boundShapeId,meta:{},props:{terminal:"end",normalizedAnchor:o.normalizedAnchor,isExact:o.isExact,isPrecise:o.isPrecise}};t[i]=s,n.props.end={x:0,y:0}}else delete n.props.end.type}}},db({id:sp.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}),db({id:sp.AddElbow,up:t=>{t.kind="arc",t.elbowMidPoint=.5},down:t=>{delete t.kind,delete t.elbowMidPoint}})]}),$Ue=ny("center","edge-point","edge","none"),rce={terminal:ny("start","end"),normalizedAnchor:Yp,isExact:Xn,isPrecise:Xn,snap:$Ue},DUe=TUe("arrow",{AddSnap:1}),oce={sequence:[{dependsOn:[sp.ExtractBindings]},{id:DUe.AddSnap,up:t=>{t.snap="none"},down:t=>{delete t.snap}}]},jUe=Lu("camera",Kn({typeName:bs("camera"),id:Va("camera"),x:pn,y:pn,z:pn,meta:Hi})),LUe=Ca("com.tldraw.camera",{AddMeta:1}),NUe=nl({sequenceId:"com.tldraw.camera",recordType:"camera",sequence:[{id:LUe.AddMeta,up:t=>{t.meta={}}}]}),uu=ju("camera",{validator:jUe,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,z:1,meta:{}})),FUe=new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"]),ice=HM(FUe),zUe=Kn({type:ice,rotation:pn}),BUe=new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"]),HUe=HM(BUe),UUe=new Set(["starting","paused","active","stopping"]),sce=Kn({id:On,points:yi(Yp),size:aI,color:HUe,opacity:pn,state:HM(UUe),delay:pn,shrink:pn,taper:Xn}),gx=Va("page"),WUe=Lu("page",Kn({typeName:bs("page"),id:gx,name:On,index:yB,meta:Hi})),VUe=Ca("com.tldraw.page",{AddMeta:1}),qUe=nl({sequenceId:"com.tldraw.page",recordType:"page",sequence:[{id:VUe.AddMeta,up:t=>{t.meta={}}}]}),Bs=ju("page",{validator:WUe,scope:"document"}).withDefaultProperties(()=>({meta:{}}));function rs(t){return Bs.isId(t)}const KUe={id:!1,typeName:!1,currentPageId:!1,opacityForNextShape:!1,stylesForNextShape:!1,followingUserId:!1,highlightedUserIds:!1,brush:!1,cursor:!1,scribbles:!1,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!1,chatMessage:!1,isChatting:!1,isPenMode:!1,isGridMode:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!1,openMenus:!1,isChangingStyle:!1,isReadonly:!0,meta:!1,duplicateProps:!1};function ace(t){return t?vS(t,e=>KUe[e]):null}Va("instance");function GUe(t){const e={};for(const[r,o]of t)e[r]=Gle(o);const n=Lu("instance",Kn({typeName:bs("instance"),id:Va("instance"),currentPageId:gx,followingUserId:On.nullable(),brush:bS.nullable(),opacityForNextShape:Xle,stylesForNextShape:Kn(e),cursor:zUe,scribbles:yi(sce),isFocusMode:Xn,isDebugMode:Xn,isToolLocked:Xn,exportBackground:Xn,screenBounds:bS,insets:yi(Xn),zoomBrush:bS.nullable(),isPenMode:Xn,isGridMode:Xn,chatMessage:On,isChatting:Xn,highlightedUserIds:yi(On),isFocused:Xn,devicePixelRatio:pn,isCoarsePointer:Xn,isHoveringCanvas:Xn.nullable(),openMenus:yi(On),isChangingStyle:Xn,isReadonly:Xn,meta:Hi,duplicateProps:Kn({shapeIds:yi(Va("shape")),offset:Kn({x:pn,y:pn})}).nullable()}));return ju("instance",{validator:n,scope:"session",ephemeralKeys:{currentPageId:!1,meta:!1,followingUserId:!0,opacityForNextShape:!0,stylesForNextShape:!0,brush:!0,cursor:!0,scribbles:!0,isFocusMode:!0,isDebugMode:!0,isToolLocked:!0,exportBackground:!0,screenBounds:!0,insets:!0,zoomBrush:!0,isPenMode:!0,isGridMode:!0,chatMessage:!0,isChatting:!0,highlightedUserIds:!0,isFocused:!0,devicePixelRatio:!0,isCoarsePointer:!0,isHoveringCanvas:!0,openMenus:!0,isChangingStyle:!0,isReadonly:!0,duplicateProps:!0}}).withDefaultProperties(()=>({followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribbles:[],cursor:{type:"default",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},insets:[!1,!1,!1,!1],zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[],isFocused:!1,devicePixelRatio:typeof window>"u"?1:window.devicePixelRatio,isCoarsePointer:!1,isHoveringCanvas:null,openMenus:[],isChangingStyle:!1,isReadonly:!1,meta:{},duplicateProps:null}))}const Jr=Ca("com.tldraw.instance",{AddTransparentExportBgs:1,RemoveDialog:2,AddToolLockMode:3,RemoveExtraPropsForNextShape:4,AddLabelColor:5,AddFollowingUserId:6,RemoveAlignJustify:7,AddZoom:8,AddVerticalAlign:9,AddScribbleDelay:10,RemoveUserId:11,AddIsPenModeAndIsGridMode:12,HoistOpacity:13,AddChat:14,AddHighlightedUserIds:15,ReplacePropsForNextShapeWithStylesForNextShape:16,AddMeta:17,RemoveCursorColor:18,AddLonelyProperties:19,ReadOnlyReadonly:20,AddHoveringCanvas:21,AddScribbles:22,AddInset:23,AddDuplicateProps:24,RemoveCanMoveCamera:25}),XUe=nl({sequenceId:"com.tldraw.instance",recordType:"instance",sequence:[{id:Jr.AddTransparentExportBgs,up:t=>({...t,exportBackground:!0})},{id:Jr.RemoveDialog,up:({dialog:t,...e})=>e},{id:Jr.AddToolLockMode,up:t=>({...t,isToolLocked:!1})},{id:Jr.RemoveExtraPropsForNextShape,up:({propsForNextShape:t,...e})=>({...e,propsForNextShape:Object.fromEntries(Object.entries(t).filter(([n])=>["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(n)))})},{id:Jr.AddLabelColor,up:({propsForNextShape:t,...e})=>({...e,propsForNextShape:{...t,labelColor:"black"}})},{id:Jr.AddFollowingUserId,up:t=>({...t,followingUserId:null})},{id:Jr.RemoveAlignJustify,up:t=>{let e=t.propsForNextShape.align;return e==="justify"&&(e="start"),{...t,propsForNextShape:{...t.propsForNextShape,align:e}}}},{id:Jr.AddZoom,up:t=>({...t,zoomBrush:null})},{id:Jr.AddVerticalAlign,up:t=>({...t,propsForNextShape:{...t.propsForNextShape,verticalAlign:"middle"}})},{id:Jr.AddScribbleDelay,up:t=>t.scribble!==null?{...t,scribble:{...t.scribble,delay:0}}:{...t}},{id:Jr.RemoveUserId,up:({userId:t,...e})=>e},{id:Jr.AddIsPenModeAndIsGridMode,up:t=>({...t,isPenMode:!1,isGridMode:!1})},{id:Jr.HoistOpacity,up:({propsForNextShape:{opacity:t,...e},...n})=>({...n,opacityForNextShape:Number(t??"1"),propsForNextShape:e})},{id:Jr.AddChat,up:t=>({...t,chatMessage:"",isChatting:!1})},{id:Jr.AddHighlightedUserIds,up:t=>({...t,highlightedUserIds:[]})},{id:Jr.ReplacePropsForNextShapeWithStylesForNextShape,up:({propsForNextShape:t,...e})=>({...e,stylesForNextShape:{}})},{id:Jr.AddMeta,up:t=>({...t,meta:{}})},{id:Jr.RemoveCursorColor,up:t=>{const{color:e,...n}=t.cursor;return{...t,cursor:n}}},{id:Jr.AddLonelyProperties,up:t=>({...t,canMoveCamera:!0,isFocused:!1,devicePixelRatio:1,isCoarsePointer:!1,openMenus:[],isChangingStyle:!1,isReadOnly:!1})},{id:Jr.ReadOnlyReadonly,up:({isReadOnly:t,...e})=>({...e,isReadonly:t})},{id:Jr.AddHoveringCanvas,up:t=>({...t,isHoveringCanvas:null})},{id:Jr.AddScribbles,up:({scribble:t,...e})=>({...e,scribbles:[]})},{id:Jr.AddInset,up:t=>({...t,insets:[!1,!1,!1,!1]}),down:({insets:t,...e})=>({...e})},{id:Jr.AddDuplicateProps,up:t=>({...t,duplicateProps:null}),down:({duplicateProps:t,...e})=>({...e})},{id:Jr.RemoveCanMoveCamera,up:({canMoveCamera:t,...e})=>({...e}),down:t=>({...t,canMoveCamera:!0})}]}),js="instance:instance",YUe=Lu("instance_page_state",Kn({typeName:bs("instance_page_state"),id:Va("instance_page_state"),pageId:gx,selectedShapeIds:yi(xl),hintingShapeIds:yi(xl),erasingShapeIds:yi(xl),hoveredShapeId:xl.nullable(),editingShapeId:xl.nullable(),croppingShapeId:xl.nullable(),focusedGroupId:xl.nullable(),meta:Hi})),fb=Ca("com.tldraw.instance_page_state",{AddCroppingId:1,RemoveInstanceIdAndCameraId:2,AddMeta:3,RenameProperties:4,RenamePropertiesAgain:5}),QUe=nl({sequenceId:"com.tldraw.instance_page_state",recordType:"instance_page_state",sequence:[{id:fb.AddCroppingId,up(t){t.croppingShapeId=null}},{id:fb.RemoveInstanceIdAndCameraId,up(t){delete t.instanceId,delete t.cameraId}},{id:fb.AddMeta,up:t=>{t.meta={}}},{id:fb.RenameProperties,up:t=>{},down:t=>{}},{id:fb.RenamePropertiesAgain,up:t=>{t.selectedShapeIds=t.selectedIds,delete t.selectedIds,t.hintingShapeIds=t.hintingIds,delete t.hintingIds,t.erasingShapeIds=t.erasingIds,delete t.erasingIds,t.hoveredShapeId=t.hoveredId,delete t.hoveredId,t.editingShapeId=t.editingId,delete t.editingId,t.croppingShapeId=t.croppingShapeId??t.croppingId??null,delete t.croppingId,t.focusedGroupId=t.focusLayerId,delete t.focusLayerId},down:t=>{t.selectedIds=t.selectedShapeIds,delete t.selectedShapeIds,t.hintingIds=t.hintingShapeIds,delete t.hintingShapeIds,t.erasingIds=t.erasingShapeIds,delete t.erasingShapeIds,t.hoveredId=t.hoveredShapeId,delete t.hoveredShapeId,t.editingId=t.editingShapeId,delete t.editingShapeId,t.croppingId=t.croppingShapeId,delete t.croppingShapeId,t.focusLayerId=t.focusedGroupId,delete t.focusedGroupId}}]}),mc=ju("instance_page_state",{validator:YUe,scope:"session",ephemeralKeys:{pageId:!1,selectedShapeIds:!1,editingShapeId:!1,croppingShapeId:!1,meta:!1,hintingShapeIds:!0,erasingShapeIds:!0,hoveredShapeId:!0,focusedGroupId:!0}}).withDefaultProperties(()=>({editingShapeId:null,croppingShapeId:null,selectedShapeIds:[],hoveredShapeId:null,erasingShapeIds:[],hintingShapeIds:[],focusedGroupId:null,meta:{}})),ZUe=Lu("pointer",Kn({typeName:bs("pointer"),id:Va("pointer"),x:pn,y:pn,lastActivityTimestamp:pn,meta:Hi})),JUe=Ca("com.tldraw.pointer",{AddMeta:1}),eWe=nl({sequenceId:"com.tldraw.pointer",recordType:"pointer",sequence:[{id:JUe.AddMeta,up:t=>{t.meta={}}}]}),xB=ju("pointer",{validator:ZUe,scope:"session"}).withDefaultProperties(()=>({x:0,y:0,lastActivityTimestamp:0,meta:{}})),fI=xB.createId("pointer"),tWe=Lu("instance_presence",Kn({typeName:bs("instance_presence"),id:Va("instance_presence"),userId:On,userName:On,lastActivityTimestamp:pn.nullable(),followingUserId:On.nullable(),cursor:Kn({x:pn,y:pn,type:ice,rotation:pn}).nullable(),color:On,camera:Kn({x:pn,y:pn,z:pn}).nullable(),screenBounds:bS.nullable(),selectedShapeIds:yi(Va("shape")),currentPageId:Va("page"),brush:bS.nullable(),scribbles:yi(sce),chatMessage:On,meta:Hi})),cm=Ca("com.tldraw.instance_presence",{AddScribbleDelay:1,RemoveInstanceId:2,AddChatMessage:3,AddMeta:4,RenameSelectedShapeIds:5,NullableCameraCursor:6}),nWe=nl({sequenceId:"com.tldraw.instance_presence",recordType:"instance_presence",sequence:[{id:cm.AddScribbleDelay,up:t=>{t.scribble!==null&&(t.scribble.delay=0)}},{id:cm.RemoveInstanceId,up:t=>{delete t.instanceId}},{id:cm.AddChatMessage,up:t=>{t.chatMessage=""}},{id:cm.AddMeta,up:t=>{t.meta={}}},{id:cm.RenameSelectedShapeIds,up:t=>{}},{id:cm.NullableCameraCursor,up:t=>{},down:t=>{t.camera===null&&(t.camera={x:0,y:0,z:1}),t.lastActivityTimestamp===null&&(t.lastActivityTimestamp=0),t.cursor===null&&(t.cursor={type:"default",x:0,y:0,rotation:0}),t.screenBounds===null&&(t.screenBounds={x:0,y:0,w:1,h:1})}}]}),rWe=ju("instance_presence",{validator:tWe,scope:"presence"}).withDefaultProperties(()=>({lastActivityTimestamp:null,followingUserId:null,color:"#FF0000",camera:null,cursor:null,screenBounds:null,selectedShapeIds:[],brush:null,scribbles:[],chatMessage:"",meta:{}})),oWe=Lu("document",Kn({typeName:bs("document"),id:bs("document:document"),gridSize:pn,name:On,meta:Hi})),gQ=Ca("com.tldraw.document",{AddName:1,AddMeta:2}),iWe=nl({sequenceId:"com.tldraw.document",recordType:"document",sequence:[{id:gQ.AddName,up:t=>{t.name=""},down:t=>{delete t.name}},{id:gQ.AddMeta,up:t=>{t.meta={}}}]}),wB=ju("document",{validator:oWe,scope:"document"}).withDefaultProperties(()=>({gridSize:10,name:"",meta:{}})),uF=wB.createId("document");function sWe(t,e){return t.index<e.index?-1:t.index>e.index?1:0}function mQ(t){t.typeName==="asset"&&("src"in t&&(t.src="<redacted>"),"src"in t.props&&(t.props.src="<redacted>"))}function aWe({error:t,phase:e,record:n,recordBefore:r}){throw L5(t,{tags:{origin:"store.validateRecord",storePhase:e,isExistingValidationIssue:e==="initialize"},extras:{recordBefore:r?mQ(to(r)):void 0,recordAfter:mQ(to(n))}}),t}function lWe(){return[Bs.create({id:"page:page",name:"Page 1",index:"a1",meta:{}})]}function cWe(t){const e=t.query.ids("page"),n=t.query.records("instance_page_state"),r=()=>{if(!t.has(uF))return t.put([wB.create({id:uF,name:t.props.defaultName})]),r();if(!t.has(fI))return t.put([xB.create({id:fI})]),r();const o=e.get();if(o.size===0)return t.put(lWe()),r();const i=()=>[...o].map(u=>t.get(u)).sort(sWe)[0].id,s=t.get(js);if(s){if(!o.has(s.currentPageId))return t.put([{...s,currentPageId:i()}]),r()}else return t.put([t.schema.types.instance.create({id:js,currentPageId:i(),exportBackground:!0})]),r();const a=new Set,l=new Set;for(const u of o){const d=mc.createId(u);t.get(d)||a.add(d);const h=uu.createId(u);t.has(h)||l.add(h)}a.size>0&&t.put([...a].map(u=>mc.create({id:u,pageId:mc.parseId(u)}))),l.size>0&&t.put([...l].map(u=>uu.create({id:u})));const c=n.get();for(const u of c){if(!o.has(u.pageId)){t.remove([u.id]);continue}if(u.croppingShapeId&&!t.has(u.croppingShapeId))return t.put([{...u,croppingShapeId:null}]),r();if(u.focusedGroupId&&!t.has(u.focusedGroupId))return t.put([{...u,focusedGroupId:null}]),r();if(u.hoveredShapeId&&!t.has(u.hoveredShapeId))return t.put([{...u,hoveredShapeId:null}]),r();const d=u.selectedShapeIds.filter(g=>t.has(g));if(d.length!==u.selectedShapeIds.length)return t.put([{...u,selectedShapeIds:d}]),r();const f=u.hintingShapeIds.filter(g=>t.has(g));if(f.length!==u.hintingShapeIds.length)return t.put([{...u,hintingShapeIds:f}]),r();const h=u.erasingShapeIds.filter(g=>t.has(g));if(h.length!==u.erasingShapeIds.length)return t.put([{...u,erasingShapeIds:h}]),r()}};return r}const uWe=bB("bookmark",Kn({title:On,description:On,image:On,favicon:On,src:Xp.nullable()})),vQ=Ca("com.tldraw.asset.bookmark",{MakeUrlsValid:1,AddFavicon:2}),dWe=nl({sequenceId:"com.tldraw.asset.bookmark",recordType:"asset",filter:t=>t.type==="bookmark",sequence:[{id:vQ.MakeUrlsValid,up:t=>{Xp.isValid(t.props.src)||(t.props.src="")},down:t=>{}},{id:vQ.AddFavicon,up:t=>{Xp.isValid(t.props.favicon)||(t.props.favicon="")},down:t=>{delete t.props.favicon}}]}),fWe=bB("image",Kn({w:pn,h:pn,name:On,isAnimated:Xn,mimeType:On.nullable(),src:Xp.nullable(),fileSize:qo.optional()})),hb=Ca("com.tldraw.asset.image",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),hWe=nl({sequenceId:"com.tldraw.asset.image",recordType:"asset",filter:t=>t.type==="image",sequence:[{id:hb.AddIsAnimated,up:t=>{t.props.isAnimated=!1},down:t=>{delete t.props.isAnimated}},{id:hb.RenameWidthHeight,up:t=>{t.props.w=t.props.width,t.props.h=t.props.height,delete t.props.width,delete t.props.height},down:t=>{t.props.width=t.props.w,t.props.height=t.props.h,delete t.props.w,delete t.props.h}},{id:hb.MakeUrlsValid,up:t=>{Xp.isValid(t.props.src)||(t.props.src="")},down:t=>{}},{id:hb.AddFileSize,up:t=>{t.props.fileSize=-1},down:t=>{delete t.props.fileSize}},{id:hb.MakeFileSizeOptional,up:t=>{t.props.fileSize===-1&&(t.props.fileSize=void 0)},down:t=>{t.props.fileSize===void 0&&(t.props.fileSize=-1)}}]}),pWe=bB("video",Kn({w:pn,h:pn,name:On,isAnimated:Xn,mimeType:On.nullable(),src:Xp.nullable(),fileSize:pn.optional()})),pb=Ca("com.tldraw.asset.video",{AddIsAnimated:1,RenameWidthHeight:2,MakeUrlsValid:3,AddFileSize:4,MakeFileSizeOptional:5}),gWe=nl({sequenceId:"com.tldraw.asset.video",recordType:"asset",filter:t=>t.type==="video",sequence:[{id:pb.AddIsAnimated,up:t=>{t.props.isAnimated=!1},down:t=>{delete t.props.isAnimated}},{id:pb.RenameWidthHeight,up:t=>{t.props.w=t.props.width,t.props.h=t.props.height,delete t.props.width,delete t.props.height},down:t=>{t.props.width=t.props.w,t.props.height=t.props.h,delete t.props.w,delete t.props.h}},{id:pb.MakeUrlsValid,up:t=>{Xp.isValid(t.props.src)||(t.props.src="")},down:t=>{}},{id:pb.AddFileSize,up:t=>{t.props.fileSize=-1},down:t=>{delete t.props.fileSize}},{id:pb.MakeFileSizeOptional,up:t=>{t.props.fileSize===-1&&(t.props.fileSize=void 0)},down:t=>{t.props.fileSize===void 0&&(t.props.fileSize=-1)}}]}),mWe=Lu("asset",mB("type",{image:fWe,video:pWe,bookmark:uWe})),vWe=Ca("com.tldraw.asset",{AddMeta:1}),yWe=nl({sequenceId:"com.tldraw.asset",recordType:"asset",sequence:[{id:vWe.AddMeta,up:t=>{t.meta={}}}]}),nh=ju("asset",{validator:mWe,scope:"document"}).withDefaultProperties(()=>({meta:{}})),lce={w:qo,h:qo,assetId:UM.nullable(),url:Ja},yQ=Wl("bookmark",{NullAssetId:1,MakeUrlsValid:2}),cce={sequence:[{id:yQ.NullAssetId,up:t=>{t.assetId===void 0&&(t.assetId=null)},down:"retired"},{id:yQ.MakeUrlsValid,up:t=>{Ja.isValid(t.url)||(t.url="")},down:t=>{}}]},uce=Kn({type:ny("free","straight"),points:yi(Yp)}),dce={color:Us,fill:Zp,dash:Qp,size:Eu,segments:yi(uce),isComplete:Xn,isClosed:Xn,isPen:Xn,scale:qo},bQ=Wl("draw",{AddInPen:1,AddScale:2}),fce={sequence:[{id:bQ.AddInPen,up:t=>{const{points:e}=t.segments[0];if(e.length===0){t.isPen=!1;return}let n=!(e[0].z===0||e[0].z===.5);e[1]&&(n=n&&!(e[1].z===0||e[1].z===.5)),t.isPen=n},down:"retired"},{id:bQ.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}]},bWe=/(^\/r\/[^/]+\/?$)/,SWe=[{hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(bWe))return t}},{hostnames:["figma.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/?$/)){const n=e.searchParams.get("url");if(n)return n}}},{hostnames:["google.*"],fromEmbedUrl:t=>{const e=yn(t);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom"),[o,i]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${o},${i},${r}z`}}},{hostnames:["val.town"],fromEmbedUrl:t=>{const e=yn(t),n=e&&e.pathname.match(/\/embed\/(.+)\/?/);if(n)return`https://www.val.town/v/${n[1]}`}},{hostnames:["codesandbox.io"],fromEmbedUrl:t=>{const e=yn(t),n=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return`https://codesandbox.io/s/${n[1]}`}},{hostnames:["codepen.io"],fromEmbedUrl:t=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o,i]=n;return`https://codepen.io/${o}/pen/${i}`}}},{hostnames:["scratch.mit.edu"],fromEmbedUrl:t=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o]=n;return`https://scratch.mit.edu/projects/${o}`}}},{hostnames:["*.youtube.com","youtube.com","youtu.be"],fromEmbedUrl:t=>{const e=yn(t);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r)return`https://www.youtube.com/watch?v=${r[1]}`}}},{hostnames:["calendar.google.*"],fromEmbedUrl:t=>{const e=yn(t),n=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&n){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("cid",n),e.href}}},{hostnames:["docs.google.*"],fromEmbedUrl:t=>{const e=yn(t);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const n=Array.from(e.searchParams.keys());for(const r of n)e.searchParams.delete(r);return e.href}}},{hostnames:["gist.github.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/\/([^/]+)\/([^/]+)/))return t.split("/").pop()?t:void 0}},{hostnames:["replit.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{hostnames:["felt.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{hostnames:["open.spotify.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{hostnames:["vimeo.com","player.vimeo.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.hostname==="player.vimeo.com"){const n=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{hostnames:["excalidraw.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.hash.match(/#room=/))return t}},{hostnames:["observablehq.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}},{hostnames:["desmos.com"],fromEmbedUrl:t=>{const e=yn(t);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search==="?embed"&&e.hash==="")return t.replace("?embed","")}}],hce={w:qo,h:qo,url:On},tE=Wl("embed",{GenOriginalUrlInEmbed:1,RemoveDoesResize:2,RemoveTmpOldUrl:3,RemovePermissionOverrides:4}),pce={sequence:[{id:tE.GenOriginalUrlInEmbed,up:t=>{try{const e=t.url,n=new URL(e).host.replace("www.","");let r;for(const o of SWe)if(o.hostnames.includes(n))try{r=o.fromEmbedUrl(e)}catch(i){console.warn(i)}t.tmpOldUrl=t.url,t.url=r??""}catch{t.url="",t.tmpOldUrl=t.url}},down:"retired"},{id:tE.RemoveDoesResize,up:t=>{delete t.doesResize},down:"retired"},{id:tE.RemoveTmpOldUrl,up:t=>{delete t.tmpOldUrl},down:"retired"},{id:tE.RemovePermissionOverrides,up:t=>{delete t.overridePermissions},down:"retired"}]},gce={w:qo,h:qo,name:On,color:ny(...Us.values)},xWe=Wl("frame",{AddColorProp:1}),mce={sequence:[{id:xWe.AddColorProp,up:t=>{t.color="black"},down:t=>{delete t.color}}]},CB=Kn({type:On,content:yi(vUe)});function Ll(t){return{type:"doc",content:t.split(`
`).map(r=>r?{type:"paragraph",content:[{type:"text",text:r}]}:{type:"paragraph"})}}const hI=Ti.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),pI=Ti.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),vc=Ti.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["cloud","rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box","heart"]}),vce={geo:vc,labelColor:SB,color:Us,fill:Zp,dash:Qp,size:Eu,font:Rd,align:hI,verticalAlign:pI,url:Ja,w:qo,h:qo,growY:aI,richText:CB,scale:qo},Zc=Wl("geo",{AddUrlProp:1,AddLabelColor:2,RemoveJustify:3,AddCheckBox:4,AddVerticalAlign:5,MigrateLegacyAlign:6,AddCloud:7,MakeUrlsValid:8,AddScale:9,AddRichText:10}),yce={sequence:[{id:Zc.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:Zc.AddLabelColor,up:t=>{t.labelColor="black"},down:"retired"},{id:Zc.RemoveJustify,up:t=>{t.align==="justify"&&(t.align="start")},down:"retired"},{id:Zc.AddCheckBox,up:t=>{},down:"retired"},{id:Zc.AddVerticalAlign,up:t=>{t.verticalAlign="middle"},down:"retired"},{id:Zc.MigrateLegacyAlign,up:t=>{let e;switch(t.align){case"start":e="start-legacy";break;case"end":e="end-legacy";break;default:e="middle-legacy";break}t.align=e},down:"retired"},{id:Zc.AddCloud,up:t=>{},down:"retired"},{id:Zc.MakeUrlsValid,up:t=>{Ja.isValid(t.url)||(t.url="")},down:t=>{}},{id:Zc.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}},{id:Zc.AddRichText,up:t=>{t.richText=Ll(t.text),delete t.text}}]},bce={},Sce={sequence:[]},xce={color:Us,size:Eu,segments:yi(uce),isComplete:Xn,isPen:Xn,scale:qo},wWe=Wl("highlight",{AddScale:1}),wce={sequence:[{id:wWe.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}]},CWe=Kn({topLeft:Yp,bottomRight:Yp}),Cce={w:qo,h:qo,playing:Xn,url:Ja,assetId:UM.nullable(),crop:CWe.nullable(),flipX:Xn,flipY:Xn,altText:On},gb=Wl("image",{AddUrlProp:1,AddCropProp:2,MakeUrlsValid:3,AddFlipProps:4,AddAltText:5}),Ece={sequence:[{id:gb.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:gb.AddCropProp,up:t=>{t.crop=null},down:t=>{delete t.crop}},{id:gb.MakeUrlsValid,up:t=>{Ja.isValid(t.url)||(t.url="")},down:t=>{}},{id:gb.AddFlipProps,up:t=>{t.flipX=!1,t.flipY=!1},down:t=>{delete t.flipX,delete t.flipY}},{id:gb.AddAltText,up:t=>{t.altText=""},down:t=>{delete t.altText}}]},gI=Ti.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),EWe=Kn({id:On,index:yB,x:pn,y:pn}),Pce={color:Us,dash:Qp,size:Eu,spline:gI,points:lI(On,EWe),scale:qo},mb=Wl("line",{AddSnapHandles:1,RemoveExtraHandleProps:2,HandlesToPoints:3,PointIndexIds:4,AddScale:5}),_ce={sequence:[{id:mb.AddSnapHandles,up:t=>{for(const e of Object.values(t.handles))e.canSnap=!0},down:"retired"},{id:mb.RemoveExtraHandleProps,up:t=>{t.handles=jae(Object.values(t.handles).map(e=>[e.index,{x:e.x,y:e.y}]))},down:t=>{const e=Object.entries(t.handles).map(([n,r])=>({index:n,...r})).sort(Ni);t.handles=Object.fromEntries(e.map((n,r)=>{const o=r===0?"start":r===e.length-1?"end":`handle:${n.index}`;return[o,{id:o,type:"vertex",canBind:!1,canSnap:!0,index:n.index,x:n.x,y:n.y}]}))}},{id:mb.HandlesToPoints,up:t=>{const e=Object.entries(t.handles).map(([n,{x:r,y:o}])=>({x:r,y:o,index:n})).sort(Ni);t.points=e.map(({x:n,y:r})=>({x:n,y:r})),delete t.handles},down:t=>{const e=hx(t.points.length);t.handles=Object.fromEntries(t.points.map((n,r)=>[e[r],{x:n.x,y:n.y}])),delete t.points}},{id:mb.PointIndexIds,up:t=>{const e=hx(t.points.length);t.points=Object.fromEntries(t.points.map((n,r)=>{const o=e[r];return[o,{id:o,index:o,x:n.x,y:n.y}]}))},down:t=>{const e=Object.values(t.points).sort(Ni);t.points=e.map(({x:n,y:r})=>({x:n,y:r}))}},{id:mb.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}}]},Ice={color:Us,labelColor:SB,size:Eu,font:Rd,fontSizeAdjustment:aI,align:hI,verticalAlign:pI,growY:aI,url:Ja,richText:CB,scale:qo},ed=Wl("note",{AddUrlProp:1,RemoveJustify:2,MigrateLegacyAlign:3,AddVerticalAlign:4,MakeUrlsValid:5,AddFontSizeAdjustment:6,AddScale:7,AddLabelColor:8,AddRichText:9}),Tce={sequence:[{id:ed.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:ed.RemoveJustify,up:t=>{t.align==="justify"&&(t.align="start")},down:"retired"},{id:ed.MigrateLegacyAlign,up:t=>{switch(t.align){case"start":t.align="start-legacy";return;case"end":t.align="end-legacy";return;default:t.align="middle-legacy";return}},down:"retired"},{id:ed.AddVerticalAlign,up:t=>{t.verticalAlign="middle"},down:"retired"},{id:ed.MakeUrlsValid,up:t=>{Ja.isValid(t.url)||(t.url="")},down:t=>{}},{id:ed.AddFontSizeAdjustment,up:t=>{t.fontSizeAdjustment=0},down:t=>{delete t.fontSizeAdjustment}},{id:ed.AddScale,up:t=>{t.scale=1},down:t=>{delete t.scale}},{id:ed.AddLabelColor,up:t=>{t.labelColor="black"},down:t=>{delete t.labelColor}},{id:ed.AddRichText,up:t=>{t.richText=Ll(t.text),delete t.text}}]},dF=Ti.defineEnum("tldraw:textAlign",{defaultValue:"start",values:["start","middle","end"]}),Mce={color:Us,size:Eu,font:Rd,textAlign:dF,w:qo,richText:CB,scale:qo,autoSize:Xn},UD=Wl("text",{RemoveJustify:1,AddTextAlign:2,AddRichText:3}),Oce={sequence:[{id:UD.RemoveJustify,up:t=>{t.align==="justify"&&(t.align="start")},down:"retired"},{id:UD.AddTextAlign,up:t=>{t.textAlign=t.align,delete t.align},down:t=>{t.align=t.textAlign,delete t.textAlign}},{id:UD.AddRichText,up:t=>{t.richText=Ll(t.text),delete t.text}}]},Rce={w:qo,h:qo,time:pn,playing:Xn,url:Ja,assetId:UM.nullable(),altText:On},WD=Wl("video",{AddUrlProp:1,MakeUrlsValid:2,AddAltText:3}),kce={sequence:[{id:WD.AddUrlProp,up:t=>{t.url=""},down:"retired"},{id:WD.MakeUrlsValid,up:t=>{Ja.isValid(t.url)||(t.url="")},down:t=>{}},{id:WD.AddAltText,up:t=>{t.altText=""},down:t=>{delete t.altText}}]},nE=Ca("com.tldraw.store",{RemoveCodeAndIconShapeTypes:1,AddInstancePresenceType:2,RemoveTLUserAndPresenceAndAddPointer:3,RemoveUserDocument:4}),PWe=Gm({sequenceId:"com.tldraw.store",retroactive:!1,sequence:[{id:nE.RemoveCodeAndIconShapeTypes,scope:"store",up:t=>{for(const[e,n]of zs(t))n.typeName==="shape"&&(n.type==="icon"||n.type==="code")&&delete t[e]}},{id:nE.AddInstancePresenceType,scope:"store",up(t){}},{id:nE.RemoveTLUserAndPresenceAndAddPointer,scope:"store",up:t=>{for(const[e,n]of zs(t))n.typeName.match(/^(user|user_presence)$/)&&delete t[e]}},{id:nE.RemoveUserDocument,scope:"store",up:t=>{for(const[e,n]of zs(t))n.typeName.match("user_document")&&delete t[e]}}]}),_We={arrow:{migrations:nce,props:tce},bookmark:{migrations:cce,props:lce},draw:{migrations:fce,props:dce},embed:{migrations:pce,props:hce},frame:{migrations:mce,props:gce},geo:{migrations:yce,props:vce},group:{migrations:Sce,props:bce},highlight:{migrations:wce,props:xce},image:{migrations:Ece,props:Cce},line:{migrations:_ce,props:Pce},note:{migrations:Tce,props:Ice},text:{migrations:Oce,props:Mce},video:{migrations:kce,props:Rce}},IWe={arrow:{migrations:oce,props:rce}};function TWe({shapes:t=_We,bindings:e=IWe,migrations:n}={}){const r=new Map;for(const a of Mo(t))for(const l of Yle(a.props??{}).keys()){if(r.has(l.id)&&r.get(l.id)!==l)throw new Error(`Multiple StyleProp instances with the same id: ${l.id}`);r.set(l.id,l)}const o=kUe(t),i=MUe(e),s=GUe(r);return pB.create({asset:nh,binding:i,camera:uu,document:wB,instance:s,instance_page_state:mc,page:Bs,instance_presence:rWe,pointer:xB,shape:o},{migrations:[PWe,yWe,NUe,iWe,XUe,QUe,qUe,nWe,eWe,RUe,dWe,hWe,gWe,...pQ("shape",t),...pQ("binding",e),...n??[]],onValidationFailure:aWe,createIntegrityChecker:cWe})}const mx=[{locale:"id",label:"Bahasa Indonesia"},{locale:"ms",label:"Bahasa Melayu"},{locale:"ca",label:"Catal"},{locale:"cs",label:"etina"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Espaol"},{locale:"tl",label:"Filipino"},{locale:"fr",label:"Franais"},{locale:"gl",label:"Galego"},{locale:"hr",label:"Hrvatski"},{locale:"it",label:"Italiano"},{locale:"hu",label:"Magyar"},{locale:"nl",label:"Nederlands"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Portugus - Brasil"},{locale:"pt-pt",label:"Portugus - Europeu"},{locale:"ro",label:"Romn"},{locale:"sl",label:"Slovenina"},{locale:"so",label:"Somali"},{locale:"fi",label:"Suomi"},{locale:"sv",label:"Svenska"},{locale:"vi",label:"Ting Vit"},{locale:"tr",label:"Trke"},{locale:"el",label:""},{locale:"ru",label:""},{locale:"uk",label:""},{locale:"he",label:""},{locale:"ur",label:""},{locale:"ar",label:""},{locale:"fa",label:""},{locale:"ne",label:""},{locale:"mr",label:""},{locale:"hi-in",label:""},{locale:"bn",label:""},{locale:"pa",label:""},{locale:"gu-in",label:""},{locale:"ta",label:""},{locale:"te",label:""},{locale:"kn",label:""},{locale:"ml",label:""},{locale:"th",label:""},{locale:"km-kh",label:""},{locale:"ko-kr",label:""},{locale:"ja",label:""},{locale:"zh-cn",label:""},{locale:"zh-tw",label:" ()"}];function MWe(){const t=typeof window<"u"?window.navigator.languages??["en"]:["en"];return OWe(t)}function OWe(t){for(const e of t){const n=RWe(e);if(n)return n}return"en"}const SQ={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function RWe(t){const e=mx.find(o=>o.locale===t.toLowerCase());if(e)return e.locale;const[n,r]=t.split(/[-_]/).map(o=>o.toLowerCase());if(r){const o=mx.find(i=>i.locale===n);if(o)return o.locale}return n in SQ?SQ[n]:null}fh("@tldraw/tlschema","3.13.1","esm");const Ace="3.13.1",xQ={major:"2024-09-13T14:36:29.063Z",minor:"2025-05-22T13:38:59.946Z"},kWe={error:null};class EB extends v.Component{constructor(){super(...arguments);V(this,"state",kWe)}static getDerivedStateFromError(n){return{error:n}}componentDidCatch(n){var r,o;(o=(r=this.props).onError)==null||o.call(r,n)}render(){const{error:n}=this.state;if(n!==null){const{fallback:r}=this.props;return w.jsx(r,{error:n})}return this.props.children}}function vx({children:t,fallback:e,...n}){return e===null?t:w.jsx(EB,{fallback:e,...n,children:t})}function PB(t,e){return WM(`${t}_${e}`)}function xg(t){return WM(`${v.useId()}${t??""}`)}function Ic(t){const e=Ds(v.useContext($ce));return WM(`${e}_${t}`)}function WM(t){return t.replace(/:/g,"_")}const $ce=v.createContext(null);function AWe({children:t}){const e=xg();return w.jsx($ce.Provider,{value:e,children:t})}const _B=v.createContext(null);function Ee(){const t=ce.useContext(_B);if(!t)throw new Error("useEditor must be used inside of the <Tldraw /> or <TldrawEditor /> components");return t}function Gi(){return ce.useContext(_B)}function IB({editor:t,children:e}){return w.jsx(_B.Provider,{value:t,children:w.jsx(AWe,{children:e})})}function $We(){return w.jsx("div",{className:"tl-background"})}function xw(t,e,n,r,o,i){v.useLayoutEffect(()=>{const s=t.current;if(!s||e===void 0)return;let a=`translate(${e}px, ${n}px)`;r!==void 0&&(a+=` scale(${r})`),o!==void 0&&(a+=` rotate(${o}rad)`),i&&(a+=` translate(${i.x}px, ${i.y}px)`),s.style.transform=a})}const bi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>t*(2-t),easeInOutQuad:t=>t<.5?2*t*t:-1+(4-2*t)*t,easeInCubic:t=>t*t*t,easeOutCubic:t=>--t*t*t+1,easeInOutCubic:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1- --t*t*t*t,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1+--t*t*t*t*t,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t<=0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t>=1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t<=0?0:t>=1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2};class ${constructor(e=0,n=0,r=1){this.x=e,this.y=n,this.z=r}get pressure(){return this.z}set(e=this.x,n=this.y,r=this.z){return this.x=e,this.y=n,this.z=r,this}setTo({x:e=0,y:n=0,z:r=1}){return this.x=e,this.y=n,this.z=r,this}rot(e){if(e===0)return this;const{x:n,y:r}=this,o=Math.sin(e),i=Math.cos(e);return this.x=n*i-r*o,this.y=n*o+r*i,this}rotWith(e,n){if(n===0)return this;const r=this.x-e.x,o=this.y-e.y,i=Math.sin(n),s=Math.cos(n);return this.x=e.x+(r*s-o*i),this.y=e.y+(r*i+o*s),this}clone(){const{x:e,y:n,z:r}=this;return new $(e,n,r)}sub(e){return this.x-=e.x,this.y-=e.y,this}subXY(e,n){return this.x-=e,this.y-=n,this}subScalar(e){return this.x-=e,this.y-=e,this}add(e){return this.x+=e.x,this.y+=e.y,this}addXY(e,n){return this.x+=e,this.y+=n,this}addScalar(e){return this.x+=e,this.y+=e,this}clamp(e,n){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),n!==void 0&&(this.x=Math.min(this.x,n),this.y=Math.min(this.y,n)),this}div(e){return this.x/=e,this.y/=e,this}divV(e){return this.x/=e.x,this.y/=e.y,this}mul(e){return this.x*=e,this.y*=e,this}mulV(e){return this.x*=e.x,this.y*=e.y,this}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}nudge(e,n){const r=$.Tan(e,this);return this.add(r.mul(n))}neg(){return this.x*=-1,this.y*=-1,this}cross(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}dpr(e){return $.Dpr(this,e)}cpr(e){return $.Cpr(this,e)}len2(){return $.Len2(this)}len(){return $.Len(this)}pry(e){return $.Pry(this,e)}per(){const{x:e,y:n}=this;return this.x=n,this.y=-e,this}uni(){return $.Uni(this)}tan(e){return $.Tan(this,e)}dist(e){return $.Dist(this,e)}distanceToLineSegment(e,n){return $.DistanceToLineSegment(e,n,this)}slope(e){return $.Slope(this,e)}snapToGrid(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}angle(e){return $.Angle(this,e)}toAngle(){return $.ToAngle(this)}lrp(e,n){return this.x=this.x+(e.x-this.x)*n,this.y=this.y+(e.y-this.y)*n,this}equals(e){return $.Equals(this,e)}equalsXY(e,n){return $.EqualsXY(this,e,n)}norm(){const e=this.len();return this.x=e===0?0:this.x/e,this.y=e===0?0:this.y/e,this}toFixed(){return $.ToFixed(this)}toString(){return $.ToString($.ToFixed(this))}toJson(){return $.ToJson(this)}toArray(){return $.ToArray(this)}static Add(e,n){return new $(e.x+n.x,e.y+n.y)}static AddXY(e,n,r){return new $(e.x+n,e.y+r)}static Sub(e,n){return new $(e.x-n.x,e.y-n.y)}static SubXY(e,n,r){return new $(e.x-n,e.y-r)}static AddScalar(e,n){return new $(e.x+n,e.y+n)}static SubScalar(e,n){return new $(e.x-n,e.y-n)}static Div(e,n){return new $(e.x/n,e.y/n)}static Mul(e,n){return new $(e.x*n,e.y*n)}static DivV(e,n){return new $(e.x/n.x,e.y/n.y)}static MulV(e,n){return new $(e.x*n.x,e.y*n.y)}static Neg(e){return new $(-e.x,-e.y)}static Per(e){return new $(e.y,-e.x)}static Abs(e){return new $(Math.abs(e.x),Math.abs(e.y))}static Dist(e,n){return((e.y-n.y)**2+(e.x-n.x)**2)**.5}static ManhattanDist(e,n){return Math.abs(e.x-n.x)+Math.abs(e.y-n.y)}static DistMin(e,n,r){return(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)<r**2}static Dist2(e,n){return(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y)}static Dpr(e,n){return e.x*n.x+e.y*n.y}static Cross(e,n){return new $(e.y*n.z-e.z*n.y,e.z*n.x-e.x*n.z)}static Cpr(e,n){return e.x*n.y-n.x*e.y}static Len2(e){return e.x*e.x+e.y*e.y}static Len(e){return(e.x*e.x+e.y*e.y)**.5}static Pry(e,n){return $.Dpr(e,n)/$.Len(n)}static Uni(e){return $.Div(e,$.Len(e))}static Tan(e,n){return $.Uni($.Sub(e,n))}static Min(e,n){return new $(Math.min(e.x,n.x),Math.min(e.y,n.y))}static Max(e,n){return new $(Math.max(e.x,n.x),Math.max(e.y,n.y))}static From({x:e,y:n,z:r=1}){return new $(e,n,r)}static FromArray(e){return new $(e[0],e[1])}static Rot(e,n=0){const r=Math.sin(n),o=Math.cos(n);return new $(e.x*o-e.y*r,e.x*r+e.y*o)}static RotWith(e,n,r){const o=e.x-n.x,i=e.y-n.y,s=Math.sin(r),a=Math.cos(r);return new $(n.x+(o*a-i*s),n.y+(o*s+i*a))}static NearestPointOnLineThroughPoint(e,n,r){return $.Mul(n,$.Sub(r,e).pry(n)).add(e)}static NearestPointOnLineSegment(e,n,r,o=!0){if($.Equals(e,r)||$.Equals(n,r))return $.From(r);const i=$.Tan(n,e),s=$.Add(e,$.Mul(i,$.Sub(r,e).pry(i)));if(o){if(s.x<Math.min(e.x,n.x))return $.Cast(e.x<n.x?e:n);if(s.x>Math.max(e.x,n.x))return $.Cast(e.x>n.x?e:n);if(s.y<Math.min(e.y,n.y))return $.Cast(e.y<n.y?e:n);if(s.y>Math.max(e.y,n.y))return $.Cast(e.y>n.y?e:n)}return s}static DistanceToLineThroughPoint(e,n,r){return $.Dist(r,$.NearestPointOnLineThroughPoint(e,n,r))}static DistanceToLineSegment(e,n,r,o=!0){return $.Dist(r,$.NearestPointOnLineSegment(e,n,r,o))}static Snap(e,n=1){return new $(Math.round(e.x/n)*n,Math.round(e.y/n)*n)}static Cast(e){return e instanceof $?e:$.From(e)}static Slope(e,n){return e.x===n.y?NaN:(e.y-n.y)/(e.x-n.x)}static IsNaN(e){return isNaN(e.x)||isNaN(e.y)}static Angle(e,n){return Math.atan2(n.y-e.y,n.x-e.x)}static AngleBetween(e,n){const r=e.x*n.x+e.y*n.y,o=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(n.x,2)+Math.pow(n.y,2)));return(e.x*n.y-e.y*n.x<0?-1:1)*Math.acos(r/o)}static Lrp(e,n,r){return $.Sub(n,e).mul(r).add(e)}static Med(e,n){return new $((e.x+n.x)/2,(e.y+n.y)/2)}static Equals(e,n){return Math.abs(e.x-n.x)<1e-4&&Math.abs(e.y-n.y)<1e-4}static EqualsXY(e,n,r){return e.x===n&&e.y===r}static Clockwise(e,n,r){return(r.x-e.x)*(n.y-e.y)-(n.x-e.x)*(r.y-e.y)<0}static Rescale(e,n){const r=$.Len(e);return new $(n*e.x/r,n*e.y/r)}static ScaleWithOrigin(e,n,r){return $.Sub(e,r).mul(n).add(r)}static ToFixed(e){return new $(dd(e.x),dd(e.y))}static ToInt(e){return new $(parseInt(e.x.toFixed(0)),parseInt(e.y.toFixed(0)),parseInt((e.z??0).toFixed(0)))}static ToCss(e){return`${e.x},${e.y}`}static Nudge(e,n,r){return $.Add(e,$.Tan(n,e).mul(r))}static ToString(e){return`${e.x}, ${e.y}`}static ToAngle(e){let n=Math.atan2(e.y,e.x);return n<0&&(n+=Math.PI*2),n}static FromAngle(e,n=1){return new $(Math.cos(e)*n,Math.sin(e)*n)}static ToArray(e){return[e.x,e.y,e.z]}static ToJson(e){const{x:n,y:r,z:o}=e;return{x:n,y:r,z:o}}static Average(e){const n=e.length,r=new $(0,0);if(n===0)return r;for(let o=0;o<n;o++)r.add(e[o]);return r.div(n)}static Clamp(e,n,r){return r===void 0?new $(Math.min(Math.max(e.x,n)),Math.min(Math.max(e.y,n))):new $(Math.min(Math.max(e.x,n),r),Math.min(Math.max(e.y,n),r))}static PointsBetween(e,n,r=6){const o=[];for(let i=0;i<r;i++){const s=bi.easeInQuad(i/(r-1)),a=$.Lrp(e,n,s);a.z=Math.min(1,.5+Math.abs(.5-DWe(s))*.65),o.push(a)}return o}static SnapToGrid(e,n=8){return new $(Math.round(e.x/n)*n,Math.round(e.y/n)*n)}}const DWe=t=>t<.5?2*t*t:-1+(4-2*t)*t;function hr(t){return`${Se(t.x)},${Se(t.y)} `}function ha(t,e){return`${Se((t.x+e.x)/2)},${Se((t.y+e.y)/2)} `}const cr=Math.PI,Gr=cr/2,Ir=cr*2,jWe=Math.sin;function zr(t,e,n){return Math.max(e,typeof n<"u"?Math.min(t,n):t)}function rE(t,e=1e10){return t?Math.round(t*e)/e:0}function qa(t,e,n=1e-6){return Math.abs(t-e)<=n}function Dce(t,e){const n=Math.pow(t-e,2)/Math.pow(t+e,2);return cr*(t+e)*(1+3*n/(10+Math.sqrt(4-3*n)))}function Tp(t){return t=t%Ir,t<0?t=t+Ir:t===0&&(t=0),t}function VM(t,e){return t=Tp(t),e=Tp(e),t>e&&(e+=Ir),e-t}function LWe(t,e){return Ir-VM(t,e)}function yP(t,e){const n=(e-t)%Ir;return 2*n%Ir-n}function fF(t){return(Ir+t)%Ir}function mI(t,e){const n=Ir/e;let r=Math.floor((fF(t)+n/2)/n)*n%Ir;return r<cr&&(r+=Ir),r>cr&&(r-=Ir),r}function jce(t,e){return t===e||qa(t%(Math.PI/2)-e%(Math.PI/2),0)}function NWe(t){return t*cr/180}function FWe(t){return t*180/cr}function qM(t,e,n){return new $(t.x,t.y).add($.FromAngle(n,e))}function VD(t,e,n){const r=t/2,o=e/2,i=[];let s=1/0,a=-1/0,l=1/0,c=-1/0;for(let g=0;g<n;g++){const y=Ir/n,m=-Gr+g*y,S=r+r*Math.cos(m),x=o+o*Math.sin(m);S<s&&(s=S),x<l&&(l=x),S>a&&(a=S),x>c&&(c=x),i.push(new $(S,x))}const u=a-s,d=c-l,f=t-u,h=e-d;if(f!==0||h!==0)for(let g=0;g<i.length;g++){const y=i[g];y.x=(y.x-s)/u*t,y.y=(y.y-l)/d*e}return i}function vb(t,e,n,r){return t<r&&n<e}function cc(t,e,n,r){const o=Math.max(t,n),i=Math.min(e,r);return o<=i?[o,i]:null}function wQ(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function Ka(t,e){let n=0,r,o;for(let i=0;i<e.length;i++){if(r=e[i],r.x===t.x&&r.y===t.y||(o=e[(i+1)%e.length],$.Dist(t,r)+$.Dist(t,o)===$.Dist(r,o)))return!0;r.y<=t.y?o.y>t.y&&wQ(r,o,t)>0&&(n+=1):o.y<=t.y&&wQ(r,o,t)<0&&(n-=1)}return n!==0}function Se(t){return Math.round(t*1e4)/1e4}function dd(t){return Math.round(t*100)/100}const CQ=t=>Math.abs(t)<Number.MAX_SAFE_INTEGER;function EQ(t,e,n,r){let o;if(Math.abs(t)>cr){o=yP(e,r);const i=yP(r,n);return Math.abs(o)<Math.abs(i)?o/t:(t-i)/t}else{o=yP(e,r);const i=o/t;return Math.sign(o)!==Math.sign(t)?Math.abs(i)>.5?1:0:i}}function zWe(t,e,n,r){const o=2*((e-t)%Ir)%Ir-(e-t)%Ir;return r?(Ir-Math.abs(o))*(n?1:-1):o}function TB(t,e,n){const r=-2*(t.x*(e.y-n.y)-t.y*(e.x-n.x)+e.x*n.y-n.x*e.y),o=((t.x*t.x+t.y*t.y)*(n.y-e.y)+(e.x*e.x+e.y*e.y)*(t.y-n.y)+(n.x*n.x+n.y*n.y)*(e.y-t.y))/r,i=((t.x*t.x+t.y*t.y)*(e.x-n.x)+(e.x*e.x+e.y*e.y)*(n.x-t.x)+(n.x*n.x+n.y*n.y)*(t.x-e.x))/r;return!Number.isFinite(o)||!Number.isFinite(i)?null:new $(o,i)}function BWe(t,e,n,r,o){if(n===null)return[$.From(t),$.From(e)];const i=[],s=$.Angle(n,t),a=$.Angle(n,e),l=VM(s,a);for(let c=0;c<o;c++){const u=c/(o-1),d=s+l*u,f=qM(n,r,d);i.push(f)}return i}const qD=({brush:t,color:e,opacity:n,className:r})=>{const o=v.useRef(null);xw(o,t.x,t.y);const i=Se(Math.max(1,t.w)),s=Se(Math.max(1,t.h));return w.jsx("svg",{className:"tl-overlays__item",ref:o,children:e?w.jsxs("g",{className:"tl-brush",opacity:n,children:[w.jsx("rect",{width:i,height:s,fill:e,opacity:.75}),w.jsx("rect",{width:i,height:s,fill:"none",stroke:e,opacity:.1})]}):w.jsx("rect",{className:`tl-brush tl-brush__default ${r}`,width:i,height:s})})},vr={isSafari:!1,isIos:!1,isChromeForIos:!1,isFirefox:!1,isAndroid:!1,isWebview:!1,isDarwin:!1,hasCanvasSupport:!1};typeof window<"u"&&"navigator"in window&&(vr.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),vr.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),vr.isChromeForIos=/crios.*safari/i.test(navigator.userAgent),vr.isFirefox=/firefox/i.test(navigator.userAgent),vr.isAndroid=/android/i.test(navigator.userAgent),vr.isDarwin=window.navigator.userAgent.toLowerCase().indexOf("mac")>-1,vr.hasCanvasSupport=typeof window<"u"&&"Promise"in window&&"HTMLCanvasElement"in window);const PQ={isLocked:!1,wheelBehavior:"pan",panSpeed:1,zoomSpeed:1,zoomSteps:[.05,.1,.25,.5,1,2,4,8]},KD={duration:0,easing:bi.easeInOutCubic},_Q={CAMERA_MOVE:-10},HWe=["top","right","bottom","left"],IQ=0,MB=2,oE=1,TQ=5,UWe=128;var GD={};const WWe={},Lce=ns("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),so={logPreventDefaults:ns("logPreventDefaults",{defaults:{all:!1}}),logPointerCaptures:ns("logPointerCaptures",{defaults:{all:!1}}),logElementRemoves:ns("logElementRemoves",{defaults:{all:!1}}),debugSvg:ns("debugSvg",{defaults:{all:!1}}),showFps:ns("showFps",{defaults:{all:!1}}),measurePerformance:ns("measurePerformance",{defaults:{all:!1}}),throwToBlob:ns("throwToBlob",{defaults:{all:!1}}),reconnectOnPing:ns("reconnectOnPing",{defaults:{all:!1}}),debugCursors:ns("debugCursors",{defaults:{all:!1}}),forceSrgb:ns("forceSrgbColors",{defaults:{all:!1}}),debugGeometry:ns("debugGeometry",{defaults:{all:!1}}),hideShapes:ns("hideShapes",{defaults:{all:!1}}),editOnType:ns("editOnType",{defaults:{all:!1}}),a11y:ns("a11y",{defaults:{all:!1}}),debugElbowArrows:ns("debugElbowArrows",{defaults:{all:!1}})};if(typeof Element<"u"){const t=Element.prototype.removeChild;Al("element removal logging",()=>{so.logElementRemoves.get()?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),t.call(this,e)}:Element.prototype.removeChild=t})}function ns(t,{defaults:e,shouldStoreForSession:n=!0}){return VWe({name:t,defaults:e,shouldStoreForSession:n})}function VWe(t){const e=KWe(t),n=t.shouldStoreForSession?qWe(t.name):null,r=bo(`debug:${t.name}`,n??e);return typeof window<"u"&&(t.shouldStoreForSession&&Al(`debug:${t.name}`,()=>{const o=r.get();o===e?Qae(`tldraw_debug:${t.name}`):W5(`tldraw_debug:${t.name}`,JSON.stringify(o))}),Object.defineProperty(window,`tldraw${t.name.replace(/^[a-z]/,o=>o.toUpperCase())}`,{get(){return r.get()},set(o){r.set(o)},configurable:!0})),Object.assign(r,t,{reset:()=>r.set(e)})}function qWe(t){try{return JSON.parse(Yae(`tldraw_debug:${t}`)??"null")}catch{return null}}function XD(t){try{return t()}catch{return null}}function KWe(t){switch(XD(()=>GD.TLDRAW_ENV)??XD(()=>GD.VERCEL_PUBLIC_TLDRAW_ENV)??XD(()=>GD.NEXT_PUBLIC_TLDRAW_ENV)??"production"){case"production":return t.defaults.production??t.defaults.all;case"preview":case"staging":return t.defaults.staging??t.defaults.all;default:return t.defaults.development??t.defaults.all}}function vI(t){if(t instanceof HTMLElement)return t;if(t.parentElement)return vI(t.parentElement);throw Error("Could not find a parent element of an HTML type!")}function En(t){t.preventDefault(),so.logPreventDefaults.get()&&console.warn("preventDefault called on event:",t)}function ww(t,e){if(t.setPointerCapture(e.pointerId),so.logPointerCaptures.get()){const n=Lce.get();n.set(t,(n.get(t)??0)+1),console.warn("setPointerCapture called on element:",t,e)}}function Cw(t,e){if(t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),so.logPointerCaptures.get())){const n=Lce.get();n.get(t)===1?n.delete(t):n.has(t)?n.set(t,n.get(t)-1):console.warn("Release without capture"),console.warn("releasePointerCapture called on element:",t,e)}}const Yr=t=>t.stopPropagation(),is=(t,e,n)=>{t&&t.style.setProperty(e,n)};function Nce(t=!1){const{activeElement:e}=document,n=t?["input","textarea"]:["input","select","button","textarea"];return!!(e&&(e.isContentEditable||n.indexOf(e.tagName.toLowerCase())>-1||e.classList.contains("tlui-slider__thumb")))}const Ui=t=>vr.isDarwin?t.metaKey:t.ctrlKey||t.metaKey;function za(t){return t.isKilled=!0,{point:{x:t.clientX,y:t.clientY,z:t.pressure},shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey,metaKey:t.metaKey,accelKey:Ui(t),pointerId:t.pointerId,button:t.button,isPen:t.pointerType==="pen"}}function OB(){const t=Ee(),e=Ie("current tool",()=>t.getCurrentTool(),[t]);return v.useMemo(function(){let o,i;function s(m){if(!m.isKilled){if(m.button===MB){t.dispatch({type:"pointer",target:"canvas",name:"right_click",...za(m)});return}m.button!==0&&m.button!==1&&m.button!==5||(ww(m.currentTarget,m),t.dispatch({type:"pointer",target:"canvas",name:"pointer_down",...za(m)}))}}function a(m){if(m.isKilled||m.clientX===o&&m.clientY===i)return;o=m.clientX,i=m.clientY;const S=e.useCoalescedEvents&&m.nativeEvent.getCoalescedEvents?m.nativeEvent.getCoalescedEvents():[m];for(const x of S)t.dispatch({type:"pointer",target:"canvas",name:"pointer_move",...za(x)})}function l(m){m.isKilled||m.button!==0&&m.button!==1&&m.button!==2&&m.button!==5||(o=m.clientX,i=m.clientY,Cw(m.currentTarget,m),t.dispatch({type:"pointer",target:"canvas",name:"pointer_up",...za(m)}))}function c(m){if(m.isKilled||t.getInstanceState().isPenMode&&m.pointerType!=="pen")return;const S=m.pointerType==="mouse"||m.pointerType==="pen";t.updateInstanceState({isHoveringCanvas:S?!0:null})}function u(m){if(m.isKilled||t.getInstanceState().isPenMode&&m.pointerType!=="pen")return;const S=m.pointerType==="mouse"||m.pointerType==="pen";t.updateInstanceState({isHoveringCanvas:S?!1:null})}function d(m){m.isKilled=!0,En(m)}function f(m){m.isKilled=!0,m.target instanceof HTMLElement&&m.target.tagName!=="A"&&m.target.tagName!=="TEXTAREA"&&!m.target.isContentEditable&&!(t.getEditingShape()&&m.target.className.includes("tl-text-content"))&&En(m)}function h(m){En(m)}async function g(m){var x,C;if(En(m),Yr(m),(C=(x=m.dataTransfer)==null?void 0:x.files)!=null&&C.length){const E=Array.from(m.dataTransfer.files);await t.putExternalContent({type:"files",files:E,point:t.screenToPage({x:m.clientX,y:m.clientY}),ignoreParent:!1});return}const S=m.dataTransfer.getData("url");if(S){await t.putExternalContent({type:"url",url:S,point:t.screenToPage({x:m.clientX,y:m.clientY})});return}}function y(m){Yr(m)}return{onPointerDown:s,onPointerMove:a,onPointerUp:l,onPointerEnter:c,onPointerLeave:u,onDragOver:h,onDrop:g,onTouchStart:d,onTouchEnd:f,onClick:y}},[t,e])}function GWe(){const t=Ee();v.useEffect(()=>{let e=t.getInstanceState().isCoarsePointer;const n=s=>{const a=s.pointerType!=="mouse";e!==a&&(e=a,t.updateInstanceState({isCoarsePointer:a}))};window.addEventListener("pointerdown",n,{capture:!0});const r=window.matchMedia&&window.matchMedia("(any-pointer: coarse)"),o=vr.isFirefox&&!vr.isAndroid&&!vr.isIos,i=()=>{const s=o?!1:r.matches;e===s&&(e=s,t.updateInstanceState({isCoarsePointer:s}))};return r&&(r.addEventListener("change",i),i()),()=>{window.removeEventListener("pointerdown",n,{capture:!0}),r&&r.removeEventListener("change",i)}},[t])}const Fce=v.createContext(null);function zce({container:t,children:e}){return w.jsx(Fce.Provider,{value:t,children:e})}function Ko(){return Ds(v.useContext(Fce),"useContainer used outside of <Tldraw />")}function XWe(){const t=Ee(),e=Ko(),n=Ie("isEditing",()=>t.getEditingShapeId(),[t]),r=Ie("isFocused",()=>t.getIsFocused(),[t]);v.useEffect(()=>{if(!e)return;function o(i){if(i.isSpecialRedispatchedEvent)return;En(i),Yr(i);const s=e.querySelector(".tl-canvas");if(!s)return;const a=new DragEvent(i.type,i);a.isSpecialRedispatchedEvent=!0,s.dispatchEvent(a)}return e.addEventListener("dragover",o),e.addEventListener("drop",o),()=>{e.removeEventListener("dragover",o),e.removeEventListener("drop",o)}},[e]),v.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;let o=null;const i=()=>{o!=null&&o();const s=`(resolution: ${window.devicePixelRatio}dppx)`,a=matchMedia(s),l=c=>{c.type==="change"&&i()};a.addEventListener?a.addEventListener("change",i):a.addListener&&a.addListener(l),o=()=>{a.removeEventListener?a.removeEventListener("change",i):a.removeListener&&a.removeListener(l)},t.updateInstanceState({devicePixelRatio:window.devicePixelRatio})};return i(),()=>{o==null||o()}},[t]),v.useEffect(()=>{if(!r)return;const o=l=>{if(l.altKey&&(t.isIn("zoom")||!t.getPath().endsWith(".idle"))&&!yb(t)&&En(l),l.isKilled)return;l.isKilled=!0;const c=!!t.getSelectedShapeIds().length;switch(l.key){case"=":case"-":case"0":{if(l.metaKey||l.ctrlKey){En(l);return}break}case"Tab":{if(yb(t))return;c&&!n&&En(l);break}case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if(yb(t))return;c&&(l.metaKey||l.ctrlKey)&&En(l);break}case",":return;case"Escape":{if((t.getEditingShape()||t.getSelectedShapeIds().length>0)&&En(l),t.menus.getOpenMenus().length>0)return;t.inputs.keys.has("Escape")||(t.inputs.keys.add("Escape"),t.cancel(),e.focus());return}default:if(yb(t))return}const u={type:"keyboard",name:l.repeat?"key_repeat":"key_down",key:l.key,code:l.code,shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,metaKey:l.metaKey,accelKey:Ui(l)};t.dispatch(u)},i=l=>{if(l.isKilled||(l.isKilled=!0,yb(t))||l.key===",")return;const c={type:"keyboard",name:"key_up",key:l.key,code:l.code,shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,metaKey:l.metaKey,accelKey:Ui(l)};t.dispatch(c)};function s(l){var c,u;if(e.contains(l.target)){const d=l.touches[0].pageX,f=l.touches[0].radiusX||0;(d-f<10||d+f>t.getViewportScreenBounds().width-10)&&(((c=l.target)==null?void 0:c.tagName)==="BUTTON"&&((u=l.target)==null||u.click()),En(l))}}const a=l=>{e.contains(l.target)&&(l.ctrlKey||l.metaKey)&&En(l)};return e.addEventListener("touchstart",s,{passive:!1}),e.addEventListener("wheel",a,{passive:!1}),document.addEventListener("gesturestart",En),document.addEventListener("gesturechange",En),document.addEventListener("gestureend",En),e.addEventListener("keydown",o),e.addEventListener("keyup",i),()=>{e.removeEventListener("touchstart",s),e.removeEventListener("wheel",a),document.removeEventListener("gesturestart",En),document.removeEventListener("gesturechange",En),document.removeEventListener("gestureend",En),e.removeEventListener("keydown",o),e.removeEventListener("keyup",i)}},[t,e,r,n])}function yb(t){return t.menus.hasOpenMenus()||Nce()}const YWe=["textarea","input"];function QWe(t){const e=Ee();v.useEffect(()=>{const n=t.current;if(!n)return;const r=o=>{var i;if(o instanceof PointerEvent&&o.pointerType==="pen"){o.isKilled=!0;const{target:s}=o;if(YWe.includes((i=s.tagName)==null?void 0:i.toLocaleLowerCase())||s.isContentEditable||e.isIn("select.editing_shape"))return;En(o)}};return n.addEventListener("touchstart",r),n.addEventListener("touchend",r),()=>{n.removeEventListener("touchstart",r),n.removeEventListener("touchend",r)}},[e,t])}function ZWe(t,e,n){return Math.max(e,Math.min(t,n))}const Wi={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function MQ(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function OQ(t,e,n,r=.15){return r===0?ZWe(t,e,n):t<e?-MQ(e-t,n-e,r)+e:t>n?+MQ(t-n,n-e,r)+n:t}function JWe(t,[e,n],[r,o]){const[[i,s],[a,l]]=t;return[OQ(e,i,s,r),OQ(n,a,l,o)]}function eVe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tVe(t){var e=eVe(t,"string");return typeof e=="symbol"?e:String(e)}function us(t,e,n){return e=tVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RQ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function So(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RQ(Object(n),!0).forEach(function(r){us(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RQ(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Bce={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function kQ(t){return t?t[0].toUpperCase()+t.slice(1):""}const nVe=["enter","leave"];function rVe(t=!1,e){return t&&!nVe.includes(e)}function oVe(t,e="",n=!1){const r=Bce[t],o=r&&r[e]||e;return"on"+kQ(t)+kQ(o)+(rVe(n,o)?"Capture":"")}const iVe=["gotpointercapture","lostpointercapture"];function sVe(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=iVe.includes(e)?"capturecapture":"capture",o=!!~e.indexOf(r);return o&&(e=e.replace("capture","")),{device:e,capture:o,passive:n}}function aVe(t,e=""){const n=Bce[t],r=n&&n[e]||e;return t+r}function Hce(t){return"touches"in t}function lVe(t){return Hce(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function cVe(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function hF(t,e){try{const n=e.clientX-t.clientX,r=e.clientY-t.clientY,o=(e.clientX+t.clientX)/2,i=(e.clientY+t.clientY)/2,s=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:s,origin:[o,i]}}catch{}return null}function uVe(t){return cVe(t).map(e=>e.identifier)}function AQ(t,e){const[n,r]=Array.from(t.touches).filter(o=>e.includes(o.identifier));return hF(n,r)}const $Q=40,DQ=800;function Uce(t){let{deltaX:e,deltaY:n,deltaMode:r}=t;return r===1?(e*=$Q,n*=$Q):r===2&&(e*=DQ,n*=DQ),[e,n]}function dVe(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:o,ctrlKey:i})}return e}function yI(t,...e){return typeof t=="function"?t(...e):t}function fVe(){}function hVe(...t){return t.length===0?fVe:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function jQ(t,e){return Object.assign({},e,t||{})}const pVe=32;class Wce{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:o}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=o,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?yI(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:o}=this;n.args=this.args;let i=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,o.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,o.locked=!!document.pointerLockElement,Object.assign(o,dVe(e)),o.down=o.pressed=o.buttons%2===1||o.touches>0,i=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const I=n._delta.map(Math.abs);Wi.addTo(n._distance,I)}this.axisIntent&&this.axisIntent(e);const[s,a]=n._movement,[l,c]=r.threshold,{_step:u,values:d}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(s)>=l&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=c&&d[1])):(u[0]===!1&&(u[0]=Math.abs(s)>=l&&Math.sign(s)*l),u[1]===!1&&(u[1]=Math.abs(a)>=c&&Math.sign(a)*c)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const f=[0,0];if(r.hasCustomTransform){const[I,T]=d;f[0]=u[0]!==!1?I-u[0]:0,f[1]=u[1]!==!1?T-u[1]:0}else f[0]=u[0]!==!1?s-u[0]:0,f[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(f);const h=n.offset,g=n._active&&!n._blocked||n.active;g&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=o[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=yI(r.bounds,n)),this.setup&&this.setup()),n.movement=f,this.computeOffset()));const[y,m]=n.offset,[[S,x],[C,E]]=n._bounds;n.overflow=[y<S?-1:y>x?1:0,m<C?-1:m>E?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const P=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=JWe(n._bounds,n.offset,P),n.delta=Wi.sub(n.offset,h),this.computeMovement(),g&&(!n.last||i>pVe)){n.delta=Wi.sub(n.offset,h);const I=n.delta.map(Math.abs);Wi.addTo(n.distance,I),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&i>0&&(n.velocity=[I[0]/i,I[1]/i],n.timeDelta=i)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const o=this.handler(So(So(So({},n),e),{},{[this.aliasKey]:e.values}));o!==void 0&&(e.memo=o)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function gVe([t,e],n){const r=Math.abs(t),o=Math.abs(e);if(r>o&&r>n)return"x";if(o>r&&o>n)return"y"}class mVe extends Wce{constructor(...e){super(...e),us(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Wi.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Wi.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const o=typeof r.axisThreshold=="object"?r.axisThreshold[lVe(e)]:r.axisThreshold;n.axis=gVe(n._movement,o)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const vVe=t=>t,LQ=.15,Vce={enabled(t=!0){return t},eventOptions(t,e,n){return So(So({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[LQ,LQ];case!1:return[0,0];default:return Wi.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Wi.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||vVe},threshold(t){return Wi.toVector(t,0)}},yVe=0,Ew=So(So({},Vce),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=yVe){return t},bounds(t={}){if(typeof t=="function")return i=>Ew.bounds(t(i));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:o=1/0}=t;return[[e,n],[r,o]]}}),Pw=typeof window<"u"&&window.document&&window.document.createElement;function qce(){return Pw&&"ontouchstart"in window}function bVe(){return qce()||Pw&&window.navigator.maxTouchPoints>1}function SVe(){return Pw&&"onpointerdown"in window}function xVe(){return Pw&&"exitPointerLock"in window.document}function wVe(){try{return"constructor"in GestureEvent}catch{return!1}}const El={isBrowser:Pw,gesture:wVe(),touch:qce(),touchscreen:bVe(),pointer:SVe(),pointerLock:xVe()},CVe=250,EVe=180,PVe=.5,_Ve=50,IVe=250,TVe=10,NQ={mouse:0,touch:0,pen:8};So(So({},Ew),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:o=!1}={}}){return this.pointerLock=r&&El.pointerLock,El.touch&&n?"touch":this.pointerLock?"mouse":El.pointer&&!o?"pointer":El.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?CVe:void 0,!(!El.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:o=!0}={}}){return this.pointerButtons=r,this.keys=o,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:o=void 0}){const i=Wi.toVector(t,n?r:o?1:0);return this.filterTaps=n,this.tapsThreshold=r,i},swipe({velocity:t=PVe,distance:e=_Ve,duration:n=IVe}={}){return{velocity:this.transform(Wi.toVector(t)),distance:this.transform(Wi.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return EVe;case!1:return 0;default:return t}},axisThreshold(t){return t?So(So({},NQ),t):NQ},keyboardDisplacement(t=TVe){return t}});function Kce(t){const[e,n]=t.overflow,[r,o]=t._delta,[i,s]=t._direction;(e<0&&r>0&&i<0||e>0&&r<0&&i>0)&&(t._movement[0]=t._movementBound[0]),(n<0&&o>0&&s<0||n>0&&o<0&&s>0)&&(t._movement[1]=t._movementBound[1])}const MVe=30,OVe=100;class RVe extends Wce{constructor(...e){super(...e),us(this,"ingKey","pinching"),us(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:n,lastOffset:r}=this.state;e==="wheel"?this.state.offset=Wi.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:e,lastOffset:n}=this.state;this.state.movement=[e[0]/n[0],e[1]-n[1]]}axisIntent(){const e=this.state,[n,r]=e._movement;if(!e.axis){const o=Math.abs(n)*MVe-Math.abs(r);o<0?e.axis="angle":o>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(i=>r.has(i))||r.size<2)return;this.start(e),n._touchIds=Array.from(r).slice(0,2);const o=AQ(e,n._touchIds);o&&this.pinchStart(e,o)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const n=this.state,r=n._pointerEvents,o=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(s=>o.has(s))||(r.size<2&&r.set(e.pointerId,e),n._pointerEvents.size<2))return;this.start(e);const i=hF(...Array.from(r.values()));i&&this.pinchStart(e,i)}pinchStart(e,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const n=AQ(e,this.state._touchIds);n&&this.pinchMove(e,n)}pointerMove(e){const n=this.state._pointerEvents;if(n.has(e.pointerId)&&n.set(e.pointerId,e),!this.state._active)return;const r=hF(...Array.from(n.values()));r&&this.pinchMove(e,r)}pinchMove(e,n){const r=this.state,o=r._values[1],i=n.angle-o;let s=0;Math.abs(i)>270&&(s+=Math.sign(i)),this.computeValues([n.distance,n.angle-360*s]),r.origin=n.origin,r.turns=s,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const n=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}n._pointerEvents.has(e.pointerId)&&n._pointerEvents.delete(e.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const n=this.state;n._active||(this.start(e),this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([e.scale,e.rotation]),n.origin=[e.clientX,e.clientY];const r=n._movement;n._movement=[e.scale-1,e.rotation],n._delta=Wi.sub(n._movement,r),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>e[r]):!e[n])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const r=this.state;r._delta=[-Uce(e)[1]/OVe*r.offset[0],0],Wi.addTo(r._movement,r._delta),Kce(r),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const n=this.config.device;n&&(e(n,"start",this[n+"Start"].bind(this)),e(n,"change",this[n+"Move"].bind(this)),e(n,"end",this[n+"End"].bind(this)),e(n,"cancel",this[n+"End"].bind(this)),e("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const kVe=So(So({},Vce),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!El.touch&&El.gesture)return"gesture";if(El.touch&&r)return"touch";if(El.touchscreen){if(El.pointer)return"pointer";if(El.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const o=s=>{const a=jQ(yI(n,s),{min:-1/0,max:1/0});return[a.min,a.max]},i=s=>{const a=jQ(yI(r,s),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[o(),i()]:s=>[o(s),i(s)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",Wi.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});So(So({},Ew),{},{mouseOnly:(t=!0)=>t});class AVe extends mVe{constructor(...e){super(...e),us(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const n=this.state;n._delta=Uce(e),Wi.addTo(n._movement,n._delta),Kce(n),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const $Ve=Ew;So(So({},Ew),{},{mouseOnly:(t=!0)=>t});const RB=new Map,pF=new Map;function DVe(t){RB.set(t.key,t.engine),pF.set(t.key,t.resolver)}const jVe={key:"pinch",engine:RVe,resolver:kVe},LVe={key:"wheel",engine:AVe,resolver:$Ve};function NVe(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,i;for(i=0;i<r.length;i++)o=r[i],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function FVe(t,e){if(t==null)return{};var n=NVe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const zVe={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=El.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},BVe=["target","eventOptions","window","enabled","transform"];function bP(t={},e){const n={};for(const[r,o]of Object.entries(e))switch(typeof o){case"function":n[r]=o.call(n,t[r],r,t);break;case"object":n[r]=bP(t[r],o);break;case"boolean":o&&(n[r]=t[r]);break}return n}function HVe(t,e,n={}){const r=t,{target:o,eventOptions:i,window:s,enabled:a,transform:l}=r,c=FVe(r,BVe);if(n.shared=bP({target:o,eventOptions:i,window:s,enabled:a,transform:l},zVe),e){const u=pF.get(e);n[e]=bP(So({shared:n.shared},c),u)}else for(const u in c){const d=pF.get(u);d&&(n[u]=bP(So({shared:n.shared},c[u]),d))}return n}class Gce{constructor(e,n){us(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,o,i){const s=this._listeners,a=aVe(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=So(So({},l),i);e.addEventListener(a,o,c);const u=()=>{e.removeEventListener(a,o,c),s.delete(u)};return s.add(u),u}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class UVe{constructor(){us(this,"_timeouts",new Map)}add(e,n,r=140,...o){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...o))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class WVe{constructor(e){us(this,"gestures",new Set),us(this,"_targetEventStore",new Gce(this)),us(this,"gestureEventStores",{}),us(this,"gestureTimeoutStores",{}),us(this,"handlers",{}),us(this,"config",{}),us(this,"pointerIds",new Set),us(this,"touchIds",new Set),us(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),VVe(this,e)}setEventIds(e){if(Hce(e))return this.touchIds=new Set(uVe(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=HVe(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let o;if(!(n.target&&(o=n.target(),!o))){if(n.enabled){for(const s of this.gestures){const a=this.config[s],l=FQ(r,a.eventOptions,!!o);if(a.enabled){const c=RB.get(s);new c(this,e,s).bind(l)}}const i=FQ(r,n.eventOptions,!!o);for(const s in this.nativeHandlers)i(s,"",a=>this.nativeHandlers[s](So(So({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const i in r)r[i]=hVe(...r[i]);if(!o)return r;for(const i in r){const{device:s,capture:a,passive:l}=sVe(i);this._targetEventStore.add(o,s,"",r[i],{capture:a,passive:l})}}}}function um(t,e){t.gestures.add(e),t.gestureEventStores[e]=new Gce(t,e),t.gestureTimeoutStores[e]=new UVe}function VVe(t,e){e.drag&&um(t,"drag"),e.wheel&&um(t,"wheel"),e.scroll&&um(t,"scroll"),e.move&&um(t,"move"),e.pinch&&um(t,"pinch"),e.hover&&um(t,"hover")}const FQ=(t,e,n)=>(r,o,i,s={},a=!1)=>{var l,c;const u=(l=s.capture)!==null&&l!==void 0?l:e.capture,d=(c=s.passive)!==null&&c!==void 0?c:e.passive;let f=a?r:oVe(r,o,u);n&&d&&(f+="Passive"),t[f]=t[f]||[],t[f].push(i)},qVe=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function KVe(t){const e={},n={},r=new Set;for(let o in t)qVe.test(o)?(r.add(RegExp.lastMatch),n[o]=t[o]):e[o]=t[o];return[n,e,r]}function dm(t,e,n,r,o,i){if(!t.has(n)||!RB.has(r))return;const s=n+"Start",a=n+"End",l=c=>{let u;return c.first&&s in e&&e[s](c),n in e&&(u=e[n](c)),c.last&&a in e&&e[a](c),u};o[r]=l,i[r]=i[r]||{}}function GVe(t,e){const[n,r,o]=KVe(t),i={};return dm(o,n,"onDrag","drag",i,e),dm(o,n,"onWheel","wheel",i,e),dm(o,n,"onScroll","scroll",i,e),dm(o,n,"onPinch","pinch",i,e),dm(o,n,"onMove","move",i,e),dm(o,n,"onHover","hover",i,e),{handlers:i,config:e,nativeHandlers:r}}function XVe(t,e={},n,r){const o=ce.useMemo(()=>new WVe(t),[]);if(o.applyHandlers(t,r),o.applyConfig(e,n),ce.useEffect(o.effect.bind(o)),ce.useEffect(()=>o.clean.bind(o),[]),e.target===void 0)return o.bind.bind(o)}function YVe(t){return t.forEach(DVe),function(n,r){const{handlers:o,nativeHandlers:i,config:s}=GVe(n,r||{});return XVe(o,s,void 0,i)}}const zQ=10,QVe=/Mac|iPod|iPhone|iPad/.test(typeof window>"u"?"node":window.navigator.platform);function Xce(t){let{deltaY:e,deltaX:n}=t,r=0;return t.ctrlKey||t.altKey||t.metaKey?r=(Math.abs(e)>zQ?zQ*Math.sign(e):e)/100:t.shiftKey&&!QVe&&(n=e,e=0),{x:-n,y:-e,z:-r}}const ZVe=YVe([LVe,jVe]);let fm;const JVe=t=>fm===void 0?(fm=t,!1):t-fm>120&&t-fm<160?(fm=t,!0):(fm=t,!1);function eqe(t){const e=Ee(),n=v.useMemo(()=>{let r="not sure";const o=({event:g})=>{if(!e.getInstanceState().isFocused||(r="not sure",JVe(Date.now())))return;const y=e.getEditingShapeId();if(y){const x=e.getShape(y);if(x&&e.getShapeUtil(x).canScroll(x)){const E=e.getShapePageBounds(y);if(E!=null&&E.containsPoint(e.inputs.currentPagePoint))return}}En(g),Yr(g);const m=Xce(g);if(m.x===0&&m.y===0)return;const S={type:"wheel",name:"wheel",delta:m,point:new $(g.clientX,g.clientY),shiftKey:g.shiftKey,altKey:g.altKey,ctrlKey:g.metaKey||g.ctrlKey,metaKey:g.metaKey,accelKey:Ui(g)};e.dispatch(S)};let i=1,s=1,a=0;const l=new $,c=new $,u=g=>{const y=t.current;r="not sure";const{event:m,origin:S,da:x}=g;m instanceof WheelEvent||(m.target===y||y!=null&&y.contains(m.target))&&(c.x=S[0],c.y=S[1],l.x=S[0],l.y=S[1],i=x[0],s=e.getZoomLevel(),e.dispatch({type:"pinch",name:"pinch_start",point:{x:S[0],y:S[1],z:e.getZoomLevel()},delta:{x:0,y:0},shiftKey:m.shiftKey,altKey:m.altKey,ctrlKey:m.metaKey||m.ctrlKey,metaKey:m.metaKey,accelKey:Ui(m)}))},d=g=>{if(g&&(r="zooming"),r==="zooming")return;const y=Math.abs(a-i),m=$.Dist(l,c);switch(r){case"not sure":{y>24?r="zooming":m>16&&(r="panning");break}case"panning":{y>64&&(r="zooming");break}}};return{onWheel:o,onPinchStart:u,onPinchEnd:g=>{const y=t.current,{event:m,origin:S,offset:x}=g;if(m instanceof WheelEvent||!(m.target===y||y!=null&&y.contains(m.target)))return;const C=x[0]**e.getCameraOptions().zoomSpeed;r="not sure",e.timers.requestAnimationFrame(()=>{e.dispatch({type:"pinch",name:"pinch_end",point:{x:S[0],y:S[1],z:C},delta:{x:S[0],y:S[1]},shiftKey:m.shiftKey,altKey:m.altKey,ctrlKey:m.metaKey||m.ctrlKey,metaKey:m.metaKey,accelKey:Ui(m)})})},onPinch:g=>{const y=t.current,{event:m,origin:S,offset:x,da:C}=g;if(m instanceof WheelEvent||!(m.target===y||y!=null&&y.contains(m.target)))return;const E=g.type==="gesturechange"||g.type==="gestureend";a=C[0];const P=S[0]-c.x,I=S[1]-c.y;switch(c.x=S[0],c.y=S[1],d(E),r){case"zooming":{const T=x[0]**e.getCameraOptions().zoomSpeed;e.dispatch({type:"pinch",name:"pinch",point:{x:S[0],y:S[1],z:T},delta:{x:P,y:I},shiftKey:m.shiftKey,altKey:m.altKey,ctrlKey:m.metaKey||m.ctrlKey,metaKey:m.metaKey,accelKey:Ui(m)});break}case"panning":{e.dispatch({type:"pinch",name:"pinch",point:{x:S[0],y:S[1],z:s},delta:{x:P,y:I},shiftKey:m.shiftKey,altKey:m.altKey,ctrlKey:m.metaKey||m.ctrlKey,metaKey:m.metaKey,accelKey:Ui(m)});break}}}}},[e,t]);ZVe(n,{target:t,eventOptions:{passive:!1},pinch:{from:()=>{const{zoomSpeed:r}=e.getCameraOptions();return[e.getZoomLevel()**(1/r),0]},scaleBounds:()=>{const r=e.getBaseZoom(),{zoomSteps:o,zoomSpeed:i}=e.getCameraOptions(),s=o[0]*r;return{max:(o[o.length-1]*r)**(1/i),min:s**(1/i)}}}})}function YD(t,e,n){const r=t.getShape(e),o=t.getShapeHandles(r);return{shape:r,handle:o.find(i=>i.id===n)}}function tqe(t,e){const n=Ee();return v.useMemo(()=>{const r=l=>{if(l.isKilled)return;const c=vI(l.currentTarget);ww(c,l);const{shape:u,handle:d}=YD(n,t,e);d&&n.dispatch({type:"pointer",target:"handle",handle:d,shape:u,name:"pointer_down",...za(l)})};let o,i;return{onPointerDown:r,onPointerMove:l=>{if(l.isKilled||l.clientX===o&&l.clientY===i)return;o=l.clientX,i=l.clientY;const{shape:c,handle:u}=YD(n,t,e);u&&n.dispatch({type:"pointer",target:"handle",handle:u,shape:c,name:"pointer_move",...za(l)})},onPointerUp:l=>{if(l.isKilled)return;const c=vI(l.currentTarget);Cw(c,l);const{shape:u,handle:d}=YD(n,t,e);d&&n.dispatch({type:"pointer",target:"handle",handle:d,shape:u,name:"pointer_up",...za(l)})}}},[n,t,e])}function nqe(t){const e=Ee();v.useLayoutEffect(()=>{const n=$5(()=>{t.current&&e.updateViewportScreenBounds(t.current)},200,{trailing:!0}),r=e.timers.setInterval(n,1e3);window.addEventListener("resize",n);const o=new ResizeObserver(a=>{a[0].contentRect&&n()}),i=t.current;let s=null;return i&&(o.observe(i),s=rqe(i),s.addEventListener("scroll",n)),()=>{clearInterval(r),window.removeEventListener("resize",n),o.disconnect(),s==null||s.removeEventListener("scroll",n),n.cancel()}},[e,t])}/*!
 * Author: excalidraw
 * MIT License: https://github.com/excalidraw/excalidraw/blob/master/LICENSE
 * https://github.com/excalidraw/excalidraw/blob/48c3465b19f10ec755b3eb84e21a01a468e96e43/packages/excalidraw/utils.ts#L600
 */const rqe=t=>{let e=t.parentElement;for(;e;){if(e===document.body)return document;const{overflowY:n}=window.getComputedStyle(e);if(e.scrollHeight>e.clientHeight&&(n==="auto"||n==="scroll"||n==="overlay"))return e;e=e.parentElement}return document};class rt{constructor(e=0,n=0,r=0,o=0){V(this,"x",0);V(this,"y",0);V(this,"w",0);V(this,"h",0);this.x=e,this.y=n,this.w=r,this.h=o}get point(){return new $(this.x,this.y)}set point(e){this.x=e.x,this.y=e.y}get minX(){return this.x}set minX(e){this.x=e}get left(){return this.x}get midX(){return this.x+this.w/2}get maxX(){return this.x+this.w}get right(){return this.x+this.w}get minY(){return this.y}set minY(e){this.y=e}get top(){return this.y}get midY(){return this.y+this.h/2}get maxY(){return this.y+this.h}get bottom(){return this.y+this.h}get width(){return this.w}set width(e){this.w=e}get height(){return this.h}set height(e){this.h=e}get aspectRatio(){return this.width/this.height}get center(){return new $(this.midX,this.midY)}set center(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}get corners(){return[new $(this.minX,this.minY),new $(this.maxX,this.minY),new $(this.maxX,this.maxY),new $(this.minX,this.maxY)]}get cornersAndCenter(){return[new $(this.minX,this.minY),new $(this.maxX,this.minY),new $(this.maxX,this.maxY),new $(this.minX,this.maxY),this.center]}get sides(){const{corners:e}=this;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}get size(){return new $(this.w,this.h)}toFixed(){return this.x=rE(this.x),this.y=rE(this.y),this.w=rE(this.w),this.h=rE(this.h),this}setTo(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}set(e=0,n=0,r=0,o=0){return this.x=e,this.y=n,this.w=r,this.h=o,this}expand(e){const n=Math.min(this.minX,e.minX),r=Math.min(this.minY,e.minY),o=Math.max(this.maxX,e.maxX),i=Math.max(this.maxY,e.maxY);return this.x=n,this.y=r,this.w=o-n,this.h=i-r,this}expandBy(e){return this.x-=e,this.y-=e,this.w+=e*2,this.h+=e*2,this}scale(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}clone(){const{x:e,y:n,w:r,h:o}=this;return new rt(e,n,r,o)}translate(e){return this.x+=e.x,this.y+=e.y,this}snapToGrid(e){const n=Math.round(this.minX/e)*e,r=Math.round(this.minY/e)*e,o=Math.round(this.maxX/e)*e,i=Math.round(this.maxY/e)*e;this.minX=n,this.minY=r,this.width=Math.max(1,o-n),this.height=Math.max(1,i-r)}collides(e){return rt.Collides(this,e)}contains(e){return rt.Contains(this,e)}includes(e){return rt.Includes(this,e)}containsPoint(e,n=0){return rt.ContainsPoint(this,e,n)}getHandlePoint(e){switch(e){case"top_left":return new $(this.minX,this.minY);case"top_right":return new $(this.maxX,this.minY);case"bottom_left":return new $(this.minX,this.maxY);case"bottom_right":return new $(this.maxX,this.maxY);case"top":return new $(this.midX,this.minY);case"right":return new $(this.maxX,this.midY);case"bottom":return new $(this.midX,this.maxY);case"left":return new $(this.minX,this.midY)}}toJson(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}resize(e,n,r){const{minX:o,minY:i,maxX:s,maxY:a}=this;let{minX:l,minY:c,maxX:u,maxY:d}=this;switch(e){case"left":case"top_left":case"bottom_left":{l+=n;break}case"right":case"top_right":case"bottom_right":{u+=n;break}}switch(e){case"top":case"top_left":case"top_right":{c+=r;break}case"bottom":case"bottom_left":case"bottom_right":{d+=r;break}}const f=(u-l)/(s-o),h=(d-c)/(a-i),g=f<0,y=h<0;if(g){const m=u;u=l,l=m}if(y){const m=d;d=c,c=m}this.minX=l,this.minY=c,this.width=Math.abs(u-l),this.height=Math.abs(d-c)}union(e){const n=Math.min(this.minX,e.x),r=Math.min(this.minY,e.y),o=Math.max(this.maxX,e.w+e.x),i=Math.max(this.maxY,e.h+e.y);return this.x=n,this.y=r,this.width=o-n,this.height=i-r,this}static From(e){return new rt(e.x,e.y,e.w,e.h)}static FromCenter(e,n){return new rt(e.x-n.x/2,e.y-n.y/2,n.x,n.y)}static FromPoints(e){if(e.length===0)return new rt;let n=1/0,r=1/0,o=-1/0,i=-1/0,s;for(let a=0,l=e.length;a<l;a++)s=e[a],n=Math.min(s.x,n),r=Math.min(s.y,r),o=Math.max(s.x,o),i=Math.max(s.y,i);return new rt(n,r,o-n,i-r)}static Expand(e,n){const r=Math.min(n.minX,e.minX),o=Math.min(n.minY,e.minY),i=Math.max(n.maxX,e.maxX),s=Math.max(n.maxY,e.maxY);return new rt(r,o,i-r,s-o)}static ExpandBy(e,n){return new rt(e.minX-n,e.minY-n,e.width+n*2,e.height+n*2)}static Collides(e,n){return!(e.maxX<n.minX||e.minX>n.maxX||e.maxY<n.minY||e.minY>n.maxY)}static Contains(e,n){return e.minX<n.minX&&e.minY<n.minY&&e.maxY>n.maxY&&e.maxX>n.maxX}static Includes(e,n){return rt.Collides(e,n)||rt.Contains(e,n)}static ContainsPoint(e,n,r=0){return!(n.x<e.minX-r||n.y<e.minY-r||n.x>e.maxX+r||n.y>e.maxY+r)}static Common(e){let n=1/0,r=1/0,o=-1/0,i=-1/0;for(let s=0;s<e.length;s++){const a=e[s];n=Math.min(n,a.minX),r=Math.min(r,a.minY),o=Math.max(o,a.maxX),i=Math.max(i,a.maxY)}return new rt(n,r,o-n,i-r)}static Sides(e,n=0){const{corners:r}=e;return[[r[0],r[1]],[r[1],r[2]],[r[2],r[3]],[r[3],r[0]]]}static Resize(e,n,r,o,i=!1){const{minX:s,minY:a,maxX:l,maxY:c}=e;let{minX:u,minY:d,maxX:f,maxY:h}=e;switch(n){case"left":case"top_left":case"bottom_left":{u+=r;break}case"right":case"top_right":case"bottom_right":{f+=r;break}}switch(n){case"top":case"top_left":case"top_right":{d+=o;break}case"bottom":case"bottom_left":case"bottom_right":{h+=o;break}}const g=(f-u)/(l-s),y=(h-d)/(c-a),m=g<0,S=y<0;if(i){const C=(l-s)/(c-a),E=Math.abs(f-u),P=Math.abs(h-d),I=E*(y<0?1:-1)*(1/C),T=P*(g<0?1:-1)*C,M=C<E/P;switch(n){case"top_left":{M?d=h+I:u=f+T;break}case"top_right":{M?d=h+I:f=u-T;break}case"bottom_right":{M?h=d-I:f=u-T;break}case"bottom_left":{M?h=d-I:u=f+T;break}case"bottom":case"top":{const R=(u+f)/2,A=P*C;u=R-A/2,f=R+A/2;break}case"left":case"right":{const R=(d+h)/2,A=E/C;d=R-A/2,h=R+A/2;break}}}if(m){const C=f;f=u,u=C}if(S){const C=h;h=d,d=C}const x=new rt(u,d,Math.abs(f-u),Math.abs(h-d));return{box:x,scaleX:+(x.width/e.width*(g>0?1:-1)).toFixed(5),scaleY:+(x.height/e.height*(y>0?1:-1)).toFixed(5)}}equals(e){return rt.Equals(this,e)}static Equals(e,n){return n.x===e.x&&n.y===e.y&&n.w===e.w&&n.h===e.h}zeroFix(){return this.w=Math.max(1,this.w),this.h=Math.max(1,this.h),this}static ZeroFix(e){return new rt(e.x,e.y,Math.max(1,e.w),Math.max(1,e.h))}}function oqe(t){switch(t){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return t}}function iqe(t){switch(t){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return t}}function sqe(t){return t==="top_left"||t==="top_right"||t==="bottom_right"||t==="bottom_left"}class Ke{constructor(e,n,r,o,i,s){V(this,"a",1);V(this,"b",0);V(this,"c",0);V(this,"d",1);V(this,"e",0);V(this,"f",0);this.a=e,this.b=n,this.c=r,this.d=o,this.e=i,this.f=s}equals(e){return this===e||this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}multiply(e){const n=e,{a:r,b:o,c:i,d:s,e:a,f:l}=this;return this.a=r*n.a+i*n.b,this.c=r*n.c+i*n.d,this.e=r*n.e+i*n.f+a,this.b=o*n.a+s*n.b,this.d=o*n.c+s*n.d,this.f=o*n.e+s*n.f+l,this}rotate(e,n,r){return e===0?this:n===void 0?this.multiply(Ke.Rotate(e)):this.translate(n,r).multiply(Ke.Rotate(e)).translate(-n,-r)}translate(e,n){return this.multiply(Ke.Translate(e,n))}scale(e,n){return this.multiply(Ke.Scale(e,n))}invert(){const{a:e,b:n,c:r,d:o,e:i,f:s}=this,a=e*o-n*r;return this.a=o/a,this.b=n/-a,this.c=r/-a,this.d=e/a,this.e=(o*i-r*s)/-a,this.f=(n*i-e*s)/a,this}applyToPoint(e){return Ke.applyToPoint(this,e)}applyToPoints(e){return Ke.applyToPoints(this,e)}rotation(){return Ke.Rotation(this)}point(){return Ke.Point(this)}decomposed(){return Ke.Decompose(this)}toCssString(){return Ke.toCssString(this)}setTo(e){return Object.assign(this,e),this}decompose(){return Ke.Decompose(this)}clone(){return new Ke(this.a,this.b,this.c,this.d,this.e,this.f)}static Identity(){return new Ke(1,0,0,1,0,0)}static Translate(e,n){return new Ke(1,0,0,1,e,n)}static Rotate(e,n,r){if(e===0)return Ke.Identity();const o=Math.cos(e),i=Math.sin(e),s=new Ke(o,i,-i,o,0,0);return n===void 0?s:Ke.Compose(Ke.Translate(n,r),s,Ke.Translate(-n,-r))}static Scale(e,n,r,o){const i=new Ke(e,0,0,n,0,0);return r===void 0?i:Ke.Translate(r,o).multiply(i).translate(-r,-o)}static Multiply(e,n){return{a:e.a*n.a+e.c*n.b,c:e.a*n.c+e.c*n.d,e:e.a*n.e+e.c*n.f+e.e,b:e.b*n.a+e.d*n.b,d:e.b*n.c+e.d*n.d,f:e.b*n.e+e.d*n.f+e.f}}static Inverse(e){const n=e.a*e.d-e.b*e.c;return{a:e.d/n,b:e.b/-n,c:e.c/-n,d:e.a/n,e:(e.d*e.e-e.c*e.f)/-n,f:(e.b*e.e-e.a*e.f)/n}}static Absolute(e){const n=e.a*e.d-e.b*e.c;return{a:e.d/n,b:e.b/-n,c:e.c/-n,d:e.a/n,e:(e.d*e.e-e.c*e.f)/n,f:(e.b*e.e-e.a*e.f)/-n}}static Compose(...e){const n=Ke.Identity();for(let r=0,o=e.length;r<o;r++)n.multiply(e[r]);return n}static Point(e){return new $(e.e,e.f)}static Rotation(e){let n;if(e.a!==0||e.c!==0){const r=(e.a*e.a+e.c*e.c)**.5;n=Math.acos(e.a/r)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const r=(e.b*e.b+e.d*e.d)**.5;n=Gr+Math.acos(e.b/r)*(e.d>0?-1:1)}else n=0;return fF(n)}static Decompose(e){let n,r,o;if(e.a!==0||e.c!==0){const i=(e.a*e.a+e.c*e.c)**.5;n=i,r=(e.a*e.d-e.b*e.c)/i,o=Math.acos(e.a/i)*(e.c>0?-1:1)}else if(e.b!==0||e.d!==0){const i=(e.b*e.b+e.d*e.d)**.5;n=(e.a*e.d-e.b*e.c)/i,r=i,o=Gr+Math.acos(e.b/i)*(e.d>0?-1:1)}else n=0,r=0,o=0;return{x:e.e,y:e.f,scaleX:n,scaleY:r,rotation:fF(o)}}static Smooth(e,n=1e10){return e.a=Math.round(e.a*n)/n,e.b=Math.round(e.b*n)/n,e.c=Math.round(e.c*n)/n,e.d=Math.round(e.d*n)/n,e.e=Math.round(e.e*n)/n,e.f=Math.round(e.f*n)/n,e}static toCssString(e){return`matrix(${Se(e.a)}, ${Se(e.b)}, ${Se(e.c)}, ${Se(e.d)}, ${Se(e.e)}, ${Se(e.f)})`}static applyToPoint(e,n){return new $(e.a*n.x+e.c*n.y+e.e,e.b*n.x+e.d*n.y+e.f,n.z)}static applyToXY(e,n,r){return[e.a*n+e.c*r+e.e,e.b*n+e.d*r+e.f]}static applyToPoints(e,n){return n.map(r=>new $(e.a*r.x+e.c*r.y+e.e,e.b*r.x+e.d*r.y+e.f,r.z))}static applyToBounds(e,n){return new rt(e.e+n.minX,e.f+n.minY,n.width,n.height)}static From(e){return new Ke(e.a,e.b,e.c,e.d,e.e,e.f)}static Cast(e){return e instanceof Ke?e:Ke.From(e)}}function Yce(t,e){return e===0?t:Yce(e,t%e)}function Qce(t){const e=t.toString().split(".")[1];if(!e)return 1;const n=Math.pow(10,e.length),r=parseInt(e,10);return n/Yce(r,n)}function KM(t,e,n,r){const o=t.x-n.x,i=t.y-n.y,s=r.x-n.x,a=r.y-n.y,l=e.x-t.x,c=e.y-t.y,u=s*i-a*o,d=l*i-c*o,f=a*l-s*c;if(u===0||d===0||f===0)return null;if(f!==0){const h=u/f,g=d/f;if(0<=h&&h<=1&&0<=g&&g<=1)return $.AddXY(t,h*l,h*c)}return null}function _w(t,e,n,r){const o=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),i=2*((e.x-t.x)*(t.x-n.x)+(e.y-t.y)*(t.y-n.y)),s=n.x*n.x+n.y*n.y+t.x*t.x+t.y*t.y-2*(n.x*t.x+n.y*t.y)-r*r,a=i*i-4*o*s;if(a<0||a===0)return null;const l=Math.sqrt(a),c=(-i+l)/(2*o),u=(-i-l)/(2*o);if((c<0||c>1)&&(u<0||u>1))return null;const d=[];return 0<=c&&c<=1&&d.push($.Lrp(t,e,c)),0<=u&&u<=1&&d.push($.Lrp(t,e,u)),d.length===0?null:d}function aqe(t,e,n){const r=[];let o;for(let i=0,s=n.length-1;i<s;i++)o=KM(t,e,n[i],n[i+1]),o&&r.push(o);return r.length===0?null:r}function Zce(t,e,n){const r=[];let o;for(let i=1,s=n.length;i<s+1;i++)o=KM(t,e,n[i-1],n[i%n.length]),o&&r.push(o);return r.length===0?null:r}function lqe(t,e,n,r){let o=n.x-t.x,i=n.y-t.y;const s=Math.sqrt(o*o+i*i),a=(s*s-r*r+e*e)/(2*s),l=Math.sqrt(e*e-a*a);return o/=s,i/=s,[new $(t.x+o*a-i*l,t.y+i*a+o*l),new $(t.x+o*a+i*l,t.y+i*a-o*l)]}function cqe(t,e,n){const r=[];let o,i,s;for(let a=0,l=n.length;a<l;a++)o=n[a],i=n[(a+1)%n.length],s=_w(o,i,t,e),s&&r.push(...s);return r.length===0?null:r}function uqe(t,e,n){const r=[];let o,i,s;for(let a=1,l=n.length;a<l;a++)o=n[a-1],i=n[a],s=_w(o,i,t,e),s&&r.push(...s);return r.length===0?null:r}function iE(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function kB(t,e,n,r){return iE(t,n,r)!==iE(e,n,r)&&iE(t,e,n)!==iE(t,e,r)}function BQ(t,e){const n=new Map;let r,o,i,s;for(let a=0,l=t.length;a<l;a++)if(r=t[a],Ka(r,e)){const c=SP(r);n.has(c)||n.set(c,r)}for(let a=0,l=e.length;a<l;a++)if(r=e[a],Ka(r,t)){const c=SP(r);n.has(c)||n.set(c,r)}for(let a=0,l=t.length;a<l;a++){r=t[a],o=t[(a+1)%t.length];for(let c=0,u=e.length;c<u;c++){i=e[c],s=e[(c+1)%e.length];const d=KM(r,o,i,s);if(d!==null){const f=SP(d);n.has(f)||n.set(f,d)}}}return n.size===0?null:dqe([...n.values()])}function HQ(t,e,n,r){const o=new Map;for(let i=0,s=n?t.length:t.length-1;i<s;i++){const a=t[i],l=t[(i+1)%t.length];for(let c=0,u=r?e.length:e.length-1;c<u;c++){const d=e[c],f=e[(c+1)%e.length],h=KM(a,l,d,f);if(h!==null){const g=SP(h);o.has(g)||o.set(g,h)}}}return[...o.values()]}function SP(t){return`${t.x},${t.y}`}function dqe(t){const e=$.Average(t);return t.sort((n,r)=>$.Angle(e,n)-$.Angle(e,r))}function AB(t,e){let n,r,o,i;for(let s=0,a=t.length;s<a;s++){n=t[s],r=t[(s+1)%a];for(let l=0,c=e.length;l<c;l++)if(o=e[l],i=e[(l+1)%c],kB(n,r,o,i))return!0}return!1}function fqe(t,e){let n,r,o,i;for(let s=0,a=t.length;s<a;s++){n=t[s],r=t[(s+1)%a];for(let l=1,c=e.length;l<c;l++)if(o=e[l-1],i=e[l],kB(n,r,o,i))return!0}return!1}const vu={EXCLUDE_NON_STANDARD:{includeLabels:!1,includeInternal:!1},EXCLUDE_LABELS:{includeLabels:!1,includeInternal:!0}};class Bd{constructor(e){V(this,"isFilled",!1);V(this,"isClosed",!0);V(this,"isLabel",!1);V(this,"isInternal",!1);V(this,"debugColor");V(this,"ignore");V(this,"_vertices");V(this,"_bounds");V(this,"_area");V(this,"_length");this.isFilled=e.isFilled,this.isClosed=e.isClosed,this.isLabel=e.isLabel??!1,this.isInternal=e.isInternal??!1,this.debugColor=e.debugColor,this.ignore=e.ignore}isExcludedByFilter(e){return e?!!(this.isLabel&&!e.includeLabels||this.isInternal&&!e.includeInternal):!1}hitTestPoint(e,n=0,r=!1,o){return this.isClosed&&(this.isFilled||r)&&Ka(e,this.vertices)?!0:$.Dist2(e,this.nearestPoint(e))<=n*n}distanceToPoint(e,n=!1,r){return $.Dist(e,this.nearestPoint(e,r))*(this.isClosed&&(this.isFilled||n)&&Ka(e,this.vertices)?-1:1)}distanceToLineSegment(e,n,r){if($.Equals(e,n))return this.distanceToPoint(e,!1,r);const{vertices:o}=this;let i,s=1/0,a,l,c;for(let u=0;u<o.length;u++)l=o[u],c=$.NearestPointOnLineSegment(e,n,l,!0),a=$.Dist2(l,c),a<s&&(s=a,i=c);if(!i)throw Error("nearest point not found");return this.isClosed&&this.isFilled&&Ka(i,this.vertices)?-s:s}hitTestLineSegment(e,n,r=0,o){return this.distanceToLineSegment(e,n,o)<=r}intersectLineSegment(e,n,r){return(this.isClosed?Zce(e,n,this.vertices):aqe(e,n,this.vertices))??[]}intersectCircle(e,n,r){return(this.isClosed?cqe(e,n,this.vertices):uqe(e,n,this.vertices))??[]}intersectPolygon(e,n){return HQ(e,this.vertices,!0,this.isClosed)}intersectPolyline(e,n){return HQ(e,this.vertices,!1,this.isClosed)}interpolateAlongEdge(e,n){const{vertices:r}=this;if(e<=0)return r[0];const o=e*this.length;let i=0;for(let s=0;s<(this.isClosed?r.length:r.length-1);s++){const a=r[s],l=r[(s+1)%r.length],c=$.Dist(a,l),u=i+c;if(u>=o)return $.Lrp(a,l,mv(i,u,o));i=u}return this.isClosed?r[0]:r[r.length-1]}uninterpolateAlongEdge(e,n){const{vertices:r,length:o}=this;let i=null,s=1/0,a=0;for(let c=0;c<(this.isClosed?r.length:r.length-1);c++){const u=r[c],d=r[(c+1)%r.length],f=$.NearestPointOnLineSegment(u,d,e,!0),h=$.Dist(f,e);h<s&&(s=h,i={start:u,end:d,nearestPoint:f,distanceToStart:a}),a+=$.Dist(u,d)}return nn(i),(i.distanceToStart+$.Dist(i.start,i.nearestPoint))/o}nearestPointOnLineSegment(e,n){const{vertices:r}=this;let o,i=1/0,s,a,l;for(let c=0;c<r.length;c++)a=r[c],l=$.NearestPointOnLineSegment(e,n,a,!0),s=$.Dist2(a,l),s<i&&(i=s,o=l);if(!o)throw Error("nearest point not found");return o}isPointInBounds(e,n=0){const{bounds:r}=this;return!(e.x<r.minX-n||e.y<r.minY-n||e.x>r.maxX+n||e.y>r.maxY+n)}transform(e,n){return new $B(this,e,n)}get vertices(){return this._vertices||(this._vertices=this.getVertices(vu.EXCLUDE_LABELS)),this._vertices}getBounds(){return rt.FromPoints(this.vertices)}get bounds(){return this._bounds||(this._bounds=this.getBounds()),this._bounds}get center(){return this.bounds.center}get area(){return this._area||(this._area=this.getArea()),this._area}getArea(){if(!this.isClosed)return 0;const{vertices:e}=this;let n=0;for(let r=0,o=e.length;r<o;r++){const i=e[r],s=e[(r+1)%o];n+=i.x*s.y-s.x*i.y}return n/2}toSimpleSvgPath(){let e="";const{vertices:n}=this,r=n.length;if(r===0)return e;e+=`M${n[0].x},${n[0].y}`;for(let o=1;o<r;o++)e+=`L${n[o].x},${n[o].y}`;return this.isClosed&&(e+="Z"),e}get length(){return this._length?this._length:(this._length=this.getLength(vu.EXCLUDE_LABELS),this._length)}getLength(e){const n=this.getVertices(e??vu.EXCLUDE_LABELS);if(n.length===0)return 0;let r=n[0],o=0;for(let i=1;i<n.length;i++){const s=n[i];o+=$.Dist(r,s),r=s}return this.isClosed&&(o+=$.Dist(n[n.length-1],n[0])),o}}class $B extends Bd{constructor(n,r,o){super(n);V(this,"inverse");V(this,"decomposed");this.geometry=n,this.matrix=r,this.inverse=Ke.Inverse(r),this.decomposed=Ke.Decompose(r),o&&(o.isLabel!=null&&(this.isLabel=o.isLabel),o.isInternal!=null&&(this.isInternal=o.isInternal),o.debugColor!=null&&(this.debugColor=o.debugColor),o.ignore!=null&&(this.ignore=o.ignore)),nn(qa(this.decomposed.scaleX,this.decomposed.scaleY),"non-uniform scaling is not yet supported")}getVertices(n){return this.geometry.getVertices(n).map(r=>Ke.applyToPoint(this.matrix,r))}nearestPoint(n,r){return Ke.applyToPoint(this.matrix,this.geometry.nearestPoint(Ke.applyToPoint(this.inverse,n),r))}hitTestPoint(n,r=0,o,i){return this.geometry.hitTestPoint(Ke.applyToPoint(this.inverse,n),r/this.decomposed.scaleX,o,i)}distanceToPoint(n,r=!1,o){return this.geometry.distanceToPoint(Ke.applyToPoint(this.inverse,n),r,o)*this.decomposed.scaleX}distanceToLineSegment(n,r,o){return this.geometry.distanceToLineSegment(Ke.applyToPoint(this.inverse,n),Ke.applyToPoint(this.inverse,r),o)*this.decomposed.scaleX}hitTestLineSegment(n,r,o=0,i){return this.geometry.hitTestLineSegment(Ke.applyToPoint(this.inverse,n),Ke.applyToPoint(this.inverse,r),o/this.decomposed.scaleX,i)}intersectLineSegment(n,r,o){return Ke.applyToPoints(this.matrix,this.geometry.intersectLineSegment(Ke.applyToPoint(this.inverse,n),Ke.applyToPoint(this.inverse,r),o))}intersectCircle(n,r,o){return Ke.applyToPoints(this.matrix,this.geometry.intersectCircle(Ke.applyToPoint(this.inverse,n),r/this.decomposed.scaleX,o))}intersectPolygon(n,r){return Ke.applyToPoints(this.matrix,this.geometry.intersectPolygon(Ke.applyToPoints(this.inverse,n),r))}intersectPolyline(n,r){return Ke.applyToPoints(this.matrix,this.geometry.intersectPolyline(Ke.applyToPoints(this.inverse,n),r))}transform(n,r){return new $B(this.geometry,Ke.Multiply(n,this.matrix),{isLabel:(r==null?void 0:r.isLabel)??this.isLabel,isInternal:(r==null?void 0:r.isInternal)??this.isInternal,debugColor:(r==null?void 0:r.debugColor)??this.debugColor,ignore:(r==null?void 0:r.ignore)??this.ignore})}getSvgPathData(){throw new Error("Cannot get SVG path data for transformed geometry.")}}class Zs extends Bd{constructor(n){super({...n,isClosed:!0,isFilled:!1});V(this,"children",[]);V(this,"ignoredChildren",[]);for(const r of n.children)r.ignore?this.ignoredChildren.push(r):this.children.push(r);if(this.children.length===0)throw Error("Group2d must have at least one child")}getVertices(n){return this.isExcludedByFilter(n)?[]:this.children.filter(r=>!r.isExcludedByFilter(n)).flatMap(r=>r.getVertices(n))}nearestPoint(n,r){let o=1/0,i;const{children:s}=this;if(s.length===0)throw Error("no children");let a,l;for(const c of s)c.isExcludedByFilter(r)||(a=c.nearestPoint(n,r),l=$.Dist2(a,n),l<o&&(o=l,i=a));if(!i)throw Error("nearest point not found");return i}distanceToPoint(n,r=!1,o){let i=1/0;for(const s of this.children){if(s.isExcludedByFilter(o))continue;const a=s.distanceToPoint(n,r,o);a<i&&(i=a)}return i}hitTestPoint(n,r,o,i=vu.EXCLUDE_LABELS){return!!this.children.filter(s=>!s.isExcludedByFilter(i)).find(s=>s.hitTestPoint(n,r,o))}hitTestLineSegment(n,r,o,i=vu.EXCLUDE_LABELS){return!!this.children.filter(s=>!s.isExcludedByFilter(i)).find(s=>s.hitTestLineSegment(n,r,o))}intersectLineSegment(n,r,o){return this.children.flatMap(i=>i.isExcludedByFilter(o)?ps:i.intersectLineSegment(n,r,o))}intersectCircle(n,r,o){return this.children.flatMap(i=>i.isExcludedByFilter(o)?ps:i.intersectCircle(n,r,o))}intersectPolygon(n,r){return this.children.flatMap(o=>o.isExcludedByFilter(r)?ps:o.intersectPolygon(n,r))}intersectPolyline(n,r){return this.children.flatMap(o=>o.isExcludedByFilter(r)?ps:o.intersectPolyline(n,r))}interpolateAlongEdge(n,r){const o=this.getLength(r),i=n*o;let s=0;for(const a of this.children){if(a.isExcludedByFilter(r))continue;const l=a.length,c=s+l;if(c>=i)return a.interpolateAlongEdge(mv(s,c,i),r);s=c}return this.children[this.children.length-1].interpolateAlongEdge(1,r)}uninterpolateAlongEdge(n,r){const o=this.getLength(r);let i=null,s=1/0,a=0;for(const u of this.children){if(u.isExcludedByFilter(r))continue;const d=u.getLength(r),f=a+d,h=u.distanceToPoint(n,!1,r);h<s&&(s=h,i={startLength:a,endLength:f,child:u}),a=f}nn(i);const l=i.child.uninterpolateAlongEdge(n,r);return Pn(i.startLength,i.endLength,l)/o}transform(n){return new Zs({children:this.children.map(r=>r.transform(n)),isLabel:this.isLabel,debugColor:this.debugColor,ignore:this.ignore})}getArea(){return this.children[0].area}toSimpleSvgPath(){let n="";for(const o of this.children)n+=o.toSimpleSvgPath();const r=rt.FromPoints(this.vertices).corners;for(let o=0,i=r.length;o<i;o++){const s=r[o],a=r[(o-1+i)%i],l=s.dist(a),c=r[(o+1)%i],u=s.dist(c),d=s.clone().lrp(a,4/l),f=s,h=s.clone().lrp(c,4/u);n+=`M${d.x},${d.y} L${f.x},${f.y} L${h.x},${h.y} `}return n}getLength(n){let r=0;for(const o of this.children)o.isExcludedByFilter(n)||(r+=o.length);return r}getSvgPathData(){return this.children.map((n,r)=>n.isLabel?"":n.getSvgPathData(r===0)).join(" ")}}function hqe(t=!0){const[e,n]=v.useState(0),r=Ee();v.useEffect(()=>{if(!t)return;const o=()=>n(i=>i+1);return r.on("tick",o),()=>{r.off("tick",o)}},[r,t])}const pqe=Ii(function({showStroke:e=!0,showVertices:n=!0,showClosestPointOnOutline:r=!0}){const o=Ee();hqe(r);const i=o.getZoomLevel(),s=o.getRenderingShapes(),{inputs:{currentPagePoint:a}}=o;return w.jsx("svg",{style:{position:"absolute",pointerEvents:"none",zIndex:999999999,top:0,left:0,overflow:"visible"},children:s.map(l=>{const c=o.getShape(l.id);if(c.type==="group")return null;const u=o.getShapeGeometry(c),d=o.getShapePageTransform(c),f=o.getPointInShapeSpace(c,a),h=u.nearestPoint(f),g=u.distanceToPoint(f,!0),y=Math.abs(g)*i,m=g<0,{vertices:S}=u;return w.jsxs("g",{transform:d.toCssString(),strokeLinecap:"round",strokeLinejoin:"round",children:[e&&w.jsx("g",{stroke:u.debugColor??"red",opacity:"1",strokeWidth:2/i,fill:"none",children:w.jsx(Jce,{geometry:u})}),n&&S.map((x,C)=>w.jsx("circle",{cx:x.x,cy:x.y,r:2/i,fill:`hsl(${vv(C,[0,S.length-1],[120,200])}, 100%, 50%)`,stroke:"black",strokeWidth:1/i},`v${C}`)),r&&y<150&&w.jsx("line",{x1:h.x,y1:h.y,x2:f.x,y2:f.y,opacity:1-y/150,stroke:m?"goldenrod":"dodgerblue",strokeWidth:2/i})]},l.id+"_outline")})})});function Jce({geometry:t}){return t instanceof Zs?w.jsx("g",{stroke:t.debugColor,children:[...t.children,...t.ignoredChildren].map((e,n)=>w.jsx(Jce,{geometry:e},n))}):w.jsx("path",{d:t.toSimpleSvgPath(),stroke:t.debugColor})}function eue(t){return MHe(t)}function tue(){const t=Ee(),e=F7e("userIds",()=>eue(t.getCollaborators().map(n=>n.userId)).sort(),{isEqual:(n,r)=>{var o;return n.join(",")===((o=r.join)==null?void 0:o.call(r,","))}},[t]);return Ie(e)}function GM(t){const e=Ee();return Ie(`latestPresence:${t}`,()=>e.getCollaborators().find(r=>r.userId===t),[e,t])??null}const gqe=Ii(function(){return tue().map(n=>w.jsx(mqe,{collaboratorId:n},n))}),mqe=Ii(function({collaboratorId:e}){const n=Ee(),r=GM(e),o=yqe(n,r);if(!(r&&r.currentPageId===n.getCurrentPageId()))return null;switch(o){case"inactive":{const{followingUserId:i,highlightedUserIds:s}=n.getInstanceState();if(!(i===r.userId||s.includes(r.userId)))return null;break}case"idle":{const{highlightedUserIds:i}=n.getInstanceState();if(r.followingUserId===n.user.getId()&&!(r.chatMessage||i.includes(r.userId)))return null;break}}return w.jsx(vqe,{latestPresence:r})}),vqe=Ii(function({latestPresence:e}){const n=Ee(),{CollaboratorBrush:r,CollaboratorScribble:o,CollaboratorCursor:i,CollaboratorHint:s,CollaboratorShapeIndicator:a}=$r(),l=n.getZoomLevel(),c=n.getViewportPageBounds(),{userId:u,chatMessage:d,brush:f,scribbles:h,selectedShapeIds:g,userName:y,cursor:m,color:S}=e;if(!m)return null;const x=!(m.x<c.minX-12/l||m.y<c.minY-16/l||m.x>c.maxX-12/l||m.y>c.maxY-16/l);return w.jsxs(w.Fragment,{children:[f&&r?w.jsx(r,{className:"tl-collaborator__brush",userId:u,brush:f,color:S,opacity:.1},u+"_brush"):null,x&&i?w.jsx(i,{className:"tl-collaborator__cursor",userId:u,point:m,color:S,zoom:l,name:y!=="New User"?y:null,chatMessage:d??""},u+"_cursor"):s?w.jsx(s,{className:"tl-collaborator__cursor-hint",userId:u,point:m,color:S,zoom:l,viewport:c},u+"_cursor_hint"):null,o&&h.length?w.jsx(w.Fragment,{children:h.map(C=>w.jsx(o,{className:"tl-collaborator__scribble",userId:u,scribble:C,color:S,zoom:l,opacity:C.color==="laser"?.5:.1},u+"_scribble_"+C.id))}):null,a&&g.filter(C=>!n.isShapeHidden(C)).map(C=>w.jsx(a,{className:"tl-collaborator__shape-indicator",userId:u,shapeId:C,color:S,opacity:.5},u+"_"+C))]})});function UQ(t,e){return e>t.options.collaboratorInactiveTimeoutMs?"inactive":e>t.options.collaboratorIdleTimeoutMs?"idle":"active"}function yqe(t,e){const n=v.useRef((e==null?void 0:e.lastActivityTimestamp)??-1),[r,o]=v.useState(()=>UQ(t,Date.now()-n.current));return v.useEffect(()=>{const i=t.timers.setInterval(()=>{o(UQ(t,Date.now()-n.current))},t.options.collaboratorCheckIntervalMs);return()=>clearInterval(i)},[t]),e&&(n.current=e.lastActivityTimestamp??1/0),r}function bqe(){const t=Ee(),e=Ie("is menu open",()=>t.menus.hasAnyOpenMenus(),[t]),[n,r]=v.useState(!1),o=e||n,i=OB(),s=v.useRef({isDown:!1,isDragging:!1,start:new $}),a=v.useCallback(u=>{u.button===0&&(r(!0),s.current={isDown:!0,isDragging:!1,start:new $(u.clientX,u.clientY)}),t.menus.clearOpenMenus()},[t]),l=v.useCallback(u=>{var d,f,h;if(s.current.isDown){if(s.current.isDragging){(d=i.onPointerMove)==null||d.call(i,u);return}if($.Dist2(s.current.start,new $(u.clientX,u.clientY))>t.options.dragDistanceSquared){s.current={...s.current,isDown:!0,isDragging:!0};const{x:g,y}=s.current.start;(f=i.onPointerDown)==null||f.call(i,{...u,clientX:g,clientY:y,button:0}),(h=i.onPointerMove)==null||h.call(i,u)}}},[i,t]),c=v.useCallback(u=>{var d;(d=i.onPointerUp)==null||d.call(i,u),r(!1),s.current={isDown:!1,isDragging:!1,start:new $(u.clientX,u.clientY)}},[i]);return o&&w.jsx("div",{className:"tlui-menu-click-capture","data-testid":"menu-click-capture.content",...i,onPointerDown:a,onPointerMove:l,onPointerUp:c})}const gF=(t,e)=>t.props===e.props&&t.meta===e.meta,nue=v.memo(function({id:e,shape:n,util:r,index:o,backgroundIndex:i,opacity:s,dprMultiple:a}){const l=Ee(),{ShapeErrorFallback:c}=$r(),u=v.useRef(null),d=v.useRef(null);v.useEffect(()=>Al("load fonts",()=>{const y=l.fonts.getShapeFontFaces(e);l.fonts.requestFonts(y)}),[l,e]);const f=v.useRef({transform:"",clipPath:"none",width:0,height:0,x:0,y:0,isCulled:!1});eh("set shape stuff",()=>{const y=l.getShape(e);if(!y)return;const m=f.current,S=l.getShapeClipPath(e)??"none";S!==m.clipPath&&(is(u.current,"clip-path",S),is(d.current,"clip-path",S),m.clipPath=S);const x=l.getShapePageTransform(e),C=Ke.toCssString(x),E=l.getShapeGeometry(y).bounds;C!==m.transform&&(is(u.current,"transform",C),is(d.current,"transform",C),m.transform=C);const P=E.w%a,I=E.h%a,T=P===0?E.w:E.w+(a-P),M=I===0?E.h:E.h+(a-I);(T!==m.width||M!==m.height)&&(is(u.current,"width",Math.max(T,a)+"px"),is(u.current,"height",Math.max(M,a)+"px"),is(d.current,"width",Math.max(T,a)+"px"),is(d.current,"height",Math.max(M,a)+"px"),m.width=T,m.height=M)},[l]),v.useLayoutEffect(()=>{const y=u.current,m=d.current;is(y,"opacity",s),is(m,"opacity",s),is(y,"z-index",o),is(m,"z-index",i)},[s,o,i]),eh("set display",()=>{if(!l.getShape(e))return;const S=l.getCulledShapes().has(e);S!==f.current.isCulled&&(is(u.current,"display",S?"none":"block"),is(d.current,"display",S?"none":"block"),f.current.isCulled=S)},[l]);const h=v.useCallback(y=>l.annotateError(y,{origin:"shape",willCrashApp:!1}),[l]);if(!n)return null;const g="fill"in n.props&&n.props.fill!=="none";return w.jsxs(w.Fragment,{children:[r.backgroundComponent&&w.jsx("div",{ref:d,className:"tl-shape tl-shape-background","data-shape-type":n.type,"data-shape-id":n.id,draggable:!1,children:w.jsx(vx,{fallback:c,onError:h,children:w.jsx(oue,{shape:n,util:r})})}),w.jsx("div",{ref:u,className:"tl-shape","data-shape-type":n.type,"data-shape-is-filled":g,"data-shape-id":n.id,draggable:!1,children:w.jsx(vx,{fallback:c,onError:h,children:w.jsx(rue,{shape:n,util:r})})})]})}),rue=v.memo(function({shape:e,util:n}){return DM("InnerShape:"+e.type,()=>n.component(n.editor.store.unsafeGetWithoutCapture(e.id)),[n,e.id])},(t,e)=>gF(t.shape,e.shape)&&t.util===e.util),oue=v.memo(function({shape:e,util:n}){return DM("InnerShape:"+e.type,()=>{var r;return(r=n.backgroundComponent)==null?void 0:r.call(n,n.editor.store.unsafeGetWithoutCapture(e.id))},[n,e.id])},(t,e)=>t.shape.props===e.shape.props&&t.shape.meta===e.shape.meta&&t.util===e.util);function Sqe({className:t}){const e=Ee(),{SelectionBackground:n,Background:r,SvgDefs:o,ShapeIndicators:i}=$r(),s=v.useRef(null),a=v.useRef(null),l=v.useRef(null),c=Ko();nqe(s),XWe(),GWe(),eqe(s),QWe(s);const u=v.useRef({lodDisableTextOutline:!1,allowTextOutline:!0});eh("position layers",function(){const{x:C,y:E,z:P}=e.getCamera();if(u.current.allowTextOutline&&vr.isSafari&&(c.style.setProperty("--tl-text-outline","none"),u.current.allowTextOutline=!1),u.current.allowTextOutline&&P<e.options.textShadowLod!==u.current.lodDisableTextOutline){const M=P<e.options.textShadowLod;c.style.setProperty("--tl-text-outline",M?"none":"var(--tl-text-outline-reference)"),u.current.lodDisableTextOutline=M}const I=P>=1?vv(P,[1,8],[.125,.5],!0):vv(P,[.1,1],[-2,.125],!0),T=`scale(${Se(P)}) translate(${Se(C+I)}px,${Se(E+I)}px)`;is(a.current,"transform",T),is(l.current,"transform",T)},[e,c]);const d=OB(),f=Ie("shapeSvgDefs",()=>{const x=new Map;for(const C of Mo(e.shapeUtils)){if(!C)return;const E=C.getCanvasSvgDefs();for(const{key:P,component:I}of E)x.has(P)||x.set(P,w.jsx(I,{},P))}return[...x.values()]},[e]),h=Ie("debug_shapes",()=>so.hideShapes.get(),[so]),g=Ie("debug_svg",()=>so.debugSvg.get(),[so]),y=Ie("debug_geometry",()=>so.debugGeometry.get(),[so]),m=Ie("isEditingAnything",()=>e.getEditingShapeId()!==null,[e]),S=Ie("isSelectingAnything",()=>!!e.getSelectedShapeIds().length,[e]);return w.jsxs(w.Fragment,{children:[w.jsxs("div",{ref:s,draggable:!1,"data-iseditinganything":m,"data-isselectinganything":S,className:he("tl-canvas",t),"data-testid":"canvas",...d,children:[w.jsx("svg",{className:"tl-svg-context",children:w.jsxs("defs",{children:[f,w.jsx(Dqe,{}),w.jsx(jqe,{}),o&&w.jsx(o,{})]})}),r&&w.jsx("div",{className:"tl-background__wrapper",children:w.jsx(r,{})}),w.jsx(wqe,{}),w.jsxs("div",{ref:a,className:"tl-html-layer tl-shapes",draggable:!1,children:[w.jsx(zqe,{}),n&&w.jsx(Fqe,{}),h?null:g?w.jsx(Rqe,{}):w.jsx(Aqe,{})]}),w.jsx("div",{className:"tl-overlays",children:w.jsxs("div",{ref:l,className:"tl-html-layer",children:[y?w.jsx(pqe,{}):null,w.jsx(Eqe,{}),w.jsx(Cqe,{}),w.jsx(Pqe,{}),i&&w.jsx(i,{}),w.jsx($qe,{}),w.jsx(_qe,{}),w.jsx(Nqe,{}),w.jsx(Iqe,{}),w.jsx(Oqe,{}),w.jsx(gqe,{})]})}),w.jsx(Bqe,{})]}),w.jsx(bqe,{}),w.jsx(xqe,{})]})}function xqe(){const{InFrontOfTheCanvas:t}=$r();return t?w.jsx(t,{}):null}function wqe(){const t=Ee(),e=Ie("gridSize",()=>t.getDocumentSettings().gridSize,[t]),{x:n,y:r,z:o}=Ie("camera",()=>t.getCamera(),[t]),i=Ie("isGridMode",()=>t.getInstanceState().isGridMode,[t]),{Grid:s}=$r();return s&&i?w.jsx(s,{x:n,y:r,z:o,size:e}):null}function Cqe(){const t=Ee(),e=Ie("scribbles",()=>t.getInstanceState().scribbles,[t]),n=Ie("zoomLevel",()=>t.getZoomLevel(),[t]),{Scribble:r}=$r();return r&&e.length?e.map(o=>w.jsx(r,{className:"tl-user-scribble",scribble:o,zoom:n},o.id)):null}function Eqe(){const t=Ee(),e=Ie("brush",()=>t.getInstanceState().brush,[t]),{Brush:n}=$r();return n&&e?w.jsx(n,{className:"tl-user-brush",brush:e}):null}function Pqe(){const t=Ee(),e=Ie("zoomBrush",()=>t.getInstanceState().zoomBrush,[t]),{ZoomBrush:n}=$r();return n&&e?w.jsx(n,{className:"tl-user-brush tl-zoom-brush",brush:e}):null}function _qe(){const t=Ee(),e=Ie("snapLines",()=>t.snaps.getIndicators(),[t]),n=Ie("zoomLevel",()=>t.getZoomLevel(),[t]),{SnapIndicator:r}=$r();return r&&e.length>0?e.map(o=>w.jsx(r,{className:"tl-user-snapline",line:o,zoom:n},o.id)):null}function Iqe(){const t=Ee(),e=Ie("handles shapeIdWithHandles",()=>{const{isReadonly:n,isChangingStyle:r}=t.getInstanceState();if(n||r)return!1;const o=t.getOnlySelectedShape();return!o||!t.getShapeHandles(o)?!1:o.id},[t]);return e?w.jsx(Tqe,{shapeId:e}):null}function Tqe({shapeId:t}){const e=Ee(),{Handles:n}=$r(),r=Ie("zoomLevel",()=>e.getZoomLevel(),[e]),o=Ie("coarse pointer",()=>e.getInstanceState().isCoarsePointer,[e]),i=Ie("handles transform",()=>e.getShapePageTransform(t),[e,t]),s=Ie("handles",()=>{const l=e.getShapeHandles(t);if(!l)return null;const c=(o?e.options.coarseHandleRadius:e.options.handleRadius)/r*2;return l.filter(u=>u.type!=="virtual"||!l.some(d=>d!==u&&d.type==="vertex"&&$.Dist(u,d)<c)).sort(u=>u.type==="vertex"?1:-1)},[e,r,o,t]),a=Ie("isHidden",()=>e.isShapeHidden(t),[e,t]);return!n||!s||!i||a?null:w.jsx(n,{children:w.jsx("g",{transform:Ke.toCssString(i),children:s.map(l=>w.jsx(Mqe,{shapeId:t,handle:l,zoom:r,isCoarse:o},l.id))})})}function Mqe({shapeId:t,handle:e,zoom:n,isCoarse:r}){const o=tqe(t,e.id),{Handle:i}=$r();return i?w.jsx("g",{role:"button","aria-label":e.label||"handle",transform:`translate(${e.x}, ${e.y})`,...o,children:w.jsx(i,{shapeId:t,handle:e,zoom:n,isCoarse:r})}):null}function Oqe(){const{Overlays:t}=$r();return t?w.jsx("div",{className:"tl-custom-overlays tl-overlays__item",children:w.jsx(t,{})}):null}function Rqe(){const t=Ee(),e=Ie("rendering shapes",()=>t.getRenderingShapes(),[t]),n=Ie("dpr multiple",()=>Qce(Math.floor(t.getInstanceState().devicePixelRatio*100)/100),[t]);return e.map(r=>w.jsxs(v.Fragment,{children:[w.jsx(nue,{...r,dprMultiple:n}),w.jsx(Lqe,{id:r.id,mode:"iframe"})]},r.id+"_fragment"))}function kqe(){const t=Ee(),e=v.useRef(new Set);return eh("reflow for culled shapes",()=>{const n=t.getCulledShapes();if(e.current.size===n.size&&[...n].every(o=>e.current.has(o)))return;e.current=n;const r=document.getElementsByClassName("tl-canvas");r.length!==0&&r[0].offsetHeight},[t]),null}function Aqe(){const t=Ee(),e=Ie("rendering shapes",()=>t.getRenderingShapes(),[t]),n=Ie("dpr multiple",()=>Qce(Math.floor(t.getInstanceState().devicePixelRatio*100)/100),[t]);return w.jsxs(w.Fragment,{children:[e.map(r=>w.jsx(nue,{...r,dprMultiple:n},r.id+"_shape")),vr.isSafari&&w.jsx(kqe,{})]})}function $qe(){const t=Ee(),{ShapeIndicator:e}=$r(),n=Ie("hinting shape ids",()=>j5(t.getHintingShapeIds()),[t]);return!n.length||!e?null:n.map(r=>w.jsx(e,{className:"tl-user-indicator__hint",shapeId:r},r+"_hinting"))}function Dqe(){return w.jsxs("g",{id:Ic("cursor"),children:[w.jsxs("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[w.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),w.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),w.jsxs("g",{fill:"white",transform:"translate(-12,-12)",children:[w.jsx("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),w.jsx("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),w.jsxs("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[w.jsx("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),w.jsx("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function jqe(){const t=Ic("cursor_hint");return w.jsx("path",{id:t,fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function Lqe({id:t,mode:e}){const n=Ee(),[r,o]=v.useState(null),i=Ie("is in root",()=>{const s=n.getShape(t);return(s==null?void 0:s.parentId)===n.getCurrentPageId()},[n,t]);return v.useEffect(()=>{if(!i)return;let s=null;const a=Al("shape to svg",async()=>{const l=Math.random();s=l;const u=n.isShapeOfType(t,"frame")?0:10;let d=n.getShapePageBounds(t);if(!d)return;d=d.clone().expandBy(u);const f=await n.getSvgString([t],{padding:u});if(s!==l||!f)return;const h=`data:image/svg+xml;utf8,${encodeURIComponent(f.svg)}`;o({src:h,bounds:d})});return()=>{s=null,a()}},[n,t,i]),!i||!r?null:e==="iframe"?w.jsx("iframe",{src:r.src,width:r.bounds.width,height:r.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,border:"none",transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}}):w.jsx("img",{src:r.src,width:r.bounds.width,height:r.bounds.height,referrerPolicy:"no-referrer",style:{position:"absolute",top:0,left:0,transform:`translate(${r.bounds.x}px, ${r.bounds.maxY+12}px)`,outline:"1px solid black",maxWidth:"none"}})}function Nqe(){const t=Ee(),e=Ie("selection rotation",function(){return t.getSelectionRotation()},[t]),n=Ie("selection bounds",()=>t.getSelectionRotatedPageBounds(),[t]),{SelectionForeground:r}=$r();return!n||!r?null:w.jsx(r,{bounds:n,rotation:e})}function Fqe(){const t=Ee(),e=Ie("selection rotation",()=>t.getSelectionRotation(),[t]),n=Ie("selection bounds",()=>t.getSelectionRotatedPageBounds(),[t]),{SelectionBackground:r}=$r();return!n||!r?null:w.jsx(r,{bounds:n,rotation:e})}function zqe(){const{OnTheCanvas:t}=$r();return t?w.jsx(t,{}):null}function Bqe(){const t=Ee(),e=Ie("camera state",()=>t.getCameraState(),[t]);return w.jsx("div",{className:he("tl-hit-test-blocker",{"tl-hit-test-blocker__hidden":e==="idle"})})}function Hqe({className:t,zoom:e,point:n,color:r,viewport:o,opacity:i=1}){const s=v.useRef(null);xw(s,zr(n.x,o.minX+5/e,o.maxX-5/e),zr(n.y,o.minY+5/e,o.maxY-5/e),1/e,$.Angle(o.center,n));const a=Ic("cursor_hint");return w.jsxs("svg",{ref:s,className:he("tl-overlays__item",t),children:[w.jsx("use",{href:`#${a}`,color:r,strokeWidth:3,stroke:"var(--color-background)"}),w.jsx("use",{href:`#${a}`,color:r,opacity:i})]})}const WQ=v.memo(function({className:e,zoom:n,point:r,color:o,name:i,chatMessage:s}){const a=v.useRef(null);xw(a,r==null?void 0:r.x,r==null?void 0:r.y,1/n);const l=Ic("cursor");return r?w.jsxs("div",{ref:a,className:he("tl-overlays__item",e),children:[w.jsx("svg",{className:"tl-cursor",children:w.jsx("use",{href:`#${l}`,color:o})}),s?w.jsxs(w.Fragment,{children:[i&&w.jsx("div",{className:"tl-nametag-title",style:{color:o},children:i}),w.jsx("div",{className:"tl-nametag-chat",style:{backgroundColor:o},children:s})]}):i&&w.jsx("div",{className:"tl-nametag",style:{backgroundColor:o},children:i})]}):null});function Uqe({x:t,y:e,z:n,size:r}){const o=xg("grid"),i=Ee(),{gridSteps:s}=i.options;return w.jsxs("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("defs",{children:s.map(({min:a,mid:l,step:c},u)=>{const d=c*r*n,f=.5+t*n,h=.5+e*n,g=f>0?f%d:d+f%d,y=h>0?h%d:d+h%d,m=n<l?vv(n,[a,l],[0,1]):1;return w.jsx("pattern",{id:PB(o,`${c}`),width:d,height:d,patternUnits:"userSpaceOnUse",children:w.jsx("circle",{className:"tl-grid-dot",cx:g,cy:y,r:1,opacity:m})},u)})}),s.map(({step:a},l)=>w.jsx("rect",{width:"100%",height:"100%",fill:`url(#${o}_${a})`},l))]})}function Wqe({handle:t,isCoarse:e,className:n,zoom:r}){const o=Ee(),i=(e?o.options.coarseHandleRadius:o.options.handleRadius)/r;if(t.type==="clone"){const a=3/r,l=`M0,${-a} A${a},${a} 0 0,1 0,${a}`,c=HWe.indexOf(t.id);return w.jsxs("g",{className:he(`tl-handle tl-handle__${t.type}`,n),children:[w.jsx("circle",{className:"tl-handle__bg",r:i}),w.jsx("path",{className:"tl-handle__fg",d:l,transform:`rotate(${-90+90*c})`})]})}const s=(t.type==="create"&&e?3:4)/Math.max(r,.25);return w.jsxs("g",{className:he(`tl-handle tl-handle__${t.type}`,n),children:[w.jsx("circle",{className:"tl-handle__bg",r:i}),w.jsx("circle",{className:"tl-handle__fg",r:s})]})}const Vqe=({children:t})=>w.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:t}),qqe=()=>{const{Spinner:t}=$r();return w.jsx(Ahe,{children:t?w.jsx(t,{}):null})};function DB(t,e=!0){const n=t.length;if(n<2)return"";let r=t[0],o=t[1];if(n===2)return`M${hr(r)}L${hr(o)}`;let i="";for(let s=2,a=n-1;s<a;s++)r=t[s],o=t[s+1],i+=ha(r,o);return e?`M${ha(t[0],t[1])}Q${hr(t[1])}${ha(t[1],t[2])}T${i}${ha(t[n-1],t[0])}${ha(t[0],t[1])}Z`:`M${hr(t[0])}Q${hr(t[1])}${ha(t[1],t[2])}${t.length>3?"T":""}${i}L${hr(t[n-1])}`}function VQ({scribble:t,zoom:e,color:n,opacity:r,className:o}){return t.points.length?w.jsx("svg",{className:o&&he("tl-overlays__item",o),children:w.jsx("path",{className:"tl-scribble",d:DB(t.points,!1),stroke:n??`var(--color-${t.color})`,fill:"none",strokeWidth:8/e,opacity:r??t.opacity})}):null}function Kqe({bounds:t,rotation:e}){const n=Ee(),r=v.useRef(null),o=Ie("only selected shape",()=>n.getOnlySelectedShape(),[n]),i=o?n.getShapeUtil(o).expandSelectionOutlinePx(o):0;return xw(r,t==null?void 0:t.x,t==null?void 0:t.y,1,e,{x:-i,y:-i}),t=i instanceof rt?t.clone().expand(i).zeroFix():t.clone().expandBy(i).zeroFix(),w.jsx("svg",{ref:r,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:w.jsx("rect",{className:he("tl-selection__fg__outline"),width:Se(t.width),height:Se(t.height)})})}const Gqe=()=>w.jsx("div",{className:"tl-shape-error-boundary"}),Xqe=v.memo(({shape:t,util:e})=>DM("Indicator: "+t.type,()=>e.indicator(e.editor.store.unsafeGetWithoutCapture(t.id))),(t,e)=>t.shape.props===e.shape.props&&t.shape.meta===e.shape.meta),Yqe=v.memo(({editor:t,id:e})=>{const n=Ie("shape for indicator",()=>t.store.get(e),[t,e]),{ShapeIndicatorErrorFallback:r}=$r();return!n||n.isLocked?null:w.jsx(vx,{fallback:r,onError:o=>t.annotateError(o,{origin:"react.shapeIndicator",willCrashApp:!1}),children:w.jsx(Xqe,{shape:n,util:t.getShapeUtil(n)},n.id)})}),qQ=v.memo(function({shapeId:e,className:n,color:r,hidden:o,opacity:i}){const s=Ee(),a=v.useRef(null);return eh("indicator transform",()=>{if(o)return;const l=a.current;if(!l)return;const c=s.getShapePageTransform(e);c&&l.style.setProperty("transform",c.toCssString())},[s,e,o]),v.useLayoutEffect(()=>{const l=a.current;l&&l.style.setProperty("display",o?"none":"block")},[o]),w.jsx("svg",{ref:a,className:he("tl-overlays__item",n),children:w.jsx("g",{className:"tl-shape-indicator",stroke:r??"var(--color-selected)",opacity:i,children:w.jsx(Yqe,{editor:s,id:e})})})}),Qqe=()=>w.jsx("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"}),iue=v.memo(function({hideAll:e,showAll:n}){const r=Ee();if(e&&n)throw Error("You cannot set both hideAll and showAll props to true, cmon now");const o=v.useRef(new Set),i=Ie("should display selected ids",()=>{const l=o.current,c=new Set,u=r.getInstanceState(),d=u.isChangingStyle,f=r.isInAny("select.idle","select.editing_shape"),h=r.isInAny("select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle");if(d||!(f||h))return o.current=c,c;for(const g of r.getSelectedShapeIds())c.add(g);if(f&&u.isHoveringCanvas&&!u.isCoarsePointer){const g=r.getHoveredShapeId();g&&c.add(g)}if(l.size!==c.size)return o.current=c,c;for(const g of c)if(!l.has(g))return o.current=c,c;return l},[r]),s=Ie("rendering shapes",()=>r.getRenderingShapes(),[r]),{ShapeIndicator:a}=$r();return a?s.map(({id:l})=>w.jsx(a,{shapeId:l,hidden:!n&&(e||!i.has(l))},l+"_indicator")):null});function Zqe({points:t,zoom:e}){const n=2.5/e,r=t.reduce((f,h)=>Math.min(f,h.x),1/0),o=t.reduce((f,h)=>Math.max(f,h.x),-1/0),i=t.reduce((f,h)=>Math.min(f,h.y),1/0),s=t.reduce((f,h)=>Math.max(f,h.y),-1/0),a=t.some(f=>f.x===r&&f.y===i);let l,c,u,d;return a?(l=r,c=i,u=o,d=s):(l=r,c=s,u=o,d=i),w.jsxs("g",{className:"tl-snap-indicator",stroke:"lime",children:[w.jsx("line",{x1:l,y1:c,x2:u,y2:d}),t.map((f,h)=>w.jsx("g",{transform:`translate(${f.x},${f.y})`,children:w.jsx("path",{className:"tl-snap-point",d:`M ${-n},${-n} L ${n},${n} M ${-n},${n} L ${n},${-n}`})},h))]})}function Jqe({gaps:t,direction:e,zoom:n}){const r=3.5/n;let o=[-1/0,1/0],i=null;const s=e==="horizontal";for(const l of t){if(i=cc(o[0],o[1],s?l.startEdge[0].y:l.startEdge[0].x,s?l.startEdge[1].y:l.startEdge[1].x),i)o=i;else continue;if(i=cc(o[0],o[1],s?l.endEdge[0].y:l.endEdge[0].x,s?l.endEdge[1].y:l.endEdge[1].x),i)o=i;else continue}if(o===null)return null;const a=(o[0]+o[1])/2;return w.jsx("g",{className:"tl-snap-indicator",stroke:"cyan",children:t.map(({startEdge:l,endEdge:c},u)=>w.jsx(v.Fragment,{children:s?w.jsxs(w.Fragment,{children:[w.jsx("line",{x1:l[0].x,y1:a-2*r,x2:l[1].x,y2:a+2*r}),w.jsx("line",{x1:c[0].x,y1:a-2*r,x2:c[1].x,y2:a+2*r}),w.jsx("line",{x1:l[0].x,y1:a,x2:c[0].x,y2:a}),w.jsx("line",{x1:(l[0].x+c[0].x)/2,y1:a-r,x2:(l[0].x+c[0].x)/2,y2:a+r})]}):w.jsxs(w.Fragment,{children:[w.jsx("line",{x1:a-2*r,y1:l[0].y,x2:a+2*r,y2:l[1].y}),w.jsx("line",{x1:a-2*r,y1:c[0].y,x2:a+2*r,y2:c[1].y}),w.jsx("line",{x1:a,y1:l[0].y,x2:a,y2:c[0].y}),w.jsx("line",{x1:a-r,y1:(l[0].y+c[0].y)/2,x2:a+r,y2:(l[0].y+c[0].y)/2})]})},u))})}function eKe({className:t,line:e,zoom:n}){return w.jsx("svg",{className:he("tl-overlays__item",t),children:e.type==="points"?w.jsx(Zqe,{...e,zoom:n}):e.type==="gaps"?w.jsx(Jqe,{...e,zoom:n}):null})}function tKe(){return w.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16","aria-hidden":"false",children:w.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[w.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),w.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:w.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const nKe=()=>null;function sue(t,e){const n=v.useRef(t);return e(t,n.current)?n.current:(n.current=t,t)}const rKe=(t,e)=>(t??(t=null),e??(e=null),t===e?!0:!t||!e?!1:Z_(t,e));function If(t){return sue(t,rKe)}const oKe=(t,e)=>(t??(t=null),e??(e=null),t===e?!0:!t||!e?!1:Lae(t,e));function ry(t){return sue(t,oKe)}const aue=v.createContext(null);function iKe({overrides:t={},children:e}){const n=ry(t),r=v.useMemo(()=>({Background:$We,Brush:qD,Canvas:Sqe,CollaboratorBrush:qD,CollaboratorCursor:WQ,CollaboratorHint:Hqe,CollaboratorScribble:VQ,CollaboratorShapeIndicator:qQ,Cursor:WQ,Grid:Uqe,Handle:Wqe,Handles:Vqe,InFrontOfTheCanvas:null,LoadingScreen:qqe,OnTheCanvas:null,Overlays:null,Scribble:VQ,SelectionBackground:null,SelectionForeground:Kqe,ShapeIndicator:qQ,ShapeIndicators:iue,SnapIndicator:eKe,Spinner:tKe,SvgDefs:nKe,ZoomBrush:qD,ErrorFallback:cue,ShapeErrorFallback:Gqe,ShapeIndicatorErrorFallback:Qqe,...n}),[n]);return w.jsx(aue.Provider,{value:r,children:e})}function $r(){const t=v.useContext(aue);if(!t)throw new Error("useEditorComponents must be used inside of <EditorComponentsProvider />");return t}const XM={openWindow(t,e){window.open(t,e,"noopener noreferrer")},refreshPage(){window.location.reload()},async hardReset(){var t;return await((t=window.__tldraw__hardReset)==null?void 0:t.call(window))}};function lue(){XM.hardReset()}function sKe(){XM.refreshPage()}const aKe="https://github.com/tldraw/tldraw/issues/new",cue=({error:t,editor:e})=>{const n=v.useRef(null),[r,o]=v.useState(!1),[i,s]=v.useState(!1),[a,l]=v.useState(!1);let c=null;try{c=$r().Canvas??null}catch{}const u=t instanceof Error?t.message:String(t),d=t instanceof Error?t.stack:null,f=Ie("isDarkMode",()=>{try{if(e)return e.user.getIsDarkMode()}catch{}return null},[e]),[h,g]=v.useState(null);v.useLayoutEffect(()=>{var P;f!==null&&g(f);let C=(P=n.current)==null?void 0:P.parentElement,E=!1;for(;C;){if(C.classList.contains("tl-theme__dark")||C.classList.contains("tl-theme__light")){E=!0;break}C=C.parentElement}if(E){g(null);return}typeof window<"u"&&"matchMedia"in window&&g(window.matchMedia("(prefers-color-scheme: dark)").matches)},[f]),v.useEffect(()=>{if(i){const C=e==null?void 0:e.timers.setTimeout(()=>{s(!1)},2e3);return()=>clearTimeout(C)}},[i,e]);const y=()=>{const C=document.createElement("textarea");C.value=d??u,document.body.appendChild(C),C.select(),document.execCommand("copy"),C.remove(),s(!0)},m=()=>{sKe()},S=async()=>{lue()},x=new URL(aKe);return x.searchParams.set("title",u),x.searchParams.set("labels","bug"),x.searchParams.set("body",`Hey, I ran into an error while using tldraw:

\`\`\`js
${d??u}
\`\`\`

My browser: ${navigator.userAgent}`),w.jsxs("div",{ref:n,className:he("tl-container tl-error-boundary",h===null?"":h?"tl-theme__dark":"tl-theme__light"),children:[w.jsx("div",{className:"tl-error-boundary__overlay"}),e&&w.jsx(EB,{onError:ux,fallback:()=>null,children:w.jsx(IB,{editor:e,children:w.jsx("div",{className:"tl-overlay tl-error-boundary__canvas",children:c?w.jsx(c,{}):null})})}),w.jsx("div",{className:he("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":r&&!a}),children:a?w.jsxs(w.Fragment,{children:[w.jsx("h2",{children:"Are you sure?"}),w.jsx("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),w.jsxs("div",{className:"tl-error-boundary__content__actions",children:[w.jsx("button",{className:"tlui-button",onClick:()=>l(!1),children:"Cancel"}),w.jsx("button",{className:"tlui-button tl-error-boundary__reset",onClick:S,children:"Reset data"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("h2",{children:"Something went wrong"}),w.jsx("p",{children:"Please refresh your browser."}),w.jsx("p",{children:"If the issue continues after refreshing, you may need to reset the tldraw data stored on your device."}),w.jsxs("p",{children:[w.jsx("strong",{children:"Note:"})," Resetting will erase your current project and any unsaved work."]}),!1,r&&w.jsxs(w.Fragment,{children:["Message:",w.jsx("h4",{children:w.jsx("code",{children:u})}),"Stack trace:",w.jsxs("div",{className:"tl-error-boundary__content__error",children:[w.jsx("pre",{children:w.jsx("code",{children:d??u})}),w.jsx("button",{className:"tlui-button",onClick:y,children:i?"Copied!":"Copy"})]})]}),w.jsxs("div",{className:"tl-error-boundary__content__actions",children:[w.jsx("button",{className:"tlui-button",onClick:()=>o(!r),children:r?"Hide details":"Show details"}),w.jsxs("div",{className:"tl-error-boundary__content__actions__group",children:[w.jsx("button",{className:"tlui-button tl-error-boundary__reset",onClick:()=>l(!0),children:"Reset data"}),w.jsx("button",{className:"tlui-button tl-error-boundary__refresh",onClick:m,children:"Refresh Page"})]})]})]})})]})},uue="TLDRAW_USER_DATA_v3",due=Kn({id:On,name:On.nullable().optional(),color:On.nullable().optional(),locale:On.nullable().optional(),animationSpeed:pn.nullable().optional(),edgeScrollSpeed:pn.nullable().optional(),colorScheme:ny("light","dark","system").optional(),isSnapMode:Xn.nullable().optional(),isWrapMode:Xn.nullable().optional(),isDynamicSizeMode:Xn.nullable().optional(),isPasteAtCursorMode:Xn.nullable().optional()}),id={AddAnimationSpeed:1,AddIsSnapMode:2,MakeFieldsNullable:3,AddEdgeScrollSpeed:4,AddExcalidrawSelectMode:5,AddDynamicSizeMode:6,AllowSystemColorScheme:7,AddPasteAtCursor:8},jB=Math.max(...Object.values(id));function lKe(t){t.version<id.AddAnimationSpeed&&(t.user.animationSpeed=1),t.version<id.AddIsSnapMode&&(t.user.isSnapMode=!1),t.version<id.MakeFieldsNullable,t.version<id.AddEdgeScrollSpeed&&(t.user.edgeScrollSpeed=1),t.version<id.AddExcalidrawSelectMode&&(t.user.isWrapMode=!1),t.version<id.AllowSystemColorScheme&&(t.user.isDarkMode===!0?t.user.colorScheme="dark":t.user.isDarkMode===!1&&(t.user.colorScheme="light"),delete t.user.isDarkMode),t.version<id.AddDynamicSizeMode&&(t.user.isDynamicSizeMode=!1),t.version<id.AddPasteAtCursor&&(t.user.isPasteAtCursorMode=!1),t.version=jB}const mF=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function fue(){return mF[Math.floor(Math.random()*mF.length)]}function cKe(){var t,e;return typeof window<"u"&&"matchMedia"in window?((e=(t=window.matchMedia)==null?void 0:t.call(window,"(prefers-reduced-motion: reduce)"))==null?void 0:e.matches)??!1:!1}const tu=Object.freeze({name:"",locale:MWe(),color:fue(),edgeScrollSpeed:1,animationSpeed:cKe()?0:1,isSnapMode:!1,isWrapMode:!1,isDynamicSizeMode:!1,isPasteAtCursorMode:!1,colorScheme:"light"});function QD(){return{id:br(),color:fue()}}function hue(t){if(t===null||typeof t!="object"||!("version"in t)||!("user"in t)||typeof t.version!="number")return QD();const e=to(t);lKe(e);try{return due.validate(e.user)}catch{return QD()}}function uKe(){const t=JSON.parse(H5(uue)||"null")??null;return hue(t)}const YM=bo("globalUserData",null);function dKe(){U5(uue,JSON.stringify({version:jB,user:YM.get()}))}function pue(t){due.validate(t),YM.set(t),dKe(),fKe()}const Xm=typeof BroadcastChannel<"u"?new BroadcastChannel("tldraw-user-sync"):null;Xm==null||Xm.addEventListener("message",t=>{const e=t.data;(e==null?void 0:e.type)===mue&&(e==null?void 0:e.origin)!==gue()&&YM.set(hue(e.data))});let ZD=null;function gue(){return ZD===null&&(ZD=br()),ZD}const mue="tldraw-user-preferences-change";function fKe(){Xm==null||Xm.postMessage({type:mue,origin:gue(),data:{user:vue(),version:jB}})}function vue(){let t=YM.get();return t||(t=uKe(),pue(t)),t}const hKe=He("defaultLocalStorageUserPrefs",()=>vue());function yue(t={}){return{userPreferences:t.userPreferences??hKe,setUserPreferences:t.setUserPreferences??pue}}var JD={exports:{}},KQ;function pKe(){return KQ||(KQ=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function o(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new o(u,d||l,f),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],h]:l._events[g].push(h):(l._events[g]=h,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,g=new Array(h);f<h;f++)g[f]=d[f].fn;return g},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,g){var y=n?n+c:c;if(!this._events[y])return!1;var m=this._events[y],S=arguments.length,x,C;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),S){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,f),!0;case 5:return m.fn.call(m.context,u,d,f,h),!0;case 6:return m.fn.call(m.context,u,d,f,h,g),!0}for(C=1,x=new Array(S-1);C<S;C++)x[C-1]=arguments[C];m.fn.apply(m.context,x)}else{var E=m.length,P;for(C=0;C<E;C++)switch(m[C].once&&this.removeListener(c,m[C].fn,void 0,!0),S){case 1:m[C].fn.call(m[C].context);break;case 2:m[C].fn.call(m[C].context,u);break;case 3:m[C].fn.call(m[C].context,u,d);break;case 4:m[C].fn.call(m[C].context,u,d,f);break;default:if(!x)for(P=1,x=new Array(S-1);P<S;P++)x[P-1]=arguments[P];m[C].fn.apply(m[C].context,x)}}return!0},a.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return s(this,h),this;var g=this._events[h];if(g.fn)g.fn===u&&(!f||g.once)&&(!d||g.context===d)&&s(this,h);else{for(var y=0,m=[],S=g.length;y<S;y++)(g[y].fn!==u||f&&!g[y].once||d&&g[y].context!==d)&&m.push(g[y]);m.length?this._events[h]=m.length===1?m[0]:m:s(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(JD)),JD.exports}var gKe=pKe();const mKe=jc(gKe),Ym="TLDRAW_TAB_ID_v2",vd=globalThis.window;function vKe(){return vd?["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(vd.navigator.platform)||vr.isDarwin&&"ontouchend"in document:!1}const bI=vd?vd[Ym]??Yae(Ym)??"TLDRAW_INSTANCE_STATE_V1_"+br():"<error>";vd&&(vd[Ym]=bI,vKe()?W5(Ym,bI):Qae(Ym));vd==null||vd.addEventListener("beforeunload",()=>{W5(Ym,bI)});const bue={Initial:0},QM=Math.max(...Object.values(bue));function yKe(t){t.version<bue.Initial,t.version=QM}const Sue=Kn({version:pn,currentPageId:gx.optional(),isFocusMode:Xn.optional(),exportBackground:Xn.optional(),isDebugMode:Xn.optional(),isToolLocked:Xn.optional(),isGridMode:Xn.optional(),pageStates:yi(Kn({pageId:gx,camera:Kn({x:pn,y:pn,z:pn}).optional(),selectedShapeIds:yi(xl).optional(),focusedGroupId:xl.nullable().optional()})).optional()});function bKe(t){if(!t||typeof t!="object")return console.warn("Invalid instance state"),null;if(!("version"in t)||typeof t.version!="number")return console.warn("No version in instance state"),null;t.version!==QM&&(t=to(t),yKe(t));try{return Sue.validate(t)}catch(e){return console.warn(e),null}}function LB(t){const e=t.query.ids("page");return He("sessionStateSnapshot",()=>{const n=t.get(js);if(!n)return null;const r=[...e.get()];return{version:QM,currentPageId:n.currentPageId,exportBackground:n.exportBackground,isFocusMode:n.isFocusMode,isDebugMode:n.isDebugMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,pageStates:r.map(o=>{const i=t.get(mc.createId(o)),s=t.get(uu.createId(o));return{pageId:o,camera:{x:(s==null?void 0:s.x)??0,y:(s==null?void 0:s.y)??0,z:(s==null?void 0:s.z)??1},selectedShapeIds:(i==null?void 0:i.selectedShapeIds)??[],focusedGroupId:(i==null?void 0:i.focusedGroupId)??null}})}},{isEqual:Jf})}function vF(t,e,n){const r=bKe(e);if(!r)return;const o=ace(t.get(js)),i=n!=null&&n.forceOverwrite?r:o,s=n!=null&&n.forceOverwrite?o:r,a=t.schema.types.instance.create({id:js,...o,currentPageId:r.currentPageId,isDebugMode:(i==null?void 0:i.isDebugMode)??(s==null?void 0:s.isDebugMode),isFocusMode:(i==null?void 0:i.isFocusMode)??(s==null?void 0:s.isFocusMode),isToolLocked:(i==null?void 0:i.isToolLocked)??(s==null?void 0:s.isToolLocked),isGridMode:(i==null?void 0:i.isGridMode)??(s==null?void 0:s.isGridMode),exportBackground:(i==null?void 0:i.exportBackground)??(s==null?void 0:s.exportBackground)});t.atomic(()=>{var l,c,u;for(const d of r.pageStates??[]){if(!t.has(d.pageId))continue;const f=uu.createId(d.pageId),h=mc.createId(d.pageId),g=t.get(f),y=t.get(h);t.put([uu.create({id:f,x:((l=d.camera)==null?void 0:l.x)??(g==null?void 0:g.x),y:((c=d.camera)==null?void 0:c.y)??(g==null?void 0:g.y),z:((u=d.camera)==null?void 0:u.z)??(g==null?void 0:g.z)}),mc.create({id:h,pageId:d.pageId,selectedShapeIds:d.selectedShapeIds??(y==null?void 0:y.selectedShapeIds),focusedGroupId:d.focusedGroupId??(y==null?void 0:y.focusedGroupId)})])}t.put([a]),t.ensureStoreIsUsable()})}function SKe(t){var o;const e=[];for(const i of Object.values(t))(o=i.typeName)!=null&&o.match(/^(instance.*|pointer|camera)$/)&&e.push(i);const n=e.filter(i=>i.typeName==="instance"&&i.id!==js)[0];if(!n)return null;const r={version:QM,currentPageId:n.currentPageId,exportBackground:!!n.exportBackground,isFocusMode:!!n.isFocusMode,isDebugMode:!!n.isDebugMode,isToolLocked:!!n.isToolLocked,isGridMode:!1,pageStates:e.filter(i=>i.typeName==="instance_page_state"&&i.instanceId===n.id).map(i=>{const s=t[i.cameraId]??{x:0,y:0,z:1};return{pageId:i.pageId,camera:{x:s.x,y:s.y,z:s.z},selectedShapeIds:i.selectedShapeIds,focusedGroupId:i.focusedGroupId}})};try{return Sue.validate(r),r}catch{return null}}function xue(t,e,n){let r={};if("store"in e){const s=t.schema.migrateStoreSnapshot(e);if(s.type!=="success")throw new Error("Failed to migrate store snapshot: "+s.reason);r.document={schema:t.schema.serialize(),store:vS(s.value,(a,{typeName:l})=>t.scopedTypes.document.has(l))}}else r=e;const o=ace(t.get(js)),i=wue.get(t,LB).get();t.atomic(()=>{r.document&&t.loadStoreSnapshot(r.document),o&&t.update(js,s=>({...s,...o})),i&&vF(t,i),r.session&&vF(t,r.session,{forceOverwrite:n==null?void 0:n.forceOverwriteSessionState})})}const wue=new Hl;function xKe(t){const n=wue.get(t,LB).get();if(!n)throw new Error("Session state is not ready yet");return{document:t.getStoreSnapshot(),session:n}}function Cue(t){const e=[],n=new Set;for(const r of t){if(n.has(r.type))throw new Error(`Binding type "${r.type}" is defined more than once`);e.push(r),n.add(r.type)}return e}function rh({children:t,className:e="",...n}){return w.jsx("svg",{...n,className:he("tl-svg-container",e),children:t})}class hd extends Bd{constructor(n){super({...n,isClosed:!1,isFilled:!1});V(this,"start");V(this,"end");V(this,"d");V(this,"u");V(this,"ul");const{start:r,end:o}=n;this.start=r,this.end=o,this.d=r.clone().sub(o),this.u=this.d.clone().uni(),this.ul=this.u.len()}getLength(){return this.d.len()}midPoint(){return this.start.lrp(this.end,.5)}getVertices(){return[this.start,this.end]}nearestPoint(n){const{start:r,end:o,d:i,u:s,ul:a}=this;if(i.len()===0||a===0)return r;const l=$.Sub(n,r).dpr(s)/a,c=r.x+s.x*l;if(c<Math.min(r.x,o.x))return r.x<o.x?r:o;if(c>Math.max(r.x,o.x))return r.x>o.x?r:o;const u=r.y+s.y*l;return u<Math.min(r.y,o.y)?r.y<o.y?r:o:u>Math.max(r.y,o.y)?r.y>o.y?r:o:new $(c,u)}hitTestLineSegment(n,r,o=0){return kB(n,r,this.start,this.end)||this.distanceToLineSegment(n,r)<=o}getSvgPathData(n=!0){const{start:r,end:o}=this;return`${n?`M${r.toFixed()}`:""} L${o.toFixed()}`}}class vh extends Bd{constructor(n){super({isClosed:!1,isFilled:!1,...n});V(this,"points");V(this,"_segments");const{points:r}=n;this.points=r}get segments(){if(!this._segments){this._segments=[];const{vertices:n}=this;for(let r=0,o=n.length-1;r<o;r++){const i=n[r],s=n[r+1];this._segments.push(new hd({start:i,end:s}))}this.isClosed&&this._segments.push(new hd({start:n[n.length-1],end:n[0]}))}return this._segments}getLength(){return this.segments.reduce((n,r)=>n+r.length,0)}getVertices(){return this.points}nearestPoint(n){const{segments:r}=this;let o=this.points[0],i=1/0,s,a;for(let l=0;l<r.length;l++)s=r[l].nearestPoint(n),a=$.Dist2(s,n),a<i&&(o=s,i=a);if(!o)throw Error("nearest point not found");return o}hitTestLineSegment(n,r,o=0){const{segments:i}=this;for(let s=0,a=i.length;s<a;s++)if(i[s].hitTestLineSegment(n,r,o))return!0;return!1}getSvgPathData(){const{vertices:n}=this;return n.length<2?"":n.reduce((r,o,i)=>i===0?`M ${o.x} ${o.y}`:`${r} L ${o.x} ${o.y}`,"")}}class zo extends vh{constructor(e){super({...e}),this.isClosed=!0}}class Pu extends zo{constructor(n){const{x:r=0,y:o=0,width:i,height:s}=n;super({...n,points:[new $(r,o),new $(r+i,o),new $(r+i,o+s),new $(r,o+s)]});V(this,"x");V(this,"y");V(this,"w");V(this,"h");this.x=r,this.y=o,this.w=i,this.h=s}getBounds(){return new rt(this.x,this.y,this.w,this.h)}getSvgPathData(){const{x:n,y:r,w:o,h:i}=this;return`M${n},${r} h${o} v${i} h-${o}z`}}class Tc{constructor(e){V(this,"options",{});this.editor=e}static configure(e){return class extends this{constructor(){super(...arguments);V(this,"options",{...this.options,...e})}}}getFontFaces(e){return ps}canSnap(e){return!0}canTabTo(e){return!0}canScroll(e){return!1}canBind(e){return!0}canEdit(e){return!1}canResize(e){return!0}canEditInReadonly(e){return!1}canCrop(e){return!1}canBeLaidOut(e,n){return!0}providesBackgroundForChildren(e){return!1}hideResizeHandles(e){return!1}hideRotateHandle(e){return!1}hideSelectionBoundsBg(e){return!1}hideSelectionBoundsFg(e){return!1}isAspectRatioLocked(e){return!1}canReceiveNewChildrenOfType(e,n){return!1}canDropShapes(e,n){return!1}expandSelectionOutlinePx(e){return 0}getCanvasSvgDefs(){return[]}getBoundsSnapGeometry(e){return{}}getHandleSnapGeometry(e){return{}}getText(e){}getAriaDescriptor(e){}}V(Tc,"props"),V(Tc,"migrations"),V(Tc,"type");function uc(t,e,n={}){const{closed:r=!1,snap:o=1,start:i="outset",end:s="outset",lengthRatio:a=2,style:l="dashed",forceSolid:c=!1}=n;let u=0,d=0,f=1,h=0,g=0;if(c)return{strokeDasharray:"none",strokeDashoffset:"none"};switch(l){case"dashed":{f=1,u=Math.min(e*a,t/4);break}case"dotted":{f=100,u=e/f;break}default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return r||(i==="outset"?(t+=u/2,g+=u/2):i==="skip"&&(t-=u,g-=u),s==="outset"?t+=u/2:s==="skip"&&(t-=u)),d=Math.floor(t/u/(2*f)),d-=d%o,d<3&&l==="dashed"?t/e<4?(u=t,d=1,h=0):(u=t*(1/3),h=t*(1/3)):(u=t/d/(2*f),r?(g=u/2,h=(t-d*u)/d):h=(t-d*u)/Math.max(1,d-1)),{strokeDasharray:[u,h].join(" "),strokeDashoffset:g.toString()}}function GQ({bounds:t,className:e}){const n=Ee(),r=Ie("zoom level",()=>n.getZoomLevel(),[n]);return w.jsx("g",{className:e,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map((o,i)=>{const{strokeDasharray:s,strokeDashoffset:a}=uc(o[0].dist(o[1]),1/r,{style:"dashed",lengthRatio:4});return w.jsx("line",{x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y,strokeDasharray:s,strokeDashoffset:a},i)})})}class xP extends Tc{hideSelectionBoundsFg(){return!0}canBind(){return!1}getDefaultProps(){return{}}getGeometry(e){const n=this.editor.getSortedChildIdsForParent(e.id);return n.length===0?new Pu({width:1,height:1,isFilled:!1}):new Zs({children:n.map(r=>{const o=this.editor.getShape(r);return this.editor.getShapeGeometry(r).transform(this.editor.getShapeLocalTransform(o),{isLabel:!1})})})}component(e){const n=this.editor.getErasingShapeIds().includes(e.id),{hintingShapeIds:r}=this.editor.getCurrentPageState(),o=r.length>0&&r.some(a=>a!==e.id&&this.editor.isShapeOfType(this.editor.getShape(a),"group")),i=this.editor.getCurrentPageState().focusedGroupId!==e.id;if(!n&&(i||o))return null;const s=this.editor.getShapeGeometry(e).bounds;return w.jsx(rh,{children:w.jsx(GQ,{className:"tl-group",bounds:s})})}indicator(e){const n=this.editor.getShapeGeometry(e).bounds;return w.jsx(GQ,{className:"",bounds:n})}onChildrenChange(e){const n=this.editor.getSortedChildIdsForParent(e.id);if(n.length===0){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.deleteShapes([e.id]);return}else if(n.length===1){this.editor.getCurrentPageState().focusedGroupId===e.id&&this.editor.popFocusedGroupId(),this.editor.reparentShapes(n,e.parentId),this.editor.deleteShapes([e.id]);return}}}V(xP,"type","group"),V(xP,"props",bce),V(xP,"migrations",Sce);const Eue=[xP],wKe=new Set(Eue.map(t=>t.type));function Pue(t){const e=[...Eue],n=new Set;for(const r of t){if(wKe.has(r.type))throw new Error(`Shape type "${r.type}" is a core shapes type and cannot be overridden`);if(n.has(r.type))throw new Error(`Shape type "${r.type}" is defined more than once`);e.push(r),n.add(r.type)}return e}function _ue(t,e){const n=new Map;return async function(o){const i=n.get(o);if(i)return i;const s=(async()=>{try{const a=await _c(o,e);return nn(a.ok),await t(a)}catch(a){return console.error(a),null}})();return n.set(o,s),s}}const ZM=_ue(async t=>await Fs.blobToDataUrl(await t.blob())),CKe=/@import\s+(?:"([^"]+)"|'([^']+)'|url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\))([^;]+);/gi,EKe=/@font-face\s*{([^}]+)}/gi,Iue=/url\s*\(\s*(?:"([^"]+)"|'([^']+)'|([^'")]+))\s*\)/gi,PKe=/(?:^|;)\s*font-family\s*:\s*(?:([^'"][^;\n]+)|"([^"]+)"|'([^']+)')\s*(?:;|$)/gi;function _Ke(t){return Array.from(t.matchAll(CKe),e=>({url:e[1]||e[2]||e[3]||e[4]||e[5],extras:e[6]}))}function Tue(t,e){return Array.from(t.matchAll(EKe),n=>{const r=n[1],o=Array.from(r.matchAll(Iue),s=>{var l;const a=s[1]||s[2]||s[3];return{original:a,resolved:((l=yn(a,e))==null?void 0:l.href)??null}}),i=new Set(Array.from(r.matchAll(PKe),s=>(s[1]||s[2]||s[3]).toLowerCase()));return{fontFace:r,urls:o,fontFamilies:i}})}function IKe(t){const e=/\s*(?:([^'"][^;\n\s,]+)|"([^"]+)"|'([^']+)')\s*/gi,n=/\s*,\s*/gi,r=new Set;for(;;){const o=e.exec(t);if(!o)break;const i=o[1]||o[2]||o[3];if(r.add(i.toLowerCase()),n.lastIndex=e.lastIndex,!n.exec(t))break;e.lastIndex=n.lastIndex}return r}function Mue(t){return!(t.startsWith("-")||t.startsWith("animation")||t.startsWith("transition")||t==="cursor"||t==="pointer-events"||t==="user-select"||t==="touch-action")}function TKe(t,e){return{imports:_Ke(t),fontFaces:Tue(t,e)}}function MKe(t){return Array.from(t.matchAll(Iue),e=>({original:e[0],url:e[1]||e[2]||e[3]}))}var OKe=Object.create,Oue=Object.defineProperty,RKe=Object.getOwnPropertyDescriptor,kKe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Rue=t=>{throw TypeError(t)},kue=(t,e,n)=>e in t?Oue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AKe=t=>[,,,OKe(null)],Aue=["class","method","getter","setter","accessor","field","value","get","set"],$ue=t=>t!==void 0&&typeof t!="function"?Rue("Function expected"):t,$Ke=(t,e,n,r,o)=>({kind:Aue[t],name:e,metadata:r,addInitializer:i=>n._?Rue("Already initialized"):o.push($ue(i||null))}),DKe=(t,e)=>kue(e,kKe("metadata"),t[3]),jKe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},LKe=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=Aue[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,RKe(o,n)),S=r.length-1;S>=0;S--)l=$Ke(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,$ue(s)&&(m[g]=s);return m&&Oue(o,n,m),o},sE=(t,e,n)=>kue(t,typeof e!="symbol"?e+"":e,n),Due,JM;const jue="tldraw-svg-export";Due=[va];class NB{constructor(){jKe(JM,5,this),sE(this,"fontFacesPromise",null),sE(this,"foundFontNames",new Set),sE(this,"fontFacesToEmbed",new Set),sE(this,"pendingPromises",[])}startFindingCurrentDocumentFontFaces(){nn(!this.fontFacesPromise,"FontEmbedder already started"),this.fontFacesPromise=NKe()}onFontFamilyValue(e){nn(this.fontFacesPromise,"FontEmbedder not started");const n=IKe(e);for(const r of n){if(this.foundFontNames.has(r))return;this.foundFontNames.add(r),this.pendingPromises.push(this.fontFacesPromise.then(o=>{const i=o.filter(s=>s.fontFamilies.has(r));for(const s of i)if(!this.fontFacesToEmbed.has(s)){this.fontFacesToEmbed.add(s);for(const a of s.urls)!a.resolved||a.embedded||(a.embedded=ZM(a.resolved))}}))}}async createCss(){await Promise.all(this.pendingPromises);let e="";for(const n of this.fontFacesToEmbed){let r=`@font-face {${n.fontFace}}`;for(const o of n.urls){if(!o.embedded)continue;const i=await o.embedded;i&&(r=r.replace(o.original,i))}e+=r}return e}}JM=AKe();LKe(JM,1,"onFontFamilyValue",Due,NB);DKe(JM,NB);async function NKe(){var n;const t=[],e=Array.from(document.styleSheets).filter(r=>{var o;return!((o=r.ownerNode)!=null&&o.closest(`.${jue}`))});for(const r of e){let o;try{o=r.cssRules}catch{}if(o){for(const i of r.cssRules)if(i instanceof CSSFontFaceRule)t.push(Tue(i.cssText,r.href??document.baseURI));else if(i instanceof CSSImportRule){const s=new URL(i.href,((n=i.parentStyleSheet)==null?void 0:n.href)??document.baseURI);t.push(yF(s.href))}}else r.href&&t.push(yF(r.href))}return Tn(await Promise.all(t)).flat()}const yF=_ue(async t=>{const e=TKe(await t.text(),t.url),n=await Promise.all(e.imports.map(({url:r})=>yF(new URL(r,t.url).href)));return[...e.fontFaces,...Tn(n).flat()]}),Aa=(t,e,{currentColor:n})=>t==="currentColor"||t===n,Wn=(t,e,{parentStyles:n})=>n[e]===t,yo=t=>(e,n,{getStyle:r})=>{const o=r(`border-${t}-width`),i=r(`border-${t}-style`);return o==="0px"||i==="none"},Lue={"border-block-end-color":Aa,"border-block-start-color":Aa,"border-bottom-color":Aa,"border-inline-end-color":Aa,"border-inline-start-color":Aa,"border-left-color":Aa,"border-right-color":Aa,"border-top-color":Aa,"caret-color":Aa,"column-rule-color":Aa,"outline-color":Aa,"text-decoration":(t,e,{currentColor:n})=>t==="none solid currentColor"||t==="none solid "+n,"text-decoration-color":Aa,"text-emphasis-color":Aa,"border-collapse":Wn,"border-spacing":Wn,"caption-side":Wn,cursor:Wn,direction:Wn,"empty-cells":Wn,"font-family":Wn,"font-size":Wn,"font-style":Wn,"font-variant":Wn,"font-weight":Wn,"font-size-adjust":Wn,"font-stretch":Wn,font:Wn,"letter-spacing":Wn,"line-height":Wn,"list-style-image":Wn,"list-style-position":Wn,"list-style-type":Wn,"list-style":Wn,orphans:Wn,"overflow-wrap":Wn,quotes:Wn,"stroke-linecap":Wn,"stroke-linejoin":Wn,"tab-size":Wn,"text-align":Wn,"text-align-last":Wn,"text-indent":Wn,"text-justify":Wn,"text-shadow":Wn,"text-transform":Wn,visibility:Wn,"white-space":Wn,"white-space-collapse":Wn,widows:Wn,"word-break":Wn,"word-spacing":Wn,"word-wrap":Wn,"border-top":yo("top"),"border-right":yo("right"),"border-bottom":yo("bottom"),"border-left":yo("left"),"border-block-end":yo("block-end"),"border-block-start":yo("block-start"),"border-inline-end":yo("inline-end"),"border-inline-start":yo("inline-start"),"border-top-style":yo("top"),"border-right-style":yo("right"),"border-bottom-style":yo("bottom"),"border-left-style":yo("left"),"border-block-end-style":yo("block-end"),"border-block-start-style":yo("block-start"),"border-inline-end-style":yo("inline-end"),"border-inline-start-style":yo("inline-start"),"border-top-width":yo("top"),"border-right-width":yo("right"),"border-bottom-width":yo("bottom"),"border-left-width":yo("left"),"border-block-end-width":yo("block-end"),"border-block-start-width":yo("block-start"),"border-inline-end-width":yo("inline-end")};function Nue(t){if(t.shadowRoot)return t.shadowRoot.childNodes;if(HKe(t)){const e=t.assignedNodes();if(e!=null&&e.length)return e}return t.childNodes}function*bF(t){for(const e of Nue(t))FKe(e)&&(yield e)}function e2(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)??globalThis}function FKe(t){return t instanceof e2(t).Element}function zKe(t){return t instanceof e2(t).ShadowRoot}function BKe(t){return"getRootNode"in t&&zKe(t.getRootNode())}function HKe(t){return BKe(t)&&t instanceof e2(t).HTMLSlotElement}function UKe(t){return t.style}function FB(t,e){return e2(t).getComputedStyle(t,e)}const wv={};class WKe{constructor(e){V(this,"styles",new Map);V(this,"fonts",new NB);this.root=e}readRootElementStyles(e){this.readElementStyles(e,{shouldRespectDefaults:!1,shouldSkipInheritedParentStyles:!1});const n=Array.from(bF(e));for(;n.length;){const r=n.pop();n.push(...bF(r)),this.readElementStyles(r,{shouldRespectDefaults:!0,shouldSkipInheritedParentStyles:!0})}}readElementStyles(e,{shouldRespectDefaults:n=!0,shouldSkipInheritedParentStyles:r=!0}){var a;const o=n?GKe(e.tagName.toLowerCase()):wv,i=Object.assign({},wv);if(r){let l=e.parentElement;for(;l;){const c=(a=this.styles.get(l))==null?void 0:a.self;for(const u in c)i[u]||(i[u]=c[u]);l=l.parentElement}}const s={self:VKe(e,{defaultStyles:o,parentStyles:i}),before:XQ(e,"::before"),after:XQ(e,"::after")};this.styles.set(e,s)}fetchResources(){const e=[];for(const n of this.styles.values())for(const r of Mo(n))if(r)for(const[o,i]of Object.entries(r)){if(!i)continue;o==="font-family"&&this.fonts.onFontFamilyValue(i);const s=MKe(i);s.length!==0&&e.push(...s.map(async({url:a,original:l})=>{const c=await ZM(a)??"data:";r[o]=i.replace(l,`url("${c}")`)}))}return Promise.all(e)}unwrapCustomElements(){const e=new Set,n=(r,o)=>{if(e.has(r))return;e.add(r);const i=r.shadowRoot;if(i){const s=document.createElement("div");this.styles.set(s,this.styles.get(r)),s.setAttribute("data-tl-custom-element",r.tagName),(o??r.parentElement).appendChild(s);for(const a of i.childNodes)a instanceof Element?n(a,s):s.appendChild(a.cloneNode(!0));r.remove()}else if(o){if(r.tagName.toLowerCase()==="style")return;const s=r.cloneNode(!1);this.styles.set(s,this.styles.get(r)),o.appendChild(s);for(const a of Nue(r))a instanceof Element?n(a,s):s.appendChild(a.cloneNode(!0))}};for(const r of this.styles.keys())n(r,null)}embedStyles(){let e="";for(const[n,r]of this.styles){if(r.after||r.before){const i=`pseudo-${br()}`;n.classList.add(i),r.before&&(e+=`.${i}::before {${YQ(r.before)}}
`),r.after&&(e+=`.${i}::after {${YQ(r.after)}}
`)}const o=UKe(n);for(const[i,s]of Object.entries(r.self))s&&o.setProperty(i,s);o.fontKerning==="auto"&&(o.fontKerning="normal")}return e}async getFontFaceCss(){return await this.fonts.createCss()}dispose(){KKe()}}function VKe(t,{defaultStyles:e,parentStyles:n}){return t.computedStyleMap?Fue(t.computedStyleMap(),{defaultStyles:e,parentStyles:n}):zB(FB(t),{defaultStyles:e,parentStyles:n})}function XQ(t,e){const n=FB(t,e),r=n.getPropertyValue("content");if(!(r===""||r==="none"))return zB(n,{defaultStyles:wv,parentStyles:wv})}function Fue(t,{defaultStyles:e,parentStyles:n}){var s;const r={},i={currentColor:((s=t.get("color"))==null?void 0:s.toString())||"",parentStyles:n,defaultStyles:e,getStyle:a=>{var l;return((l=t.get(a))==null?void 0:l.toString())??""}};for(const a of t.keys()){if(!Mue(a))continue;const l=t.get(a).toString();if(e[a]===l)continue;const c=Uo(Lue,a);c&&c(l,a,i)||(r[a]=l)}return r}function zB(t,{defaultStyles:e,parentStyles:n}){const r={},i={currentColor:t.color,parentStyles:n,defaultStyles:e,getStyle:s=>t.getPropertyValue(s)};for(const s in t){if(!Mue(s))continue;const a=t.getPropertyValue(s);if(e[s]===a)continue;const l=Uo(Lue,s);l&&l(a,s,i)||(r[s]=a)}return r}function YQ(t){let e="";for(const[n,r]of Object.entries(t))e+=`${n}: ${r};`;return e}let Qm;const QQ={};function qKe(){if(!Qm){const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);const e=Ds(t.contentDocument,"frame must have a document"),n=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");n.appendChild(r),e.body.appendChild(n),Qm={iframe:t,foreignObject:r,document:e}}return Qm}function KKe(){Qm&&(document.body.removeChild(Qm.iframe),Qm=void 0)}const ZQ={defaultStyles:wv,parentStyles:wv};function GKe(t){let e=QQ[t];if(!e){const{foreignObject:n,document:r}=qKe(),o=r.createElement(t);n.appendChild(o),e=o.computedStyleMap?Fue(o.computedStyleMap(),ZQ):zB(FB(o),ZQ),n.removeChild(o),QQ[t]=e}return e}function XKe(t,e){Array.from(t.attributes).forEach(r=>{e.setAttribute(r.name,r.value)})}function JQ(t,e){return t.replaceWith(e),e}async function SS(t,e){const n=document.createElement("img");e&&XKe(e,n),n.setAttribute("src",t??"data:"),n.setAttribute("decoding","sync"),n.setAttribute("loading","eager");try{await n.decode()}catch{}return n}async function YKe(t){try{const e=t.toDataURL();return await SS(e,t)}catch{return await SS(null,t)}}async function QKe(t){try{const e=await Fa.getVideoFrameAsDataUrl(t);return SS(e,t)}catch(e){console.error("Could not get video frame",e)}if(t.poster){const e=await ZM(t.poster);return SS(e,t)}return SS(null,t)}async function zue(t){if(t instanceof HTMLCanvasElement)return JQ(t,await YKe(t));if(t instanceof HTMLVideoElement)return JQ(t,await QKe(t));if(t instanceof HTMLImageElement){const e=t.currentSrc||t.src,n=await ZM(e);t.setAttribute("src",n??"data:"),t.setAttribute("decoding","sync"),t.setAttribute("loading","eager");try{await t.decode()}catch{}return t}else t instanceof HTMLInputElement?t.setAttribute("value",t.value):t instanceof HTMLTextAreaElement&&(t.textContent=t.value);await Promise.all(Array.from(bF(t),e=>zue(e)))}function fd(t){const e=v.useRef();return v.useLayoutEffect(()=>{e.current=t}),v.useDebugValue(t),v.useCallback((...n)=>{const r=e.current;return nn(r,"fn does not exist"),r(...n)},[])}const BB=v.createContext(null);function ZKe({context:t,editor:e,children:n}){const r=e.options.exportProvider;return w.jsx(IB,{editor:e,children:w.jsx(zce,{container:e.getContainer(),children:w.jsx(BB.Provider,{value:t,children:w.jsx(r,{children:n})})})})}function Iw(){return v.useContext(BB)}function JKe(){const t=v.useContext(BB),[e]=v.useState(D5);return v.useEffect(()=>(t==null||t.waitUntil(e),()=>{e.resolve()}),[e,t]),fd(()=>{e.resolve()})}var eGe=Object.create,Bue=Object.defineProperty,tGe=Object.getOwnPropertyDescriptor,nGe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Hue=t=>{throw TypeError(t)},Uue=(t,e,n)=>e in t?Bue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rGe=t=>[,,,eGe(null)],Wue=["class","method","getter","setter","accessor","field","value","get","set"],Vue=t=>t!==void 0&&typeof t!="function"?Hue("Function expected"):t,oGe=(t,e,n,r,o)=>({kind:Wue[t],name:e,metadata:r,addInitializer:i=>n._?Hue("Already initialized"):o.push(Vue(i||null))}),iGe=(t,e)=>Uue(e,nGe("metadata"),t[3]),sGe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},aGe=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=Wue[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,tGe(o,n)),S=r.length-1;S>=0;S--)l=oGe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,Vue(s)&&(m[g]=s);return m&&Bue(o,n,m),o},eZ=(t,e,n)=>Uue(t,typeof e!="symbol"?e+"":e,n),que,t2;que=[va];class HB{constructor(e){this.maxDelayTimeMs=e,sGe(t2,5,this),eZ(this,"isResolved",!1),eZ(this,"promisesToWaitFor",[])}waitUntil(e){if(this.isResolved)throw new Error("Cannot `waitUntil` - the export has already been resolved. Make sure to call `waitUntil` as soon as possible during an export - ie within the first react effect after rendering.");this.promisesToWaitFor.push(e.catch(n=>console.error("Error while waiting for export:",n)))}async resolvePromises(){let e=null;for(;this.promisesToWaitFor.length!==e;)e=this.promisesToWaitFor.length,await Promise.allSettled(this.promisesToWaitFor),await JN(0)}async resolve(){const e=JN(this.maxDelayTimeMs).then(()=>"timeout"),n=this.resolvePromises().then(()=>"resolved");await Promise.race([e,n])==="timeout"&&console.warn("[tldraw] Export delay timed out after ${this.maxDelayTimeMs}ms"),this.isResolved=!0}}t2=rGe();aGe(t2,1,"waitUntil",que,HB);iGe(t2,HB);function lGe(t,e,n={}){var S,x;if(!window.document)throw Error("No document");const{scale:r=1,background:o=t.getInstanceState().exportBackground,padding:i=t.options.defaultSvgPadding,preserveAspectRatio:s}=n,a=n.darkMode??t.user.getIsDarkMode(),l=t.getShapeAndDescendantIds(e),c=t.getUnorderedRenderingShapes(!1).filter(({id:C})=>l.has(C));let u=null;if(n.bounds)u=n.bounds;else for(const{id:C}of c){const E=t.getShapeMaskedPageBounds(C);E&&(u?u.union(E):u=E.clone())}if(!u)return;const d=e.length===1&&t.isShapeOfType(t.getShape(e[0]),"frame")?e[0]:null;d||u.expandBy(i);const f=u.width*r,h=u.height*r;try{(x=(S=document.body).focus)==null||x.call(S)}catch{}const g=new HB(t.options.maxExportDelayMs),y=D5();return g.waitUntil(y),{jsx:w.jsx(cGe,{editor:t,preserveAspectRatio:s,scale:r,pixelRatio:n.pixelRatio??null,bbox:u,background:o,singleFrameShapeId:d,isDarkMode:a,renderingShapes:c,onMount:y.resolve,waitUntil:g.waitUntil}),width:f,height:h,exportDelay:g}}function cGe({editor:t,preserveAspectRatio:e,scale:n,pixelRatio:r,bbox:o,background:i,singleFrameShapeId:s,isDarkMode:a,renderingShapes:l,onMount:c,waitUntil:u}){const d=xg(),f=zd({isDarkMode:a}),h=bw("export state",{defsById:{},shapeElements:null}),{defsById:g,shapeElements:y}=Ie(h),m=fd(E=>{h.update(P=>{if(kl(P.defsById,E.key))return P;const I=Promise.resolve(E.getElement());return u(I.then(T=>{h.update(M=>({...M,defsById:{...M.defsById,[E.key]:{pending:!1,element:T}}}))})),{...P,defsById:{...P.defsById,[E.key]:{pending:!0,element:I}}}})}),S=v.useMemo(()=>({isDarkMode:a,waitUntil:u,addExportDef:m,scale:n,pixelRatio:r,async resolveAssetUrl(E,P){const I=t.getAsset(E);return!I||I.type!=="image"&&I.type!=="video"?null:await t.resolveAssetUrl(E,{screenScale:n*(P/I.props.w),shouldResolveToOriginal:r===null,dpr:r??void 0})}}),[a,u,m,n,r,t]),x=v.useRef(!1);v.useLayoutEffect(()=>{if(x.current)throw new Error("SvgExport should only render once - do not use with react strict mode");x.current=!0,(async()=>{const E={},P=l.map(async({id:T,opacity:M,index:R,backgroundIndex:A})=>{var D,F;if(T===s)return[];const j=t.getShape(T);if(t.isShapeOfType(j,"group"))return[];const N=[],k=t.getShapeUtil(j);if(k.toSvg||k.toBackgroundSvg){const[H,U]=await Promise.all([(D=k.toSvg)==null?void 0:D.call(k,j,S),(F=k.toBackgroundSvg)==null?void 0:F.call(k,j,S)]),B=t.getShapePageTransform(j);let W=B.toCssString(),K=1;"scale"in j.props&&j.props.scale!==1&&(K=j.props.scale,W=`${W} scale(${j.props.scale}, ${j.props.scale})`);const q=t.getShapeMask(j.id),X=q?Ke.From(Ke.Inverse(B)).applyToPoints(q):null,Z=PB(d,j.id);X&&(E[Z]={pending:!1,element:w.jsx("clipPath",{id:Z,children:w.jsx("path",{d:`M${X.map(({x:Y,y:G})=>`${Y/K},${G/K}`).join("L")}Z`})})}),H&&N.push({zIndex:R,element:w.jsx("g",{transform:W,opacity:M,clipPath:q?`url(#${Z})`:void 0,children:H},`fg_${j.id}`)}),U&&N.push({zIndex:A,element:w.jsx("g",{transform:W,opacity:M,clipPath:q?`url(#${Z})`:void 0,children:U},`bg_${j.id}`)})}else N.push({zIndex:R,element:w.jsx(tZ,{shape:j,util:k,component:rue,className:"tl-shape",bbox:o,opacity:M},`fg_${j.id}`)}),k.backgroundComponent&&N.push({zIndex:A,element:w.jsx(tZ,{shape:j,util:k,component:oue,className:"tl-shape tl-shape-background",bbox:o,opacity:M},`bg_${j.id}`)});return N}),I=(await Promise.all(P)).flat();Ya.flushSync(()=>{h.update(T=>({...T,shapeElements:I.sort((M,R)=>M.zIndex-R.zIndex).map(({element:M})=>M),defsById:{...T.defsById,...E}}))})})()},[o,t,S,d,l,s,h]),v.useEffect(()=>{const E=new Set;for(const{id:P}of l)for(const I of t.fonts.getShapeFontFaces(P))E.add(I);for(const P of E)m({key:br(),getElement:async()=>{const I=await t.fonts.toEmbeddedCssDeclaration(P);return w.jsx("style",{nonce:t.options.nonce,children:I})}})},[t,l,m]),v.useEffect(()=>{y!==null&&c()},[c,y]);let C=i?f.background:"transparent";if(s&&i){const E=t.getShapeUtil("frame");if(E!=null&&E.options.showColors){const P=t.getShape(s);C=f[P.props.color].frame.fill}else C=f.solid}return w.jsx(ZKe,{editor:t,context:S,children:w.jsxs("svg",{preserveAspectRatio:e,direction:"ltr",width:o.width*n,height:o.height*n,viewBox:`${o.minX} ${o.minY} ${o.width} ${o.height}`,strokeLinecap:"round",strokeLinejoin:"round",style:{backgroundColor:C},"data-color-mode":a?"dark":"light",className:`tl-container tl-theme__force-sRGB ${a?"tl-theme__dark":"tl-theme__light"}`,children:[w.jsx("defs",{children:Object.entries(g).map(([E,P])=>P.pending?null:w.jsx(v.Fragment,{children:P.element},E))}),y]})})}function tZ({shape:t,util:e,className:n,component:r,bbox:o,opacity:i}){const s=Ee(),a=Ke.Translate(-o.minX,-o.minY).multiply(s.getShapePageTransform(t.id)),l=s.getShapeGeometry(t.id).bounds,c=Math.max(l.width,1),u=Math.max(l.height,1);return w.jsx(EB,{fallback:()=>null,children:w.jsx("foreignObject",{x:o.minX,y:o.minY,width:o.w,height:o.h,className:"tl-shape-foreign-object tl-export-embed-styles",children:w.jsx("div",{className:n,"data-shape-type":t.type,style:{clipPath:s.getShapeClipPath(t.id),transform:a.toCssString(),width:c,height:u,opacity:i},children:w.jsx(r,{shape:t,util:e})})})})}let uGe=1;async function dGe(t,e,n={}){const r=lGe(t,e,n);if(!r)return;const o=t.getContainer(),i=document.createElement("div");i.className=jue,i.inert=!0,i.tabIndex=-1,Object.assign(i.style,{position:"absolute",top:"0px",left:"0px",width:r.width+"px",height:r.height+"px",pointerEvents:"none",opacity:0}),o.appendChild(i);const s=yte.createRoot(i,{identifierPrefix:`export_${uGe++}_`});try{await Promise.resolve(),Ya.flushSync(()=>{s.render(r.jsx)}),await r.exportDelay.resolve();const a=i.firstElementChild;return nn(a instanceof SVGSVGElement,"Expected an SVG element"),await fGe(a),{svg:a,width:r.width,height:r.height}}finally{setTimeout(()=>{s.unmount(),o.removeChild(i)},0)}}async function fGe(t){const e=[...t.querySelectorAll("foreignObject.tl-export-embed-styles > *")];if(!e.length)return;const n=new WKe(t);try{n.fonts.startFindingCurrentDocumentFontFaces(),await Promise.all(e.map(i=>zue(i)));for(const i of e)n.readRootElementStyles(i);await n.fetchResources();const r=await n.getFontFaceCss();n.unwrapCustomElements();const o=n.embedStyles();if(r||o){const i=document.createElementNS("http://www.w3.org/2000/svg","style");i.textContent=`${r}
${o}`,t.prepend(i)}}finally{n.dispose()}}let ej=null;function hGe(){return ej||(ej={maxWidth:tj("width"),maxHeight:tj("height"),maxArea:tj("area")}),ej}/*!
 * Extracted from https://github.com/jhildenbiddle/canvas-size
 * MIT License: https://github.com/jhildenbiddle/canvas-size/blob/master/LICENSE
 * Copyright (c) John Hildenbiddle
 */const nZ=8192,pGe=4096*4096,gGe={area:[16384,14188,11402,11180,10836,8192,4096],height:[8388607,65535,32767,16384,8192,4096],width:[4194303,65535,32767,16384,8192,4096]};function tj(t){const e=document.createElement("canvas");e.width=1,e.height=1;const n=e.getContext("2d");for(const r of gGe[t]){const o=t==="height"?1:r,i=t==="width"?1:r,s=document.createElement("canvas");s.width=o,s.height=i,s.getContext("2d").fillRect(o-1,i-1,1,1),n.drawImage(s,o-1,i-1,1,1,0,0,1,1);const l=n.getImageData(0,0,1,1).data[3]!==0;if(s.width=0,s.height=0,l)return e.width=0,e.height=0,t==="area"?r*r:r}throw e.width=0,e.height=0,Error("Failed to determine maximum canvas dimension")}function mGe(t,e){if(t<=nZ&&e<=nZ&&t*e<=pGe)return[t,e];const{maxWidth:n,maxHeight:r,maxArea:o}=hGe(),i=t/e;if(t>n&&(t=n,e=t/i),e>r&&(e=r,t=e*i),t*e>o){const s=Math.sqrt(o/(t*e));t*=s,e*=s}return[t,e]}async function vGe(t,e){const{type:n,width:r,height:o,quality:i=1,pixelRatio:s=2}=e;let[a,l]=mGe(r*s,o*s);a=Math.floor(a),l=Math.floor(l);const c=a/r,u=await Fs.blobToDataUrl(new Blob([t],{type:"image/svg+xml"})),d=await new Promise(h=>{const g=dx();g.crossOrigin="anonymous",g.onload=async()=>{vr.isSafari&&await JN(250);const y=document.createElement("canvas"),m=y.getContext("2d");y.width=a,y.height=l,m.imageSmoothingEnabled=!0,m.imageSmoothingQuality="high",m.drawImage(g,0,0,a,l),URL.revokeObjectURL(u),h(y)},g.onerror=()=>{h(null)},g.src=u});if(!d)return null;const f=await new Promise(h=>d.toBlob(g=>{(!g||so.throwToBlob.get())&&h(null),h(g)},"image/"+n,i));if(!f)return null;if(n==="png"){const h=new DataView(await f.arrayBuffer());return au.setPhysChunk(h,c,{type:"image/"+n})}else return f}const Ls={menus:bo("open menus",[]),getOpenMenus(t){return t?this.menus.get().filter(e=>e.endsWith("-"+t)):this.menus.get()},addOpenMenu(t,e=""){const n=e?`${t}-${e}`:t,r=new Set(this.menus.get());r.has(n)||(r.add(n),this.menus.set([...r]))},deleteOpenMenu(t,e=""){const n=e?`${t}-${e}`:t,r=new Set(this.menus.get());r.has(n)&&(r.delete(n),this.menus.set([...r]))},clearOpenMenus(t){this.menus.set(t?this.menus.get().filter(e=>!e.endsWith("-"+t)):[])},_hiddenMenus:[],hideOpenMenus(t){if(this._hiddenMenus=[...this.getOpenMenus(t)],this._hiddenMenus.length!==0)for(const e of this._hiddenMenus)this.deleteOpenMenu(e,t)},showOpenMenus(t){if(this._hiddenMenus.length!==0){for(const e of this._hiddenMenus)this.addOpenMenu(e,t);this._hiddenMenus=[]}},isMenuOpen(t,e){return this.getOpenMenus(e).includes(t)},hasOpenMenus(t){return this.getOpenMenus(t).length>0},hasAnyOpenMenus(){return this.getOpenMenus().length>0},forContext(t){return{getOpenMenus:()=>this.getOpenMenus(t),addOpenMenu:e=>this.addOpenMenu(e,t),deleteOpenMenu:e=>this.deleteOpenMenu(e,t),clearOpenMenus:()=>this.clearOpenMenus(t),isMenuOpen:e=>this.isMenuOpen(e,t),hasOpenMenus:()=>this.hasOpenMenus(t),hasAnyOpenMenus:()=>this.hasAnyOpenMenus()}}},SI=new p9e,yGe={maxShapesPerPage:4e3,maxFilesAtOnce:100,maxPages:40,animationMediumMs:320,followChaseViewportSnap:2,doubleClickDurationMs:450,multiClickDurationMs:200,coarseDragDistanceSquared:36,dragDistanceSquared:16,defaultSvgPadding:32,cameraSlideFriction:.09,gridSteps:[{min:-1,mid:.15,step:64},{min:.05,mid:.375,step:16},{min:.15,mid:1,step:4},{min:.7,mid:2.5,step:1}],collaboratorInactiveTimeoutMs:6e4,collaboratorIdleTimeoutMs:3e3,collaboratorCheckIntervalMs:1200,cameraMovingTimeoutMs:64,hitTestMargin:8,edgeScrollDelay:200,edgeScrollEaseDuration:200,edgeScrollSpeed:25,edgeScrollDistance:8,coarsePointerWidth:12,coarseHandleRadius:20,handleRadius:12,longPressDurationMs:500,textShadowLod:.35,adjacentShapeMargin:10,flattenImageBoundsExpand:64,flattenImageBoundsPadding:16,laserDelayMs:1200,maxExportDelayMs:5e3,temporaryAssetPreviewLifetimeMs:18e4,actionShortcutsLocation:"swap",createTextOnCanvasDoubleClick:!0,exportProvider:v.Fragment,enableToolbarKeyboardShortcuts:!0,maxFontsToLoadBeforeRender:1/0,nonce:void 0};function rZ(t,e){if(!e)return!1;switch(t.type){case"mixed":return e.type==="mixed";case"shared":return e.type==="shared"&&t.value===e.value;default:throw Jn(t)}}class bGe{constructor(e){V(this,"map");this.map=new Map(e)}get(e){return this.map.get(e)}getAsKnownValue(e){const n=this.get(e);if(n&&n.type!=="mixed")return n.value}get size(){return this.map.size}equals(e){if(this.size!==e.size)return!1;const n=new Set;for(const[r,o]of this){if(!rZ(o,e.get(r)))return!1;n.add(r)}for(const[r,o]of e)if(!n.has(r)&&!rZ(o,this.get(r)))return!1;return!0}keys(){return this.map.keys()}values(){return this.map.values()}entries(){return this.map.entries()}[Symbol.iterator](){return this.map[Symbol.iterator]()}}class SF extends bGe{set(e,n){this.map.set(e,n)}applyValue(e,n){const r=this.get(e);if(!r){this.set(e,{type:"shared",value:n});return}switch(r.type){case"mixed":return;case"shared":r.value!==n&&this.set(e,{type:"mixed"});return;default:Jn(r,"type")}}}function SGe(t,e,n){return _c(t).then(function(r){return r.arrayBuffer()}).then(function(r){return new File([r],e,{type:n})})}const xGe="https://cdn.tldraw.com";function Yo(){return`${xGe}/${Ace}`}function wGe(t){switch(t.type){case"shapes":return`s${t.shapeIds.map(n=>nj(n.slice(6))).join(".")}`;case"page":return"p"+nj(Bs.parseId(t.pageId));case"viewport":{const{bounds:e,pageId:n}=t;let r=`v${Math.round(e.x)}.${Math.round(e.y)}.${Math.round(e.w)}.${Math.round(e.h)}`;return n&&(r+="."+nj(Bs.parseId(n))),r}default:Jn(t)}}function CGe(t){switch(t[0]){case"s":return{type:"shapes",shapeIds:t.slice(1).split(".").filter(Boolean).map(r=>Ar(decodeURIComponent(r)))};case"p":return{type:"page",pageId:Bs.createId(decodeURIComponent(t.slice(1)))};case"v":{const[n,r,o,i,s]=t.slice(1).split(".");return{type:"viewport",bounds:new rt(Number(n),Number(r),Number(o),Number(i)),pageId:s?Bs.createId(decodeURIComponent(s)):void 0}}default:throw Error("Invalid deep link string")}}function nj(t){return encodeURIComponent(t).replace(/\./g,"%2E")}function EGe(t,e){var o;let n=t;const r=new Set(e);for(;r.has(n);)n=(o=/^.*(\d+)$/.exec(n))!=null&&o[1]?n.replace(/(\d+)(?=\D?)$/,i=>(+i+1).toString()):`${n} 1`;return n}function aE(t,e,n,r){if(n.length===0)return[];const o=new Map;for(const s of Tn(n.map(a=>t.getShape(a)))){const{parentId:a}=s;o.has(a)||o.set(a,{children:Tn(t.getSortedChildIdsForParent(a).map(l=>t.getShape(l))),moving:new Set}),o.get(a).moving.add(s)}const i=[];switch(e){case"toBack":{o.forEach(({moving:s,children:a})=>PGe(s,a,i));break}case"toFront":{o.forEach(({moving:s,children:a})=>_Ge(s,a,i));break}case"forward":{o.forEach(({moving:s,children:a})=>IGe(t,s,a,i,r));break}case"backward":{o.forEach(({moving:s,children:a})=>TGe(t,s,a,i,r));break}}return i}function PGe(t,e,n){const r=e.length;if(t.size===r)return;let o,i;for(let s=0;s<r;s++){const a=e[s];if(t.has(a))o=a.index,t.delete(a);else{i=a.index;break}}if(t.size!==0){const s=yv(o,i,t.size);n.push(...Array.from(t.values()).sort(Ni).map((a,l)=>({...a,index:s[l]})))}}function _Ge(t,e,n){const r=e.length;if(t.size===r)return;let o,i;for(let s=r-1;s>-1;s--){const a=e[s];if(t.has(a))i=a.index,t.delete(a);else{o=a.index;break}}if(t.size!==0){const s=yv(o,i,t.size);n.push(...Array.from(t.values()).sort(Ni).map((a,l)=>({...a,index:s[l]})))}}function Kue(t,e){const n=Array.from(e).map(o=>{const i=t.getShapePageGeometry(o).vertices;return i?{shape:o,vertices:i}:null}).filter(Boolean);return o=>{const i=t.getShapePageGeometry(o).vertices;return i?n.some(s=>AB(s.vertices,i)):!1}}function IGe(t,e,n,r,o){var l;const i=Kue(t,e),s=n.length;if(e.size===s)return;let a={name:"skipping"};for(let c=0;c<s;c++){const u=e.has(n[c]);switch(a.name){case"skipping":{if(!u)continue;a={name:"selecting",selectIndex:c};break}case"selecting":{if(u||!(o!=null&&o.considerAllShapes)&&!i(n[c]))continue;const{selectIndex:d}=a;yv(n[c].index,(l=n[c+1])==null?void 0:l.index,c-d).forEach((f,h)=>{const g=n[d+h];e.has(g)&&r.push({...g,index:f})}),a={name:"skipping"};break}}}}function TGe(t,e,n,r,o){var l;const i=Kue(t,e),s=n.length;if(e.size===s)return;let a={name:"skipping"};for(let c=s-1;c>-1;c--){const u=e.has(n[c]);switch(a.name){case"skipping":{if(!u)continue;a={name:"selecting",selectIndex:c};break}case"selecting":{if(u||!(o!=null&&o.considerAllShapes)&&!i(n[c]))continue;yv((l=n[c-1])==null?void 0:l.index,n[c].index,a.selectIndex-c).forEach((d,f)=>{const h=n[c+f+1];e.has(h)&&r.push({...h,index:d})}),a={name:"skipping"};break}}}}function Gue({editor:t,ids:e}){const n=Tn(e.map(s=>t.getShape(s))),r=t.getShapesSharedRotation(e),o=t.getShapesRotatedPageBounds(e);if(!o)return null;const i=o.center.clone().rotWith(o.point,r);return{initialPageCenter:i,initialCursorAngle:i.angle(t.inputs.originPagePoint),initialShapesRotation:r,shapeSnapshots:n.map(s=>({shape:s,initialPagePoint:t.getShapePageTransform(s.id).point()}))}}function wP({delta:t,editor:e,snapshot:n,stage:r,centerOverride:o}){const{initialPageCenter:i,shapeSnapshots:s}=n;e.updateShapes(s.map(({shape:l,initialPagePoint:c})=>{const u=fa(l.parentId)?e.getShapePageTransform(l.parentId):Ke.Identity(),d=$.RotWith(c,o??i,t),f=Ke.applyToPoint(Ke.Inverse(u),d),h=Tp(l.rotation+t);return{id:l.id,type:l.type,x:f.x,y:f.y,rotation:h}}));const a=[];s.forEach(({shape:l})=>{var f,h,g;const c=e.getShape(l.id);if(!c)return;const u=e.getShapeUtil(l);if(r==="start"||r==="one-off"){const y=(f=u.onRotateStart)==null?void 0:f.call(u,l);y&&a.push(y)}const d=(h=u.onRotate)==null?void 0:h.call(u,l,c);if(d&&a.push(d),r==="end"||r==="one-off"){const y=(g=u.onRotateEnd)==null?void 0:g.call(u,l,c);y&&a.push(y)}}),a.length>0&&e.updateShapes(a)}const MGe=t=>{const{store:e}=t,n=e.query.filterHistory("binding"),r=e.query.records("binding");function o(){const i=r.get(),s=new Map;for(const a of i){const{fromId:l,toId:c}=a,u=s.get(l);u?u.push(a):s.set(l,[a]);const d=s.get(c);d?d.push(a):s.set(c,[a])}return s}return He("arrowBindingsIndex",(i,s)=>{if(_p(i))return o();const a=i,l=n.getDiffSince(s);if(l===Ua)return o();let c;function u(h){c??(c=new Map(a));const g=c.get(h.fromId),y=g==null?void 0:g.filter(x=>x.id!==h.id);y!=null&&y.length?c.set(h.fromId,y):c.delete(h.fromId);const m=c.get(h.toId),S=m==null?void 0:m.filter(x=>x.id!==h.id);S!=null&&S.length?c.set(h.toId,S):c.delete(h.toId)}function d(h){c??(c=new Map(a));let g=c.get(h);return g?g===a.get(h)&&(g=g.slice(0),c.set(h,g)):(g=[],c.set(h,g)),g}function f(h){d(h.fromId).push(h),d(h.toId).push(h)}for(const h of l){for(const g of Mo(h.added))f(g);for(const[g,y]of Mo(h.updated))u(g),f(y);for(const g of Mo(h.removed))u(g)}return c??a})};function OGe(t,e,n){const r=t.getShapeMaskedPageBounds(e);return r===void 0?!0:!n.includes(r)}const RGe=t=>{function e(n){const r=n.getCurrentPageShapeIds(),o=n.getViewportPageBounds(),i=new Set;return r.forEach(s=>{OGe(n,s,o)&&i.add(s)}),i}return He("notVisibleShapes",n=>{if(_p(n))return e(t);const r=e(t);if(n.size!==r.size)return r;for(const o of n)if(!r.has(o))return r;return n})},kGe=t=>{const e=t.query.ids("shape"),n=t.query.filterHistory("shape");function r(){const o={},i=e.get(),s=Array(i.size);return i.forEach(a=>s.push(t.get(a))),s.sort(Ni),s.forEach(a=>{o[a.parentId]||(o[a.parentId]=[]),o[a.parentId].push(a.id)}),o}return He("parentsToChildrenWithIndexes",(o,i)=>{if(_p(o))return r();const s=n.getDiffSince(i);if(s===Ua)return r();if(s.length===0)return o;let a=null;const l=d=>{a||(a={...o}),a[d]?a[d]===o[d]&&(a[d]=[...a[d]]):a[d]=[]},c=new Set;let u;for(let d=0,f=s.length;d<f;d++){u=s[d];for(const h of Object.values(u.added))Lm(h)&&(l(h.parentId),a[h.parentId].push(h.id),c.add(a[h.parentId]));for(const[h,g]of Object.values(u.updated))if(Lm(g)&&Lm(h)){if(h.parentId!==g.parentId)l(h.parentId),l(g.parentId),a[h.parentId].splice(a[h.parentId].indexOf(g.id),1),a[g.parentId].push(g.id),c.add(a[g.parentId]);else if(h.index!==g.index){l(g.parentId);const y=a[g.parentId].indexOf(g.id);a[g.parentId][y]=g.id,c.add(a[g.parentId])}}for(const h of Object.values(u.removed))Lm(h)&&(l(h.parentId),a[h.parentId].splice(a[h.parentId].indexOf(h.id),1))}for(const d of c){const f=Tn(d.map(h=>t.get(h)));f.sort(Ni),d.splice(0,d.length,...f.map(h=>h.id))}return a??o})},rj=(t,e,n)=>{for(;!rs(n.parentId);){const r=t.get(n.parentId);if(!r)return!1;n=r}return n.parentId===e},AGe=(t,e)=>{const n=t.query.ids("shape");let r=null;function o(){const i=e();return r=i,new Set([...n.get()].filter(s=>rj(t,i,t.get(s))))}return He("_shapeIdsInCurrentPage",(i,s)=>{if(_p(i))return o();const a=e();if(a!==r)return o();const l=t.history.getDiffSince(s);if(l===Ua)return o();const c=new mP(i);for(const d of l){for(const f of Object.values(d.added))Lm(f)&&rj(t,a,f)&&c.add(f.id);for(const[f,h]of Object.values(d.updated))Lm(h)&&(rj(t,a,h)?c.add(h.id):c.remove(h.id));for(const f of Object.keys(d.removed))fa(f)&&c.remove(f)}const u=c.get();return u?Db(u.value,u.diff):i})};var $Ge=Object.create,Xue=Object.defineProperty,DGe=Object.getOwnPropertyDescriptor,jGe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Yue=t=>{throw TypeError(t)},Que=(t,e,n)=>e in t?Xue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LGe=t=>[,,,$Ge(null)],Zue=["class","method","getter","setter","accessor","field","value","get","set"],Jue=t=>t!==void 0&&typeof t!="function"?Yue("Function expected"):t,NGe=(t,e,n,r,o)=>({kind:Zue[t],name:e,metadata:r,addInitializer:i=>n._?Yue("Already initialized"):o.push(Jue(i||null))}),FGe=(t,e)=>Que(e,jGe("metadata"),t[3]),zGe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},ede=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=Zue[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,DGe(o,n)),S=r.length-1;S>=0;S--)l=NGe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,Jue(s)&&(m[g]=s);return m&&Xue(o,n,m),o},hm=(t,e,n)=>Que(t,typeof e!="symbol"?e+"":e,n),tde,nde,Tw;const BGe=40;nde=[va],tde=[va];class n2{constructor(e){this.editor=e,zGe(Tw,5,this),hm(this,"_clickId",""),hm(this,"_clickTimeout"),hm(this,"_clickScreenPoint"),hm(this,"_previousScreenPoint"),hm(this,"_clickState","idle"),hm(this,"lastPointerInfo",{})}_getClickTimeout(e,n=br()){this._clickId=n,clearTimeout(this._clickTimeout),this._clickTimeout=this.editor.timers.setTimeout(()=>{if(this._clickState===e&&this._clickId===n){switch(this._clickState){case"pendingTriple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"double_click",phase:"settle"});break}case"pendingQuadruple":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"triple_click",phase:"settle"});break}case"pendingOverflow":{this.editor.dispatch({...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"settle"});break}}this._clickState="idle"}},e==="idle"||e==="pendingDouble"?this.editor.options.doubleClickDurationMs:this.editor.options.multiClickDurationMs)}get clickState(){return this._clickState}handlePointerEvent(e){switch(e.name){case"pointer_down":{if(!this._clickState)return e;switch(this._clickScreenPoint=$.From(e.point),this._previousScreenPoint&&$.Dist2(this._previousScreenPoint,this._clickScreenPoint)>BGe**2&&(this._clickState="idle"),this._previousScreenPoint=this._clickScreenPoint,this.lastPointerInfo=e,this._clickState){case"pendingDouble":return this._clickState="pendingTriple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"double_click",phase:"down"};case"pendingTriple":return this._clickState="pendingQuadruple",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"triple_click",phase:"down"};case"pendingQuadruple":return this._clickState="pendingOverflow",this._clickTimeout=this._getClickTimeout(this._clickState),{...e,type:"click",name:"quadruple_click",phase:"down"};case"idle":{this._clickState="pendingDouble";break}case"pendingOverflow":{this._clickState="overflow";break}}return this._clickTimeout=this._getClickTimeout(this._clickState),e}case"pointer_up":{if(!this._clickState)return e;switch(this._clickScreenPoint=$.From(e.point),this._clickState){case"pendingTriple":return{...this.lastPointerInfo,type:"click",name:"double_click",phase:"up"};case"pendingQuadruple":return{...this.lastPointerInfo,type:"click",name:"triple_click",phase:"up"};case"pendingOverflow":return{...this.lastPointerInfo,type:"click",name:"quadruple_click",phase:"up"}}return e}case"pointer_move":return this._clickState!=="idle"&&this._clickScreenPoint&&$.Dist2(this._clickScreenPoint,this.editor.inputs.currentScreenPoint)>(this.editor.getInstanceState().isCoarsePointer?this.editor.options.coarseDragDistanceSquared:this.editor.options.dragDistanceSquared)&&this.cancelDoubleClickTimeout(),e}return e}cancelDoubleClickTimeout(){this._clickTimeout=clearTimeout(this._clickTimeout),this._clickState="idle"}}Tw=LGe();ede(Tw,1,"_getClickTimeout",nde,n2);ede(Tw,1,"cancelDoubleClickTimeout",tde,n2);FGe(Tw,n2);class HGe{constructor(e){V(this,"_isEdgeScrolling",!1);V(this,"_edgeScrollDuration",-1);this.editor=e}updateEdgeScrolling(e){const{editor:n}=this,r=this.getEdgeScroll();if(r.x===0&&r.y===0)this._isEdgeScrolling&&(this._isEdgeScrolling=!1,this._edgeScrollDuration=0);else if(this._isEdgeScrolling||(this._isEdgeScrolling=!0,this._edgeScrollDuration=0),this._edgeScrollDuration+=e,this._edgeScrollDuration>n.options.edgeScrollDelay){const o=n.options.edgeScrollEaseDuration>0?bi.easeInCubic(Math.min(1,this._edgeScrollDuration/(n.options.edgeScrollDelay+n.options.edgeScrollEaseDuration))):1;this.moveCameraWhenCloseToEdge({x:r.x*o,y:r.y*o})}}getEdgeProximityFactors(e,n,r,o,i){const{editor:s}=this,a=s.options.edgeScrollDistance,l=r?s.options.coarsePointerWidth:0,c=e-l,u=e+l,d=o?0:a,f=i?n:n-a;return c<d?Math.min(1,(d-c)/a):u>f?-Math.min(1,(u-f)/a):0}getEdgeScroll(){const{editor:e}=this,{inputs:{currentScreenPoint:{x:n,y:r}}}=e,o=e.getViewportScreenBounds(),{isCoarsePointer:i,insets:[s,a,l,c]}=e.getInstanceState(),u=this.getEdgeProximityFactors(n,o.w,i,c,a),d=this.getEdgeProximityFactors(r,o.h,i,s,l);return{x:u,y:d}}moveCameraWhenCloseToEdge(e){const{editor:n}=this;if(!n.inputs.isDragging||n.inputs.isPanning||n.getCameraOptions().isLocked||e.x===0&&e.y===0)return;const r=n.getViewportScreenBounds(),o=r.w<1e3?.612:1,i=r.h<1e3?.612:1,s=n.getZoomLevel(),a=n.user.getEdgeScrollSpeed()*n.options.edgeScrollSpeed,l=a*e.x*o/s,c=a*e.y*i/s,{x:u,y:d,z:f}=n.getCamera();n.setCamera(new $(u+l,d+c,f))}}class UGe{constructor(e,n){V(this,"disposeSideEffectListener");this.editor=e,this.disposeSideEffectListener=e.sideEffects.registerAfterChangeHandler("instance",(o,i)=>{o.isFocused!==i.isFocused&&this.updateContainerClass()});const r=e.getInstanceState().isFocused;n!==r&&e.updateInstanceState({isFocused:!!n}),this.updateContainerClass(),document.body.addEventListener("keydown",this.handleKeyDown.bind(this)),document.body.addEventListener("mousedown",this.handleMouseDown.bind(this))}updateContainerClass(){const e=this.editor.getContainer();this.editor.getInstanceState().isFocused?e.classList.add("tl-container__focused"):e.classList.remove("tl-container__focused"),e.classList.add("tl-container__no-focus-ring")}handleKeyDown(e){const n=this.editor.getContainer();["Tab","ArrowUp","ArrowDown"].includes(e.key)&&n.classList.remove("tl-container__no-focus-ring")}handleMouseDown(){this.editor.getContainer().classList.add("tl-container__no-focus-ring")}focus(){this.editor.getContainer().focus()}blur(){this.editor.complete(),this.editor.getContainer().blur()}dispose(){var e;document.body.removeEventListener("keydown",this.handleKeyDown.bind(this)),document.body.removeEventListener("mousedown",this.handleMouseDown.bind(this)),(e=this.disposeSideEffectListener)==null||e.call(this)}}class WGe{constructor(e,n){V(this,"shapeFontFacesCache");V(this,"shapeFontLoadStateCache");V(this,"fontStates",new sF("font states"));V(this,"fontsToLoad",new Set);this.editor=e,this.assetUrls=n,this.shapeFontFacesCache=e.store.createComputedCache("shape font faces",r=>this.editor.getShapeUtil(r).getFontFaces(r),{areResultsEqual:Z_,areRecordsEqual:(r,o)=>r.props===o.props}),this.shapeFontLoadStateCache=e.store.createCache(r=>{const o=He("font faces",()=>this.getShapeFontFaces(r));return He("font load state",()=>o.get().map(s=>this.getFontState(s)),{isEqual:Z_})})}getShapeFontFaces(e){const n=typeof e=="string"?e:e.id;return this.shapeFontFacesCache.get(n)??ps}trackFontsForShape(e){const n=typeof e=="string"?e:e.id;this.shapeFontLoadStateCache.get(n)}async loadRequiredFontsForCurrentPage(e=1/0){const n=new Set;for(const o of this.editor.getCurrentPageShapeIds())for(const i of this.getShapeFontFaces(this.editor.getShape(o)))n.add(i);if(n.size>e)return;const r=Array.from(n,o=>this.ensureFontIsLoaded(o));await Promise.all(r)}getFontState(e){return this.fontStates.get(e)??null}ensureFontIsLoaded(e){const n=this.getFontState(e);if(n)return n.loadingPromise;const r=this.findOrCreateFontFace(e),o={state:"loading",instance:r,loadingPromise:r.load().then(()=>{document.fonts.add(r),this.fontStates.update(e,i=>({...i,state:"ready"}))}).catch(i=>{console.error(i),this.fontStates.update(e,s=>({...s,state:"error"}))})};return this.fontStates.set(e,o),o.loadingPromise}requestFonts(e){this.fontsToLoad.size||queueMicrotask(()=>{if(this.editor.isDisposed)return;const n=this.fontsToLoad;this.fontsToLoad=new Set,Wa(()=>{for(const r of n)this.ensureFontIsLoaded(r)})});for(const n of e)this.fontsToLoad.add(n)}findOrCreateFontFace(e){var o;for(const i of document.fonts)if(i.family===e.family&&zs(oZ).every(([s,a])=>i[s]===(e[s]??a)))return i;const n=((o=this.assetUrls)==null?void 0:o[e.src.url])??e.src.url,r=new FontFace(e.family,`url(${JSON.stringify(n)})`,{...hh(oZ,i=>e[i]),display:"swap"});return document.fonts.add(r),r}async toEmbeddedCssDeclaration(e){var i;const n=((i=this.assetUrls)==null?void 0:i[e.src.url])??e.src.url,r=await Fs.urlToDataUrl(n),o=Tn([`url("${r}")`,e.src.format?`format(${e.src.format})`:null,e.src.tech?`tech(${e.src.tech})`:null]).join(" ");return Tn(["@font-face {",`  font-family: "${e.family}";`,e.ascentOverride?`  ascent-override: ${e.ascentOverride};`:null,e.descentOverride?`  descent-override: ${e.descentOverride};`:null,e.stretch?`  font-stretch: ${e.stretch};`:null,e.style?`  font-style: ${e.style};`:null,e.weight?`  font-weight: ${e.weight};`:null,e.featureSettings?`  font-feature-settings: ${e.featureSettings};`:null,e.lineGapOverride?`  line-gap-override: ${e.lineGapOverride};`:null,e.unicodeRange?`  unicode-range: ${e.unicodeRange};`:null,`  src: ${o};`,"}"]).join(`
`)}}const oZ={style:"normal",weight:"normal",stretch:"normal",unicodeRange:"U+0-10FFFF",featureSettings:"normal",ascentOverride:"normal",descentOverride:"normal",lineGapOverride:"normal"};function bb(t){return qGe}class VGe{constructor(){V(this,"length",0);V(this,"head",null);V(this,"tail",this)}push(e){return new UB(e,this)}toArray(){return ps}[Symbol.iterator](){return{next(){return{value:void 0,done:!0}}}}}const qGe=new VGe;class UB{constructor(e,n){V(this,"length");this.head=e,this.tail=n,this.length=n.length+1}push(e){return new UB(e,this)}toArray(){return Array.from(this)}[Symbol.iterator](){let e=this;return{next(){if(e.length){const n=e.head;return e=e.tail,{value:n,done:!1}}else return{value:void 0,done:!0}}}}}class KGe{constructor(e){V(this,"store");V(this,"dispose");V(this,"state","recording");V(this,"pendingDiff",new XGe);V(this,"stacks",bo("HistoryManager.stacks",{undos:bb(),redos:bb()},{isEqual:(e,n)=>e.undos===n.undos&&e.redos===n.redos}));V(this,"annotateError");V(this,"_isInBatch",!1);this.store=e.store,this.annotateError=e.annotateError??ux,this.dispose=this.store.addHistoryInterceptor((n,r)=>{if(r==="user")switch(this.state){case"recording":this.pendingDiff.apply(n.changes),this.stacks.update(({undos:o})=>({undos:o,redos:bb()}));break;case"recordingPreserveRedoStack":this.pendingDiff.apply(n.changes);break;case"paused":break;default:Jn(this.state)}})}flushPendingDiff(){if(this.pendingDiff.isEmpty())return;const e=this.pendingDiff.clear();this.stacks.update(({undos:n,redos:r})=>({undos:n.push({type:"diff",diff:e}),redos:r}))}getNumUndos(){return this.stacks.get().undos.length+(this.pendingDiff.isEmpty()?0:1)}getNumRedos(){return this.stacks.get().redos.length}batch(e,n){const r=this.state;r!=="paused"&&(n!=null&&n.history)&&(this.state=GGe[n.history]);try{if(this._isInBatch)return Wa(e),this;this._isInBatch=!0;try{Wa(e)}catch(o){throw this.annotateError(o),o}finally{this._isInBatch=!1}return this}finally{this.state=r}}_undo({pushToRedoStack:e,toMark:n=void 0}){var o;const r=this.state;this.state="paused";try{let{undos:i,redos:s}=this.stacks.get();const a=this.pendingDiff.clear(),l=Vle(a),c=aF(a);e&&!l&&(s=s.push({type:"diff",diff:a}));let u=!1;if(l)for(;((o=i.head)==null?void 0:o.type)==="stop";){const d=i.head;if(i=i.tail,e&&(s=s.push(d)),d.id===n){u=!0;break}}if(!u)e:for(;i.head;){const d=i.head;switch(i=i.tail,e&&(s=s.push(d)),d.type){case"diff":yS(c,[aF(d.diff)]);break;case"stop":if(!n)break e;if(d.id===n){u=!0;break e}break;default:Jn(d)}}if(!u&&n)return this;this.store.applyDiff(c,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:i,redos:s})}finally{this.state=r}return this}undo(){return this._undo({pushToRedoStack:!0}),this}redo(){var n;const e=this.state;this.state="paused";try{this.flushPendingDiff();let{undos:r,redos:o}=this.stacks.get();if(o.length===0)return this;for(;((n=o.head)==null?void 0:n.type)==="stop";)r=r.push(o.head),o=o.tail;const i=oI();for(;o.head;){const s=o.head;if(r=r.push(s),o=o.tail,s.type==="diff")yS(i,[s.diff]);else break}this.store.applyDiff(i,{ignoreEphemeralKeys:!0}),this.store.ensureStoreIsUsable(),this.stacks.set({undos:r,redos:o})}finally{this.state=e}return this}bail(){return this._undo({pushToRedoStack:!1}),this}bailToMark(e){return this._undo({pushToRedoStack:!1,toMark:e}),this}squashToMark(e){var i;let n=this.stacks.get().undos;const r=[];for(;n.head&&!(n.head.type==="stop"&&n.head.id===e);)n.head.type==="diff"&&r.push(n.head.diff),n=n.tail;if(!n.head||((i=n.head)==null?void 0:i.id)!==e)return console.error("Could not find mark to squash to: ",e),this;if(r.length===0)return this;const o=oI();return yS(o,r.reverse()),this.stacks.update(({redos:s})=>({undos:n.push({type:"diff",diff:o}),redos:s})),this}_mark(e){Wa(()=>{this.flushPendingDiff(),this.stacks.update(({undos:n,redos:r})=>({undos:n.push({type:"stop",id:e}),redos:r}))})}clear(){this.stacks.set({undos:bb(),redos:bb()}),this.pendingDiff.clear()}getMarkIdMatching(e){let n=this.stacks.get().undos;for(;n.head;){if(n.head.type==="stop"&&n.head.id.includes(e))return n.head.id;n=n.tail}return null}debug(){const{undos:e,redos:n}=this.stacks.get();return{undos:e.toArray(),redos:n.toArray(),pendingDiff:this.pendingDiff.debug(),state:this.state}}}const GGe={record:"recording","record-preserveRedoStack":"recordingPreserveRedoStack",ignore:"paused"};class XGe{constructor(){V(this,"diff",oI());V(this,"isEmptyAtom",bo("PendingDiff.isEmpty",!0))}clear(){const e=this.diff;return this.diff=oI(),this.isEmptyAtom.set(!0),e}isEmpty(){return this.isEmptyAtom.get()}apply(e){yS(this.diff,[e]),this.isEmptyAtom.set(Vle(this.diff))}debug(){return{diff:this.diff,isEmpty:this.isEmpty()}}}class YGe{constructor(e){V(this,"scribbleItems",new Map);V(this,"state","paused");this.editor=e}addScribble(e,n=br()){const r={id:n,scribble:{id:n,size:20,color:"accent",opacity:.8,delay:0,points:[],shrink:.1,taper:!0,...e,state:"starting"},timeoutMs:0,delayRemaining:e.delay??0,prev:null,next:null};return this.scribbleItems.set(n,r),r}reset(){this.editor.updateInstanceState({scribbles:[]}),this.scribbleItems.clear()}stop(e){const n=this.scribbleItems.get(e);if(!n)throw Error(`Scribble with id ${e} not found`);return n.delayRemaining=Math.min(n.delayRemaining,200),n.scribble.state="stopping",n}addPoint(e,n,r,o=.5){const i=this.scribbleItems.get(e);if(!i)throw Error(`Scribble with id ${e} not found`);const{prev:s}=i,a={x:n,y:r,z:o};return(!s||$.Dist(s,a)>=1)&&(i.next=a),i}tick(e){this.scribbleItems.size!==0&&this.editor.run(()=>{this.scribbleItems.forEach(n=>{if(n.scribble.state==="starting"){const{next:l,prev:c}=n;l&&l!==c&&(n.prev=l,n.scribble.points.push(l)),n.scribble.points.length>8&&(n.scribble.state="active");return}n.delayRemaining>0&&(n.delayRemaining=Math.max(0,n.delayRemaining-e)),n.timeoutMs+=e,n.timeoutMs>=16&&(n.timeoutMs=0);const{delayRemaining:r,timeoutMs:o,prev:i,next:s,scribble:a}=n;switch(a.state){case"active":{s&&s!==i?(n.prev=s,a.points.push(s),r===0&&a.points.length>8&&a.points.shift()):o===0&&(a.points.length>1?a.points.shift():n.delayRemaining=a.delay);break}case"stopping":{if(n.delayRemaining===0&&o===0){if(a.points.length===1){this.scribbleItems.delete(n.id);return}a.shrink&&(a.size=Math.max(1,a.size*(1-a.shrink))),a.points.shift()}break}}}),this.editor.updateInstanceState({scribbles:Array.from(this.scribbleItems.values()).map(({scribble:n})=>({...n,points:[...n.points]})).slice(-5)})})}}var QGe=Object.create,rde=Object.defineProperty,ZGe=Object.getOwnPropertyDescriptor,JGe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),ode=t=>{throw TypeError(t)},ide=(t,e,n)=>e in t?rde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eXe=t=>[,,,QGe(null)],sde=["class","method","getter","setter","accessor","field","value","get","set"],ade=t=>t!==void 0&&typeof t!="function"?ode("Function expected"):t,tXe=(t,e,n,r,o)=>({kind:sde[t],name:e,metadata:r,addInitializer:i=>n._?ode("Already initialized"):o.push(ade(i||null))}),nXe=(t,e)=>ide(e,JGe("metadata"),t[3]),rXe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},r2=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=sde[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,ZGe(o,n)),S=r.length-1;S>=0;S--)l=tXe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,ade(s)&&(m[g]=s);return m&&rde(o,n,m),o},oXe=(t,e,n)=>ide(t,e+"",n),lde,cde,ude,dde,wg;const hn=t=>Math.round(t*10**8)/10**8;function sd(t,e,n,r,o){const i=t.filter(a=>(r==="forward"?a.startNode.id===e:a.endNode.id===e)&&hn(a.length)===hn(n)&&cc(a.breadthIntersection[0],a.breadthIntersection[1],o[0],o[1]));if(i.length===0)return[];const s=new Set;return i.forEach(a=>{const l=r==="forward"?a.endNode.id:a.startNode.id;if(!s.has(l)){s.add(l);const c=sd(t,l,n,r,cc(a.breadthIntersection[0],a.breadthIntersection[1],o[0],o[1]));i.push(...c)}}),i}function iXe(t){t.sort((e,n)=>n.gaps.length-e.gaps.length);for(let e=t.length-1;e>0;e--){const n=t[e];for(let r=e-1;r>=0;r--){const o=t[r];if(o.direction===n.direction&&n.gaps.every(i=>o.gaps.some(s=>hn(i.startEdge[0].x)===hn(s.startEdge[0].x)&&hn(i.startEdge[0].y)===hn(s.startEdge[0].y)&&hn(i.startEdge[1].x)===hn(s.startEdge[1].x)&&hn(i.startEdge[1].y)===hn(s.startEdge[1].y))&&o.gaps.some(s=>hn(i.endEdge[0].x)===hn(s.endEdge[0].x)&&hn(i.endEdge[0].y)===hn(s.endEdge[0].y)&&hn(i.endEdge[1].x)===hn(s.endEdge[1].x)&&hn(i.endEdge[1].y)===hn(s.endEdge[1].y)))){t.splice(e,1);break}}}}dde=[He],ude=[He],cde=[He],lde=[He];class oy{constructor(e){this.manager=e,rXe(wg,5,this),oXe(this,"editor"),this.editor=e.editor}getSnapPointsCache(){const{editor:e}=this;return e.store.createComputedCache("snapPoints",n=>{const r=e.getShapePageTransform(n.id);if(!r)return;const i=e.getShapeUtil(n).getBoundsSnapGeometry(n).points??e.getShapeGeometry(n).bounds.cornersAndCenter;if(!(!r||!i))return i.map((s,a)=>{const{x:l,y:c}=Ke.applyToPoint(r,s);return{x:l,y:c,id:`${n.id}:${a}`}})})}getSnapPoints(e){return this.getSnapPointsCache().get(e)??[]}getSnappablePoints(){const e=this.getSnapPointsCache(),n=this.manager.getSnappableShapes(),r=[];for(const o of n){const i=e.get(o);i&&r.push(...i)}return r}getSnappableGapNodes(){return Array.from(this.manager.getSnappableShapes(),e=>({id:e,pageBounds:Ds(this.editor.getShapePageBounds(e))}))}getVisibleGaps(){const e=[],n=[];let r,o;const i=this.getSnappableGapNodes().sort((a,l)=>a.pageBounds.minX-l.pageBounds.minX);for(let a=0;a<i.length;a++){r=i[a];for(let l=a+1;l<i.length;l++)o=i[l],r.pageBounds.maxX<o.pageBounds.minX&&vb(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)&&e.push({startNode:r,endNode:o,startEdge:[new $(r.pageBounds.maxX,r.pageBounds.minY),new $(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new $(o.pageBounds.minX,o.pageBounds.minY),new $(o.pageBounds.minX,o.pageBounds.maxY)],length:o.pageBounds.minX-r.pageBounds.maxX,breadthIntersection:cc(r.pageBounds.minY,r.pageBounds.maxY,o.pageBounds.minY,o.pageBounds.maxY)})}const s=i.sort((a,l)=>a.pageBounds.minY-l.pageBounds.minY);for(let a=0;a<s.length;a++){r=s[a];for(let l=a+1;l<s.length;l++)o=s[l],r.pageBounds.maxY<o.pageBounds.minY&&vb(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)&&n.push({startNode:r,endNode:o,startEdge:[new $(r.pageBounds.minX,r.pageBounds.maxY),new $(r.pageBounds.maxX,r.pageBounds.maxY)],endEdge:[new $(o.pageBounds.minX,o.pageBounds.minY),new $(o.pageBounds.maxX,o.pageBounds.minY)],length:o.pageBounds.minY-r.pageBounds.maxY,breadthIntersection:cc(r.pageBounds.minX,r.pageBounds.maxX,o.pageBounds.minX,o.pageBounds.maxX)})}return{horizontal:e,vertical:n}}snapTranslateShapes({lockedAxis:e,initialSelectionPageBounds:n,initialSelectionSnapPoints:r,dragDelta:o}){var m,S;const i=this.manager.getSnapThreshold(),s=this.getSnappablePoints(),a=n.clone().translate(o),l=r.map(({x,y:C},E)=>({id:"selection:"+E,x:x+o.x,y:C+o.y})),c=s,u=[],d=[],f=new $(i,i);this.collectPointSnaps({minOffset:f,nearestSnapsX:u,nearestSnapsY:d,otherNodeSnapPoints:c,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:a,nearestSnapsX:u,nearestSnapsY:d,minOffset:f});const h=new $(e==="x"?0:((m=u[0])==null?void 0:m.nudge)??0,e==="y"?0:((S=d[0])==null?void 0:S.nudge)??0);f.x=0,f.y=0,u.length=0,d.length=0,l.forEach(x=>{x.x+=h.x,x.y+=h.y}),a.translate(h),this.collectPointSnaps({minOffset:f,nearestSnapsX:u,nearestSnapsY:d,otherNodeSnapPoints:c,selectionSnapPoints:l}),this.collectGapSnaps({selectionPageBounds:a,nearestSnapsX:u,nearestSnapsY:d,minOffset:f});const g=this.getPointSnapLines({nearestSnapsX:u,nearestSnapsY:d}),y=this.getGapSnapLines({selectionPageBounds:a,nearestSnapsX:u,nearestSnapsY:d});return this.manager.setIndicators([...y,...g]),{nudge:h}}snapResizeShapes({initialSelectionPageBounds:e,dragDelta:n,handle:r,isAspectRatioLocked:o,isResizingFromCenter:i}){var T,M;const s=this.manager.getSnapThreshold(),{box:a,scaleX:l,scaleY:c}=rt.Resize(e,r,i?n.x*2:n.x,i?n.y*2:n.y,o);let u=r;l<0&&(u=iqe(u)),c<0&&(u=oqe(u)),i&&(a.center=e.center);const d=u==="top"||u==="bottom",f=u==="left"||u==="right",h=iZ(u,a),g=this.getSnappablePoints(),y=[],m=[],S=new $(s,s);this.collectPointSnaps({minOffset:S,nearestSnapsX:y,nearestSnapsY:m,otherNodeSnapPoints:g,selectionSnapPoints:h});const x=new $(d?0:((T=y[0])==null?void 0:T.nudge)??0,f?0:((M=m[0])==null?void 0:M.nudge)??0);if(o&&sqe(u)&&x.len()!==0){const R=y.length&&m.length?Math.abs(x.x)<Math.abs(x.y)?"x":"y":y.length?"x":"y",A=e.aspectRatio;R==="x"?(m.length=0,x.y=x.x/A,(u==="bottom_left"||u==="top_right")&&(x.y=-x.y)):(y.length=0,x.x=x.y*A,(u==="bottom_left"||u==="top_right")&&(x.x=-x.x))}const C=$.Add(n,x),{box:E}=rt.Resize(e,r,i?C.x*2:C.x,i?C.y*2:C.y,o);i&&(E.center=e.center);const P=iZ("any",E);y.length=0,m.length=0,S.x=0,S.y=0,this.collectPointSnaps({minOffset:S,nearestSnapsX:y,nearestSnapsY:m,otherNodeSnapPoints:g,selectionSnapPoints:P});const I=this.getPointSnapLines({nearestSnapsX:y,nearestSnapsY:m});return this.manager.setIndicators([...I]),{nudge:x}}collectPointSnaps({selectionSnapPoints:e,otherNodeSnapPoints:n,minOffset:r,nearestSnapsX:o,nearestSnapsY:i}){for(const s of e)for(const a of n){const l=$.Sub(s,a),c=Math.abs(l.x),u=Math.abs(l.y);hn(c)<=hn(r.x)&&(hn(c)<hn(r.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:s,otherPoint:a},nudge:a.x-s.x}),r.x=c),hn(u)<=hn(r.y)&&(hn(u)<hn(r.y)&&(i.length=0),i.push({type:"points",points:{thisPoint:s,otherPoint:a},nudge:a.y-s.y}),r.y=u)}}collectGapSnaps({selectionPageBounds:e,minOffset:n,nearestSnapsX:r,nearestSnapsY:o}){const{horizontal:i,vertical:s}=this.getVisibleGaps();for(const a of i){if(!vb(a.breadthIntersection[0],a.breadthIntersection[1],e.minY,e.maxY))continue;const c=a.startEdge[0].x+a.length/2-e.center.x;if(a.length>e.width&&hn(Math.abs(c))<=hn(n.x)){hn(Math.abs(c))<hn(n.x)&&(r.length=0),n.x=Math.abs(c);const S={type:"gap_center",gap:a,nudge:c},x=r.find(({type:E})=>E==="gap_center"),C=x&&cc(a.breadthIntersection[0],a.breadthIntersection[1],x.gap.breadthIntersection[0],x.gap.breadthIntersection[1]);x&&x.gap.length>a.length&&C?r[r.indexOf(x)]=S:(!x||!C)&&r.push(S)}const d=a.startNode.pageBounds.minX-a.length,f=e.maxX,h=d-f;hn(Math.abs(h))<=hn(n.x)&&(hn(Math.abs(h))<hn(n.x)&&(r.length=0),n.x=Math.abs(h),r.push({type:"gap_duplicate",gap:a,protrusionDirection:"left",nudge:h}));const g=a.endNode.pageBounds.maxX+a.length,y=e.minX,m=g-y;hn(Math.abs(m))<=hn(n.x)&&(hn(Math.abs(m))<hn(n.x)&&(r.length=0),n.x=Math.abs(m),r.push({type:"gap_duplicate",gap:a,protrusionDirection:"right",nudge:m}))}for(const a of s){if(!vb(a.breadthIntersection[0],a.breadthIntersection[1],e.minX,e.maxX))continue;const c=a.startEdge[0].y+a.length/2-e.center.y;if(a.length>e.height&&hn(Math.abs(c))<=hn(n.y)){hn(Math.abs(c))<hn(n.y)&&(o.length=0),n.y=Math.abs(c);const S={type:"gap_center",gap:a,nudge:c},x=o.find(({type:E})=>E==="gap_center"),C=x&&vb(x.gap.breadthIntersection[0],x.gap.breadthIntersection[1],a.breadthIntersection[0],a.breadthIntersection[1]);x&&x.gap.length>a.length&&C?o[o.indexOf(x)]=S:(!x||!C)&&o.push(S);continue}const d=a.startNode.pageBounds.minY-a.length,f=e.maxY,h=d-f;hn(Math.abs(h))<=hn(n.y)&&(hn(Math.abs(h))<hn(n.y)&&(o.length=0),n.y=Math.abs(h),o.push({type:"gap_duplicate",gap:a,protrusionDirection:"top",nudge:h}));const g=a.endNode.pageBounds.maxY+a.length,y=e.minY,m=g-y;hn(Math.abs(m))<=hn(n.y)&&(hn(Math.abs(m))<hn(n.y)&&(o.length=0),n.y=Math.abs(m),o.push({type:"gap_duplicate",gap:a,protrusionDirection:"bottom",nudge:m}))}}getPointSnapLines({nearestSnapsX:e,nearestSnapsY:n}){const r={},o={};if(e.length>0){for(const i of e)if(i.type==="points"){const s=hn(i.points.otherPoint.x);r[s]||(r[s]=[]),r[s].push(i.points)}}if(n.length>0){for(const i of n)if(i.type==="points"){const s=hn(i.points.otherPoint.y);o[s]||(o[s]=[]),o[s].push(i.points)}}return Object.values(r).concat(Object.values(o)).map(i=>({id:br(),type:"points",points:j5(i.map(s=>$.From(s.otherPoint)).concat(i.map(s=>$.From(s.thisPoint))),(s,a)=>s.equals(a))}))}getGapSnapLines({selectionPageBounds:e,nearestSnapsX:n,nearestSnapsY:r}){const{vertical:o,horizontal:i}=this.getVisibleGaps(),s={top:e.sides[0],right:e.sides[1],bottom:[e.corners[3],e.corners[2]],left:[e.corners[0],e.corners[3]]},a=[];if(n.length>0)for(const l of n){if(l.type==="points")continue;const{gap:{breadthIntersection:c,startEdge:u,startNode:d,endNode:f,length:h,endEdge:g}}=l;switch(l.type){case"gap_center":{const y=(h-e.width)/2,m=cc(c[0],c[1],e.minY,e.maxY);a.push({type:"gaps",direction:"horizontal",id:br(),gaps:[...sd(i,d.id,y,"backward",m),{startEdge:u,endEdge:s.left},{startEdge:s.right,endEdge:g},...sd(i,f.id,y,"forward",m)]});break}case"gap_duplicate":{const y=cc(c[0],c[1],e.minY,e.maxY);a.push({type:"gaps",direction:"horizontal",id:br(),gaps:l.protrusionDirection==="left"?[{startEdge:s.right,endEdge:u.map(m=>m.clone().addXY(-d.pageBounds.width,0))},{startEdge:u,endEdge:g},...sd(i,f.id,h,"forward",y)]:[...sd(i,d.id,h,"backward",y),{startEdge:u,endEdge:g},{startEdge:g.map(m=>m.clone().addXY(l.gap.endNode.pageBounds.width,0)),endEdge:s.left}]});break}}}if(r.length>0)for(const l of r){if(l.type==="points")continue;const{gap:{breadthIntersection:c,startEdge:u,startNode:d,endNode:f,length:h,endEdge:g}}=l;switch(l.type){case"gap_center":{const y=(h-e.height)/2,m=cc(c[0],c[1],e.minX,e.maxX);a.push({type:"gaps",direction:"vertical",id:br(),gaps:[...sd(o,d.id,y,"backward",m),{startEdge:u,endEdge:s.top},{startEdge:s.bottom,endEdge:g},...sd(o,l.gap.endNode.id,y,"forward",m)]});break}case"gap_duplicate":{const y=cc(c[0],c[1],e.minX,e.maxX);a.push({type:"gaps",direction:"vertical",id:br(),gaps:l.protrusionDirection==="top"?[{startEdge:s.bottom,endEdge:u.map(m=>m.clone().addXY(0,-d.pageBounds.height))},{startEdge:u,endEdge:g},...sd(o,f.id,h,"forward",y)]:[...sd(o,d.id,h,"backward",y),{startEdge:u,endEdge:g},{startEdge:g.map(m=>m.clone().addXY(0,f.pageBounds.height)),endEdge:s.top}]})}break}}return iXe(a),a}}wg=eXe();r2(wg,1,"getSnapPointsCache",dde,oy);r2(wg,1,"getSnappablePoints",ude,oy);r2(wg,1,"getSnappableGapNodes",cde,oy);r2(wg,1,"getVisibleGaps",lde,oy);nXe(wg,oy);function iZ(t,e){const{minX:n,maxX:r,minY:o,maxY:i}=e,s=[];switch(t){case"top":case"left":case"top_left":case"any":s.push({id:"top_left",handle:"top_left",x:n,y:o})}switch(t){case"top":case"right":case"top_right":case"any":s.push({id:"top_right",handle:"top_right",x:r,y:o})}switch(t){case"bottom":case"right":case"bottom_right":case"any":s.push({id:"bottom_right",handle:"bottom_right",x:r,y:i})}switch(t){case"bottom":case"left":case"bottom_left":case"any":s.push({id:"bottom_left",handle:"bottom_left",x:n,y:i})}return s}var sXe=Object.create,fde=Object.defineProperty,aXe=Object.getOwnPropertyDescriptor,lXe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),hde=t=>{throw TypeError(t)},pde=(t,e,n)=>e in t?fde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cXe=t=>[,,,sXe(null)],gde=["class","method","getter","setter","accessor","field","value","get","set"],mde=t=>t!==void 0&&typeof t!="function"?hde("Function expected"):t,uXe=(t,e,n,r,o)=>({kind:gde[t],name:e,metadata:r,addInitializer:i=>n._?hde("Already initialized"):o.push(mde(i||null))}),dXe=(t,e)=>pde(e,lXe("metadata"),t[3]),fXe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},hXe=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=gde[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,aXe(o,n)),S=r.length-1;S>=0;S--)l=uXe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,mde(s)&&(m[g]=s);return m&&fde(o,n,m),o},pXe=(t,e,n)=>pde(t,e+"",n),vde,o2;const gXe=()=>null,mXe=()=>[];vde=[He];class WB{constructor(e){this.manager=e,fXe(o2,5,this),pXe(this,"editor"),this.editor=e.editor}getSnapGeometryCache(){const{editor:e}=this;return e.store.createComputedCache("handle snap geometry",n=>{const r=e.getShapeUtil(n).getHandleSnapGeometry(n),o=r.getSelfSnapOutline?r.getSelfSnapOutline.bind(r):gXe,i=r.getSelfSnapPoints?r.getSelfSnapPoints.bind(r):mXe;return{outline:r.outline===void 0?e.getShapeGeometry(n):r.outline,points:r.points??[],getSelfSnapOutline:o,getSelfSnapPoints:i}})}*iterateSnapPointsInPageSpace(e,n){var o,i;const r=(o=this.getSnapGeometryCache().get(e))==null?void 0:o.getSelfSnapPoints(n);if(r&&r.length){const s=Ds(this.editor.getShapePageTransform(e));for(const a of r)yield s.applyToPoint(a)}for(const s of this.manager.getSnappableShapes()){if(s===e)continue;const a=(i=this.getSnapGeometryCache().get(s))==null?void 0:i.points;if(!a||!a.length)continue;const l=Ds(this.editor.getShapePageTransform(s));for(const c of a)yield l.applyToPoint(c)}}*iterateSnapOutlines(e,n){var o,i;const r=(o=this.getSnapGeometryCache().get(e))==null?void 0:o.getSelfSnapOutline(n);r&&(yield{shapeId:e,outline:r});for(const s of this.manager.getSnappableShapes()){if(s===e)continue;const a=(i=this.getSnapGeometryCache().get(s))==null?void 0:i.outline;a&&(yield{shapeId:s,outline:a})}}getHandleSnapPosition({currentShapeId:e,handle:n,handleInPageSpace:r}){const o=this.manager.getSnapThreshold();let i=o,s=null;for(const c of this.iterateSnapPointsInPageSpace(e,n))$.DistMin(r,c,i)&&(i=$.Dist(r,c),s=c);if(s)return s;let a=o,l=null;for(const{shapeId:c,outline:u}of this.iterateSnapOutlines(e,n)){const d=Ds(this.editor.getShapePageTransform(c)),f=this.editor.getPointInShapeSpace(c,r),h=u.nearestPoint(f),g=d.applyToPoint(h);$.DistMin(r,g,a)&&(a=$.Dist(r,g),l=g)}return l||null}snapHandle({currentShapeId:e,handle:n}){const o=Ds(this.editor.getShapePageTransform(e)).applyToPoint(n),i=this.getHandleSnapPosition({currentShapeId:e,handle:n,handleInPageSpace:o});return i?(this.manager.setIndicators([{id:br(),type:"points",points:[i]}]),{nudge:$.Sub(i,o)}):null}}o2=cXe();hXe(o2,1,"getSnapGeometryCache",vde,WB);dXe(o2,WB);var vXe=Object.create,yde=Object.defineProperty,yXe=Object.getOwnPropertyDescriptor,bXe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),bde=t=>{throw TypeError(t)},Sde=(t,e,n)=>e in t?yde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SXe=t=>[,,,vXe(null)],xde=["class","method","getter","setter","accessor","field","value","get","set"],wde=t=>t!==void 0&&typeof t!="function"?bde("Function expected"):t,xXe=(t,e,n,r,o)=>({kind:xde[t],name:e,metadata:r,addInitializer:i=>n._?bde("Already initialized"):o.push(wde(i||null))}),wXe=(t,e)=>Sde(e,bXe("metadata"),t[3]),CXe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},VB=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=xde[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,yXe(o,n)),S=r.length-1;S>=0;S--)l=xXe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,wde(s)&&(m[g]=s);return m&&yde(o,n,m),o},oj=(t,e,n)=>Sde(t,typeof e!="symbol"?e+"":e,n),Cde,Ede,Pde,iy;Pde=[He],Ede=[He],Cde=[He];class Mw{constructor(e){this.editor=e,CXe(iy,5,this),oj(this,"shapeBounds"),oj(this,"handles"),oj(this,"_snapIndicators",bo("snapLines",void 0)),this.shapeBounds=new oy(this),this.handles=new WB(this)}getIndicators(){return this._snapIndicators.get()??ps}clearIndicators(){this.getIndicators().length&&this._snapIndicators.set(void 0)}setIndicators(e){this._snapIndicators.set(e)}getSnapThreshold(){return 8/this.editor.getZoomLevel()}getSnappableShapes(){const{editor:e}=this,n=e.getViewportPageBounds(),r=e.getSelectedShapeIds(),o=new Set,i=s=>{if(fa(s)){const l=e.getShape(s);l&&e.isShapeOfType(l,"frame")&&o.add(s)}const a=e.getSortedChildIdsForParent(s);for(const l of a){if(r.includes(l))continue;const c=e.getShape(l);if(!c||!e.getShapeUtil(c).canSnap(c))continue;const d=e.getShapePageBounds(l);if(d&&n.includes(d)){if(e.isShapeOfType(c,"group")){i(l);continue}o.add(l)}}};return i(this.getCurrentCommonAncestor()??e.getCurrentPageId()),o}getCurrentCommonAncestor(){return this.editor.findCommonAncestor(this.editor.getSelectedShapes())}}iy=SXe();VB(iy,1,"getSnapThreshold",Pde,Mw);VB(iy,1,"getSnappableShapes",Ede,Mw);VB(iy,1,"getCurrentCommonAncestor",Cde,Mw);wXe(iy,Mw);const EXe=/\r?\n|\r/g;function sZ(t){return t.replace(EXe,`
`).split(`
`).map(e=>e||" ").join(`
`)}const PXe={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},_Xe=/\s/;class IXe{constructor(e){V(this,"baseElem");this.editor=e,this.baseElem=document.createElement("div"),this.baseElem.classList.add("tl-text"),this.baseElem.classList.add("tl-text-measure"),this.baseElem.tabIndex=-1}measureText(e,n){const r=document.createElement("div");return r.textContent=sZ(e),this.measureHtml(r.innerHTML,n)}measureHtml(e,n){const r=this.baseElem.cloneNode();if(this.editor.getContainer().appendChild(r),r.innerHTML=e,this.baseElem.insertAdjacentElement("afterend",r),r.setAttribute("dir","auto"),r.style.setProperty("unicode-bidi","plaintext"),r.style.setProperty("font-family",n.fontFamily),r.style.setProperty("font-style",n.fontStyle),r.style.setProperty("font-weight",n.fontWeight),r.style.setProperty("font-size",n.fontSize+"px"),r.style.setProperty("line-height",n.lineHeight*n.fontSize+"px"),r.style.setProperty("max-width",n.maxWidth===null?null:n.maxWidth+"px"),r.style.setProperty("min-width",n.minWidth===null?null:n.minWidth+"px"),r.style.setProperty("padding",n.padding),r.style.setProperty("overflow-wrap",n.disableOverflowWrapBreaking?"normal":"break-word"),n.otherStyles)for(const[s,a]of Object.entries(n.otherStyles))r.style.setProperty(s,a);const o=r.scrollWidth,i=r.getBoundingClientRect();return r.remove(),{x:0,y:0,w:i.width,h:i.height,scrollWidth:o}}measureElementTextNodeSpans(e,{shouldTruncateToFirstLine:n=!1}={}){const r=[],o=e.getBoundingClientRect(),i=-o.left,s=-o.top,a=new Range,l=e.childNodes[0];let c=0,u=null,d=null,f=0,h=0,g=!1;for(const y of e.childNodes)if(y.nodeType===Node.TEXT_NODE)for(const m of y.textContent??""){a.setStart(l,c),a.setEnd(l,c+m.length);const S=a.getClientRects(),x=S[S.length-1],C=x.top+s,E=x.left+i,P=x.right+i,I=E<h,T=_Xe.test(m);if(T!==d||C!==f||!u){if(u){if(n&&C!==f){g=!0;break}r.push(u)}u={box:{x:E,y:C,w:x.width,h:x.height},text:m},h=E}else I&&(u.box.x=E),u.box.w=I?u.box.w+x.width:P-u.box.x,u.text+=m;m===`
`&&(h=0),d=T,f=C,c+=m.length}return u&&r.push(u),{spans:r,didTruncate:g}}measureTextSpans(e,n){if(e==="")return[];const r=this.baseElem.cloneNode();this.editor.getContainer().appendChild(r);const o=Math.ceil(n.width-n.padding*2);if(r.setAttribute("dir","auto"),r.style.setProperty("unicode-bidi","plaintext"),r.style.setProperty("width",`${o}px`),r.style.setProperty("height","min-content"),r.style.setProperty("font-size",`${n.fontSize}px`),r.style.setProperty("font-family",n.fontFamily),r.style.setProperty("font-weight",n.fontWeight),r.style.setProperty("line-height",`${n.lineHeight*n.fontSize}px`),r.style.setProperty("text-align",PXe[n.textAlign]),r.style.setProperty("font-style",n.fontStyle),n.otherStyles)for(const[c,u]of Object.entries(n.otherStyles))r.style.setProperty(c,u);const i=n.overflow==="truncate-ellipsis"||n.overflow==="truncate-clip";i&&(r.style.setProperty("overflow-wrap","anywhere"),r.style.setProperty("word-break","break-all"));const s=sZ(e);r.textContent=s;const{spans:a,didTruncate:l}=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:i});if(n.overflow==="truncate-ellipsis"&&l){r.textContent="";const c=Math.ceil(this.measureElementTextNodeSpans(r).spans[0].box.w);r.style.setProperty("width",`${o-c}px`),r.textContent=s;const u=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:!0}).spans,d=u[u.length-1];return u.push({text:"",box:{x:Math.min(d.box.x+d.box.w,n.width-n.padding-c),y:d.box.y,w:c,h:d.box.h}}),u}return r.remove(),a}}var TXe=Object.create,_de=Object.defineProperty,MXe=Object.getOwnPropertyDescriptor,OXe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Ide=t=>{throw TypeError(t)},Tde=(t,e,n)=>e in t?_de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RXe=t=>[,,,TXe(null)],Mde=["class","method","getter","setter","accessor","field","value","get","set"],Ode=t=>t!==void 0&&typeof t!="function"?Ide("Function expected"):t,kXe=(t,e,n,r,o)=>({kind:Mde[t],name:e,metadata:r,addInitializer:i=>n._?Ide("Already initialized"):o.push(Ode(i||null))}),AXe=(t,e)=>Tde(e,OXe("metadata"),t[3]),$Xe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},Rde=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=Mde[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,MXe(o,n)),S=r.length-1;S>=0;S--)l=kXe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,Ode(s)&&(m[g]=s);return m&&_de(o,n,m),o},lE=(t,e,n)=>Tde(t,typeof e!="symbol"?e+"":e,n),kde,Ade,Ow;const aZ=Jae;Ade=[va],kde=[va];class i2{constructor(e){this.editor=e,$Xe(Ow,5,this),lE(this,"cancelRaf"),lE(this,"isPaused",!0),lE(this,"now",0),lE(this,"prevPoint",new $),this.editor.disposables.add(this.dispose),this.start()}start(){var e;this.isPaused=!1,(e=this.cancelRaf)==null||e.call(this),this.cancelRaf=aZ(this.tick),this.now=Date.now()}tick(){if(this.isPaused)return;const e=Date.now(),n=e-this.now;this.now=e,this.updatePointerVelocity(n),this.editor.emit("frame",n),this.editor.emit("tick",n),this.cancelRaf=aZ(this.tick)}dispose(){var e;this.isPaused=!0,(e=this.cancelRaf)==null||e.call(this)}updatePointerVelocity(e){const{prevPoint:n,editor:{inputs:{currentScreenPoint:r,pointerVelocity:o}}}=this;if(e===0)return;const i=$.Sub(r,n);this.prevPoint=r.clone();const s=i.len(),a=s?i.div(s):new $(0,0),l=o.clone().lrp(a.mul(s/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),o.equals(l)||(this.editor.inputs.pointerVelocity=l)}}Ow=RXe();Rde(Ow,1,"tick",Ade,i2);Rde(Ow,1,"dispose",kde,i2);AXe(Ow,i2);var DXe=Object.create,$de=Object.defineProperty,jXe=Object.getOwnPropertyDescriptor,LXe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Dde=t=>{throw TypeError(t)},jde=(t,e,n)=>e in t?$de(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NXe=t=>[,,,DXe(null)],Lde=["class","method","getter","setter","accessor","field","value","get","set"],Nde=t=>t!==void 0&&typeof t!="function"?Dde("Function expected"):t,FXe=(t,e,n,r,o)=>({kind:Lde[t],name:e,metadata:r,addInitializer:i=>n._?Dde("Already initialized"):o.push(Nde(i||null))}),zXe=(t,e)=>jde(e,LXe("metadata"),t[3]),BXe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},Vl=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=Lde[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,jXe(o,n)),S=r.length-1;S>=0;S--)l=FXe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,Nde(s)&&(m[g]=s);return m&&$de(o,n,m),o},lZ=(t,e,n)=>jde(t,typeof e!="symbol"?e+"":e,n),Fde,zde,Bde,Hde,Ude,Wde,Vde,qde,Kde,Gde,Xde,Yde,Js;Yde=[He],Xde=[He],Gde=[He],Kde=[He],qde=[He],Vde=[He],Wde=[He],Ude=[He],Hde=[He],Bde=[He],zde=[He],Fde=[He];class Ea{constructor(e,n){if(this.user=e,this.inferDarkMode=n,BXe(Js,5,this),lZ(this,"systemColorScheme",bo("systemColorScheme","light")),lZ(this,"disposables",new Set),typeof window>"u"||!("matchMedia"in window))return;const r=window.matchMedia("(prefers-color-scheme: dark)");r!=null&&r.matches&&this.systemColorScheme.set("dark");const o=i=>{i.matches?this.systemColorScheme.set("dark"):this.systemColorScheme.set("light")};r==null||r.addEventListener("change",o),this.disposables.add(()=>r==null?void 0:r.removeEventListener("change",o))}dispose(){this.disposables.forEach(e=>e())}updateUserPreferences(e){this.user.setUserPreferences({...this.user.userPreferences.get(),...e})}getUserPreferences(){return{id:this.getId(),name:this.getName(),locale:this.getLocale(),color:this.getColor(),animationSpeed:this.getAnimationSpeed(),isSnapMode:this.getIsSnapMode(),colorScheme:this.user.userPreferences.get().colorScheme,isDarkMode:this.getIsDarkMode(),isWrapMode:this.getIsWrapMode(),isDynamicResizeMode:this.getIsDynamicResizeMode()}}getIsDarkMode(){switch(this.user.userPreferences.get().colorScheme){case"dark":return!0;case"light":return!1;case"system":return this.systemColorScheme.get()==="dark";default:return this.inferDarkMode?this.systemColorScheme.get()==="dark":!1}}getEdgeScrollSpeed(){return this.user.userPreferences.get().edgeScrollSpeed??tu.edgeScrollSpeed}getAnimationSpeed(){return this.user.userPreferences.get().animationSpeed??tu.animationSpeed}getId(){return this.user.userPreferences.get().id}getName(){var e;return((e=this.user.userPreferences.get().name)==null?void 0:e.trim())??tu.name}getLocale(){return this.user.userPreferences.get().locale??tu.locale}getColor(){return this.user.userPreferences.get().color??tu.color}getIsSnapMode(){return this.user.userPreferences.get().isSnapMode??tu.isSnapMode}getIsWrapMode(){return this.user.userPreferences.get().isWrapMode??tu.isWrapMode}getIsDynamicResizeMode(){return this.user.userPreferences.get().isDynamicSizeMode??tu.isDynamicSizeMode}getIsPasteAtCursorMode(){return this.user.userPreferences.get().isPasteAtCursorMode??tu.isPasteAtCursorMode}}Js=NXe();Vl(Js,1,"getUserPreferences",Yde,Ea);Vl(Js,1,"getIsDarkMode",Xde,Ea);Vl(Js,1,"getEdgeScrollSpeed",Gde,Ea);Vl(Js,1,"getAnimationSpeed",Kde,Ea);Vl(Js,1,"getId",qde,Ea);Vl(Js,1,"getName",Vde,Ea);Vl(Js,1,"getLocale",Wde,Ea);Vl(Js,1,"getColor",Ude,Ea);Vl(Js,1,"getIsSnapMode",Hde,Ea);Vl(Js,1,"getIsWrapMode",Bde,Ea);Vl(Js,1,"getIsDynamicResizeMode",zde,Ea);Vl(Js,1,"getIsPasteAtCursorMode",Fde,Ea);zXe(Js,Ea);const HXe={wheel:"onWheel",pointer_down:"onPointerDown",pointer_move:"onPointerMove",long_press:"onLongPress",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick",tick:"onTick"},UXe=["brushing","cropping","dragging","dragging_handle","drawing","erasing","lasering","resizing","rotating","scribble_brushing","translating"];class Bt{constructor(e,n){V(this,"performanceTracker");V(this,"id");V(this,"type");V(this,"shapeType");V(this,"initial");V(this,"children");V(this,"isLockable");V(this,"useCoalescedEvents");V(this,"parent");V(this,"_path");V(this,"_current");V(this,"_isActive");V(this,"_currentToolIdMask",bo("curent tool id mask",void 0));this.editor=e;const{id:r,children:o,initial:i,isLockable:s,useCoalescedEvents:a}=this.constructor;this.id=r,this._isActive=bo("toolIsActive"+this.id,!1),this._current=bo("toolState"+this.id,void 0),this._path=He("toolPath"+this.id,()=>{const l=this.getCurrent();return this.id+(l?`.${l.getPath()}`:"")}),this.parent=n??{},this.parent?o&&i?(this.type="branch",this.initial=i,this.children=Object.fromEntries(o().map(l=>[l.id,new l(this.editor,this)])),this._current.set(this.children[this.initial])):this.type="leaf":(this.type="root",o&&i&&(this.initial=i,this.children=Object.fromEntries(o().map(l=>[l.id,new l(this.editor,this)])),this._current.set(this.children[this.initial]))),this.isLockable=s,this.useCoalescedEvents=a,this.performanceTracker=new Mae}getPath(){return this._path.get()}getCurrent(){return this._current.get()}getIsActive(){return this._isActive.get()}transition(e,n={}){var i;const r=e.split(".");let o=this;for(let s=0;s<r.length;s++){const a=r[s],l=o.getCurrent(),c=(i=o.children)==null?void 0:i[a];if(!c)throw Error(`${o.id} - no child state exists with the id ${a}.`);if((l==null?void 0:l.id)!==c.id&&(l==null||l.exit(n,a),o._current.set(c),c.enter(n,(l==null?void 0:l.id)||"initial"),!c.getIsActive()))break;o=c}return this}handleEvent(e){var o;const n=HXe[e.name],r=this._current.__unsafe__getWithoutCapture();(o=this[n])==null||o.call(this,e),this._isActive.__unsafe__getWithoutCapture()&&r&&r===this._current.__unsafe__getWithoutCapture()&&r.handleEvent(e)}enter(e,n){var r;if(so.measurePerformance.get()&&UXe.includes(this.id)&&this.performanceTracker.start(this.id),this._isActive.set(!0),(r=this.onEnter)==null||r.call(this,e,n),this.children&&this.initial&&this.getIsActive()){const o=this.children[this.initial];this._current.set(o),o.enter(e,n)}}exit(e,n){var r,o;so.measurePerformance.get()&&this.performanceTracker.isStarted()&&this.performanceTracker.stop(),this._isActive.set(!1),(r=this.onExit)==null||r.call(this,e,n),this.getIsActive()||(o=this.getCurrent())==null||o.exit(e,n)}getCurrentToolIdMask(){return this._currentToolIdMask.get()}setCurrentToolIdMask(e){this._currentToolIdMask.set(e)}}V(Bt,"id"),V(Bt,"initial"),V(Bt,"children"),V(Bt,"isLockable",!0),V(Bt,"useCoalescedEvents",!1);class xF extends Bt{static children(){return[]}onKeyDown(e){var n;switch(e.code){case"KeyZ":{if(!(e.shiftKey||e.ctrlKey)){const r=this.getCurrent();r&&((n=r.getCurrent())==null?void 0:n.id)==="idle"&&this.children.zoom&&this.editor.setCurrentTool("zoom",{...e,onInteractionEnd:r.id})}break}}}}V(xF,"id","root"),V(xF,"initial","");var WXe=Object.create,Qde=Object.defineProperty,VXe=Object.getOwnPropertyDescriptor,Zde=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Jde=t=>{throw TypeError(t)},efe=(t,e,n)=>e in t?Qde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qXe=t=>[,,,WXe((t==null?void 0:t[Zde("metadata")])??null)],tfe=["class","method","getter","setter","accessor","field","value","get","set"],nfe=t=>t!==void 0&&typeof t!="function"?Jde("Function expected"):t,KXe=(t,e,n,r,o)=>({kind:tfe[t],name:e,metadata:r,addInitializer:i=>n._?Jde("Already initialized"):o.push(nfe(i||null))}),GXe=(t,e)=>efe(e,Zde("metadata"),t[3]),XXe=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},Rt=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=tfe[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,VXe(o,n)),S=r.length-1;S>=0;S--)l=KXe(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,nfe(s)&&(m[g]=s);return m&&Qde(o,n,m),o},Qt=(t,e,n)=>efe(t,typeof e!="symbol"?e+"":e,n),rfe,ofe,ife,sfe,afe,lfe,cfe,ufe,dfe,ffe,hfe,pfe,gfe,mfe,vfe,yfe,bfe,Sfe,xfe,wfe,Cfe,Efe,Pfe,_fe,Ife,Tfe,Mfe,Ofe,Rfe,kfe,Afe,$fe,Dfe,jfe,Lfe,Nfe,Ffe,zfe,Bfe,Hfe,Ufe,Wfe,Vfe,qfe,Kfe,Gfe,Xfe,Yfe,Qfe,Zfe,Jfe,ehe,the,nhe,rhe,ohe,ihe,she,ahe,lhe,che,uhe,dhe,fhe,hhe,phe,ghe,mhe,vhe,yhe,bhe,She,xhe,wF,Et;let Ct=class extends(wF=mKe,xhe=[He],She=[He],bhe=[He],yhe=[He],vhe=[He],mhe=[He],ghe=[He],phe=[He],hhe=[He],fhe=[He],dhe=[He],uhe=[He],che=[He],lhe=[He],ahe=[He],she=[He],ihe=[He],ohe=[He],rhe=[He],nhe=[He],the=[He],ehe=[He],Jfe=[He],Zfe=[He],Qfe=[He],Yfe=[He],Xfe=[He],Gfe=[He],Kfe=[He],qfe=[He],Vfe=[He],Wfe=[He],Ufe=[He],Hfe=[He],Bfe=[He],zfe=[He],Ffe=[He],Nfe=[He],Lfe=[He],jfe=[He],Dfe=[He],$fe=[He],Afe=[He],kfe=[He],Rfe=[He],Ofe=[He],Mfe=[He],Tfe=[He],Ife=[He],_fe=[He],Pfe=[He],Efe=[He],Cfe=[He],wfe=[He],xfe=[He],Sfe=[He],bfe=[He],yfe=[He],vfe=[He],mfe=[He],gfe=[He],pfe=[He],hfe=[He],ffe=[He],dfe=[He],ufe=[He({isEqual:(e,n)=>e.equals(n)})],cfe=[He],lfe=[He],afe=[He],sfe=[va],ife=[va],ofe=[va],rfe=[va],wF){constructor({store:e,user:n,shapeUtils:r,bindingUtils:o,tools:i,getContainer:s,cameraOptions:a,textOptions:l,initialState:c,autoFocus:u,inferDarkMode:d,options:f,isShapeHidden:h,getShapeVisibility:g,fontAssetUrls:y}){var N;super(),XXe(Et,5,this),Qt(this,"id",br()),Qt(this,"_getShapeVisibility"),Qt(this,"options"),Qt(this,"contextId",br()),Qt(this,"store"),Qt(this,"root"),Qt(this,"disposables",new Set),Qt(this,"isDisposed",!1),Qt(this,"_tickManager"),Qt(this,"snaps"),Qt(this,"timers",SI.forContext(this.contextId)),Qt(this,"user"),Qt(this,"textMeasure"),Qt(this,"fonts"),Qt(this,"environment",vr),Qt(this,"scribbles"),Qt(this,"sideEffects"),Qt(this,"edgeScrollManager"),Qt(this,"focusManager"),Qt(this,"getContainer"),Qt(this,"shapeUtils"),Qt(this,"styleProps"),Qt(this,"bindingUtils"),Qt(this,"history"),Qt(this,"_shouldIgnoreShapeLock",!1),Qt(this,"_crashingError",null),Qt(this,"_isChangingStyleTimeout",-1),Qt(this,"menus",Ls.forContext(this.contextId)),Qt(this,"_currentRichTextEditor",bo("rich text editor",null)),Qt(this,"_textOptions"),Qt(this,"_cameraOptions",bo("camera options",PQ)),Qt(this,"_viewportAnimation",null),Qt(this,"_willSetInitialBounds",!0),Qt(this,"_isLockedOnFollowingUser",bo("isLockedOnFollowingUser",!1)),Qt(this,"_cameraState",bo("camera state","idle")),Qt(this,"_cameraStateTimeoutRemaining",0),Qt(this,"_currentPageShapeIds"),Qt(this,"_shapeGeometryCaches",{}),Qt(this,"_shapePageGeometryCaches",{}),Qt(this,"_parentIdsToChildIds"),Qt(this,"animatingShapes",new Map),Qt(this,"externalAssetContentHandlers",{file:null,url:null}),Qt(this,"temporaryAssetPreview",new Map),Qt(this,"externalContentHandlers",{text:null,files:null,embed:null,"svg-text":null,url:null,tldraw:null,excalidraw:null}),Qt(this,"inputs",{originPagePoint:new $,originScreenPoint:new $,previousPagePoint:new $,previousScreenPoint:new $,currentPagePoint:new $,currentScreenPoint:new $,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,isSpacebarPanning:!1,pointerVelocity:new $}),Qt(this,"_clickManager",new n2(this)),Qt(this,"_prevCursor","default"),Qt(this,"_shiftKeyTimeout",-1),Qt(this,"_altKeyTimeout",-1),Qt(this,"_ctrlKeyTimeout",-1),Qt(this,"_metaKeyTimeout",-1),Qt(this,"_restoreToolId","select"),Qt(this,"_pinchStart",1),Qt(this,"_didPinch",!1),Qt(this,"_selectedShapeIdsAtPointerDown",[]),Qt(this,"_longPressTimeout",-1),Qt(this,"capturedPointerId",null),Qt(this,"performanceTracker"),Qt(this,"performanceTrackerTimeout",-1),Qt(this,"_pendingEventsForNextTick",[]),nn(!(h&&g),"Cannot use both isShapeHidden and getShapeVisibility"),this._getShapeVisibility=h?(k,D)=>h(k,D)?"hidden":"inherit":g,this.options={...yGe,...f},this.store=e,this.history=new KGe({store:e,annotateError:k=>{this.annotateError(k,{origin:"history.batch",willCrashApp:!0}),this.crash(k)}}),this.snaps=new Mw(this),this.disposables.add(this.timers.dispose),this._cameraOptions.set({...PQ,...a}),this._textOptions=bo("text options",l??null),this.user=new Ea(n??yue(),d??!1),this.disposables.add(()=>this.user.dispose()),this.getContainer=s,this.textMeasure=new IXe(this),this.fonts=new WGe(this,y),this._tickManager=new i2(this);class m extends xF{}V(m,"initial",c??""),this.root=new m(this),this.root.children={};const S=Pue(r),x={},C={},E=new Map;for(const k of S){const D=new k(this);x[k.type]=D;const F=Yle(k.props??{});C[k.type]=F;for(const H of F.keys())if(!E.has(H.id))E.set(H.id,H);else if(E.get(H.id)!==H)throw Error(`Multiple style props with id "${H.id}" in use. Style prop IDs must be unique.`)}this.shapeUtils=x,this.styleProps=C;const P=Cue(o),I={};for(const k of P){const D=new k(this);I[k.type]=D}this.bindingUtils=I;for(const k of[...i]){if(kl(this.root.children,k.id))throw Error(`Can't override tool with id "${k.id}"`);this.root.children[k.id]=new k(this,this.root)}this.scribbles=new YGe(this);const T=(k,D)=>{let F=null;const H=k.selectedShapeIds.filter(W=>!D.has(W));H.length!==k.selectedShapeIds.length&&(F||(F={...k}),F.selectedShapeIds=H);const U=k.erasingShapeIds.filter(W=>!D.has(W));U.length!==k.erasingShapeIds.length&&(F||(F={...k}),F.erasingShapeIds=U),k.hoveredShapeId&&D.has(k.hoveredShapeId)&&(F||(F={...k}),F.hoveredShapeId=null),k.editingShapeId&&D.has(k.editingShapeId)&&(F||(F={...k}),F.editingShapeId=null);const B=k.hintingShapeIds.filter(W=>!D.has(W));return B.length!==k.hintingShapeIds.length&&(F||(F={...k}),F.hintingShapeIds=B),k.focusedGroupId&&D.has(k.focusedGroupId)&&(F||(F={...k}),F.focusedGroupId=null),F};this.sideEffects=this.store.sideEffects;let M=new Map;const R=new Set,A=new Set;let j=new Set;if(this.disposables.add(this.sideEffects.registerOperationCompleteHandler(()=>{var k,D,F,H;R.clear();for(const U of A){A.delete(U);const B=this.getShape(U);if(!B)continue;const W=this.getShapeUtil(B),K=(k=W.onChildrenChange)==null?void 0:k.call(W,B);K!=null&&K.length&&this.updateShapes(K)}if(j.size){const U=j;j=new Set;for(const B of U){const W=this.getBindingUtil(B);(D=W.onOperationComplete)==null||D.call(W)}}if(M.size){const U=M;M=new Map;for(const B of U.values())(H=(F=this.getBindingUtil(B.binding)).onAfterDelete)==null||H.call(F,B)}this.emit("update")})),this.disposables.add(this.sideEffects.register({shape:{afterChange:(k,D)=>{var F,H,U,B;for(const W of this.getBindingsInvolvingShape(D))j.add(W.type),W.fromId===D.id&&((H=(F=this.getBindingUtil(W)).onAfterChangeFromShape)==null||H.call(F,{binding:W,shapeBefore:k,shapeAfter:D})),W.toId===D.id&&((B=(U=this.getBindingUtil(W)).onAfterChangeToShape)==null||B.call(U,{binding:W,shapeBefore:k,shapeAfter:D}));if(k.parentId!==D.parentId){const W=K=>{var X,Z,Y,G;const q=this.getShape(K);if(q)for(const J of this.getBindingsInvolvingShape(q))j.add(J.type),J.fromId===q.id&&((Z=(X=this.getBindingUtil(J)).onAfterChangeFromShape)==null||Z.call(X,{binding:J,shapeBefore:q,shapeAfter:q})),J.toId===q.id&&((G=(Y=this.getBindingUtil(J)).onAfterChangeToShape)==null||G.call(Y,{binding:J,shapeBefore:q,shapeAfter:q}))};W(D.id),this.visitDescendants(D.id,W)}if(k.parentId!==D.parentId&&rs(D.parentId)){const W=new Set([k.id]);this.visitDescendants(k.id,K=>{W.add(K)});for(const K of this.getPageStates()){if(K.pageId===D.parentId)continue;const q=T(K,W);q&&this.store.put([q])}}k.parentId&&fa(k.parentId)&&A.add(k.parentId),D.parentId!==k.parentId&&fa(D.parentId)&&A.add(D.parentId)},beforeDelete:k=>{var U,B,W,K;if(R.has(k.id))return;k.parentId&&fa(k.parentId)&&A.add(k.parentId),R.add(k.id);const D=[];for(const q of this.getBindingsInvolvingShape(k)){j.add(q.type),D.push(q.id);const X=this.getBindingUtil(q);q.fromId===k.id?((U=X.onBeforeIsolateToShape)==null||U.call(X,{binding:q,removedShape:k}),(B=X.onBeforeDeleteFromShape)==null||B.call(X,{binding:q,shape:k})):((W=X.onBeforeIsolateFromShape)==null||W.call(X,{binding:q,removedShape:k}),(K=X.onBeforeDeleteToShape)==null||K.call(X,{binding:q,shape:k}))}D.length&&this.deleteBindings(D);const F=new Set([k.id]),H=Tn(this.getPageStates().map(q=>T(q,F)));H.length&&this.store.put(H)}},binding:{beforeCreate:k=>{var F,H;const D=(H=(F=this.getBindingUtil(k)).onBeforeCreate)==null?void 0:H.call(F,{binding:k});return D||k},afterCreate:k=>{var D,F;j.add(k.type),(F=(D=this.getBindingUtil(k)).onAfterCreate)==null||F.call(D,{binding:k})},beforeChange:(k,D)=>{var H,U;const F=(U=(H=this.getBindingUtil(D)).onBeforeChange)==null?void 0:U.call(H,{bindingBefore:k,bindingAfter:D});return F||D},afterChange:(k,D)=>{var F,H;j.add(D.type),(H=(F=this.getBindingUtil(D)).onAfterChange)==null||H.call(F,{bindingBefore:k,bindingAfter:D})},beforeDelete:k=>{var D,F;(F=(D=this.getBindingUtil(k)).onBeforeDelete)==null||F.call(D,{binding:k})},afterDelete:k=>{var D,F;(F=(D=this.getBindingUtil(k)).onAfterDelete)==null||F.call(D,{binding:k}),j.add(k.type)}},page:{afterCreate:k=>{const D=uu.createId(k.id),F=mc.createId(k.id);this.store.has(D)||this.store.put([uu.create({id:D})]),this.store.has(F)||this.store.put([mc.create({id:F,pageId:k.id})])},afterDelete:(k,D)=>{var U,B;if(((U=this.getInstanceState())==null?void 0:U.currentPageId)===k.id){const W=(B=this.getPages().find(K=>K.id!==k.id))==null?void 0:B.id;W?this.store.put([{...this.getInstanceState(),currentPageId:W}]):D==="user"&&this.store.ensureStoreIsUsable()}const F=uu.createId(k.id),H=mc.createId(k.id);this.store.remove([F,H])}},instance:{afterChange:(k,D,F)=>{var H;if(!this.store.has(D.currentPageId)){const U=this.store.has(k.currentPageId)?k.currentPageId:(H=this.getPages()[0])==null?void 0:H.id;U?this.store.update(D.id,B=>({...B,currentPageId:U})):F==="user"&&this.store.ensureStoreIsUsable()}}},instance_page_state:{afterChange:(k,D)=>{if((k==null?void 0:k.selectedShapeIds)!==(D==null?void 0:D.selectedShapeIds)){const F=D.selectedShapeIds.filter(U=>{var W,K;let B=(W=this.getShape(U))==null?void 0:W.parentId;for(;fa(B);){if(D.selectedShapeIds.includes(B))return!1;B=(K=this.getShape(B))==null?void 0:K.parentId}return!0});let H=null;if(F.length>0){const U=this.findCommonAncestor(Tn(F.map(B=>this.getShape(B))),B=>this.isShapeOfType(B,"group"));U&&(H=U)}else D!=null&&D.focusedGroupId&&(H=D.focusedGroupId);(F.length!==D.selectedShapeIds.length||H!==D.focusedGroupId)&&this.store.put([{...D,selectedShapeIds:F,focusedGroupId:H??null}])}}}})),this._currentPageShapeIds=AGe(this.store,()=>this.getCurrentPageId()),this._parentIdsToChildIds=kGe(this.store),this.disposables.add(this.store.listen(k=>{this.emit("change",k)})),this.disposables.add(this.history.dispose),this.run(()=>{this.store.ensureStoreIsUsable(),this._updateCurrentPageState({editingShapeId:null,hoveredShapeId:null,erasingShapeIds:[]})},{history:"ignore"}),c&&this.root.children[c]===void 0)throw Error(`No state found for initialState "${c}".`);if(this.root.enter(void 0,"initial"),this.edgeScrollManager=new HGe(this),this.focusManager=new UGe(this,u),this.disposables.add(this.focusManager.dispose.bind(this.focusManager)),this.getInstanceState().followingUserId&&this.stopFollowingUser(),this.on("tick",this._flushEventsForTick),this.timers.requestAnimationFrame(()=>{this._tickManager.start()}),this.performanceTracker=new Mae,(N=this.store.props.collaboration)!=null&&N.mode){const k=this.store.props.collaboration.mode;this.disposables.add(Al("update collaboration mode",()=>{this.store.put([{...this.getInstanceState(),isReadonly:k.get()==="readonly"}])}))}}getIsShapeHiddenCache(){return this._getShapeVisibility?this.store.createComputedCache("isShapeHidden",e=>{const n=this._getShapeVisibility(e,this);return(Bs.isId(e.parentId)?!1:this.isShapeHidden(e.parentId))?n!=="visible":n==="hidden"}):null}isShapeHidden(e){return this._getShapeVisibility?!!this.getIsShapeHiddenCache().get(typeof e=="string"?e:e.id):!1}dispose(){this.disposables.forEach(e=>e()),this.disposables.clear(),this.store.dispose(),this.isDisposed=!0}getShapeUtil(e){const n=typeof e=="string"?e:e.type,r=Uo(this.shapeUtils,n);return nn(r,`No shape util found for type "${n}"`),r}hasShapeUtil(e){const n=typeof e=="string"?e:e.type;return kl(this.shapeUtils,n)}getBindingUtil(e){const n=typeof e=="string"?e:e.type,r=Uo(this.bindingUtils,n);return nn(r,`No binding util found for type "${n}"`),r}undo(){return this._flushEventsForTick(0),this.complete(),this.history.undo(),this}getCanUndo(){return this.history.getNumUndos()>0}redo(){return this._flushEventsForTick(0),this.complete(),this.history.redo(),this}clearHistory(){return this.history.clear(),this}getCanRedo(){return this.history.getNumRedos()>0}mark(e){return console.warn(typeof e=="string"?`[tldraw] \`editor.history.mark("${e}")\` is deprecated. Please use \`const myMarkId = editor.markHistoryStoppingPoint()\` instead.`:"[tldraw] `editor.mark()` is deprecated. Use `editor.markHistoryStoppingPoint()` instead."),this.history._mark(e??br()),this}markHistoryStoppingPoint(e){const n=`[${e??"stop"}]_${br()}`;return this.history._mark(n),n}getMarkIdMatching(e){return this.history.getMarkIdMatching(e)}squashToMark(e){return this.history.squashToMark(e),this}bail(){return this.history.bail(),this}bailToMark(e){return this.history.bailToMark(e),this}run(e,n){const r=this._shouldIgnoreShapeLock;this._shouldIgnoreShapeLock=(n==null?void 0:n.ignoreShapeLock)??r;try{this.history.batch(e,n)}finally{this._shouldIgnoreShapeLock=r}return this}batch(e,n){return this.run(e,n)}annotateError(e,{origin:n,willCrashApp:r,tags:o,extras:i}){const s=this.createErrorAnnotations(n,r);return L5(e,{tags:{...s.tags,...o},extras:{...s.extras,...i}}),r&&this.store.markAsPossiblyCorrupted(),this}createErrorAnnotations(e,n){try{const r=this.getEditingShapeId();return{tags:{origin:e,willCrashApp:n},extras:{activeStateNode:this.root.getPath(),selectedShapes:this.getSelectedShapes().map(o=>{const{props:i,...s}=o,{text:a,richText:l,...c}=i;return{...s,props:c}}),selectionCount:this.getSelectedShapes().length,editingShape:r?this.getShape(r):void 0,inputs:this.inputs,pageState:this.getCurrentPageState(),instanceState:this.getInstanceState(),collaboratorCount:this.getCollaboratorsOnCurrentPage().length}}}catch{return{tags:{origin:e,willCrashApp:n},extras:{}}}}getCrashingError(){return this._crashingError}crash(e){return this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e}),this}getPath(){return this.root.getPath().split("root.")[1]}isIn(e){const n=e.split(".").reverse();let r=this.root;for(;n.length>0;){const o=n.pop();if(!o)return!0;const i=r.getCurrent();if((i==null?void 0:i.id)===o){if(n.length===0)return!0;r=i;continue}else return!1}return!1}isInAny(...e){return e.some(n=>this.isIn(n))}setCurrentTool(e,n={}){return this.root.transition(e,n),this}getCurrentTool(){return this.root.getCurrent()}getCurrentToolId(){const e=this.getCurrentTool();return e?e.getCurrentToolIdMask()??e.id:""}getStateDescendant(e){var o;const n=e.split(".").reverse();let r=this.root;for(;n.length>0;){const i=n.pop();if(!i)return r;const s=(o=r.children)==null?void 0:o[i];if(!s)return;r=s}return r}getDocumentSettings(){return this.store.get(uF)}updateDocumentSettings(e){return this.run(()=>{this.store.put([{...this.getDocumentSettings(),...e}])},{history:"ignore"}),this}getInstanceState(){return this.store.get(js)}updateInstanceState(e,n){return this._updateInstanceState(e,{history:"ignore",...n}),e.isChangingStyle!==void 0&&(clearTimeout(this._isChangingStyleTimeout),e.isChangingStyle===!0&&(this._isChangingStyleTimeout=this.timers.setTimeout(()=>{this._updateInstanceState({isChangingStyle:!1},{history:"ignore"})},1e3))),this}_updateInstanceState(e,n){this.run(()=>{this.store.put([{...this.getInstanceState(),...e}])},n)}getOpenMenus(){return this.menus.getOpenMenus()}addOpenMenu(e){return this.menus.addOpenMenu(e),this}deleteOpenMenu(e){return this.menus.deleteOpenMenu(e),this}clearOpenMenus(){return this.menus.clearOpenMenus(),this}getIsMenuOpen(){return this.menus.hasAnyOpenMenus()}setCursor(e){return this.updateInstanceState({cursor:{...this.getInstanceState().cursor,...e}}),this}getPageStates(){return this._getPageStatesQuery().get()}_getPageStatesQuery(){return this.store.query.records("instance_page_state")}getCurrentPageState(){return this.store.get(this._getCurrentPageStateId())}_getCurrentPageStateId(){return mc.createId(this.getCurrentPageId())}updateCurrentPageState(e){return this._updateCurrentPageState(e),this}_updateCurrentPageState(e){this.store.update(e.id??this.getCurrentPageState().id,n=>({...n,...e}))}getSelectedShapeIds(){return this.getCurrentPageState().selectedShapeIds}getSelectedShapes(){return Tn(this.getSelectedShapeIds().map(e=>this.store.get(e)))}setSelectedShapes(e){return this.run(()=>{const n=e.map(i=>typeof i=="string"?i:i.id),{selectedShapeIds:r}=this.getCurrentPageState(),o=new Set(r);if(n.length===o.size&&n.every(i=>o.has(i)))return null;this.store.put([{...this.getCurrentPageState(),selectedShapeIds:n}])},{history:"record-preserveRedoStack"})}isAncestorSelected(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null,r=this.getShape(n);if(!r)return!1;const o=this.getSelectedShapeIds();return!!this.findShapeAncestor(r,i=>o.includes(i.id))}select(...e){const n=typeof e[0]=="string"?e:e.map(r=>r.id);return this.setSelectedShapes(n),this}deselect(...e){const n=typeof e[0]=="string"?e:e.map(o=>o.id),r=this.getSelectedShapeIds();return r.length>0&&n.length>0&&this.setSelectedShapes(r.filter(o=>!n.includes(o))),this}selectAll(){const e=this.getSortedChildIdsForParent(this.getCurrentPageId());return e.length<=0?this:(this.setSelectedShapes(this._getUnlockedShapeIds(e)),this)}selectAdjacentShape(e){var c,u;const n=this.getSelectedShapeIds(),r=n[0]?(c=this.getShape(n[0]))==null?void 0:c.parentId:null,i=r&&n.every(d=>{var f;return((f=this.getShape(d))==null?void 0:f.parentId)===r})&&!rs(r)?this._getShapesInReadingOrder(this.getCurrentPageShapes().filter(d=>d.parentId===r)):this.getCurrentPageShapesInReadingOrder(),s=n.length===1?n[0]:(u=i.find(d=>n.includes(d.id)))==null?void 0:u.id;let a;if(e==="next"||e==="prev"){const d=i.map(g=>g.id),h=((s?d.indexOf(s):-1)+(e==="next"?1:-1)+d.length)%d.length;a=d[h]}else{if(!s)return;a=this.getNearestAdjacentShape(s,e)}const l=this.getShape(a);l&&this._selectShapesAndZoom([l.id])}getCurrentPageShapesInReadingOrder(){const e=this.getCurrentPageShapes().filter(n=>rs(n.parentId));return this._getShapesInReadingOrder(e)}_getShapesInReadingOrder(e){const o=e.filter(a=>this.getShapeUtil(a).canTabTo(a));if(o.length<=1)return o;const i=o.map(a=>({shape:a,center:this.getShapePageBounds(a).center}));i.sort((a,l)=>a.center.y-l.center.y);const s=[];for(const a of i){let l=-1;for(let c=s.length-1;c>=0;c--){const u=s[c],d=u[u.length-1];if(Math.abs(a.center.y-d.center.y)<100){l=c;break}}l===-1?s.push([a]):s[l].push(a)}for(const a of s)a.sort((l,c)=>l.center.x-c.center.x);for(const a of s)if(!(a.length<=2))for(let l=0;l<a.length-2;l++){const c=a[l],u=a[l+1],d=a[l+2],f=$.Dist2(c.center,u.center);$.Dist2(c.center,d.center)<f*.9&&Math.abs($.Angle(c.center,d.center)*(180/Math.PI))<=20&&([a[l+1],a[l+2]]=[a[l+2],a[l+1]])}return s.flat().map(a=>a.shape)}getNearestAdjacentShape(e,n){const r={right:0,left:180,down:90,up:270},o=this.getShape(e);if(!o)return e;const s=this.getCurrentPageShapes().filter(d=>this.getShapeUtil(d).canTabTo(d)&&d.id!==e);if(!s.length)return e;const a=this.getShapePageBounds(o).center,c=s.map(d=>({shape:d,center:this.getShapePageBounds(d).center})).filter(({center:d})=>{const f=d.x>a.x,h=d.y>a.y,g=d.x-a.x,y=d.y-a.y,m=Math.abs(y)<Math.abs(g)*2,S=Math.abs(g)<Math.abs(y)*2;if(n==="left"||n==="right")return m&&(n==="right"?f:!f);if(n==="up"||n==="down")return S&&(n==="down"?h:!h)});return c.length===0?e:Oae(c,({center:d})=>{const f=$.Dist2(a,d),h=["left","right"].includes(n)?"x":"y",g=Math.abs(d[h]-a[h]),y=["left","right"].includes(n)?"y":"x",m=Math.abs(d[y]-a[y]),S=Math.abs($.Angle(a,d)*(180/Math.PI)),x=Math.abs(S-r[n]);return f*1+m*2+(f-g)*1.5+x*.5}).shape.id}selectParentShape(){const e=this.getOnlySelectedShape();if(!e)return;const n=this.getShape(e.parentId);n&&this._selectShapesAndZoom([n.id])}selectFirstChildShape(){const e=this.getSelectedShapes();if(!e.length)return;const n=e[0],r=this.getSortedChildIdsForParent(n.id).map(i=>this.getShape(i)).filter(i=>i),o=this._getShapesInReadingOrder(r);o.length!==0&&this._selectShapesAndZoom([o[0].id])}_selectShapesAndZoom(e){this.setSelectedShapes(e),this.zoomToSelectionIfOffscreen(256,{animation:{duration:this.options.animationMediumMs},inset:0})}selectNone(){return this.getSelectedShapeIds().length>0&&this.setSelectedShapes([]),this}getOnlySelectedShapeId(){var e;return((e=this.getOnlySelectedShape())==null?void 0:e.id)??null}getOnlySelectedShape(){const e=this.getSelectedShapes();return e.length===1?e[0]:null}getShapesPageBounds(e){const n=Tn(e.map(r=>this.getShapePageBounds(r)));return n.length===0?null:rt.Common(n)}getSelectionPageBounds(){return this.getShapesPageBounds(this.getSelectedShapeIds())}getShapesSharedRotation(e){let n=!1,r=0;for(let o=0,i=e.length;o<i;o++){const s=this.getShapePageTransform(e[o]);if(s)if(n){if(s.rotation()!==r)return 0}else n=!0,r=s.rotation()}return r}getSelectionRotation(){return this.getShapesSharedRotation(this.getSelectedShapeIds())}getShapesRotatedPageBounds(e){if(e.length===0)return;const n=this.getShapesSharedRotation(e);if(n===0)return this.getShapesPageBounds(e)??void 0;if(e.length===1){const o=this.getShapeGeometry(e[0]).bounds.clone(),i=this.getShapePageTransform(e[0]);return o.point=i.applyToPoint(o.point),o}const r=rt.FromPoints(e.flatMap(o=>{const i=this.getShapePageTransform(o);return i?i.applyToPoints(this.getShapeGeometry(o).bounds.corners):[]}).map(o=>o.rot(-n)));return r.point=r.point.rot(n),r}getSelectionRotatedPageBounds(){return this.getShapesRotatedPageBounds(this.getSelectedShapeIds())}getSelectionRotatedScreenBounds(){const e=this.getSelectionRotatedPageBounds();if(!e)return;const{x:n,y:r}=this.pageToScreen(e.point),o=this.getZoomLevel();return new rt(n,r,e.width*o,e.height*o)}getFocusedGroupId(){return this.getCurrentPageState().focusedGroupId??this.getCurrentPageId()}getFocusedGroup(){const e=this.getFocusedGroupId();return e?this.getShape(e):void 0}setFocusedGroup(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;if(n!==null){const r=this.getShape(n);if(!r)throw Error(`Editor.setFocusedGroup: Shape with id ${n} does not exist`);if(!this.isShapeOfType(r,"group"))throw Error(`Editor.setFocusedGroup: Cannot set focused group to shape of type ${r.type}`)}return n===this.getFocusedGroupId()?this:this.run(()=>{this.store.update(this.getCurrentPageState().id,r=>({...r,focusedGroupId:n}))},{history:"record-preserveRedoStack"})}popFocusedGroupId(){const e=this.getFocusedGroup();if(e){const n=this.findShapeAncestor(e,r=>this.isShapeOfType(r,"group"));this.setFocusedGroup((n==null?void 0:n.id)??null),this.select(e.id)}else this.setFocusedGroup(null),this.selectNone();return this}getEditingShapeId(){return this.getCurrentPageState().editingShapeId}getEditingShape(){const e=this.getEditingShapeId();return e?this.getShape(e):void 0}setEditingShape(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;this.setRichTextEditor(null);const r=this.getEditingShapeId();if(n!==r){if(n){const o=this.getShape(n);if(o&&this.getShapeUtil(o).canEdit(o))return this.run(()=>{var i,s,a,l;if(this._updateCurrentPageState({editingShapeId:n}),r){const c=this.getShape(r);c&&((s=(i=this.getShapeUtil(c)).onEditEnd)==null||s.call(i,c))}(l=(a=this.getShapeUtil(o)).onEditStart)==null||l.call(a,o)},{history:"ignore"}),this}this.run(()=>{var o,i;if(this._updateCurrentPageState({editingShapeId:null}),this._currentRichTextEditor.set(null),r){const s=this.getShape(r);s&&((i=(o=this.getShapeUtil(s)).onEditEnd)==null||i.call(o,s))}},{history:"ignore"})}return this}getRichTextEditor(){return this._currentRichTextEditor.get()}setRichTextEditor(e){return this._currentRichTextEditor.set(e),this}getHoveredShapeId(){return this.getCurrentPageState().hoveredShapeId}getHoveredShape(){const e=this.getHoveredShapeId();return e?this.getShape(e):void 0}setHoveredShape(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;return n===this.getHoveredShapeId()?this:(this.run(()=>{this.updateCurrentPageState({hoveredShapeId:n})},{history:"ignore"}),this)}getHintingShapeIds(){return this.getCurrentPageState().hintingShapeIds}getHintingShape(){const e=this.getHintingShapeIds();return Tn(e.map(n=>this.getShape(n)))}setHintingShapes(e){const n=typeof e[0]=="string"?e:e.map(r=>r.id);return this.run(()=>{this._updateCurrentPageState({hintingShapeIds:j5(n)})},{history:"ignore"}),this}getErasingShapeIds(){return this.getCurrentPageState().erasingShapeIds}getErasingShapes(){const e=this.getErasingShapeIds();return Tn(e.map(n=>this.getShape(n)))}setErasingShapes(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id);n.sort();const r=this.getErasingShapeIds();return this.run(()=>{if(n.length===r.length){for(let o=0;o<n.length;o++)if(n[o]!==r[o]){this._updateCurrentPageState({erasingShapeIds:n});break}}else this._updateCurrentPageState({erasingShapeIds:n})},{history:"ignore"}),this}getCroppingShapeId(){return this.getCurrentPageState().croppingShapeId}setCroppingShape(e){const n=typeof e=="string"?e:(e==null?void 0:e.id)??null;return n!==this.getCroppingShapeId()&&this.run(()=>{if(!n)this.updateCurrentPageState({croppingShapeId:null});else{const r=this.getShape(n),o=this.getShapeUtil(r);r&&o.canCrop(r)&&this.updateCurrentPageState({croppingShapeId:n})}},{history:"ignore"}),this}getTextOptions(){return Ds(this._textOptions.get(),"Cannot use text without setting textOptions")}_unsafe_getCameraId(){return uu.createId(this.getCurrentPageId())}getCamera(){const e=this.store.get(this._unsafe_getCameraId());if(this._isLockedOnFollowingUser.get()){const n=this.getCameraForFollowing();if(n)return{...e,...n}}return e}_getFollowingPresence(e){const n=[this.user.getId()],r=this.getCollaborators();let o=null;for(;e&&!n.includes(e);)o=r.find(i=>i.userId===e)??null,e=(o==null?void 0:o.followingUserId)??null,o&&n.push(o.userId);return o}getViewportPageBoundsForFollowing(){const e=this._getFollowingPresence(this.getInstanceState().followingUserId);if(!(e!=null&&e.camera)||!(e!=null&&e.screenBounds))return null;const{w:n,h:r}=e.screenBounds,{x:o,y:i,z:s}=e.camera,a=new rt(-o,-i,n/s,r/s),l=this.getViewportScreenBounds().clone(),c=l.width/l.height;return l.width=a.width,l.height=l.width/c,l.height<a.height&&(l.height=a.height,l.width=l.height*c),l.center=a.center,l}getCameraForFollowing(){const e=this.getViewportPageBoundsForFollowing();return e?{x:-e.x,y:-e.y,z:this.getViewportScreenBounds().w/e.width}:null}getZoomLevel(){return this.getCamera().z}getInitialZoom(){const e=this.getCameraOptions();if(!e.constraints||e.constraints.initialZoom==="default")return 1;const{zx:n,zy:r}=uZ(this,e);switch(e.constraints.initialZoom){case"fit-min":return Math.max(n,r);case"fit-max":return Math.min(n,r);case"fit-x":return n;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(n,r));case"fit-max-100":return Math.min(1,Math.min(n,r));case"fit-x-100":return Math.min(1,n);case"fit-y-100":return Math.min(1,r);default:throw Jn(e.constraints.initialZoom)}}getBaseZoom(){const e=this.getCameraOptions();if(!e.constraints||e.constraints.baseZoom==="default")return 1;const{zx:n,zy:r}=uZ(this,e);switch(e.constraints.baseZoom){case"fit-min":return Math.max(n,r);case"fit-max":return Math.min(n,r);case"fit-x":return n;case"fit-y":return r;case"fit-min-100":return Math.min(1,Math.max(n,r));case"fit-max-100":return Math.min(1,Math.min(n,r));case"fit-x-100":return Math.min(1,n);case"fit-y-100":return Math.min(1,r);default:throw Jn(e.constraints.baseZoom)}}getCameraOptions(){return this._cameraOptions.get()}setCameraOptions(e){var r;const n=to({...this._cameraOptions.__unsafe__getWithoutCapture(),...e});return((r=n.zoomSteps)==null?void 0:r.length)<1&&(n.zoomSteps=[1]),this._cameraOptions.set(n),this.setCamera(this.getCamera()),this}getConstrainedCamera(e,n){const r=this.getCamera();let{x:o,y:i,z:s=r.z}=e;if(!(n!=null&&n.force)){const a=this.getCameraOptions(),l=a.zoomSteps[0],c=Li(a.zoomSteps),u=this.getViewportScreenBounds();if(a.constraints){const{constraints:d}=a,f=Math.min(d.padding.y,u.w/2),h=Math.min(d.padding.x,u.h/2),g=rt.From(a.constraints.bounds),y=(u.w-h*2)/g.w,m=(u.h-f*2)/g.h,S=this.getBaseZoom(),x=c*S,C=l*S;if(n!=null&&n.reset&&(s=this.getInitialZoom()),s<C||s>x){const{x:N,y:k,z:D}=r,F=-N+u.w/D/2,H=-k+u.h/D/2;s=zr(s,C,x);const U=-N+u.w/s/2,B=-k+u.h/s/2;o=N+U-F,i=k+B-H}const E=h/s-g.x,P=f/s-g.y,I=(u.w-h*2)/s-g.w,T=(u.h-f*2)/s-g.h,M=E+I*d.origin.x,R=P+T*d.origin.y,A=typeof d.behavior=="string"?d.behavior:d.behavior.x,j=typeof d.behavior=="string"?d.behavior:d.behavior.y;if(n!=null&&n.reset)o=M,i=R;else{switch(A){case"fixed":{o=M;break}case"contain":{s<y?o=M:o=zr(o,E+I,E);break}case"inside":{s<y?o=zr(o,E,(u.w-h)/s-g.w):o=zr(o,E+I,E);break}case"outside":{o=zr(o,h/s-g.w,(u.w-h)/s);break}case"free":break;default:throw Jn(A)}switch(j){case"fixed":{i=R;break}case"contain":{s<m?i=R:i=zr(i,P+T,P);break}case"inside":{s<m?i=zr(i,P,(u.h-f)/s-g.h):i=zr(i,P+T,P);break}case"outside":{i=zr(i,f/s-g.h,(u.h-f)/s);break}case"free":break;default:throw Jn(j)}}}else if(s>c||s<l){const{x:d,y:f,z:h}=r;s=zr(s,l,c),o=d+(-d+u.w/s/2)-(-d+u.w/h/2),i=f+(-f+u.h/s/2)-(-f+u.h/h/2)}}return{x:o,y:i,z:s}}_setCamera(e,n){const r=this.getCamera(),{x:o,y:i,z:s}=this.getConstrainedCamera(e,n);return r.x===o&&r.y===i&&r.z===s?this:(Wa(()=>{const a={...r,x:o,y:i,z:s};this.run(()=>{this.store.put([a])},{history:"ignore"});const{currentScreenPoint:l,currentPagePoint:c}=this.inputs,{screenBounds:u}=this.store.unsafeGetWithoutCapture(js);if(l.x/s-o!==c.x||l.y/s-i!==c.y){const d={type:"pointer",target:"canvas",name:"pointer_move",point:$.AddXY(l,u.x,u.y),pointerId:_Q.CAMERA_MOVE,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,shiftKey:this.inputs.shiftKey,metaKey:this.inputs.metaKey,accelKey:Ui(this.inputs),button:0,isPen:this.getInstanceState().isPenMode??!1};n!=null&&n.immediate?this._flushEventForTick(d):this.dispatch(d)}this._tickCameraState()}),this)}setCamera(e,n){const{isLocked:r}=this._cameraOptions.__unsafe__getWithoutCapture();if(r&&!(n!=null&&n.force))return this;this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser();const o=$.Cast(e);Number.isFinite(o.x)||(o.x=0),Number.isFinite(o.y)||(o.y=0),(o.z===void 0||!Number.isFinite(o.z))&&(e.z=this.getZoomLevel());const i=this.getConstrainedCamera(o,n);if(n!=null&&n.animation){const{width:s,height:a}=this.getViewportScreenBounds();this._animateToViewport(new rt(-i.x,-i.y,s/i.z,a/i.z),n)}else this._setCamera(i,{...n,force:!0});return this}centerOnPoint(e,n){const{isLocked:r}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const{width:o,height:i}=this.getViewportPageBounds();return this.setCamera(new $(-(e.x-o/2),-(e.y-i/2),this.getCamera().z),n),this}zoomToFit(e){const n=[...this.getCurrentPageShapeIds()];if(n.length<=0)return this;const r=rt.Common(Tn(n.map(o=>this.getShapePageBounds(o))));return this.zoomToBounds(r,e),this}resetZoom(e=this.getViewportScreenCenter(),n){const{isLocked:r,constraints:o}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const i=this.getCamera(),{x:s,y:a,z:l}=i,{x:c,y:u}=e;let d=1;if(o){const f=this.getInitialZoom();l!==f&&(d=f)}return this.setCamera(new $(s+(c/d-c)-(c/l-c),a+(u/d-u)-(u/l-u),d),n),this}zoomIn(e=this.getViewportScreenCenter(),n){const{isLocked:r}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const{x:o,y:i,z:s}=this.getCamera(),{zoomSteps:a}=this.getCameraOptions();if(a!==null&&a.length>1){const l=this.getBaseZoom();let c=Li(a)*l;for(let u=1;u<a.length;u++){const d=a[u-1]*l,f=a[u]*l;if(!(f-s<=(f-d)/2)){c=f;break}}this.setCamera(new $(o+(e.x/c-e.x)-(e.x/s-e.x),i+(e.y/c-e.y)-(e.y/s-e.y),c),n)}return this}zoomOut(e=this.getViewportScreenCenter(),n){const{isLocked:r}=this.getCameraOptions();if(r&&!(n!=null&&n.force))return this;const{zoomSteps:o}=this.getCameraOptions();if(o!==null&&o.length>1){const i=this.getBaseZoom(),{x:s,y:a,z:l}=this.getCamera();let c=o[0]*i;for(let u=o.length-1;u>0;u--){const d=o[u-1]*i,f=o[u]*i;if(!(f-l>=(f-d)/2)){c=d;break}}this.setCamera(new $(s+(e.x/c-e.x)-(e.x/l-e.x),a+(e.y/c-e.y)-(e.y/l-e.y),c),n)}return this}zoomToSelection(e){const{isLocked:n}=this.getCameraOptions();if(n&&!(e!=null&&e.force))return this;const r=this.getSelectionPageBounds();return r&&this.zoomToBounds(r,{targetZoom:Math.max(1,this.getZoomLevel()),...e}),this}zoomToSelectionIfOffscreen(e=16,n){const r=this.getSelectionPageBounds(),o=this.getViewportPageBounds();if(r&&!o.contains(r)){const i=r.clone().expandBy(e/this.getZoomLevel()).expand(o),s=o.clone().translate({x:(i.center.x-o.center.x)*2,y:(i.center.y-o.center.y)*2});this.zoomToBounds(s,n)}}zoomToBounds(e,n){const r=this._cameraOptions.__unsafe__getWithoutCapture();if(r.isLocked&&!(n!=null&&n.force))return this;const o=this.getViewportScreenBounds(),i=(n==null?void 0:n.inset)??Math.min(UWe,o.width*.28),s=this.getBaseZoom(),a=r.zoomSteps[0],l=Li(r.zoomSteps);let c=zr(Math.min((o.width-i)/e.w,(o.height-i)/e.h),a*s,l*s);return(n==null?void 0:n.targetZoom)!==void 0&&(c=Math.min(n.targetZoom,c)),this.setCamera(new $(-e.x+(o.width-e.w*c)/2/c,-e.y+(o.height-e.h*c)/2/c,c),n),this}stopCameraAnimation(){return this.emit("stop-camera-animation"),this}_animateViewport(e){if(!this._viewportAnimation)return;this._viewportAnimation.elapsed+=e;const{elapsed:n,easing:r,duration:o,start:i,end:s}=this._viewportAnimation;if(n>o){this.off("tick",this._animateViewport),this._viewportAnimation=null,this._setCamera(new $(-s.x,-s.y,this.getViewportScreenBounds().width/s.width));return}const a=o-n,l=r(1-a/o),c=i.minX+(s.minX-i.minX)*l,u=i.minY+(s.minY-i.minY)*l,d=i.maxX+(s.maxX-i.maxX)*l;this._setCamera(new $(-c,-u,this.getViewportScreenBounds().width/(d-c)),{force:!0})}_animateToViewport(e,n={animation:KD}){const{animation:r,...o}=n;if(!r)return;const{duration:i=0,easing:s=bi.easeInOutCubic}=r,a=this.user.getAnimationSpeed(),l=this.getViewportPageBounds();return this.stopCameraAnimation(),this.getInstanceState().followingUserId&&this.stopFollowingUser(),i===0||a===0?this._setCamera(new $(-e.x,-e.y,this.getViewportScreenBounds().width/e.width),{...o}):(this._viewportAnimation={elapsed:0,duration:i/a,easing:s,start:l.clone(),end:e.clone()},this.once("stop-camera-animation",()=>{this.off("tick",this._animateViewport),this._viewportAnimation=null}),this.on("tick",this._animateViewport),this)}slideCamera(e={}){const{isLocked:n}=this.getCameraOptions();if(n&&!(e!=null&&e.force))return this;if(this.user.getAnimationSpeed()===0)return this;this.stopCameraAnimation();const{speed:o,friction:i=this.options.cameraSlideFriction,direction:s,speedThreshold:a=.01}=e;let l=Math.min(o,1);const c=()=>{this.off("tick",u),this.off("stop-camera-animation",c)};this.once("stop-camera-animation",c);const u=d=>{const{x:f,y:h,z:g}=this.getCamera(),y=$.Mul(s,l*d/g);l*=1-i,l<a?c():this._setCamera(new $(f+y.x,h+y.y,g))};return this.on("tick",u),this}zoomToUser(e,n={animation:{duration:500}}){const r=this.getCollaborators().find(i=>i.userId===e);if(!r)return this;const o=r.cursor;return o?(this.run(()=>{this.getInstanceState().followingUserId!==null&&this.stopFollowingUser();const i=r.currentPageId===this.getCurrentPageId();i||this.setCurrentPage(r.currentPageId),n&&n.animation&&!i&&(n.animation=void 0),this.centerOnPoint(o,n);const{highlightedUserIds:s}=this.getInstanceState();this.updateInstanceState({highlightedUserIds:[...s,e]}),this.timers.setTimeout(()=>{const a=[...this.getInstanceState().highlightedUserIds],l=a.indexOf(e);l<0||(a.splice(l,1),this.updateInstanceState({highlightedUserIds:a}))},this.options.collaboratorIdleTimeoutMs)}),this):this}updateViewportScreenBounds(e,n=!1){if(e instanceof HTMLElement){const a=e.getBoundingClientRect();e=new rt(a.left||a.x,a.top||a.y,Math.max(a.width,1),Math.max(a.height,1))}else e.width=Math.max(e.width,1),e.height=Math.max(e.height,1);const r=[e.minY!==0,!qa(document.body.scrollWidth,e.maxX,1),!qa(document.body.scrollHeight,e.maxY,1),e.minX!==0],{_willSetInitialBounds:o}=this;this._willSetInitialBounds=!1;const{screenBounds:i,insets:s}=this.getInstanceState();if(e.equals(i)&&r.every((a,l)=>a===s[l]))return this;if(o)this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.setCamera(this.getCamera());else if(n&&!this.getInstanceState().followingUserId){const a=this.getViewportPageBounds().center;this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this.centerOnPoint(a)}else this.updateInstanceState({screenBounds:e.toJson(),insets:r}),this._setCamera($.From({...this.getCamera()}));return this._tickCameraState(),this}getViewportScreenBounds(){const{x:e,y:n,w:r,h:o}=this.getInstanceState().screenBounds;return new rt(e,n,r,o)}getViewportScreenCenter(){const e=this.getViewportScreenBounds();return new $(e.midX-e.minX,e.midY-e.minY)}getViewportPageBounds(){const{w:e,h:n}=this.getViewportScreenBounds(),{x:r,y:o,z:i}=this.getCamera();return new rt(-r,-o,e/i,n/i)}screenToPage(e){const{screenBounds:n}=this.store.unsafeGetWithoutCapture(js),{x:r,y:o,z:i=1}=this.getCamera();return new $((e.x-n.x)/i-r,(e.y-n.y)/i-o,e.z??.5)}pageToScreen(e){const{screenBounds:n}=this.store.unsafeGetWithoutCapture(js),{x:r,y:o,z:i=1}=this.getCamera();return new $((e.x+r)*i+n.x,(e.y+o)*i+n.y,e.z??.5)}pageToViewport(e){const{x:n,y:r,z:o=1}=this.getCamera();return new $((e.x+n)*o,(e.y+r)*o,e.z??.5)}_getCollaboratorsQuery(){return this.store.query.records("instance_presence",()=>({userId:{neq:this.user.getId()}}))}getCollaborators(){const e=this._getCollaboratorsQuery().get();return e.length?[...new Set(e.map(r=>r.userId))].sort().map(r=>RHe(e.filter(i=>i.userId===r),i=>i.lastActivityTimestamp??0)):ps}getCollaboratorsOnCurrentPage(){const e=this.getCurrentPageId();return this.getCollaborators().filter(n=>n.currentPageId===e)}startFollowingUser(e){if(this.stopFollowingUser(),this.user.getId()||console.warn("You should set the userId for the current instance before following a user"),!this._getFollowingPresence(e))return this;const o=He("latestLeaderPresence",()=>this._getFollowingPresence(e));return Wa(()=>{this.updateInstanceState({followingUserId:e},{history:"ignore"});const i=Al("update current page",()=>{const l=o.get();if(!l){this.stopFollowingUser();return}l.currentPageId!==this.getCurrentPageId()&&this.getPage(l.currentPageId)&&this.run(()=>{this.store.put([{...this.getInstanceState(),currentPageId:l.currentPageId}]),this._isLockedOnFollowingUser.set(!0)},{history:"ignore"})}),s=()=>{i(),this._isLockedOnFollowingUser.set(!1),this.off("frame",a),this.off("stop-following",s)},a=()=>{if(!o.get()){this.stopFollowingUser();return}if(this._isLockedOnFollowingUser.get())return;const c=this.user.getAnimationSpeed();if(c===0){this._isLockedOnFollowingUser.set(!0);return}const u=this.getViewportPageBoundsForFollowing();if(!u){this.stopFollowingUser();return}const d=this.getViewportPageBounds(),f=Math.abs(u.minX-d.minX)+Math.abs(u.maxX-d.maxX),h=Math.abs(u.minY-d.minY)+Math.abs(u.maxY-d.maxY);if(f<this.options.followChaseViewportSnap&&h<this.options.followChaseViewportSnap){this._isLockedOnFollowingUser.set(!0);return}const g=zr(c*.5,.1,.8),y=new rt(Pn(d.minX,u.minX,g),Pn(d.minY,u.minY,g),Pn(d.width,u.width,g),Pn(d.height,u.height,g)),m=new $(-y.x,-y.y,this.getViewportScreenBounds().width/y.width);this.stopCameraAnimation(),this._setCamera(m)};this.once("stop-following",s),this.addListener("frame",a),a()}),this}stopFollowingUser(){return this.run(()=>{this.store.put([this.getCamera()]),this._isLockedOnFollowingUser.set(!1),this.updateInstanceState({followingUserId:null}),this.emit("stop-following")},{history:"ignore"}),this}getUnorderedRenderingShapes(e){const n=[];let r=this.options.maxShapesPerPage*2,o=this.options.maxShapesPerPage;const i=this.getErasingShapeIds(),s=(l,c,u)=>{const d=this.getShape(l);if(!d)return;if(this.isShapeHidden(d)){const m=u||i.includes(l);for(const S of this.getSortedChildIdsForParent(l))s(S,c,m);return}c*=d.opacity;let f=!1;const h=this.getShapeUtil(d);e&&(f=!u&&i.includes(l),f&&(c*=.32)),n.push({id:l,shape:d,util:h,index:r,backgroundIndex:o,opacity:c}),r+=1,o+=1;const g=this.getSortedChildIdsForParent(l);if(!g.length)return;let y=null;h.providesBackgroundForChildren(d)&&(y=o,o=r,r+=this.options.maxShapesPerPage);for(const m of g)s(m,c,u||f);y!==null&&(o=y)},a=e?[this.getCurrentPage()]:this.getPages();for(const l of a)for(const c of this.getSortedChildIdsForParent(l.id))s(c,1,!1);return n}_decayCameraStateTimeout(e){this._cameraStateTimeoutRemaining-=e,!(this._cameraStateTimeoutRemaining>0)&&(this.off("tick",this._decayCameraStateTimeout),this._cameraState.set("idle"))}_tickCameraState(){this._cameraStateTimeoutRemaining=this.options.cameraMovingTimeoutMs,this._cameraState.__unsafe__getWithoutCapture()==="idle"&&(this._cameraState.set("moving"),this.on("tick",this._decayCameraStateTimeout))}getCameraState(){return this._cameraState.get()}getRenderingShapes(){return this.getUnorderedRenderingShapes(!0).sort(c9e)}_getAllPagesQuery(){return this.store.query.records("page")}getPages(){return Array.from(this._getAllPagesQuery().get()).sort(Ni)}getCurrentPage(){return this.getPage(this.getCurrentPageId())}getCurrentPageId(){return this.getInstanceState().currentPageId}getPage(e){return this.store.get(typeof e=="string"?e:e.id)}getCurrentPageShapeIds(){return this._currentPageShapeIds.get()}getCurrentPageShapeIdsSorted(){return Array.from(this.getCurrentPageShapeIds()).sort()}getPageShapeIds(e){const n=typeof e=="string"?e:e.id,r=this.store.query.exec("shape",{parentId:{eq:n}});return this.getShapeAndDescendantIds(r.map(o=>o.id))}setCurrentPage(e){const n=typeof e=="string"?e:e.id;return this.store.has(n)?(this.stopFollowingUser(),this.complete(),this.run(()=>{this.store.put([{...this.getInstanceState(),currentPageId:n}]),this.setCamera(this.getCamera())},{history:"record-preserveRedoStack"})):(console.error("Tried to set the current page id to a page that doesn't exist."),this)}updatePage(e){return this.getIsReadonly()?this:this.getPage(e.id)?this.run(()=>this.store.update(e.id,r=>({...r,...e}))):this}createPage(e){return this.run(()=>{if(this.getIsReadonly()||this.getPages().length>=this.options.maxPages)return;const n=this.getPages(),r=EGe(e.name??"Page 1",n.map(s=>s.name));let o=e.index;(!o||n.some(s=>s.index===o))&&(o=cu(n[n.length-1].index));const i=Bs.create({meta:{},...e,name:r,index:o});this.store.put([i])}),this}deletePage(e){const n=typeof e=="string"?e:e.id;return this.run(()=>{if(this.getIsReadonly())return;const r=this.getPages();if(r.length===1)return;const o=this.getPage(n);if(o){if(n===this.getCurrentPageId()){const i=r.findIndex(a=>a.id===n),s=r[i-1]??r[i+1];this.setCurrentPage(s.id)}this.store.remove([o.id])}}),this}duplicatePage(e,n=Bs.createId()){if(this.getPages().length>=this.options.maxPages)return this;const r=typeof e=="string"?e:e.id,o=this.getPage(r);if(!o)return this;const i={...this.getCamera()},s=this.getContentFromCurrentPage(this.getSortedChildIdsForParent(o.id));return this.run(()=>{var c;const a=this.getPages(),l=fx(o.index,(c=a[a.indexOf(o)+1])==null?void 0:c.index);if(this.createPage({name:o.name+" Copy",id:n,index:l}),this.setCurrentPage(n),this.setCamera(i),s)return this.putContentOntoCurrentPage(s)}),this}renamePage(e,n){const r=typeof e=="string"?e:e.id;return this.getIsReadonly()?this:(this.updatePage({id:r,name:n}),this)}_getAllAssetsQuery(){return this.store.query.records("asset")}getAssets(){return this._getAllAssetsQuery().get()}createAssets(e){return this.getIsReadonly()?this:e.length<=0?this:(this.run(()=>this.store.put(e),{history:"ignore"}),this)}updateAssets(e){return this.getIsReadonly()?this:e.length<=0?this:(this.run(()=>{this.store.put(e.map(n=>({...this.store.get(n.id),...n})))},{history:"ignore"}),this)}deleteAssets(e){if(this.getIsReadonly())return this;const n=typeof e[0]=="string"?e:e.map(r=>r.id);return n.length<=0?this:(this.run(()=>{var r,o;(o=(r=this.store.props.assets).remove)==null||o.call(r,n),this.store.remove(n)},{history:"ignore"}),this)}getAsset(e){return this.store.get(typeof e=="string"?e:e.id)}async resolveAssetUrl(e,n){if(!e)return null;const r=this.getAsset(e);if(!r)return null;const{screenScale:o=1,shouldResolveToOriginal:i=!1,dpr:s=this.getInstanceState().devicePixelRatio}=n,l=(u=>Math.pow(2,Math.ceil(Math.log2(u))))(o),c="connection"in navigator?navigator.connection.effectiveType:null;return await this.store.props.assets.resolve(r,{screenScale:o||1,steppedScreenScale:l,dpr:s,networkEffectiveType:c,shouldResolveToOriginal:i})}async uploadAsset(e,n,r){return await this.store.props.assets.upload(e,n,r)}getShapeGeometry(e,n){const r=(n==null?void 0:n.context)??"none";return this._shapeGeometryCaches[r]||(this._shapeGeometryCaches[r]=this.store.createComputedCache("bounds",o=>(this.fonts.trackFontsForShape(o),this.getShapeUtil(o).getGeometry(o,n)),{areRecordsEqual:gF})),this._shapeGeometryCaches[r].get(typeof e=="string"?e:e.id)}getShapePageGeometry(e,n){const r=(n==null?void 0:n.context)??"none";return this._shapePageGeometryCaches[r]||(this._shapePageGeometryCaches[r]=this.store.createComputedCache("bounds",o=>{const i=this.getShapeGeometry(o.id,n),s=this.getShapePageTransform(o.id);return i.transform(s)},{areRecordsEqual:()=>!0})),this._shapePageGeometryCaches[r].get(typeof e=="string"?e:e.id)}_getShapeHandlesCache(){return this.store.createComputedCache("handles",e=>{var n,r;return(r=(n=this.getShapeUtil(e)).getHandles)==null?void 0:r.call(n,e)},{areRecordsEqual:gF})}getShapeHandles(e){return this._getShapeHandlesCache().get(typeof e=="string"?e:e.id)}getShapeLocalTransform(e){const n=typeof e=="string"?e:e.id,r=this.getShape(n);if(!r)throw Error("Editor.getTransform: shape not found");return Ke.Identity().translate(r.x,r.y).rotate(r.rotation)}_getShapePageTransformCache(){return this.store.createComputedCache("pageTransformCache",e=>{if(rs(e.parentId))return this.getShapeLocalTransform(e);const n=this._getShapePageTransformCache().get(e.parentId)??Ke.Identity();return Ke.Compose(n,this.getShapeLocalTransform(e))})}getShapeParentTransform(e){const n=typeof e=="string"?e:e.id,r=this.getShape(n);return!r||rs(r.parentId)?Ke.Identity():this._getShapePageTransformCache().get(r.parentId)??Ke.Identity()}getShapePageTransform(e){const n=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(n)??Ke.Identity()}_getShapePageBoundsCache(){return this.store.createComputedCache("pageBoundsCache",e=>this.getShapePageGeometry(e).bounds)}getShapePageBounds(e){return this._getShapePageBoundsCache().get(typeof e=="string"?e:e.id)}_getShapeClipPathCache(){return this.store.createComputedCache("clipPathCache",e=>{const n=this._getShapeMaskCache().get(e.id);if(!n)return;if(n.length===0)return"polygon(0px 0px, 0px 0px, 0px 0px)";const r=this._getShapePageTransformCache().get(e.id);return r?`polygon(${Ke.applyToPoints(Ke.Inverse(r),n).map(i=>`${i.x}px ${i.y}px`).join(",")})`:void 0})}getShapeClipPath(e){return this._getShapeClipPathCache().get(typeof e=="string"?e:e.id)}_getShapeMaskCache(){return this.store.createComputedCache("pageMaskCache",e=>{if(rs(e.parentId))return;const n=this.getShapeAncestors(e.id).filter(o=>this.isShapeOfType(o,"frame"));return n.length===0?void 0:n.map(o=>this.getShapePageGeometry(o.id).vertices).reduce((o,i)=>{if(!(i&&o))return;const s=BQ(o,i);return s?s.map($.Cast):[]})})}getShapeMask(e){return this._getShapeMaskCache().get(typeof e=="string"?e:e.id)}getShapeMaskedPageBounds(e){return typeof e!="string"&&(e=e.id),this._getShapeMaskedPageBoundsCache().get(e)}_getShapeMaskedPageBoundsCache(){return this.store.createComputedCache("shapeMaskedPageBoundsCache",e=>{const n=this._getShapePageBoundsCache().get(e.id);if(!n)return;const r=this._getShapeMaskCache().get(e.id);if(r){if(r.length===0)return;const{corners:o}=n;if(o.every((s,a)=>s&&$.Equals(s,r[a])))return n.clone();const i=BQ(r,o);return i?rt.FromPoints(i):void 0}return n})}getShapeAncestors(e,n=[]){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return n;const i=o.parentId;if(rs(i))return n.reverse(),n;const s=this.store.get(i);return s?(n.push(s),this.getShapeAncestors(s,n)):n}findShapeAncestor(e,n){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return;const i=o.parentId;if(rs(i))return;const s=this.getShape(i);if(s)return n(s)?s:this.findShapeAncestor(s,n)}hasAncestor(e,n){const r=typeof e=="string"?e:e==null?void 0:e.id,o=r&&this.getShape(r);return o?o.parentId===n?!0:this.hasAncestor(this.getShapeParent(o),n):!1}findCommonAncestor(e,n){var l;if(e.length===0)return;const r=typeof e[0]=="string"?e:e.map(c=>c.id),o=Tn(r.map(c=>this.getShape(c)));if(o.length===1){const c=o[0].parentId;return rs(c)?void 0:n?(l=this.findShapeAncestor(o[0],n))==null?void 0:l.id:c}const[i,...s]=o;let a=this.getShapeParent(i);for(;a;){if(n&&!n(a)){a=this.getShapeParent(a);continue}if(s.every(c=>this.hasAncestor(c,a.id)))return a.id;a=this.getShapeParent(a)}}isShapeOrAncestorLocked(e){const n=typeof e=="string"?this.getShape(e):e;return n===void 0?!1:n.isLocked?!0:this.isShapeOrAncestorLocked(this.getShapeParent(n))}_notVisibleShapes(){return RGe(this)}getCulledShapes(){const e=this._notVisibleShapes().get(),n=this.getSelectedShapeIds(),r=this.getEditingShapeId(),o=new Set(e);return r&&o.delete(r),n.forEach(i=>{o.delete(i)}),o}getCurrentPageBounds(){let e;return this.getCurrentPageShapeIdsSorted().forEach(n=>{const r=this.getShapeMaskedPageBounds(n);r&&(e?e=e.expand(r):e=r.clone())}),e}getSelectedShapeAtPoint(e){const n=this.getSelectedShapeIds();return this.getCurrentPageShapesSorted().filter(r=>r.type!=="group"&&n.includes(r.id)).reverse().find(r=>this.isPointInShape(r,e,{hitInside:!0,margin:0}))}getShapeAtPoint(e,n={}){var m;const r=this.getZoomLevel(),o=this.getViewportPageBounds(),{filter:i,margin:s=0,hitLocked:a=!1,hitLabels:l=!1,hitInside:c=!1,hitFrameInside:u=!1}=n;let d=1/0,f=null,h=1/0,g=null;const y=(n.renderingOnly?this.getCurrentPageRenderingShapesSorted():this.getCurrentPageShapesSorted()).filter(S=>{if(S.isLocked&&!a||this.isShapeHidden(S)||this.isShapeOfType(S,"group"))return!1;const x=this.getShapeMask(S);return x&&!Ka(e,x)?!1:i?i(S):!0});for(let S=y.length-1;S>=0;S--){const x=y[S],C=this.getShapeGeometry(x),E=C instanceof Zs,P=this.getPointInShapeSpace(x,e);if(this.isShapeOfType(x,"frame")||this.isShapeOfType(x,"arrow")&&x.props.text.trim()||(this.isShapeOfType(x,"note")||this.isShapeOfType(x,"geo")&&x.props.fill==="none")&&((m=this.getShapeUtil(x).getText(x))!=null&&m.trim())){for(const T of C.children)if(T.isLabel&&T.isPointInBounds(P))return x}if(this.isShapeOfType(x,"frame")){const T=C.distanceToPoint(P,c);if(Math.abs(T)<=s)return g||x;if(C.hitTestPoint(P,0,!0))return g||f||(u?x:void 0);continue}let I;if(E){let T=1/0;for(const M of C.children){if(M.isLabel&&!l)continue;const R=M.distanceToPoint(P,c);R<T&&(T=R)}I=T}else s===0&&(C.bounds.w<1||C.bounds.h<1)||C.bounds.containsPoint(P,s)?I=C.distanceToPoint(P,c):I=1/0;if(C.isClosed){if(I<=s){if(C.isFilled||E&&C.children[0].isFilled)return g||x;if(this.getShapePageBounds(x).contains(o))continue;if(Math.abs(I)<s)Math.abs(I)<h&&(h=Math.abs(I),g=x);else if(!g){const{area:T}=C;T<d&&(d=T,f=x)}}}else if(I<this.options.hitTestMargin/r)return x}return g||f||void 0}getShapesAtPoint(e,n={}){return this.getCurrentPageShapes().filter(r=>!this.isShapeHidden(r)&&this.isPointInShape(r,e,n))}isPointInShape(e,n,r={}){const{hitInside:o=!1,margin:i=0}=r,s=typeof e=="string"?e:e.id,a=this.getShapeMask(s);return a&&!Ka(n,a)?!1:this.getShapeGeometry(s).hitTestPoint(this.getPointInShapeSpace(e,n),i,o)}getPointInShapeSpace(e,n){const r=typeof e=="string"?e:e.id;return this._getShapePageTransformCache().get(r).clone().invert().applyToPoint(n)}getPointInParentSpace(e,n){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return new $(0,0);if(rs(o.parentId))return $.From(n);const i=this.getShapePageTransform(o.parentId);return i?i.clone().invert().applyToPoint(n):$.From(n)}getCurrentPageShapes(){return Array.from(this.getCurrentPageShapeIds(),e=>this.store.get(e))}getCurrentPageShapesSorted(){const e=[],n=this.getSortedChildIdsForParent(this.getCurrentPageId());for(let r=0,o=n.length;r<o;r++)whe(this,n[r],e);return e}getCurrentPageRenderingShapesSorted(){const e=this.getCulledShapes();return this.getCurrentPageShapesSorted().filter(({id:n})=>!e.has(n)&&!this.isShapeHidden(n))}isShapeOfType(e,n){const r=typeof e=="string"?this.getShape(e):e;return r?r.type===n:!1}getShape(e){const n=typeof e=="string"?e:e.id;if(fa(n))return this.store.get(n)}getShapeParent(e){const n=typeof e=="string"?e:e==null?void 0:e.id;if(!n)return;const r=this.getShape(n);if(!(r===void 0||!fa(r.parentId)))return this.store.get(r.parentId)}getShapeNearestSibling(e,n){return n?n.parentId===e.parentId?n:this.findShapeAncestor(n,o=>o.parentId===e.parentId):void 0}isShapeInPage(e,n=this.getCurrentPageId()){const r=typeof e=="string"?e:e.id,o=this.getShape(r);if(!o)return!1;let i=!1;if(o.parentId===n)i=!0;else{let s=this.getShape(o.parentId);e:for(;s;){if(s.parentId===n){i=!0;break e}s=this.getShape(s.parentId)}}return i}getAncestorPageId(e){const n=typeof e=="string"?e:e==null?void 0:e.id,r=n&&this.getShape(n);if(r)return rs(r.parentId)?r.parentId:this.getAncestorPageId(this.getShape(r.parentId))}reparentShapes(e,n,r){const o=typeof e[0]=="string"?e:e.map(f=>f.id);if(o.length===0)return this;const i=[],s=rs(n)?Ke.Identity():this.getShapePageTransform(n),a=s.rotation();let l=[];const c=Tn(this.getSortedChildIdsForParent(n).map(f=>this.getShape(f)));if(r){const f=c.find(h=>h.index===r);if(f){const h=c[c.indexOf(f)+1];h?l=yv(r,h.index,o.length):l=zA(r,o.length)}else{const h=c.sort(Ni).find(g=>g.index>r);h?l=yv(r,h.index,o.length):l=zA(r,o.length)}}else{const f=c.length&&c[c.length-1];l=f?zA(f.index,o.length):hx(o.length)}const u=s.clone().invert(),d=Tn(o.map(f=>this.getShape(f))).sort(Ni);return this.run(()=>{for(let f=0;f<d.length;f++){const h=d[f],g=this.getShapePageTransform(h);if(!g)continue;const y=g.point();if(!y)continue;const m=u.applyToPoint(y),S=g.rotation()-a;i.push({id:h.id,type:h.type,parentId:n,x:m.x,y:m.y,rotation:S,index:l[f]})}this.updateShapes(i)},{ignoreShapeLock:!0}),this}getHighestIndexForParent(e){const n=typeof e=="string"?e:e.id,r=this._parentIdsToChildIds.get()[n];if(!r||r.length===0)return"a1";const o=this.getShape(r[r.length-1]);return cu(o.index)}getSortedChildIdsForParent(e){const n=typeof e=="string"?e:e.id,r=this._parentIdsToChildIds.get()[n];return r||ps}visitDescendants(e,n){const r=typeof e=="string"?e:e.id,o=this.getSortedChildIdsForParent(r);for(const i of o)n(i)!==!1&&this.visitDescendants(i,n);return this}getShapeAndDescendantIds(e){const n=new Set;for(const r of e.map(o=>this.getShape(o)).sort(Ni))n.add(r.id),this.visitDescendants(r,o=>{n.add(o)});return n}getDroppingOverShape(e,n=[]){const r=this.getCurrentPageShapesSorted();for(let o=r.length-1;o>=0;o--){const i=r[o];if(this.isShapeHidden(i)||this.getSelectedShapeIds().includes(i.id)||!this.getShapeUtil(i).canDropShapes(i,n)||n.find(a=>a.id===i.id||this.hasAncestor(i,a.id)))continue;const s=this.getShapeMaskedPageBounds(i.id);if(s&&s.containsPoint(e)&&this.getShapeGeometry(i).hitTestPoint(this.getPointInShapeSpace(i,e),0,!0))return i}}getOutermostSelectableShape(e,n){const r=typeof e=="string"?e:e.id,o=this.getShape(r);let i=o,s=o;const a=this.getFocusedGroup();for(;s;){if(this.isShapeOfType(s,"group")&&(a==null?void 0:a.id)!==s.id&&!this.hasAncestor(a,s.id)&&((n==null?void 0:n(s))??!0))i=s;else if((a==null?void 0:a.id)===s.id)break;s=this.getShapeParent(s)}return i}_getBindingsIndexCache(){const e=MGe(this);return this.store.createComputedCache("bindingsIndex",n=>e.get().get(n.id),{areRecordsEqual:()=>!0})}getBinding(e){return this.store.get(e)}getBindingsFromShape(e,n){const r=typeof e=="string"?e:e.id;return this.getBindingsInvolvingShape(r).filter(o=>o.fromId===r&&o.type===n)}getBindingsToShape(e,n){const r=typeof e=="string"?e:e.id;return this.getBindingsInvolvingShape(r).filter(o=>o.toId===r&&o.type===n)}getBindingsInvolvingShape(e,n){const r=typeof e=="string"?e:e.id,o=this._getBindingsIndexCache().get(r)??ps;return n?o.filter(i=>i.type===n):o}createBindings(e){const n=[];for(const r of e){const o=this.getShape(r.fromId),i=this.getShape(r.toId);if(!o||!i||!this.canBindShapes({fromShape:o,toShape:i,binding:r}))continue;const a=this.getBindingUtil(r.type).getDefaultProps(),l=this.store.schema.types.binding.create({...r,id:r.id??Ip(),props:{...a,...r.props}});n.push(l)}return this.store.put(n),this}createBinding(e){return this.createBindings([e])}updateBindings(e){const n=[];for(const r of e){if(!r)continue;const o=this.getBinding(r.id);if(!o)continue;const i=Jc(o,r);if(i===o)continue;const s=this.getShape(i.fromId),a=this.getShape(i.toId);!s||!a||this.canBindShapes({fromShape:s,toShape:a,binding:i})&&n.push(i)}return this.store.put(n),this}updateBinding(e){return this.updateBindings([e])}deleteBindings(e,{isolateShapes:n=!1}={}){const r=e.map(o=>typeof o=="string"?o:o.id);return n?this.store.atomic(()=>{var o,i;for(const s of r){const a=this.getBinding(s);if(!a)continue;const l=this.getBindingUtil(a);(o=l.onBeforeIsolateFromShape)==null||o.call(l,{binding:a,removedShape:this.getShape(a.toId)}),(i=l.onBeforeIsolateToShape)==null||i.call(l,{binding:a,removedShape:this.getShape(a.fromId)}),this.store.remove([s])}}):this.store.remove(r),this}deleteBinding(e,n){return this.deleteBindings([e],n)}canBindShapes({fromShape:e,toShape:n,binding:r}){const o=typeof e=="string"?e:e.type,i=typeof n=="string"?n:n.type,s=typeof r=="string"?r:r.type,a={fromShapeType:o,toShapeType:i,bindingType:s};return o===i?this.getShapeUtil(o).canBind(a):this.getShapeUtil(o).canBind(a)&&this.getShapeUtil(i).canBind(a)}rotateShapesBy(e,n,r){const o=typeof e[0]=="string"?e:e.map(s=>s.id);if(o.length<=0)return this;const i=Gue({editor:this,ids:o});return i?(wP({delta:n,snapshot:i,editor:this,stage:"one-off",centerOverride:r==null?void 0:r.center}),this):this}getChangesToTranslateShape(e,n){var l,c,u;let r=e;const o=this.getShapeUtil(e),i=(l=o.onTranslateStart)==null?void 0:l.call(o,r);i&&(r=Jc(r,i)),r=Jc(r,{id:e.id,type:e.type,x:n.x,y:n.y});const s=(c=o.onTranslate)==null?void 0:c.call(o,e,r);s&&(r=Jc(r,s));const a=(u=o.onTranslateEnd)==null?void 0:u.call(o,e,r);return a&&(r=Jc(r,a)),r}nudgeShapes(e,n){const r=typeof e[0]=="string"?e:e.map(i=>i.id);if(r.length<=0)return this;const o=[];for(const i of r){const s=this.getShape(i),a=$.From(n),l=this.getShapeParentTransform(s);l&&a.rot(-l.rotation()),o.push(this.getChangesToTranslateShape(s,a.add(s)))}return this.updateShapes(o),this}duplicateShapes(e,n){return this.run(()=>{const r=typeof e[0]=="string"?e:e.map(f=>f.id);if(r.length<=0)return this;const o=new Set(r),i=this.getShapeAndDescendantIds(r),s=[...i].reverse(),a=new Map;for(const f of i)a.set(f,Ar());const{shapesToCreateWithOriginals:l,bindingsToCreate:c}=cZ(this,i,f=>{const h=[];for(const y of f){const m=this.getBinding(y);if(!m)continue;const S=Ip();h.push({...m,id:S,fromId:Ds(a.get(m.fromId)),toId:Ds(a.get(m.toId))})}const g=[];for(const y of s){const m=Ds(a.get(y)),S=this.getShape(y);if(!S)continue;let x=0,C=0;if(n&&o.has(y)){const E=this.getShapeParentTransform(S),P=new $(n.x,n.y).rot(-E.rotation());x=P.x,C=P.y}g.push({shape:{...S,id:m,x:S.x+x,y:S.y+C,index:"a1",parentId:a.get(S.parentId)??S.parentId},originalShape:S})}return{shapesToCreateWithOriginals:g,bindingsToCreate:h}});l.forEach(({shape:f,originalShape:h})=>{const g=h.parentId,y=this.getSortedChildIdsForParent(g),m=y.indexOf(h.id),S=y[m+1],x=S?this.getShape(S):void 0,C=fx(h.index,x==null?void 0:x.index);f.index=C});const u=l.map(({shape:f})=>f);if(u.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage){cE(this);return}if(this.createShapes(u),this.createBindings(c),this.setSelectedShapes(Tn(r.map(f=>a.get(f)))),n!==void 0){const f=this.getSelectionPageBounds(),h=this.getViewportPageBounds();f&&!h.contains(f)&&this.centerOnPoint(f.center,{animation:{duration:this.options.animationMediumMs}})}}),this}moveShapesToPage(e,n){const r=typeof e[0]=="string"?e:e.map(a=>a.id);if(r.length===0)return this;if(this.getIsReadonly())return this;const o=this.getCurrentPageId();if(n===o)return this;if(!this.store.has(n))return this;const i=this.getContentFromCurrentPage(r);if(!i)return this;if(this.getPageShapeIds(n).size+i.shapes.length>this.options.maxShapesPerPage)return cE(this,n),this;const s=this.getCamera().z;return this.run(()=>{this.deleteShapes(r),this.setCurrentPage(n),this.setFocusedGroup(null),this.selectNone(),this.putContentOntoCurrentPage(i,{select:!0,preserveIds:!0,preservePosition:!0}),this.setCamera({...this.getCamera(),z:s}),this.centerOnPoint(this.getSelectionRotatedPageBounds().center)}),this}toggleLock(e){const n=typeof e[0]=="string"?e:e.map(s=>s.id);if(this.getIsReadonly()||n.length===0)return this;let r=!0,o=!0;const i=[];for(const s of n){const a=this.getShape(s);a&&(i.push(a),a.isLocked?o=!1:r=!1)}return this.run(()=>{o?(this.updateShapes(i.map(s=>({id:s.id,type:s.type,isLocked:!0}))),this.setSelectedShapes([])):r?this.updateShapes(i.map(s=>({id:s.id,type:s.type,isLocked:!1}))):this.updateShapes(i.map(s=>({id:s.id,type:s.type,isLocked:!0})))}),this}sendToBack(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id),r=aE(this,"toBack",n,{considerAllShapes:!0});return r&&this.updateShapes(r),this}sendBackward(e,n={}){const r=typeof e[0]=="string"?e:e.map(i=>i.id),o=aE(this,"backward",r,n);return o&&this.updateShapes(o),this}bringForward(e,n={}){const r=typeof e[0]=="string"?e:e.map(i=>i.id),o=aE(this,"forward",r,n);return o&&this.updateShapes(o),this}bringToFront(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id),r=aE(this,"toFront",n);return r&&this.updateShapes(r),this}collectShapesViaArrowBindings(e){const{initialShapes:n,resultShapes:r,resultBounds:o,bindings:i,visited:s}=e;for(const a of i)for(const l of[a.fromId,a.toId])if(!s.has(l)){const c=n.find(u=>u.id===l);if(c&&!s.has(c.id)){s.add(c.id);const u=this.getShapePageBounds(c);if(!u)continue;r.push(c),o.push(u),this.collectShapesViaArrowBindings({...e,bindings:this.getBindingsInvolvingShape(c,"arrow")})}}}flipShapes(e,n){if(this.getIsReadonly())return this;const r=typeof e[0]=="string"?e:e.map(l=>l.id),o=Tn(r.map(l=>this.getShape(l)));for(const l of o)if(this.isShapeOfType(l,"group")){const c=Tn(this.getSortedChildIdsForParent(l.id).map(u=>this.getShape(u)));o.push(...c)}const i=[],s=[];for(const l of o){const c=this.getShapeUtil(l);if(!c.canBeLaidOut(l,{type:"flip",shapes:o}))continue;const u=this.getShapePageBounds(l),d=this.getShapeGeometry(l).bounds,f=this.getShapePageTransform(l.id);u&&d&&f&&(i.push({shape:l,localBounds:d,pageTransform:f,isAspectRatioLocked:c.isAspectRatioLocked(l)}),s.push(u))}if(!i.length)return this;const a=rt.Common(s).center;return this.run(()=>{for(const{shape:l,localBounds:c,pageTransform:u,isAspectRatioLocked:d}of i)this.resizeShape(l.id,{x:n==="horizontal"?-1:1,y:n==="vertical"?-1:1},{initialBounds:c,initialPageTransform:u,initialShape:l,isAspectRatioLocked:d,mode:"scale_shape",scaleOrigin:a,scaleAxisRotation:0})}),this}stackShapes(e,n,r){var S,x;const o=r??this.options.adjacentShapeMargin,i=typeof e[0]=="string"?e:e.map(C=>C.id);if(this.getIsReadonly())return this;const s=Tn(i.map(C=>this.getShape(C))),a=[],l=new Set;for(const C of s){if(l.has(C.id))continue;l.add(C.id);const E=this.getShapePageBounds(C);if(!E||!((x=(S=this.getShapeUtil(C)).canBeLaidOut)!=null&&x.call(S,C,{type:"stack",shapes:s})))continue;const P=[C],I=[E];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(C.id,"arrow"),initialShapes:s,resultShapes:P,resultBounds:I,visited:l});const T=rt.Common(I);T&&a.push({shapes:P,pageBounds:T})}const c=a.length;if(o===0&&c<3||c<2)return this;let u,d,f,h;n==="horizontal"?(u="x",d="minX",f="maxX",h="width"):(u="y",d="minY",f="maxY",h="height");let g=0;if(o===0){const C={};a.sort((P,I)=>P.pageBounds[d]-I.pageBounds[d]);for(let P=0;P<c-1;P++){const I=a[P],M=a[P+1].pageBounds[d]-I.pageBounds[f];C[M]||(C[M]=0),C[M]++}let E=1;for(const[P,I]of Object.entries(C))I>E&&(E=I,g=parseFloat(P));if(E===1){let P=0;for(const[I,T]of Object.entries(C))g+=parseFloat(I)*T,P+=T;g/=P}}else g=o;const y=[];let m=a[0].pageBounds[f];for(let C=1;C<a.length;C++){const{shapes:E,pageBounds:P}=a[C],I=new $;I[u]=m+g-P[u];for(const T of E){const M=I.clone(),R=this.getShapeParent(T);if(R){const A=this.getShapePageTransform(R);A&&M.rot(-A.rotation())}M.add(T),y.push(this.getChangesToTranslateShape(T,M))}m+=P[h]+g}return this.updateShapes(y),this}packShapes(e,n){var P,I;if(this.getIsReadonly())return this;const r=n??this.options.adjacentShapeMargin,o=typeof e[0]=="string"?e:e.map(T=>T.id),i=Tn(o.map(T=>this.getShape(T))),s=[],a=[],l=new Set;for(const T of i){if(l.has(T.id))continue;l.add(T.id);const M=this.getShapePageBounds(T);if(!M||!((I=(P=this.getShapeUtil(T)).canBeLaidOut)!=null&&I.call(P,T,{type:"pack",shapes:i})))continue;const R=[T],A=[M];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(T.id,"arrow"),initialShapes:i,resultShapes:R,resultBounds:A,visited:l});const j=rt.Common(A);j&&(s.push({shapes:R,pageBounds:j,nextPageBounds:j.clone()}),a.push(j))}if(s.length<2)return this;let c=0;for(const{pageBounds:T}of s)c+=T.width*T.height;const u=rt.Common(a),d=u.width;s.sort((T,M)=>T.pageBounds.width-M.pageBounds.width).sort((T,M)=>T.pageBounds.height-M.pageBounds.height);const f=Math.max(Math.ceil(Math.sqrt(c/.95)),d),h=[new rt(u.x,u.y,f,1/0)];let g=0,y=0,m,S;for(const{nextPageBounds:T}of s)for(let M=h.length-1;M>=0;M--)if(m=h[M],!(T.width>m.width||T.height>m.height)){T.x=m.x,T.y=m.y,y=Math.max(y,T.maxY),g=Math.max(g,T.maxX),T.width===m.width&&T.height===m.height?(S=h.pop(),M<h.length&&(h[M]=S)):T.height===m.height?(m.x+=T.width+r,m.width-=T.width+r):T.width===m.width?(m.y+=T.height+r,m.height-=T.height+r):(h.push(new rt(m.x+(T.width+r),m.y,m.width-(T.width+r),T.height)),m.y+=T.height+r,m.height-=T.height+r);break}const x=rt.Common(s.map(T=>T.nextPageBounds)),C=$.Sub(u.center,x.center),E=[];for(const{shapes:T,pageBounds:M,nextPageBounds:R}of s){const A=$.Sub(R.point,M.point).add(C);for(const j of T){const N=A.clone();if(this.getShapeParent(j)){const D=this.getShapeParentTransform(j);D&&N.rot(-D.rotation())}N.add(j),E.push(this.getChangesToTranslateShape(j,N))}}return E.length&&this.updateShapes(E),this}alignShapes(e,n){var u,d;if(this.getIsReadonly())return this;const r=typeof e[0]=="string"?e:e.map(f=>f.id),o=Tn(r.map(f=>this.getShape(f))),i=[],s=[],a=new Set;for(const f of o){if(a.has(f.id))continue;a.add(f.id);const h=this.getShapePageBounds(f);if(!h||!((d=(u=this.getShapeUtil(f)).canBeLaidOut)!=null&&d.call(u,f,{type:"align",shapes:o})))continue;const g=[f],y=[h];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(f.id,"arrow"),initialShapes:o,resultShapes:g,resultBounds:y,visited:a});const m=rt.Common(y);m&&(i.push({shapes:g,pageBounds:m}),s.push(m))}if(i.length<2)return this;const l=rt.Common(s),c=[];return i.forEach(({shapes:f,pageBounds:h})=>{const g=new $;switch(n){case"top":{g.y=l.minY-h.minY;break}case"center-vertical":{g.y=l.midY-h.minY-h.height/2;break}case"bottom":{g.y=l.maxY-h.minY-h.height;break}case"left":{g.x=l.minX-h.minX;break}case"center-horizontal":{g.x=l.midX-h.minX-h.width/2;break}case"right":{g.x=l.maxX-h.minX-h.width;break}}for(const y of f){const m=g.clone(),S=this.getShapeParent(y);if(S){const x=this.getShapePageTransform(S);x&&m.rot(-x.rotation())}m.add(y),c.push(this.getChangesToTranslateShape(y,m))}}),this.updateShapes(c),this}distributeShapes(e,n){var C,E;if(this.getIsReadonly())return this;const r=typeof e[0]=="string"?e:e.map(P=>P.id),o=Tn(r.map(P=>this.getShape(P))),i=[],s=new Set;for(const P of o){if(s.has(P.id))continue;s.add(P.id);const I=this.getShapePageBounds(P);if(!I||!((E=(C=this.getShapeUtil(P)).canBeLaidOut)!=null&&E.call(C,P,{type:"distribute",shapes:o})))continue;const T=[P],M=[I];this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(P.id,"arrow"),initialShapes:o,resultShapes:T,resultBounds:M,visited:s});const R=rt.Common(M);R&&i.push({shapes:T,pageBounds:R})}if(i.length<3)return this;let a,l,c,u;n==="horizontal"?(a="x",l="minX",c="maxX",u="width"):(a="y",l="minY",c="maxY",u="height");const d=[],f=i.sort((P,I)=>P.pageBounds[l]-I.pageBounds[l])[0],h=i.sort((P,I)=>I.pageBounds[c]-P.pageBounds[c])[0];if(f===h){const P=new Set(f.shapes.map(I=>I.id));return this.distributeShapes(r.filter(I=>!P.has(I)),n)}const g=i.filter(P=>P!==f&&P!==h).sort((P,I)=>P.pageBounds[l]===I.pageBounds[l]?P.shapes[0].id<I.shapes[0].id?-1:1:P.pageBounds[l]-I.pageBounds[l]),y=f.pageBounds[c],m=h.pageBounds[l]-y,S=g.reduce((P,I)=>P+I.pageBounds[u],0),x=(m-S)/(g.length+1);for(let P=y+x,I=0;I<g.length;I++){const{shapes:T,pageBounds:M}=g[I],R=new $;R[a]=P-M[a],P+M[u]>h.pageBounds[c]-1&&(R[a]=h.pageBounds[c]-M[c]-1);for(const A of T){const j=R.clone(),N=this.getShapeParent(A);if(N){const k=this.getShapePageTransform(N);k&&j.rot(-k.rotation())}j.add(A),d.push(this.getChangesToTranslateShape(A,j))}P+=M[u]+x}return this.updateShapes(d),this}stretchShapes(e,n){var f,h;const r=typeof e[0]=="string"?e:e.map(g=>g.id);if(this.getIsReadonly())return this;const o=Tn(r.map(g=>this.getShape(g))).filter(g=>{var y;return((y=this.getShapePageTransform(g))==null?void 0:y.rotation())%(cr/2)===0}),i=[],s=[],a=new Set;for(const g of o){if(a.has(g.id))continue;a.add(g.id);const y=this.getShapePageBounds(g);if(!y)continue;const m=[g],S=[y];if(!((h=(f=this.getShapeUtil(g)).canBeLaidOut)!=null&&h.call(f,g,{type:"stretch",shapes:o})))continue;this.collectShapesViaArrowBindings({bindings:this.getBindingsToShape(g.id,"arrow"),initialShapes:o,resultShapes:m,resultBounds:S,visited:a});const x=rt.Common(S);x&&(i.push({shapes:m,pageBounds:x}),s.push(x))}if(i.length<2)return this;const l=rt.Common(s);let c,u,d;return n==="horizontal"?(c="x",u="minX",d="width"):(c="y",u="minY",d="height"),this.run(()=>{i.forEach(({shapes:g,pageBounds:y})=>{const m=new $;m[c]=l[u]-y[u];const S=y.center.clone();S[c]=l[u];const x=new $(1,1);x[c]=l[d]/y[d];for(const C of g){const E=m.clone(),P=this.getShapeParentTransform(C);P&&m.rot(-P.rotation()),E.add(C);const I=this.getChangesToTranslateShape(C,E);this.updateShape(I),this.resizeShape(C.id,x,{initialBounds:this.getShapeGeometry(C).bounds,scaleOrigin:S,isAspectRatioLocked:this.getShapeUtil(C).isAspectRatioLocked(C),scaleAxisRotation:0})}})}),this}resizeShape(e,n,r={}){var g,y,m;const o=typeof e=="string"?e:e.id;if(this.getIsReadonly())return this;Number.isFinite(n.x)||(n=new $(1,n.y)),Number.isFinite(n.y)||(n=new $(n.x,1));const i=r.initialShape??this.getShape(o);if(!i)return this;const s=r.scaleOrigin??((g=this.getShapePageBounds(o))==null?void 0:g.center);if(!s)return this;const a=r.initialPageTransform?Ke.Cast(r.initialPageTransform):this.getShapePageTransform(o);if(!a)return this;const l=a.rotation();if(l==null)return this;const c=r.scaleAxisRotation??l,u=r.initialBounds??this.getShapeGeometry(o).bounds;if(!u)return this;const d=r.isAspectRatioLocked??this.getShapeUtil(i).isAspectRatioLocked(i);if(!jce(l,c))return this._resizeUnalignedShape(o,n,{...r,initialBounds:u,scaleOrigin:s,scaleAxisRotation:c,initialPageTransform:a,isAspectRatioLocked:d,initialShape:i});const f=this.getShapeUtil(i);d&&(Math.abs(n.x)>Math.abs(n.y)?n=new $(n.x,Math.sign(n.y)*Math.abs(n.x)):n=new $(Math.sign(n.x)*Math.abs(n.y),n.y));let h=!1;if(f.onResize&&f.canResize(i)){const S=this._scalePagePoint(Ke.applyToPoint(a,new $(0,0)),s,n,c),x=this.getPointInParentSpace(i.id,S),C=new $(n.x,n.y),E=qa((l-c)%Math.PI,0);C.x=E?n.x:n.y,C.y=E?n.y:n.x;const P=Ke.applyToPoint(a,new $),{x:I,y:T}=this.getPointInParentSpace(i.id,P);let M=i;r.skipStartAndEndCallbacks||(M=Jc(i,((y=f.onResizeStart)==null?void 0:y.call(f,i))??void 0));const R=f.onResize({...i,x:I,y:T},{newPoint:x,handle:r.dragHandle??"bottom_right",mode:r.mode??"scale_shape",scaleX:C.x,scaleY:C.y,initialBounds:u,initialShape:i});R&&(h=!0),M=Jc(M,{id:o,type:i.type,x:x.x,y:x.y,...R}),r.skipStartAndEndCallbacks||(M=Jc(M,((m=f.onResizeEnd)==null?void 0:m.call(f,i,M))??void 0)),this.updateShapes([M])}if(!h){const S=Ke.applyToPoint(a,u.center),x=this._scalePagePoint(S,s,n,c),C=this.getPointInParentSpace(i.id,S),E=this.getPointInParentSpace(i.id,x),P=$.Sub(E,C);this.updateShapes([{id:o,type:i.type,x:i.x+P.x,y:i.y+P.y}])}return this}_scalePagePoint(e,n,r,o){const i=$.RotWith(e,n,-o).sub(n),s=$.MulV(i,r);return $.Add(s,n).rotWith(n,o)}_resizeUnalignedShape(e,n,r){const{type:o}=r.initialShape,i=new $(n.x,n.y);if(Math.abs(n.x)>Math.abs(n.y)?i.x=Math.sign(n.x)*Math.abs(n.y):i.y=Math.sign(n.y)*Math.abs(n.x),this.resizeShape(e,i,{initialShape:r.initialShape,initialBounds:r.initialBounds,isAspectRatioLocked:r.isAspectRatioLocked}),Math.sign(n.x)*Math.sign(n.y)<0){let{rotation:m}=Ke.Decompose(r.initialPageTransform);m-=2*m,this.updateShapes([{id:e,type:o,rotation:m}])}const s=Ke.applyToPoint(r.initialPageTransform,r.initialBounds.center),a=this._scalePagePoint(s,r.scaleOrigin,n,r.scaleAxisRotation),l=this.getShapePageBounds(e),c=this.getShapePageTransform(e),u=l.center,d=c.point();if(!u||!d)return this;const f=$.Sub(a,u),h=$.Add(d,f),{x:g,y}=this.getPointInParentSpace(e,h);return this.updateShapes([{id:e,type:o,x:g,y}]),this}getInitialMetaForShape(e){return{}}createShape(e){return this.createShapes([e]),this}createShapes(e){if(!Array.isArray(e))throw Error("Editor.createShapes: must provide an array of shapes or shape partials");if(this.getIsReadonly())return this;if(e.length<=0)return this;const n=this.getCurrentPageShapeIds();if(e.length+n.size>this.options.maxShapesPerPage)return cE(this),this;const o=this.getFocusedGroupId();return this.run(()=>{var u,d;const i=this.getCurrentPageShapesSorted(),s=e.map(f=>{if(f.id||(f={id:Ar(),...f}),!f.parentId||!(this.store.has(f.parentId)||e.some(h=>h.id===f.parentId))){let h=this.getFocusedGroupId();for(let y=i.length-1;y>=0;y--){const m=i[y];if(!this.isShapeHidden(m)&&this.getShapeUtil(m).canReceiveNewChildrenOfType(m,f.type)&&this.isPointInShape(m,{x:f.x??0,y:f.y??0},{margin:0,hitInside:!0})){h=m.id;break}}const g=f.parentId;if(h===f.id&&(h=o),h!==g&&(f={...f},f.parentId=h,fa(h))){const y=this.getPointInShapeSpace(this.getShape(h),{x:f.x??0,y:f.y??0});f.x=y.x,f.y=y.y,f.rotation=-this.getShapePageTransform(h).rotation()+(f.rotation??0)}}return f}),a=new Map,l=[],{opacityForNextShape:c}=this.getInstanceState();for(const f of s){const h=this.getShapeUtil(f);let g=f.index;if(!g){const x=f.parentId??o;a.has(x)||a.set(x,this.getHighestIndexForParent(x)),g=a.get(x),a.set(x,cu(g))}const y=h.getDefaultProps();for(const[x,C]of this.styleProps[f.type])y[C]=this.getStyleForNextShape(x);let m=this.store.schema.types.shape.create({...f,index:g,opacity:f.opacity??c,parentId:f.parentId??o,props:"props"in f?{...y,...f.props}:y});if(m.index===void 0)throw Error("no index!");const S=(d=(u=this.getShapeUtil(m)).onBeforeCreate)==null?void 0:d.call(u,m);S&&(m=S),l.push(m)}l.forEach(f=>{f.meta={...this.getInitialMetaForShape(f),...f.meta}}),this.store.put(l)}),this}animateShape(e,n={animation:KD}){return this.animateShapes([e],n)}animateShapes(e,n={animation:KD}){if(!n.animation)return this;const{duration:r=500,easing:o=bi.linear}=n.animation,i=br();let s=r,a;const l=[];let c,u;for(let f=0,h=e.length;f<h;f++){if(c=e[f],!c)continue;const g=this.getShape(c.id);g&&(u={start:to(g),end:Jc(to(g),c)},l.push(u),this.animatingShapes.set(g.id,i))}const d=f=>{var m,S;if(s-=f,s<0){const{animatingShapes:x}=this,C=e.filter(E=>E&&x.get(E.id)===i);C.length&&this.updateShapes(C),this.off("tick",d);return}a=o(1-s/r);const{animatingShapes:h}=this,g=[];let y;for(let x=0,C=l.length;x<C;x++){const{start:E,end:P}=l[x];y=h.get(E.id),y===i&&g.push({...P,x:E.x+(P.x-E.x)*a,y:E.y+(P.y-E.y)*a,opacity:E.opacity+(P.opacity-E.opacity)*a,rotation:E.rotation+(P.rotation-E.rotation)*a,props:((S=(m=this.getShapeUtil(P)).getInterpolatedProps)==null?void 0:S.call(m,E,P,a))??P.props})}this._updateShapes(g)};return this.on("tick",d),this}groupShapes(e,n={}){var g;const{groupId:r=Ar(),select:o=!0}=n;if(!Array.isArray(e))throw Error("Editor.groupShapes: must provide an array of shapes or shape ids");if(this.getIsReadonly())return this;const i=typeof e[0]=="string"?e:e.map(y=>y.id);if(i.length<=1)return this;const s=Tn((this._shouldIgnoreShapeLock?i:this._getUnlockedShapeIds(i)).map(y=>this.getShape(y))),a=s.sort(Ni).map(y=>y.id),l=rt.Common(Tn(s.map(y=>this.getShapePageBounds(y)))),{x:c,y:u}=l.point,d=this.findCommonAncestor(s)??this.getCurrentPageId();if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const f=s.filter(y=>y.parentId===d).sort(Ni),h=(g=f[f.length-1])==null?void 0:g.index;return this.run(()=>{this.createShapes([{id:r,type:"group",parentId:d,index:h,x:c,y:u,opacity:1,props:{}}]),this.reparentShapes(a,r),o&&this.select(r)}),this}ungroupShapes(e,n={}){if(this.getIsReadonly())return this;const{select:r=!0}=n,o=typeof e[0]=="string"?e:e.map(l=>l.id),i=Tn((this._shouldIgnoreShapeLock?o:this._getUnlockedShapeIds(o)).map(l=>this.getShape(l)));if(i.length===0)return this;if(this.getCurrentToolId()!=="select")return this;this.isIn("select.idle")||this.cancel();const s=new Set,a=[];return i.forEach(l=>{this.isShapeOfType(l,"group")?a.push(l):s.add(l.id)}),a.length===0?this:(this.run(()=>{let l;for(let c=0,u=a.length;c<u;c++){l=a[c];const d=this.getSortedChildIdsForParent(l.id);for(let f=0,h=d.length;f<h;f++)s.add(d[f]);this.reparentShapes(d,l.parentId,l.index)}this.deleteShapes(a.map(c=>c.id)),r&&this.select(...s)}),this)}updateShape(e){return this.updateShapes([e]),this}updateShapes(e){const n=Array(e.length);for(let r=0,o=e.length;r<o;r++){const i=e[r];if(!i)continue;const s=this.getShape(i.id);if(s){if(!this._shouldIgnoreShapeLock){if(s.isLocked){if(!(Object.hasOwn(i,"isLocked")&&!i.isLocked))continue}else if(this.isShapeOrAncestorLocked(s))continue}this.animatingShapes.delete(i.id),n.push(i)}}return this._updateShapes(n),this}_updateShapes(e){this.getIsReadonly()||this.run(()=>{var i,s;const n=[];let r,o;for(let a=0,l=e.length;a<l;a++){const c=e[a];c&&(r=this.getShape(c.id),r&&(o=Jc(r,c),o!==r&&(o=((s=(i=this.getShapeUtil(r)).onBeforeUpdate)==null?void 0:s.call(i,r,o))??o,n.push(o))))}this.store.put(n)})}_getUnlockedShapeIds(e){return e.filter(n=>{var r;return!((r=this.getShape(n))!=null&&r.isLocked)})}deleteShapes(e){if(this.getIsReadonly())return this;if(!Array.isArray(e))throw Error("Editor.deleteShapes: must provide an array of shapes or shapeIds");const n=typeof e[0]=="string"?e:e.map(i=>i.id),r=this._shouldIgnoreShapeLock?n:this._getUnlockedShapeIds(n);if(r.length===0)return this;const o=new Set(r);for(const i of r)this.visitDescendants(i,s=>{o.add(s)});return this.run(()=>this.store.remove([...o]))}deleteShape(e){return this.deleteShapes([typeof e=="string"?e:e.id]),this}_extractSharedStyles(e,n){if(this.isShapeOfType(e,"group")){const r=this._parentIdsToChildIds.get()[e.id];if(!r)return;for(let o=0,i=r.length;o<i;o++)this._extractSharedStyles(this.getShape(r[o]),n)}else for(const[r,o]of this.styleProps[e.type])n.applyValue(r,Uo(e.props,o))}_getSelectionSharedStyles(){const e=this.getSelectedShapes(),n=new SF;for(const r of e)this._extractSharedStyles(r,n);return n}getStyleForNextShape(e){const n=this.getInstanceState().stylesForNextShape[e.id];return n===void 0?e.defaultValue:n}getShapeStyleIfExists(e,n){const r=this.styleProps[e.type].get(n);if(r!==void 0)return Uo(e.props,r)}getSharedStyles(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0)return this._getSelectionSharedStyles();const e=this.root.getCurrent(),n=new SF;if(!e)return n;if(e.shapeType)if(e.shapeType==="frame"&&!this.getShapeUtil("frame").options.showColors)for(const r of this.styleProps[e.shapeType].keys())r.id!=="tldraw:color"&&n.applyValue(r,this.getStyleForNextShape(r));else for(const r of this.styleProps[e.shapeType].keys())n.applyValue(r,this.getStyleForNextShape(r));return n}getSharedOpacity(){if(this.isIn("select")&&this.getSelectedShapeIds().length>0){const e=[],n=o=>{const i=this.getShape(o);if(i)if(this.isShapeOfType(i,"group"))for(const s of this.getSortedChildIdsForParent(i.id))n(s);else e.push(i)};for(const o of this.getSelectedShapeIds())n(o);let r=null;for(const o of e)if(r===null)r=o.opacity;else if(r!==o.opacity)return{type:"mixed"};if(r!==null)return{type:"shared",value:r}}return{type:"shared",value:this.getInstanceState().opacityForNextShape}}setOpacityForNextShapes(e,n){return this.updateInstanceState({opacityForNextShape:e},n),this}setOpacityForSelectedShapes(e){const n=this.getSelectedShapes();if(n.length>0){const r=[],o=i=>{if(this.isShapeOfType(i,"group")){const s=this.getSortedChildIdsForParent(i);for(const a of s)o(this.getShape(a))}else r.push(i)};for(const i of n)o(i);this.updateShapes(r.map(i=>({id:i.id,type:i.type,opacity:e})))}return this}setStyleForNextShapes(e,n,r){const o=this.getInstanceState().stylesForNextShape;return this.updateInstanceState({stylesForNextShape:{...o,[e.id]:n}},r),this}setStyleForSelectedShapes(e,n){const r=this.getSelectedShapes();if(r.length>0){const o=[],i=s=>{if(this.isShapeOfType(s,"group")){const a=this.getSortedChildIdsForParent(s.id);for(const l of a)i(this.getShape(l))}else{const a=this.getShapeUtil(s),l=this.styleProps[s.type].get(e);if(l){const c={id:s.id,type:s.type,props:{[l]:n}};o.push({util:a,originalShape:s,updatePartial:c})}}};for(const s of r)i(s);this.updateShapes(o.map(({updatePartial:s})=>s))}return this}registerExternalAssetHandler(e,n){return this.externalAssetContentHandlers[e]=n,this}createTemporaryAssetPreview(e,n){if(this.temporaryAssetPreview.has(e))return this.temporaryAssetPreview.get(e);const r=URL.createObjectURL(n);return this.temporaryAssetPreview.set(e,r),setTimeout(()=>{this.temporaryAssetPreview.delete(e),URL.revokeObjectURL(r)},this.options.temporaryAssetPreviewLifetimeMs),r}getTemporaryAssetPreview(e){return this.temporaryAssetPreview.get(e)}async getAssetForExternalContent(e){var n,r;return await((r=(n=this.externalAssetContentHandlers)[e.type])==null?void 0:r.call(n,e))}hasExternalAssetHandler(e){return!!this.externalAssetContentHandlers[e]}registerExternalContentHandler(e,n){return this.externalContentHandlers[e]=n,this}async putExternalContent(e){var n,r;return(r=(n=this.externalContentHandlers)[e.type])==null?void 0:r.call(n,e)}getContentFromCurrentPage(e){const n=typeof e[0]=="string"?e:e.map(o=>o.id);if(!n||n.length===0)return;const r=this.getShapeAndDescendantIds(n);return cZ(this,r,o=>{const i=[];for(const u of o){const d=this.getBinding(u);d&&i.push(d)}const s=[],a=[];for(const u of r){const d=this.getShape(u);if(!d)continue;if(!r.has(d.parentId)){const h=this.getShapePageTransform(d.id),g=h.point();a.push({...d,x:g.x,y:g.y,rotation:h.rotation(),parentId:this.getCurrentPageId()}),s.push(d.id)}else a.push(d)}const l=[],c=new Set;for(const u of a){if(!("assetId"in u.props))continue;const d=u.props.assetId;if(!d||c.has(d))continue;c.add(d);const f=this.getAsset(d);f&&l.push(f)}return{schema:this.store.schema.serialize(),shapes:a,rootShapeIds:s,bindings:i,assets:l}})}async resolveAssetsInContent(e){if(!e)return;const n=[];return await Promise.allSettled(e.assets.map(async r=>{var o,i,s;if((r.type==="image"||r.type==="video")&&!((o=r.props.src)!=null&&o.startsWith("data:image"))&&!((i=r.props.src)!=null&&i.startsWith("data:video"))&&!((s=r.props.src)!=null&&s.startsWith("http"))){const a=to(r),l=await this.store.props.assets.resolve(r,{screenScale:1,steppedScreenScale:1,dpr:1,networkEffectiveType:null,shouldResolveToOriginal:!0});a.props.src=await Fs.blobToDataUrl(await _c(l).then(c=>c.blob())),n.push(a)}else n.push(r)})),e.assets=n,e}putContentOntoCurrentPage(e,n={}){var A,j,N;if(this.getIsReadonly())return this;if(!e.schema)throw Error(`Could not put content:
content is missing a schema.`);const{select:r=!1,preserveIds:o=!1,preservePosition:i=!1}=n;let{point:s=void 0}=n;const a=this.getCurrentPageId(),{rootShapeIds:l}=e,c=[],u=[],d=[],f={store:{...Object.fromEntries(e.assets.map(k=>[k.id,k])),...Object.fromEntries(e.shapes.map(k=>[k.id,k])),...Object.fromEntries(((A=e.bindings)==null?void 0:A.map(k=>[k.id,k]))??[])},schema:e.schema},h=this.store.schema.migrateStoreSnapshot(f);if(h.type==="error")throw Error("Could not put content: could not migrate content");for(const k of Object.values(h.value))switch(k.typeName){case"asset":{c.push(k);break}case"shape":{u.push(k);break}case"binding":{d.push(k);break}}const g=new Map(o?u.map(k=>[k.id,k.id]):u.map(k=>[k.id,Ar()])),y=new Map(o?d.map(k=>[k.id,k.id]):d.map(k=>[k.id,Ip()]));let m=this.getCurrentPageId(),S=1/0,x=[];for(const k of this.getSelectedShapes()){if(S===0)break;const D=this.isShapeOfType(k,"frame"),F=this.getShapeAncestors(k);D&&F.push(k);const H=D?F.length+1:F.length;if(H<S)S=H,x=F,m=D?k.id:k.parentId;else if(H===S){if(x.length!==F.length)throw Error(`Ancestors: ${x.length} !== ${F.length}`);if(x.length===0){m=a;break}else{m=a;for(let U=0;U<x.length&&F[U]===x[U];U++)m=F[U].id}}}let C=!1;if(!rs(m)){const k=this.getShape(m);if(k){if(!this.getViewportPageBounds().includes(this.getShapePageBounds(k)))m=a;else if(l.length===1){const D=u.find(F=>F.id===l[0]);this.isShapeOfType(k,"frame")&&this.isShapeOfType(D,"frame")&&D.props.w===(k==null?void 0:k.props.w)&&D.props.h===(k==null?void 0:k.props.h)&&(C=!0)}}else m=a}C||(C=g.has(m)),C&&(m=this.getShape(m).parentId);let E=this.getHighestIndexForParent(m);const P=[],I=u.map(k=>{const D=g.get(k.id),F={...k,id:D};return l.includes(k.id)&&(F.parentId=a,P.push(F)),g.has(F.parentId)?F.parentId=g.get(k.parentId):(l.push(F.id),F.index=E,E=cu(E)),F});if(I.length+this.getCurrentPageShapeIds().size>this.options.maxShapesPerPage)return cE(this),this;const T=d.map(k=>({...k,id:Ds(y.get(k.id)),fromId:Ds(g.get(k.fromId)),toId:Ds(g.get(k.toId))})),M=[],R=[];for(const k of c)this.store.has(k.id)||((k.type==="image"&&((j=k.props.src)!=null&&j.startsWith("data:image"))||k.type==="video"&&((N=k.props.src)!=null&&N.startsWith("data:video")))&&(R.push(to(k)),k.props.src=null),M.push(k));return Promise.allSettled(R.map(async k=>{const D=await SGe(k.props.src,k.props.name,k.props.mimeType??"image/png"),F=await this.getAssetForExternalContent({type:"file",file:D,assetId:k.id});if(!F){this.deleteAssets([k.id]);return}this.updateAssets([{...F,id:k.id}])})),this.run(()=>{M.length>0&&this.createAssets(M),this.createShapes(I),this.createBindings(T),r&&this.select(...P.map(U=>U.id)),m!==a&&this.reparentShapes(P.map(U=>U.id),m);const k=I.map(U=>this.getShape(U.id)),D=rt.Common(k.map(U=>this.getShapePageBounds(U)));if(s===void 0)if(rs(m)){const U=this.getViewportPageBounds();i||U.includes(rt.From(D))?s=D.center:s=U.center}else{const U=this.getShape(m);s=Ke.applyToPoint(this.getShapePageTransform(U),this.getShapeGeometry(U).bounds.center)}if(P.length===1){const U=P[0];if(this.isShapeOfType(U,"frame"))for(;this.getShapesAtPoint(s).some(B=>this.isShapeOfType(B,"frame")&&B.props.w===U.props.w&&B.props.h===U.props.h);)s.x+=D.w+16}const F=rt.Common(Tn(P.map(({id:U})=>this.getShapePageBounds(U)))).center,H=$.Sub(s,F);this.updateShapes(P.map(({id:U})=>{const B=this.getShape(U),W=this.getShapeParentTransform(U).decompose().rotation,K=$.Rot(H,-W);return{id:B.id,type:B.type,x:B.x+K.x,y:B.y+K.y}}))}),this}async getSvgElement(e,n={}){const r=e.length===0?this.getCurrentPageShapeIdsSorted():typeof e[0]=="string"?e:e.map(o=>o.id);if(r.length!==0)return dGe(this,r,n)}async getSvgString(e,n={}){const r=await this.getSvgElement(e,n);return r?{svg:new XMLSerializer().serializeToString(r.svg),width:r.width,height:r.height}:void 0}async getSvg(e,n={}){const r=await this.getSvgElement(e,n);if(r)return r.svg}async toImage(e,n={}){const r={format:"png",scale:1,pixelRatio:n.format==="svg"?void 0:2,...n},o=await this.getSvgString(e,r);if(!o)throw new Error("Could not create SVG");switch(r.format){case"svg":return{blob:new Blob([o.svg],{type:"image/svg+xml"}),width:o.width,height:o.height};case"jpeg":case"png":case"webp":{const i=await vGe(o.svg,{type:r.format,quality:r.quality,pixelRatio:r.pixelRatio,width:o.width,height:o.height});if(!i)throw new Error("Could not construct image.");return{blob:i,width:o.width,height:o.height}}default:Jn(r.format)}}_updateInputsFromEvent(e){const{pointerVelocity:n,previousScreenPoint:r,previousPagePoint:o,currentScreenPoint:i,currentPagePoint:s}=this.inputs,{screenBounds:a}=this.store.unsafeGetWithoutCapture(js),{x:l,y:c,z:u}=jb(()=>this.getCamera()),d=e.point.x-a.x,f=e.point.y-a.y,h=e.point.z??.5;r.setTo(i),o.setTo(s),i.set(d,f);const g=d/u-l,y=f/u-c;isFinite(g)&&isFinite(y)&&s.set(g,y,h),this.inputs.isPen=e.type==="pointer"&&e.isPen,(e.name==="pointer_down"||this.inputs.isPinching)&&(n.set(0,0),this.inputs.originScreenPoint.setTo(i),this.inputs.originPagePoint.setTo(s)),this.run(()=>{var m;this.store.put([{id:fI,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:e.type==="pointer"&&e.pointerId===_Q.CAMERA_MOVE?((m=this.store.unsafeGetWithoutCapture(fI))==null?void 0:m.lastActivityTimestamp)??this._tickManager.now:this._tickManager.now,meta:{}}])},{history:"ignore"})}cancel(){return this.dispatch({type:"misc",name:"cancel"}),this}interrupt(){return this.dispatch({type:"misc",name:"interrupt"}),this}complete(){return this.dispatch({type:"misc",name:"complete"}),this}focus({focusContainer:e=!0}={}){return this.getIsFocused()?this:(e&&this.focusManager.focus(),this.updateInstanceState({isFocused:!0}),this)}blur({blurContainer:e=!0}={}){return this.getIsFocused()?(e?this.focusManager.blur():this.complete(),this.updateInstanceState({isFocused:!1}),this):this}getIsFocused(){return this.getInstanceState().isFocused}getIsReadonly(){return this.getInstanceState().isReadonly}getSnapshot(){return xKe(this.store)}loadSnapshot(e,n){return xue(this.store,e,n),this}_zoomToFitPageContentAt100Percent(){const e=this.getCurrentPageBounds();e&&this.zoomToBounds(e,{immediate:!0,targetZoom:this.getBaseZoom()})}_navigateToDeepLink(e){this.run(()=>{switch(e.type){case"page":{const n=this.getPage(e.pageId);n&&this.setCurrentPage(n),this._zoomToFitPageContentAt100Percent();return}case"shapes":{const n=Tn(e.shapeIds.map(s=>this.getShape(s))),r={};for(const s of n){const a=this.getAncestorPageId(s);a&&(r[a]??(r[a]=[]),r[a].push(s))}const[o,i]=Object.entries(r).sort(([s,a],[l,c])=>c.length-a.length)[0]??["",[]];if(!o||!i.length)this._zoomToFitPageContentAt100Percent();else{this.setCurrentPage(o);const s=rt.Common(i.map(a=>this.getShapePageBounds(a)));this.zoomToBounds(s,{immediate:!0,targetZoom:this.getBaseZoom()})}return}case"viewport":{if(e.pageId){if(!this.getPage(e.pageId)){this._zoomToFitPageContentAt100Percent();return}this.setCurrentPage(e.pageId)}this.zoomToBounds(e.bounds,{immediate:!0,inset:0});return}default:Jn(e)}})}navigateToDeepLink(e){if(e&&"type"in e)return this._navigateToDeepLink(e),this;const r=new URL((e==null?void 0:e.url)??window.location.href).searchParams.get((e==null?void 0:e.param)??"d");if(!r)return this._zoomToFitPageContentAt100Percent(),this;try{this._navigateToDeepLink(CGe(r))}catch(o){console.warn(o),this._zoomToFitPageContentAt100Percent()}return this}createDeepLink(e){const n=new URL((e==null?void 0:e.url)??window.location.href);return n.searchParams.set((e==null?void 0:e.param)??"d",wGe((e==null?void 0:e.to)??{type:"viewport",pageId:this.options.maxPages===1?void 0:this.getCurrentPageId(),bounds:this.getViewportPageBounds()})),n}registerDeepLinkListener(e){if(e!=null&&e.getUrl&&!(e!=null&&e.onChange))throw Error("[tldraw:urlStateSync] If you specify getUrl, you must also specify the onChange callback.");const n=He("url with state",()=>{var l,c;const s=((l=e==null?void 0:e.getUrl)==null?void 0:l.call(e,this))??window.location.href;return this.createDeepLink({param:e==null?void 0:e.param,url:s,to:(c=e==null?void 0:e.getTarget)==null?void 0:c.call(e,this)}).toString()}),r=(e==null?void 0:e.onChange)??(()=>{var a;const s=this.createDeepLink({param:e==null?void 0:e.param,to:(a=e==null?void 0:e.getTarget)==null?void 0:a.call(e,this)});window.history.replaceState({},document.title,s.toString())}),o=MM(s=>s(),(e==null?void 0:e.debounceMs)??500),i=Al("update url on state change",()=>r(new URL(n.get()),this),{scheduleEffect:o});return()=>{i(),o.cancel()}}cancelDoubleClick(){this._clickManager.cancelDoubleClickTimeout()}_setShiftKeyTimeout(){this.inputs.shiftKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Ui(this.inputs),code:"ShiftLeft"})}_setAltKeyTimeout(){this.inputs.altKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Ui(this.inputs),code:"AltLeft"})}_setCtrlKeyTimeout(){this.inputs.ctrlKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Ui(this.inputs),code:"ControlLeft"})}_setMetaKeyTimeout(){this.inputs.metaKey=!1,this.dispatch({type:"keyboard",name:"key_up",key:"Meta",shiftKey:this.inputs.shiftKey,ctrlKey:this.inputs.ctrlKey,altKey:this.inputs.altKey,metaKey:this.inputs.metaKey,accelKey:Ui(this.inputs),code:"MetaLeft"})}dispatch(e){return this._pendingEventsForNextTick.push(e),e.type==="pointer"&&e.name==="pointer_move"||e.type==="wheel"||e.type==="pinch"||this._flushEventsForTick(0),this}_flushEventsForTick(e){this.run(()=>{if(this._pendingEventsForNextTick.length>0){const n=[...this._pendingEventsForNextTick];this._pendingEventsForNextTick.length=0;for(const r of n)this._flushEventForTick(r)}e>0&&this.root.handleEvent({type:"misc",name:"tick",elapsed:e}),this.scribbles.tick(e)})}_flushEventForTick(e){if(this.getCrashingError())return this;this.emit("before-event",e);const{inputs:n}=this,{type:r}=e;if(e.type==="misc"){(e.name==="cancel"||e.name==="complete")&&(this.inputs.isDragging=!1,this.inputs.isPanning&&(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0}))),this.root.handleEvent(e);return}e.shiftKey?(clearTimeout(this._shiftKeyTimeout),this._shiftKeyTimeout=-1,n.shiftKey=!0):!e.shiftKey&&n.shiftKey&&this._shiftKeyTimeout===-1&&(this._shiftKeyTimeout=this.timers.setTimeout(this._setShiftKeyTimeout,150)),e.altKey?(clearTimeout(this._altKeyTimeout),this._altKeyTimeout=-1,n.altKey=!0):!e.altKey&&n.altKey&&this._altKeyTimeout===-1&&(this._altKeyTimeout=this.timers.setTimeout(this._setAltKeyTimeout,150)),e.ctrlKey?(clearTimeout(this._ctrlKeyTimeout),this._ctrlKeyTimeout=-1,n.ctrlKey=!0):!e.ctrlKey&&n.ctrlKey&&this._ctrlKeyTimeout===-1&&(this._ctrlKeyTimeout=this.timers.setTimeout(this._setCtrlKeyTimeout,150)),e.metaKey?(clearTimeout(this._metaKeyTimeout),this._metaKeyTimeout=-1,n.metaKey=!0):!e.metaKey&&n.metaKey&&this._metaKeyTimeout===-1&&(this._metaKeyTimeout=this.timers.setTimeout(this._setMetaKeyTimeout,150));const{originPagePoint:o,currentPagePoint:i}=n;n.isPointing||(n.isDragging=!1);const s=this.store.unsafeGetWithoutCapture(js),a=this.store.get(this._getCurrentPageStateId()),l=this._cameraOptions.__unsafe__getWithoutCapture();switch(r){case"pinch":{if(l.isLocked)return;switch(clearTimeout(this._longPressTimeout),this._updateInputsFromEvent(e),e.name){case"pinch_start":{if(n.isPinching)return;n.isEditing||(this._pinchStart=this.getCamera().z,this._selectedShapeIdsAtPointerDown.length||(this._selectedShapeIdsAtPointerDown=[...a.selectedShapeIds]),this._didPinch=!0,n.isPinching=!0,this.interrupt());return}case"pinch":{if(!n.isPinching)return;const{point:{z:c=1},delta:{x:u,y:d}}=e,{x:f,y:h}=$.SubXY(e.point,s.screenBounds.x,s.screenBounds.y);this.stopCameraAnimation(),s.followingUserId&&this.stopFollowingUser();const{x:g,y,z:m}=jb(()=>this.getCamera()),{panSpeed:S}=l;this._setCamera(new $(g+u*S/m-f/m+f/c,y+d*S/m-h/m+h/c,c),{immediate:!0});return}case"pinch_end":{if(!n.isPinching)return this;n.isPinching=!1;const{_selectedShapeIdsAtPointerDown:c}=this;this.setSelectedShapes(this._selectedShapeIdsAtPointerDown),this._selectedShapeIdsAtPointerDown=[],this._didPinch&&(this._didPinch=!1,c.length>0&&this.once("tick",()=>{this._didPinch||this.setSelectedShapes(c)}));return}}}case"wheel":{if(l.isLocked)return;this._updateInputsFromEvent(e);const{panSpeed:c,zoomSpeed:u,wheelBehavior:d}=l;if(d!=="none"){this.stopCameraAnimation(),s.followingUserId&&this.stopFollowingUser();const{x:f,y:h,z:g}=jb(()=>this.getCamera()),{x:y,y:m,z:S=0}=e.delta;let x=d;switch(e.ctrlKey&&(x=d==="pan"?"zoom":"pan"),x){case"zoom":{const{x:C,y:E}=this.inputs.currentScreenPoint;let P=S;d==="zoom"&&(Math.abs(m)>10?P=10*Math.sign(m)/100:P=m/100);const I=g+(P??0)*u*g;this._setCamera(new $(f+C/I-C/g,h+E/I-E/g,I),{immediate:!0}),this.maybeTrackPerformance("Zooming");return}case"pan":{this._setCamera(new $(f+y*c/g,h+m*c/g,g),{immediate:!0}),this.maybeTrackPerformance("Panning");return}}}break}case"pointer":{if(n.isPinching)return;this._updateInputsFromEvent(e);const{isPen:c}=e,{isPenMode:u}=s;switch(e.name){case"pointer_down":{if(u&&!c)return;if(this.inputs.isPanning||(this._longPressTimeout=this.timers.setTimeout(()=>{const d=this.getViewportScreenBounds();this.dispatch({...e,point:this.inputs.originScreenPoint.clone().addXY(d.x,d.y),name:"long_press"})},this.options.longPressDurationMs)),this._selectedShapeIdsAtPointerDown=this.getSelectedShapeIds(),e.button===IQ&&(this.capturedPointerId=e.pointerId),n.buttons.add(e.button),n.isPointing=!0,n.isDragging=!1,!u&&c&&this.updateInstanceState({isPenMode:!0}),e.button===TQ?(this._restoreToolId=this.getCurrentToolId(),this.complete(),this.setCurrentTool("eraser")):e.button===oE&&(this.inputs.isPanning||(this._prevCursor=this.getInstanceState().cursor.type),this.inputs.isPanning=!0,clearTimeout(this._longPressTimeout)),this.inputs.isPanning)return this.stopCameraAnimation(),this.setCursor({type:"grabbing",rotation:0}),this;break}case"pointer_move":{if(!c&&u)return;const{x:d,y:f,z:h}=jb(()=>this.getCamera());if(this.inputs.isPanning&&this.inputs.isPointing){const{currentScreenPoint:g,previousScreenPoint:y}=this.inputs,m=$.Sub(g,y);this.setCamera(new $(d+m.x/h,f+m.y/h,h),{immediate:!0}),this.maybeTrackPerformance("Panning");return}n.isPointing&&!n.isDragging&&$.Dist2(o,i)*this.getZoomLevel()>(s.isCoarsePointer?this.options.coarseDragDistanceSquared:this.options.dragDistanceSquared)/h&&(n.isDragging=!0,clearTimeout(this._longPressTimeout));break}case"pointer_up":{if(n.isDragging=!1,n.isPointing=!1,clearTimeout(this._longPressTimeout),n.buttons.delete(e.button),s.isPenMode&&!c)return;if(this.capturedPointerId===e.pointerId&&(this.capturedPointerId=null,e.button=0),n.isPanning){n.keys.has("Space")||(n.isPanning=!1,n.isSpacebarPanning=!1);const d=this.inputs.pointerVelocity,f=Math.min(2,d.len());switch(e.button){case IQ:{this.setCursor({type:"grab",rotation:0});break}case oE:this.inputs.keys.has(" ")?this.setCursor({type:"grab",rotation:0}):this.setCursor({type:this._prevCursor,rotation:0})}f>0&&this.slideCamera({speed:f,direction:d})}else e.button===TQ&&(this.complete(),this.setCurrentTool(this._restoreToolId));break}}break}case"keyboard":{switch(e.key==="ShiftRight"&&(e.key="ShiftLeft"),e.key==="AltRight"&&(e.key="AltLeft"),e.code==="ControlRight"&&(e.code="ControlLeft"),e.code==="MetaRight"&&(e.code="MetaLeft"),e.name){case"key_down":{if(n.keys.add(e.code),e.code==="Space"&&!e.ctrlKey&&(this.inputs.isPanning||(this._prevCursor=s.cursor.type),this.inputs.isPanning=!0,this.inputs.isSpacebarPanning=!0,clearTimeout(this._longPressTimeout),this.setCursor({type:this.inputs.isPointing?"grabbing":"grab",rotation:0})),this.inputs.isSpacebarPanning){let c;switch(e.code){case"ArrowUp":{c=new $(0,-1);break}case"ArrowRight":{c=new $(1,0);break}case"ArrowDown":{c=new $(0,1);break}case"ArrowLeft":{c=new $(-1,0);break}}if(c){const u=this.getViewportPageBounds(),d=u.clone().translate(c.mulV({x:u.w,y:u.h}));this._animateToViewport(d,{animation:{duration:320}})}}break}case"key_up":{n.keys.delete(e.code),e.code==="Space"&&(this.inputs.buttons.has(oE)||(this.inputs.isPanning=!1,this.inputs.isSpacebarPanning=!1,this.setCursor({type:this._prevCursor,rotation:0})));break}}break}}if(e.type==="pointer"){e.button===oE?e.name="middle_click":e.button===MB&&(e.name="right_click");const{isPenMode:c}=this.store.unsafeGetWithoutCapture(js);if(e.isPen===c){const u=this._clickManager.handlePointerEvent(e);if(e.name!==u.name){this.root.handleEvent(e),this.emit("event",e),this.root.handleEvent(u),this.emit("event",u);return}}}return this.root.handleEvent(e),this.emit("event",e),e.type==="pointer"&&e.name==="pointer_down"&&this.menus.clearOpenMenus(),this}maybeTrackPerformance(e){so.measurePerformance.get()&&(this.performanceTracker.isStarted()?clearTimeout(this.performanceTrackerTimeout):this.performanceTracker.start(e),this.performanceTrackerTimeout=this.timers.setTimeout(()=>{this.performanceTracker.stop()},50))}};Et=qXe(wF);Rt(Et,1,"getIsShapeHiddenCache",xhe,Ct);Rt(Et,1,"getCanUndo",She,Ct);Rt(Et,1,"getCanRedo",bhe,Ct);Rt(Et,1,"getPath",yhe,Ct);Rt(Et,1,"getCurrentTool",vhe,Ct);Rt(Et,1,"getCurrentToolId",mhe,Ct);Rt(Et,1,"getDocumentSettings",ghe,Ct);Rt(Et,1,"getInstanceState",phe,Ct);Rt(Et,1,"getOpenMenus",hhe,Ct);Rt(Et,1,"getIsMenuOpen",fhe,Ct);Rt(Et,1,"getPageStates",dhe,Ct);Rt(Et,1,"_getPageStatesQuery",uhe,Ct);Rt(Et,1,"getCurrentPageState",che,Ct);Rt(Et,1,"_getCurrentPageStateId",lhe,Ct);Rt(Et,1,"getSelectedShapeIds",ahe,Ct);Rt(Et,1,"getSelectedShapes",she,Ct);Rt(Et,1,"getCurrentPageShapesInReadingOrder",ihe,Ct);Rt(Et,1,"getOnlySelectedShapeId",ohe,Ct);Rt(Et,1,"getOnlySelectedShape",rhe,Ct);Rt(Et,1,"getSelectionPageBounds",nhe,Ct);Rt(Et,1,"getSelectionRotation",the,Ct);Rt(Et,1,"getSelectionRotatedPageBounds",ehe,Ct);Rt(Et,1,"getSelectionRotatedScreenBounds",Jfe,Ct);Rt(Et,1,"getFocusedGroupId",Zfe,Ct);Rt(Et,1,"getFocusedGroup",Qfe,Ct);Rt(Et,1,"getEditingShapeId",Yfe,Ct);Rt(Et,1,"getEditingShape",Xfe,Ct);Rt(Et,1,"getRichTextEditor",Gfe,Ct);Rt(Et,1,"getHoveredShapeId",Kfe,Ct);Rt(Et,1,"getHoveredShape",qfe,Ct);Rt(Et,1,"getHintingShapeIds",Vfe,Ct);Rt(Et,1,"getHintingShape",Wfe,Ct);Rt(Et,1,"getErasingShapeIds",Ufe,Ct);Rt(Et,1,"getErasingShapes",Hfe,Ct);Rt(Et,1,"_unsafe_getCameraId",Bfe,Ct);Rt(Et,1,"getCamera",zfe,Ct);Rt(Et,1,"getViewportPageBoundsForFollowing",Ffe,Ct);Rt(Et,1,"getCameraForFollowing",Nfe,Ct);Rt(Et,1,"getZoomLevel",Lfe,Ct);Rt(Et,1,"getViewportScreenBounds",jfe,Ct);Rt(Et,1,"getViewportScreenCenter",Dfe,Ct);Rt(Et,1,"getViewportPageBounds",$fe,Ct);Rt(Et,1,"_getCollaboratorsQuery",Afe,Ct);Rt(Et,1,"getCollaborators",kfe,Ct);Rt(Et,1,"getCollaboratorsOnCurrentPage",Rfe,Ct);Rt(Et,1,"getRenderingShapes",Ofe,Ct);Rt(Et,1,"_getAllPagesQuery",Mfe,Ct);Rt(Et,1,"getPages",Tfe,Ct);Rt(Et,1,"getCurrentPageId",Ife,Ct);Rt(Et,1,"getCurrentPageShapeIdsSorted",_fe,Ct);Rt(Et,1,"_getAllAssetsQuery",Pfe,Ct);Rt(Et,1,"_getShapeHandlesCache",Efe,Ct);Rt(Et,1,"_getShapePageTransformCache",Cfe,Ct);Rt(Et,1,"_getShapePageBoundsCache",wfe,Ct);Rt(Et,1,"_getShapeClipPathCache",xfe,Ct);Rt(Et,1,"_getShapeMaskCache",Sfe,Ct);Rt(Et,1,"_getShapeMaskedPageBoundsCache",bfe,Ct);Rt(Et,1,"_notVisibleShapes",yfe,Ct);Rt(Et,1,"getCulledShapes",vfe,Ct);Rt(Et,1,"getCurrentPageBounds",mfe,Ct);Rt(Et,1,"getCurrentPageShapes",gfe,Ct);Rt(Et,1,"getCurrentPageShapesSorted",pfe,Ct);Rt(Et,1,"getCurrentPageRenderingShapesSorted",hfe,Ct);Rt(Et,1,"_getBindingsIndexCache",ffe,Ct);Rt(Et,1,"_getSelectionSharedStyles",dfe,Ct);Rt(Et,1,"getSharedStyles",ufe,Ct);Rt(Et,1,"getSharedOpacity",cfe,Ct);Rt(Et,1,"getIsFocused",lfe,Ct);Rt(Et,1,"getIsReadonly",afe,Ct);Rt(Et,1,"_setShiftKeyTimeout",sfe,Ct);Rt(Et,1,"_setAltKeyTimeout",ife,Ct);Rt(Et,1,"_setCtrlKeyTimeout",ofe,Ct);Rt(Et,1,"_setMetaKeyTimeout",rfe,Ct);GXe(Et,Ct);function cE(t,e=t.getCurrentPageId()){const n=t.getPage(e).name;t.emit("max-shapes",{name:n,pageId:e,count:t.options.maxShapesPerPage})}function Jc(t,e){if(!e)return t;let n=null;const r=Object.entries(e);for(let o=0,i=r.length;o<i;o++){const[s,a]=r[o];if(a!==void 0&&!(s==="id"||s==="type"||s==="typeName")&&a!==t[s]){if(n||(n={...t}),s==="props"||s==="meta"){n[s]={...t[s]};for(const[l,c]of Object.entries(a))n[s][l]=c;continue}n[s]=a}}return n||t}function whe(t,e,n){const r=t.getShape(e);if(!r)return;n.push(r);const o=t.getSortedChildIdsForParent(e);for(let i=0,s=o.length;i<s;i++)whe(t,o[i],n)}function cZ(t,e,n){let r;if(t.run(()=>{const o=t.store.extractingChanges(()=>{const i=new Set,s=new Set;for(const a of e)if(t.getShape(a))for(const c of t.getBindingsInvolvingShape(a)){const u=e.has(c.fromId),d=e.has(c.toId);if(u&&d){i.add(c.id);continue}(!u||!d)&&s.add(c.id)}t.deleteBindings([...s],{isolateShapes:!0});try{r=Hf.ok(n(i))}catch(a){r=Hf.err(a)}});t.store.applyDiff(aF(o),{runCallbacks:!1})},{history:"ignore"}),r.ok)return r.value;throw r.error}function uZ(t,e){if(!e.constraints)throw Error("Should have constraints here");const{padding:{x:n,y:r}}=e.constraints,o=t.getViewportScreenBounds(),i=rt.From(e.constraints.bounds),s=(o.w-n*2)/i.w,a=(o.h-r*2)/i.h;return{zx:s,zy:a}}function Rw(){const t=Ee(),e=Iw();return Ie("isDarkMode",()=>(e==null?void 0:e.isDarkMode)??t.user.getIsDarkMode(),[e,t])}const dZ="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",fZ="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",uE='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function df(t,e,n,r,o,i=16,s=16){const a=(-n-e)*(cr/180),l=Math.sin(a),c=Math.cos(a),u=1*c-1*l,d=1*l+1*c;return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ${o};'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='${u}' dy='${d}' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(${e+n} 16 16)${r?" scale(-1,-1) translate(0, -32)":""}' filter='url(%23shadow)'>`+t.replaceAll('"',"'")+`</g></svg>") ${i} ${s}, pointer`}const YXe=["default","pointer","cross","move","grab","grabbing","text","zoom-in","zoom-out"],QXe={none:()=>"none","ew-resize":(t,e,n)=>df(fZ,t,0,e,n),"ns-resize":(t,e,n)=>df(fZ,t,90,e,n),"nesw-resize":(t,e,n)=>df(dZ,t,0,e,n),"nwse-resize":(t,e,n)=>df(dZ,t,90,e,n),"nwse-rotate":(t,e,n)=>df(uE,t,0,e,n),"nesw-rotate":(t,e,n)=>df(uE,t,90,e,n),"senw-rotate":(t,e,n)=>df(uE,t,180,e,n),"swne-rotate":(t,e,n)=>df(uE,t,270,e,n)};function $a(t,e=0,n="black"){return QXe[t](FWe(e),!1,n)}function ZXe(){const t=Ee(),e=Ko(),n=Rw();eh("useCursor",()=>{const{type:r,rotation:o}=t.getInstanceState().cursor;if(YXe.includes(r)){e.style.setProperty("--tl-cursor",`var(--tl-cursor-${r})`);return}e.style.setProperty("--tl-cursor",$a(r,o,n?"white":"black"))},[t,e,n])}function JXe(){const t=Ee(),e=Ko(),n=Rw(),r=Ie(so.forceSrgb);ce.useEffect(()=>{n?(e.setAttribute("data-color-mode","dark"),e.classList.remove("tl-theme__light"),e.classList.add("tl-theme__dark")):(e.setAttribute("data-color-mode","light"),e.classList.remove("tl-theme__dark"),e.classList.add("tl-theme__light")),r?e.classList.add("tl-theme__force-sRGB"):e.classList.remove("tl-theme__force-sRGB")},[t,e,r,n])}function eYe(){const[t,e]=v.useState(0);v.useEffect(()=>e(n=>n+1),[])}const tYe=t=>t.props.src,nYe={upload:async(t,e)=>({src:await Fs.blobToDataUrl(e)})};function rYe(t){return"schema"in t&&t.schema?t.schema:TWe({shapes:"shapeUtils"in t&&t.shapeUtils?hZ(Pue(t.shapeUtils)):void 0,bindings:"bindingUtils"in t&&t.bindingUtils?hZ(Cue(t.bindingUtils)):void 0,migrations:"migrations"in t?t.migrations:void 0})}function xI({initialData:t,defaultName:e="",id:n,assets:r=nYe,onMount:o,collaboration:i,...s}={}){const a=rYe(s),l=new hB({id:n,schema:a,initialData:t,props:{defaultName:e,assets:{upload:r.upload,resolve:r.resolve??tYe,remove:r.remove??(()=>Promise.resolve())},onMount:c=>{nn(c instanceof Ct),o==null||o(c)},collaboration:i}});if(s.snapshot){if(t)throw new Error("Cannot provide both initialData and snapshot");xue(l,s.snapshot,{forceOverwriteSessionState:!0})}return l}function hZ(t){return Object.fromEntries(t.map(e=>[e.type,{props:e.props,migrations:e.migrations}]))}const oYe=(t,e)=>e.some(n=>t instanceof n);let pZ,gZ;function iYe(){return pZ||(pZ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sYe(){return gZ||(gZ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Che=new WeakMap,CF=new WeakMap,Ehe=new WeakMap,ij=new WeakMap,qB=new WeakMap;function aYe(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(yd(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Che.set(n,t)}).catch(()=>{}),qB.set(e,t),e}function lYe(t){if(CF.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});CF.set(t,e)}let EF={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return CF.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ehe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cYe(t){EF=t(EF)}function uYe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sj(this),e,...n);return Ehe.set(r,e.sort?e.sort():[e]),yd(r)}:sYe().includes(t)?function(...e){return t.apply(sj(this),e),yd(Che.get(this))}:function(...e){return yd(t.apply(sj(this),e))}}function dYe(t){return typeof t=="function"?uYe(t):(t instanceof IDBTransaction&&lYe(t),oYe(t,iYe())?new Proxy(t,EF):t)}function yd(t){if(t instanceof IDBRequest)return aYe(t);if(ij.has(t))return ij.get(t);const e=dYe(t);return e!==t&&(ij.set(t,e),qB.set(e,t)),e}const sj=t=>qB.get(t);function Phe(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=yd(s);return r&&s.addEventListener("upgradeneeded",l=>{r(yd(s.result),l.oldVersion,l.newVersion,yd(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function _he(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),yd(n).then(()=>{})}const fYe=["get","getKey","getAll","getAllKeys","count"],hYe=["put","add","delete","clear"],aj=new Map;function mZ(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(aj.get(e))return aj.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=hYe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||fYe.includes(n)))return;const i=async function(s,...a){const l=this.transaction(s,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return aj.set(e,i),i}cYe(t=>({...t,get:(e,n,r)=>mZ(e,n)||t.get(e,n,r),has:(e,n)=>!!mZ(e,n)||t.has(e,n)}));const pYe="TLDRAW_DOCUMENT_v2",gYe="TLDRAW_ASSET_STORE_v1",Ihe="TLDRAW_DB_NAME_INDEX_v2",Vn={Records:"records",Schema:"schema",SessionState:"session_state",Assets:"assets"};async function The(t){const e=pYe+t;return vYe(e),await Phe(e,4,{upgrade(n){n.objectStoreNames.contains(Vn.Records)||n.createObjectStore(Vn.Records),n.objectStoreNames.contains(Vn.Schema)||n.createObjectStore(Vn.Schema),n.objectStoreNames.contains(Vn.SessionState)||n.createObjectStore(Vn.SessionState),n.objectStoreNames.contains(Vn.Assets)||n.createObjectStore(Vn.Assets)}})}async function mYe(t){const e=window.indexedDB.databases?(await window.indexedDB.databases()).map(f=>f.name):KB(),n=gYe+t;if(!e.find(f=>f===n))return;const o=await Phe(n,1,{upgrade(f){f.objectStoreNames.contains("assets")||f.createObjectStore("assets")}});if(!o.objectStoreNames.contains("assets"))return;const i=o.transaction(["assets"],"readonly"),s=i.objectStore("assets"),a=await s.getAllKeys(),l=await Promise.all(a.map(async f=>[f,await s.get(f)]));await i.done;const c=await The(t),u=c.transaction([Vn.Assets],"readwrite"),d=u.objectStore(Vn.Assets);for(const[f,h]of l)d.put(h,f);await u.done,o.close(),c.close(),await _he(n)}const DS=class DS{constructor(e){V(this,"getDbPromise");V(this,"isClosed",!1);V(this,"pendingTransactionSet",new Set);DS.connectedInstances.add(this),this.getDbPromise=(async()=>(await mYe(e),await The(e)))()}getDb(){return this.getDbPromise}pending(){return Promise.allSettled([this.getDbPromise,...this.pendingTransactionSet]).then(ux)}async close(){this.isClosed||(this.isClosed=!0,await this.pending(),(await this.getDb()).close(),DS.connectedInstances.delete(this))}tx(e,n,r){const o=(async()=>{nn(!this.isClosed,"db is closed");const s=(await this.getDb()).transaction(n,e),a=s.done.catch(l=>{if(!this.isClosed)throw l});try{return await r(s)}finally{this.isClosed?s.abort():await a}})();return this.pendingTransactionSet.add(o),o.finally(()=>this.pendingTransactionSet.delete(o)),o}async load({sessionId:e}={}){return await this.tx("readonly",[Vn.Records,Vn.Schema,Vn.SessionState],async n=>{var l,c;const r=n.objectStore(Vn.Records),o=n.objectStore(Vn.Schema),i=n.objectStore(Vn.SessionState);let s=e?(l=await i.get(e))==null?void 0:l.snapshot:null;return s||(s=(c=(await i.getAll()).sort((d,f)=>d.updatedAt-f.updatedAt).pop())==null?void 0:c.snapshot),{records:await r.getAll(),schema:await o.get(Vn.Schema),sessionStateSnapshot:s}})}async storeChanges({schema:e,changes:n,sessionId:r,sessionStateSnapshot:o}){await this.tx("readwrite",[Vn.Records,Vn.Schema,Vn.SessionState],async i=>{const s=i.objectStore(Vn.Records),a=i.objectStore(Vn.Schema),l=i.objectStore(Vn.SessionState);for(const[c,u]of Object.entries(n.added))await s.put(u,c);for(const[c,u]of Object.values(n.updated))await s.put(u,u.id);for(const c of Object.keys(n.removed))await s.delete(c);a.put(e.serialize(),Vn.Schema),o&&r?l.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together")})}async storeSnapshot({schema:e,snapshot:n,sessionId:r,sessionStateSnapshot:o}){await this.tx("readwrite",[Vn.Records,Vn.Schema,Vn.SessionState],async i=>{const s=i.objectStore(Vn.Records),a=i.objectStore(Vn.Schema),l=i.objectStore(Vn.SessionState);await s.clear();for(const[c,u]of Object.entries(n))await s.put(u,c);a.put(e.serialize(),Vn.Schema),o&&r?l.put({snapshot:o,updatedAt:Date.now(),id:r},r):(o||r)&&console.error("sessionStateSnapshot and instanceId must be provided together")})}async pruneSessions(){await this.tx("readwrite",[Vn.SessionState],async e=>{const n=e.objectStore(Vn.SessionState),r=(await n.getAll()).sort((i,s)=>i.updatedAt-s.updatedAt);if(r.length<10){await e.done;return}const o=r.slice(0,r.length-10);for(const{id:i}of o)await n.delete(i)})}async getAsset(e){return await this.tx("readonly",[Vn.Assets],async n=>await n.objectStore(Vn.Assets).get(e))}async storeAsset(e,n){await this.tx("readwrite",[Vn.Assets],async r=>{await r.objectStore(Vn.Assets).put(n,e)})}async removeAssets(e){await this.tx("readwrite",[Vn.Assets],async n=>{const r=n.objectStore(Vn.Assets);for(const o of e)await r.delete(o)})}};V(DS,"connectedInstances",new Set);let wI=DS;function KB(){const t=JSON.parse(H5(Ihe)||"[]")??[];return Array.isArray(t)?t:[]}function vYe(t){const e=new Set(KB());e.add(t),U5(Ihe,JSON.stringify([...e]))}function yYe(){window.alert(`Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.
 If your hard disk is full, try clearing up some space and then reload the page.`)}function bYe(){window.alert(`Oops! We could not access your browser's storageand the app won't work correctly without that. We now need to reload the page and try again.

Keep seeing this message?
 If you're using tldraw in a private or "incognito" window, try loading tldraw in a regular window or in a different browser.`)}const SYe=350,xYe=1e4,vZ=Symbol("UPDATE_INSTANCE_STATE"),wYe=t=>t;class CYe{constructor(e){V(this,"onmessage")}postMessage(e){}close(){}}const EYe=typeof BroadcastChannel>"u"?CYe:BroadcastChannel;class PYe{constructor(e,{persistenceKey:n,sessionId:r=bI,onLoad:o,onLoadError:i},s=new EYe(`tldraw-tab-sync-${n}`)){V(this,"disposables",new Set);V(this,"diffQueue",[]);V(this,"didDispose",!1);V(this,"shouldDoFullDBWrite",!0);V(this,"isReloading",!1);V(this,"persistenceKey");V(this,"sessionId");V(this,"serializedSchema");V(this,"isDebugging",!1);V(this,"documentTypes");V(this,"$sessionStateSnapshot");V(this,"db");V(this,"initTime",Date.now());V(this,"isPersisting",!1);V(this,"didLastWriteError",!1);V(this,"scheduledPersistTimeout",null);this.store=e,this.channel=s,typeof window<"u"&&(window.tlsync=this),this.persistenceKey=n,this.sessionId=r,this.db=new wI(n),this.disposables.add(()=>this.db.close()),this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=LB(this.store),this.disposables.add(e.listen(({changes:a})=>{this.diffQueue.push(a),this.channel.postMessage(wYe({type:"diff",storeId:this.store.id,changes:a,schema:this.serializedSchema})),this.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(e.listen(()=>{this.diffQueue.push(vZ),this.schedulePersist()},{scope:"session"})),this.connect(o,i),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(a=>a.scope==="document").map(a=>a.typeName))}debug(...e){this.isDebugging&&console.debug(...e)}async connect(e,n){this.debug("connecting");let r;try{r=await this.db.load({sessionId:this.sessionId})}catch(o){n(o),bYe();return}if(this.debug("loaded data from store",r,"didDispose",this.didDispose),!this.didDispose)try{if(r){const o=Object.fromEntries(r.records.map(l=>[l.id,l])),i=r.sessionStateSnapshot??SKe(o),s=this.store.schema.migrateStoreSnapshot({store:o,schema:r.schema??this.store.schema.serializeEarliestVersion()});if(s.type==="error"){console.error("failed to migrate store",s),n(new Error(`Failed to migrate store: ${s.reason}`));return}const a=Object.values(s.value).filter(l=>this.documentTypes.has(l.typeName));a.length>0&&this.store.mergeRemoteChanges(()=>{this.store.put(a,"initialize")}),i&&vF(this.store,i,{forceOverwrite:!0})}this.channel.onmessage=({data:o})=>{var a,l;this.debug("got message",o);const i=o,s=this.store.schema.getMigrationsSince(i.schema);if(s.ok){if(s.value.length>0){this.debug("telling them to reload"),this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.shouldDoFullDBWrite=!0,this.persistIfNeeded();return}}else{if(Date.now()-this.initTime<5e3){n(new Error("Schema mismatch, please close other tabs and reload the page"));return}this.debug("reloading"),this.isReloading=!0,(l=(a=window==null?void 0:window.location)==null?void 0:a.reload)==null||l.call(a);return}i.type==="diff"&&(this.debug("applying diff"),Wa(()=>{this.store.mergeRemoteChanges(()=>{this.store.applyDiff(i.changes)})}))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(()=>{this.channel.close()}),e(this)}catch(o){if(this.debug("error loading data from store",o),this.didDispose)return;n(o);return}}close(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(e=>e())}schedulePersist(){this.debug("schedulePersist",this.scheduledPersistTimeout),!this.scheduledPersistTimeout&&(this.scheduledPersistTimeout=setTimeout(()=>{this.scheduledPersistTimeout=null,this.persistIfNeeded()},this.didLastWriteError?xYe:SYe))}persistIfNeeded(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),!this.isPersisting&&(this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||this.diffQueue.length>0)&&this.doPersist())}async doPersist(){if(nn(!this.isPersisting,"persist already in progress"),this.didDispose)return;this.isPersisting=!0,this.debug("doPersist start");const e=this.diffQueue;this.diffQueue=[];try{if(this.shouldDoFullDBWrite)this.shouldDoFullDBWrite=!1,await this.db.storeSnapshot({schema:this.store.schema,snapshot:this.store.serialize(),sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()});else{const n=fB(e.filter(r=>r!==vZ));await this.db.storeChanges({changes:n,schema:this.store.schema,sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.get()})}this.didLastWriteError=!1}catch(n){this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",n),yYe(),typeof window<"u"&&window.location.reload()}this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist()}}function Mhe(t){const e=v.useRef(t),[n,r]=v.useState(t);n!==e.current&&r(e.current);const o=v.useCallback(i=>{typeof i=="function"?e.current=i(e.current):e.current=i,r(e.current)},[]);return[n,o]}function _Ye(t){const[e,n]=Mhe({status:"loading"});return t=ry(t),v.useEffect(()=>{const{persistenceKey:r,sessionId:o,...i}=t;if(!r){n({status:"not-synced",store:xI(i)});return}n({status:"loading"});const s=new Hl,a={upload:async(d,f)=>(await u.db.storeAsset(d.id,f),{src:d.id}),resolve:async d=>d.props.src?d.props.src.startsWith("asset:")?await s.get(d,async()=>{const f=await u.db.getAsset(d.id);return f?URL.createObjectURL(f):null}):d.props.src:null,remove:async d=>{await u.db.removeAssets(d)},...i.assets},l=xI({...i,assets:a});let c=!1;const u=new PYe(l,{sessionId:o,persistenceKey:r,onLoad(){c||n({store:l,status:"synced-local"})},onLoadError(d){c||n({status:"error",error:d})}});return()=>{c=!0,u.close()}},[t,n]),e}function IYe(){const t=Ee(),e=Ko();v.useEffect(()=>{const n=i=>e.style.setProperty("--tl-zoom",i.toString()),r=MM(n,100),o=new bg("useZoomCss",()=>{t.getCurrentPageShapeIds().size<300?n(t.getZoomLevel()):r(t.getZoomLevel())});return o.attach(),o.execute(),()=>{o.detach(),r.cancel()}},[t,e])}function PF(t){const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0,o=t.length;r<o;r++)n[r]=t.charCodeAt(r);return e}function TYe(t){const e=atob(t),n=PF(e);return crypto.subtle.importKey("spki",new Uint8Array(n),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"])}const MYe=5,Lb={ANNUAL_LICENSE:1,PERPETUAL_LICENSE:2,INTERNAL_LICENSE:4,WITH_WATERMARK:8},OYe=Math.max(...Object.values(Lb)),Nb={ID:0,HOSTS:1,FLAGS:2,EXPIRY_DATE:3},RYe=Object.keys(Nb).length,lj="sales@tldraw.com",kYe=`${Yo()}/watermarks/watermark-track.svg`;class s2{constructor(e,n,r){V(this,"publicKey","MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEHJh0uUfxHtCGyerXmmatE368Hd9rI6LH9oPDQihnaCryRFWEVeOvf9U/SPbyxX74LFyJs5tYeAHq5Nc0Ax25LQ");V(this,"isDevelopment");V(this,"isTest");V(this,"isCryptoAvailable");V(this,"state",bo("license state","pending"));V(this,"verbose",!0);this.isTest=!1,this.isDevelopment=this.getIsDevelopment(r),this.publicKey=n||this.publicKey,this.isCryptoAvailable=!!crypto.subtle,this.getLicenseFromKey(e).then(o=>{const i=AYe(o);!this.isDevelopment&&i&&_c(kYe),i?this.state.set("unlicensed"):o.isLicensedWithWatermark?this.state.set("licensed-with-watermark"):this.state.set("licensed")})}getIsDevelopment(e){return e==="development"?!0:e==="production"?!1:!["https:","vscode-webview:"].includes(window.location.protocol)||window.location.hostname==="localhost"}async extractLicenseKey(e){const[n,r]=e.split("."),[o,i]=n.split("/");if(!o.startsWith("tldraw-"))throw new Error(`Unsupported prefix '${o}'`);const s=await TYe(this.publicKey);let a;try{a=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},s,new Uint8Array(PF(atob(r))),new Uint8Array(PF(atob(i))))}catch(c){throw console.error(c),new Error("Could not perform signature validation")}if(!a)throw new Error("Invalid signature");let l;try{l=JSON.parse(atob(i))}catch{throw new Error("Could not parse object")}return l.length>RYe&&this.outputMessages(["License key contains some unknown properties.","You may want to update tldraw packages to a newer version to get access to new functionality."]),{id:l[Nb.ID],hosts:l[Nb.HOSTS],flags:l[Nb.FLAGS],expiryDate:l[Nb.EXPIRY_DATE]}}async getLicenseFromKey(e){if(!e)return this.isDevelopment||this.outputNoLicenseKeyProvided(),{isLicenseParseable:!1,reason:"no-key-provided"};if(this.isDevelopment&&!this.isCryptoAvailable)return this.verbose&&(console.log("tldraw: you seem to be in a development environment that does not support crypto. License not verified."),console.log("You should check that this works in production separately.")),{isLicenseParseable:!1,reason:"has-key-development-mode"};let n=e.replace(/[\u200B-\u200D\uFEFF]/g,"");n=n.replace(/\r?\n|\r/g,"");try{const r=await this.extractLicenseKey(n),o=new Date(r.expiryDate),i=this.isFlagEnabled(r.flags,Lb.ANNUAL_LICENSE),s=this.isFlagEnabled(r.flags,Lb.PERPETUAL_LICENSE),a={license:r,isLicenseParseable:!0,isDevelopment:this.isDevelopment,isDomainValid:this.isDomainValid(r),expiryDate:o,isAnnualLicense:i,isAnnualLicenseExpired:i&&this.isAnnualLicenseExpired(o),isPerpetualLicense:s,isPerpetualLicenseExpired:s&&this.isPerpetualLicenseExpired(o),isInternalLicense:this.isFlagEnabled(r.flags,Lb.INTERNAL_LICENSE),isLicensedWithWatermark:this.isFlagEnabled(r.flags,Lb.WITH_WATERMARK)};return this.outputLicenseInfoIfNeeded(a),a}catch(r){return this.outputInvalidLicenseKey(r.message),{isLicenseParseable:!1,reason:"invalid-license-key"}}}isDomainValid(e){const n=window.location.hostname.toLowerCase();return e.hosts.some(r=>{const o=r.toLowerCase().trim();if(o===n||`www.${o}`===n||o===`www.${n}`||r==="*")return!0;if(r.includes("*")){const i=new RegExp(r.replace(/\*/g,".*?"));return i.test(n)||i.test(`www.${n}`)}if(window.location.protocol==="vscode-webview:"){const s=new URL(window.location.href).searchParams.get("extensionId");if(o===s)return!0}return!1})}getExpirationDateWithoutGracePeriod(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}getExpirationDateWithGracePeriod(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+MYe+1)}isAnnualLicenseExpired(e){const n=this.getExpirationDateWithGracePeriod(e),r=new Date>=n;return!r&&new Date>=this.getExpirationDateWithoutGracePeriod(e)&&this.outputMessages(["tldraw license is about to expire, you are in a grace period.",`Please reach out to ${lj} if you would like to renew your license.`]),r}isPerpetualLicenseExpired(e){const n=this.getExpirationDateWithGracePeriod(e),r={major:new Date(xQ.major),minor:new Date(xQ.minor)};return r.major>=n||r.minor>=n}isFlagEnabled(e,n){return(e&n)===n}outputNoLicenseKeyProvided(){}outputInvalidLicenseKey(e){this.outputMessages(["Invalid tldraw license key",`Reason: ${e}`])}outputLicenseInfoIfNeeded(e){e.isAnnualLicenseExpired&&this.outputMessages(["Your tldraw license has expired!",`Please reach out to ${lj} to renew.`]),!e.isDomainValid&&!e.isDevelopment&&this.outputMessages(["This tldraw license key is not valid for this domain!",`Please reach out to ${lj} if you would like to use tldraw on other domains.`]),e.license.flags>=OYe*2&&this.outputMessages(["This tldraw license contains some unknown flags.","You may want to update tldraw packages to a newer version to get access to new functionality."])}outputMessages(e){if(!this.isTest&&this.verbose){this.outputDelimiter();for(const n of e)console.log(`%c${n}`,"color: white; background: crimson; padding: 2px; border-radius: 3px;");this.outputDelimiter()}}outputDelimiter(){console.log("%c-------------------------------------------------------------------","color: white; background: crimson; padding: 2px; border-radius: 3px;")}}V(s2,"className","tl-watermark_SEE-LICENSE");function AYe(t){if(!t.isLicenseParseable||!t.isDomainValid&&!t.isDevelopment)return!0;if(t.isPerpetualLicenseExpired||t.isAnnualLicenseExpired){if(t.isInternalLicense)throw new Error("License: Internal license expired.");return!0}return!1}const Ohe=v.createContext({}),$Ye=()=>v.useContext(Ohe);function DYe({licenseKey:t,children:e}){const[n]=v.useState(()=>new s2(t));return w.jsx(Ohe.Provider,{value:n,children:e})}function Hd(t){if(!t)throw Error("usePassThroughWheelEvents must be passed a ref");const e=Ko();v.useEffect(()=>{function n(o){if(o.isSpecialRedispatchedEvent)return;const i=t.current;if(i&&i.scrollHeight>i.clientHeight)return;En(o);const s=e.querySelector(".tl-canvas");if(!s)return;const a=new WheelEvent("wheel",o);a.isSpecialRedispatchedEvent=!0,s.dispatchEvent(a)}const r=t.current;if(r)return r.addEventListener("wheel",n,{passive:!1}),()=>{r.removeEventListener("wheel",n)}},[e,t])}const jYe='<svg xmlns="http://www.w3.org/2000/svg" width="3001" height="1000" fill="none"><path fill="#000" d="M590.656 300.449c0 49.706-40.294 90-90 90-49.705 0-90-40.294-90-90 0-49.705 40.295-90 90-90 49.706 0 90 40.295 90 90M569.431 719.011c-15.247 32.821-56.006 91.589-98.338 91.438-32.004-.115-38.642-30.904-17.414-50.856 17.381-16.337 28.246-48.075 31.995-72.719.415-2.728-1.556-5.197-4.272-5.679-39.666-7.04-70.746-40.877-70.746-83.417 0-48.23 38.983-87.329 87.07-87.329 39.936 0 70.172 22.237 83.369 52.397 18.839 43.055 7.117 115.733-11.664 156.165M2613.29 385.681V239.319c0-11.363 9.22-20.569 20.59-20.569h8.26c11.37 0 20.59 9.206 20.59 20.569v36.911c0 8.629 7 15.625 15.63 15.625h35.25c8.63 0 15.63-6.996 15.63-15.625v-36.911c0-11.363 9.22-20.569 20.59-20.569h8.17c11.37 0 20.59 9.206 20.59 20.569v146.362c0 11.363-9.22 20.569-20.59 20.569h-8.17c-11.37 0-20.59-9.206-20.59-20.569v-36.999c0-8.63-7-15.625-15.63-15.625h-35.25c-8.63 0-15.63 6.995-15.63 15.625v36.999c0 11.363-9.22 20.569-20.59 20.569h-8.26c-11.37 0-20.59-9.206-20.59-20.569M2391.97 239.319v146.362c0 11.348-9.16 20.569-20.49 20.569h-8.2c-11.33 0-20.49-9.221-20.49-20.569V239.319c0-11.348 9.16-20.569 20.49-20.569h8.2c11.33 0 20.49 9.221 20.49 20.569M2098.23 391.43l-42.69-146.361c-3.85-13.171 6.06-26.319 19.79-26.319h10.6c9.59 0 17.93 6.611 20.08 15.952l17.01 73.045c1.48 6.348 10.47 6.478 12.14.176l19.47-73.838c2.38-9.04 10.57-15.335 19.93-15.335h12.1c9.37 0 17.56 6.3 19.94 15.346l19.49 74.067c1.66 6.305 10.65 6.178 12.13-.171l17.09-73.294c2.15-9.339 10.49-15.948 20.08-15.948h10.53c13.72 0 23.63 13.141 19.79 26.31l-42.63 146.361c-2.56 8.789-10.63 14.829-19.79 14.829h-15.68c-9.12 0-17.16-5.98-19.76-14.709l-21.17-71.059c-1.77-5.948-10.19-5.957-11.97-.012l-21.33 71.071c-2.6 8.729-10.64 14.709-19.76 14.709h-15.59c-9.17 0-17.23-6.035-19.8-14.82M2443.23 218.75h118.59c11.38 0 20.62 9.195 20.62 20.557s-9.24 20.556-20.62 20.556h-24.79c-5.53 0-10 4.477-10 10v115.818c0 11.368-9.25 20.569-20.63 20.569h-7.65c-11.39 0-20.63-9.201-20.63-20.569V269.863c0-5.523-4.48-10-10-10h-24.89c-11.37 0-20.61-9.195-20.61-20.556s9.24-20.557 20.61-20.557M1174.15 218.75h24.64c8.35 0 15.88 5.042 19.04 12.764l34.61 83.942c2.13 5.161 9.44 5.155 11.56-.01l34.43-83.932a20.58 20.58 0 0 1 19.04-12.764h24.64c11.37 0 20.58 9.208 20.58 20.569v146.362c0 11.361-9.21 20.569-20.58 20.569h-7.09c-11.36 0-20.58-9.208-20.58-20.569l-.12-50.645c-.01-6.888-9.53-8.688-12.06-2.283l-23.46 59.332a20.57 20.57 0 0 1-19.14 13.009h-3.03a20.57 20.57 0 0 1-19.15-13.046l-23.47-59.68c-2.52-6.416-12.05-4.623-12.06 2.271l-.13 51.042c0 11.361-9.21 20.569-20.57 20.569h-7.1c-11.36 0-20.57-9.208-20.57-20.569V239.319c0-11.361 9.21-20.569 20.57-20.569"/><path fill="#000" fill-rule="evenodd" d="m1449.94 391.836 6.12-19.392a6.255 6.255 0 0 1 5.96-4.369l50.22-.061a6.24 6.24 0 0 1 5.96 4.348l6.23 19.486c2.71 8.581 10.71 14.402 19.74 14.402h9.34c14.13 0 24.15-13.791 19.61-27.151l-49.74-146.361c-2.85-8.37-10.74-13.988-19.61-13.988h-33.16c-8.87 0-16.77 5.618-19.61 13.988l-49.74 146.361c-4.54 13.36 5.48 27.151 19.61 27.151h9.32c9.04 0 17.04-5.827 19.75-14.414m31.1-98.858c1.85-5.807 10.08-5.796 11.91.016l8.83 27.916c1.28 4.028-1.73 8.134-5.96 8.134h-17.74c-4.23 0-7.24-4.119-5.95-8.151zM1681.81 406.25c18.91 0 35.39-3.686 49.36-11.168 13.97-7.544 24.73-18.394 32.24-32.489 7.56-14.105 11.29-30.866 11.29-50.182 0-19.256-3.73-35.957-11.29-50.004-7.57-14.094-18.35-24.912-32.32-32.397-13.91-7.545-30.4-11.26-49.37-11.26h-49.5c-11.38 0-20.63 9.201-20.63 20.569v146.362c0 11.368 9.25 20.569 20.63 20.569zm23.13-47.701c-6.62 3.215-14.85 4.886-24.79 4.886-10.49 0-19-8.507-19-19v-64.34c0-10.149 8.23-18.376 18.38-18.376 10.18 0 18.56 1.703 25.23 4.974 6.59 3.149 11.63 8.315 15.08 15.633 3.45 7.269 5.28 17.268 5.28 30.162 0 12.891-1.82 22.951-5.28 30.347-3.39 7.319-8.36 12.509-14.9 15.714" clip-rule="evenodd"/><path fill="#000" d="M1804.21 385.681V239.319c0-11.361 9.21-20.569 20.58-20.569h91.28c11.36 0 20.57 9.202 20.57 20.557s-9.21 20.556-20.57 20.556h-54.64a7.807 7.807 0 0 0-7.81 7.813v16.366a7.806 7.806 0 0 0 7.81 7.812h48.13c11.37 0 20.58 9.246 20.58 20.602s-9.21 20.601-20.58 20.601h-48.13a7.806 7.806 0 0 0-7.81 7.812v16.455a7.807 7.807 0 0 0 7.81 7.813h54.64c11.36 0 20.57 9.202 20.57 20.556s-9.21 20.557-20.57 20.557h-91.28c-11.37 0-20.58-9.208-20.58-20.569"/><path fill="#000" fill-rule="evenodd" d="M2875.5 68.75h-2750c-31.066 0-56.25 25.184-56.25 56.25v750c0 31.066 25.184 56.25 56.25 56.25h2750c31.07 0 56.25-25.184 56.25-56.25V125c0-31.066-25.18-56.25-56.25-56.25M125.5 0C56.464 0 .5 55.964.5 125v750c0 69.036 55.965 125 125 125h2750c69.04 0 125-55.964 125-125V125c0-69.036-55.96-125-125-125z" clip-rule="evenodd"/><path fill="#000" d="M2476.06 804.813c-10.54 0-19.82-6.947-22.81-17.068L2390.79 575.7c-4.49-15.248 6.92-30.534 22.8-30.534h27.75c11.1 0 20.72 7.686 23.18 18.52L2489 671.402c2.07 9.093 14.93 9.321 17.32.308l28.83-108.844c2.76-10.435 12.19-17.7 22.98-17.7h25.17c10.8 0 20.25 7.293 22.99 17.755l28.27 107.739c2.36 9.001 15.18 8.829 17.3-.232l25.01-106.888c2.51-10.763 12.1-18.374 23.14-18.374h27.87c15.88 0 27.29 15.286 22.8 30.534l-62.46 212.045a23.78 23.78 0 0 1-22.81 17.068h-32.12c-10.39 0-19.58-6.763-22.69-16.696l-32.08-102.694c-2.62-8.397-14.51-8.331-17.04.095l-30.74 102.346c-3.02 10.061-12.27 16.949-22.76 16.949zM1742.44 804.813h-75.81c-13.09 0-23.71-10.656-23.71-23.801V568.967c0-13.145 10.62-23.801 23.71-23.801h74.8c26.6 0 49.59 5.198 68.95 15.594 19.45 10.312 34.44 25.187 44.96 44.627 10.61 19.355 15.91 42.556 15.91 69.602q0 40.57-15.78 69.73c-10.53 19.355-25.43 34.231-44.71 44.627-19.28 10.311-42.05 15.467-68.32 15.467m-29.3-83.642c0 13.145 10.61 23.801 23.71 23.801h3.06c12.8 0 23.7-2.07 32.71-6.212 9.09-4.141 16-11.283 20.71-21.426q7.2-15.213 7.2-42.345 0-27.13-7.32-42.344c-4.8-10.143-11.87-17.285-21.22-21.426-9.26-4.142-20.63-6.212-34.1-6.212h-1.04c-13.1 0-23.71 10.656-23.71 23.801zM1460.86 804.813c-13.12 0-23.76-10.656-23.76-23.801V568.967c0-13.145 10.64-23.801 23.76-23.801h22.84c13.13 0 23.76 10.656 23.76 23.801v155.247c0 13.145 10.64 23.801 23.76 23.801h57.27c13.12 0 23.76 10.656 23.76 23.801v9.196c0 13.145-10.64 23.801-23.76 23.801zM1204.45 601.964c-13.13 0-23.77-10.656-23.77-23.801v-9.196c0-13.145 10.64-23.801 23.77-23.801h177.89c13.13 0 23.78 10.656 23.78 23.801v9.196c0 13.145-10.65 23.801-23.78 23.801h-39.38c-8.21 0-14.86 6.66-14.86 14.875v164.173c0 13.145-10.64 23.801-23.78 23.801h-21.85c-13.13 0-23.78-10.656-23.78-23.801V616.839c0-8.215-6.65-14.875-14.86-14.875z"/><path fill="#000" fill-rule="evenodd" d="M2223.05 787.891c-3.02 10.047-12.27 16.922-22.74 16.922h-25.43c-16.19 0-27.64-15.862-22.57-31.261l69.88-212.045c3.21-9.753 12.31-16.341 22.56-16.341h61.84c10.25 0 19.35 6.588 22.56 16.341l69.87 212.045c5.08 15.399-6.37 31.261-22.56 31.261h-25.43c-10.48 0-19.72-6.875-22.74-16.922l-6.7-22.2a14.84 14.84 0 0 0-14.21-10.576h-63.42c-6.55 0-12.32 4.296-14.22 10.576zm76.13-96.945-14.13-48.436c-2.46-8.451-14.36-8.602-17.04-.217l-15.46 48.436c-1.84 5.759 2.45 11.645 8.48 11.645h29.6c5.94 0 10.22-5.715 8.55-11.428" clip-rule="evenodd"/><path fill="#000" d="M1939.6 804.813c-13.13 0-23.77-10.656-23.77-23.801V568.967c0-13.145 10.64-23.801 23.77-23.801h88.13c19.24 0 36.08 3.508 50.51 10.523s25.65 17.115 33.67 30.3q12.03 19.779 12.03 47.416c0 18.595-4.14 34.273-12.41 47.036-7.64 11.913-18.18 21.101-31.63 27.564-16.98 8.159-36 11.104-54.7 11.104h-43.07c-76.56 0 4.08-135.84 4.08-84.706v7.996c0 12.117 9.81 21.941 21.91 21.941 8.12 0 16.3-.345 24.04-3.043 5.91-2.113 10.43-5.451 13.55-10.015 3.2-4.565 4.81-10.523 4.81-17.877 0-7.437-1.61-13.481-4.81-18.129-3.12-4.733-7.64-8.199-13.55-10.396-7.05-2.766-14.67-3.423-22.18-3.423-13.13 0-23.77 10.656-23.77 23.801v47.71c0 11.825 11.14 16.003 19.91 20.752 12.31 6.671 7.58 25.389-6.42 25.389-7.45 0-13.49 6.048-13.49 13.508v48.395c0 13.145-10.63 23.801-23.76 23.801zm134.89-106.758 5.41 9.95 33.51 61.622c8.62 15.86-2.84 35.186-20.87 35.186h-22.27c-8.74 0-16.77-4.798-20.92-12.496l-35.05-65.04a15.52 15.52 0 0 0-13.66-8.168c-42.24 0 40.62-82.154 73.85-21.054M931.652 0h68.748v1000h-68.748z"/></svg>',LYe='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="1601" fill="none"><path fill="#000" d="M72 1319.8c0-10.73 7.071-20.18 17.372-23.22l215.823-63.62c15.519-4.57 31.078 7.05 31.078 23.22v28.26c0 11.31-7.824 21.1-18.85 23.61l-109.636 24.94c-9.254 2.1-9.487 15.2-.313 17.63l110.784 29.37a24.21 24.21 0 0 1 18.015 23.4v25.64c0 11-7.423 20.62-18.071 23.41l-109.659 28.79c-9.162 2.41-8.986 15.47.236 17.63l108.792 25.46c10.955 2.56 18.702 12.33 18.702 23.57v28.39c0 16.17-15.559 27.79-31.078 23.22l-215.823-63.62c-10.3-3.04-17.372-12.49-17.372-23.22v-32.72c0-10.59 6.883-19.95 16.994-23.11l104.523-32.67c8.547-2.67 8.479-14.79-.096-17.36l-104.17-31.3C79.01 1372.42 72 1363 72 1352.31zM72 572.638V495.43c0-13.336 10.846-24.147 24.225-24.147h215.823c13.379 0 24.225 10.811 24.225 24.147v76.179q0 40.645-15.872 70.228-15.743 29.712-45.422 45.79-29.55 16.206-70.843 16.206-41.292 0-70.971-16.078-29.55-16.077-45.422-45.532Q72 612.767 72 572.638m85.132-29.84c-13.379 0-24.225 10.81-24.225 24.146v3.122q0 19.55 6.323 33.313 6.323 13.89 21.807 21.094 15.485 7.332 43.099 7.331t43.1-7.46q15.484-7.33 21.807-21.608 6.323-14.15 6.323-34.728v-1.064c0-13.336-10.846-24.146-24.225-24.146zM72 285.858c0-13.363 10.846-24.197 24.225-24.197h215.823c13.379 0 24.225 10.834 24.225 24.197v23.27c0 13.364-10.846 24.197-24.225 24.197H154.035c-13.379 0-24.225 10.834-24.225 24.197v58.328c0 13.364-10.846 24.197-24.225 24.197h-9.36C82.845 440.047 72 429.214 72 415.85zM278.463 24.72c0-13.374 10.846-24.216 24.225-24.216h9.36c13.379 0 24.225 10.842 24.225 24.216v181.174c0 13.374-10.846 24.216-24.225 24.216h-9.36c-13.379 0-24.225-10.842-24.225-24.216v-40.108c0-8.359-6.779-15.135-15.141-15.135H96.225c-13.38 0-24.225-10.842-24.225-24.216v-22.256c0-13.374 10.846-24.216 24.225-24.216h167.097c8.362 0 15.141-6.776 15.141-15.135z"/><path fill="#000" fill-rule="evenodd" d="M89.224 1062.13C78.997 1059.04 72 1049.63 72 1038.96v-25.9c0-16.486 16.145-28.147 31.818-22.979l215.823 71.169a24.19 24.19 0 0 1 16.632 22.98v62.97c0 10.45-6.706 19.71-16.632 22.98l-215.823 71.17C88.145 1246.51 72 1234.86 72 1218.37v-25.9c0-10.67 6.997-20.08 17.224-23.17l22.595-6.81a15.13 15.13 0 0 0 10.765-14.48v-64.59a15.13 15.13 0 0 0-10.765-14.48zm98.672 77.53 49.299-14.39c8.601-2.51 8.755-14.62.22-17.35l-49.299-15.75c-5.861-1.88-11.852 2.49-11.852 8.64v30.14c0 6.05 5.817 10.41 11.632 8.71" clip-rule="evenodd"/><path fill="#000" d="M72 773.439c0-13.367 10.846-24.203 24.225-24.203h215.823c13.379 0 24.225 10.836 24.225 24.203v89.762q0 29.395-10.711 51.439-10.71 22.046-30.84 34.293t-48.261 12.248q-28.388 0-47.873-12.635-18.187-11.672-28.056-32.218c-8.303-17.289-11.301-36.661-11.301-55.705v-43.867c0-77.976 138.26 4.16 86.215 4.16h-8.138c-12.334 0-22.332 9.989-22.332 22.311 0 8.269.351 16.6 3.097 24.487q3.225 9.024 10.194 13.794 6.968 4.899 18.194 4.899 11.356 0 18.453-4.899 7.226-4.77 10.581-13.794c2.815-7.188 3.484-14.944 3.484-22.596 0-13.366-10.846-24.202-24.225-24.202h-48.56c-12.036 0-16.288 11.345-21.122 20.272-6.79 12.539-25.841 7.72-25.841-6.536 0-7.586-6.156-13.736-13.749-13.736H96.225C82.845 820.916 72 810.08 72 796.714zm108.66 137.378-10.128 5.511-62.72 34.131C91.67 959.243 72 947.569 72 929.205V906.52a24.2 24.2 0 0 1 12.719-21.299l66.199-35.696a15.82 15.82 0 0 0 8.313-13.921c0-43.012 83.618 41.371 21.429 75.213"/></svg>';function NYe(t){return Ie("watermarkState",()=>t.state.get(),[t])}const FYe=`data:image/svg+xml;utf8,${encodeURIComponent(jYe)}`,zYe=`data:image/svg+xml;utf8,${encodeURIComponent(LYe)}`,BYe=v.memo(function(){const e=$Ye(),n=Ee(),r=Ie("is mobile",()=>n.getViewportScreenBounds().width<700,[n]),o=NYe(e);return["licensed-with-watermark","unlicensed"].includes(o)?w.jsxs(w.Fragment,{children:[w.jsx(UYe,{}),w.jsx(HYe,{src:r?zYe:FYe})]}):null}),HYe=v.memo(function({src:e}){const n=Ee(),r=Ie("debug mode",()=>n.getInstanceState().isDebugMode,[n]),o=Ie("is mobile",()=>n.getViewportScreenBounds().width<700,[n]),i=OB(),s=v.useRef(null);Hd(s);const a=`url('${e}') center 100% / 100% no-repeat`,l="https://tldraw.dev/?utm_source=dotcom&utm_medium=organic&utm_campaign=watermark";return w.jsx("div",{ref:s,className:s2.className,"data-debug":r,"data-mobile":o,draggable:!1,...i,children:w.jsx("button",{draggable:!1,role:"button",onPointerDown:c=>{Yr(c),En(c)},title:"made with tldraw",onClick:()=>XM.openWindow(l,"_blank"),style:{mask:a,WebkitMask:a}})})}),UYe=v.memo(function(){const e=Ee(),n=s2.className,r=`/* ------------------- SEE LICENSE -------------------
The tldraw watermark is part of tldraw's license. It is shown for unlicensed
or "licensed-with-watermark" users. By using this library, you agree to
preserve the watermark's behavior, keeping it visible, unobscured, and
available to user-interaction.

To remove the watermark, please purchase a license at tldraw.dev.
*/

	.${n} {
		position: absolute;
		bottom: var(--space-2);
		right: var(--space-2);
		width: 96px;
		height: 32px;
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: var(--layer-watermark) !important;
		background-color: color-mix(in srgb, var(--color-background) 62%, transparent);
		opacity: 1;
		border-radius: 5px;
		pointer-events: all;
		padding: 2px;
		box-sizing: content-box;
	}

	.${n} > button {
		position: absolute;
		width: 96px;
		height: 32px;
		pointer-events: all;
		cursor: inherit;
		color: var(--color-text);
		opacity: .38;
		border: 0;
		padding: 0;
		background-color: currentColor;
	}

	.${n}[data-debug='true'] {
		bottom: 46px;
	}

	.${n}[data-mobile='true'] {
		border-radius: 4px 0px 0px 4px;
		right: -2px;
		width: 8px;
		height: 48px;
	}

	.${n}[data-mobile='true'] > button {
		width: 8px;
		height: 32px;
	}

	@media (hover: hover) {
		.${n} > button {
			pointer-events: none;
		}

		.${n}:hover {
			background-color: var(--color-background);
			transition: background-color 0.2s ease-in-out;
			transition-delay: 0.32s;
		}

		.${n}:hover > button {
			animation: delayed_link 0.2s forwards ease-in-out;
			animation-delay: 0.32s;
		}

		.${n} > button:focus-visible {
			opacity: 1;
		}
	}


	@keyframes delayed_link {
		0% {
			cursor: inherit;
			opacity: .38;
			pointer-events: none;
		}
		100% {
			cursor: pointer;
			opacity: 1;
			pointer-events: all;
		}
	}`;return w.jsx("style",{nonce:e.options.nonce,children:r})}),WYe=[],VYe=[],qYe=[],KYe="tl-container",GYe=v.memo(function({store:e,components:n,className:r,user:o,options:i,...s}){const[a,l]=v.useState(null),c=v.useMemo(()=>o??yue(),[o]),u=(n==null?void 0:n.ErrorFallback)===void 0?cue:n==null?void 0:n.ErrorFallback,d={...s,shapeUtils:s.shapeUtils??WYe,bindingUtils:s.bindingUtils??VYe,tools:s.tools??qYe,components:n,options:ry(i)};return w.jsx("div",{ref:l,"data-tldraw":Ace,draggable:!1,className:he(`${KYe} tl-theme__light`,r),onPointerDown:Yr,tabIndex:-1,role:"application","aria-label":(i==null?void 0:i.branding)??"tldraw",children:w.jsx(vx,{fallback:u,onError:f=>L5(f,{tags:{origin:"react.tldraw-before-app"}}),children:a&&w.jsx(DYe,{licenseKey:s.licenseKey,children:w.jsx(zce,{container:a,children:w.jsx(iKe,{overrides:n,children:e?e instanceof hB?w.jsx(khe,{...d,store:e,user:c}):w.jsx(Rhe,{...d,store:e,user:c}):w.jsx(XYe,{...d,store:e,user:c})})})})})})});function XYe(t){const{defaultName:e,snapshot:n,initialData:r,shapeUtils:o,bindingUtils:i,persistenceKey:s,sessionId:a,user:l,assets:c,migrations:u}=t,d=_Ye({shapeUtils:o,bindingUtils:i,initialData:r,persistenceKey:s,sessionId:a,defaultName:e,snapshot:n,assets:c,migrations:u});return w.jsx(Rhe,{...t,store:d,user:l})}const Rhe=v.memo(function({store:e,user:n,...r}){const o=Ko();v.useLayoutEffect(()=>{n.userPreferences.get().colorScheme==="dark"&&(o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"))},[o,n]);const{LoadingScreen:i}=$r();switch(e.status){case"error":throw e.error;case"loading":return i?w.jsx(i,{}):null}return w.jsx(khe,{...r,store:e.store,user:n})}),cj=()=>document.location.search.includes("tldraw_preserve_focus");function khe({onMount:t,children:e,store:n,tools:r,shapeUtils:o,bindingUtils:i,user:s,initialState:a,autoFocus:l=!0,inferDarkMode:c,cameraOptions:u,textOptions:d,options:f,licenseKey:h,deepLinks:g,isShapeHidden:y,getShapeVisibility:m,assetUrls:S}){const{ErrorFallback:x}=$r(),C=Ko(),[E,P]=Mhe(null),I=v.useRef(null),T=ry(g===!0?{}:g),M=v.useRef({autoFocus:l&&!cj(),inferDarkMode:c,initialState:a,cameraOptions:u,deepLinks:T});v.useLayoutEffect(()=>{M.current={autoFocus:l&&!cj(),inferDarkMode:c,initialState:a,cameraOptions:u,deepLinks:T}},[l,c,a,u,T]),v.useLayoutEffect(()=>{const{autoFocus:F,inferDarkMode:H,initialState:U,cameraOptions:B,deepLinks:W}=M.current,K=new Ct({store:n,shapeUtils:o,bindingUtils:i,tools:r,getContainer:()=>C,user:s,initialState:U,autoFocus:F,inferDarkMode:H,cameraOptions:B,textOptions:d,options:f,licenseKey:h,isShapeHidden:y,getShapeVisibility:m,fontAssetUrls:S==null?void 0:S.fonts});return K.updateViewportScreenBounds(I.current??C),W&&(W!=null&&W.getUrl?K.navigateToDeepLink({...W,url:W.getUrl(K)}):K.navigateToDeepLink(W)),P(K),()=>{K.dispose()}},[i,C,f,o,n,r,s,P,h,y,m,d,S]),v.useLayoutEffect(()=>{if(E&&T)return E.registerDeepLinkListener(T)},[E,T]),v.useLayoutEffect(()=>{E&&u&&E.setCameraOptions(u)},[E,u]);const R=v.useSyncExternalStore(v.useCallback(F=>E?(E.on("crash",F),()=>E.off("crash",F)):()=>{},[E]),()=>(E==null?void 0:E.getCrashingError())??null);v.useEffect(function(){if(!E)return;function H(){E&&E.focus()}function U(){E&&E.blur()}if(l&&cj())return E.getContainer().addEventListener("pointerdown",H),document.body.addEventListener("pointerdown",U),()=>{var B;(B=E.getContainer())==null||B.removeEventListener("pointerdown",H),document.body.removeEventListener("pointerdown",U)}},[E,l]);const[A,j]=v.useState(null);let N=A;E!==(N==null?void 0:N.editor)&&(N=null),v.useEffect(()=>{if(!E)return;let F=!1;return j({editor:E,isLoaded:!1}),E.fonts.loadRequiredFontsForCurrentPage(E.options.maxFontsToLoadBeforeRender).finally(()=>{F||j({editor:E,isLoaded:!0})}),()=>{F=!0}},[E]);const{Canvas:k,LoadingScreen:D}=$r();return!E||!(N!=null&&N.isLoaded)?w.jsxs(w.Fragment,{children:[D&&w.jsx(D,{}),w.jsx("div",{className:"tl-canvas",ref:I})]}):w.jsx(vx,{fallback:x,onError:F=>E.annotateError(F,{origin:"react.tldraw",willCrashApp:!0}),children:R?w.jsx(QYe,{crashingError:R}):w.jsx(IB,{editor:E,children:w.jsxs(YYe,{onMount:t,children:[e??(k?w.jsx(k,{},E.contextId):null),w.jsx(BYe,{})]})})})}function YYe({children:t,onMount:e}){return IYe(),ZXe(),JXe(),eYe(),$he(n=>{const r=n.store.props.onMount(n),o=e==null?void 0:e(n);return()=>{r==null||r(),o==null||o()}}),t}function QYe({crashingError:t}){throw t}function Ahe({children:t}){return w.jsx("div",{className:"tl-loading","aria-busy":"true",tabIndex:0,children:t})}function $he(t){const e=Ee(),n=fd(r=>{let o;return r.run(()=>{o=t==null?void 0:t(r),r.emit("mount")},{history:"ignore"}),window.tldrawReady=!0,o});ce.useLayoutEffect(()=>{if(e)return n==null?void 0:n(e)},[e,n])}function Uf({children:t,className:e="",...n}){return w.jsx("div",{...n,className:he("tl-html-container",e),children:t})}class CP{constructor(e){this.editor=e}}V(CP,"props"),V(CP,"migrations"),V(CP,"type");function a2(t,e,n={}){const{newPoint:r,handle:o,scaleX:i,scaleY:s}=e,{minWidth:a=1,maxWidth:l=1/0,minHeight:c=1,maxHeight:u=1/0}=n;let d=t.props.w*i,f=t.props.h*s;const h=new $(0,0);if(d>0){if(d<a){switch(o){case"top_left":case"left":case"bottom_left":{h.x=d-a;break}case"top":case"bottom":{h.x=(d-a)/2;break}default:h.x=0}d=a}}else if(h.x=d,d=-d,d<a){switch(o){case"top_left":case"left":case"bottom_left":{h.x=-d;break}default:h.x=-a}d=a}if(f>0){if(f<c){switch(o){case"top_left":case"top":case"top_right":{h.y=f-c;break}case"right":case"left":{h.y=(f-c)/2;break}default:h.y=0}f=c}}else if(h.y=f,f=-f,f<c){switch(o){case"top_left":case"top":case"top_right":{h.y=-f;break}default:h.y=-c}f=c}const{x:g,y}=h.rot(t.rotation).add(r);return{...t,x:g,y,props:{w:Math.min(l,d),h:Math.min(u,f)}}}class sy extends Tc{getGeometry(e){return new Pu({width:e.props.w,height:e.props.h,isFilled:!0})}onResize(e,n){return a2(e,n)}getHandleSnapGeometry(e){return{points:this.getGeometry(e).bounds.cornersAndCenter}}getInterpolatedProps(e,n,r){return{...n.props,w:Pn(e.props.w,n.props.w,r),h:Pn(e.props.h,n.props.h,r)}}}function Dhe(t,{initialBounds:e,scaleX:n,scaleY:r,newPoint:o,handle:i}){let s;switch(i){case"bottom_left":case"bottom_right":case"top_left":case"top_right":{s=Math.max(.01,Math.max(Math.abs(n),Math.abs(r)));break}case"left":case"right":{s=Math.max(.01,Math.abs(n));break}case"bottom":case"top":{s=Math.max(.01,Math.abs(r));break}default:throw Jn(i)}const a=new $(0,0);n<0&&(a.x=-(e.width*s)),r<0&&(a.y=-(e.height*s));const{x:l,y:c}=$.Add(o,a.rot(t.rotation));return{x:l,y:c,props:{scale:s*t.props.scale}}}var fL;let ZYe=(fL=class extends Bt{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},V(fL,"id","idle"),fL);var hL;let JYe=(hL=class extends Bt{onPointerMove(e){if(this.editor.inputs.isDragging){const{originPagePoint:n}=this.editor.inputs,r=this.parent.shapeType,o=Ar(),i=this.editor.markHistoryStoppingPoint(`creating_box:${o}`),s=el(n,this.editor);this.editor.createShapes([{id:o,type:r,x:s.x,y:s.y,props:{w:1,h:1}}]).select(o);const a=this.parent;this.editor.setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:i,creationCursorOffset:{x:1,y:1},onInteractionEnd:this.parent.id,onCreate:a.onCreate?l=>{var c;return(c=a.onCreate)==null?void 0:c.call(a,l)}:void 0})}}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}complete(){const{originPagePoint:e}=this.editor.inputs,n=this.parent.shapeType,r=Ar();this.editor.markHistoryStoppingPoint(`creating_box:${r}`),this.editor.createShapes([{id:r,type:n,x:e.x,y:e.y}]);const o=this.editor.getShape(r);if(!o){this.cancel();return}let{w:i,h:s}=o.props;const a=new $(i/2,s/2),l=this.editor.getShapeParentTransform(o);l&&a.rot(-l.rotation());let c=1;this.editor.user.getIsDynamicResizeMode()&&(c=1/this.editor.getZoomLevel(),i*=c,s*=c,a.mul(c));const u=to(o),d=el(new $(o.x-a.x,o.y-a.y),this.editor);u.x=d.x,u.y=d.y,u.props.w=i,u.props.h=s,"scale"in o.props&&(u.props.scale=c),this.editor.updateShape(u),this.editor.setSelectedShapes([r]),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select.idle")}cancel(){this.parent.transition("idle")}},V(hL,"id","pointing"),hL);function el(t,e){const n=e.getInstanceState().isGridMode,r=e.getDocumentSettings().gridSize;return n?t.clone().snapToGrid(r):t.clone()}class _F extends Bt{static children(){return[ZYe,JYe]}}V(_F,"id","box"),V(_F,"initial","idle");function eQe(t,e,n){const r=v.useRef(!1),o=v.useCallback(s=>{r.current=s,s?Ls.addOpenMenu(t):Ls.deleteOpenMenu(t),e==null||e(s)},[t,e]),i=Ie("is menu open",()=>Ls.getOpenMenus().includes(t),[t]);return v.useEffect(()=>(r.current&&(n==null||n("open-menu"),Ls.addOpenMenu(t)),()=>{r.current&&(Ls.deleteOpenMenu(t),Ls.getOpenMenus().forEach(s=>{s.startsWith(t)&&(n==null||n("close-menu"),Ls.deleteOpenMenu(s))}),r.current=!1)}),[t,n]),[i,o]}function kw(t){const e=Ee();return Ie("isEditing",()=>e.getEditingShapeId()===t,[e,t])}function tQe(t){if(!t)throw Error("usePassThroughWheelEvents must be passed a ref");const e=Ko();v.useEffect(()=>{function n(o){if(o.isSpecialRedispatchedEvent)return;En(o);const i=e.querySelector(".tl-canvas");if(!i)return;const s=new PointerEvent(o.type,o);s.isSpecialRedispatchedEvent=!0,i.dispatchEvent(s)}const r=t.current;if(r)return r.addEventListener("mouseover",n,{passive:!1}),()=>{r.removeEventListener("mouseover",n)}},[e,t])}function nu(t){const e=Ee();return v.useMemo(function(){const o=c=>{if(c.isKilled)return;if(c.button===MB){e.dispatch({type:"pointer",target:"selection",handle:t,name:"right_click",...za(c)});return}if(c.button!==0)return;const u=vI(c.currentTarget);function d(){u.removeEventListener("pointerup",d),Cw(u,c)}ww(u,c),u.addEventListener("pointerup",d),e.dispatch({name:"pointer_down",type:"pointer",target:"selection",handle:t,...za(c)}),Yr(c)};let i,s;function a(c){c.isKilled||c.button===0&&(c.clientX===i&&c.clientY===s||(i=c.clientX,s=c.clientY,e.dispatch({name:"pointer_move",type:"pointer",target:"selection",handle:t,...za(c)})))}return{onPointerDown:o,onPointerMove:a,onPointerUp:c=>{c.isKilled||c.button===0&&e.dispatch({name:"pointer_up",type:"pointer",target:"selection",handle:t,...za(c)})}}},[e,t])}function nQe(t){const[e,n]=v.useState(()=>({store:xI(t),opts:t}));if(!Lae(e.opts,t)){const r={store:xI(t),opts:t};return n(r),r.store}return e.store}const rQe=20,oQe=8;function GB(t,e=rQe){return Math.max(oQe,Math.ceil(t/e))}class Nm extends Bd{constructor(n){super({...n,isFilled:!1,isClosed:!1});V(this,"_center");V(this,"radius");V(this,"start");V(this,"end");V(this,"largeArcFlag");V(this,"sweepFlag");V(this,"measure");V(this,"angleStart");V(this,"angleEnd");const{center:r,sweepFlag:o,largeArcFlag:i,start:s,end:a}=n;if(s.equals(a))throw Error("Arc must have different start and end points.");this.angleStart=$.Angle(r,s),this.angleEnd=$.Angle(r,a),this.radius=$.Dist(r,s),this.measure=zWe(this.angleStart,this.angleEnd,o,i),this.start=s,this.end=a,this.sweepFlag=o,this.largeArcFlag=i,this._center=r}nearestPoint(n){const{_center:r,measure:o,radius:i,angleEnd:s,angleStart:a,start:l,end:c}=this,u=EQ(o,a,s,r.angle(n));if(u<=0)return l;if(u>=1)return c;const d=$.Sub(n,r).uni().mul(i).add(r);let f,h=1/0,g;for(const y of[l,c,d])g=$.Dist2(n,y),g<h&&(f=y,h=g);if(!f)throw Error("nearest point not found");return f}hitTestLineSegment(n,r){const{_center:o,radius:i,measure:s,angleStart:a,angleEnd:l}=this,c=_w(n,r,o,i);return c===null?!1:c.some(u=>{const d=EQ(s,a,l,o.angle(u));return d>=0&&d<=1})}getVertices(){const{_center:n,measure:r,length:o,radius:i,angleStart:s}=this,a=[];for(let l=0,c=GB(Math.abs(o));l<c+1;l++){const u=l/c*r,d=s+u;a.push(qM(n,i,d))}return a}getSvgPathData(n=!0){const{start:r,end:o,radius:i,largeArcFlag:s,sweepFlag:a}=this;return`${n?`M${r.toFixed()}`:""} A${i} ${i} 0 ${s} ${a} ${o.toFixed()}`}getLength(){return Math.abs(this.measure*this.radius)}}class XB extends Bd{constructor(n){super({isClosed:!0,...n});V(this,"_center");V(this,"radius");V(this,"x");V(this,"y");this.config=n;const{x:r=0,y:o=0,radius:i}=n;this.x=r,this.y=o,this._center=new $(i+r,i+o),this.radius=i}getBounds(){return new rt(this.x,this.y,this.radius*2,this.radius*2)}getVertices(){const{_center:n,radius:r}=this,o=Ir*r,i=[];for(let s=0,a=GB(o);s<a;s++){const l=s/a*Ir;i.push(qM(n,r,l))}return i}nearestPoint(n){const{_center:r,radius:o}=this;return r.equals(n)?$.AddXY(r,o,0):$.Sub(n,r).uni().mul(o).add(r)}hitTestLineSegment(n,r,o=0){const{_center:i,radius:s}=this;return _w(n,r,i,s+o)!==null}getSvgPathData(){const{_center:n,radius:r}=this;return`M${n.x+r},${n.y} a${r},${r} 0 1,0 ${r*2},0a${r},${r} 0 1,0 -${r*2},0`}}class fs extends vh{constructor(n){const{start:r,cp1:o,cp2:i,end:s}=n;super({...n,points:[r,s]});V(this,"a");V(this,"b");V(this,"c");V(this,"d");this.a=r,this.b=o,this.c=i,this.d=s}getVertices(){const n=[],{a:r,b:o,c:i,d:s}=this;for(let a=0,l=10;a<=l;a++){const c=a/l;n.push(new $((1-c)*(1-c)*(1-c)*r.x+3*((1-c)*(1-c))*c*o.x+3*(1-c)*(c*c)*i.x+c*c*c*s.x,(1-c)*(1-c)*(1-c)*r.y+3*((1-c)*(1-c))*c*o.y+3*(1-c)*(c*c)*i.y+c*c*c*s.y))}return n}midPoint(){return fs.GetAtT(this,.5)}nearestPoint(n){let r,o=1/0,i,s;for(const a of this.segments)s=a.nearestPoint(n),i=$.Dist2(s,n),i<o&&(r=s,o=i);if(!r)throw Error("nearest point not found");return r}getSvgPathData(n=!0){const{a:r,b:o,c:i,d:s}=this;return`${n?`M ${r.toFixed()} `:""} C${o.toFixed()} ${i.toFixed()} ${s.toFixed()}`}static GetAtT(n,r){const{a:o,b:i,c:s,d:a}=n;return new $((1-r)*(1-r)*(1-r)*o.x+3*((1-r)*(1-r))*r*i.x+3*(1-r)*(r*r)*s.x+r*r*r*a.x,(1-r)*(1-r)*(1-r)*o.y+3*((1-r)*(1-r))*r*i.y+3*(1-r)*(r*r)*s.y+r*r*r*a.y)}getLength(n,r=32){let o,i=this.a,s=0;for(let a=1;a<=r;a++)o=fs.GetAtT(this,a/r),s+=$.Dist(i,o),i=o;return s}}class iQe extends Bd{constructor(n){super({...n,isClosed:!1,isFilled:!1});V(this,"points");V(this,"_segments");const{points:r}=n;this.points=r}get segments(){if(!this._segments){this._segments=[];const{points:n}=this,r=n.length,o=r-2,i=1.25;for(let s=0;s<r-1;s++){const a=s===0?n[0]:n[s-1],l=n[s],c=n[s+1],u=s===o?c:n[s+2],d=l,f=s===0?a:new $(l.x+(c.x-a.x)/6*i,l.y+(c.y-a.y)/6*i),h=s===o?c:new $(c.x-(u.x-l.x)/6*i,c.y-(u.y-l.y)/6*i),g=c;this._segments.push(new fs({start:d,cp1:f,cp2:h,end:g}))}}return this._segments}getLength(){return this.segments.reduce((n,r)=>n+r.length,0)}getVertices(){const n=this.segments.reduce((r,o)=>r.concat(o.vertices),[]);return n.push(this.points[this.points.length-1]),n}nearestPoint(n){let r,o=1/0,i,s;for(const a of this.segments)s=a.nearestPoint(n),i=$.Dist2(s,n),i<o&&(r=s,o=i);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(n,r){return this.segments.some(o=>o.hitTestLineSegment(n,r))}getSvgPathData(){let n=this.segments.reduce((r,o,i)=>r+o.getSvgPathData(i===0),"");return this.isClosed&&(n+="Z"),n}}class sQe extends Bd{constructor(n){super({...n,isClosed:!0});V(this,"w");V(this,"h");V(this,"_edges");this.config=n;const{width:r,height:o}=n;this.w=r,this.h=o}get edges(){if(!this._edges){const{vertices:n}=this;this._edges=[];for(let r=0,o=n.length;r<o;r++){const i=n[r],s=n[(r+1)%o];this._edges.push(new hd({start:i,end:s}))}}return this._edges}getVertices(){const n=Math.max(1,this.w),r=Math.max(1,this.h),o=n/2,i=r/2,s=Math.pow(o-i,2)/Math.pow(o+i,2),a=cr*(o+i)*(1+3*s/(10+Math.sqrt(4-3*s))),l=GB(a),c=Ir/l,u=Math.cos(c),d=Math.sin(c);let f=0,h=1,g=0,y=1;const m=Array(l);for(let S=0;S<l;S++)m[S]=new $(o+o*h,i+i*f),g=d*h+u*f,y=u*h-d*f,f=g,h=y;return m}nearestPoint(n){let r,o=1/0,i,s;for(const a of this.edges)s=a.nearestPoint(n),i=$.Dist2(s,n),i<o&&(r=s,o=i);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(n,r){return this.edges.some(o=>o.hitTestLineSegment(n,r))}getBounds(){return new rt(0,0,this.w,this.h)}getLength(){const{w:n,h:r}=this,o=n/2,i=r/2,s=Math.max(0,o),a=Math.max(0,i);return Dce(s,a)}getSvgPathData(n=!1){const{w:r,h:o}=this,i=r/2,s=o/2,a=Math.max(0,i),l=Math.max(0,s);return`${n?`M${i-a},${s}`:""} a${a},${l},0,1,1,${a*2},0a${a},${l},0,1,1,-${a*2},0`}}class aQe extends Bd{constructor(n){super({...n,isClosed:!0});V(this,"w");V(this,"h");V(this,"a");V(this,"b");V(this,"c");V(this,"d");this.config=n;const{width:r,height:o}=n;if(this.w=r,this.h=o,o>r){const i=r/2;this.a=new Nm({start:new $(0,i),end:new $(r,i),center:new $(r/2,i),sweepFlag:1,largeArcFlag:1}),this.b=new hd({start:new $(r,i),end:new $(r,o-i)}),this.c=new Nm({start:new $(r,o-i),end:new $(0,o-i),center:new $(r/2,o-i),sweepFlag:1,largeArcFlag:1}),this.d=new hd({start:new $(0,o-i),end:new $(0,i)})}else{const i=o/2;this.a=new Nm({start:new $(i,o),end:new $(i,0),center:new $(i,i),sweepFlag:1,largeArcFlag:1}),this.b=new hd({start:new $(i,0),end:new $(r-i,0)}),this.c=new Nm({start:new $(r-i,0),end:new $(r-i,o),center:new $(r-i,i),sweepFlag:1,largeArcFlag:1}),this.d=new hd({start:new $(r-i,o),end:new $(i,o)})}}nearestPoint(n){let r,o=1/0,i,s;const{a,b:l,c,d:u}=this;for(const d of[a,l,c,u])s=d.nearestPoint(n),i=$.Dist2(s,n),i<o&&(r=s,o=i);if(!r)throw Error("nearest point not found");return r}hitTestLineSegment(n,r){const{a:o,b:i,c:s,d:a}=this;return[o,i,s,a].some(l=>l.hitTestLineSegment(n,r))}getVertices(){const{a:n,b:r,c:o,d:i}=this;return[n,r,o,i].reduce((s,a)=>(s.push(...a.vertices),s),[])}getBounds(){return new rt(0,0,this.w,this.h)}getLength(){const{h:n,w:r}=this;return n>r?(cr*(r/2)+(n-r))*2:(cr*(n/2)+(r-n))*2}getSvgPathData(){const{a:n,b:r,c:o,d:i}=this;return[n,r,o,i].map((s,a)=>s.getSvgPathData(a===0)).join(" ")+" Z"}}function Di(t){this.content=t}Di.prototype={constructor:Di,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new Di(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Di(n)},addToStart:function(t,e){return new Di([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Di(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new Di(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Di.from(t),t.size?new Di(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Di.from(t),t.size?new Di(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Di.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Di.from=function(t){if(t instanceof Di)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Di(e)};function jhe(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=jhe(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function Lhe(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=Lhe(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class tt{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new tt(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new tt(r,o)}cutByIndex(e,n){return e==n?tt.empty:e==0&&n==this.content.length?this:new tt(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new tt(o,i)}addToStart(e){return new tt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new tt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return jhe(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Lhe(this,e,n,r)}findIndex(e,n=-1){if(e==0)return dE(0,e);if(e==this.size)return dE(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||n>0?dE(r+1,s):dE(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return tt.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new tt(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return tt.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new tt(n||e,r)}static from(e){if(!e)return tt.empty;if(e instanceof tt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new tt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}tt.empty=new tt([],0);const uj={index:0,offset:0};function dE(t,e){return uj.index=t,uj.offset=e,uj}function CI(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!CI(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!CI(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Br=class IF{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&CI(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return IF.none;if(e instanceof IF)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Br.none=[];class EI extends Error{}class At{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Fhe(this.content,e+this.openStart,n);return r&&new At(r,this.openStart,this.openEnd)}removeBetween(e,n){return new At(Nhe(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return At.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new At(tt.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new At(e,r,o)}}At.empty=new At(tt.empty,0,0);function Nhe(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(Nhe(i.content,e-o-1,n-o-1)))}function Fhe(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=Fhe(s.content,e-i-1,n);return a&&t.replaceChild(o,s.copy(a))}function lQe(t,e,n){if(n.openStart>t.depth)throw new EI("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new EI("Inconsistent open depths");return zhe(t,e,n,0)}function zhe(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=zhe(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Op(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=cQe(n,t);return Op(i,Hhe(t,s,a,e,r))}else return Op(i,PI(t,e,r))}function Bhe(t,e){if(!e.type.compatibleContent(t.type))throw new EI("Cannot join "+e.type.name+" onto "+t.type.name)}function TF(t,e,n){let r=t.node(n);return Bhe(r,e.node(n)),r}function Mp(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function xS(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Mp(t.nodeAfter,r),i++));for(let a=i;a<s;a++)Mp(o.child(a),r);e&&e.depth==n&&e.textOffset&&Mp(e.nodeBefore,r)}function Op(t,e){return t.type.checkContent(e),t.copy(e)}function Hhe(t,e,n,r,o){let i=t.depth>o&&TF(t,e,o+1),s=r.depth>o&&TF(n,r,o+1),a=[];return xS(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(Bhe(i,s),Mp(Op(i,Hhe(t,e,n,r,o+1)),a)):(i&&Mp(Op(i,PI(t,e,o+1)),a),xS(e,n,o,a),s&&Mp(Op(s,PI(n,r,o+1)),a)),xS(r,null,o,a),new tt(a)}function PI(t,e,n){let r=[];if(xS(null,t,n,r),t.depth>n){let o=TF(t,e,n+1);Mp(Op(o,PI(t,e,n+1)),r)}return xS(e,null,n,r),new tt(r)}function cQe(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(tt.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class yx{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Br.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new _I(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new yx(n,r,i)}static resolveCached(e,n){let r=yZ.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else yZ.set(e,r=new uQe);let o=r.elts[r.i]=yx.resolve(e,n);return r.i=(r.i+1)%dQe,o}}class uQe{constructor(){this.elts=[],this.i=0}}const dQe=12,yZ=new WeakMap;class _I{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const fQe=Object.create(null);let Mc=class MF{constructor(e,n,r,o=Br.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||tt.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&CI(this.attrs,n||e.defaultAttrs||fQe)&&Br.sameSet(this.marks,r||Br.none)}copy(e=null){return e==this.content?this:new MF(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new MF(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return At.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new At(c,o.depth-s,i.depth-s)}replace(e,n,r){return lQe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return yx.resolveCached(this,e)}resolveNoCache(e){return yx.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Uhe(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=tt.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Br.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Br.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=tt.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};Mc.prototype.text=void 0;class II extends Mc{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Uhe(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new II(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new II(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Uhe(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Jp{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new hQe(e,n);if(r.next==null)return Jp.empty;let o=Whe(r);r.next&&r.err("Unexpected trailing text");let i=SQe(bQe(o));return xQe(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return tt.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}Jp.empty=new Jp(!0);class hQe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Whe(t){let e=[];do e.push(pQe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function pQe(t){let e=[];do e.push(gQe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function gQe(t){let e=yQe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=mQe(t,e);else break;return e}function bZ(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function mQe(t,e){let n=bZ(t),r=n;return t.eat(",")&&(t.next!="}"?r=bZ(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function vQe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function yQe(t){if(t.eat("(")){let e=Whe(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=vQe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function bQe(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=n();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=n();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Vhe(t,e){return e-t}function SZ(t,e){let n=[];return r(e),n.sort(Vhe);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function SQe(t){let e=Object.create(null);return n(SZ(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);SZ(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new Jp(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(Vhe);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function xQe(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function qhe(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Khe(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function Ghe(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function Xhe(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new CQe(t,r,e[r]);return n}let xZ=class Yhe{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Xhe(e,r.attrs),this.defaultAttrs=qhe(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Jp.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Khe(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Mc(this,this.computeAttrs(e),tt.from(n),Br.setFrom(r))}createChecked(e=null,n,r){return n=tt.from(n),this.checkContent(n),new Mc(this,this.computeAttrs(e),n,Br.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=tt.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(tt.empty,!0);return i?new Mc(this,e,n.append(i),Br.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ghe(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Br.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new Yhe(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wQe(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class CQe{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wQe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class l2{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=Xhe(e,o.attrs),this.excluded=null;let i=qhe(this.attrs);this.instance=i?new Br(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Br(this,Khe(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new l2(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Ghe(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Qhe{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Di.from(e.nodes),n.marks=Di.from(e.marks||{}),this.nodes=xZ.compile(this.spec.nodes,this),this.marks=l2.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=Jp.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?wZ(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:wZ(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof xZ){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new II(r,r.defaultAttrs,e,Br.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Mc.fromJSON(this,e)}markFromJSON(e){return Br.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function wZ(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function EQe(t){return t.tag!=null}function PQe(t){return t.style!=null}let Zm=class OF{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(EQe(o))this.tags.push(o);else if(PQe(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new EZ(this,n,!1);return r.addAll(e,Br.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new EZ(this,n,!0);return r.addAll(e,Br.none,n.from,n.to),At.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(TQe(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=PZ(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=PZ(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new OF(e,OF.schemaRules(e)))}};const Zhe={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_Qe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Jhe={ol:!0,ul:!0},bx=1,RF=2,EP=4;function CZ(t,e,n){return e!=null?(e?bx:0)|(e==="full"?RF:0):t&&t.whitespace=="pre"?bx|RF:n&-5}class fE{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Br.none,this.match=i||(s&EP?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(tt.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&bx)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=tt.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(tt.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Zhe.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class EZ{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=CZ(null,n.preserveWhitespace,0)|(r?EP:0);o?i=new fE(o.type,o.attrs,Br.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new fE(null,null,Br.none,!0,null,s):i=new fE(e.schema.topNodeType,null,Br.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&RF?"full":this.localPreserveWS||(o.options&bx)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;Jhe.hasOwnProperty(s)&&this.parser.normalizeLists&&IQe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:_Qe.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Zhe.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=Br.none;for(let a of o.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):_Z(a.type,e.type))&&(s=a.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=CZ(e,i,s.options);s.options&EP&&s.content.length==0&&(a|=EP);let l=Br.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):_Z(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new fE(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=bx)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function IQe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Jhe.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function TQe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function PZ(t){let e={};for(let n in t)e[n]=t[n];return e}function _Z(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class Cg{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=dj(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,n);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=PP(dj(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&PP(dj(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return PP(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Cg(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=IZ(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return IZ(e.marks)}}function IZ(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function dj(t){return t.document||window.document}const TZ=new WeakMap;function MQe(t){let e=TZ.get(t);return e===void 0&&TZ.set(t,e=OQe(t)),e}function OQe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function PP(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=MQe(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:h,contentDOM:g}=PP(t,f,n,r);if(l.appendChild(h),g){if(a)throw new RangeError("Multiple content holes");a=g}}}return{dom:l,contentDOM:a}}const epe=65535,tpe=Math.pow(2,16);function RQe(t,e){return t+e*tpe}function MZ(t){return t&epe}function kQe(t){return(t-(t&epe))/tpe}const npe=1,rpe=2,_P=4,ope=8;class kF{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&ope)>0}get deletedBefore(){return(this.delInfo&(npe|_P))>0}get deletedAfter(){return(this.delInfo&(rpe|_P))>0}get deletedAcross(){return(this.delInfo&_P)>0}}class La{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&La.empty)return La.empty}recover(e){let n=0,r=MZ(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+kQe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+s],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,h=l+o+(f<0?0:u);if(r)return h;let g=e==(n<0?l:d)?null:RQe(a/3,e-l),y=e==l?rpe:e==d?npe:_P;return(n<0?e!=l:e!=d)&&(y|=ope),new kF(h,y,g)}o+=u-c}return r?e+o:new kF(e+o,0,null)}touches(e,n){let r=0,o=MZ(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new La(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?La.empty:new La(e<0?[0,-e,0]:[0,0,e])}}La.empty=new La([]);class Sx{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Sx(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Sx;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new kF(e,o,null)}}const fj=Object.create(null);class Cs{getMap(){return La.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=fj[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fj)throw new RangeError("Duplicate use of step JSON ID "+e);return fj[e]=n,n.prototype.jsonID=e,n}}class ni{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new ni(e,null)}static fail(e){return new ni(null,e)}static fromReplace(e,n,r,o){try{return ni.ok(e.replace(n,r,o))}catch(i){if(i instanceof EI)return ni.fail(i.message);throw i}}}function YB(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(YB(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return tt.fromArray(r)}class Df extends Cs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new At(YB(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return ni.fromReplace(e,this.from,this.to,i)}invert(){return new du(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Df(n.pos,r.pos,this.mark)}merge(e){return e instanceof Df&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Df(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Df(n.from,n.to,e.markFromJSON(n.mark))}}Cs.jsonID("addMark",Df);class du extends Cs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new At(YB(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return ni.fromReplace(e,this.from,this.to,r)}invert(){return new Df(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new du(n.pos,r.pos,this.mark)}merge(e){return e instanceof du&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new du(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new du(n.from,n.to,e.markFromJSON(n.mark))}}Cs.jsonID("removeMark",du);class jf extends Cs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ni.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return ni.fromReplace(e,this.pos,this.pos+1,new At(tt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new jf(this.pos,n.marks[o]);return new jf(this.pos,this.mark)}}return new eg(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new jf(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new jf(n.pos,e.markFromJSON(n.mark))}}Cs.jsonID("addNodeMark",jf);class eg extends Cs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return ni.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return ni.fromReplace(e,this.pos,this.pos+1,new At(tt.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new jf(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new eg(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new eg(n.pos,e.markFromJSON(n.mark))}}Cs.jsonID("removeNodeMark",eg);class vi extends Cs{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&AF(e,this.from,this.to)?ni.fail("Structure replace would overwrite content"):ni.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new La([this.from,this.to-this.from,this.slice.size])}invert(e){return new vi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vi(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof vi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?At.empty:new At(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?At.empty:new At(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vi(n.from,n.to,At.fromJSON(e,n.slice),!!n.structure)}}Cs.jsonID("replace",vi);class wi extends Cs{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(AF(e,this.from,this.gapFrom)||AF(e,this.gapTo,this.to)))return ni.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return ni.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?ni.fromReplace(e,this.from,this.to,r):ni.fail("Content does not fit in gap")}getMap(){return new La([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new wi(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new wi(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new wi(n.from,n.to,n.gapFrom,n.gapTo,At.fromJSON(e,n.slice),n.insert,!!n.structure)}}Cs.jsonID("replaceAround",wi);function AF(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function AQe(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+l.nodeSize,n),g=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(g)||(s&&s.to==f&&s.mark.eq(d[y])?s.to=h:o.push(s=new du(f,h,d[y])));a&&a.to==f?a.to=h:i.push(a=new Df(f,h,r))}}),o.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function $Qe(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof l2){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let h=0;h<o.length;h++){let g=o[h];g.step==i-1&&d.eq(o[h].style)&&(f=g)}f?(f.to=c,f.step=i):o.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>t.step(new du(s.from,s.to,s.style)))}function QB(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new vi(a,u,At.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new du(a,u,c.marks[f]));if(o&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,g;for(;f=h.exec(c.text);)g||(g=new At(tt.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new vi(a+f.index,a+f.index+f[0].length,g))}}a=u}if(!r.validEnd){let l=r.fillBefore(tt.empty,!0);t.replace(a,a,new At(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function DQe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function ay(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!DQe(o,i,s))break}return null}function jQe(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=tt.empty,d=0;for(let g=i,y=!1;g>n;g--)y||r.index(g)>0?(y=!0,u=tt.from(r.node(g).copy(u)),d++):l--;let f=tt.empty,h=0;for(let g=i,y=!1;g>n;g--)y||o.after(g+1)<o.end(g)?(y=!0,f=tt.from(o.node(g).copy(f)),h++):c++;t.step(new wi(l,c,s,a,new At(u.append(f),d,h),u.size-d,!0))}function ZB(t,e,n=null,r=t){let o=LQe(t,e),i=o&&NQe(r,e);return i?o.map(OZ).concat({type:e,attrs:n}).concat(i.map(OZ)):null}function OZ(t){return{type:t,attrs:null}}function LQe(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function NQe(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function FQe(t,e,n){let r=tt.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=tt.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new wi(o,i,o,i,new At(r,0,0),n.length,!0))}function zQe(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&BQe(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",g=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!g?c=!1:!h&&g&&(c=!0)}c===!1&&spe(t,s,a,i),QB(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),f=u.map(a+s.nodeSize,1);return t.step(new wi(d,f,d+1,f-1,new At(tt.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&ipe(t,s,a,i),!1}})}function ipe(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function spe(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function BQe(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function HQe(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new wi(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new At(tt.from(s),0,0),1,!0))}function bd(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let d=o.node(c),f=o.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),g=r&&r[u+1];g&&(h=h.replaceChild(0,g.type.create(g.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(h))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function UQe(t,e,n=1,r){let o=t.doc.resolve(e),i=tt.empty,s=tt.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=tt.from(o.node(a).copy(i));let u=r&&r[c];s=tt.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}t.step(new vi(e,e,new At(i.append(s),n,n),!0))}function yh(t,e){let n=t.resolve(e),r=n.index();return ape(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function WQe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function ape(t,e){return!!(t&&e&&!t.isLeaf&&WQe(t,e))}function c2(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&ape(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function VQe(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);spe(t,u.node(),u.before(),a)}s.inlineContent&&QB(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new vi(c,l.map(e+n,-1),At.empty,!0)),r===!0){let u=t.doc.resolve(c);ipe(t,u.node(),u.before(),t.steps.length)}return t}function qQe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function lpe(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function u2(t,e,n=e,r=At.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return cpe(o,i,r)?new vi(e,n,r):new KQe(o,i,r).fit()}function cpe(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class KQe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=tt.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=tt.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new At(i,s,a);return e>-1?new wi(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new vi(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=hj(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(s?c.matchType(s.type)||(d=c.fillBefore(tt.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=hj(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new At(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=hj(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new At(Fb(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new At(Fb(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(o){for(let y=0;y<o.childCount;y++)u.push(o.child(y));d=d.matchFragment(o)}let h=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let y=a.child(c),m=d.matchType(y.type);if(!m)break;c++,(c>1||l==0||y.content.size)&&(d=m,u.push(upe(y.mark(f.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?h:-1)))}let g=c==a.childCount;g||(h=-1),this.placed=zb(this.placed,n,tt.from(u)),this.frontier[n].match=d,g&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,m=a;y<h;y++){let S=m.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),m=S.content}this.unplaced=g?e==0?At.empty:new At(Fb(s.content,e-1,1),e-1,h<0?s.openEnd:e-1):new At(Fb(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!pj(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=pj(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=pj(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=zb(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=zb(this.placed,this.depth,tt.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(tt.empty,!0);n.childCount&&(this.placed=zb(this.placed,this.frontier.length,n))}}function Fb(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Fb(t.firstChild.content,e-1,n)))}function zb(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(zb(t.lastChild.content,e-1,n)))}function hj(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function upe(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,upe(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(tt.empty,!0)))),t.copy(r)}function pj(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!GQe(n,i.content,s)?a:null}function GQe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function XQe(t){return t.spec.defining||t.spec.definingForContent}function YQe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(cpe(o,i,r))return t.step(new vi(e,n,r));let s=fpe(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let f=o.depth,h=o.pos-1;f>0;f--,h--){let g=o.node(f).type.spec;if(g.defining||g.definingAsContext||g.isolating)break;s.indexOf(f)>-1?a=f:o.before(f)==h&&s.splice(1,0,-f)}let l=s.indexOf(a),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let g=f.firstChild;if(c.push(g),h==r.openStart)break;f=g.content}for(let f=u-1;f>=0;f--){let h=c[f],g=XQe(h.type);if(g&&!h.sameMarkup(o.node(Math.abs(a)-1)))u=f;else if(g||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),g=c[h];if(g)for(let y=0;y<s.length;y++){let m=s[(y+l)%s.length],S=!0;m<0&&(S=!1,m=-m);let x=o.node(m-1),C=o.index(m-1);if(x.canReplaceWith(C,C,g.type,g.marks))return t.replace(o.before(m),S?i.after(m):n,new At(dpe(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=s.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=s[f];h<0||(e=o.before(h),n=i.after(h))}}function dpe(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(dpe(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(tt.empty,!0))}return t}function QQe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=qQe(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new At(tt.from(r),0,0))}function ZQe(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=fpe(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function fpe(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Jm extends Cs{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return ni.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return ni.fromReplace(e,this.pos,this.pos+1,new At(tt.from(o),0,n.isLeaf?0:1))}getMap(){return La.empty}invert(e){return new Jm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Jm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jm(n.pos,n.attr,n.value)}}Cs.jsonID("attr",Jm);class xx extends Cs{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return ni.ok(r)}getMap(){return La.empty}invert(e){return new xx(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new xx(n.attr,n.value)}}Cs.jsonID("docAttr",xx);let Cv=class extends Error{};Cv=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Cv.prototype=Object.create(Error.prototype);Cv.prototype.constructor=Cv;Cv.prototype.name="TransformError";class hpe{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Sx}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Cv(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=At.empty){let o=u2(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new At(tt.from(r),0,0))}delete(e,n){return this.replace(e,n,At.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return YQe(this,e,n,r),this}replaceRangeWith(e,n,r){return QQe(this,e,n,r),this}deleteRange(e,n){return ZQe(this,e,n),this}lift(e,n){return jQe(this,e,n),this}join(e,n=1){return VQe(this,e,n),this}wrap(e,n){return FQe(this,e,n),this}setBlockType(e,n=e,r,o=null){return zQe(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return HQe(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Jm(e,n,r)),this}setDocAttribute(e,n){return this.step(new xx(e,n)),this}addNodeMark(e,n){return this.step(new jf(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Br)n.isInSet(r.marks)&&this.step(new eg(e,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new eg(e,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return UQe(this,e,n,r),this}addMark(e,n,r){return AQe(this,e,n,r),this}removeMark(e,n,r){return $Qe(this,e,n,r),this}clearIncompatible(e,n,r){return QB(this,e,n,r),this}}const gj=Object.create(null);class zn{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new JQe(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=At.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?At.empty:n),a==0&&AZ(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),AZ(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new Mn(e):Em(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?Em(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Em(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ga(e.node(0))}static atStart(e){return Em(e,e,0,0,1)||new Ga(e)}static atEnd(e){return Em(e,e,e.content.size,e.childCount,-1)||new Ga(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=gj[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in gj)throw new RangeError("Duplicate use of selection JSON ID "+e);return gj[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Mn.between(this.$anchor,this.$head).getBookmark()}}zn.prototype.visible=!0;class JQe{constructor(e,n){this.$from=e,this.$to=n}}let RZ=!1;function kZ(t){!RZ&&!t.parent.inlineContent&&(RZ=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Mn extends zn{constructor(e,n=e){kZ(e),kZ(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return zn.near(r);let o=e.resolve(n.map(this.anchor));return new Mn(o.parent.inlineContent?o:r,r)}replace(e,n=At.empty){if(super.replace(e,n),n==At.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Mn&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new d2(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Mn(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=zn.findFrom(n,r,!0)||zn.findFrom(n,-r,!0);if(i)n=i.$head;else return zn.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(zn.findFrom(e,-r,!0)||zn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new Mn(e,n)}}zn.jsonID("text",Mn);class d2{constructor(e,n){this.anchor=e,this.head=n}map(e){return new d2(e.map(this.anchor),e.map(this.head))}resolve(e){return Mn.between(e.resolve(this.anchor),e.resolve(this.head))}}class cn extends zn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?zn.near(i):new cn(i)}content(){return new At(tt.from(this.node),0,0)}eq(e){return e instanceof cn&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new JB(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new cn(e.resolve(n.anchor))}static create(e,n){return new cn(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}cn.prototype.visible=!1;zn.jsonID("node",cn);class JB{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new d2(r,r):new JB(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&cn.isSelectable(r)?new cn(n):zn.near(n)}}class Ga extends zn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=At.empty){if(n==At.empty){e.delete(0,e.doc.content.size);let r=zn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ga(e)}map(e){return new Ga(e)}eq(e){return e instanceof Ga}getBookmark(){return eZe}}zn.jsonID("all",Ga);const eZe={map(){return this},resolve(t){return new Ga(t)}};function Em(t,e,n,r,o,i=!1){if(e.inlineContent)return Mn.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&cn.isSelectable(a))return cn.create(t,n-(o<0?a.nodeSize:0))}else{let l=Em(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function AZ(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof vi||o instanceof wi))return;let i=t.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),t.setSelection(zn.near(t.doc.resolve(s),n))}const $Z=1,DZ=2,jZ=4;class tZe extends hpe{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|$Z)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&$Z)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=DZ,this}ensureMarks(e){return Br.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&DZ)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Br.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(zn.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=jZ,this}get scrolledIntoView(){return(this.updated&jZ)>0}}function LZ(t,e){return!e||!t?t:t.bind(e)}class Bb{constructor(e,n,r){this.name=e,this.init=LZ(n.init,r),this.apply=LZ(n.apply,r)}}const nZe=[new Bb("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Bb("selection",{init(t,e){return t.selection||zn.atStart(e.doc)},apply(t){return t.selection}}),new Bb("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Bb("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class mj{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=nZe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Bb(r.key,r.spec.state,r))})}}class Fm{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Fm(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new tZe(this)}static create(e){let n=new mj(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Fm(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new mj(this.schema,e.plugins),r=n.fields,o=new Fm(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new mj(e.schema,e.plugins),i=new Fm(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Mc.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=zn.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function ppe(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=ppe(o,e,{})),n[r]=o}return n}class Xi{constructor(e){this.spec=e,this.props={},e.props&&ppe(e.props,this,this.props),this.key=e.key?e.key.key:gpe("plugin")}getState(e){return e[this.key]}}const vj=Object.create(null);function gpe(t){return t in vj?t+"$"+ ++vj[t]:(vj[t]=0,t+"$")}class rl{constructor(e="key"){this.key=gpe(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Fi=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ev=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let $F=null;const ld=function(t,e,n){let r=$F||($F=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},rZe=function(){$F=null},tg=function(t,e,n,r){return n&&(NZ(t,e,n,r,-1)||NZ(t,e,n,r,1))},oZe=/^(img|br|input|textarea|hr)$/i;function NZ(t,e,n,r,o){for(var i;;){if(t==n&&e==r)return!0;if(e==(o<0?0:_l(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Aw(t)||oZe.test(t.nodeName)||t.contentEditable=="false")return!1;e=Fi(t)+(o<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=o;else return!1;else t=s,e=o<0?_l(t):0}else return!1}}function _l(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function iZe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=_l(t)}else if(t.parentNode&&!Aw(t))e=Fi(t),t=t.parentNode;else return null}}function sZe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Aw(t))e=Fi(t)+1,t=t.parentNode;else return null}}function aZe(t,e,n){for(let r=e==0,o=e==_l(t);r||o;){if(t==n)return!0;let i=Fi(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==_l(t)}}function Aw(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const f2=function(t){return t.focusNode&&tg(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function up(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function lZe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function cZe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(_l(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(_l(r.startContainer),r.startOffset)}}}const _u=typeof navigator<"u"?navigator:null,FZ=typeof document<"u"?document:null,bh=_u&&_u.userAgent||"",DF=/Edge\/(\d+)/.exec(bh),mpe=/MSIE \d/.exec(bh),jF=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bh),ba=!!(mpe||jF||DF),Wf=mpe?document.documentMode:jF?+jF[1]:DF?+DF[1]:0,Ac=!ba&&/gecko\/(\d+)/i.test(bh);Ac&&+(/Firefox\/(\d+)/.exec(bh)||[0,0])[1];const LF=!ba&&/Chrome\/(\d+)/.exec(bh),gs=!!LF,vpe=LF?+LF[1]:0,Ws=!ba&&!!_u&&/Apple Computer/.test(_u.vendor),Pv=Ws&&(/Mobile\/\w+/.test(bh)||!!_u&&_u.maxTouchPoints>2),wl=Pv||(_u?/Mac/.test(_u.platform):!1),uZe=_u?/Win/.test(_u.platform):!1,pd=/Android \d/.test(bh),$w=!!FZ&&"webkitFontSmoothing"in FZ.documentElement.style,dZe=$w?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function fZe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function td(t,e){return typeof t=="number"?t:t[e]}function hZe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function zZ(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=Ev(s);continue}let a=s,l=a==i.body,c=l?fZe(i):hZe(a),u=0,d=0;if(e.top<c.top+td(r,"top")?d=-(c.top-e.top+td(o,"top")):e.bottom>c.bottom-td(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+td(o,"top")-c.top:e.bottom-c.bottom+td(o,"bottom")),e.left<c.left+td(r,"left")?u=-(c.left-e.left+td(o,"left")):e.right>c.right-td(r,"right")&&(u=e.right-c.right+td(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,g=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let y=a.scrollLeft-h,m=a.scrollTop-g;e={left:e.left-y,top:e.top-m,right:e.right-y,bottom:e.bottom-m}}let f=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(f))break;s=f=="absolute"?s.offsetParent:Ev(s)}}function pZe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:ype(t.dom)}}function ype(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ev(r));return e}function gZe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;bpe(n,r==0?0:r-e)}function bpe(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let pm=null;function mZe(t){if(t.setActive)return t.setActive();if(pm)return t.focus(pm);let e=ype(t);t.focus(pm==null?{get preventScroll(){return pm={preventScroll:!0},!0}}:void 0),pm||(pm=!1,bpe(e,0))}function Spe(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=ld(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let g=f[h];if(g.top<=s&&g.bottom>=a){s=Math.max(g.bottom,s),a=Math.min(g.top,a);let y=g.left>e.left?g.left-e.left:g.right<e.left?e.left-g.right:0;if(y<r){n=u,r=y,o=y&&n.nodeType==3?{left:g.right<e.left?g.right:g.left,top:e.top}:e,u.nodeType==1&&y&&(i=d+(e.left>=(g.left+g.right)/2?1:0));continue}}else g.top>e.top&&!l&&g.left<=e.left&&g.right>=e.left&&(l=u,c={left:Math.max(g.left,Math.min(g.right,e.left)),top:g.top});!n&&(e.left>=g.right&&e.top>=g.top||e.left>=g.left&&e.top>=g.bottom)&&(i=d+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?vZe(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:Spe(n,o)}function vZe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=Sf(r,1);if(i.top!=i.bottom&&e4(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function e4(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function yZe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function bZe(t,e,n){let{node:r,offset:o}=Spe(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function SZe(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function xpe(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(e4(e,c))return xpe(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function xZe(t,e){let n=t.dom.ownerDocument,r,o=0,i=cZe(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!e4(e,c)||(s=xpe(t.dom,e,c),!s))return null}if(Ws)for(let c=s;r&&c;c=Ev(c))c.draggable&&(r=void 0);if(s=yZe(s,e),r){if(Ac&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;$w&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=SZe(t,r,o,e))}a==null&&(a=bZe(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function BZ(t){return t.top<t.bottom||t.left<t.right}function Sf(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(BZ(r))return r}return Array.prototype.find.call(n,BZ)||t.getBoundingClientRect()}const wZe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function wpe(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=$w||Ac;if(r.nodeType==3)if(s&&(wZe.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Sf(ld(r,o,o),n);if(Ac&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Sf(ld(r,o-1,o-1),-1);if(c.top==l.top){let u=Sf(ld(r,o,o+1),-1);if(u.top!=l.top)return Sb(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Sb(Sf(ld(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==_l(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return yj(l.getBoundingClientRect(),!1)}if(i==null&&o<_l(r)){let l=r.childNodes[o];if(l.nodeType==1)return yj(l.getBoundingClientRect(),!0)}return yj(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==_l(r))){let l=r.childNodes[o-1],c=l.nodeType==3?ld(l,_l(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Sb(Sf(c,1),!1)}if(i==null&&o<_l(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?ld(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Sb(Sf(c,-1),!0)}return Sb(Sf(r.nodeType==3?ld(r):r,-n),n>=0)}function Sb(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function yj(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Cpe(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function CZe(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return Cpe(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=wpe(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ld(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const EZe=/[\u0590-\u08ac]/;function PZe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return a?!EZe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:Cpe(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:g,focusOffset:y}=t.domSelectionRange(),m=g&&!h.contains(g.nodeType==1?g:g.parentNode)||l==g&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),m}):r.pos==r.start()||r.pos==r.end()}let HZ=null,UZ=null,WZ=!1;function _Ze(t,e,n){return HZ==e&&UZ==n?WZ:(HZ=e,UZ=n,WZ=n=="up"||n=="down"?CZe(t,e,n):PZe(t,e,n))}const $l=0,VZ=1,gp=2,Iu=3;class Dw{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=$l,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Fi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof Ppe){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof Epe&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Fi(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Fi(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let u=s+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=s;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){o=Fi(f.dom)+1;break}e-=f.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Fi(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let h=0,g=0;h<this.children.length;h++){let y=this.children[h],m=g+y.size;if(i>g&&s<m)return y.setSelection(e-g-y.border,n-g-y.border,r,o);g=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Ac||Ws)&&e==n){let{node:h,offset:g}=a;if(h.nodeType==3){if(d=!!(g&&h.nodeValue[g-1]==`
`),d&&g==h.nodeValue.length)for(let y=h,m;y;y=y.parentNode){if(m=y.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:Fi(m)+1});break}let S=y.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let y=h.childNodes[g-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Ac&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(o=!0)}if(!(o||d&&Ws)&&tg(a.node,a.offset,u.anchorNode,u.anchorOffset)&&tg(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let g=a;a=l,l=g}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,l=s-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?gp:VZ,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Iu:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?gp:Iu}r=s}this.dirty=gp}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?gp:VZ;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Epe extends Dw{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==$l&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class IZe extends Dw{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ng extends Dw{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=Cg.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ng(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Iu||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Iu&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=$l){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=$l}}slice(e,n,r){let o=ng.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=FF(i,n,s,r)),e>0&&(i=FF(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Vf extends Dw{constructor(e,n,r,o,i,s,a,l,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Cg.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=Tpe(u,r,n),c?l=new TZe(e,n,r,o,u,d||null,f,c,i,s+1):n.isText?new h2(e,n,r,o,u,f,i):new Vf(e,n,r,o,u,d||null,f,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>tt.empty)}return e}matchesNode(e,n,r){return this.dirty==$l&&e.eq(this.node)&&TI(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new OZe(this,s&&s.node,e);AZe(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Br.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e);let h;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(h=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,h,e)||l.updateNextNode(c,u,d,e,f,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==gp)&&(s&&this.protectLocalComposition(e,s),_pe(this.contentDOM,this.children,e),Pv&&$Ze(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Mn)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=DZe(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new IZe(this,i,n,o);e.input.compositionNodes.push(s),this.children=FF(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Iu||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=$l}updateOuterDeco(e){if(TI(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Ipe(this.dom,this.nodeDOM,NF(this.outerDeco,this.node,n),NF(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function qZ(t,e,n,r,o){Tpe(r,e,t);let i=new Vf(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class h2 extends Vf{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Iu||this.dirty!=$l&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=$l||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=$l,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new h2(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Iu)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ppe extends Dw{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$l&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class TZe extends Vf{constructor(e,n,r,o,i,s,a,l,c,u){super(e,n,r,o,i,s,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==Iu)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _pe(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=KZ(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof ng){let l=r?r.previousSibling:t.lastChild;_pe(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=KZ(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const wS=function(t){t&&(this.nodeName=t)};wS.prototype=Object.create(null);const mp=[new wS];function NF(t,e,n){if(t.length==0)return mp;let r=n?mp[0]:new wS,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new wS(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new wS(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function Ipe(t,e,n,r){if(n==mp&&r==mp)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=mp[0]),o=l}MZe(o,a||mp[0],s)}return o}function MZe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function Tpe(t,e,n){return Ipe(t,t,mp,NF(e,n,t.nodeType!=1))}function TI(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function KZ(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class OZe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=RZe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=$l,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=ng.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==Iu&&s.dom==s.contentDOM&&(s.dirty=gp),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Vf){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Iu&&TI(n,l.outerDeco));if(!f&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=gp,d.updateChildren(o,s+1),d.dirty=$l),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!TI(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=Vf.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=Vf.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new Epe(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ng;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof h2)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ws||gs)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new Ppe(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function RZe(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof ng)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function kZe(t,e){return t.type.side-e.type.side}function AZe(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let m=o[s++];m.widget&&(u?(d||(d=[u])).push(m):u=m)}if(u)if(d){d.sort(kZe);for(let m=0;m<d.length;m++)n(d[m],c,!!l)}else n(u,c,!!l);let f,h;if(l)h=-1,f=l,l=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let g=i+f.nodeSize;if(f.isText){let m=g;s<o.length&&o[s].from<m&&(m=o[s].from);for(let S=0;S<a.length;S++)a[S].to<m&&(m=a[S].to);m<g&&(l=f.cut(m-i),f=f.cut(0,m-i),g=m,h=-1)}else for(;s<o.length&&o[s].to<g;)s++;let y=f.isInline&&!f.isLeaf?a.filter(m=>!m.inline):a.slice();r(f,y,e.forChild(i,f),h),i=g}}function $Ze(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function DZe(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function FF(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function t4(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(f2(n)){for(l=s;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&cn.isSelectable(d)&&o.parent&&!(d.isInline&&aZe(n.focusNode,n.focusOffset,o.dom))){let f=o.posBefore;c=new cn(s==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=s,f=s;for(let h=0;h<n.rangeCount;h++){let g=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(g.startContainer,g.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(g.endContainer,g.endOffset,-1))}if(d<0)return null;[l,s]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=n4(t,u,a,d)}return c}function Mpe(t){return t.editable?t.hasFocus():Rpe(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Sd(t,e=!1){let n=t.state.selection;if(Ope(t,n),!!Mpe(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&gs){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&tg(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)LZe(t);else{let{anchor:r,head:o}=n,i,s;GZ&&!(n instanceof Mn)&&(n.$from.parent.inlineContent||(i=XZ(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=XZ(t,n.to))),t.docView.setSelection(r,o,t,e),GZ&&(i&&YZ(i),s&&YZ(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&jZe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const GZ=Ws||gs&&vpe<63;function XZ(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Ws&&o&&o.contentEditable=="false")return bj(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return bj(o);if(i)return bj(i)}}function bj(t){return t.contentEditable="true",Ws&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function YZ(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function jZe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Mpe(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function LZe(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Fi(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&ba&&Wf<=11&&(r.disabled=!0,r.disabled=!1)}function Ope(t,e){if(e instanceof cn){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(QZ(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else QZ(t)}function QZ(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function n4(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||Mn.between(e,n,r)}function ZZ(t){return t.editable&&!t.hasFocus()?!1:Rpe(t)}function Rpe(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function NZe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return tg(e.node,e.offset,n.anchorNode,n.anchorOffset)}function zF(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&zn.findFrom(i,e)}function Ef(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function JZ(t,e,n){let r=t.state.selection;if(r instanceof Mn)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Ef(t,new Mn(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=zF(t.state,e);return o&&o instanceof cn?Ef(t,o):!1}else if(!(wl&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?cn.isSelectable(i)?Ef(t,new cn(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):$w?Ef(t,new Mn(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof cn&&r.node.isInline)return Ef(t,new Mn(e>0?r.$to:r.$from));{let o=zF(t.state,e);return o?Ef(t,o):!1}}}function MI(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function CS(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function gm(t,e){return e<0?FZe(t):zZe(t)}function FZe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(Ac&&n.nodeType==1&&r<MI(n)&&CS(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(CS(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(kpe(n))break;{let a=n.previousSibling;for(;a&&CS(a,-1);)o=n.parentNode,i=Fi(a),a=a.previousSibling;if(a)n=a,r=MI(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?BF(t,n,r):o&&BF(t,o,i)}function zZe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=MI(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(CS(a,1))i=n,s=++r;else break}else{if(kpe(n))break;{let a=n.nextSibling;for(;a&&CS(a,1);)i=a.parentNode,s=Fi(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=MI(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&BF(t,i,s)}function kpe(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function BZe(t,e){for(;t&&e==t.childNodes.length&&!Aw(t);)e=Fi(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function HZe(t,e){for(;t&&!e&&!Aw(t);)e=Fi(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function BF(t,e,n){if(e.nodeType!=3){let i,s;(s=BZe(e,n))?(e=s,n=0):(i=HZe(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(f2(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Sd(t)},50)}function eJ(t,e){let n=t.state.doc.resolve(e);if(!(gs||uZe)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function tJ(t,e,n){let r=t.state.selection;if(r instanceof Mn&&!r.empty||n.indexOf("s")>-1||wl&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=zF(t.state,e);if(s&&s instanceof cn)return Ef(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof Ga?zn.near(s,e):zn.findFrom(s,e);return a?Ef(t,a):!1}return!1}function nJ(t,e){if(!(t.state.selection instanceof Mn))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function rJ(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function UZe(t){if(!Ws||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;rJ(t,r,"true"),setTimeout(()=>rJ(t,r,"false"),20)}return!1}function WZe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function VZe(t,e){let n=e.keyCode,r=WZe(e);if(n==8||wl&&n==72&&r=="c")return nJ(t,-1)||gm(t,-1);if(n==46&&!e.shiftKey||wl&&n==68&&r=="c")return nJ(t,1)||gm(t,1);if(n==13||n==27)return!0;if(n==37||wl&&n==66&&r=="c"){let o=n==37?eJ(t,t.state.selection.from)=="ltr"?-1:1:-1;return JZ(t,o,r)||gm(t,o)}else if(n==39||wl&&n==70&&r=="c"){let o=n==39?eJ(t,t.state.selection.from)=="ltr"?1:-1:1;return JZ(t,o,r)||gm(t,o)}else{if(n==38||wl&&n==80&&r=="c")return tJ(t,-1,r)||gm(t,-1);if(n==40||wl&&n==78&&r=="c")return UZe(t)||tJ(t,1,r)||gm(t,1);if(r==(wl?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function r4(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let s=t.someProp("clipboardSerializer")||Cg.fromSchema(t.state.schema),a=Npe(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=Lpe[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let g=a.createElement(u[h]);for(;l.firstChild;)g.appendChild(l.firstChild);l.appendChild(g),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function Ape(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return e?new At(tt.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):At.empty;let d=t.someProp("clipboardTextParser",f=>f(e,o,r,t));if(d)a=d;else{let f=o.marks(),{schema:h}=t.state,g=Cg.fromSchema(h);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let m=s.appendChild(document.createElement("p"));y&&m.appendChild(g.serializeNode(h.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),s=XZe(n),$w&&YZe(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=s.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;s=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Zm.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!qZe.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=QZe(oJ(a,+u[1],+u[2]),u[4]);else if(a=At.maxOpen(KZe(a.content,o),!0),a.openStart||a.openEnd){let d=0,f=0;for(let h=a.content.firstChild;d<a.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=a.content.lastChild;f<a.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);a=oJ(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const qZe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function KZe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&Dpe(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=jpe(s[s.length-1],i.length));let u=$pe(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return tt.from(s)}return t}function $pe(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,tt.from(t));return t}function Dpe(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=Dpe(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(tt.from($pe(n,t,o+1))))}}function jpe(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,jpe(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(tt.empty,!0);return t.copy(n.append(r))}function HF(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=HF(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(tt.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function oJ(t,e,n){return e<t.openStart&&(t=new At(HF(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new At(HF(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Lpe={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let iJ=null;function Npe(){return iJ||(iJ=document.implementation.createHTMLDocument("title"))}let Sj=null;function GZe(t){let e=window.trustedTypes;return e?(Sj||(Sj=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Sj.createHTML(t)):t}function XZe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Npe().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&Lpe[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=GZe(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function YZe(t){let e=t.querySelectorAll(gs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function QZe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=tt.from(l.create(r[a+1],o)),i++,s++}return new At(o,i,s)}const Vs={},qs={},ZZe={touchstart:!0,touchmove:!0};class JZe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function eJe(t){for(let e in Vs){let n=Vs[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{nJe(t,r)&&!o4(t,r)&&(t.editable||!(r.type in qs))&&n(t,r)},ZZe[e]?{passive:!0}:void 0)}Ws&&t.dom.addEventListener("input",()=>null),UF(t)}function Lf(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function tJe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function UF(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>o4(t,r))})}function o4(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function nJe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function rJe(t,e){!o4(t,e)&&Vs[e.type]&&(t.editable||!(e.type in qs))&&Vs[e.type](t,e)}qs.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!zpe(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(pd&&gs&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Pv&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,up(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||VZe(t,n)?n.preventDefault():Lf(t,"key")};qs.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};qs.keypress=(t,e)=>{let n=e;if(zpe(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||wl&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Mn)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o,i))&&t.dispatch(i()),n.preventDefault()}};function p2(t){return{left:t.clientX,top:t.clientY}}function oJe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function i4(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function ev(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function iJe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&cn.isSelectable(r)?(ev(t,new cn(n)),!0):!1}function sJe(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof cn&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(cn.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(ev(t,cn.create(t.state.doc,o)),!0):!1}function aJe(t,e,n,r,o){return i4(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?sJe(t,n):iJe(t,n))}function lJe(t,e,n,r){return i4(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function cJe(t,e,n,r){return i4(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||uJe(t,n,r)}function uJe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ev(t,Mn.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ev(t,Mn.create(r,a+1,a+1+s.content.size));else if(cn.isSelectable(s))ev(t,cn.create(r,a));else continue;return!0}}function s4(t){return OI(t)}const Fpe=wl?"metaKey":"ctrlKey";Vs.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=s4(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&oJe(n,t.input.lastClick)&&!n[Fpe]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=t.posAtCoords(p2(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new dJe(t,s,n,!!r)):(i=="doubleClick"?lJe:cJe)(t,s.pos,s.inside,n)?n.preventDefault():Lf(t,"pointer"))};class dJe{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Fpe],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof cn&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ac&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Lf(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Sd(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(p2(e))),this.updateAllowDefault(e),this.allowDefault||!n?Lf(this.view,"pointer"):aJe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ws&&this.mightDrag&&!this.mightDrag.node.isAtom||gs&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ev(this.view,zn.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Lf(this.view,"pointer")}move(e){this.updateAllowDefault(e),Lf(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Vs.touchstart=t=>{t.input.lastTouch=Date.now(),s4(t),Lf(t,"pointer")};Vs.touchmove=t=>{t.input.lastTouch=Date.now(),Lf(t,"pointer")};Vs.contextmenu=t=>s4(t);function zpe(t,e){return t.composing?!0:Ws&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const fJe=pd?5e3:-1;qs.compositionstart=qs.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Mn&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),OI(t,!0),t.markCursor=null;else if(OI(t,!e.selection.empty),Ac&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}Bpe(t,fJe)};qs.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Bpe(t,20))};function Bpe(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>OI(t),e))}function Hpe(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=pJe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function hJe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=iZe(e.focusNode,e.focusOffset),r=sZe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function pJe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function OI(t,e=!1){if(!(pd&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Hpe(t),e||t.docView&&t.docView.dirty){let n=t4(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function gJe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const wx=ba&&Wf<15||Pv&&dZe<604;Vs.copy=qs.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=wx?null:n.clipboardData,s=r.content(),{dom:a,text:l}=r4(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):gJe(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mJe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function vJe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Cx(t,r.value,null,o,e):Cx(t,r.textContent,r.innerHTML,o,e)},50)}function Cx(t,e,n,r,o){let i=Ape(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,i||At.empty)))return!0;if(!i)return!1;let s=mJe(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Upe(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}qs.paste=(t,e)=>{let n=e;if(t.composing&&!pd)return;let r=wx?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Cx(t,Upe(r),r.getData("text/html"),o,n)?n.preventDefault():vJe(t,n)};let Wpe=class{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}};const yJe=wl?"altKey":"ctrlKey";function Vpe(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[yJe]}Vs.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(p2(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof cn?o.to-1:o.to))){if(r&&r.mightDrag)s=cn.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(s=cn.create(t.state.doc,d.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:u}=r4(t,a);(!n.dataTransfer.files.length||!gs||vpe>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(wx?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",wx||n.dataTransfer.setData("text/plain",c),t.dragging=new Wpe(u,Vpe(t,n),s)};Vs.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};qs.dragover=qs.dragenter=(t,e)=>e.preventDefault();qs.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(p2(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",g=>{s=g(s,t)}):s=Ape(t,Upe(n.dataTransfer),wx?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&Vpe(t,n));if(t.someProp("handleDrop",g=>g(t,n,s||At.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?lpe(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=t.state.tr;if(a){let{node:g}=r;g?g.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,f=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(f))return;let h=c.doc.resolve(u);if(d&&cn.isSelectable(s.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new cn(h));else{let g=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,m,S,x)=>g=x),c.setSelection(n4(t,h,c.doc.resolve(g)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Vs.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Sd(t)},20))};Vs.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Vs.beforeinput=(t,e)=>{if(gs&&pd&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,up(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in qs)Vs[t]=qs[t];function Ex(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class RI{constructor(e,n){this.toDOM=e,this.spec=n||Rp,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new Tl(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof RI&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ex(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class qf{constructor(e,n){this.attrs=e,this.spec=n||Rp}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new Tl(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof qf&&Ex(this.attrs,e.attrs)&&Ex(this.spec,e.spec)}static is(e){return e.type instanceof qf}destroy(){}}class a4{constructor(e,n){this.attrs=e,this.spec=n||Rp}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new Tl(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof a4&&Ex(this.attrs,e.attrs)&&Ex(this.spec,e.spec)}destroy(){}}class Tl{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Tl(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Tl(e,e,new RI(n,r))}static inline(e,n,r,o){return new Tl(e,n,new qf(r,o))}static node(e,n,r,o){return new Tl(e,n,new a4(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof qf}get widget(){return this.type instanceof RI}}const Pm=[],Rp={};class ii{constructor(e,n){this.local=e.length?e:Pm,this.children=n.length?n:Pm}static create(e,n){return n.length?kI(n,e,0,Rp):cs}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==cs||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Rp)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?bJe(this.children,s||[],e,n,r,o,i):s?new ii(s.sort(kp),Pm):cs}add(e,n){return n.length?this==cs?ii.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=Kpe(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,kI(u,a,c+1,Rp)),i+=3}});let s=qpe(i?Gpe(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new ii(s.length?this.local.concat(s).sort(kp):this.local,o||this.children)}remove(e){return e.length==0||this==cs?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=cs?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new ii(o,r):cs}forChild(e,n){if(this==cs)return this;if(n.isLeaf)return ii.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof qf){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new ii(o.sort(kp),Pm);return r?new Tf([a,r]):a}return r||cs}eq(e){if(this==e)return!0;if(!(e instanceof ii)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return l4(this.localsInner(e))}localsInner(e){if(this==cs)return Pm;if(e.inlineContent||!this.local.some(qf.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof qf||n.push(this.local[r]);return n}forEachSet(e){e(this)}}ii.empty=new ii([],[]);ii.removeOverlap=l4;const cs=ii.empty;class Tf{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Rp));return Tf.from(r)}forChild(e,n){if(n.isLeaf)return ii.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=cs&&(i instanceof Tf?r=r.concat(i.members):r.push(i))}return Tf.from(r)}eq(e){if(!(e instanceof Tf)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?l4(r?n:n.sort(kp)):Pm}static from(e){switch(e.length){case 0:return cs;case 1:return e[0];default:return new Tf(e.every(n=>n instanceof ii)?e:e.reduce((n,r)=>n.concat(r instanceof ii?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function bJe(t,e,n,r,o,i,s){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,g,y)=>{let m=y-g-(h-f);for(let S=0;S<a.length;S+=3){let x=a[S+1];if(x<0||f>x+u-d)continue;let C=a[S]+u-d;h>=C?a[S+1]=f<=C?-2:-1:f>=u&&m&&(a[S]+=m,a[S+1]+=m)}d+=m}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),h=f-o,{index:g,offset:y}=r.content.findIndex(d),m=r.maybeChild(g);if(m&&y==d&&y+m.nodeSize==h){let S=a[c+2].mapInner(n,m,u+1,t[c]+i+1,s);S!=cs?(a[c]=d,a[c+1]=h,a[c+2]=S):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=SJe(a,t,e,n,o,i,s),u=kI(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<a.length&&a[f]<h;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new ii(e.sort(kp),a)}function qpe(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Tl(o.from+e,o.to+e,o.type))}return n}function SJe(t,e,n,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?n.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function Kpe(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Gpe(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function kI(t,e,n,r){let o=[],i=!1;e.forEach((a,l)=>{let c=Kpe(t,a,l+n);if(c){i=!0;let u=kI(c,a,n+l+1,r);u!=cs&&o.push(l,l+a.nodeSize,u)}});let s=qpe(i?Gpe(t):t,-n).sort(kp);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new ii(s,o):cs}function kp(t,e){return t.from-e.from||t.to-e.to}function l4(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),sJ(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),sJ(e,o,r.copy(i.from,r.to)));break}}}return e}function sJ(t,e,n){for(;e<t.length&&kp(n,t[e])>0;)e++;t.splice(e,0,n)}function xj(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=cs&&e.push(r)}),t.cursorWrapper&&e.push(ii.create(t.state.doc,[t.cursorWrapper.deco])),Tf.from(e)}const xJe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},wJe=ba&&Wf<=11;class CJe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class EJe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new CJe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);ba&&Wf<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),wJe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,xJe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ZZ(this.view)){if(this.suppressingSelectionUpdates)return Sd(this.view);if(ba&&Wf<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&tg(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=Ev(i))n.add(i);for(let i=e.anchorNode;i;i=Ev(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ZZ(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(Ac&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||IJe(e,d)!=h)&&f.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&f2(r)&&(c=t4(e))&&c.eq(zn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Sd(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),PJe(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Sd(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(ba&&Wf<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let s=o&&o.parentNode==e.target?Fi(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?Fi(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let aJ=new WeakMap,lJ=!1;function PJe(t){if(!aJ.has(t)&&(aJ.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ac,lJ)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),lJ=!0}}function cJ(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return tg(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function _Je(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return cJ(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?cJ(t,n):null}function IJe(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function TJe(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],f2(l)||c.push({node:l.focusNode,offset:l.focusOffset})),gs&&t.input.lastKeyCode===8)for(let m=i;m>o;m--){let S=r.childNodes[m-1],x=S.pmViewDesc;if(S.nodeName=="BR"&&!x){i=m;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||Zm.fromSchema(t.state.schema),h=d.resolve(s),g=null,y=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:o,to:i,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:MJe,context:h});if(c&&c[0].pos!=null){let m=c[0].pos,S=c[1]&&c[1].pos;S==null&&(S=m),g={anchor:m+s,head:S+s}}return{doc:y,sel:g,from:s,to:a}}function MJe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ws&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ws&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const OJe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function RJe(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let M=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=t4(t,M);if(R&&!t.state.selection.eq(R)){if(gs&&pd&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",j=>j(t,up(13,"Enter"))))return;let A=t.state.tr.setSelection(R);M=="pointer"?A.setMeta("pointer",!0):M=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),t.dispatch(A)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=TJe(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let g=$Je(d.content,c.doc.content,c.from,f,h);if(g&&t.input.domChangeCount++,(Pv&&t.input.lastIOSEnter>Date.now()-225||pd)&&o.some(M=>M.nodeType==1&&!OJe.test(M.nodeName))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",M=>M(t,up(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!g)if(r&&l instanceof Mn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))g={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let M=uJ(t,t.state.doc,c.sel);if(M&&!M.eq(t.state.selection)){let R=t.state.tr.setSelection(M);i&&R.setMeta("composition",i),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof Mn&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),ba&&Wf<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>c.from&&c.doc.textBetween(g.start-c.from-1,g.start-c.from+1)==" "&&(g.start--,g.endA--,g.endB--);let y=c.doc.resolveNoCache(g.start-c.from),m=c.doc.resolveNoCache(g.endB-c.from),S=u.resolve(g.start),x=y.sameParent(m)&&y.parent.inlineContent&&S.end()>=g.endA,C;if((Pv&&t.input.lastIOSEnter>Date.now()-225&&(!x||o.some(M=>M.nodeName=="DIV"||M.nodeName=="P"))||!x&&y.pos<c.doc.content.size&&(!y.sameParent(m)||!y.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(y.pos,m.pos,"",""))&&(C=zn.findFrom(c.doc.resolve(y.pos+1),1,!0))&&C.head>y.pos)&&t.someProp("handleKeyDown",M=>M(t,up(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>g.start&&AJe(u,g.start,g.endA,y,m)&&t.someProp("handleKeyDown",M=>M(t,up(8,"Backspace")))){pd&&gs&&t.domObserver.suppressSelectionUpdates();return}gs&&g.endB==g.start&&(t.input.lastChromeDelete=Date.now()),pd&&!x&&y.start()!=m.start()&&m.parentOffset==0&&y.depth==m.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==g.endA&&(g.endB-=2,m=c.doc.resolveNoCache(g.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(M){return M(t,up(13,"Enter"))})},20));let E=g.start,P=g.endA,I=M=>{let R=M||t.state.tr.replace(E,P,c.doc.slice(g.start-c.from,g.endB-c.from));if(c.sel){let A=uJ(t,R.doc,c.sel);A&&!(gs&&t.composing&&A.empty&&(g.start!=g.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==E||A.head==R.mapping.map(P)-1)||ba&&A.empty&&A.head==E)&&R.setSelection(A)}return i&&R.setMeta("composition",i),R.scrollIntoView()},T;if(x){if(y.pos==m.pos){ba&&Wf<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Sd(t),20));let M=I(t.state.tr.delete(E,P)),R=u.resolve(g.start).marksAcross(u.resolve(g.endA));R&&M.ensureMarks(R),t.dispatch(M)}else if(g.endA==g.endB&&(T=kJe(y.parent.content.cut(y.parentOffset,m.parentOffset),S.parent.content.cut(S.parentOffset,g.endA-S.start())))){let M=I(t.state.tr);T.type=="add"?M.addMark(E,P,T.mark):M.removeMark(E,P,T.mark),t.dispatch(M)}else if(y.parent.child(y.index()).isText&&y.index()==m.index()-(m.textOffset?0:1)){let M=y.parent.textBetween(y.parentOffset,m.parentOffset),R=()=>I(t.state.tr.insertText(M,E,P));t.someProp("handleTextInput",A=>A(t,E,P,M,R))||t.dispatch(R())}}else t.dispatch(I())}function uJ(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:n4(t,e.resolve(n.anchor),e.resolve(n.head))}function kJe(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(tt.from(c).eq(t))return{mark:a,type:s}}function AJe(t,e,n,r,o){if(n-e<=o.pos-r.pos||wj(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(wj(i,!0,!0));return!s.parent.isTextblock||s.pos>n||wj(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function wj(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function $Je(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&t.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&dJ(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&dJ(t.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function dJ(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Xpe{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new JZe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(mJ),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=pJ(this),hJ(this),this.nodeViews=gJ(this),this.docView=qZ(this.state.doc,fJ(this),xj(this),this.dom,this),this.domObserver=new EJe(this,(r,o,i,s)=>RJe(this,r,o,i,s)),this.domObserver.start(),eJe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&UF(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(mJ),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(Hpe(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=gJ(this);jJe(h,this.nodeViews)&&(this.nodeViews=h,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&UF(this),this.editable=pJ(this),hJ(this);let l=xj(this),c=fJ(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(o.selection))&&(s=!0);let f=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&pZe(this);if(s){this.domObserver.stop();let h=d&&(ba||gs)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&DJe(o.selection,e.selection);if(d){let g=gs?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=hJe(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=qZ(e.doc,c,l,this.dom,this)),g&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&NZe(this))?Sd(this,h):(Ope(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&gZe(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof cn){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&zZ(this,n.getBoundingClientRect(),e)}else zZ(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new Wpe(e.slice,e.move,o<0?void 0:cn.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(ba){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&mZe(this.dom),Sd(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return xZe(this,e)}coordsAtPos(e,n=1){return wpe(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return _Ze(this,n||this.state,e)}pasteHTML(e,n){return Cx(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Cx(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return r4(this,e)}destroy(){this.docView&&(tJe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],xj(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,rZe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return rJe(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ws&&this.root.nodeType===11&&lZe(this.dom.ownerDocument)==this.dom&&_Je(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Xpe.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function fJ(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Tl.node(0,t.state.doc.content.size,e)]}function hJ(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Tl.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function pJ(t){return!t.someProp("editable",e=>e(t.state)===!1)}function DJe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function gJ(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function jJe(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function mJ(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var oh={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},AI={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},LJe=typeof navigator<"u"&&/Mac/.test(navigator.platform),NJe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var zi=0;zi<10;zi++)oh[48+zi]=oh[96+zi]=String(zi);for(var zi=1;zi<=24;zi++)oh[zi+111]="F"+zi;for(var zi=65;zi<=90;zi++)oh[zi]=String.fromCharCode(zi+32),AI[zi]=String.fromCharCode(zi);for(var Cj in oh)AI.hasOwnProperty(Cj)||(AI[Cj]=oh[Cj]);function FJe(t){var e=LJe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||NJe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?AI:oh)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const zJe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),BJe=typeof navigator<"u"&&/Win/.test(navigator.platform);function HJe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))zJe?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function UJe(t){let e=Object.create(null);for(let n in t)e[HJe(n)]=t[n];return e}function Ej(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function WJe(t){return new Xi({props:{handleKeyDown:Ype(t)}})}function Ype(t){let e=UJe(t);return function(n,r){let o=FJe(r),i,s=e[Ej(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Ej(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(BJe&&r.ctrlKey&&r.altKey)&&(i=oh[r.keyCode])&&i!=o){let a=e[Ej(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const c4=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Qpe(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Zpe=(t,e,n)=>{let r=Qpe(t,n);if(!r)return!1;let o=u4(r);if(!o){let s=r.blockRange(),a=s&&ay(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(age(t,o,e,-1))return!0;if(r.parent.content.size==0&&(_v(i,"end")||cn.isSelectable(i)))for(let s=r.depth;;s--){let a=u2(t.doc,r.before(s),r.after(s),At.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(_v(i,"end")?zn.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):cn.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},VJe=(t,e,n)=>{let r=Qpe(t,n);if(!r)return!1;let o=u4(r);return o?Jpe(t,o,e):!1},qJe=(t,e,n)=>{let r=tge(t,n);if(!r)return!1;let o=d4(r);return o?Jpe(t,o,e):!1};function Jpe(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=u2(t.doc,i,l,At.empty);if(!c||c.from!=i||c instanceof vi&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(Mn.create(u.doc,i)),n(u.scrollIntoView())}return!0}function _v(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const ege=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=u4(r)}let s=i&&i.nodeBefore;return!s||!cn.isSelectable(s)?!1:(e&&e(t.tr.setSelection(cn.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function u4(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function tge(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const nge=(t,e,n)=>{let r=tge(t,n);if(!r)return!1;let o=d4(r);if(!o)return!1;let i=o.nodeAfter;if(age(t,o,e,1))return!0;if(r.parent.content.size==0&&(_v(i,"start")||cn.isSelectable(i))){let s=u2(t.doc,r.before(),r.after(),At.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(_v(i,"start")?zn.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):cn.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},rge=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=d4(r)}let s=i&&i.nodeAfter;return!s||!cn.isSelectable(s)?!1:(e&&e(t.tr.setSelection(cn.create(t.doc,i.pos)).scrollIntoView()),!0)};function d4(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const KJe=(t,e)=>{let n=t.selection,r=n instanceof cn,o;if(r){if(n.node.isTextblock||!yh(t.doc,n.from))return!1;o=n.from}else if(o=c2(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(cn.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},GJe=(t,e)=>{let n=t.selection,r;if(n instanceof cn){if(n.node.isTextblock||!yh(t.doc,n.to))return!1;r=n.to}else if(r=c2(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},XJe=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&ay(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},oge=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function f4(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const YJe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=f4(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(zn.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},ige=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Ga||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=f4(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(Mn.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},sge=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(bd(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&ay(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function QJe(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof cn&&e.selection.node.isBlock)return!r.parentOffset||!bd(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){l=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),a=f4(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),i.unshift(l&&a?{type:a}:null),s=h;break}else{if(h==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof Mn||e.selection instanceof Ga)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=bd(u.doc,d,i.length,i);if(f||(i[0]=a?{type:a}:null,f=bd(u.doc,d,i.length,i)),!f)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(s).type!=a){let h=u.mapping.map(r.before(s)),g=u.doc.resolve(h);a&&r.node(s-1).canReplaceWith(g.index(),g.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return n&&n(u.scrollIntoView()),!0}}const ZJe=QJe(),JJe=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(cn.create(t.doc,o))),!0)};function eet(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||yh(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function age(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&eet(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let h=e.pos+i.nodeSize,g=tt.empty;for(let S=s.length-1;S>=0;S--)g=tt.from(s[S].create(null,g));g=tt.from(o.copy(g));let y=t.tr.step(new wi(e.pos-1,h,e.pos,h,new At(g,1,0),s.length,!0)),m=y.doc.resolve(h+2*s.length);m.nodeAfter&&m.nodeAfter.type==o.type&&yh(y.doc,m.pos)&&y.join(m.pos),n(y.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:zn.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&ay(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&_v(i,"start",!0)&&_v(o,"end")){let h=o,g=[];for(;g.push(h),!h.isTextblock;)h=h.lastChild;let y=i,m=1;for(;!y.isTextblock;y=y.firstChild)m++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let S=tt.empty;for(let C=g.length-1;C>=0;C--)S=tt.from(g[C].copy(S));let x=t.tr.step(new wi(e.pos-g.length,e.pos+i.nodeSize,e.pos+m,e.pos+i.nodeSize-m,new At(S,g.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function lge(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(Mn.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const tet=lge(-1),net=lge(1);function ret(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&ZB(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function vJ(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function h4(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}h4(c4,Zpe,ege);h4(c4,nge,rge);h4(oge,ige,sge,ZJe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function oet(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return iet(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function iet(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);i=new _I(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new _I(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=ZB(i,n,r,e);return a?(t&&set(t,e,a,o,n),!0):!1}function set(t,e,n,r,o){let i=tt.empty;for(let u=n.length-1;u>=0;u--)i=tt.from(n[u].type.create(n[u].attrs,i));t.step(new wi(e.start-(r?2:0),e.end,e.start,e.end,new At(i,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==o&&(s=u+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&bd(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function aet(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?cet(e,n,t,i):uet(e,n,i):!0:!1}}function cet(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new wi(i-1,s,i,s,new At(tt.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new _I(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=ay(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return yh(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function uet(t,e,n){let r=t.tr,o=n.parent;for(let h=n.end,g=n.endIndex-1,y=n.startIndex;g>y;g--)h-=o.child(g).nodeSize,r.delete(h-1,h+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?tt.empty:tt.from(o))))return!1;let d=i.pos,f=d+s.nodeSize;return r.step(new wi(d-(a?1:0),f+(l?1:0),d+1,f-1,new At((a?tt.empty:tt.from(o.copy(tt.empty))).append(l?tt.empty:tt.from(o.copy(tt.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function det(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=tt.from(c?t.create():null),d=new At(tt.from(t.create(null,tt.from(a.type.create(null,u)))),c?3:1,0),f=i.start,h=i.end;n(e.tr.step(new wi(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function g2(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class m2{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,c=e||i.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...y)=>{const m=this.buildProps(c,n),S=h(...y)(m);return a.push(S),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:g2({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class fet{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Ut(t,e,n){return t.config[e]===void 0&&t.parent?Ut(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ut(t.parent,e,n):null}):t.config[e]}function v2(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function cge(t){const e=[],{nodeExtensions:n,markExtensions:r}=v2(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=Ut(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...i,...h}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=Ut(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:s.name,name:u,attribute:f})})}),e}function Ei(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Pi(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=i}),r},{})}function WF(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Pi(n,r),{})}function uge(t){return typeof t=="function"}function qn(t,e=void 0,...n){return uge(t)?e?t.bind(e)(...n):t(...n):t}function het(t={}){return Object.keys(t).length===0&&t.constructor===Object}function pet(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function yJ(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):pet(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function bJ(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&het(n)?!1:n!=null))}function dge(t,e){var n;const r=cge(t),{nodeExtensions:o,markExtensions:i}=v2(t),s=(n=o.find(c=>Ut(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(S=>S.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((S,x)=>{const C=Ut(x,"extendNodeSchema",d);return{...S,...C?C(c):{}}},{}),h=bJ({...f,content:qn(Ut(c,"content",d)),marks:qn(Ut(c,"marks",d)),group:qn(Ut(c,"group",d)),inline:qn(Ut(c,"inline",d)),atom:qn(Ut(c,"atom",d)),selectable:qn(Ut(c,"selectable",d)),draggable:qn(Ut(c,"draggable",d)),code:qn(Ut(c,"code",d)),whitespace:qn(Ut(c,"whitespace",d)),linebreakReplacement:qn(Ut(c,"linebreakReplacement",d)),defining:qn(Ut(c,"defining",d)),isolating:qn(Ut(c,"isolating",d)),attrs:Object.fromEntries(u.map(S=>{var x;return[S.name,{default:(x=S==null?void 0:S.attribute)===null||x===void 0?void 0:x.default}]}))}),g=qn(Ut(c,"parseHTML",d));g&&(h.parseDOM=g.map(S=>yJ(S,u)));const y=Ut(c,"renderHTML",d);y&&(h.toDOM=S=>y({node:S,HTMLAttributes:WF(S,u)}));const m=Ut(c,"renderText",d);return m&&(h.toText=m),[c.name,h]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(m=>m.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((m,S)=>{const x=Ut(S,"extendMarkSchema",d);return{...m,...x?x(c):{}}},{}),h=bJ({...f,inclusive:qn(Ut(c,"inclusive",d)),excludes:qn(Ut(c,"excludes",d)),group:qn(Ut(c,"group",d)),spanning:qn(Ut(c,"spanning",d)),code:qn(Ut(c,"code",d)),attrs:Object.fromEntries(u.map(m=>{var S;return[m.name,{default:(S=m==null?void 0:m.attribute)===null||S===void 0?void 0:S.default}]}))}),g=qn(Ut(c,"parseHTML",d));g&&(h.parseDOM=g.map(m=>yJ(m,u)));const y=Ut(c,"renderHTML",d);return y&&(h.toDOM=m=>y({mark:m,HTMLAttributes:WF(m,u)})),[c.name,h]}));return new Qhe({topNode:s,nodes:a,marks:l})}function Pj(t,e){return e.nodes[t]||e.marks[t]||null}function SJ(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function y2(t,e){const n=Cg.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const get=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),n};function p4(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class b2{constructor(e){this.find=e.find,this.handler=e.handler}}const met=(t,e)=>{if(p4(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function hE(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=get(c)+i;return s.forEach(f=>{if(u)return;const h=met(d,f.find);if(!h)return;const g=l.state.tr,y=g2({state:l.state,transaction:g}),m={from:r-(h[0].length-i.length),to:o},{commands:S,chain:x,can:C}=new m2({editor:n,state:y});f.handler({state:y,range:m,match:h,commands:S,chain:x,can:C})===null||!g.steps.length||(g.setMeta(a,{transform:g,from:r,to:o,text:i}),l.dispatch(g),u=!0)}),u}function vet(t){const{editor:e,rules:n}=t,r=new Xi({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=y2(tt.from(u),s.schema);const{from:d}=l,f=d+u.length;hE({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return hE({editor:e,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&hE({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?hE({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function yet(t){return Object.prototype.toString.call(t).slice(8,-1)}function pE(t){return yet(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function S2(t,e){const n={...t};return pE(t)&&pE(e)&&Object.keys(e).forEach(r=>{pE(e[r])&&pE(t[r])?n[r]=S2(t[r],e[r]):n[r]=e[r]}),n}class Tu{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qn(Ut(this,"addOptions",{name:this.name}))),this.storage=qn(Ut(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Tu(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>S2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Tu(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=qn(Ut(n,"addOptions",{name:n.name})),n.storage=qn(Ut(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function bet(t){return typeof t=="number"}class xet{constructor(e){this.find=e.find,this.handler=e.handler}}const wet=(t,e,n)=>{if(p4(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function Cet(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:u}=new m2({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,o,(h,g)=>{if(!h.isTextblock||h.type.spec.code)return;const y=Math.max(r,g),m=Math.min(o,g+h.content.size),S=h.textBetween(y-g,m-g,void 0,"");wet(S,i.find,s).forEach(C=>{if(C.index===void 0)return;const E=y+C.index+1,P=E+C[0].length,I={from:n.tr.mapping.map(E),to:n.tr.mapping.map(P)},T=i.handler({state:n,range:I,match:C,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(T)})}),d.every(h=>h!==null)}let gE=null;const Eet=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Pet(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:h,pasteEvt:g})=>{const y=u.tr,m=g2({state:u,transaction:y});if(!(!Cet({editor:e,state:m,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:g,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new Xi({view(d){const f=g=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(g.target)?d.dom.parentElement:null,r&&(gE=e)},h=()=>{gE&&(gE=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,a=f,!i){const h=gE;h&&setTimeout(()=>{const g=h.state.selection;g&&h.commands.deleteRange({from:g.from,to:g.to})},10)}return!1},paste:(d,f)=>{var h;const g=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return s=f,o=!!(g!=null&&g.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const g=d[0],y=g.getMeta("uiEvent")==="paste"&&!o,m=g.getMeta("uiEvent")==="drop"&&!i,S=g.getMeta("applyPasteRules"),x=!!S;if(!y&&!m&&!x)return;if(x){let{text:P}=S;typeof P=="string"?P=P:P=y2(tt.from(P),h.schema);const{from:I}=S,T=I+P.length,M=Eet(P);return l({rule:u,state:h,from:I,to:{b:T},pasteEvt:M})}const C=f.doc.content.findDiffStart(h.doc.content),E=f.doc.content.findDiffEnd(h.doc.content);if(!(!bet(C)||!E||C===E.b))return l({rule:u,state:h,from:C,to:E,pasteEvt:s})}}))}function _et(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class vp{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=vp.resolve(e),this.schema=dge(this.extensions,n),this.setupExtensions()}static resolve(e){const n=vp.sort(vp.flatten(e)),r=_et(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Ut(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=Ut(r,"priority")||100,s=Ut(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:Pj(n.name,this.schema)},o=Ut(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=vp.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Pj(s.name,this.schema)},l=[],c=Ut(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&Ut(s,"exitable",a)&&(u.ArrowRight=()=>Tu.handleExit({editor:e,mark:s})),c){const y=Object.fromEntries(Object.entries(c()).map(([m,S])=>[m,()=>S({editor:e})]));u={...u,...y}}const d=WJe(u);l.push(d);const f=Ut(s,"addInputRules",a);SJ(s,e.options.enableInputRules)&&f&&r.push(...f());const h=Ut(s,"addPasteRules",a);SJ(s,e.options.enablePasteRules)&&h&&o.push(...h());const g=Ut(s,"addProseMirrorPlugins",a);if(g){const y=g();l.push(...y)}return l}).flat();return[vet({editor:e,rules:r}),...Pet({editor:e,rules:o}),...i]}get attributes(){return cge(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=v2(this.extensions);return Object.fromEntries(n.filter(r=>!!Ut(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Ei(r.name,this.schema)},s=Ut(r,"addNodeView",i);if(!s)return[];const a=(l,c,u,d,f)=>{const h=WF(l,o);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Pj(e.name,this.schema)};e.type==="mark"&&(!((n=qn(Ut(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=Ut(e,"onBeforeCreate",r),i=Ut(e,"onCreate",r),s=Ut(e,"onUpdate",r),a=Ut(e,"onSelectionUpdate",r),l=Ut(e,"onTransaction",r),c=Ut(e,"onFocus",r),u=Ut(e,"onBlur",r),d=Ut(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ki{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qn(Ut(this,"addOptions",{name:this.name}))),this.storage=qn(Ut(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ki(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>S2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ki({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=qn(Ut(n,"addOptions",{name:n.name})),n.storage=qn(Ut(n,"addStorage",{name:n.name,options:n.options})),n}}function fge(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=i);const h=s==null?void 0:s[l.type.name];if(h)return u&&(a+=h({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,o-c))}),a}function g4(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const Iet=Ki.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Xi({key:new rl("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=g4(n);return fge(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Tet=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Met=(t=!1)=>({commands:e})=>e.setContent("",t),Oet=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),h=d.blockRange(f);if(!h)return;const g=ay(h);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,y)}(g||g===0)&&e.lift(h,g)})}),!0},Ret=t=>e=>t(e),ket=()=>({state:t,dispatch:e})=>ige(t,e),Aet=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new Mn(r.doc.resolve(s-1))),!0},$et=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),l=o.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1},Det=t=>({tr:e,state:n,dispatch:r})=>{const o=Ei(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},jet=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},Let=()=>({state:t,dispatch:e})=>c4(t,e),Net=()=>({commands:t})=>t.keyboardShortcut("Enter"),Fet=()=>({state:t,dispatch:e})=>YJe(t,e);function $I(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:p4(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function hge(t,e,n={}){return t.find(r=>r.type===e&&$I(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function xJ(t,e,n={}){return!!hge(t,e,n)}function x2(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!hge([...o.node.marks],e,n)))return;let s=o.index,a=t.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&xJ([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&xJ([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Sh(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const zet=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=Sh(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const d=x2(l,i,e);if(d&&d.from<=c&&d.to>=u){const f=Mn.create(s,d.from,d.to);n.setSelection(f)}}return!0},Bet=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function pge(t){return t instanceof Mn}function yp(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function gge(t,e=null){if(!e)return null;const n=zn.atStart(t),r=zn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?Mn.create(t,yp(0,o,i),yp(t.content.size,o,i)):Mn.create(t,yp(e,o,i),yp(e,o,i))}function Het(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function m4(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Uet=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(m4()||Het())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!pge(n.state.selection))return s(),!0;const a=gge(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},Wet=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),Vet=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),mge=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&mge(r)}return t};function Hb(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return mge(n)}function DI(t,e,n){if(t instanceof Mc||t instanceof tt)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return tt.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),DI("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new Qhe({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Zm.fromSchema(l).parseSlice(Hb(t),n.parseOptions):Zm.fromSchema(l).parse(Hb(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Zm.fromSchema(e);return n.slice?i.parseSlice(Hb(t),n.parseOptions).content:i.parse(Hb(t),n.parseOptions)}return DI("",e,n)}function qet(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof vi||o instanceof wi))return;const i=t.mapping.maps[r];let s=0;i.forEach((a,l,c,u)=>{s===0&&(s=u)}),t.setSelection(zn.near(t.doc.resolve(s),n))}const Ket=t=>!("type"in t),Get=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=DI(e,i.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(g){return i.emit("contentError",{editor:i,error:g,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((Ket(a)?a:[a]).forEach(g=>{g.check(),u=u?g.isText&&g.marks.length===0:!1,d=d?g.isBlock:!1}),l===c&&d){const{parent:g}=r.doc.resolve(l);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(l-=1,c+=1)}let h;if(u){if(Array.isArray(e))h=e.map(g=>g.text||"").join("");else if(e instanceof tt){let g="";e.forEach(y=>{y.text&&(g+=y.text)}),h=g}else typeof e=="object"&&e&&e.text?h=e.text:h=e;r.insertText(h,l,c)}else h=a,r.replaceWith(l,c,h);n.updateSelection&&qet(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:h}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:h})}return!0},Xet=()=>({state:t,dispatch:e})=>KJe(t,e),Yet=()=>({state:t,dispatch:e})=>GJe(t,e),Qet=()=>({state:t,dispatch:e})=>Zpe(t,e),Zet=()=>({state:t,dispatch:e})=>nge(t,e),Jet=()=>({state:t,dispatch:e,tr:n})=>{try{const r=c2(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},ett=()=>({state:t,dispatch:e,tr:n})=>{try{const r=c2(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},ttt=()=>({state:t,dispatch:e})=>VJe(t,e),ntt=()=>({state:t,dispatch:e})=>qJe(t,e);function vge(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function rtt(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))m4()||vge()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const ott=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=rtt(t).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function Px(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?Ei(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),g=Math.min(o,f+d.nodeSize);a.push({node:d,from:h,to:g})});const l=o-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>$I(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}const itt=(t,e={})=>({state:n,dispatch:r})=>{const o=Ei(t,n.schema);return Px(n,o,e)?XJe(n,r):!1},stt=()=>({state:t,dispatch:e})=>sge(t,e),att=t=>({state:e,dispatch:n})=>{const r=Ei(t,e.schema);return aet(r)(e,n)},ltt=()=>({state:t,dispatch:e})=>oge(t,e);function w2(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function wJ(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const ctt=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=w2(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=Ei(t,r.schema)),a==="mark"&&(s=Sh(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&n.setNodeMarkup(u,void 0,wJ(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&n.addMark(u,u+c.nodeSize,s.create(wJ(d.attrs,e)))})})}),!0):!1},utt=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),dtt=()=>({tr:t,dispatch:e})=>{if(e){const n=new Ga(t.doc);t.setSelection(n)}return!0},ftt=()=>({state:t,dispatch:e})=>ege(t,e),htt=()=>({state:t,dispatch:e})=>rge(t,e),ptt=()=>({state:t,dispatch:e})=>JJe(t,e),gtt=()=>({state:t,dispatch:e})=>net(t,e),mtt=()=>({state:t,dispatch:e})=>tet(t,e);function VF(t,e,n={},r={}){return DI(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const vtt=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:u}=i;if(n.preserveWhitespace!=="full"){const d=VF(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function yge(t,e){const n=Sh(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function ytt(t,e){const n=new hpe(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function btt(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Stt(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function xtt(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function v4(t){return e=>xtt(e.$from,t)}function C2(t,e){const n=vp.resolve(t);return dge(n,e)}function wtt(t,e){const n=C2(e),r=Mc.fromJSON(n,t);return y2(r.content,n)}function Ctt(t,e){const n=C2(e),r=Hb(t);return Zm.fromSchema(n).parse(r).toJSON()}function bge(t,e){const n={from:0,to:t.content.size};return fge(t,n,e)}function Ett(t,e,n){const{blockSeparator:r=`

`,textSerializers:o={}}=n||{},i=C2(e),s=Mc.fromJSON(i,t);return bge(s,{blockSeparator:r,textSerializers:{...g4(i),...o}})}function Ptt(t,e){const n=Ei(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function Sge(t,e){const n=w2(typeof e=="string"?e:e.name,t.schema);return n==="node"?Ptt(t,e):n==="mark"?yge(t,e):{}}function _tt(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function Itt(t){const e=_tt(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function Ttt(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),Itt(r)}function y4(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=x2(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function IP(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function qF(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?Sh(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>$I(d.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:d,$to:f})=>{const h=d.pos,g=f.pos;t.doc.nodesBetween(h,g,(y,m)=>{if(!y.isText&&!y.marks.length)return;const S=Math.max(h,m),x=Math.min(g,m+y.nodeSize),C=x-S;s+=C,a.push(...y.marks.map(E=>({mark:E,from:S,to:x})))})}),s===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>$I(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=s}function Mtt(t,e,n={}){if(!e)return Px(t,null,n)||qF(t,null,n);const r=w2(e,t.schema);return r==="node"?Px(t,e,n):r==="mark"?qF(t,e,n):!1}function CJ(t,e){const{nodeExtensions:n}=v2(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=qn(Ut(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function b4(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(b4(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function Ott(t){return t instanceof cn}function Rtt(t,e,n){var r;const{selection:o}=e;let i=null;if(pge(o)&&(i=o.$cursor),i){const a=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),g=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=h&&g}return!c}),c})}const ktt=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Sh(t,r.schema);if(o)if(s){const c=yge(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const g=Math.max(h,u),y=Math.min(h+f.nodeSize,d);f.marks.find(S=>S.type===l)?f.marks.forEach(S=>{l===S.type&&n.addMark(g,y,l.create({...S.attrs,...e}))}):n.addMark(g,y,l.create(e))})});return Rtt(r,n,l)},Att=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),$tt=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=Ei(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>vJ(i,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>vJ(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Dtt=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=yp(t,0,r.content.size),i=cn.create(r,o);e.setSelection(i)}return!0},jtt=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=Mn.atStart(r).from,a=Mn.atEnd(r).to,l=yp(o,s,a),c=yp(i,s,a),u=Mn.create(r,l,c);e.setSelection(u)}return!0},Ltt=t=>({state:e,dispatch:n})=>{const r=Ei(t,e.schema);return det(r)(e,n)};function EJ(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const Ntt=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,c=o.extensionManager.attributes,u=IP(c,a.node().type.name,a.node().attrs);if(i instanceof cn&&i.node.isBlock)return!a.parentOffset||!bd(s,a.pos)?!1:(r&&(t&&EJ(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:btt(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,g=bd(e.doc,e.mapping.map(a.pos),1,h);if(!h&&!g&&bd(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(g=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(g&&(i instanceof Mn&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,h),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const y=e.mapping.map(a.before()),m=e.doc.resolve(y);a.node(-1).canReplaceWith(m.index(),m.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&EJ(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return g},Ftt=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=Ei(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let S=tt.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let M=l.depth-x;M>=l.depth-3;M-=1)S=tt.from(l.node(M).copy(S));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,E={...IP(f,l.node().type.name,l.node().attrs),...e},P=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(E))||void 0;S=S.append(tt.from(a.createAndFill(null,P)||void 0));const I=l.before(l.depth-(x-1));n.replace(I,l.after(-C),new At(S,4-x,0));let T=-1;n.doc.nodesBetween(I,n.doc.content.size,(M,R)=>{if(T>-1)return!1;M.isTextblock&&M.content.size===0&&(T=R+1)}),T>-1&&n.setSelection(Mn.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const h=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,g={...IP(f,d.type.name,d.attrs),...e},y={...IP(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const m=h?[{type:a,attrs:g},{type:h,attrs:y}]:[{type:a,attrs:g}];if(!bd(n.doc,l.pos,2))return!1;if(o){const{selection:S,storedMarks:x}=r,{splittableMarks:C}=i.extensionManager,E=x||S.$to.parentOffset&&S.$from.marks();if(n.split(l.pos,2,m).scrollIntoView(),!E||!o)return!0;const P=E.filter(I=>C.includes(I.type.name));n.ensureMarks(P)}return!0},_j=(t,e)=>{const n=v4(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&yh(t.doc,n.pos)&&t.join(n.pos),!0},Ij=(t,e)=>{const n=v4(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&yh(t.doc,r)&&t.join(r),!0},ztt=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=o.extensionManager,h=Ei(t,s.schema),g=Ei(e,s.schema),{selection:y,storedMarks:m}=s,{$from:S,$to:x}=y,C=S.blockRange(x),E=m||y.$to.parentOffset&&y.$from.marks();if(!C)return!1;const P=v4(I=>CJ(I.type.name,d))(y);if(C.depth>=1&&P&&C.depth-P.depth<=1){if(P.node.type===h)return c.liftListItem(g);if(CJ(P.node.type.name,d)&&h.validContent(P.node.content)&&a)return l().command(()=>(i.setNodeMarkup(P.pos,h),!0)).command(()=>_j(i,h)).command(()=>Ij(i,h)).run()}return!n||!E||!a?l().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>_j(i,h)).command(()=>Ij(i,h)).run():l().command(()=>{const I=u().wrapInList(h,r),T=E.filter(M=>f.includes(M.type.name));return i.ensureMarks(T),I?!0:c.clearNodes()}).wrapInList(h,r).command(()=>_j(i,h)).command(()=>Ij(i,h)).run()},Btt=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Sh(t,r.schema);return qF(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},Htt=(t,e,n={})=>({state:r,commands:o})=>{const i=Ei(t,r.schema),s=Ei(e,r.schema),a=Px(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},Utt=(t,e={})=>({state:n,commands:r})=>{const o=Ei(t,n.schema);return Px(n,o,e)?r.lift(o):r.wrapIn(o,e)},Wtt=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},Vtt=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},qtt=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Sh(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&s){let{from:f,to:h}=a;const g=(i=c.marks().find(m=>m.type===l))===null||i===void 0?void 0:i.attrs,y=x2(c,l,g);y&&(f=y.from,h=y.to),n.removeMark(f,h,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},Ktt=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=w2(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=Ei(t,r.schema)),a==="mark"&&(s=Sh(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,f,h,g;n.selection.empty?r.doc.nodesBetween(c,u,(y,m)=>{i&&i===y.type&&(h=Math.max(m,c),g=Math.min(m+y.nodeSize,u),d=m,f=y)}):r.doc.nodesBetween(c,u,(y,m)=>{m<c&&i&&i===y.type&&(h=Math.max(m,c),g=Math.min(m+y.nodeSize,u),d=m,f=y),m>=c&&m<=u&&(i&&i===y.type&&n.setNodeMarkup(m,void 0,{...y.attrs,...e}),s&&y.marks.length&&y.marks.forEach(S=>{if(s===S.type){const x=Math.max(m,c),C=Math.min(m+y.nodeSize,u);n.addMark(x,C,s.create({...S.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),s&&f.marks.length&&f.marks.forEach(y=>{s===y.type&&n.addMark(h,g,s.create({...y.attrs,...e}))}))}),!0):!1},Gtt=(t,e={})=>({state:n,dispatch:r})=>{const o=Ei(t,n.schema);return ret(o,e)(n,r)},Xtt=(t,e={})=>({state:n,dispatch:r})=>{const o=Ei(t,n.schema);return oet(o,e)(n,r)};var Ytt=Object.freeze({__proto__:null,blur:Tet,clearContent:Met,clearNodes:Oet,command:Ret,createParagraphNear:ket,cut:Aet,deleteCurrentNode:$et,deleteNode:Det,deleteRange:jet,deleteSelection:Let,enter:Net,exitCode:Fet,extendMarkRange:zet,first:Bet,focus:Uet,forEach:Wet,insertContent:Vet,insertContentAt:Get,joinBackward:Qet,joinDown:Yet,joinForward:Zet,joinItemBackward:Jet,joinItemForward:ett,joinTextblockBackward:ttt,joinTextblockForward:ntt,joinUp:Xet,keyboardShortcut:ott,lift:itt,liftEmptyBlock:stt,liftListItem:att,newlineInCode:ltt,resetAttributes:ctt,scrollIntoView:utt,selectAll:dtt,selectNodeBackward:ftt,selectNodeForward:htt,selectParentNode:ptt,selectTextblockEnd:gtt,selectTextblockStart:mtt,setContent:vtt,setMark:ktt,setMeta:Att,setNode:$tt,setNodeSelection:Dtt,setTextSelection:jtt,sinkListItem:Ltt,splitBlock:Ntt,splitListItem:Ftt,toggleList:ztt,toggleMark:Btt,toggleNode:Htt,toggleWrap:Utt,undoInputRule:Wtt,unsetAllMarks:Vtt,unsetMark:qtt,updateAttributes:Ktt,wrapIn:Gtt,wrapInList:Xtt});const Qtt=Ki.create({name:"commands",addCommands(){return{...Ytt}}}),Ztt=Ki.create({name:"drop",addProseMirrorPlugins(){return[new Xi({key:new rl("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Jtt=Ki.create({name:"editable",addProseMirrorPlugins(){return[new Xi({key:new rl("editable"),props:{editable:()=>this.editor.options.editable}})]}}),ent=new rl("focusEvents"),tnt=Ki.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Xi({key:ent,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),nnt=Ki.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:h}=d,g=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,y=g.parent.type.spec.isolating,m=d.pos-d.parentOffset,S=y&&g.parent.childCount===1?m===d.pos:zn.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!S||S&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return m4()||vge()?i:o},addProseMirrorPlugins(){return[new Xi({key:new rl("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),o=t.some(y=>y.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=zn.atStart(e.doc).from,c=zn.atEnd(e.doc).to;if(i||!(s===l&&a===c)||!b4(n.doc))return;const f=n.tr,h=g2({state:n,transaction:f}),{commands:g}=new m2({editor:this.editor,state:h});if(g.clearNodes(),!!f.steps.length)return f}})]}}),rnt=Ki.create({name:"paste",addProseMirrorPlugins(){return[new Xi({key:new rl("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ont=Ki.create({name:"tabindex",addProseMirrorPlugins(){return[new Xi({key:new rl("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class dp{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new dp(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new dp(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new dp(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1),a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new dp(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new dp(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const int=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function snt(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class ant extends fet{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=snt(int,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=uge(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[Jtt,Iet.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),Qtt,tnt,nnt,ont,Ztt,rnt].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new vp(o,this)}createCommandManager(){this.commandManager=new m2({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=VF(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=VF(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=gge(n,this.options.autofocus);this.view=new Xpe(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Fm.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Sge(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return Mtt(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return y2(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return bge(this.state.doc,{blockSeparator:n,textSerializers:{...g4(this.schema),...r}})}get isEmpty(){return b4(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new dp(n,this)}get $doc(){return this.$pos(0)}}function rg(t){return new b2({find:t.find,handler:({state:e,range:n,match:r})=>{const o=qn(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),u=c+s.length;if(y4(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===t.type&&y!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const f=n.from+l+s.length;i.addMark(n.from+l,f,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function lnt(t){return new b2({find:t.find,handler:({state:e,range:n,match:r})=>{const o=qn(t.getAttributes,void 0,r)||{},{tr:i}=e,s=n.from;let a=n.to;const l=t.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,s+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?s:s-1;i.insert(c,t.type.create(o)).delete(i.mapping.map(s),i.mapping.map(a))}i.scrollIntoView()}})}function KF(t){return new b2({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=qn(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)}})}function _x(t){return new b2({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const i=qn(t.getAttributes,void 0,r)||{},s=e.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),c=l&&ZB(l,t.type,i);if(!c)return null;if(s.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,g=f||d.$to.parentOffset&&d.$from.marks();if(g){const y=g.filter(m=>h.includes(m.type.name));s.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,i).run()}const u=s.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&yh(s.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&s.join(n.from-1)}})}let Fc=class GF{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qn(Ut(this,"addOptions",{name:this.name}))),this.storage=qn(Ut(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new GF(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>S2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new GF(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=qn(Ut(n,"addOptions",{name:n.name})),n.storage=qn(Ut(n,"addStorage",{name:n.name,options:n.options})),n}};function ih(t){return new xet({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=qn(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(y4(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(m=>m===t.type&&m!==g.mark.type)).filter(g=>g.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d),c=n.from+u+a.length,s.addMark(n.from+u,c,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function S4(t,e,n){const{tipTapConfig:r,addFontsFromNode:o}=t.getTextOptions();nn(r,"textOptions.tipTapConfig must be set to use rich text"),nn(o,"textOptions.addFontsFromNode must be set to use rich text");const i=C2(r.extensions??[]),s=Mc.fromJSON(i,e),a=new Set;function l(u){a.add(u)}function c(u,d){d=o(u,d,l);for(const f of u.children)c(f,d)}return c(s,n),Array.from(a)}async function cnt({shouldReload:t=!0}={}){d9e();for(const e of wI.connectedInstances)await e.close();await Promise.all(KB().map(e=>_he(e))),u9e(),t&&window.location.reload()}typeof window<"u"&&(window.__tldraw__hardReset=cnt);function unt(t,e="_blank"){XM.openWindow(t,e)}fh("@tldraw/editor","3.13.1","esm");function xge(){const[t,e]=v.useState(!1);return v.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=()=>{e(n.matches)};return r(),n.addEventListener("change",r),()=>n.removeEventListener("change",r)},[]),t}const XF=v.createContext(null);function dnt({children:t}){const e=bw("a11y",{msg:"",priority:"assertive"}),n=v.useContext(XF),r=v.useMemo(()=>({currentMsg:e,announce(o){o&&e.set(o)}}),[e]);return n?w.jsx(w.Fragment,{children:t}):w.jsx(XF.Provider,{value:r,children:t})}function E2(){const t=v.useContext(XF);if(!t)throw new Error("useA11y must be used within a A11yContext.Provider");return t}const wge=v.createContext(null);function fnt({assetUrls:t,children:e}){return v.useEffect(()=>{for(const n of Object.values(t.icons)){if(!n)continue;const r=dx();r.src=n,r.decode()}for(const n of Object.values(t.embedIcons)){if(!n)continue;const r=dx();r.src=n,r.decode()}},[t]),w.jsx(wge.Provider,{value:t,children:e})}function x4(){const t=v.useContext(wge);if(!t)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return t}const YF={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.unlock-all":"Unlock all","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.export-all-as-png.short":"PNG","action.export-all-as-png":"Export as PNG","action.export-all-as-svg.short":"SVG","action.export-all-as-svg":"Export as SVG","action.fit-frame-to-content":"Fit to content","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.fork-project-on-tldraw":"Fork project on tldraw","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.paste-error-title":"Pasting failed","action.paste-error-description":"Could not paste due to missing clipboard permissions. Please enable the permissions and try again.","action.print":"Print","action.redo":"Redo","action.remove-frame":"Remove frame","action.rename":"Rename","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-paste-at-cursor.menu":"Paste at cursor","action.toggle-paste-at-cursor":"Toggle paste at cursor","action.toggle-wrap-mode.menu":"Select on wrap","action.toggle-wrap-mode":"Toggle Select on wrap","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-edge-scrolling.menu":"Edge scrolling","action.toggle-edge-scrolling":"Toggle edge scrolling","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-dynamic-size-mode.menu":"Dynamic size","action.toggle-dynamic-size-mode":"Toggle dynamic size","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.flatten-to-image":"Flatten","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","assets.files.size-too-big":"File size is too big","assets.files.type-not-allowed":"File type is not allowed","assets.files.upload-failed":"Upload failed","assets.files.amount-too-many":"Too many files","assets.url.failed":"Couldnt load URL preview","theme.dark":"Dark","theme.light":"Light","theme.system":"System","color-style.white":"White","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","document.default-name":"Untitled","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","fill-style.fill":"Fill","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","verticalAlign-style.start":"Top","verticalAlign-style.middle":"Middle","verticalAlign-style.end":"Bottom","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.cloud":"Cloud","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.heart":"Heart","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","arrow-kind-style.arc":"Arc","arrow-kind-style.elbow":"Elbow","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.cloud":"Cloud","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.heart":"Heart","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.media":"Media","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","tool.pointer-down":"Pointer down","tool.rich-text-bold":"Bold","tool.rich-text-italic":"Italic","tool.rich-text-code":"Code","tool.rich-text-highlight":"Highlight","tool.rich-text-strikethrough":"Strikethrough","tool.rich-text-link":"Link","tool.rich-text-link-visit":"Visit link","tool.rich-text-link-remove":"Remove link","tool.rich-text-header":"Header","tool.rich-text-bulletList":"Bulleted list","tool.rich-text-toolbar-title":"Text formatting","tool.rich-text-orderedList":"Ordered list","tool.bookmark":"Bookmark","a11y.status":"Status","a11y.skip-to-main-content":"Move focus to canvas","a11y.shape-index":"{num} of {total}","a11y.shape-image":"Image","a11y.shape-video":"Video","a11y.multiple-shapes":"{num} shapes selected","a11y.select-shape":"Select next shape","a11y.select-shape-direction":"Select shape in direction","a11y.enter-leave-container":"Enter/leave container","a11y.repeat-shape":"Repeat shape","a11y.move-shape":"Move shape","a11y.move-shape-faster":"Move shape faster","a11y.enlarge-shape":"Enlarge shape","a11y.shrink-shape":"Shrink shape","a11y.pan-camera":"Pan camera","a11y.adjust-shape-styles":"Adjust shape styles","menu.title":"Menu","menu.theme":"Theme","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.title":"Context menu","context-menu.edit":"Edit","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.export-all-as":"Export","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.copy-link":"Copy editor link","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy viewer link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to access this project.","share-menu.project-too-large":"Sorry, this project cant be shared because its too large. Were working on it!","share-menu.upload-failed":"Sorry, we couldnt upload your project at the moment. Please try again or let us know if the problem persists.","share-menu.creating-project":"Creating the new project","share-menu.copied":"Copied link","document-name-menu.copy-link":"Copy link","status.offline":"Offline","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.avatar-color":"Avatar color","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","people-menu.anonymous-user":"New user","help-menu.import-tldr-file":"Import file","help-menu.title":"Help and resources","help-menu.about":"About tldraw","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","help-menu.terms":"Terms of service","help-menu.privacy":"Privacy policy","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","edit-link-dialog.external-link":"External link","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the sites URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","shortcuts-dialog.a11y":"Accessibility","shortcuts-dialog.text-formatting":"Text formatting","style-panel.title":"Styles","style-panel.align":"Align","style-panel.label-align":"Label align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrows","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.arrow-kind":"Line","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.title":"Tools","tool-panel.more":"More","navigation-zone.title":"Navigation","navigation-zone.minimap":"Minimap","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","toast.success":"Success","toast.error":"Error","toast.info":"Info","toast.warning":"Warning","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesnt look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Dont ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Dont ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Dont ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"Weve updated this document to work with the current version of tldraw. If youd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Dont ask again","cursor-chat.type-to-chat":"Type to chat","app.loading":"Loading tldraw","handle.resize-top":"Resize top","handle.resize-bottom":"Resize bottom","handle.resize-left":"Resize left","handle.resize-right":"Resize right","handle.resize-top-left":"Resize top left","handle.resize-top-right":"Resize top right","handle.resize-bottom-left":"Resize bottom left","handle.resize-bottom-right":"Resize bottom right","handle.rotate.top_left_rotate":"Rotate top left","handle.rotate.top_right_rotate":"Rotate top right","handle.rotate.bottom_left_rotate":"Rotate bottom left","handle.rotate.bottom_right_rotate":"Rotate bottom right","handle.rotate.mobile_rotate":"Rotate","handle.crop.top":"Crop top","handle.crop.bottom":"Crop bottom","handle.crop.left":"Crop left","handle.crop.right":"Crop right","handle.crop.top-left":"Crop top left","handle.crop.top-right":"Crop top right","handle.crop.bottom-left":"Crop bottom left","handle.crop.bottom-right":"Crop bottom right","ui.close":"Close","ui.checked":"Checked","ui.unchecked":"Unchecked"},hnt=new Set(["ar","fa","he","ur","ku"]),mm={locale:"en",label:"English",messages:YF,dir:"ltr"};async function pnt(t,e){if(!(await _c(e.translations.en)).ok)return console.warn("No main translations found."),mm;if(t==="en")return mm;const r=mx.find(s=>s.locale===t);if(!r)return console.warn(`No translation found for locale ${t}`),mm;const i=await(await _c(e.translations[r.locale])).json();if(!i)return console.warn(`No messages found for locale ${t}`),mm;for(const s in mm.messages)i[s];return{locale:t,label:r.label,dir:hnt.has(r.locale)?"rtl":"ltr",messages:{...mm.messages,...i}}}const Cge=v.createContext(null);function Ege(){const t=v.useContext(Cge);if(!t)throw new Error("useCurrentTranslation must be used inside of <TldrawUiContextProvider />");return t}function gnt({overrides:t,locale:e,children:n}){const r=x4(),[o,i]=v.useState(()=>t&&t.en?{locale:"en",label:"English",dir:"ltr",messages:{...YF,...t.en}}:{locale:"en",label:"English",dir:"ltr",messages:YF});return v.useEffect(()=>{let s=!1;async function a(){const l=await pnt(e,r);l&&!s&&(t&&t[e]?i({...l,messages:{...l.messages,...t[e]}}):i(l))}return a(),()=>{s=!0}},[r,e,t]),w.jsx(Cge.Provider,{value:o,children:n})}function Jt(){const t=Ege();return v.useCallback(function(n){return t.messages[n]??n},[t])}const Hn=v.forwardRef(function({children:e,type:n,isActive:r,...o},i){return w.jsx("button",{ref:i,type:"button",draggable:!1,"data-isactive":r,...o,className:he("tlui-button",`tlui-button__${n}`,o.className),children:e})});function mnt(){const t=Ee(),e=Jt(),n=v.useRef(null),r=v.useCallback(o=>{var s;Yr(o),(s=n.current)==null||s.blur();const i=t.getCurrentPageShapesInReadingOrder();i.length&&(t.setSelectedShapes([i[0].id]),t.zoomToSelectionIfOffscreen(256,{animation:{duration:t.options.animationMediumMs},inset:0}),t.timers.setTimeout(()=>t.getContainer().focus(),100))},[t]);return w.jsx(Hn,{ref:n,type:"low",tabIndex:0,className:"tl-skip-to-main-content",onClick:r,children:e("a11y.skip-to-main-content")})}const vnt=v.memo(function(){const e=E2(),n=Jt(),r=Ie("a11y-msg",()=>e.currentMsg.get(),[]);return bnt(r.msg),ynt(),r.msg&&w.jsx("div",{"aria-label":n("a11y.status"),"aria-live":r.priority||"assertive",role:"status","aria-hidden":"false",style:{position:"absolute",top:"-10000px",left:"-10000px"},children:r.msg})});function Pge(t){const{editor:e,selectedShapeIds:n,msg:r}=t;let o="";const i=n.length;if(i>1)o=r("a11y.multiple-shapes").replace("{num}",i.toString());else if(i===1){const s=n[0],a=e.getShape(s);if(!a)return"";const l=e.getShapeUtil(a.type),c=["image","video"].includes(a.type);let u="";a.type==="geo"?u=r(`geo-style.${a.props.geo}`):c?u=r(`a11y.shape-${a.type}`):u=r(`tool.${a.type}`);const d=e.getCurrentPageShapesInReadingOrder(),f=(d.findIndex(m=>m.id===s)+1).toString(),h=d.length.toString(),g=r("a11y.shape-index").replace("{num}",f).replace("{total}",h),y=l.getAriaDescriptor(a)||l.getText(a)||"";o=(y?`${y}, `:"")+`${u}. ${g}`}return o}const ynt=()=>{const t=Gi(),e=E2(),n=Jt(),r=v.useRef([]);jM("announce selection",()=>{if(!t)return;const o=t.isIn("select.idle"),i=t.getSelectedShapeIds();o&&i!==r.current&&(r.current=i,jb(()=>{const s=Pge({editor:t,selectedShapeIds:i,msg:n});s&&e.announce({msg:s})}))},[t,e,n])},bnt=t=>{const e=Ko();v.useEffect(()=>{if(so.a11y.get()){const n=o=>{console.debug(`%ca11y%c: ${o}`,"color: white; background: #40C057; padding: 2px;border-radius: 3px;","font-weight: normal")},r=o=>{const i=document.activeElement;if(o.key==="Tab"&&i&&i!==document.body&&!i.classList.contains("tl-container")){const s=i.getAttribute("aria-label")||i.getAttribute("title")||i.textContent;s&&n(s)}};return t&&n(t),document.addEventListener("keyup",r),()=>document.removeEventListener("keyup",r)}},[e,t])},_ge=()=>{},Ige=v.createContext(null);function Snt({onEvent:t,children:e}){return w.jsx(Ige.Provider,{value:t??_ge,children:e})}function ci(){return v.useContext(Ige)??_ge}function PJ(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function P2(...t){return e=>{let n=!1;const r=t.map(o=>{const i=PJ(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():PJ(t[o],null)}}}}function Hr(...t){return v.useCallback(P2(...t),t)}function Iv(t){const e=xnt(t),n=v.forwardRef((r,o)=>{const{children:i,...s}=r,a=v.Children.toArray(i),l=a.find(Cnt);if(l){const c=l.props.children,u=a.map(d=>d===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:d);return w.jsx(e,{...s,ref:o,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return w.jsx(e,{...s,ref:o,children:i})});return n.displayName=`${t}.Slot`,n}function xnt(t){const e=v.forwardRef((n,r)=>{const{children:o,...i}=n;if(v.isValidElement(o)){const s=Pnt(o),a=Ent(i,o.props);return o.type!==v.Fragment&&(a.ref=r?P2(r,s):s),v.cloneElement(o,a)}return v.Children.count(o)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var wnt=Symbol("radix.slottable");function Cnt(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wnt}function Ent(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function Pnt(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _nt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jn=_nt.reduce((t,e)=>{const n=Iv(`Primitive.${e}`),r=v.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function w4(t,e){t&&Ya.flushSync(()=>t.dispatchEvent(e))}var Int=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Tnt="VisuallyHidden",C4=v.forwardRef((t,e)=>w.jsx(jn.span,{...t,ref:e,style:{...Int,...t.style}}));C4.displayName=Tnt;function Mnt(t,e){const n=v.createContext(e),r=i=>{const{children:s,...a}=i,l=v.useMemo(()=>a,Object.values(a));return w.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function o(i){const s=v.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,o]}function ql(t,e=[]){let n=[];function r(i,s){const a=v.createContext(s),l=n.length;n=[...n,s];const c=d=>{var S;const{scope:f,children:h,...g}=d,y=((S=f==null?void 0:f[t])==null?void 0:S[l])||a,m=v.useMemo(()=>g,Object.values(g));return w.jsx(y.Provider,{value:m,children:h})};c.displayName=i+"Provider";function u(d,f){var y;const h=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=v.useContext(h);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${i}\``)}return[c,u]}const o=()=>{const i=n.map(s=>v.createContext(s));return function(a){const l=(a==null?void 0:a[t])||i;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,Ont(o,...e)]}function Ont(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(i)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function _2(t){const e=t+"CollectionProvider",[n,r]=ql(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=y=>{const{scope:m,children:S}=y,x=ce.useRef(null),C=ce.useRef(new Map).current;return w.jsx(o,{scope:m,itemMap:C,collectionRef:x,children:S})};s.displayName=e;const a=t+"CollectionSlot",l=Iv(a),c=ce.forwardRef((y,m)=>{const{scope:S,children:x}=y,C=i(a,S),E=Hr(m,C.collectionRef);return w.jsx(l,{ref:E,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=Iv(u),h=ce.forwardRef((y,m)=>{const{scope:S,children:x,...C}=y,E=ce.useRef(null),P=Hr(m,E),I=i(u,S);return ce.useEffect(()=>(I.itemMap.set(E,{ref:E,...C}),()=>void I.itemMap.delete(E))),w.jsx(f,{[d]:"",ref:P,children:x})});h.displayName=u;function g(y){const m=i(t+"CollectionConsumer",y);return ce.useCallback(()=>{const x=m.collectionRef.current;if(!x)return[];const C=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(m.itemMap.values()).sort((I,T)=>C.indexOf(I.ref.current)-C.indexOf(T.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:s,Slot:c,ItemSlot:h},g,r]}function Ft(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}var kd=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Rnt=jv[" useInsertionEffect ".trim().toString()]||kd;function zc({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,i,s]=knt({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:o;{const u=v.useRef(t!==void 0);v.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=v.useCallback(u=>{var d;if(a){const f=Ant(u)?u(t):u;f!==t&&((d=s.current)==null||d.call(s,f))}else i(u)},[a,t,i,s]);return[l,c]}function knt({defaultProp:t,onChange:e}){const[n,r]=v.useState(t),o=v.useRef(n),i=v.useRef(e);return Rnt(()=>{i.current=e},[e]),v.useEffect(()=>{var s;o.current!==n&&((s=i.current)==null||s.call(i,n),o.current=n)},[n,o]),[n,r,i]}function Ant(t){return typeof t=="function"}function $nt(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Bc=t=>{const{present:e,children:n}=t,r=Dnt(e),o=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),i=Hr(r.ref,jnt(o));return typeof n=="function"||r.isPresent?v.cloneElement(o,{ref:i}):null};Bc.displayName="Presence";function Dnt(t){const[e,n]=v.useState(),r=v.useRef(null),o=v.useRef(t),i=v.useRef("none"),s=t?"mounted":"unmounted",[a,l]=$nt(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=mE(r.current);i.current=a==="mounted"?c:"none"},[a]),kd(()=>{const c=r.current,u=o.current;if(u!==t){const f=i.current,h=mE(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),kd(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const y=mE(r.current).includes(h.animationName);if(h.target===e&&y&&(l("ANIMATION_END"),!o.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},f=h=>{h.target===e&&(i.current=mE(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function mE(t){return(t==null?void 0:t.animationName)||"none"}function jnt(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Lnt=jv[" useId ".trim().toString()]||(()=>{}),Nnt=0;function xd(t){const[e,n]=v.useState(Lnt());return kd(()=>{n(r=>r??String(Nnt++))},[t]),t||(e?`radix-${e}`:"")}var Fnt=v.createContext(void 0);function jw(t){const e=v.useContext(Fnt);return t||e||"ltr"}function Ks(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function znt(t,e=globalThis==null?void 0:globalThis.document){const n=Ks(t);v.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Bnt="DismissableLayer",QF="dismissableLayer.update",Hnt="dismissableLayer.pointerDownOutside",Unt="dismissableLayer.focusOutside",_J,Tge=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lw=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=t,c=v.useContext(Tge),[u,d]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=v.useState({}),g=Hr(e,T=>d(T)),y=Array.from(c.layers),[m]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=y.indexOf(m),x=u?y.indexOf(u):-1,C=c.layersWithOutsidePointerEventsDisabled.size>0,E=x>=S,P=Vnt(T=>{const M=T.target,R=[...c.branches].some(A=>A.contains(M));!E||R||(o==null||o(T),s==null||s(T),T.defaultPrevented||a==null||a())},f),I=qnt(T=>{const M=T.target;[...c.branches].some(A=>A.contains(M))||(i==null||i(T),s==null||s(T),T.defaultPrevented||a==null||a())},f);return znt(T=>{x===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(_J=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),IJ(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=_J)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),IJ())},[u,c]),v.useEffect(()=>{const T=()=>h({});return document.addEventListener(QF,T),()=>document.removeEventListener(QF,T)},[]),w.jsx(jn.div,{...l,ref:g,style:{pointerEvents:C?E?"auto":"none":void 0,...t.style},onFocusCapture:Ft(t.onFocusCapture,I.onFocusCapture),onBlurCapture:Ft(t.onBlurCapture,I.onBlurCapture),onPointerDownCapture:Ft(t.onPointerDownCapture,P.onPointerDownCapture)})});Lw.displayName=Bnt;var Wnt="DismissableLayerBranch",Mge=v.forwardRef((t,e)=>{const n=v.useContext(Tge),r=v.useRef(null),o=Hr(e,r);return v.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),w.jsx(jn.div,{...t,ref:o})});Mge.displayName=Wnt;function Vnt(t,e=globalThis==null?void 0:globalThis.document){const n=Ks(t),r=v.useRef(!1),o=v.useRef(()=>{});return v.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){Oge(Hnt,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function qnt(t,e=globalThis==null?void 0:globalThis.document){const n=Ks(t),r=v.useRef(!1);return v.useEffect(()=>{const o=i=>{i.target&&!r.current&&Oge(Unt,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function IJ(){const t=new CustomEvent(QF);document.dispatchEvent(t)}function Oge(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?w4(o,i):o.dispatchEvent(i)}var Knt=Lw,Gnt=Mge,Tj="focusScope.autoFocusOnMount",Mj="focusScope.autoFocusOnUnmount",TJ={bubbles:!1,cancelable:!0},Xnt="FocusScope",I2=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=t,[a,l]=v.useState(null),c=Ks(o),u=Ks(i),d=v.useRef(null),f=Hr(e,y=>l(y)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let y=function(C){if(h.paused||!a)return;const E=C.target;a.contains(E)?d.current=E:xf(d.current,{select:!0})},m=function(C){if(h.paused||!a)return;const E=C.relatedTarget;E!==null&&(a.contains(E)||xf(d.current,{select:!0}))},S=function(C){if(document.activeElement===document.body)for(const P of C)P.removedNodes.length>0&&xf(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",m);const x=new MutationObserver(S);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",m),x.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){OJ.add(h);const y=document.activeElement;if(!a.contains(y)){const S=new CustomEvent(Tj,TJ);a.addEventListener(Tj,c),a.dispatchEvent(S),S.defaultPrevented||(Ynt(trt(Rge(a)),{select:!0}),document.activeElement===y&&xf(a))}return()=>{a.removeEventListener(Tj,c),setTimeout(()=>{const S=new CustomEvent(Mj,TJ);a.addEventListener(Mj,u),a.dispatchEvent(S),S.defaultPrevented||xf(y??document.body,{select:!0}),a.removeEventListener(Mj,u),OJ.remove(h)},0)}}},[a,c,u,h]);const g=v.useCallback(y=>{if(!n&&!r||h.paused)return;const m=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,S=document.activeElement;if(m&&S){const x=y.currentTarget,[C,E]=Qnt(x);C&&E?!y.shiftKey&&S===E?(y.preventDefault(),n&&xf(C,{select:!0})):y.shiftKey&&S===C&&(y.preventDefault(),n&&xf(E,{select:!0})):S===x&&y.preventDefault()}},[n,r,h.paused]);return w.jsx(jn.div,{tabIndex:-1,...s,ref:f,onKeyDown:g})});I2.displayName=Xnt;function Ynt(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(xf(r,{select:e}),document.activeElement!==n)return}function Qnt(t){const e=Rge(t),n=MJ(e,t),r=MJ(e.reverse(),t);return[n,r]}function Rge(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function MJ(t,e){for(const n of t)if(!Znt(n,{upTo:e}))return n}function Znt(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Jnt(t){return t instanceof HTMLInputElement&&"select"in t}function xf(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Jnt(t)&&e&&t.select()}}var OJ=ert();function ert(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=RJ(t,e),t.unshift(e)},remove(e){var n;t=RJ(t,e),(n=t[0])==null||n.resume()}}}function RJ(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function trt(t){return t.filter(e=>e.tagName!=="A")}var nrt="Portal",Nw=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,i]=v.useState(!1);kd(()=>i(!0),[]);const s=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?JP.createPortal(w.jsx(jn.div,{...r,ref:e}),s):null});Nw.displayName=nrt;var Oj=0;function E4(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??kJ()),document.body.insertAdjacentElement("beforeend",t[1]??kJ()),Oj++,()=>{Oj===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Oj--}},[])}function kJ(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var lu=function(){return lu=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lu.apply(this,arguments)};function kge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function rrt(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var TP="right-scroll-bar-position",MP="width-before-scroll-bar",ort="with-scroll-bars-hidden",irt="--removed-body-scroll-bar-size";function Rj(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function srt(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var art=typeof window<"u"?v.useLayoutEffect:v.useEffect,AJ=new WeakMap;function lrt(t,e){var n=srt(null,function(r){return t.forEach(function(o){return Rj(o,r)})});return art(function(){var r=AJ.get(n);if(r){var o=new Set(r),i=new Set(t),s=n.current;o.forEach(function(a){i.has(a)||Rj(a,null)}),i.forEach(function(a){o.has(a)||Rj(a,s)})}AJ.set(n,t)},[t]),n}function crt(t){return t}function urt(t,e){e===void 0&&(e=crt);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var s=e(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var u=s;s=[],u.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return o}function drt(t){t===void 0&&(t={});var e=urt(null);return e.options=lu({async:!0,ssr:!1},t),e}var Age=function(t){var e=t.sideCar,n=kge(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,lu({},n))};Age.isSideCarExport=!0;function frt(t,e){return t.useMedium(e),Age}var $ge=drt(),kj=function(){},T2=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:kj,onWheelCapture:kj,onTouchMoveCapture:kj}),o=r[0],i=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,g=t.noIsolation,y=t.inert,m=t.allowPinchZoom,S=t.as,x=S===void 0?"div":S,C=t.gapMode,E=kge(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=f,I=lrt([n,e]),T=lu(lu({},E),o);return v.createElement(v.Fragment,null,u&&v.createElement(P,{sideCar:$ge,removeScrollBar:c,shards:d,noRelative:h,noIsolation:g,inert:y,setCallbacks:i,allowPinchZoom:!!m,lockRef:n,gapMode:C}),s?v.cloneElement(v.Children.only(a),lu(lu({},T),{ref:I})):v.createElement(x,lu({},T,{className:l,ref:I}),a))});T2.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};T2.classNames={fullWidth:MP,zeroRight:TP};var hrt=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function prt(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=hrt();return e&&t.setAttribute("nonce",e),t}function grt(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function mrt(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var vrt=function(){var t=0,e=null;return{add:function(n){t==0&&(e=prt())&&(grt(e,n),mrt(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yrt=function(){var t=vrt();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Dge=function(){var t=yrt(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},brt={left:0,top:0,right:0,gap:0},Aj=function(t){return parseInt(t||"",10)||0},Srt=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Aj(n),Aj(r),Aj(o)]},xrt=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return brt;var e=Srt(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},wrt=Dge(),tv="data-scroll-locked",Crt=function(t,e,n,r){var o=t.left,i=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(ort,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(tv,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(TP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(MP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(TP," .").concat(TP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(MP," .").concat(MP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(tv,`] {
    `).concat(irt,": ").concat(a,`px;
  }
`)},$J=function(){var t=parseInt(document.body.getAttribute(tv)||"0",10);return isFinite(t)?t:0},Ert=function(){v.useEffect(function(){return document.body.setAttribute(tv,($J()+1).toString()),function(){var t=$J()-1;t<=0?document.body.removeAttribute(tv):document.body.setAttribute(tv,t.toString())}},[])},Prt=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;Ert();var i=v.useMemo(function(){return xrt(o)},[o]);return v.createElement(wrt,{styles:Crt(i,!e,o,n?"":"!important")})},ZF=!1;if(typeof window<"u")try{var vE=Object.defineProperty({},"passive",{get:function(){return ZF=!0,!0}});window.addEventListener("test",vE,vE),window.removeEventListener("test",vE,vE)}catch{ZF=!1}var vm=ZF?{passive:!1}:!1,_rt=function(t){return t.tagName==="TEXTAREA"},jge=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_rt(t)&&n[e]==="visible")},Irt=function(t){return jge(t,"overflowY")},Trt=function(t){return jge(t,"overflowX")},DJ=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Lge(t,r);if(o){var i=Nge(t,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Mrt=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Ort=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Lge=function(t,e){return t==="v"?Irt(e):Trt(e)},Nge=function(t,e){return t==="v"?Mrt(e):Ort(e)},Rrt=function(t,e){return t==="h"&&e==="rtl"?-1:1},krt=function(t,e,n,r,o){var i=Rrt(t,window.getComputedStyle(e).direction),s=i*r,a=n.target,l=e.contains(a),c=!1,u=s>0,d=0,f=0;do{if(!a)break;var h=Nge(t,a),g=h[0],y=h[1],m=h[2],S=y-m-i*g;(g||S)&&Lge(t,a)&&(d+=S,f+=g);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},yE=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jJ=function(t){return[t.deltaX,t.deltaY]},LJ=function(t){return t&&"current"in t?t.current:t},Art=function(t,e){return t[0]===e[0]&&t[1]===e[1]},$rt=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Drt=0,ym=[];function jrt(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),o=v.useState(Drt++)[0],i=v.useState(Dge)[0],s=v.useRef(t);v.useEffect(function(){s.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var y=rrt([t.lockRef.current],(t.shards||[]).map(LJ),!0).filter(Boolean);return y.forEach(function(m){return m.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(m){return m.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(y,m){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var S=yE(y),x=n.current,C="deltaX"in y?y.deltaX:x[0]-S[0],E="deltaY"in y?y.deltaY:x[1]-S[1],P,I=y.target,T=Math.abs(C)>Math.abs(E)?"h":"v";if("touches"in y&&T==="h"&&I.type==="range")return!1;var M=DJ(T,I);if(!M)return!0;if(M?P=T:(P=T==="v"?"h":"v",M=DJ(T,I)),!M)return!1;if(!r.current&&"changedTouches"in y&&(C||E)&&(r.current=P),!P)return!0;var R=r.current||P;return krt(R,m,y,R==="h"?C:E)},[]),l=v.useCallback(function(y){var m=y;if(!(!ym.length||ym[ym.length-1]!==i)){var S="deltaY"in m?jJ(m):yE(m),x=e.current.filter(function(P){return P.name===m.type&&(P.target===m.target||m.target===P.shadowParent)&&Art(P.delta,S)})[0];if(x&&x.should){m.cancelable&&m.preventDefault();return}if(!x){var C=(s.current.shards||[]).map(LJ).filter(Boolean).filter(function(P){return P.contains(m.target)}),E=C.length>0?a(m,C[0]):!s.current.noIsolation;E&&m.cancelable&&m.preventDefault()}}},[]),c=v.useCallback(function(y,m,S,x){var C={name:y,delta:m,target:S,should:x,shadowParent:Lrt(S)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(E){return E!==C})},1)},[]),u=v.useCallback(function(y){n.current=yE(y),r.current=void 0},[]),d=v.useCallback(function(y){c(y.type,jJ(y),y.target,a(y,t.lockRef.current))},[]),f=v.useCallback(function(y){c(y.type,yE(y),y.target,a(y,t.lockRef.current))},[]);v.useEffect(function(){return ym.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,vm),document.addEventListener("touchmove",l,vm),document.addEventListener("touchstart",u,vm),function(){ym=ym.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,vm),document.removeEventListener("touchmove",l,vm),document.removeEventListener("touchstart",u,vm)}},[]);var h=t.removeScrollBar,g=t.inert;return v.createElement(v.Fragment,null,g?v.createElement(i,{styles:$rt(o)}):null,h?v.createElement(Prt,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Lrt(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Nrt=frt($ge,jrt);var M2=v.forwardRef(function(t,e){return v.createElement(T2,lu({},t,{ref:e,sideCar:Nrt}))});M2.classNames=T2.classNames;var Frt=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},bm=new WeakMap,bE=new WeakMap,SE={},$j=0,Fge=function(t){return t&&(t.host||Fge(t.parentNode))},zrt=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Fge(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Brt=function(t,e,n,r){var o=zrt(e,Array.isArray(t)?t:[t]);SE[n]||(SE[n]=new WeakMap);var i=SE[n],s=[],a=new Set,l=new Set(o),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};o.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),g=h!==null&&h!=="false",y=(bm.get(f)||0)+1,m=(i.get(f)||0)+1;bm.set(f,y),i.set(f,m),s.push(f),y===1&&g&&bE.set(f,!0),m===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",f,S)}})};return u(e),a.clear(),$j++,function(){s.forEach(function(d){var f=bm.get(d)-1,h=i.get(d)-1;bm.set(d,f),i.set(d,h),f||(bE.has(d)||d.removeAttribute(r),bE.delete(d)),h||d.removeAttribute(n)}),$j--,$j||(bm=new WeakMap,bm=new WeakMap,bE=new WeakMap,SE={})}},P4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=Frt(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),Brt(r,o,n,"aria-hidden")):function(){return null}},O2="Dialog",[zge,E0t]=ql(O2),[Hrt,Hc]=zge(O2),Bge=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=t,a=v.useRef(null),l=v.useRef(null),[c,u]=zc({prop:r,defaultProp:o??!1,onChange:i,caller:O2});return w.jsx(Hrt,{scope:e,triggerRef:a,contentRef:l,contentId:xd(),titleId:xd(),descriptionId:xd(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};Bge.displayName=O2;var Hge="DialogTrigger",Urt=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Hc(Hge,n),i=Hr(e,o.triggerRef);return w.jsx(jn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":T4(o.open),...r,ref:i,onClick:Ft(t.onClick,o.onOpenToggle)})});Urt.displayName=Hge;var _4="DialogPortal",[Wrt,Uge]=zge(_4,{forceMount:void 0}),Wge=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,i=Hc(_4,e);return w.jsx(Wrt,{scope:e,forceMount:n,children:v.Children.map(r,s=>w.jsx(Bc,{present:n||i.open,children:w.jsx(Nw,{asChild:!0,container:o,children:s})}))})};Wge.displayName=_4;var jI="DialogOverlay",Vge=v.forwardRef((t,e)=>{const n=Uge(jI,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=Hc(jI,t.__scopeDialog);return i.modal?w.jsx(Bc,{present:r||i.open,children:w.jsx(qrt,{...o,ref:e})}):null});Vge.displayName=jI;var Vrt=Iv("DialogOverlay.RemoveScroll"),qrt=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Hc(jI,n);return w.jsx(M2,{as:Vrt,allowPinchZoom:!0,shards:[o.contentRef],children:w.jsx(jn.div,{"data-state":T4(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),og="DialogContent",qge=v.forwardRef((t,e)=>{const n=Uge(og,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=Hc(og,t.__scopeDialog);return w.jsx(Bc,{present:r||i.open,children:i.modal?w.jsx(Krt,{...o,ref:e}):w.jsx(Grt,{...o,ref:e})})});qge.displayName=og;var Krt=v.forwardRef((t,e)=>{const n=Hc(og,t.__scopeDialog),r=v.useRef(null),o=Hr(e,n.contentRef,r);return v.useEffect(()=>{const i=r.current;if(i)return P4(i)},[]),w.jsx(Kge,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(t.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ft(t.onPointerDownOutside,i=>{const s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:Ft(t.onFocusOutside,i=>i.preventDefault())})}),Grt=v.forwardRef((t,e)=>{const n=Hc(og,t.__scopeDialog),r=v.useRef(!1),o=v.useRef(!1);return w.jsx(Kge,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Kge=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=t,a=Hc(og,n),l=v.useRef(null),c=Hr(e,l);return E4(),w.jsxs(w.Fragment,{children:[w.jsx(I2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:w.jsx(Lw,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":T4(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(Yrt,{titleId:a.titleId}),w.jsx(Zrt,{contentRef:l,descriptionId:a.descriptionId})]})]})}),I4="DialogTitle",Gge=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Hc(I4,n);return w.jsx(jn.h2,{id:o.titleId,...r,ref:e})});Gge.displayName=I4;var Xge="DialogDescription",Xrt=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Hc(Xge,n);return w.jsx(jn.p,{id:o.descriptionId,...r,ref:e})});Xrt.displayName=Xge;var Yge="DialogClose",Qge=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Hc(Yge,n);return w.jsx(jn.button,{type:"button",...r,ref:e,onClick:Ft(t.onClick,()=>o.onOpenChange(!1))})});Qge.displayName=Yge;function T4(t){return t?"open":"closed"}var Zge="DialogTitleWarning",[P0t,Jge]=Mnt(Zge,{contentName:og,titleName:I4,docsSlug:"dialog"}),Yrt=({titleId:t})=>{const e=Jge(Zge),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Qrt="DialogDescriptionWarning",Zrt=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Jge(Qrt).contentName}}.`;return v.useEffect(()=>{var i;const o=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Jrt=Bge,eot=Wge,tot=Vge,not=qge,rot=Gge;function oot(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function eme(t){const[e,n]=v.useState(void 0);return kd(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const iot=["top","right","bottom","left"],sh=Math.min,ja=Math.max,LI=Math.round,xE=Math.floor,yu=t=>({x:t,y:t}),sot={left:"right",right:"left",bottom:"top",top:"bottom"},aot={start:"end",end:"start"};function JF(t,e,n){return ja(t,sh(e,n))}function Ad(t,e){return typeof t=="function"?t(e):t}function $d(t){return t.split("-")[0]}function ly(t){return t.split("-")[1]}function M4(t){return t==="x"?"y":"x"}function O4(t){return t==="y"?"height":"width"}function fu(t){return["top","bottom"].includes($d(t))?"y":"x"}function R4(t){return M4(fu(t))}function lot(t,e,n){n===void 0&&(n=!1);const r=ly(t),o=R4(t),i=O4(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=NI(s)),[s,NI(s)]}function cot(t){const e=NI(t);return[e3(t),e,e3(e)]}function e3(t){return t.replace(/start|end/g,e=>aot[e])}function uot(t,e,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?i:s;default:return[]}}function dot(t,e,n,r){const o=ly(t);let i=uot($d(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(e3)))),i}function NI(t){return t.replace(/left|right|bottom|top/g,e=>sot[e])}function fot(t){return{top:0,right:0,bottom:0,left:0,...t}}function tme(t){return typeof t!="number"?fot(t):{top:t,right:t,bottom:t,left:t}}function FI(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function NJ(t,e,n){let{reference:r,floating:o}=t;const i=fu(e),s=R4(e),a=O4(s),l=$d(e),c=i==="y",u=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,f=r[a]/2-o[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-o.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-o.width,y:d};break;default:h={x:r.x,y:r.y}}switch(ly(e)){case"start":h[s]-=f*(n&&c?-1:1);break;case"end":h[s]+=f*(n&&c?-1:1);break}return h}const hot=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:d}=NJ(c,r,l),f=r,h={},g=0;for(let y=0;y<a.length;y++){const{name:m,fn:S}=a[y],{x,y:C,data:E,reset:P}=await S({x:u,y:d,initialPlacement:r,placement:f,strategy:o,middlewareData:h,rects:c,platform:s,elements:{reference:t,floating:e}});u=x??u,d=C??d,h={...h,[m]:{...h[m],...E}},P&&g<=50&&(g++,typeof P=="object"&&(P.placement&&(f=P.placement),P.rects&&(c=P.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):P.rects),{x:u,y:d}=NJ(c,f,l)),y=-1)}return{x:u,y:d,placement:f,strategy:o,middlewareData:h}};async function Ix(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Ad(e,t),g=tme(h),m=a[f?d==="floating"?"reference":"floating":d],S=FI(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(m)))==null||n?m:m.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),E=await(i.isElement==null?void 0:i.isElement(C))?await(i.getScale==null?void 0:i.getScale(C))||{x:1,y:1}:{x:1,y:1},P=FI(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:C,strategy:l}):x);return{top:(S.top-P.top+g.top)/E.y,bottom:(P.bottom-S.bottom+g.bottom)/E.y,left:(S.left-P.left+g.left)/E.x,right:(P.right-S.right+g.right)/E.x}}const pot=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ad(t,e)||{};if(c==null)return{};const d=tme(u),f={x:n,y:r},h=R4(o),g=O4(h),y=await s.getDimensions(c),m=h==="y",S=m?"top":"left",x=m?"bottom":"right",C=m?"clientHeight":"clientWidth",E=i.reference[g]+i.reference[h]-f[h]-i.floating[g],P=f[h]-i.reference[h],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let T=I?I[C]:0;(!T||!await(s.isElement==null?void 0:s.isElement(I)))&&(T=a.floating[C]||i.floating[g]);const M=E/2-P/2,R=T/2-y[g]/2-1,A=sh(d[S],R),j=sh(d[x],R),N=A,k=T-y[g]-j,D=T/2-y[g]/2+M,F=JF(N,D,k),H=!l.arrow&&ly(o)!=null&&D!==F&&i.reference[g]/2-(D<N?A:j)-y[g]/2<0,U=H?D<N?D-N:D-k:0;return{[h]:f[h]+U,data:{[h]:F,centerOffset:D-F-U,...H&&{alignmentOffset:U}},reset:H}}}),got=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...m}=Ad(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=$d(o),x=fu(a),C=$d(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),P=f||(C||!y?[NI(a)]:cot(a)),I=g!=="none";!f&&I&&P.push(...dot(a,y,g,E));const T=[a,...P],M=await Ix(e,m),R=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&R.push(M[S]),d){const D=lot(o,s,E);R.push(M[D[0]],M[D[1]])}if(A=[...A,{placement:o,overflows:R}],!R.every(D=>D<=0)){var j,N;const D=(((j=i.flip)==null?void 0:j.index)||0)+1,F=T[D];if(F&&(!(d==="alignment"?x!==fu(F):!1)||A.every(B=>B.overflows[0]>0&&fu(B.placement)===x)))return{data:{index:D,overflows:A},reset:{placement:F}};let H=(N=A.filter(U=>U.overflows[0]<=0).sort((U,B)=>U.overflows[1]-B.overflows[1])[0])==null?void 0:N.placement;if(!H)switch(h){case"bestFit":{var k;const U=(k=A.filter(B=>{if(I){const W=fu(B.placement);return W===x||W==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(W=>W>0).reduce((W,K)=>W+K,0)]).sort((B,W)=>B[1]-W[1])[0])==null?void 0:k[0];U&&(H=U);break}case"initialPlacement":H=a;break}if(o!==H)return{reset:{placement:H}}}return{}}}};function FJ(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function zJ(t){return iot.some(e=>t[e]>=0)}const mot=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Ad(t,e);switch(r){case"referenceHidden":{const i=await Ix(e,{...o,elementContext:"reference"}),s=FJ(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:zJ(s)}}}case"escaped":{const i=await Ix(e,{...o,altBoundary:!0}),s=FJ(i,n.floating);return{data:{escapedOffsets:s,escaped:zJ(s)}}}default:return{}}}}};async function vot(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=$d(n),a=ly(n),l=fu(n)==="y",c=["left","top"].includes(s)?-1:1,u=i&&l?-1:1,d=Ad(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof g=="number"&&(h=a==="end"?g*-1:g),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const yot=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,l=await vot(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},bot=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:m=>{let{x:S,y:x}=m;return{x:S,y:x}}},...l}=Ad(t,e),c={x:n,y:r},u=await Ix(e,l),d=fu($d(o)),f=M4(d);let h=c[f],g=c[d];if(i){const m=f==="y"?"top":"left",S=f==="y"?"bottom":"right",x=h+u[m],C=h-u[S];h=JF(x,h,C)}if(s){const m=d==="y"?"top":"left",S=d==="y"?"bottom":"right",x=g+u[m],C=g-u[S];g=JF(x,g,C)}const y=a.fn({...e,[f]:h,[d]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[f]:i,[d]:s}}}}}},Sot=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ad(t,e),u={x:n,y:r},d=fu(o),f=M4(d);let h=u[f],g=u[d];const y=Ad(a,e),m=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const C=f==="y"?"height":"width",E=i.reference[f]-i.floating[C]+m.mainAxis,P=i.reference[f]+i.reference[C]-m.mainAxis;h<E?h=E:h>P&&(h=P)}if(c){var S,x;const C=f==="y"?"width":"height",E=["top","left"].includes($d(o)),P=i.reference[d]-i.floating[C]+(E&&((S=s.offset)==null?void 0:S[d])||0)+(E?0:m.crossAxis),I=i.reference[d]+i.reference[C]+(E?0:((x=s.offset)==null?void 0:x[d])||0)-(E?m.crossAxis:0);g<P?g=P:g>I&&(g=I)}return{[f]:h,[d]:g}}}},xot=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...c}=Ad(t,e),u=await Ix(e,c),d=$d(o),f=ly(o),h=fu(o)==="y",{width:g,height:y}=i.floating;let m,S;d==="top"||d==="bottom"?(m=d,S=f===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(S=d,m=f==="end"?"top":"bottom");const x=y-u.top-u.bottom,C=g-u.left-u.right,E=sh(y-u[m],x),P=sh(g-u[S],C),I=!e.middlewareData.shift;let T=E,M=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(M=C),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=x),I&&!f){const A=ja(u.left,0),j=ja(u.right,0),N=ja(u.top,0),k=ja(u.bottom,0);h?M=g-2*(A!==0||j!==0?A+j:ja(u.left,u.right)):T=y-2*(N!==0||k!==0?N+k:ja(u.top,u.bottom))}await l({...e,availableWidth:M,availableHeight:T});const R=await s.getDimensions(a.floating);return g!==R.width||y!==R.height?{reset:{rects:!0}}:{}}}};function R2(){return typeof window<"u"}function cy(t){return nme(t)?(t.nodeName||"").toLowerCase():"#document"}function Xa(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Nu(t){var e;return(e=(nme(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function nme(t){return R2()?t instanceof Node||t instanceof Xa(t).Node:!1}function $c(t){return R2()?t instanceof Element||t instanceof Xa(t).Element:!1}function Mu(t){return R2()?t instanceof HTMLElement||t instanceof Xa(t).HTMLElement:!1}function BJ(t){return!R2()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Xa(t).ShadowRoot}function Fw(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Dc(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function wot(t){return["table","td","th"].includes(cy(t))}function k2(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function k4(t){const e=A4(),n=$c(t)?Dc(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Cot(t){let e=ah(t);for(;Mu(e)&&!Tv(e);){if(k4(e))return e;if(k2(e))return null;e=ah(e)}return null}function A4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tv(t){return["html","body","#document"].includes(cy(t))}function Dc(t){return Xa(t).getComputedStyle(t)}function A2(t){return $c(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ah(t){if(cy(t)==="html")return t;const e=t.assignedSlot||t.parentNode||BJ(t)&&t.host||Nu(t);return BJ(e)?e.host:e}function rme(t){const e=ah(t);return Tv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Mu(e)&&Fw(e)?e:rme(e)}function Tx(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=rme(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=Xa(o);if(i){const a=t3(s);return e.concat(s,s.visualViewport||[],Fw(o)?o:[],a&&n?Tx(a):[])}return e.concat(o,Tx(o,[],n))}function t3(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ome(t){const e=Dc(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Mu(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=LI(n)!==i||LI(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function $4(t){return $c(t)?t:t.contextElement}function nv(t){const e=$4(t);if(!Mu(e))return yu(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=ome(e);let s=(i?LI(n.width):n.width)/r,a=(i?LI(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Eot=yu(0);function ime(t){const e=Xa(t);return!A4()||!e.visualViewport?Eot:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Pot(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Xa(t)?!1:e}function ig(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=$4(t);let s=yu(1);e&&(r?$c(r)&&(s=nv(r)):s=nv(t));const a=Pot(i,n,r)?ime(i):yu(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(i){const f=Xa(i),h=r&&$c(r)?Xa(r):r;let g=f,y=t3(g);for(;y&&r&&h!==g;){const m=nv(y),S=y.getBoundingClientRect(),x=Dc(y),C=S.left+(y.clientLeft+parseFloat(x.paddingLeft))*m.x,E=S.top+(y.clientTop+parseFloat(x.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=C,c+=E,g=Xa(y),y=t3(g)}}return FI({width:u,height:d,x:l,y:c})}function D4(t,e){const n=A2(t).scrollLeft;return e?e.left+n:ig(Nu(t)).left+n}function sme(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:D4(t,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function _ot(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=Nu(r),a=e?k2(e.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=yu(1);const u=yu(0),d=Mu(r);if((d||!d&&!i)&&((cy(r)!=="body"||Fw(s))&&(l=A2(r)),Mu(r))){const h=ig(r);c=nv(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=s&&!d&&!i?sme(s,l,!0):yu(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Iot(t){return Array.from(t.getClientRects())}function Tot(t){const e=Nu(t),n=A2(t),r=t.ownerDocument.body,o=ja(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ja(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+D4(t);const a=-n.scrollTop;return Dc(r).direction==="rtl"&&(s+=ja(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function Mot(t,e){const n=Xa(t),r=Nu(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const c=A4();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}function Oot(t,e){const n=ig(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=Mu(t)?nv(t):yu(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function HJ(t,e,n){let r;if(e==="viewport")r=Mot(t,n);else if(e==="document")r=Tot(Nu(t));else if($c(e))r=Oot(e,n);else{const o=ime(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return FI(r)}function ame(t,e){const n=ah(t);return n===e||!$c(n)||Tv(n)?!1:Dc(n).position==="fixed"||ame(n,e)}function Rot(t,e){const n=e.get(t);if(n)return n;let r=Tx(t,[],!1).filter(a=>$c(a)&&cy(a)!=="body"),o=null;const i=Dc(t).position==="fixed";let s=i?ah(t):t;for(;$c(s)&&!Tv(s);){const a=Dc(s),l=k4(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Fw(s)&&!l&&ame(t,s))?r=r.filter(u=>u!==s):o=a,s=ah(s)}return e.set(t,r),r}function kot(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?k2(e)?[]:Rot(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=HJ(e,u,o);return c.top=ja(d.top,c.top),c.right=sh(d.right,c.right),c.bottom=sh(d.bottom,c.bottom),c.left=ja(d.left,c.left),c},HJ(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Aot(t){const{width:e,height:n}=ome(t);return{width:e,height:n}}function $ot(t,e,n){const r=Mu(e),o=Nu(e),i=n==="fixed",s=ig(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=yu(0);function c(){l.x=D4(o)}if(r||!r&&!i)if((cy(e)!=="body"||Fw(o))&&(a=A2(e)),r){const h=ig(e,!0,i,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&c();i&&!r&&o&&c();const u=o&&!r&&!i?sme(o,a):yu(0),d=s.left+a.scrollLeft-l.x-u.x,f=s.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:s.width,height:s.height}}function Dj(t){return Dc(t).position==="static"}function UJ(t,e){if(!Mu(t)||Dc(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Nu(t)===n&&(n=n.ownerDocument.body),n}function lme(t,e){const n=Xa(t);if(k2(t))return n;if(!Mu(t)){let o=ah(t);for(;o&&!Tv(o);){if($c(o)&&!Dj(o))return o;o=ah(o)}return n}let r=UJ(t,e);for(;r&&wot(r)&&Dj(r);)r=UJ(r,e);return r&&Tv(r)&&Dj(r)&&!k4(r)?n:r||Cot(t)||n}const Dot=async function(t){const e=this.getOffsetParent||lme,n=this.getDimensions,r=await n(t.floating);return{reference:$ot(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jot(t){return Dc(t).direction==="rtl"}const Lot={convertOffsetParentRelativeRectToViewportRelativeRect:_ot,getDocumentElement:Nu,getClippingRect:kot,getOffsetParent:lme,getElementRects:Dot,getClientRects:Iot,getDimensions:Aot,getScale:nv,isElement:$c,isRTL:jot};function cme(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Not(t,e){let n=null,r;const o=Nu(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const g=xE(d),y=xE(o.clientWidth-(u+f)),m=xE(o.clientHeight-(d+h)),S=xE(u),C={rootMargin:-g+"px "+-y+"px "+-m+"px "+-S+"px",threshold:ja(0,sh(1,l))||1};let E=!0;function P(I){const T=I[0].intersectionRatio;if(T!==l){if(!E)return s();T?s(!1,T):r=setTimeout(()=>{s(!1,1e-7)},1e3)}T===1&&!cme(c,t.getBoundingClientRect())&&s(),E=!1}try{n=new IntersectionObserver(P,{...C,root:o.ownerDocument})}catch{n=new IntersectionObserver(P,C)}n.observe(t)}return s(!0),i}function Fot(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=$4(t),u=o||i?[...c?Tx(c):[],...Tx(e)]:[];u.forEach(S=>{o&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const d=c&&a?Not(c,n):null;let f=-1,h=null;s&&(h=new ResizeObserver(S=>{let[x]=S;x&&x.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var C;(C=h)==null||C.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let g,y=l?ig(t):null;l&&m();function m(){const S=ig(t);y&&!cme(y,S)&&n(),y=S,g=requestAnimationFrame(m)}return n(),()=>{var S;u.forEach(x=>{o&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),d==null||d(),(S=h)==null||S.disconnect(),h=null,l&&cancelAnimationFrame(g)}}const zot=yot,Bot=bot,Hot=got,Uot=xot,Wot=mot,WJ=pot,Vot=Sot,qot=(t,e,n)=>{const r=new Map,o={platform:Lot,...n},i={...o.platform,_c:r};return hot(t,e,{...o,platform:i})};var Kot=typeof document<"u",Got=function(){},OP=Kot?v.useLayoutEffect:Got;function zI(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!zI(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!zI(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function ume(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function VJ(t,e){const n=ume(t);return Math.round(e*n)/n}function jj(t){const e=v.useRef(t);return OP(()=>{e.current=t}),e}function Xot(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=v.useState(r);zI(f,r)||h(r);const[g,y]=v.useState(null),[m,S]=v.useState(null),x=v.useCallback(B=>{B!==I.current&&(I.current=B,y(B))},[]),C=v.useCallback(B=>{B!==T.current&&(T.current=B,S(B))},[]),E=i||g,P=s||m,I=v.useRef(null),T=v.useRef(null),M=v.useRef(u),R=l!=null,A=jj(l),j=jj(o),N=jj(c),k=v.useCallback(()=>{if(!I.current||!T.current)return;const B={placement:e,strategy:n,middleware:f};j.current&&(B.platform=j.current),qot(I.current,T.current,B).then(W=>{const K={...W,isPositioned:N.current!==!1};D.current&&!zI(M.current,K)&&(M.current=K,Ya.flushSync(()=>{d(K)}))})},[f,e,n,j,N]);OP(()=>{c===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,d(B=>({...B,isPositioned:!1})))},[c]);const D=v.useRef(!1);OP(()=>(D.current=!0,()=>{D.current=!1}),[]),OP(()=>{if(E&&(I.current=E),P&&(T.current=P),E&&P){if(A.current)return A.current(E,P,k);k()}},[E,P,k,A,R]);const F=v.useMemo(()=>({reference:I,floating:T,setReference:x,setFloating:C}),[x,C]),H=v.useMemo(()=>({reference:E,floating:P}),[E,P]),U=v.useMemo(()=>{const B={position:n,left:0,top:0};if(!H.floating)return B;const W=VJ(H.floating,u.x),K=VJ(H.floating,u.y);return a?{...B,transform:"translate("+W+"px, "+K+"px)",...ume(H.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:K}},[n,a,H.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:k,refs:F,elements:H,floatingStyles:U}),[u,k,F,H,U])}const Yot=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?WJ({element:r.current,padding:o}).fn(n):{}:r?WJ({element:r,padding:o}).fn(n):{}}}},Qot=(t,e)=>({...zot(t),options:[t,e]}),Zot=(t,e)=>({...Bot(t),options:[t,e]}),Jot=(t,e)=>({...Vot(t),options:[t,e]}),eit=(t,e)=>({...Hot(t),options:[t,e]}),tit=(t,e)=>({...Uot(t),options:[t,e]}),nit=(t,e)=>({...Wot(t),options:[t,e]}),rit=(t,e)=>({...Yot(t),options:[t,e]});var oit="Arrow",dme=v.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return w.jsx(jn.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});dme.displayName=oit;var iit=dme,j4="Popper",[fme,$2]=ql(j4),[sit,hme]=fme(j4),pme=t=>{const{__scopePopper:e,children:n}=t,[r,o]=v.useState(null);return w.jsx(sit,{scope:e,anchor:r,onAnchorChange:o,children:n})};pme.displayName=j4;var gme="PopperAnchor",mme=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=hme(gme,n),s=v.useRef(null),a=Hr(e,s);return v.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:w.jsx(jn.div,{...o,ref:a})});mme.displayName=gme;var L4="PopperContent",[ait,lit]=fme(L4),vme=v.forwardRef((t,e)=>{var ne,ee,re,le,ae,ie;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=t,m=hme(L4,n),[S,x]=v.useState(null),C=Hr(e,ge=>x(ge)),[E,P]=v.useState(null),I=eme(E),T=(I==null?void 0:I.width)??0,M=(I==null?void 0:I.height)??0,R=r+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},j=Array.isArray(c)?c:[c],N=j.length>0,k={padding:A,boundary:j.filter(uit),altBoundary:N},{refs:D,floatingStyles:F,placement:H,isPositioned:U,middlewareData:B}=Xot({strategy:"fixed",placement:R,whileElementsMounted:(...ge)=>Fot(...ge,{animationFrame:h==="always"}),elements:{reference:m.anchor},middleware:[Qot({mainAxis:o+M,alignmentAxis:s}),l&&Zot({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?Jot():void 0,...k}),l&&eit({...k}),tit({...k,apply:({elements:ge,rects:ve,availableWidth:fe,availableHeight:ue})=>{const{width:Ce,height:ye}=ve.reference,ke=ge.floating.style;ke.setProperty("--radix-popper-available-width",`${fe}px`),ke.setProperty("--radix-popper-available-height",`${ue}px`),ke.setProperty("--radix-popper-anchor-width",`${Ce}px`),ke.setProperty("--radix-popper-anchor-height",`${ye}px`)}}),E&&rit({element:E,padding:a}),dit({arrowWidth:T,arrowHeight:M}),f&&nit({strategy:"referenceHidden",...k})]}),[W,K]=Sme(H),q=Ks(g);kd(()=>{U&&(q==null||q())},[U,q]);const X=(ne=B.arrow)==null?void 0:ne.x,Z=(ee=B.arrow)==null?void 0:ee.y,Y=((re=B.arrow)==null?void 0:re.centerOffset)!==0,[G,J]=v.useState();return kd(()=>{S&&J(window.getComputedStyle(S).zIndex)},[S]),w.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:U?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(le=B.transformOrigin)==null?void 0:le.x,(ae=B.transformOrigin)==null?void 0:ae.y].join(" "),...((ie=B.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx(ait,{scope:n,placedSide:W,onArrowChange:P,arrowX:X,arrowY:Z,shouldHideArrow:Y,children:w.jsx(jn.div,{"data-side":W,"data-align":K,...y,ref:C,style:{...y.style,animation:U?void 0:"none"}})})})});vme.displayName=L4;var yme="PopperArrow",cit={top:"bottom",right:"left",bottom:"top",left:"right"},bme=v.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=lit(yme,r),s=cit[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(iit,{...o,ref:n,style:{...o.style,display:"block"}})})});bme.displayName=yme;function uit(t){return t!==null}var dit=t=>({name:"transformOrigin",options:t,fn(e){var m,S,x;const{placement:n,rects:r,middlewareData:o}=e,s=((m=o.arrow)==null?void 0:m.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,u]=Sme(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((S=o.arrow)==null?void 0:S.x)??0)+a/2,h=(((x=o.arrow)==null?void 0:x.y)??0)+l/2;let g="",y="";return c==="bottom"?(g=s?d:`${f}px`,y=`${-l}px`):c==="top"?(g=s?d:`${f}px`,y=`${r.floating.height+l}px`):c==="right"?(g=`${-l}px`,y=s?d:`${h}px`):c==="left"&&(g=`${r.floating.width+l}px`,y=s?d:`${h}px`),{data:{x:g,y}}}});function Sme(t){const[e,n="center"]=t.split("-");return[e,n]}var N4=pme,F4=mme,xme=vme,wme=bme,Lj="rovingFocusGroup.onEntryFocus",fit={bubbles:!1,cancelable:!0},zw="RovingFocusGroup",[n3,Cme,hit]=_2(zw),[pit,uy]=ql(zw,[hit]),[git,mit]=pit(zw),Eme=v.forwardRef((t,e)=>w.jsx(n3.Provider,{scope:t.__scopeRovingFocusGroup,children:w.jsx(n3.Slot,{scope:t.__scopeRovingFocusGroup,children:w.jsx(vit,{...t,ref:e})})}));Eme.displayName=zw;var vit=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=v.useRef(null),h=Hr(e,f),g=jw(i),[y,m]=zc({prop:s,defaultProp:a??null,onChange:l,caller:zw}),[S,x]=v.useState(!1),C=Ks(c),E=Cme(n),P=v.useRef(!1),[I,T]=v.useState(0);return v.useEffect(()=>{const M=f.current;if(M)return M.addEventListener(Lj,C),()=>M.removeEventListener(Lj,C)},[C]),w.jsx(git,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:y,onItemFocus:v.useCallback(M=>m(M),[m]),onItemShiftTab:v.useCallback(()=>x(!0),[]),onFocusableItemAdd:v.useCallback(()=>T(M=>M+1),[]),onFocusableItemRemove:v.useCallback(()=>T(M=>M-1),[]),children:w.jsx(jn.div,{tabIndex:S||I===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...t.style},onMouseDown:Ft(t.onMouseDown,()=>{P.current=!0}),onFocus:Ft(t.onFocus,M=>{const R=!P.current;if(M.target===M.currentTarget&&R&&!S){const A=new CustomEvent(Lj,fit);if(M.currentTarget.dispatchEvent(A),!A.defaultPrevented){const j=E().filter(H=>H.focusable),N=j.find(H=>H.active),k=j.find(H=>H.id===y),F=[N,k,...j].filter(Boolean).map(H=>H.ref.current);Ime(F,u)}}P.current=!1}),onBlur:Ft(t.onBlur,()=>x(!1))})})}),Pme="RovingFocusGroupItem",_me=v.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:s,...a}=t,l=xd(),c=i||l,u=mit(Pme,n),d=u.currentTabStopId===c,f=Cme(n),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:y}=u;return v.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),w.jsx(n3.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:w.jsx(jn.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:Ft(t.onMouseDown,m=>{r?u.onItemFocus(c):m.preventDefault()}),onFocus:Ft(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ft(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){u.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const S=Sit(m,u.orientation,u.dir);if(S!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let C=f().filter(E=>E.focusable).map(E=>E.ref.current);if(S==="last")C.reverse();else if(S==="prev"||S==="next"){S==="prev"&&C.reverse();const E=C.indexOf(m.currentTarget);C=u.loop?xit(C,E+1):C.slice(E+1)}setTimeout(()=>Ime(C))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:y!=null}):s})})});_me.displayName=Pme;var yit={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bit(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Sit(t,e,n){const r=bit(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return yit[r]}function Ime(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function xit(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var z4=Eme,D2=_me,r3=["Enter"," "],wit=["ArrowDown","PageUp","Home"],Tme=["ArrowUp","PageDown","End"],Cit=[...wit,...Tme],Eit={ltr:[...r3,"ArrowRight"],rtl:[...r3,"ArrowLeft"]},Pit={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Bw="Menu",[Mx,_it,Iit]=_2(Bw),[Eg,j2]=ql(Bw,[Iit,$2,uy]),Hw=$2(),Mme=uy(),[Ome,xh]=Eg(Bw),[Tit,Uw]=Eg(Bw),Rme=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=t,a=Hw(e),[l,c]=v.useState(null),u=v.useRef(!1),d=Ks(i),f=jw(o);return v.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),w.jsx(N4,{...a,children:w.jsx(Ome,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:w.jsx(Tit,{scope:e,onClose:v.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:s,children:r})})})};Rme.displayName=Bw;var Mit="MenuAnchor",B4=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Hw(n);return w.jsx(F4,{...o,...r,ref:e})});B4.displayName=Mit;var H4="MenuPortal",[Oit,kme]=Eg(H4,{forceMount:void 0}),Ame=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,i=xh(H4,e);return w.jsx(Oit,{scope:e,forceMount:n,children:w.jsx(Bc,{present:n||i.open,children:w.jsx(Nw,{asChild:!0,container:o,children:r})})})};Ame.displayName=H4;var Dl="MenuContent",[Rit,U4]=Eg(Dl),$me=v.forwardRef((t,e)=>{const n=kme(Dl,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=xh(Dl,t.__scopeMenu),s=Uw(Dl,t.__scopeMenu);return w.jsx(Mx.Provider,{scope:t.__scopeMenu,children:w.jsx(Bc,{present:r||i.open,children:w.jsx(Mx.Slot,{scope:t.__scopeMenu,children:s.modal?w.jsx(kit,{...o,ref:e}):w.jsx(Ait,{...o,ref:e})})})})}),kit=v.forwardRef((t,e)=>{const n=xh(Dl,t.__scopeMenu),r=v.useRef(null),o=Hr(e,r);return v.useEffect(()=>{const i=r.current;if(i)return P4(i)},[]),w.jsx(W4,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ft(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Ait=v.forwardRef((t,e)=>{const n=xh(Dl,t.__scopeMenu);return w.jsx(W4,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),$it=Iv("MenuContent.ScrollLock"),W4=v.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:g,...y}=t,m=xh(Dl,n),S=Uw(Dl,n),x=Hw(n),C=Mme(n),E=_it(n),[P,I]=v.useState(null),T=v.useRef(null),M=Hr(e,T,m.onContentChange),R=v.useRef(0),A=v.useRef(""),j=v.useRef(0),N=v.useRef(null),k=v.useRef("right"),D=v.useRef(0),F=g?M2:v.Fragment,H=g?{as:$it,allowPinchZoom:!0}:void 0,U=W=>{var ne,ee;const K=A.current+W,q=E().filter(re=>!re.disabled),X=document.activeElement,Z=(ne=q.find(re=>re.ref.current===X))==null?void 0:ne.textValue,Y=q.map(re=>re.textValue),G=qit(Y,K,Z),J=(ee=q.find(re=>re.textValue===G))==null?void 0:ee.ref.current;(function re(le){A.current=le,window.clearTimeout(R.current),le!==""&&(R.current=window.setTimeout(()=>re(""),1e3))})(K),J&&setTimeout(()=>J.focus())};v.useEffect(()=>()=>window.clearTimeout(R.current),[]),E4();const B=v.useCallback(W=>{var q,X;return k.current===((q=N.current)==null?void 0:q.side)&&Git(W,(X=N.current)==null?void 0:X.area)},[]);return w.jsx(Rit,{scope:n,searchRef:A,onItemEnter:v.useCallback(W=>{B(W)&&W.preventDefault()},[B]),onItemLeave:v.useCallback(W=>{var K;B(W)||((K=T.current)==null||K.focus(),I(null))},[B]),onTriggerLeave:v.useCallback(W=>{B(W)&&W.preventDefault()},[B]),pointerGraceTimerRef:j,onPointerGraceIntentChange:v.useCallback(W=>{N.current=W},[]),children:w.jsx(F,{...H,children:w.jsx(I2,{asChild:!0,trapped:o,onMountAutoFocus:Ft(i,W=>{var K;W.preventDefault(),(K=T.current)==null||K.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:w.jsx(Lw,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,children:w.jsx(z4,{asChild:!0,...C,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:I,onEntryFocus:Ft(l,W=>{S.isUsingKeyboardRef.current||W.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(xme,{role:"menu","aria-orientation":"vertical","data-state":Qme(m.open),"data-radix-menu-content":"",dir:S.dir,...x,...y,ref:M,style:{outline:"none",...y.style},onKeyDown:Ft(y.onKeyDown,W=>{const q=W.target.closest("[data-radix-menu-content]")===W.currentTarget,X=W.ctrlKey||W.altKey||W.metaKey,Z=W.key.length===1;q&&(W.key==="Tab"&&W.preventDefault(),!X&&Z&&U(W.key));const Y=T.current;if(W.target!==Y||!Cit.includes(W.key))return;W.preventDefault();const J=E().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);Tme.includes(W.key)&&J.reverse(),Wit(J)}),onBlur:Ft(t.onBlur,W=>{W.currentTarget.contains(W.target)||(window.clearTimeout(R.current),A.current="")}),onPointerMove:Ft(t.onPointerMove,Ox(W=>{const K=W.target,q=D.current!==W.clientX;if(W.currentTarget.contains(K)&&q){const X=W.clientX>D.current?"right":"left";k.current=X,D.current=W.clientX}}))})})})})})})});$me.displayName=Dl;var Dit="MenuGroup",V4=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(jn.div,{role:"group",...r,ref:e})});V4.displayName=Dit;var jit="MenuLabel",Dme=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(jn.div,{...r,ref:e})});Dme.displayName=jit;var BI="MenuItem",qJ="menu.itemSelect",L2=v.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,i=v.useRef(null),s=Uw(BI,t.__scopeMenu),a=U4(BI,t.__scopeMenu),l=Hr(e,i),c=v.useRef(!1),u=()=>{const d=i.current;if(!n&&d){const f=new CustomEvent(qJ,{bubbles:!0,cancelable:!0});d.addEventListener(qJ,h=>r==null?void 0:r(h),{once:!0}),w4(d,f),f.defaultPrevented?c.current=!1:s.onClose()}};return w.jsx(jme,{...o,ref:l,disabled:n,onClick:Ft(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:Ft(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:Ft(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||r3.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});L2.displayName=BI;var jme=v.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=t,s=U4(BI,n),a=Mme(n),l=v.useRef(null),c=Hr(e,l),[u,d]=v.useState(!1),[f,h]=v.useState("");return v.useEffect(()=>{const g=l.current;g&&h((g.textContent??"").trim())},[i.children]),w.jsx(Mx.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:w.jsx(D2,{asChild:!0,...a,focusable:!r,children:w.jsx(jn.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ft(t.onPointerMove,Ox(g=>{r?s.onItemLeave(g):(s.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ft(t.onPointerLeave,Ox(g=>s.onItemLeave(g))),onFocus:Ft(t.onFocus,()=>d(!0)),onBlur:Ft(t.onBlur,()=>d(!1))})})})}),Lit="MenuCheckboxItem",Lme=v.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return w.jsx(Hme,{scope:t.__scopeMenu,checked:n,children:w.jsx(L2,{role:"menuitemcheckbox","aria-checked":HI(n)?"mixed":n,...o,ref:e,"data-state":G4(n),onSelect:Ft(o.onSelect,()=>r==null?void 0:r(HI(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Lme.displayName=Lit;var Nme="MenuRadioGroup",[Nit,Fit]=Eg(Nme,{value:void 0,onValueChange:()=>{}}),Fme=v.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,i=Ks(r);return w.jsx(Nit,{scope:t.__scopeMenu,value:n,onValueChange:i,children:w.jsx(V4,{...o,ref:e})})});Fme.displayName=Nme;var zme="MenuRadioItem",Bme=v.forwardRef((t,e)=>{const{value:n,...r}=t,o=Fit(zme,t.__scopeMenu),i=n===o.value;return w.jsx(Hme,{scope:t.__scopeMenu,checked:i,children:w.jsx(L2,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":G4(i),onSelect:Ft(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});Bme.displayName=zme;var q4="MenuItemIndicator",[Hme,zit]=Eg(q4,{checked:!1}),Ume=v.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,i=zit(q4,n);return w.jsx(Bc,{present:r||HI(i.checked)||i.checked===!0,children:w.jsx(jn.span,{...o,ref:e,"data-state":G4(i.checked)})})});Ume.displayName=q4;var Bit="MenuSeparator",Wme=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(jn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Wme.displayName=Bit;var Hit="MenuArrow",Vme=v.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Hw(n);return w.jsx(wme,{...o,...r,ref:e})});Vme.displayName=Hit;var K4="MenuSub",[Uit,qme]=Eg(K4),Kme=t=>{const{__scopeMenu:e,children:n,open:r=!1,onOpenChange:o}=t,i=xh(K4,e),s=Hw(e),[a,l]=v.useState(null),[c,u]=v.useState(null),d=Ks(o);return v.useEffect(()=>(i.open===!1&&d(!1),()=>d(!1)),[i.open,d]),w.jsx(N4,{...s,children:w.jsx(Ome,{scope:e,open:r,onOpenChange:d,content:c,onContentChange:u,children:w.jsx(Uit,{scope:e,contentId:xd(),triggerId:xd(),trigger:a,onTriggerChange:l,children:n})})})};Kme.displayName=K4;var Ub="MenuSubTrigger",Gme=v.forwardRef((t,e)=>{const n=xh(Ub,t.__scopeMenu),r=Uw(Ub,t.__scopeMenu),o=qme(Ub,t.__scopeMenu),i=U4(Ub,t.__scopeMenu),s=v.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},u=v.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return v.useEffect(()=>u,[u]),v.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),w.jsx(B4,{asChild:!0,...c,children:w.jsx(jme,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Qme(n.open),...t,ref:P2(e,o.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ft(t.onPointerMove,Ox(d=>{i.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ft(t.onPointerLeave,Ox(d=>{var h,g;u();const f=(h=n.content)==null?void 0:h.getBoundingClientRect();if(f){const y=(g=n.content)==null?void 0:g.dataset.side,m=y==="right",S=m?-5:5,x=f[m?"left":"right"],C=f[m?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+S,y:d.clientY},{x,y:f.top},{x:C,y:f.top},{x:C,y:f.bottom},{x,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ft(t.onKeyDown,d=>{var h;const f=i.searchRef.current!=="";t.disabled||f&&d.key===" "||Eit[r.dir].includes(d.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),d.preventDefault())})})})});Gme.displayName=Ub;var Xme="MenuSubContent",Yme=v.forwardRef((t,e)=>{const n=kme(Dl,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=xh(Dl,t.__scopeMenu),s=Uw(Dl,t.__scopeMenu),a=qme(Xme,t.__scopeMenu),l=v.useRef(null),c=Hr(e,l);return w.jsx(Mx.Provider,{scope:t.__scopeMenu,children:w.jsx(Bc,{present:r||i.open,children:w.jsx(Mx.Slot,{scope:t.__scopeMenu,children:w.jsx(W4,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;s.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ft(t.onFocusOutside,u=>{u.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ft(t.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:Ft(t.onKeyDown,u=>{var h;const d=u.currentTarget.contains(u.target),f=Pit[s.dir].includes(u.key);d&&f&&(i.onOpenChange(!1),(h=a.trigger)==null||h.focus(),u.preventDefault())})})})})})});Yme.displayName=Xme;function Qme(t){return t?"open":"closed"}function HI(t){return t==="indeterminate"}function G4(t){return HI(t)?"indeterminate":t?"checked":"unchecked"}function Wit(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Vit(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function qit(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=Vit(t,Math.max(i,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function Kit(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],c=a.x,u=a.y,d=l.x,f=l.y;u>r!=f>r&&n<(d-c)*(r-u)/(f-u)+c&&(o=!o)}return o}function Git(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Kit(n,e)}function Ox(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Zme=Rme,Jme=B4,eve=Ame,tve=$me,nve=V4,rve=Dme,ove=L2,ive=Lme,sve=Fme,ave=Bme,lve=Ume,cve=Wme,uve=Vme,dve=Kme,fve=Gme,hve=Yme,X4="ContextMenu",[Xit,_0t]=ql(X4,[j2]),Es=j2(),[Yit,pve]=Xit(X4),gve=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,dir:o,modal:i=!0}=t,[s,a]=v.useState(!1),l=Es(e),c=Ks(r),u=v.useCallback(d=>{a(d),c(d)},[c]);return w.jsx(Yit,{scope:e,open:s,onOpenChange:u,modal:i,children:w.jsx(Zme,{...l,dir:o,open:s,onOpenChange:u,modal:i,children:n})})};gve.displayName=X4;var mve="ContextMenuTrigger",vve=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=t,i=pve(mve,n),s=Es(n),a=v.useRef({x:0,y:0}),l=v.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),c=v.useRef(0),u=v.useCallback(()=>window.clearTimeout(c.current),[]),d=f=>{a.current={x:f.clientX,y:f.clientY},i.onOpenChange(!0)};return v.useEffect(()=>u,[u]),v.useEffect(()=>void(r&&u()),[r,u]),w.jsxs(w.Fragment,{children:[w.jsx(Jme,{...s,virtualRef:l}),w.jsx(jn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:e,style:{WebkitTouchCallout:"none",...t.style},onContextMenu:r?t.onContextMenu:Ft(t.onContextMenu,f=>{u(),d(f),f.preventDefault()}),onPointerDown:r?t.onPointerDown:Ft(t.onPointerDown,wE(f=>{u(),c.current=window.setTimeout(()=>d(f),700)})),onPointerMove:r?t.onPointerMove:Ft(t.onPointerMove,wE(u)),onPointerCancel:r?t.onPointerCancel:Ft(t.onPointerCancel,wE(u)),onPointerUp:r?t.onPointerUp:Ft(t.onPointerUp,wE(u))})]})});vve.displayName=mve;var Qit="ContextMenuPortal",Y4=t=>{const{__scopeContextMenu:e,...n}=t,r=Es(e);return w.jsx(eve,{...r,...n})};Y4.displayName=Qit;var yve="ContextMenuContent",bve=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=pve(yve,n),i=Es(n),s=v.useRef(!1);return w.jsx(tve,{...i,...r,ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var l;(l=t.onCloseAutoFocus)==null||l.call(t,a),!a.defaultPrevented&&s.current&&a.preventDefault(),s.current=!1},onInteractOutside:a=>{var l;(l=t.onInteractOutside)==null||l.call(t,a),!a.defaultPrevented&&!o.modal&&(s.current=!0)},style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bve.displayName=yve;var Zit="ContextMenuGroup",Jit=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(nve,{...o,...r,ref:e})});Jit.displayName=Zit;var est="ContextMenuLabel",tst=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(rve,{...o,...r,ref:e})});tst.displayName=est;var nst="ContextMenuItem",Sve=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(ove,{...o,...r,ref:e})});Sve.displayName=nst;var rst="ContextMenuCheckboxItem",xve=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(ive,{...o,...r,ref:e})});xve.displayName=rst;var ost="ContextMenuRadioGroup",ist=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(sve,{...o,...r,ref:e})});ist.displayName=ost;var sst="ContextMenuRadioItem",ast=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(ave,{...o,...r,ref:e})});ast.displayName=sst;var lst="ContextMenuItemIndicator",cst=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(lve,{...o,...r,ref:e})});cst.displayName=lst;var ust="ContextMenuSeparator",dst=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(cve,{...o,...r,ref:e})});dst.displayName=ust;var fst="ContextMenuArrow",hst=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(uve,{...o,...r,ref:e})});hst.displayName=fst;var wve="ContextMenuSub",Cve=t=>{const{__scopeContextMenu:e,children:n,onOpenChange:r,open:o,defaultOpen:i}=t,s=Es(e),[a,l]=zc({prop:o,defaultProp:i??!1,onChange:r,caller:wve});return w.jsx(dve,{...s,open:a,onOpenChange:l,children:n})};Cve.displayName=wve;var pst="ContextMenuSubTrigger",Eve=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(fve,{...o,...r,ref:e})});Eve.displayName=pst;var gst="ContextMenuSubContent",Pve=v.forwardRef((t,e)=>{const{__scopeContextMenu:n,...r}=t,o=Es(n);return w.jsx(hve,{...o,...r,ref:e,style:{...t.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pve.displayName=gst;function wE(t){return e=>e.pointerType!=="mouse"?t(e):void 0}var mst=gve,vst=vve,yst=Y4,bst=bve,Sst=Sve,xst=xve,N2="DropdownMenu",[wst,I0t]=ql(N2,[j2]),Ps=j2(),[Cst,_ve]=wst(N2),Ive=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=Ps(e),c=v.useRef(null),[u,d]=zc({prop:o,defaultProp:i??!1,onChange:s,caller:N2});return w.jsx(Cst,{scope:e,triggerId:xd(),triggerRef:c,contentId:xd(),open:u,onOpenChange:d,onOpenToggle:v.useCallback(()=>d(f=>!f),[d]),modal:a,children:w.jsx(Zme,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};Ive.displayName=N2;var Tve="DropdownMenuTrigger",Mve=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,i=_ve(Tve,n),s=Ps(n);return w.jsx(Jme,{asChild:!0,...s,children:w.jsx(jn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:P2(e,i.triggerRef),onPointerDown:Ft(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:Ft(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Mve.displayName=Tve;var Est="DropdownMenuPortal",Ove=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ps(e);return w.jsx(eve,{...r,...n})};Ove.displayName=Est;var Rve="DropdownMenuContent",kve=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=_ve(Rve,n),i=Ps(n),s=v.useRef(!1);return w.jsx(tve,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...r,ref:e,onCloseAutoFocus:Ft(t.onCloseAutoFocus,a=>{var l;s.current||(l=o.triggerRef.current)==null||l.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:Ft(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kve.displayName=Rve;var Pst="DropdownMenuGroup",_st=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(nve,{...o,...r,ref:e})});_st.displayName=Pst;var Ist="DropdownMenuLabel",Tst=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(rve,{...o,...r,ref:e})});Tst.displayName=Ist;var Mst="DropdownMenuItem",Ave=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(ove,{...o,...r,ref:e})});Ave.displayName=Mst;var Ost="DropdownMenuCheckboxItem",$ve=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(ive,{...o,...r,ref:e})});$ve.displayName=Ost;var Rst="DropdownMenuRadioGroup",kst=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(sve,{...o,...r,ref:e})});kst.displayName=Rst;var Ast="DropdownMenuRadioItem",$st=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(ave,{...o,...r,ref:e})});$st.displayName=Ast;var Dst="DropdownMenuItemIndicator",jst=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(lve,{...o,...r,ref:e})});jst.displayName=Dst;var Lst="DropdownMenuSeparator",Nst=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(cve,{...o,...r,ref:e})});Nst.displayName=Lst;var Fst="DropdownMenuArrow",zst=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(uve,{...o,...r,ref:e})});zst.displayName=Fst;var Bst=t=>{const{__scopeDropdownMenu:e,children:n,open:r,onOpenChange:o,defaultOpen:i}=t,s=Ps(e),[a,l]=zc({prop:r,defaultProp:i??!1,onChange:o,caller:"DropdownMenuSub"});return w.jsx(dve,{...s,open:a,onOpenChange:l,children:n})},Hst="DropdownMenuSubTrigger",Dve=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(fve,{...o,...r,ref:e})});Dve.displayName=Hst;var Ust="DropdownMenuSubContent",jve=v.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Ps(n);return w.jsx(hve,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jve.displayName=Ust;var Q4=Ive,Z4=Mve,F2=Ove,J4=kve,Wst=Ave,Vst=$ve,qst=Bst,Kst=Dve,Gst=jve;function Lve(t,[e,n]){return Math.min(n,Math.max(e,t))}var z2="Popover",[Nve,T0t]=ql(z2,[$2]),Ww=$2(),[Xst,wh]=Nve(z2),Fve=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!1}=t,a=Ww(e),l=v.useRef(null),[c,u]=v.useState(!1),[d,f]=zc({prop:r,defaultProp:o??!1,onChange:i,caller:z2});return w.jsx(N4,{...a,children:w.jsx(Xst,{scope:e,contentId:xd(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:v.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:v.useCallback(()=>u(!0),[]),onCustomAnchorRemove:v.useCallback(()=>u(!1),[]),modal:s,children:n})})};Fve.displayName=z2;var zve="PopoverAnchor",Yst=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=wh(zve,n),i=Ww(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=o;return v.useEffect(()=>(s(),()=>a()),[s,a]),w.jsx(F4,{...i,...r,ref:e})});Yst.displayName=zve;var Bve="PopoverTrigger",Hve=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=wh(Bve,n),i=Ww(n),s=Hr(e,o.triggerRef),a=w.jsx(jn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Kve(o.open),...r,ref:s,onClick:Ft(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:w.jsx(F4,{asChild:!0,...i,children:a})});Hve.displayName=Bve;var e6="PopoverPortal",[Qst,Zst]=Nve(e6,{forceMount:void 0}),Uve=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,i=wh(e6,e);return w.jsx(Qst,{scope:e,forceMount:n,children:w.jsx(Bc,{present:n||i.open,children:w.jsx(Nw,{asChild:!0,container:o,children:r})})})};Uve.displayName=e6;var Mv="PopoverContent",Wve=v.forwardRef((t,e)=>{const n=Zst(Mv,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,i=wh(Mv,t.__scopePopover);return w.jsx(Bc,{present:r||i.open,children:i.modal?w.jsx(eat,{...o,ref:e}):w.jsx(tat,{...o,ref:e})})});Wve.displayName=Mv;var Jst=Iv("PopoverContent.RemoveScroll"),eat=v.forwardRef((t,e)=>{const n=wh(Mv,t.__scopePopover),r=v.useRef(null),o=Hr(e,r),i=v.useRef(!1);return v.useEffect(()=>{const s=r.current;if(s)return P4(s)},[]),w.jsx(M2,{as:Jst,allowPinchZoom:!0,children:w.jsx(Vve,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(t.onCloseAutoFocus,s=>{var a;s.preventDefault(),i.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Ft(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),tat=v.forwardRef((t,e)=>{const n=wh(Mv,t.__scopePopover),r=v.useRef(!1),o=v.useRef(!1);return w.jsx(Vve,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Vve=v.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=wh(Mv,n),h=Ww(n);return E4(),w.jsx(I2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:w.jsx(Lw,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:w.jsx(xme,{"data-state":Kve(f.open),role:"dialog",id:f.contentId,...h,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qve="PopoverClose",nat=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=wh(qve,n);return w.jsx(jn.button,{type:"button",...r,ref:e,onClick:Ft(t.onClick,()=>o.onOpenChange(!1))})});nat.displayName=qve;var rat="PopoverArrow",oat=v.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Ww(n);return w.jsx(wme,{...o,...r,ref:e})});oat.displayName=rat;function Kve(t){return t?"open":"closed"}var t6=Fve,n6=Hve,r6=Uve,o6=Wve,iat="Separator",KJ="horizontal",sat=["horizontal","vertical"],Gve=v.forwardRef((t,e)=>{const{decorative:n,orientation:r=KJ,...o}=t,i=aat(r)?r:KJ,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return w.jsx(jn.div,{"data-orientation":i,...a,...o,ref:e})});Gve.displayName=iat;function aat(t){return sat.includes(t)}var lat=Gve,Xve=["PageUp","PageDown"],Yve=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Qve={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},dy="Slider",[o3,cat,uat]=_2(dy),[Zve,M0t]=ql(dy,[uat]),[dat,B2]=Zve(dy),Jve=v.forwardRef((t,e)=>{const{name:n,min:r=0,max:o=100,step:i=1,orientation:s="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,form:g,...y}=t,m=v.useRef(new Set),S=v.useRef(0),C=s==="horizontal"?fat:hat,[E=[],P]=zc({prop:u,defaultProp:c,onChange:j=>{var k;(k=[...m.current][S.current])==null||k.focus(),d(j)}}),I=v.useRef(E);function T(j){const N=yat(E,j);A(j,N)}function M(j){A(j,S.current)}function R(){const j=I.current[S.current];E[S.current]!==j&&f(E)}function A(j,N,{commit:k}={commit:!1}){const D=wat(i),F=Cat(Math.round((j-r)/i)*i+r,D),H=Lve(F,[r,o]);P((U=[])=>{const B=mat(U,H,N);if(xat(B,l*i)){S.current=B.indexOf(H);const W=String(B)!==String(U);return W&&k&&f(B),W?B:U}else return U})}return w.jsx(dat,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:o,valueIndexToChangeRef:S,thumbs:m.current,values:E,orientation:s,form:g,children:w.jsx(o3.Provider,{scope:t.__scopeSlider,children:w.jsx(o3.Slot,{scope:t.__scopeSlider,children:w.jsx(C,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:e,onPointerDown:Ft(y.onPointerDown,()=>{a||(I.current=E)}),min:r,max:o,inverted:h,onSlideStart:a?void 0:T,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:R,onHomeKeyDown:()=>!a&&A(r,0,{commit:!0}),onEndKeyDown:()=>!a&&A(o,E.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:N})=>{if(!a){const F=Xve.includes(j.key)||j.shiftKey&&Yve.includes(j.key)?10:1,H=S.current,U=E[H],B=i*F*N;A(U+B,H,{commit:!0})}}})})})})});Jve.displayName=dy;var[eye,tye]=Zve(dy,{startEdge:"left",endEdge:"right",size:"width",direction:1}),fat=v.forwardRef((t,e)=>{const{min:n,max:r,dir:o,inverted:i,onSlideStart:s,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=v.useState(null),h=Hr(e,C=>f(C)),g=v.useRef(void 0),y=jw(o),m=y==="ltr",S=m&&!i||!m&&i;function x(C){const E=g.current||d.getBoundingClientRect(),P=[0,E.width],T=i6(P,S?[n,r]:[r,n]);return g.current=E,T(C-E.left)}return w.jsx(eye,{scope:t.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:w.jsx(nye,{dir:y,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const E=x(C.clientX);s==null||s(E)},onSlideMove:C=>{const E=x(C.clientX);a==null||a(E)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:C=>{const P=Qve[S?"from-left":"from-right"].includes(C.key);c==null||c({event:C,direction:P?-1:1})}})})}),hat=v.forwardRef((t,e)=>{const{min:n,max:r,inverted:o,onSlideStart:i,onSlideMove:s,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=v.useRef(null),d=Hr(e,u),f=v.useRef(void 0),h=!o;function g(y){const m=f.current||u.current.getBoundingClientRect(),S=[0,m.height],C=i6(S,h?[r,n]:[n,r]);return f.current=m,C(y-m.top)}return w.jsx(eye,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:w.jsx(nye,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const m=g(y.clientY);i==null||i(m)},onSlideMove:y=>{const m=g(y.clientY);s==null||s(m)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:y=>{const S=Qve[h?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:S?-1:1})}})})}),nye=v.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:o,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=B2(dy,n);return w.jsx(jn.span,{...c,ref:e,onKeyDown:Ft(t.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):Xve.concat(Yve).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Ft(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():r(d)}),onPointerMove:Ft(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&o(d)}),onPointerUp:Ft(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),i(d))})})}),rye="SliderTrack",oye=v.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,o=B2(rye,n);return w.jsx(jn.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:e})});oye.displayName=rye;var i3="SliderRange",iye=v.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,o=B2(i3,n),i=tye(i3,n),s=v.useRef(null),a=Hr(e,s),l=o.values.length,c=o.values.map(f=>lye(f,o.min,o.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return w.jsx(jn.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:a,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:d+"%"}})});iye.displayName=i3;var s3="SliderThumb",sye=v.forwardRef((t,e)=>{const n=cat(t.__scopeSlider),[r,o]=v.useState(null),i=Hr(e,a=>o(a)),s=v.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return w.jsx(pat,{...t,ref:i,index:s})}),pat=v.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:o,...i}=t,s=B2(s3,n),a=tye(s3,n),[l,c]=v.useState(null),u=Hr(e,x=>c(x)),d=l?s.form||!!l.closest("form"):!0,f=eme(l),h=s.values[r],g=h===void 0?0:lye(h,s.min,s.max),y=vat(r,s.values.length),m=f==null?void 0:f[a.size],S=m?bat(m,g,a.direction):0;return v.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),w.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${S}px)`},children:[w.jsx(o3.ItemSlot,{scope:t.__scopeSlider,children:w.jsx(jn.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":s.min,"aria-valuenow":h,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:u,style:h===void 0?{display:"none"}:t.style,onFocus:Ft(t.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),d&&w.jsx(aye,{name:o??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:h},r)]})});sye.displayName=s3;var gat="RadioBubbleInput",aye=v.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const o=v.useRef(null),i=Hr(o,r),s=oot(e);return v.useEffect(()=>{const a=o.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[s,e]),w.jsx(jn.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});aye.displayName=gat;function mat(t=[],e,n){const r=[...t];return r[n]=e,r.sort((o,i)=>o-i)}function lye(t,e,n){const i=100/(n-e)*(t-e);return Lve(i,[0,100])}function vat(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function yat(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),r=Math.min(...n);return n.indexOf(r)}function bat(t,e,n){const r=t/2,i=i6([0,50],[0,r]);return(r-i(e)*n)*n}function Sat(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function xat(t,e){if(e>0){const n=Sat(t);return Math.min(...n)>=e}return!0}function i6(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function wat(t){return(String(t).split(".")[1]||"").length}function Cat(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var Eat=Jve,Pat=oye,_at=iye,Iat=sye,s6="ToastProvider",[a6,Tat,Mat]=_2("Toast"),[cye,O0t]=ql("Toast",[Mat]),[Oat,H2]=cye(s6),uye=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:o="right",swipeThreshold:i=50,children:s}=t,[a,l]=v.useState(null),[c,u]=v.useState(0),d=v.useRef(!1),f=v.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${s6}\`. Expected non-empty \`string\`.`),w.jsx(a6.Provider,{scope:e,children:w.jsx(Oat,{scope:e,label:n,duration:r,swipeDirection:o,swipeThreshold:i,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:v.useCallback(()=>u(h=>h+1),[]),onToastRemove:v.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:s})})};uye.displayName=s6;var dye="ToastViewport",Rat=["F8"],a3="toast.viewportPause",l3="toast.viewportResume",fye=v.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Rat,label:o="Notifications ({hotkey})",...i}=t,s=H2(dye,n),a=Tat(n),l=v.useRef(null),c=v.useRef(null),u=v.useRef(null),d=v.useRef(null),f=Hr(e,d,s.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=s.toastCount>0;v.useEffect(()=>{const m=S=>{var C;r.length!==0&&r.every(E=>S[E]||S.code===E)&&((C=d.current)==null||C.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[r]),v.useEffect(()=>{const m=l.current,S=d.current;if(g&&m&&S){const x=()=>{if(!s.isClosePausedRef.current){const I=new CustomEvent(a3);S.dispatchEvent(I),s.isClosePausedRef.current=!0}},C=()=>{if(s.isClosePausedRef.current){const I=new CustomEvent(l3);S.dispatchEvent(I),s.isClosePausedRef.current=!1}},E=I=>{!m.contains(I.relatedTarget)&&C()},P=()=>{m.contains(document.activeElement)||C()};return m.addEventListener("focusin",x),m.addEventListener("focusout",E),m.addEventListener("pointermove",x),m.addEventListener("pointerleave",P),window.addEventListener("blur",x),window.addEventListener("focus",C),()=>{m.removeEventListener("focusin",x),m.removeEventListener("focusout",E),m.removeEventListener("pointermove",x),m.removeEventListener("pointerleave",P),window.removeEventListener("blur",x),window.removeEventListener("focus",C)}}},[g,s.isClosePausedRef]);const y=v.useCallback(({tabbingDirection:m})=>{const x=a().map(C=>{const E=C.ref.current,P=[E,...Wat(E)];return m==="forwards"?P:P.reverse()});return(m==="forwards"?x.reverse():x).flat()},[a]);return v.useEffect(()=>{const m=d.current;if(m){const S=x=>{var P,I,T;const C=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!C){const M=document.activeElement,R=x.shiftKey;if(x.target===m&&R){(P=c.current)==null||P.focus();return}const N=y({tabbingDirection:R?"backwards":"forwards"}),k=N.findIndex(D=>D===M);Nj(N.slice(k+1))?x.preventDefault():R?(I=c.current)==null||I.focus():(T=u.current)==null||T.focus()}};return m.addEventListener("keydown",S),()=>m.removeEventListener("keydown",S)}},[a,y]),w.jsxs(Gnt,{ref:l,role:"region","aria-label":o.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&w.jsx(c3,{ref:c,onFocusFromOutsideViewport:()=>{const m=y({tabbingDirection:"forwards"});Nj(m)}}),w.jsx(a6.Slot,{scope:n,children:w.jsx(jn.ol,{tabIndex:-1,...i,ref:f})}),g&&w.jsx(c3,{ref:u,onFocusFromOutsideViewport:()=>{const m=y({tabbingDirection:"backwards"});Nj(m)}})]})});fye.displayName=dye;var hye="ToastFocusProxy",c3=v.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...o}=t,i=H2(hye,n);return w.jsx(C4,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:s=>{var c;const a=s.relatedTarget;!((c=i.viewport)!=null&&c.contains(a))&&r()}})});c3.displayName=hye;var Vw="Toast",kat="toast.swipeStart",Aat="toast.swipeMove",$at="toast.swipeCancel",Dat="toast.swipeEnd",pye=v.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:o,onOpenChange:i,...s}=t,[a,l]=zc({prop:r,defaultProp:o??!0,onChange:i,caller:Vw});return w.jsx(Bc,{present:n||a,children:w.jsx(Nat,{open:a,...s,ref:e,onClose:()=>l(!1),onPause:Ks(t.onPause),onResume:Ks(t.onResume),onSwipeStart:Ft(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ft(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ft(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ft(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});pye.displayName=Vw;var[jat,Lat]=cye(Vw,{onClose(){}}),Nat=v.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:o,open:i,onClose:s,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...g}=t,y=H2(Vw,n),[m,S]=v.useState(null),x=Hr(e,D=>S(D)),C=v.useRef(null),E=v.useRef(null),P=o||y.duration,I=v.useRef(0),T=v.useRef(P),M=v.useRef(0),{onToastAdd:R,onToastRemove:A}=y,j=Ks(()=>{var F;(m==null?void 0:m.contains(document.activeElement))&&((F=y.viewport)==null||F.focus()),s()}),N=v.useCallback(D=>{!D||D===1/0||(window.clearTimeout(M.current),I.current=new Date().getTime(),M.current=window.setTimeout(j,D))},[j]);v.useEffect(()=>{const D=y.viewport;if(D){const F=()=>{N(T.current),c==null||c()},H=()=>{const U=new Date().getTime()-I.current;T.current=T.current-U,window.clearTimeout(M.current),l==null||l()};return D.addEventListener(a3,H),D.addEventListener(l3,F),()=>{D.removeEventListener(a3,H),D.removeEventListener(l3,F)}}},[y.viewport,P,l,c,N]),v.useEffect(()=>{i&&!y.isClosePausedRef.current&&N(P)},[i,P,y.isClosePausedRef,N]),v.useEffect(()=>(R(),()=>A()),[R,A]);const k=v.useMemo(()=>m?xye(m):null,[m]);return y.viewport?w.jsxs(w.Fragment,{children:[k&&w.jsx(Fat,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),w.jsx(jat,{scope:n,onClose:j,children:Ya.createPortal(w.jsx(a6.ItemSlot,{scope:n,children:w.jsx(Knt,{asChild:!0,onEscapeKeyDown:Ft(a,()=>{y.isFocusedToastEscapeKeyDownRef.current||j(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:w.jsx(jn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Ft(t.onKeyDown,D=>{D.key==="Escape"&&(a==null||a(D.nativeEvent),D.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:Ft(t.onPointerDown,D=>{D.button===0&&(C.current={x:D.clientX,y:D.clientY})}),onPointerMove:Ft(t.onPointerMove,D=>{if(!C.current)return;const F=D.clientX-C.current.x,H=D.clientY-C.current.y,U=!!E.current,B=["left","right"].includes(y.swipeDirection),W=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,K=B?W(0,F):0,q=B?0:W(0,H),X=D.pointerType==="touch"?10:2,Z={x:K,y:q},Y={originalEvent:D,delta:Z};U?(E.current=Z,CE(Aat,d,Y,{discrete:!1})):GJ(Z,y.swipeDirection,X)?(E.current=Z,CE(kat,u,Y,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(F)>X||Math.abs(H)>X)&&(C.current=null)}),onPointerUp:Ft(t.onPointerUp,D=>{const F=E.current,H=D.target;if(H.hasPointerCapture(D.pointerId)&&H.releasePointerCapture(D.pointerId),E.current=null,C.current=null,F){const U=D.currentTarget,B={originalEvent:D,delta:F};GJ(F,y.swipeDirection,y.swipeThreshold)?CE(Dat,h,B,{discrete:!0}):CE($at,f,B,{discrete:!0}),U.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),Fat=t=>{const{__scopeToast:e,children:n,...r}=t,o=H2(Vw,e),[i,s]=v.useState(!1),[a,l]=v.useState(!1);return Hat(()=>s(!0)),v.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:w.jsx(Nw,{asChild:!0,children:w.jsx(C4,{...r,children:i&&w.jsxs(w.Fragment,{children:[o.label," ",n]})})})},zat="ToastTitle",gye=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return w.jsx(jn.div,{...r,ref:e})});gye.displayName=zat;var Bat="ToastDescription",mye=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return w.jsx(jn.div,{...r,ref:e})});mye.displayName=Bat;var vye="ToastAction",yye=v.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?w.jsx(Sye,{altText:n,asChild:!0,children:w.jsx(l6,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${vye}\`. Expected non-empty \`string\`.`),null)});yye.displayName=vye;var bye="ToastClose",l6=v.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,o=Lat(bye,n);return w.jsx(Sye,{asChild:!0,children:w.jsx(jn.button,{type:"button",...r,ref:e,onClick:Ft(t.onClick,o.onClose)})})});l6.displayName=bye;var Sye=v.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...o}=t;return w.jsx(jn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...o,ref:e})});function xye(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Uat(r)){const o=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!o)if(i){const s=r.dataset.radixToastAnnounceAlt;s&&e.push(s)}else e.push(...xye(r))}}),e}function CE(t,e,n,{discrete:r}){const o=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?w4(o,i):o.dispatchEvent(i)}var GJ=(t,e,n=0)=>{const r=Math.abs(t.x),o=Math.abs(t.y),i=r>o;return e==="left"||e==="right"?i&&r>n:!i&&o>n};function Hat(t=()=>{}){const e=Ks(t);kd(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function Uat(t){return t.nodeType===t.ELEMENT_NODE}function Wat(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Nj(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Vat=uye,qat=pye,Kat=gye,Gat=mye,Xat=yye,XJ=l6,wye="Toggle",Cye=v.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...i}=t,[s,a]=zc({prop:n,onChange:o,defaultProp:r??!1,caller:wye});return w.jsx(jn.button,{type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":t.disabled?"":void 0,...i,ref:e,onClick:Ft(t.onClick,()=>{t.disabled||a(!s)})})});Cye.displayName=wye;var Ch="ToggleGroup",[Eye,Pye]=ql(Ch,[uy]),_ye=uy(),c6=ce.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const o=r;return w.jsx(Yat,{...o,ref:e})}if(n==="multiple"){const o=r;return w.jsx(Qat,{...o,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${Ch}\``)});c6.displayName=Ch;var[Iye,Tye]=Eye(Ch),Yat=ce.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=t,[s,a]=zc({prop:n,defaultProp:r??"",onChange:o,caller:Ch});return w.jsx(Iye,{scope:t.__scopeToggleGroup,type:"single",value:ce.useMemo(()=>s?[s]:[],[s]),onItemActivate:a,onItemDeactivate:ce.useCallback(()=>a(""),[a]),children:w.jsx(Mye,{...i,ref:e})})}),Qat=ce.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:o=()=>{},...i}=t,[s,a]=zc({prop:n,defaultProp:r??[],onChange:o,caller:Ch}),l=ce.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=ce.useCallback(u=>a((d=[])=>d.filter(f=>f!==u)),[a]);return w.jsx(Iye,{scope:t.__scopeToggleGroup,type:"multiple",value:s,onItemActivate:l,onItemDeactivate:c,children:w.jsx(Mye,{...i,ref:e})})});c6.displayName=Ch;var[Zat,Jat]=Eye(Ch),Mye=ce.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:o=!0,orientation:i,dir:s,loop:a=!0,...l}=t,c=_ye(n),u=jw(s),d={role:"group",dir:u,...l};return w.jsx(Zat,{scope:n,rovingFocus:o,disabled:r,children:o?w.jsx(z4,{asChild:!0,...c,orientation:i,dir:u,loop:a,children:w.jsx(jn.div,{...d,ref:e})}):w.jsx(jn.div,{...d,ref:e})})}),UI="ToggleGroupItem",Oye=ce.forwardRef((t,e)=>{const n=Tye(UI,t.__scopeToggleGroup),r=Jat(UI,t.__scopeToggleGroup),o=_ye(t.__scopeToggleGroup),i=n.value.includes(t.value),s=r.disabled||t.disabled,a={...t,pressed:i,disabled:s},l=ce.useRef(null);return r.rovingFocus?w.jsx(D2,{asChild:!0,...o,focusable:!s,active:i,ref:l,children:w.jsx(YJ,{...a,ref:e})}):w.jsx(YJ,{...a,ref:e})});Oye.displayName=UI;var YJ=ce.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...o}=t,i=Tye(UI,n),s={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},a=i.type==="single"?s:void 0;return w.jsx(Cye,{...a,...o,ref:e,onPressedChange:l=>{l?i.onItemActivate(r):i.onItemDeactivate(r)}})}),elt=c6,tlt=Oye,u6="Toolbar",[nlt,R0t]=ql(u6,[uy,Pye]),d6=uy(),Rye=Pye(),[rlt,kye]=nlt(u6),Aye=v.forwardRef((t,e)=>{const{__scopeToolbar:n,orientation:r="horizontal",dir:o,loop:i=!0,...s}=t,a=d6(n),l=jw(o);return w.jsx(rlt,{scope:n,orientation:r,dir:l,children:w.jsx(z4,{asChild:!0,...a,orientation:r,dir:l,loop:i,children:w.jsx(jn.div,{role:"toolbar","aria-orientation":r,dir:l,...s,ref:e})})})});Aye.displayName=u6;var $ye="ToolbarSeparator",olt=v.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=kye($ye,n);return w.jsx(lat,{orientation:o.orientation==="horizontal"?"vertical":"horizontal",...r,ref:e})});olt.displayName=$ye;var ilt="ToolbarButton",f6=v.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=d6(n);return w.jsx(D2,{asChild:!0,...o,focusable:!t.disabled,children:w.jsx(jn.button,{type:"button",...r,ref:e})})});f6.displayName=ilt;var slt="ToolbarLink",alt=v.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=d6(n);return w.jsx(D2,{asChild:!0,...o,focusable:!0,children:w.jsx(jn.a,{...r,ref:e,onKeyDown:Ft(t.onKeyDown,i=>{i.key===" "&&i.currentTarget.click()})})})});alt.displayName=slt;var Dye="ToolbarToggleGroup",jye=v.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=kye(Dye,n),i=Rye(n);return w.jsx(elt,{"data-orientation":o.orientation,dir:o.dir,...i,...r,ref:e,rovingFocus:!1})});jye.displayName=Dye;var llt="ToolbarToggleItem",Lye=v.forwardRef((t,e)=>{const{__scopeToolbar:n,...r}=t,o=Rye(n),i={__scopeToolbar:t.__scopeToolbar};return w.jsx(f6,{asChild:!0,...i,children:w.jsx(tlt,{...o,...r,ref:e})})});Lye.displayName=llt;var clt=Aye,ult=f6,dlt=jye,flt=Lye;function Fr(t,e){var o;const n=new Set;for(const i of e){const s=t.getShape(i);if(!s)continue;t.getShapeUtil(s).onDragShapesOut&&n.add(s);const a=t.getShape(s.parentId);a&&t.getShapeUtil(a).onDragShapesOut&&n.add(a)}const r=new Map;for(const i of n){const s=Nye(t,i);s.length&&r.set(i,s)}for(const[i,s]of r){const a=t.getShapeUtil(i),l=Tn(s.map(c=>t.getShape(c)));(o=a.onDragShapesOut)==null||o.call(a,i,l)}}function Nye(t,e){const n=t.getSortedChildIdsForParent(e.id);if(n.length===0)return[];const r=t.getShapePageBounds(e);if(!r)return[];let o,i,s;const a=[];for(const l of n){const c=t.getShapePageBounds(l);if(!c)continue;if(!r.includes(c)){a.push(l);continue}o??(o=t.getShapeGeometry(e)),i??(i=t.getShapePageTransform(e)),s??(s=i.applyToPoints(o.vertices));const u=t.getShapePageTransform(l).clone().invert().applyToPoints(s),{vertices:d,isClosed:f}=t.getShapeGeometry(l);if(!d.some(h=>Ka(h,u))){if(f){if(AB(u,d))continue}else if(fqe(u,d))continue;a.push(l)}}return a}function WI(t,e,n=!1){t.select(e),t.setEditingShape(e),t.setCurrentTool("select.editing_shape",{target:"shape",shape:e}),n&&t.emit("select-all-text",{shapeId:e.id})}function hlt(t,e){const n=Tn(e.map(o=>t.getShape(o)).filter(o=>o&&t.isShapeOfType(o,"frame")));if(!n.length)return;const r=[];t.run(()=>{n.map(o=>{const i=t.getSortedChildIdsForParent(o.id);i.length&&(t.reparentShapes(i,o.parentId,o.index),r.push(...i))}),t.setSelectedShapes(r),t.deleteShapes(e)})}const QJ=50;function Fye(t,e,n={padding:QJ}){const r=rt.FromPoints(t.flatMap(c=>{if(!c)return[];const u=e.getShapeGeometry(c.id),d=e.getShapeLocalTransform(c);return(d==null?void 0:d.applyToPoints(u.vertices))??[]})),o=n.padding??QJ,i=r.w+2*o,s=r.h+2*o,a=o-r.minX,l=o-r.minY;return{w:i,h:s,dx:a,dy:l}}function zye(t,e,n={}){const r=t.getShape(e);if(!r)return;const o=t.getSortedChildIdsForParent(r.id),i=Tn(o.map(d=>t.getShape(d)));if(!i.length)return;const{w:s,h:a,dx:l,dy:c}=Fye(i,t,n);if(l===0&&c===0&&r.props.w===s&&r.props.h===a)return;const u=new $(l,c).rot(r.rotation);t.run(()=>{const d=o.map(f=>{const h=t.getShape(f);return{id:h.id,type:h.type,x:h.x+l,y:h.y+c}});d.push({id:r.id,type:r.type,x:r.x-u.x,y:r.y-u.y,props:{w:s,h:a}}),t.updateShapes(d)})}function Wo({children:t}){return w.jsx("span",{className:"tlui-button__label",children:t})}const Dd=v.memo(function({label:e,small:n,invertIcon:r,icon:o,color:i,className:s,...a}){const l=x4(),c=l.icons[o]??l.icons["question-mark-circle"],u=v.useRef(null);return v.useLayoutEffect(()=>{c||console.error(`Icon not found: ${o}. Add it to the assetUrls.icons object.`),u!=null&&u.current&&(u.current.style.webkitMask=`url(${c}) center 100% / 100% no-repeat`)},[u,c,o]),o==="none"?w.jsx("div",{className:he("tlui-icon tlui-icon__placeholder",{"tlui-icon__small":n},s)}):w.jsx("div",{...a,ref:u,"aria-label":e,role:"img",className:he("tlui-icon",{"tlui-icon__small":n},s),style:{color:i,mask:`url(${c}) center 100% / 100% no-repeat`,transform:r?"scale(-1, 1)":void 0}})});function Dn({icon:t,small:e,invertIcon:n}){return w.jsx(Dd,{"aria-hidden":"true",label:"",className:"tlui-button__icon",icon:t,small:e,invertIcon:n})}function U2({className:t,children:e}){return w.jsx("div",{className:he("tlui-dialog__header",t),children:e})}function W2({className:t,children:e,style:n}){return w.jsx(rot,{dir:"ltr",className:he("tlui-dialog__header__title",t),style:n,children:e})}function V2(){const t=Jt();return w.jsx("div",{className:"tlui-dialog__header__close",children:w.jsx(Qge,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:w.jsx(Hn,{type:"icon","aria-label":t("ui.close"),onTouchEnd:e=>e.target.click(),children:w.jsx(Dn,{small:!0,icon:"cross-2"})})})})}function Rx({className:t,children:e,style:n}){return w.jsx("div",{className:he("tlui-dialog__body",t),style:n,children:e})}function h6({className:t,children:e}){return w.jsx("div",{className:he("tlui-dialog__footer",t),children:e})}const qw=v.forwardRef(function({className:e,label:n,icon:r,iconLeft:o,iconLabel:i,autoSelect:s=!1,autoFocus:a=!1,defaultValue:l,placeholder:c,onComplete:u,onValueChange:d,onCancel:f,onFocus:h,onBlur:g,shouldManuallyMaintainScrollPositionWhenFocused:y=!1,children:m,value:S,"data-testid":x},C){const E=Gi(),P=v.useRef(null);v.useImperativeHandle(C,()=>P.current);const I=Jt(),T=v.useRef(l??""),M=v.useRef(l??""),R=v.useRef(!1),[A,j]=v.useState(!1),N=v.useCallback(B=>{j(!0);const W=B.currentTarget;M.current=W.value,E?E.timers.requestAnimationFrame(()=>{s&&W.select()}):SI.requestAnimationFrame("anon",()=>{s&&W.select()}),h==null||h()},[s,E,h]),k=v.useCallback(B=>{const W=B.currentTarget.value;M.current=W,d==null||d(W)},[d]),D=v.useCallback(B=>{switch(B.key){case"Enter":{if(R.current)return;B.currentTarget.blur(),Yr(B),u==null||u(B.currentTarget.value);break}case"Escape":{B.currentTarget.value=T.current,f==null||f(B.currentTarget.value),B.currentTarget.blur(),Yr(B);break}}},[u,f]),F=v.useCallback(B=>{j(!1);const W=B.currentTarget.value;g==null||g(W)},[g]),H=v.useCallback(()=>R.current=!0,[]),U=v.useCallback(()=>R.current=!1,[]);return v.useEffect(()=>{if(!vr.isIos)return;const B=window.visualViewport;if(A&&y&&B){const W=()=>{var K;(K=P.current)==null||K.scrollIntoView({block:"center"})};return B.addEventListener("resize",W),B.addEventListener("scroll",W),E?E.timers.requestAnimationFrame(()=>{var K;(K=P.current)==null||K.scrollIntoView({block:"center"})}):SI.requestAnimationFrame("anon",()=>{var K;(K=P.current)==null||K.scrollIntoView({block:"center"})}),()=>{B.removeEventListener("resize",W),B.removeEventListener("scroll",W)}}},[A,E,y]),w.jsxs("div",{draggable:!1,className:"tlui-input__wrapper",children:[m,n&&w.jsx("label",{children:I(n)}),o&&w.jsx(Dd,{label:i?I(i):"",icon:o,className:"tlui-icon-left",small:!0}),w.jsx("input",{ref:P,className:he("tlui-input",e),type:"text",defaultValue:l,onKeyDownCapture:D,onChange:k,onFocus:N,onBlur:F,onCompositionStart:H,onCompositionEnd:U,autoFocus:a,placeholder:c,value:S,"data-testid":x}),r&&w.jsx(Dd,{label:i?I(i):"",icon:r,small:!!n})]})});function ZJ(t){return Ja.isValid(t)?{isValid:!0,hasProtocol:!0}:Ja.isValid("https://"+t)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}const plt=Ii(function({onClose:e}){const r=Ee().getOnlySelectedShape();return r&&"url"in r.props&&typeof r.props.url=="string"?w.jsx(glt,{onClose:e,selectedShape:r}):null}),glt=Ii(function({onClose:e,selectedShape:n}){const r=Ee(),o=Jt(),i=v.useRef(null);v.useEffect(()=>{r.timers.requestAnimationFrame(()=>{var g;return(g=i.current)==null?void 0:g.focus()})},[r]);const s=v.useRef(n.props.url),[a,l]=v.useState(()=>{const g=ZJ(n.props.url),y=g.isValid===!0?g.hasProtocol?n.props.url:"https://"+n.props.url:"https://";return{actual:y,safe:y,valid:!0}}),c=v.useCallback(g=>{const y=g.replace(/https?:\/\/(https?:\/\/)/,(x,C)=>C),m=ZJ(y),S=m.isValid===!0?m.hasProtocol?y:"https://"+y:"https://";l({actual:y,safe:S,valid:m.isValid})},[]),u=v.useCallback(()=>{const g=r.getOnlySelectedShape();g&&(r.updateShapes([{id:g.id,type:g.type,props:{url:""}}]),e())},[r,e]),d=v.useCallback(()=>{const g=r.getOnlySelectedShape();g&&(g&&"url"in g.props&&g.props.url!==a.safe&&r.updateShapes([{id:g.id,type:g.type,props:{url:a.safe}}]),e())},[r,e,a]),f=v.useCallback(()=>{e()},[e]);if(!n)return e(),null;const h=s.current&&!a.valid;return w.jsxs(w.Fragment,{children:[w.jsxs(U2,{children:[w.jsx(W2,{children:o("edit-link-dialog.title")}),w.jsx(V2,{})]}),w.jsx(Rx,{children:w.jsxs("div",{className:"tlui-edit-link-dialog",children:[w.jsx(qw,{ref:i,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autoFocus:!0,autoSelect:!0,placeholder:"https://example.com",value:a.actual,onValueChange:c,onComplete:d,onCancel:f}),w.jsx("div",{children:a.valid?o("edit-link-dialog.detail"):o("edit-link-dialog.invalid-url")})]})}),w.jsxs(h6,{className:"tlui-dialog__footer__actions",children:[w.jsx(Hn,{type:"normal",onClick:f,onTouchEnd:f,children:w.jsx(Wo,{children:o("edit-link-dialog.cancel")})}),h?w.jsx(Hn,{type:"danger",onTouchEnd:u,onClick:u,children:w.jsx(Wo,{children:o("edit-link-dialog.clear")})}):w.jsx(Hn,{type:"primary",disabled:!a.valid,onTouchEnd:d,onClick:d,children:w.jsx(Wo,{children:o("edit-link-dialog.save")})})]})]})});var mlt={};const JJ=/(^\/[f|p|r|ro|s|v]\/[^/]+\/?$)/,p6=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","tldraw.com","localhost:3000"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,overridePermissions:{"allow-top-navigation":!0},toEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(JJ))return e.searchParams.append("embed","true"),t},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(JJ))return e.searchParams.delete("embed"),t}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,toEmbedUrl:t=>{if(t.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto|design)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!t.includes("figma.com/embed"))return`https://www.figma.com/embed?embed_host=share&url=${t}`},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/?$/)){const n=e.searchParams.get("url");if(n)return n}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,overridePermissions:{"allow-presentation":!0},toEmbedUrl:t=>{if(t.includes("/maps/embed?"))return t;if(t.includes("/maps/")){const e=t.match(/@(.*?),(.*?),(.*?)(z|m)/);let n;if(e){const[,r,o,i,s]=e,a=s==="z"?"roadmap":"satellite",l=a==="roadmap"?i:-Math.log2(parseInt(i)/14772321)/.8;n=`https://${new URL(t).host.replace("www.","")}/maps/embed/v1/view?key=${mlt.NEXT_PUBLIC_GC_API_KEY}&center=${r},${o}&zoom=${l}&maptype=${a}`}else n="";return n}},fromEmbedUrl:t=>{const e=yn(t);if(!e)return;if(e.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&e.searchParams.has("center")&&e.searchParams.get("zoom")){const r=e.searchParams.get("zoom")??"12",o=e.searchParams.get("maptype")??"roadmap",i=o==="roadmap"?r:14772321*Math.pow(2,parseInt(r)*-.8),[s,a]=e.searchParams.get("center").split(",");return`https://www.google.com/maps/@${s},${a},${i}${o==="roadmap"?"z":"m"}`}}},{type:"val_town",title:"Val Town",hostnames:["val.town"],minWidth:260,minHeight:100,width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=yn(t),n=e&&e.pathname.match(/\/v\/(.+)\/?/);if(n)return`https://www.val.town/embed/${n[1]}`},fromEmbedUrl:t=>{const e=yn(t),n=e&&e.pathname.match(/\/embed\/(.+)\/?/);if(n)return`https://www.val.town/v/${n[1]}`}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=yn(t),n=e&&e.pathname.match(/\/s\/([^/]+)\/?/);if(n)return`https://codesandbox.io/embed/${n[1]}`},fromEmbedUrl:t=>{const e=yn(t),n=e&&e.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return`https://codesandbox.io/s/${n[1]}`}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,toEmbedUrl:t=>{const e=/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/,n=t.match(e);if(n){const[r,o,i]=n;return`https://codepen.io/${o}/embed/${i}`}},fromEmbedUrl:t=>{const e=/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o,i]=n;return`https://codepen.io/${o}/pen/${i}`}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,toEmbedUrl:t=>{const e=/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/,n=t.match(e);if(n){const[r,o]=n;return`https://scratch.mit.edu/projects/embed/${o}`}},fromEmbedUrl:t=>{const e=/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/,n=t.match(e);if(n){const[r,o]=n;return`https://scratch.mit.edu/projects/${o}`}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,overridePermissions:{"allow-presentation":!0,"allow-popups-to-escape-sandbox":!0},isAspectRatioLocked:!0,toEmbedUrl:t=>{const e=yn(t);if(!e)return;const n=e.hostname.replace(/^www./,"");if(n==="youtu.be"){const r=e.pathname.split("/").filter(Boolean)[0],o=new URLSearchParams(e.search),i=o.get("t");i&&(o.set("start",i),o.delete("t"));const s=o.toString()?"?"+o.toString():"";return`https://www.youtube.com/embed/${r}${s}`}else if((n==="youtube.com"||n==="m.youtube.com")&&e.pathname.match(/^\/watch/)){const r=e.searchParams.get("v"),o=new URLSearchParams(e.search);o.delete("v");const i=o.get("t");i&&(o.set("start",i),o.delete("t"));const s=o.toString()?"?"+o.toString():"";return`https://www.youtube.com/embed/${r}${s}`}},fromEmbedUrl:t=>{const e=yn(t);if(!e)return;if(e.hostname.replace(/^www./,"")==="youtube.com"){const r=e.pathname.match(/^\/embed\/([^/]+)\/?/);if(r){const o=new URLSearchParams(e.search);o.set("v",(r==null?void 0:r[1])??"");const i=o.get("start");return i&&(o.set("t",i),o.delete("start")),`https://www.youtube.com/watch?${o.toString()}`}}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:t=>{const e=yn(t),n=e==null?void 0:e.searchParams.get("cid");if(e!=null&&e.pathname.match(/\/calendar\/u\/0/)&&n){e.pathname="/calendar/embed";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("src",n),e.href}},fromEmbedUrl:t=>{const e=yn(t),n=e==null?void 0:e.searchParams.get("src");if(e!=null&&e.pathname.match(/\/calendar\/embed/)&&n){e.pathname="/calendar/u/0";const r=Array.from(e.searchParams.keys());for(const o of r)e.searchParams.delete(o);return e.searchParams.set("cid",n),e.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,overridePermissions:{"allow-popups-to-escape-sandbox":!0},toEmbedUrl:t=>{const e=yn(t);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/pub\/?$/))){e.pathname=e.pathname.replace(/\/pub$/,"/embed");const n=Array.from(e.searchParams.keys());for(const r of n)e.searchParams.delete(r);return e.href}},fromEmbedUrl:t=>{const e=yn(t);if(e!=null&&e.pathname.match(/^\/presentation/)&&(e!=null&&e.pathname.match(/\/embed\/?$/))){e.pathname=e.pathname.replace(/\/embed$/,"/pub");const n=Array.from(e.searchParams.keys());for(const r of n)e.searchParams.delete(r);return e.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/))return t.split("/").pop()?t:void 0},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/\/([^/]+)\/([0-9a-f]+)$/))return t.split("/").pop()?t:void 0}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/))return`${t}?embed=true`},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/\/@([^/]+)\/([^/]+)/)&&e.searchParams.has("embed"))return e.searchParams.delete("embed"),e.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/map\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/map\//))return e.pathname=e.pathname.replace(/^\/embed/,""),e.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/(artist|album)\//))return e.origin+"/embed"+e.pathname},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/(artist|album)\//))return e.origin+e.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.hostname==="vimeo.com"&&e.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+e.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.hostname==="player.vimeo.com"){const n=e.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.hash.match(/#room=/))return t},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.hash.match(/#room=/))return t}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}/embed${e.pathname}?cell=*`;if(e&&e.pathname.match(/^\/d\/([^/]+)\/?$/)){const n=e.pathname.replace(/^\/d/,"");return`${e.origin}/embed${n}?cell=*`}},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","")}#cell-*`;if(e&&e.pathname.match(/^\/embed\/([^/]+)\/?$/))return`${e.origin}${e.pathname.replace("/embed","/d")}#cell-*`}},{type:"desmos",title:"Desmos",hostnames:["desmos.com"],width:700,height:450,doesResize:!0,toEmbedUrl:t=>{const e=yn(t);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search===""&&e.hash==="")return`${t}?embed`},fromEmbedUrl:t=>{const e=yn(t);if(e&&e.hostname==="www.desmos.com"&&e.pathname.match(/^\/calculator\/([^/]+)\/?$/)&&e.search==="?embed"&&e.hash==="")return t.replace("?embed","")}}],vlt={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},ylt=p6.map(t=>t.type);function blt(t){return ylt.includes(t)}function Slt(t){return"icon"in t}function Bye(){const t=Gi();if(t&&t.hasShapeUtil("embed"))return t.getShapeUtil("embed")}function g6(){const t=Bye();return e=>t?t.getEmbedDefinition(e):void 0}function xlt(){const t=Bye();return t?t.getEmbedDefinitions():[]}const Hye=Ii(function({onClose:e}){const n=Ee(),r=Jt(),o=x4(),[i,s]=v.useState(null),[a,l]=v.useState(""),[c,u]=v.useState(null),[d,f]=v.useState(!1),h=v.useRef(-1),g=xlt(),y=g6();return w.jsxs(w.Fragment,{children:[w.jsxs(U2,{children:[w.jsx(W2,{children:i?`${r("embed-dialog.title")}  ${i.title}`:r("embed-dialog.title")}),w.jsx(V2,{})]}),i?w.jsxs(w.Fragment,{children:[w.jsxs(Rx,{className:"tlui-embed-dialog__enter",children:[w.jsx(qw,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"https://example.com",autoFocus:!0,onValueChange:m=>{l(m);const S=y(m);u(S&&S.definition.type===i.type?S:null),f(!1),clearTimeout(h.current),h.current=n.timers.setTimeout(()=>f(!S),320)}}),a===""?w.jsxs("div",{className:"tlui-embed-dialog__instruction",children:[w.jsx("span",{children:r("embed-dialog.instruction")})," ",i.instructionLink&&w.jsxs(w.Fragment,{children:[w.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:i.instructionLink,className:"tlui-embed-dialog__instruction__link",children:"Learn more"}),"."]})]}):w.jsx("div",{className:"tlui-embed-dialog__warning",children:d?r("embed-dialog.invalid-url"):""})]}),w.jsxs(h6,{className:"tlui-dialog__footer__actions",children:[w.jsx(Hn,{type:"normal",onClick:()=>{s(null),u(null),l("")},children:w.jsx(Wo,{children:r("embed-dialog.back")})}),w.jsx("div",{className:"tlui-embed__spacer"}),w.jsx(Hn,{type:"normal",onClick:e,children:w.jsx(Wo,{children:r("embed-dialog.cancel")})}),w.jsx(Hn,{type:"primary",disabled:!c,onClick:()=>{c&&(n.putExternalContent({type:"embed",url:a,point:n.getViewportPageBounds().center,embed:c.definition}),e())},children:w.jsx(Wo,{children:r("embed-dialog.create")})})]})]}):w.jsx(w.Fragment,{children:w.jsx(Rx,{className:"tlui-embed-dialog__list",children:g.map(m=>{const S=blt(m.type)?o.embedIcons[m.type]:Slt(m)?m.icon:void 0;return w.jsxs(Hn,{type:"menu",onClick:()=>s(m),children:[w.jsx(Wo,{children:m.title}),S&&w.jsx("div",{className:"tlui-embed-dialog__item__image",style:{backgroundImage:`url(${S})`}})]},m.type)})})})]})});function q2(){const t=Gi();return(t==null?void 0:t.store.props.collaboration)!==void 0}function wlt(){const t=Gi();return Ie("sync status",()=>{var e;return(e=t==null?void 0:t.store.props.collaboration)!=null&&e.status?t.store.props.collaboration.status.get():null},[t])}async function Clt(t,e,n){const r=Tn(e.map(a=>{const l=t.getShape(a);if(!(!l||t.getShapeUtil(l.type).toSvg===void 0))return l}));if(r.length===0)return;if(r.length===1){const a=r[0];if(!a||t.isShapeOfType(a,"image"))return}const o=[];if(n!==void 0){const a=r.map(l=>({shape:l,bounds:t.getShapeMaskedPageBounds(l).clone().expandBy(n)}));for(let l=0;l<a.length;l++){const c=a[l];if(l===0){o[0]={shapes:[c.shape],bounds:c.bounds};continue}let u=!1;for(const d of o)if(d.bounds.includes(c.bounds)){d.shapes.push(c.shape),d.bounds.expand(c.bounds),u=!0;break}u||o.push({shapes:[c.shape],bounds:c.bounds})}}else{const a=rt.Common(r.map(l=>t.getShapeMaskedPageBounds(l)));o.push({shapes:r,bounds:a})}const i=t.options.flattenImageBoundsPadding;for(const a of o){n!==void 0&&a.bounds.expandBy(-n);const l=await t.getSvgString(a.shapes,{padding:i,background:!1});if(!(l!=null&&l.svg))continue;const c=await t.getAssetForExternalContent({type:"file",file:new File([l.svg],"asset.svg",{type:"image/svg+xml"})});c&&(a.asset=c)}const s=[];return Wa(()=>{for(const a of o){const{asset:l,bounds:c,shapes:u}=a;if(!l)continue;const d=t.findCommonAncestor(u)??t.getCurrentPageId();if(!d)continue;let f="a1";for(const S of u)if(S.parentId===d){S.index>f&&(f=S.index);break}let h,g,y;if(fa(d)){const S=t.getShape(d);if(!S)continue;const x=t.getPointInShapeSpace(S,{x:c.x,y:c.y});y=t.getShapePageTransform(d).rotation(),x.sub(new $(i,i).rot(-y)),h=x.x,g=x.y}else h=c.x-i,g=c.y-i,y=0;t.deleteShapes(u),t.createAssets([{...l,id:l.id}]);const m=Ar();t.createShape({id:m,type:"image",index:f,parentId:d,x:h,y:g,rotation:-y,props:{assetId:l.id,w:c.w+i*2,h:c.h+i*2}}),s.push(m)}}),s}const Fj=[0,389,436,476,580,640,840,1023];var Ro=(t=>(t[t.ZERO=0]="ZERO",t[t.MOBILE_XXS=1]="MOBILE_XXS",t[t.MOBILE_XS=2]="MOBILE_XS",t[t.MOBILE_SM=3]="MOBILE_SM",t[t.MOBILE=4]="MOBILE",t[t.TABLET_SM=5]="TABLET_SM",t[t.TABLET=6]="TABLET",t[t.DESKTOP=7]="DESKTOP",t))(Ro||{});const Uye=ce.createContext(null);function Elt({forceMobile:t=!1,children:e}){const n=Gi(),r=Ie("breakpoint",()=>{const{width:o}=(n==null?void 0:n.getViewportScreenBounds())??{width:window.innerWidth},i=t?Ro.MOBILE_SM:Fj.length-1;for(let s=0;s<i;s++)if(o>Fj[s]&&o<=Fj[s+1])return s;return i},[n]);return w.jsx(Uye.Provider,{value:r,children:e})}function _s(){const t=v.useContext(Uye);if(t===null)throw new Error("useBreakpoint must be used inside of the <BreakpointProvider /> component");return t}const u3=v.createContext(null);function Plt({context:t,children:e}){const n=v.useContext(u3),r=ci(),o=bw("dialogs",[]),i=v.useMemo(()=>({dialogs:o,addDialog(s){const a=s.id??br();return o.update(l=>[...l.filter(c=>c.id!==s.id),{...s,id:a}]),r("open-menu",{source:"dialog",id:a}),Ls.addOpenMenu(a,t),a},removeDialog(s){var l;const a=o.get().find(c=>c.id===s);return a&&((l=a.onClose)==null||l.call(a),r("close-menu",{source:"dialog",id:s}),Ls.deleteOpenMenu(s,t),o.update(c=>c.filter(u=>u!==a))),s},clearDialogs(){const s=o.get();s.length!==0&&(s.forEach(a=>{var l;(l=a.onClose)==null||l.call(a),r("close-menu",{source:"dialog",id:a.id}),Ls.deleteOpenMenu(a.id,t)}),o.set([]))}}),[r,o,t]);return n?w.jsx(w.Fragment,{children:e}):w.jsx(u3.Provider,{value:i,children:e})}function Kw(){const t=v.useContext(u3);if(!t)throw new Error("useDialogs must be used within a DialogsProvider");return t}const d3=v.createContext(null);function _lt({children:t}){const e=bw("toasts",[]),n=v.useContext(d3),r=v.useMemo(()=>({toasts:e,addToast(o){const i=o.id??br();return e.update(s=>[...s.filter(a=>a.id!==o.id),{...o,id:i}]),i},removeToast(o){return e.update(i=>i.filter(s=>s.id!==o)),o},clearToasts(){e.set([])}}),[e]);return n?w.jsx(w.Fragment,{children:t}):w.jsx(Vat,{children:w.jsx(d3.Provider,{value:r,children:t})})}function Ud(){const t=v.useContext(d3);if(!t)throw new Error("useToasts must be used within a ToastsProvider");return t}var zj={exports:{}},eee;function Ilt(){return eee||(eee=1,function(t){var e=function(){var n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function s(l,c){if(!i[l]){i[l]={};for(var u=0;u<l.length;u++)i[l][l.charAt(u)]=u}return i[l][c]}var a={compressToBase64:function(l){if(l==null)return"";var c=a._compress(l,6,function(u){return r.charAt(u)});switch(c.length%4){default:case 0:return c;case 1:return c+"===";case 2:return c+"==";case 3:return c+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:a._decompress(l.length,32,function(c){return s(r,l.charAt(c))})},compressToUTF16:function(l){return l==null?"":a._compress(l,15,function(c){return n(c+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:a._decompress(l.length,16384,function(c){return l.charCodeAt(c)-32})},compressToUint8Array:function(l){for(var c=a.compress(l),u=new Uint8Array(c.length*2),d=0,f=c.length;d<f;d++){var h=c.charCodeAt(d);u[d*2]=h>>>8,u[d*2+1]=h%256}return u},decompressFromUint8Array:function(l){if(l==null)return a.decompress(l);for(var c=new Array(l.length/2),u=0,d=c.length;u<d;u++)c[u]=l[u*2]*256+l[u*2+1];var f=[];return c.forEach(function(h){f.push(n(h))}),a.decompress(f.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":a._compress(l,6,function(c){return o.charAt(c)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),a._decompress(l.length,32,function(c){return s(o,l.charAt(c))}))},compress:function(l){return a._compress(l,16,function(c){return n(c)})},_compress:function(l,c,u){if(l==null)return"";var d,f,h={},g={},y="",m="",S="",x=2,C=3,E=2,P=[],I=0,T=0,M;for(M=0;M<l.length;M+=1)if(y=l.charAt(M),Object.prototype.hasOwnProperty.call(h,y)||(h[y]=C++,g[y]=!0),m=S+y,Object.prototype.hasOwnProperty.call(h,m))S=m;else{if(Object.prototype.hasOwnProperty.call(g,S)){if(S.charCodeAt(0)<256){for(d=0;d<E;d++)I=I<<1,T==c-1?(T=0,P.push(u(I)),I=0):T++;for(f=S.charCodeAt(0),d=0;d<8;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1}else{for(f=1,d=0;d<E;d++)I=I<<1|f,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=0;for(f=S.charCodeAt(0),d=0;d<16;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1}x--,x==0&&(x=Math.pow(2,E),E++),delete g[S]}else for(f=h[S],d=0;d<E;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1;x--,x==0&&(x=Math.pow(2,E),E++),h[m]=C++,S=String(y)}if(S!==""){if(Object.prototype.hasOwnProperty.call(g,S)){if(S.charCodeAt(0)<256){for(d=0;d<E;d++)I=I<<1,T==c-1?(T=0,P.push(u(I)),I=0):T++;for(f=S.charCodeAt(0),d=0;d<8;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1}else{for(f=1,d=0;d<E;d++)I=I<<1|f,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=0;for(f=S.charCodeAt(0),d=0;d<16;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1}x--,x==0&&(x=Math.pow(2,E),E++),delete g[S]}else for(f=h[S],d=0;d<E;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1;x--,x==0&&(x=Math.pow(2,E),E++)}for(f=2,d=0;d<E;d++)I=I<<1|f&1,T==c-1?(T=0,P.push(u(I)),I=0):T++,f=f>>1;for(;;)if(I=I<<1,T==c-1){P.push(u(I));break}else T++;return P.join("")},decompress:function(l){return l==null?"":l==""?null:a._decompress(l.length,32768,function(c){return l.charCodeAt(c)})},_decompress:function(l,c,u){var d=[],f=4,h=4,g=3,y="",m=[],S,x,C,E,P,I,T,M={val:u(0),position:c,index:1};for(S=0;S<3;S+=1)d[S]=S;for(C=0,P=Math.pow(2,2),I=1;I!=P;)E=M.val&M.position,M.position>>=1,M.position==0&&(M.position=c,M.val=u(M.index++)),C|=(E>0?1:0)*I,I<<=1;switch(C){case 0:for(C=0,P=Math.pow(2,8),I=1;I!=P;)E=M.val&M.position,M.position>>=1,M.position==0&&(M.position=c,M.val=u(M.index++)),C|=(E>0?1:0)*I,I<<=1;T=n(C);break;case 1:for(C=0,P=Math.pow(2,16),I=1;I!=P;)E=M.val&M.position,M.position>>=1,M.position==0&&(M.position=c,M.val=u(M.index++)),C|=(E>0?1:0)*I,I<<=1;T=n(C);break;case 2:return""}for(d[3]=T,x=T,m.push(T);;){if(M.index>l)return"";for(C=0,P=Math.pow(2,g),I=1;I!=P;)E=M.val&M.position,M.position>>=1,M.position==0&&(M.position=c,M.val=u(M.index++)),C|=(E>0?1:0)*I,I<<=1;switch(T=C){case 0:for(C=0,P=Math.pow(2,8),I=1;I!=P;)E=M.val&M.position,M.position>>=1,M.position==0&&(M.position=c,M.val=u(M.index++)),C|=(E>0?1:0)*I,I<<=1;d[h++]=n(C),T=h-1,f--;break;case 1:for(C=0,P=Math.pow(2,16),I=1;I!=P;)E=M.val&M.position,M.position>>=1,M.position==0&&(M.position=c,M.val=u(M.index++)),C|=(E>0?1:0)*I,I<<=1;d[h++]=n(C),T=h-1,f--;break;case 2:return m.join("")}if(f==0&&(f=Math.pow(2,g),g++),d[T])y=d[T];else if(T===h)y=x+x.charAt(0);else return null;m.push(y),d[h++]=x+y.charAt(0),f--,x=y,f==0&&(f=Math.pow(2,g),g++)}}};return a}();t!=null?t.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})}(zj)),zj.exports}var Tlt=Ilt();const Wye=jc(Tlt),m6="web image/vnd.tldraw+png",Mlt={png:m6},Olt={[m6]:"image/png"};function Rlt(t){return Uo(Mlt,t)??null}function klt(t){return Uo(Olt,t)??t}function Alt(t){return typeof ClipboardItem<"u"&&"supports"in ClipboardItem&&ClipboardItem.supports(t)}function $lt(t){const e=Object.entries(t);for(const[n,r]of e)r.catch(o=>console.error(o));return navigator.clipboard.write([new ClipboardItem(t)]).catch(n=>(console.error(n),Promise.all(e.map(async([r,o])=>[r,await o])).then(r=>{const o=jae(r);return navigator.clipboard.write([new ClipboardItem(o)])})))}async function Dlt(t,e,n,r){const o=e.map(i=>i instanceof File?i:new File([i],"tldrawFile",{type:i.type}));t.markHistoryStoppingPoint("paste"),await t.putExternalContent({type:"files",files:o,point:n,ignoreParent:!1,sources:r})}async function f3(t,e,n,r){return t.markHistoryStoppingPoint("paste"),await t.putExternalContent({type:"url",point:n,url:e,sources:r})}const jlt=[m6,"image/png","image/jpeg","image/webp","image/svg+xml"];function Bj(t){const e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t.trim(),e.body.textContent||e.body.innerText||""}const Llt=t=>{try{const e=new URL(t);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},Nlt=t=>{const e=t.split(/[\n\s]/);for(const n of e)try{const r=new URL(n);if(!(r.protocol==="http:"||r.protocol==="https:"))return}catch{return}return eue(e)},Flt=t=>/^<svg/.test(t),zlt=["input","select","textarea"];function Hj(t){const{activeElement:e}=document;return t.menus.hasAnyOpenMenus()||e&&(e.isContentEditable||zlt.indexOf(e.tagName.toLowerCase())>-1)}const EE=(t,e,n,r)=>{const o=Nlt(e);if(o)for(const i of o)f3(t,i,n);else Llt(e)?f3(t,e,n):Flt(e)?(t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"svg-text",text:e,point:n,sources:r})):(t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"text",text:e,point:n,sources:r}))},Blt=async(t,e,n)=>{if(t.getEditingShapeId()!==null)return;if(!e)throw Error("No clipboard data");const r=[];for(const o of Object.values(e.items))switch(o.kind){case"file":{r.push({type:"file",source:new Promise(i=>i(o.getAsFile()))});break}case"string":{o.type==="text/html"?r.push({type:"html",source:new Promise(i=>o.getAsString(i))}):o.type==="text/plain"?r.push({type:"text",source:new Promise(i=>o.getAsString(i))}):r.push({type:o.type,source:new Promise(i=>o.getAsString(i))});break}}qye(t,r,n)},Vye=async({editor:t,clipboardItems:e,point:n,fallbackFiles:r})=>{const o=[];for(const i of e){for(const s of jlt)if(i.types.includes(s)){const a=i.getType(s).then(l=>Fs.rewriteMimeType(l,klt(s)));o.push({type:"blob",source:a});break}i.types.includes("text/html")&&o.push({type:"html",source:(async()=>{const s=await i.getType("text/html");return await Fs.blobToText(s)})()}),i.types.includes("text/uri-list")&&o.push({type:"url",source:(async()=>{const s=await i.getType("text/uri-list");return await Fs.blobToText(s)})()}),i.types.includes("text/plain")&&o.push({type:"text",source:(async()=>{const s=await i.getType("text/plain");return await Fs.blobToText(s)})()})}return r!=null&&r.length&&o.length===1&&o[0].type==="text"?(o.pop(),o.push(...r.map(i=>({type:"file",source:Promise.resolve(i)})))):r!=null&&r.length&&o.length===0&&o.push(...r.map(i=>({type:"file",source:Promise.resolve(i)}))),await qye(t,o,n)};async function qye(t,e,n){const r=e.filter(i=>(i.type==="file"||i.type==="blob")&&i.source!==null);if(r.length){if(r.length>t.options.maxFilesAtOnce)throw Error("Too many files");const i=Tn(await Promise.all(r.map(s=>s.source)));return await Dlt(t,i,n)}const o=await Promise.all(e.filter(i=>i.type!=="file").map(i=>new Promise(s=>{const a=i;if(a.type==="file"){s({type:"error",data:null,reason:"unexpected file"});return}a.source.then(l=>{var u;const c=(u=l.match(/<div data-tldraw[^>]*>(.*)<\/div>/))==null?void 0:u[1];if(c)try{const d=Wye.decompressFromBase64(c);if(d===null){s({type:"error",data:d,reason:"found tldraw data comment but could not parse base64"});return}else{const f=JSON.parse(d);if(f.type!=="application/tldraw"&&s({type:"error",data:f,reason:`found tldraw data comment but JSON was of a different type: ${f.type}`}),typeof f.data=="string"){s({type:"error",data:f,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}s({type:"tldraw",data:f.data});return}}catch{s({type:"error",data:c,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"});return}else{if(a.type==="html"){s({type:"text",data:l,subtype:"html"});return}if(a.type==="url"){s({type:"text",data:l,subtype:"url"});return}try{const d=JSON.parse(l);if(d.type==="excalidraw/clipboard"){s({type:"excalidraw",data:d});return}else{s({type:"text",data:l,subtype:"json"});return}}catch{s({type:"text",data:l,subtype:"text"});return}}s({type:"error",data:l,reason:"unhandled case"})})})));for(const i of o)if(i.type==="tldraw"){t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"tldraw",content:i.data,point:n});return}for(const i of o)if(i.type==="excalidraw"){t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"excalidraw",content:i.data,point:n});return}for(const i of o){if(i.type==="text"&&i.subtype==="html"){const a=new DOMParser().parseFromString(i.data,"text/html").querySelector("body");if(a&&Array.from(a.children).filter(c=>c.nodeType===1).length===1&&a.firstElementChild&&a.firstElementChild.tagName==="A"&&a.firstElementChild.hasAttribute("href")&&a.firstElementChild.getAttribute("href")!==""){const c=a.firstElementChild.getAttribute("href");EE(t,c,n,o);return}if(!o.some(c=>c.type==="text"&&c.subtype!=="html")&&i.data.trim()&&(Bj(i.data)??"")){EE(t,Bj(i.data),n,o);return}if(o.some(c=>c.type==="text"&&c.subtype!=="html")){const c=Bj(i.data)??"";if(c){t.markHistoryStoppingPoint("paste"),t.putExternalContent({type:"text",text:c,html:i.data,point:n,sources:o});return}}}if(i.type==="text"&&i.subtype==="text"&&i.data.startsWith("<iframe ")){const a=new DOMParser().parseFromString(i.data,"text/html").querySelector("body");if(a&&Array.from(a.children).filter(c=>c.nodeType===1).length===1&&a.firstElementChild&&a.firstElementChild.tagName==="IFRAME"&&a.firstElementChild.hasAttribute("src")&&a.firstElementChild.getAttribute("src")!==""){const c=a.firstElementChild.getAttribute("src");EE(t,c,n,o);return}}}for(const i of o)if(i.type==="text"&&i.subtype==="url"){f3(t,i.data,n,o);return}for(const i of o)if(i.type==="text"&&i.subtype==="text"&&i.data.trim()){EE(t,i.data,n,o);return}}const VI=async t=>{var r;const e=await t.resolveAssetsInContent(t.getContentFromCurrentPage(t.getSelectedShapeIds()));if(!e){navigator&&navigator.clipboard&&navigator.clipboard.writeText("");return}const n=Wye.compressToBase64(JSON.stringify({type:"application/tldraw",kind:"content",data:e}));if(!(typeof navigator>"u")){const o=e.shapes.map(i=>t.getShapeUtil(i).getText(i)).filter(g9e);if((r=navigator.clipboard)!=null&&r.write){const i=new Blob([`<div data-tldraw>${n}</div>`],{type:"text/html"});let s=o.join(" ");s===""&&(s=" "),navigator.clipboard.write([new ClipboardItem({"text/html":i,"text/plain":new Blob([s],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText(`<div data-tldraw>${n}</div>`)}};function Hlt(){const t=Gi(),e=ci(),n=v.useCallback(async function(s){nn(t,"editor is required for copy"),t.getSelectedShapeIds().length!==0&&(await VI(t),e("copy",{source:s}))},[t,e]),r=v.useCallback(async function(s){t&&t.getSelectedShapeIds().length!==0&&(await VI(t),t.deleteShapes(t.getSelectedShapeIds()),e("cut",{source:s}))},[t,e]),o=v.useCallback(async function(s,a,l){t&&t.getEditingShapeId()===null&&(Array.isArray(s)&&s[0]instanceof ClipboardItem?(Vye({editor:t,clipboardItems:s,point:l}),e("paste",{source:"menu"})):navigator.clipboard.read().then(c=>{o(c,a,l)}))},[t,e]);return{copy:n,cut:r,paste:o}}function Ult(){const t=Ee(),e=ci(),n=Ie("editor.isFocused",()=>t.getInstanceState().isFocused,[t]);v.useEffect(()=>{if(!n)return;const r=async l=>{t.getSelectedShapeIds().length===0||t.getEditingShapeId()!==null||Hj(t)||(En(l),await VI(t),e("copy",{source:"kbd"}))};async function o(l){t.getSelectedShapeIds().length===0||t.getEditingShapeId()!==null||Hj(t)||(En(l),await VI(t),t.deleteShapes(t.getSelectedShapeIds()),e("cut",{source:"kbd"}))}let i=!1;const s=l=>{l.button===1&&(i=!0,t.timers.requestAnimationFrame(()=>{i=!1}))},a=l=>{var f,h;if(i){Yr(l);return}if(t.getEditingShapeId()!==null||Hj(t))return;let c,u=!1;t.inputs.shiftKey&&(u=!0),t.user.getIsPasteAtCursorMode()&&(u=!u),u&&(c=t.inputs.currentPagePoint);const d=()=>{l.clipboardData&&Blt(t,l.clipboardData,c)};if((f=navigator.clipboard)!=null&&f.read){const g=Array.from(((h=l.clipboardData)==null?void 0:h.files)||[]);navigator.clipboard.read().then(y=>{Array.isArray(y)&&y[0]instanceof ClipboardItem&&Vye({editor:t,clipboardItems:y,point:c,fallbackFiles:g})},()=>{d()})}else d();En(l),e("paste",{source:"kbd"})};return document.addEventListener("copy",r),document.addEventListener("cut",o),document.addEventListener("paste",a),document.addEventListener("pointerup",s),()=>{document.removeEventListener("copy",r),document.removeEventListener("cut",o),document.removeEventListener("paste",a),document.removeEventListener("pointerup",s)}},[t,e,n])}const tee={jpeg:"image/jpeg",png:"image/png",webp:"image/webp",svg:"text/plain"};function Wlt(t,e,n={}){const r=e!=null&&e.length?e:[...t.getCurrentPageShapeIds()],o=n.format??"png";return{blobPromise:t.toImage(r,n).then(i=>Fs.rewriteMimeType(i.blob,tee[o])),mimeType:tee[o]}}function Vlt(...t){const[e,n,r]=typeof t[2]=="string"?[t[0],t[1],{...t[3],format:t[2]}]:t;if(!navigator.clipboard)return Promise.reject(new Error("Copy not supported"));if(navigator.clipboard.write){const{blobPromise:o,mimeType:i}=Wlt(e,n,r),s={[i]:o},a=Rlt(r.format);return a&&Alt(a)&&(s[a]=o.then(l=>Fs.rewriteMimeType(l,a))),$lt(s)}switch(r.format){case"svg":return qlt(async()=>{const o=await e.getSvgString(n,r);if(!o)throw new Error("Failed to copy");return o.svg});case"png":throw new Error("Copy not supported");default:Jn(r.format)}}async function qlt(t){var e,n;await((n=(e=navigator.clipboard)==null?void 0:e.writeText)==null?void 0:n.call(e,await t()))}function Klt(){const t=Gi(),{addToast:e}=Ud(),n=Jt();return v.useCallback((r,o="svg")=>{nn(t,"useCopyAs: editor is required"),Vlt(t,r,{format:o}).catch(()=>{e({id:"copy-fail",severity:"warning",title:n("toast.error.copy-fail.title"),description:n("toast.error.copy-fail.desc")})})},[t,e,n])}async function Glt(...t){const[e,n,r]=typeof t[2]=="object"?t:[t[0],t[1],{...t[4],format:t[2]??"png",name:t[3]}];let o=r.name;if(!o&&(o=`shapes at ${nee()}`,n.length===1)){const a=e.getShape(n[0]);e.isShapeOfType(a,"frame")?o=a.props.name||"frame":o=`${WM(a.id)} at ${nee()}`}o+=`.${r.format}`;const{blob:i}=await e.toImage(n,r),s=new File([i],o,{type:i.type});Xlt(s)}function nee(){const t=new Date,e=String(t.getFullYear()).slice(2),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}-${n}-${r} ${o}.${i}.${s}`}function Xlt(t){const e=document.createElement("a"),n=URL.createObjectURL(t);e.href=n,e.download=t.name,e.click(),URL.revokeObjectURL(n)}function Ylt(){const t=Gi(),{addToast:e}=Ud(),n=Jt();return v.useCallback((r,o="png",i)=>{nn(t,"useExportAs: editor is required"),Glt(t,r,{format:o,name:i,scale:1}).catch(s=>{console.error(s.message),e({id:"export-fail",title:n("toast.error.export-fail.title"),description:n("toast.error.export-fail.desc"),severity:"error"})})},[t,e,n])}const Kye=ce.createContext([]);function Qlt(){const t=Gi(),e=v.useRef(),n=If(ce.useContext(Kye));return v.useEffect(()=>{const r=t;if(!r)return;const o=window.document.createElement("input");o.type="file",o.accept=(n==null?void 0:n.join(","))??VHe,o.multiple=!0,e.current=o;async function i(s){const a=s.target.files;!a||a.length===0||(r.markHistoryStoppingPoint("insert media"),await r.putExternalContent({type:"files",files:Array.from(a),point:r.getViewportPageBounds().center,ignoreParent:!1}),o.value="")}return o.addEventListener("change",i),()=>{e.current=void 0,o.removeEventListener("change",i)}},[t,n]),v.useCallback(()=>{var r;(r=e.current)==null||r.click()},[e])}function Zlt(){const t=Gi(),e=v.useRef(null),n=v.useRef(null);return v.useCallback(async function(){nn(t,"usePrint: editor is required");const o=document.createElement("div"),i=document.createElement("style"),s=(S,x)=>{S&&(S.innerHTML=""),x&&document.head.contains(x)&&document.head.removeChild(x),S&&document.body.contains(S)&&document.body.removeChild(S)};s(e.current,n.current),e.current=o,n.current=i;const a=`tl-print-surface-${br()}`;o.className=a,i.innerHTML=`
			.${a} {
				display: none;
			}

			.${a} svg {
				max-width: 100%;
				height: 100%;
				display: block;
			}

			@media print {				  
				html, body {
					min-height: 100%;
					height: 100%;
					margin: 0;
				}

				body {
					position: relative;
				}

				body > * {
					display: none;
				}

				.tldraw__editor {
					display: none;
				}

				.${a} {
					display: block !important;
					background: white;
					min-height: 100%;
					height: 100%;
					max-width: 100%;
				}

				.${a}__item {
					padding: 10mm;
					display: flex;
					min-height: 100%;
					flex-direction: column;
					page-break-after: always;
					position: relative;
					overflow: hidden;
					height: 100%;
				}

				.${a}__item__main {
					flex: 1;
					display: flex;
					align-items: center;
					justify-content: center;
					max-height: 100%;
				}

				.${a}__item__header {
					display: none;
				}

				.${a}__item__footer {
					display: none;
					text-align: right;
				}

				.${a}__item__footer__hide {
					display: none;
				}

				
			}

		`;const l=()=>{document.head.appendChild(i),document.body.appendChild(o)},c=()=>{t.once("tick",()=>{s(o,i)})};window.addEventListener("beforeprint",l),window.addEventListener("afterprint",c);function u(S,x,C){try{o.innerHTML+=`<div class="${a}__item">
        <div class="${a}__item__header">
          ${S.replace(/</g,"&lt;").replace(/>/g,"&gt;")}
        </div>
        <div class="${a}__item__main">
          ${C}
        </div>
        <div class="${a}__item__footer ${a}__item__footer__${x?"":"hide"}">
          ${x??""}
        </div>
      </div>`}catch(E){console.error(E)}}function d(){vr.isChromeForIos?(l(),window.print()):vr.isSafari?(l(),document.execCommand("print",!1)):window.print()}const f=t.getSelectedShapeIds(),h=t.getCurrentPageId(),g=t.getPages(),m={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"};if(t.getSelectedShapeIds().length>0){const S=await t.getSvgString(f,m);if(S){const x=g.find(C=>C.id===h);u(`tldraw  ${x==null?void 0:x.name}`,null,S.svg),d()}}else{const S=t.getCurrentPage(),x=await t.getSvgString(t.getSortedChildIdsForParent(S.id),m);x&&(u(`tldraw  ${S.name}`,null,x.svg),d())}window.removeEventListener("beforeprint",l),window.removeEventListener("afterprint",c)},[t])}function v6(){const{addToast:t,removeToast:e,clearToasts:n}=Ud(),{addDialog:r,clearDialogs:o,removeDialog:i}=Kw(),s=Jt(),a=Qlt(),l=Zlt(),{cut:c,copy:u,paste:d}=Hlt(),f=Klt(),h=Ylt(),g=g6(),m=_s()<Ro.TABLET_SM;return v.useMemo(()=>({addToast:t,removeToast:e,clearToasts:n,addDialog:r,removeDialog:i,clearDialogs:o,msg:s,isMobile:m,insertMedia:a,printSelectionOrPages:l,cut:c,copy:u,paste:d,copyAs:f,exportAs:h,getEmbedDefinition:g}),[t,e,n,r,i,o,s,m,a,l,c,u,d,f,h,g])}function Jlt(t,e){const n={};for(const r of t)if(r.translations)for(const[o,i]of zs(r.translations)){let s=n[o];s||(s=n[o]={}),Object.assign(s,i)}return{actions:(r,o,i)=>{for(const s of t)s.actions&&(o=s.actions(r,o,i));return o},tools:(r,o,i)=>{for(const s of t)s.tools&&(o=s.tools(r,o,{...e,...i}));return o},translations:n}}function Gye(t){return v.useMemo(()=>t,t)}function ect(t){const e=Gye(t==null?[]:Array.isArray(t)?t:[t]);return v.useMemo(()=>{const n={};for(const r of e)if(r.translations)for(const[o,i]of zs(r.translations)){let s=n[o];s||(s=n[o]={}),Object.assign(s,i)}return n},[e])}function tct(t){const e=v6(),n=Gye(t==null?[]:Array.isArray(t)?t:[t]);return v.useMemo(()=>Jlt(n,e),[n,e])}const Xye=v.createContext(null);function nct(t){return Object.fromEntries(t.map(e=>[e.id,e]))}function PE(t,e){if(t.getSelectedShapes().length===0)return t.getDocumentSettings().name||e}function rct({overrides:t,children:e}){const n=Gi(),r=q2(),o=v6(),i=ci(),s=E2(),a=Jt(),l=o.msg("document.default-name"),c=v.useMemo(()=>{const u=n;if(!u)return{};function d(){return u.isIn("select")||(u.complete(),u.setCurrentTool("select")),!1}function f(){return u.isIn("select")&&u.getSelectedShapeIds().length>0}function h(m){if(!f()||d())return;u.markHistoryStoppingPoint("resize shapes");const S=u.getSelectedShapeIds();S.length!==0&&u.run(()=>{S.map(C=>u.getShape(C)).filter(Boolean).forEach(C=>{var E;u.resizeShape(C.id,new $(m,m),{scaleOrigin:(E=u.getSelectionPageBounds())==null?void 0:E.center})})})}const g=[{id:"edit-link",label:"action.edit-link",icon:"link",onSelect(m){f()&&(d()||(i("edit-link",{source:m}),u.markHistoryStoppingPoint("edit-link"),o.addDialog({component:plt})))}},{id:"insert-embed",label:"action.insert-embed",kbd:"cmd+i,ctrl+i",onSelect(m){i("insert-embed",{source:m}),o.addDialog({component:Hye})}},{id:"insert-media",label:"action.insert-media",kbd:"cmd+u,ctrl+u",onSelect(m){i("insert-media",{source:m}),o.insertMedia()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"cmd+z,ctrl+z",onSelect(m){i("undo",{source:m}),u.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"cmd+shift+z,ctrl+shift+z",onSelect(m){i("redo",{source:m}),u.redo()}},{id:"export-as-svg",label:{default:"action.export-as-svg",menu:"action.export-as-svg.short","context-menu":"action.export-as-svg.short"},readonlyOk:!0,onSelect(m){let S=u.getSelectedShapeIds();S.length===0&&(S=Array.from(u.getCurrentPageShapeIds().values())),S.length!==0&&(i("export-as",{format:"svg",source:m}),o.exportAs(S,"svg",PE(u,l)))}},{id:"export-as-png",label:{default:"action.export-as-png",menu:"action.export-as-png.short","context-menu":"action.export-as-png.short"},readonlyOk:!0,onSelect(m){let S=u.getSelectedShapeIds();S.length===0&&(S=Array.from(u.getCurrentPageShapeIds().values())),S.length!==0&&(i("export-as",{format:"png",source:m}),o.exportAs(S,"png",PE(u,l)))}},{id:"export-all-as-svg",label:{default:"action.export-all-as-svg",menu:"action.export-all-as-svg.short","context-menu":"action.export-all-as-svg.short"},readonlyOk:!0,onSelect(m){let S=u.getSelectedShapeIds();S.length===0&&(S=Array.from(u.getCurrentPageShapeIds().values())),S.length!==0&&(i("export-all-as",{format:"svg",source:m}),o.exportAs(Array.from(u.getCurrentPageShapeIds()),"svg",PE(u,l)))}},{id:"export-all-as-png",label:{default:"action.export-all-as-png",menu:"action.export-all-as-png.short","context-menu":"action.export-all-as-png.short"},readonlyOk:!0,onSelect(m){const S=Array.from(u.getCurrentPageShapeIds().values());S.length!==0&&(i("export-all-as",{format:"png",source:m}),o.exportAs(S,"png",PE(u,l)))}},{id:"copy-as-svg",label:{default:"action.copy-as-svg",menu:"action.copy-as-svg.short","context-menu":"action.copy-as-svg.short"},kbd:"cmd+shift+c,ctrl+shift+c",readonlyOk:!0,onSelect(m){let S=u.getSelectedShapeIds();S.length===0&&(S=Array.from(u.getCurrentPageShapeIds().values())),S.length!==0&&(i("copy-as",{format:"svg",source:m}),o.copyAs(S,"svg"))}},{id:"copy-as-png",label:{default:"action.copy-as-png",menu:"action.copy-as-png.short","context-menu":"action.copy-as-png.short"},readonlyOk:!0,onSelect(m){let S=u.getSelectedShapeIds();S.length===0&&(S=Array.from(u.getCurrentPageShapeIds().values())),S.length!==0&&(i("copy-as",{format:"png",source:m}),o.copyAs(S,"png"))}},{id:"toggle-auto-size",label:"action.toggle-auto-size",onSelect(m){f()&&(d()||(i("toggle-auto-size",{source:m}),u.markHistoryStoppingPoint("toggling auto size"),u.run(()=>{const S=u.getSelectedShapes().filter(x=>u.isShapeOfType(x,"text")&&x.props.autoSize===!1);u.updateShapes(S.map(x=>({id:x.id,type:x.type,props:{...x.props,w:8,autoSize:!0}}))),Fr(u,S.map(x=>x.id))})))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect(m){i("open-embed-link",{source:m});const S=u.getSelectedShapeIds(),x="No embed shapes selected";if(S.length!==1){console.error(x);return}const C=u.getShape(S[0]);if(!C||!u.isShapeOfType(C,"embed")){console.error(x);return}unt(C.props.url,"_blank")}},{id:"select-zoom-tool",readonlyOk:!0,kbd:"z",onSelect(m){var S,x;if(((S=u.root.getCurrent())==null?void 0:S.id)!=="zoom"&&(i("zoom-tool",{source:m}),!(u.inputs.shiftKey||u.inputs.ctrlKey))){const C=u.root.getCurrent();C&&((x=C.getCurrent())==null?void 0:x.id)==="idle"&&u.setCurrentTool("zoom",{onInteractionEnd:C.id,maskAs:"zoom"})}}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",onSelect(m){f()&&(d()||u.run(()=>{i("convert-to-bookmark",{source:m});const S=u.getSelectedShapes(),x=[],C=[];for(const E of S){if(!E||!u.isShapeOfType(E,"embed")||!E.props.url)continue;const P=new $(E.x,E.y);P.rot(-E.rotation),P.add(new $(E.props.w/2-300/2,E.props.h/2-320/2)),P.rot(E.rotation);const I={id:Ar(),type:"bookmark",rotation:E.rotation,x:P.x,y:P.y,opacity:1,props:{url:E.props.url}};x.push(I),C.push(E.id)}u.markHistoryStoppingPoint("convert shapes to bookmark"),u.deleteShapes(C),u.createShapes(x)}))}},{id:"convert-to-embed",label:"action.convert-to-embed",onSelect(m){f()&&(d()||(i("convert-to-embed",{source:m}),u.run(()=>{const S=u.getSelectedShapeIds(),x=Tn(S.map(P=>u.getShape(P))),C=[],E=[];for(const P of x){if(!u.isShapeOfType(P,"bookmark"))continue;const{url:I}=P.props,T=o.getEmbedDefinition(I);if(!T||!T.definition)continue;const{width:M,height:R}=T.definition,A=new $(P.x,P.y);A.rot(-P.rotation),A.add(new $(P.props.w/2-M/2,P.props.h/2-R/2)),A.rot(P.rotation);const j={id:Ar(),type:"embed",x:A.x,y:A.y,rotation:P.rotation,props:{url:I,w:M,h:R}};C.push(j),E.push(P.id)}u.markHistoryStoppingPoint("convert shapes to embed"),u.deleteShapes(E),u.createShapes(C)})))}},{id:"duplicate",kbd:"cmd+d,ctrl+d",label:"action.duplicate",icon:"duplicate",onSelect(m){if(!f()||d())return;i("duplicate-shapes",{source:m});const S=u.getInstanceState();let x,C;if(S.duplicateProps)x=S.duplicateProps.shapeIds,C=S.duplicateProps.offset;else{x=u.getSelectedShapeIds();const E=rt.Common(Tn(x.map(P=>u.getShapePageBounds(P))));C=u.getCameraOptions().isLocked?{x:u.options.adjacentShapeMargin,y:u.options.adjacentShapeMargin}:{x:E.width+u.options.adjacentShapeMargin,y:0}}u.markHistoryStoppingPoint("duplicate shapes"),u.duplicateShapes(x,C),S.duplicateProps&&u.updateInstanceState({duplicateProps:{...S.duplicateProps,shapeIds:u.getSelectedShapeIds()}})}},{id:"ungroup",label:"action.ungroup",kbd:"cmd+shift+g,ctrl+shift+g",icon:"ungroup",onSelect(m){f()&&(d()||(i("ungroup-shapes",{source:m}),u.markHistoryStoppingPoint("ungroup"),u.ungroupShapes(u.getSelectedShapeIds())))}},{id:"group",label:"action.group",kbd:"cmd+g,ctrl+g",icon:"group",onSelect(m){if(!f()||d())return;i("group-shapes",{source:m});const S=u.getOnlySelectedShape();S&&u.isShapeOfType(S,"group")?(u.markHistoryStoppingPoint("ungroup"),u.ungroupShapes(u.getSelectedShapeIds())):(u.markHistoryStoppingPoint("group"),u.groupShapes(u.getSelectedShapeIds()))}},{id:"remove-frame",label:"action.remove-frame",kbd:"cmd+shift+f,ctrl+shift+f",onSelect(m){if(!f())return;i("remove-frame",{source:m});const S=u.getSelectedShapes();S.length>0&&S.every(x=>u.isShapeOfType(x,"frame"))&&(u.markHistoryStoppingPoint("remove-frame"),hlt(u,S.map(x=>x.id)))}},{id:"fit-frame-to-content",label:"action.fit-frame-to-content",onSelect(m){if(!f())return;i("fit-frame-to-content",{source:m});const S=u.getOnlySelectedShape();S&&u.isShapeOfType(S,"frame")&&(u.markHistoryStoppingPoint("fit-frame-to-content"),zye(u,S.id))}},{id:"align-left",label:"action.align-left",kbd:"alt+A",icon:"align-left",onSelect(m){f()&&(d()||(i("align-shapes",{operation:"left",source:m}),u.markHistoryStoppingPoint("align left"),u.run(()=>{const S=u.getSelectedShapeIds();u.alignShapes(S,"left"),Fr(u,S)})))}},{id:"align-center-horizontal",label:{default:"action.align-center-horizontal","context-menu":"action.align-center-horizontal.short"},kbd:"alt+H",icon:"align-center-horizontal",onSelect(m){f()&&(d()||(i("align-shapes",{operation:"center-horizontal",source:m}),u.markHistoryStoppingPoint("align center horizontal"),u.run(()=>{const S=u.getSelectedShapeIds();u.alignShapes(S,"center-horizontal"),Fr(u,S)})))}},{id:"align-right",label:"action.align-right",kbd:"alt+D",icon:"align-right",onSelect(m){f()&&(d()||(i("align-shapes",{operation:"right",source:m}),u.markHistoryStoppingPoint("align right"),u.run(()=>{const S=u.getSelectedShapeIds();u.alignShapes(S,"right"),Fr(u,S)})))}},{id:"align-center-vertical",label:{default:"action.align-center-vertical","context-menu":"action.align-center-vertical.short"},kbd:"alt+V",icon:"align-center-vertical",onSelect(m){f()&&(d()||(i("align-shapes",{operation:"center-vertical",source:m}),u.markHistoryStoppingPoint("align center vertical"),u.run(()=>{const S=u.getSelectedShapeIds();u.alignShapes(S,"center-vertical"),Fr(u,S)})))}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"alt+W",onSelect(m){f()&&(d()||(i("align-shapes",{operation:"top",source:m}),u.markHistoryStoppingPoint("align top"),u.run(()=>{const S=u.getSelectedShapeIds();u.alignShapes(S,"top"),Fr(u,S)})))}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"alt+S",onSelect(m){f()&&(d()||(i("align-shapes",{operation:"bottom",source:m}),u.markHistoryStoppingPoint("align bottom"),u.run(()=>{const S=u.getSelectedShapeIds();u.alignShapes(S,"bottom"),Fr(u,S)})))}},{id:"distribute-horizontal",label:{default:"action.distribute-horizontal","context-menu":"action.distribute-horizontal.short"},icon:"distribute-horizontal",kbd:"alt+shift+h",onSelect(m){f()&&(d()||(i("distribute-shapes",{operation:"horizontal",source:m}),u.markHistoryStoppingPoint("distribute horizontal"),u.run(()=>{const S=u.getSelectedShapeIds();u.distributeShapes(S,"horizontal"),Fr(u,S)})))}},{id:"distribute-vertical",label:{default:"action.distribute-vertical","context-menu":"action.distribute-vertical.short"},icon:"distribute-vertical",kbd:"alt+shift+V",onSelect(m){f()&&(d()||(i("distribute-shapes",{operation:"vertical",source:m}),u.markHistoryStoppingPoint("distribute vertical"),u.run(()=>{const S=u.getSelectedShapeIds();u.distributeShapes(S,"vertical"),Fr(u,S)})))}},{id:"stretch-horizontal",label:{default:"action.stretch-horizontal","context-menu":"action.stretch-horizontal.short"},icon:"stretch-horizontal",onSelect(m){f()&&(d()||(i("stretch-shapes",{operation:"horizontal",source:m}),u.markHistoryStoppingPoint("stretch horizontal"),u.run(()=>{const S=u.getSelectedShapeIds();u.stretchShapes(S,"horizontal"),Fr(u,S)})))}},{id:"stretch-vertical",label:{default:"action.stretch-vertical","context-menu":"action.stretch-vertical.short"},icon:"stretch-vertical",onSelect(m){f()&&(d()||(i("stretch-shapes",{operation:"vertical",source:m}),u.markHistoryStoppingPoint("stretch vertical"),u.run(()=>{const S=u.getSelectedShapeIds();u.stretchShapes(S,"vertical"),Fr(u,S)})))}},{id:"flip-horizontal",label:{default:"action.flip-horizontal","context-menu":"action.flip-horizontal.short"},kbd:"shift+h",onSelect(m){f()&&(d()||(i("flip-shapes",{operation:"horizontal",source:m}),u.markHistoryStoppingPoint("flip horizontal"),u.run(()=>{const S=u.getSelectedShapeIds();u.flipShapes(S,"horizontal"),Fr(u,S)})))}},{id:"flip-vertical",label:{default:"action.flip-vertical","context-menu":"action.flip-vertical.short"},kbd:"shift+v",onSelect(m){f()&&(d()||(i("flip-shapes",{operation:"vertical",source:m}),u.markHistoryStoppingPoint("flip vertical"),u.run(()=>{const S=u.getSelectedShapeIds();u.flipShapes(S,"vertical"),Fr(u,S)})))}},{id:"pack",label:"action.pack",icon:"pack",onSelect(m){f()&&(d()||(i("pack-shapes",{source:m}),u.markHistoryStoppingPoint("pack"),u.run(()=>{const S=u.getSelectedShapeIds();u.packShapes(S,u.options.adjacentShapeMargin),Fr(u,S)})))}},{id:"stack-vertical",label:{default:"action.stack-vertical","context-menu":"action.stack-vertical.short"},icon:"stack-vertical",onSelect(m){f()&&(d()||(i("stack-shapes",{operation:"vertical",source:m}),u.markHistoryStoppingPoint("stack-vertical"),u.run(()=>{const S=u.getSelectedShapeIds();u.stackShapes(S,"vertical",u.options.adjacentShapeMargin),Fr(u,S)})))}},{id:"stack-horizontal",label:{default:"action.stack-horizontal","context-menu":"action.stack-horizontal.short"},icon:"stack-horizontal",onSelect(m){f()&&(d()||(i("stack-shapes",{operation:"horizontal",source:m}),u.markHistoryStoppingPoint("stack-horizontal"),u.run(()=>{const S=u.getSelectedShapeIds();u.stackShapes(S,"horizontal",u.options.adjacentShapeMargin),Fr(u,S)})))}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",onSelect(m){f()&&(d()||(i("reorder-shapes",{operation:"toFront",source:m}),u.markHistoryStoppingPoint("bring to front"),u.bringToFront(u.getSelectedShapeIds())))}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"alt+]",onSelect(m){f()&&(d()||(i("reorder-shapes",{operation:"forward",source:m}),u.markHistoryStoppingPoint("bring forward"),u.bringForward(u.getSelectedShapeIds())))}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"alt+[",onSelect(m){f()&&(d()||(i("reorder-shapes",{operation:"backward",source:m}),u.markHistoryStoppingPoint("send backward"),u.sendBackward(u.getSelectedShapeIds())))}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",onSelect(m){f()&&(d()||(i("reorder-shapes",{operation:"toBack",source:m}),u.markHistoryStoppingPoint("send to back"),u.sendToBack(u.getSelectedShapeIds())))}},{id:"cut",label:"action.cut",kbd:"cmd+x,ctrl+x",onSelect(m){f()&&(d()||(u.markHistoryStoppingPoint("cut"),o.cut(m)))}},{id:"copy",label:"action.copy",kbd:"cmd+c,ctrl+c",readonlyOk:!0,onSelect(m){f()&&(d()||o.copy(m))}},{id:"paste",label:"action.paste",kbd:"cmd+v,ctrl+v",onSelect(m){var S;(S=navigator.clipboard)==null||S.read().then(x=>{o.paste(x,m,m==="context-menu"?u.inputs.currentPagePoint:void 0)}).catch(()=>{o.addToast({title:o.msg("action.paste-error-title"),description:o.msg("action.paste-error-description"),severity:"error"})})}},{id:"select-all",label:"action.select-all",kbd:"cmd+a,ctrl+a",readonlyOk:!0,onSelect(m){u.run(()=>{d()||(i("select-all-shapes",{source:m}),u.markHistoryStoppingPoint("select all kbd"),u.selectAll())})}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect(m){f()&&(d()||(i("select-none-shapes",{source:m}),u.markHistoryStoppingPoint("select none"),u.selectNone()))}},{id:"delete",label:"action.delete",kbd:",del",icon:"trash",onSelect(m){f()&&(d()||(i("delete-shapes",{source:m}),u.markHistoryStoppingPoint("delete"),u.deleteShapes(u.getSelectedShapeIds())))}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",onSelect(m){f()&&(d()||(i("rotate-cw",{source:m}),u.markHistoryStoppingPoint("rotate-cw"),u.run(()=>{const S=u.getSelectionRotation()%(Gr/2),x=qa(S,0)||qa(S,Gr/2),C=u.getSelectedShapeIds();u.rotateShapesBy(C,Gr/2-(x?0:S)),Fr(u,C)})))}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",onSelect(m){f()&&(d()||(i("rotate-ccw",{source:m}),u.markHistoryStoppingPoint("rotate-ccw"),u.run(()=>{const S=u.getSelectionRotation()%(Gr/2),x=qa(S,0),C=u.getSelectedShapeIds();u.rotateShapesBy(C,x?-(Gr/2):-S),Fr(u,C)})))}},{id:"zoom-in",label:"action.zoom-in",kbd:"cmd+=,ctrl+=,=",readonlyOk:!0,onSelect(m){i("zoom-in",{source:m,towardsCursor:!1}),u.zoomIn(void 0,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-in-on-cursor",label:"action.zoom-in",kbd:"shift+cmd+=,shift+ctrl+=,shift+=",readonlyOk:!0,onSelect(m){i("zoom-in",{source:m,towardsCursor:!0}),u.zoomIn(u.inputs.currentScreenPoint,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-out",label:"action.zoom-out",kbd:"cmd+-,ctrl+-,-",readonlyOk:!0,onSelect(m){i("zoom-out",{source:m,towardsCursor:!1}),u.zoomOut(void 0,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-out-on-cursor",label:"action.zoom-out",kbd:"shift+cmd+-,shift+ctrl+-,shift+-",readonlyOk:!0,onSelect(m){i("zoom-out",{source:m,towardsCursor:!0}),u.zoomOut(u.inputs.currentScreenPoint,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"shift+0",readonlyOk:!0,onSelect(m){i("reset-zoom",{source:m}),u.resetZoom(void 0,{animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"shift+1",readonlyOk:!0,onSelect(m){i("zoom-to-fit",{source:m}),u.zoomToFit({animation:{duration:u.options.animationMediumMs}})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"shift+2",readonlyOk:!0,onSelect(m){f()&&(d()||(i("zoom-to-selection",{source:m}),u.zoomToSelection({animation:{duration:u.options.animationMediumMs}})))}},{id:"toggle-snap-mode",label:{default:"action.toggle-snap-mode",menu:"action.toggle-snap-mode.menu"},onSelect(m){i("toggle-snap-mode",{source:m}),u.user.updateUserPreferences({isSnapMode:!u.user.getIsSnapMode()})},checkbox:!0},{id:"toggle-dark-mode",label:{default:"action.toggle-dark-mode",menu:"action.toggle-dark-mode.menu"},kbd:"cmd+/,ctrl+/",readonlyOk:!0,onSelect(m){const S=u.user.getIsDarkMode()?"light":"dark";i("color-scheme",{source:m,value:S}),u.user.updateUserPreferences({colorScheme:S})},checkbox:!0},{id:"toggle-wrap-mode",label:{default:"action.toggle-wrap-mode",menu:"action.toggle-wrap-mode.menu"},readonlyOk:!0,onSelect(m){i("toggle-wrap-mode",{source:m}),u.user.updateUserPreferences({isWrapMode:!u.user.getIsWrapMode()})},checkbox:!0},{id:"toggle-dynamic-size-mode",label:{default:"action.toggle-dynamic-size-mode",menu:"action.toggle-dynamic-size-mode.menu"},readonlyOk:!1,onSelect(m){i("toggle-dynamic-size-mode",{source:m}),u.user.updateUserPreferences({isDynamicSizeMode:!u.user.getIsDynamicResizeMode()})},checkbox:!0},{id:"toggle-paste-at-cursor",label:{default:"action.toggle-paste-at-cursor",menu:"action.toggle-paste-at-cursor.menu"},readonlyOk:!1,onSelect(m){i("toggle-paste-at-cursor",{source:m}),u.user.updateUserPreferences({isPasteAtCursorMode:!u.user.getIsPasteAtCursorMode()})},checkbox:!0},{id:"toggle-reduce-motion",label:{default:"action.toggle-reduce-motion",menu:"action.toggle-reduce-motion.menu"},readonlyOk:!0,onSelect(m){i("toggle-reduce-motion",{source:m}),u.user.updateUserPreferences({animationSpeed:u.user.getAnimationSpeed()===0?1:0})},checkbox:!0},{id:"toggle-edge-scrolling",label:{default:"action.toggle-edge-scrolling",menu:"action.toggle-edge-scrolling.menu"},readonlyOk:!0,onSelect(m){i("toggle-edge-scrolling",{source:m}),u.user.updateUserPreferences({edgeScrollSpeed:u.user.getEdgeScrollSpeed()===0?1:0})},checkbox:!0},{id:"toggle-transparent",label:{default:"action.toggle-transparent",menu:"action.toggle-transparent.menu","context-menu":"action.toggle-transparent.context-menu"},readonlyOk:!0,onSelect(m){i("toggle-transparent",{source:m}),u.updateInstanceState({exportBackground:!u.getInstanceState().exportBackground})},checkbox:!0},{id:"toggle-tool-lock",label:{default:"action.toggle-tool-lock",menu:"action.toggle-tool-lock.menu"},kbd:"q",onSelect(m){i("toggle-tool-lock",{source:m}),u.updateInstanceState({isToolLocked:!u.getInstanceState().isToolLocked})},checkbox:!0},{id:"unlock-all",label:"action.unlock-all",onSelect(m){i("unlock-all",{source:m});const S=[];for(const x of u.getCurrentPageShapes())x.isLocked&&S.push({id:x.id,type:x.type,isLocked:!1});S.length>0&&u.updateShapes(S)}},{id:"toggle-focus-mode",label:{default:"action.toggle-focus-mode",menu:"action.toggle-focus-mode.menu"},readonlyOk:!0,kbd:"cmd+.,ctrl+.",checkbox:!0,onSelect(m){u.timers.requestAnimationFrame(()=>{u.run(()=>{i("toggle-focus-mode",{source:m}),o.clearDialogs(),o.clearToasts(),u.updateInstanceState({isFocusMode:!u.getInstanceState().isFocusMode})})})}},{id:"toggle-grid",label:{default:"action.toggle-grid",menu:"action.toggle-grid.menu"},readonlyOk:!0,kbd:"cmd+',ctrl+'",onSelect(m){i("toggle-grid-mode",{source:m}),u.updateInstanceState({isGridMode:!u.getInstanceState().isGridMode})},checkbox:!0},{id:"toggle-debug-mode",label:{default:"action.toggle-debug-mode",menu:"action.toggle-debug-mode.menu"},readonlyOk:!0,onSelect(m){i("toggle-debug-mode",{source:m}),u.updateInstanceState({isDebugMode:!u.getInstanceState().isDebugMode})},checkbox:!0},{id:"print",label:"action.print",kbd:"cmd+p,ctrl+p",readonlyOk:!0,onSelect(m){i("print",{source:m}),o.printSelectionOrPages()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect(m){i("exit-pen-mode",{source:m}),u.updateInstanceState({isPenMode:!1})}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect(m){i("stop-following",{source:m}),u.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect(m){i("zoom-to-content",{source:m});const S=u.getSelectionPageBounds()??u.getCurrentPageBounds();S&&u.zoomToBounds(S,{targetZoom:Math.min(1,u.getZoomLevel()),animation:{duration:220}})}},{id:"toggle-lock",label:"action.toggle-lock",kbd:"shift+l",onSelect(m){u.markHistoryStoppingPoint("locking"),i("toggle-lock",{source:m}),u.toggleLock(u.getSelectedShapeIds())}},{id:"move-to-new-page",label:"context.pages.new-page",onSelect(m){const S=Bs.createId(),x=u.getSelectedShapeIds();u.run(()=>{u.markHistoryStoppingPoint("move_shapes_to_page"),u.createPage({name:o.msg("page-menu.new-page-initial-name"),id:S}),u.moveShapesToPage(x,S)}),i("move-to-new-page",{source:m})}},{id:"select-white-color",label:"color-style.white",kbd:"alt+t",onSelect(m){const S=Us;u.run(()=>{u.markHistoryStoppingPoint("change-color"),u.isIn("select")&&u.setStyleForSelectedShapes(S,"white"),u.setStyleForNextShapes(S,"white")}),i("set-style",{source:m,id:S.id,value:"white"})}},{id:"select-fill-fill",label:"fill-style.fill",kbd:"alt+f",onSelect(m){const S=Zp;u.run(()=>{u.markHistoryStoppingPoint("change-fill"),u.isIn("select")&&u.setStyleForSelectedShapes(S,"fill"),u.setStyleForNextShapes(S,"fill")}),i("set-style",{source:m,id:S.id,value:"fill"})}},{id:"flatten-to-image",label:"action.flatten-to-image",kbd:"shift+f",onSelect:async m=>{const S=u.getSelectedShapeIds();if(S.length===0)return;u.markHistoryStoppingPoint("flattening to image"),i("flatten-to-image",{source:m});const x=await Clt(u,S,u.options.flattenImageBoundsExpand);x!=null&&x.length&&u.setSelectedShapes(x)}},{id:"select-geo-tool",kbd:"g",onSelect:async m=>{i("select-tool",{source:m,id:"geo-previous"}),u.setCurrentTool("geo")}},{id:"change-page-prev",kbd:"alt+left,alt+up",readonlyOk:!0,onSelect:async m=>{const S=u.getPages(),x=S.findIndex(C=>C.id===u.getCurrentPageId());x<1||(i("change-page",{source:m,direction:"prev"}),u.setCurrentPage(S[x-1].id))}},{id:"change-page-next",kbd:"alt+right,alt+down",readonlyOk:!0,onSelect:async m=>{const S=u.getPages(),x=S.findIndex(C=>C.id===u.getCurrentPageId());if(x===-1||x>=S.length-1){if(u.getCurrentPageShapes().length<=0||u.getIsReadonly())return;i("new-page",{source:m}),u.run(()=>{u.markHistoryStoppingPoint("creating page");const C=Bs.createId();u.createPage({name:o.msg("page-menu.new-page-initial-name"),id:C}),u.setCurrentPage(C)});return}u.setCurrentPage(S[x+1].id),i("change-page",{source:m,direction:"next"})}},{id:"adjust-shape-styles",label:"a11y.adjust-shape-styles",kbd:"cmd+Enter,ctrl+Enter",onSelect:async m=>{if(!f())return;const S=u.getContainer().querySelector(".tlui-style-panel button");S==null||S.focus(),i("adjust-shape-styles",{source:m})}},{id:"enlarge-shapes",label:"a11y.enlarge-shape",kbd:"cmd+alt+shift+=,ctrl+alt+shift+=",onSelect:async m=>{h(1.1),i("enlarge-shapes",{source:m})}},{id:"shrink-shapes",label:"a11y.shrink-shape",kbd:"cmd+alt+shift+-,ctrl+alt+shift+-",onSelect:async m=>{h(1/1.1),i("shrink-shapes",{source:m})}},{id:"a11y-repeat-shape-announce",kbd:"alt+r",label:"a11y.repeat-shape",readonlyOk:!0,onSelect:async m=>{const S=u.getSelectedShapeIds();if(!S.length)return;const x=Pge({editor:u,selectedShapeIds:S,msg:a});x&&(s.announce({msg:""}),u.timers.requestAnimationFrame(()=>{s.announce({msg:x})}),i("a11y-repeat-shape-announce",{source:m}))}}];r&&g.push({id:"open-cursor-chat",label:"action.open-cursor-chat",readonlyOk:!0,kbd:"/",onSelect(m){i("open-cursor-chat",{source:m}),!u.getInstanceState().isCoarsePointer&&u.timers.requestAnimationFrame(()=>{u.updateInstanceState({isChatting:!0})})}});const y=nct(g);return t?t(u,y,o):y},[o,n,i,t,l,r,a,s]);return w.jsx(Xye.Provider,{value:c,children:e})}function Pg(){const t=v.useContext(Xye);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function kx(t,e){return t?typeof t=="string"?t:e?t[e]??t.default:void 0:void 0}function ol(){const t=Gi();return Ie("isReadonlyMode",()=>!!(t!=null&&t.getIsReadonly()),[t])}const Uj=vr.isDarwin?"":"Ctrl",ree=vr.isDarwin?"":"Alt";function Yye(t){return t===","?[","]:t.split(",")[0].split(/(\[\[[^\]]+\]\])/g).map(e=>e.startsWith("[[")?e.replace(/[[\]]/g,""):e.replace(/cmd\+/g,Uj).replace(/ctrl\+/g,Uj).replace(/alt\+/g,ree).replace(/shift\+/g,"").replace(/\$/g,Uj).replace(/\?/g,ree).replace(/!/g,"").split("")).flat().map(e=>e[0].toUpperCase()+e.slice(1))}function h3(t){return" "+Yye(t).join("")}function ES({children:t,visibleOnMobileLayout:e=!1}){const n=_s();return!e&&n<Ro.MOBILE?null:w.jsx("kbd",{className:"tlui-kbd",children:Yye(t).map((r,o)=>w.jsx("span",{children:r},o))})}const Qye=v.createContext(null);function K2(){const t=v.useContext(Qye);if(!t)throw new Error("useTldrawUiMenuContext must be used within a TldrawUiMenuContextProvider");return t}function Gs({type:t,sourceId:e,children:n}){return w.jsx(Qye.Provider,{value:{type:t,sourceId:e},children:n})}function G2({id:t,kbd:e,label:n,readonlyOk:r,onSelect:o,toggle:i=!1,disabled:s=!1,checked:a=!1}){const{type:l,sourceId:c}=K2(),u=ol(),d=Jt();if(u&&!r)return null;const f=kx(n,l),h=f?d(f):void 0;switch(l){case"menu":return w.jsxs(Vst,{dir:"ltr",className:"tlui-button tlui-button__menu tlui-button__checkbox",title:h,onSelect:g=>{o==null||o(c),En(g)},disabled:s,checked:a,children:[w.jsx(Dd,{small:!0,label:d(a?"ui.checked":"ui.unchecked"),icon:i?a?"toggle-on":"toggle-off":a?"check":"none"}),h&&w.jsx("span",{className:"tlui-button__label",draggable:!1,children:h}),e&&w.jsx(ES,{children:e})]});case"context-menu":return w.jsxs(xst,{className:"tlui-button tlui-button__menu tlui-button__checkbox",dir:"ltr",title:h,onSelect:g=>{o(c),En(g)},disabled:s,checked:a,children:[w.jsx(Dd,{small:!0,label:d(a?"ui.checked":"ui.unchecked"),icon:i?a?"toggle-on":"toggle-off":a?"check":"none"}),h&&w.jsx("span",{className:"tlui-button__label",draggable:!1,children:h}),e&&w.jsx(ES,{children:e})]},t);default:return null}}function Wd(t,e){const n=Gi(),r=v.useCallback(s=>{s&&(n==null||n.complete()),e==null||e(s)},[n,e]),o=ci(),i=v.useCallback(s=>{o(s,{source:"unknown",id:t})},[t,o]);return eQe(n?`${t}-${n.contextId}`:t,r,i)}function y6({id:t,children:e,modal:n=!1,debugOpen:r=!1}){const[o,i]=Wd(t);return w.jsx(Q4,{open:r||o,dir:"ltr",modal:n,onOpenChange:i,children:e})}function b6({children:t,...e}){return w.jsx(Z4,{dir:"ltr",asChild:!0,onTouchEnd:n=>En(n),...e,children:t})}function S6({className:t,side:e="bottom",align:n="start",sideOffset:r=8,alignOffset:o=8,children:i}){const s=Ko();return w.jsx(F2,{container:s,children:w.jsx(J4,{className:he("tlui-menu",t),side:e,sideOffset:r,align:n,alignOffset:o,collisionPadding:4,children:i})})}function oct({id:t,children:e}){const[n,r]=Wd(t);return w.jsx(qst,{open:n,onOpenChange:r,children:e})}function ict({id:t,label:e,title:n,disabled:r}){return w.jsx(Kst,{dir:"ltr",asChild:!0,disabled:r,children:w.jsxs(Hn,{"data-testid":t,type:"menu",className:"tlui-menu__submenu__trigger",disabled:r,title:n,children:[w.jsx(Wo,{children:e}),w.jsx(Dn,{icon:"chevron-right",small:!0})]})})}function sct({id:t,alignOffset:e=-1,sideOffset:n=-6,size:r="small",children:o}){const i=Ko();return w.jsx(F2,{container:i,children:w.jsx(Gst,{"data-testid":t,className:"tlui-menu tlui-menu__submenu__content",alignOffset:e,sideOffset:n,collisionPadding:4,"data-size":r,children:o})})}function act({className:t,children:e}){return w.jsx("div",{dir:"ltr",className:he("tlui-menu__group",t),children:e})}function lct({noClose:t,children:e}){return w.jsx(Wst,{dir:"ltr",asChild:!0,onClick:t?En:void 0,children:e})}function kn({id:t,label:e,className:n,children:r}){const{type:o,sourceId:i}=K2(),s=Jt(),a=kx(e,o),l=a?s(a):void 0;switch(o){case"panel":return w.jsx("div",{className:he("tlui-menu__group",n),"data-testid":`${i}-group.${t}`,children:r});case"menu":return w.jsx(act,{className:n,"data-testid":`${i}-group.${t}`,children:r});case"context-menu":return w.jsx("div",{dir:"ltr",className:he("tlui-menu__group",n),"data-testid":`${i}-group.${t}`,children:r});case"keyboard-shortcuts":return w.jsxs("div",{className:"tlui-shortcuts-dialog__group","data-testid":`${i}-group.${t}`,children:[w.jsx("h2",{className:"tlui-shortcuts-dialog__group__title",children:l}),w.jsx("div",{className:"tlui-shortcuts-dialog__group__content",children:r})]});default:return r}}function Pa({id:t,disabled:e=!1,label:n,size:r="small",children:o}){const{type:i,sourceId:s}=K2(),a=Ko(),l=Jt(),c=n?typeof n=="string"?n:n[i]??n.default:void 0,u=c?l(c):void 0;switch(i){case"menu":return w.jsxs(oct,{id:`${s}-sub.${t}`,children:[w.jsx(ict,{id:`${s}-sub.${t}-button`,disabled:e,label:u,title:u}),w.jsx(sct,{id:`${s}-sub.${t}-content`,size:r,children:o})]});case"context-menu":return e?null:w.jsxs(cct,{id:`${s}-sub.${t}`,children:[w.jsx(Eve,{dir:"ltr",disabled:e,asChild:!0,children:w.jsxs(Hn,{"data-testid":`${s}-sub.${t}-button`,type:"menu",className:"tlui-menu__submenu__trigger",children:[w.jsx(Wo,{children:u}),w.jsx(Dn,{icon:"chevron-right",small:!0})]})}),w.jsx(Y4,{container:a,children:w.jsx(Pve,{"data-testid":`${s}-sub.${t}-content`,className:"tlui-menu tlui-menu__submenu__content",alignOffset:-1,sideOffset:-4,collisionPadding:4,"data-size":r,children:o})})]});default:return o}}function cct({id:t,children:e}){const[n,r]=Wd(t);return w.jsx(Cve,{open:n,onOpenChange:r,children:e})}const uct=[{colorScheme:"light",label:"theme.light"},{colorScheme:"dark",label:"theme.dark"},{colorScheme:"system",label:"theme.system"}];function dct(){const t=Ee(),e=ci(),n=Ie("colorScheme",()=>t.user.getUserPreferences().colorScheme??(t.user.getIsDarkMode()?"dark":"light"),[t]);return w.jsx(Pa,{id:"help menu color-scheme",label:"menu.theme",children:w.jsx(kn,{id:"theme",children:uct.map(({colorScheme:r,label:o})=>w.jsx(G2,{id:`color-scheme-${r}`,label:o,checked:r===n,readonlyOk:!0,onSelect:()=>{t.user.updateUserPreferences({colorScheme:r}),e("color-scheme",{source:"menu",value:r})}},r))})})}const fct=({id:t,component:e,onClose:n,preventBackgroundClose:r})=>{const{removeDialog:o}=Kw(),i=v.useRef(!1),s=Ko(),a=v.useCallback(l=>{if(!l){if(n)try{n()}catch(c){console.warn(c)}o(t)}},[t,n,o]);return w.jsx(Jrt,{onOpenChange:a,defaultOpen:!0,children:w.jsx(eot,{container:s,children:w.jsx(tot,{dir:"ltr",className:"tlui-dialog__overlay",onClick:l=>{i.current||!r&&l.target===l.currentTarget&&a(!1)},children:w.jsx(not,{dir:"ltr",className:"tlui-dialog__content","aria-describedby":void 0,onMouseDown:()=>i.current=!0,onMouseUp:()=>i.current=!1,onInteractOutside:l=>{i.current=!1,r&&l.preventDefault()},children:w.jsx(e,{onClose:()=>{i.current=!1,a(!1)}})})})})})},hct=v.memo(function(){const{dialogs:e}=Kw();return Ie("dialogs",()=>e.get(),[e]).map(r=>w.jsx(fct,{...r},r.id))}),pct=4e3,gct={success:"check-circle",warning:"warning-triangle",error:"cross-circle",info:"info-circle"};function mct({toast:t}){const{removeToast:e}=Ud(),n=Jt(),r=a=>{a||e(t.id)},o=t.actions&&t.actions.length>0,i=t.icon||t.severity&&gct[t.severity],s=t.iconLabel||(t.severity?n(`toast.${t.severity}`):"");return w.jsxs(qat,{onOpenChange:r,className:"tlui-toast__container",duration:t.keepOpen?1/0:pct,"data-severity":t.severity,children:[i&&w.jsx("div",{className:"tlui-toast__icon",children:w.jsx(Dd,{label:s,icon:i})}),w.jsxs("div",{className:"tlui-toast__main","data-title":!!t.title,"data-description":!!t.description,"data-actions":!!t.actions,children:[w.jsxs("div",{className:"tlui-toast__content",children:[t.title&&w.jsx(Kat,{className:"tlui-toast__title",children:t.title}),t.description&&w.jsx(Gat,{className:"tlui-toast__description",children:t.description})]}),t.actions&&w.jsxs("div",{className:"tlui-toast__actions",children:[t.actions.map((a,l)=>w.jsx(Xat,{altText:a.label,asChild:!0,onClick:a.onClick,children:w.jsx(Hn,{type:a.type,children:w.jsx(Wo,{children:a.label})})},l)),w.jsx(XJ,{asChild:!0,children:w.jsx(Hn,{type:"normal",className:"tlui-toast__close",style:{marginLeft:"auto"},children:w.jsx(Wo,{children:t.closeLabel??n("toast.close")})})})]})]}),!o&&w.jsx(XJ,{asChild:!0,children:w.jsx(Hn,{type:"normal",className:"tlui-toast__close",children:w.jsx(Wo,{children:t.closeLabel??n("toast.close")})})})]})}const vct=v.memo(function(){const{toasts:e}=Ud(),n=Ie("toasts",()=>e.get(),[]);return w.jsxs(w.Fragment,{children:[n.map(r=>w.jsx(mct,{toast:r},r.id)),w.jsx(fye,{className:"tlui-toast__viewport"})]})});function Uc({actionId:t="",...e}){const r=Pg()[t];return r?w.jsx(G2,{...r,...e}):null}function p3(t){const e=Jt();return w.jsx("svg",{width:16,height:16,viewBox:"0 0 16 16",...t,"aria-label":e("app.loading"),"aria-hidden":"false",children:w.jsxs("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[w.jsx("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),w.jsx("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:w.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})}const Vo=ce.forwardRef(({children:t,className:e,label:n,...r},o)=>w.jsx(clt,{ref:o,...r,className:he("tlui-toolbar-container",e),"aria-label":n,children:t})),Si=ce.forwardRef(({asChild:t,children:e,type:n,isActive:r,...o},i)=>w.jsx(ult,{ref:i,asChild:t,draggable:!1,"data-isactive":r,...o,className:he("tlui-button",`tlui-button__${n}`,o.className),children:e})),yct=({children:t,className:e,type:n,...r})=>w.jsx(dlt,{type:n,...r,className:he("tlui-toolbar-toggle-group",e),children:t}),bct=({children:t,className:e,type:n,value:r,...o})=>w.jsx(flt,{...o,className:he("tlui-button",`tlui-button__${n}`,"tlui-toolbar-toggle-group-item",e),value:r,children:t});function fr({disabled:t=!1,spinner:e=!1,readonlyOk:n=!1,id:r,kbd:o,label:i,icon:s,iconLeft:a,onSelect:l,noClose:c,isSelected:u}){const{type:d,sourceId:f}=K2(),h=Jt(),[g,y]=v.useState(!1);if(ol()&&!n)return null;const S=kx(i,d),x=o?h3(o):void 0,C=S?h(S):void 0,E=C&&x?`${C} ${x}`:C;switch(d){case"menu":return w.jsx(lct,{children:w.jsxs(Hn,{type:"menu","data-testid":`${f}.${r}`,disabled:t,title:E,onClick:P=>{c&&En(P),g?y(!1):l(f)},children:[a&&w.jsx(Dn,{icon:a,small:!0}),w.jsx(Wo,{children:C}),o&&w.jsx(ES,{children:o})]})});case"context-menu":return t?null:w.jsxs(Sst,{dir:"ltr",title:E,draggable:!1,className:"tlui-button tlui-button__menu","data-testid":`${f}.${r}`,onSelect:P=>{c&&En(P),g?y(!1):l(f)},children:[w.jsx("span",{className:"tlui-button__label",draggable:!1,children:C}),a&&w.jsx(Dn,{icon:a,small:!0}),o&&w.jsx(ES,{children:o}),e&&w.jsx(p3,{})]});case"panel":return w.jsxs(Hn,{"data-testid":`${f}.${r}`,type:"menu",title:E,disabled:t,onClick:()=>l(f),children:[w.jsx(Wo,{children:C}),e?w.jsx(p3,{}):s&&w.jsx(Dn,{icon:s})]});case"small-icons":case"icons":return w.jsx(Si,{"data-testid":`${f}.${r}`,type:"icon",title:E,disabled:t,onClick:()=>l(f),children:w.jsx(Dn,{icon:s,small:!0})});case"keyboard-shortcuts":return o?w.jsxs("div",{className:"tlui-shortcuts-dialog__key-pair","data-testid":`${f}.${r}`,children:[w.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:C}),w.jsx("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:w.jsx(ES,{visibleOnMobileLayout:!0,children:o})})]}):(console.warn(`Menu item '${i}' isn't shown in the keyboard shortcuts dialog because it doesn't have a keyboard shortcut.`),null);case"helper-buttons":return w.jsxs(Hn,{type:"low",onClick:()=>l(f),children:[w.jsx(Dn,{icon:s}),w.jsx(Wo,{children:C})]});case"toolbar":return w.jsx(Si,{"aria-label":C,"aria-pressed":u?"true":"false","data-testid":`tools.${r}`,"data-value":r,disabled:t,onClick:()=>l("toolbar"),onTouchStart:P=>{En(P),l("toolbar")},role:"option",title:E,type:"tool",children:w.jsx(Dn,{icon:s})});case"toolbar-overflow":return w.jsx(Si,{"aria-label":C,"aria-pressed":u?"true":"false",isActive:u,className:"tlui-button-grid__button","data-testid":`tools.more.${r}`,"data-value":r,disabled:t,onClick:()=>l("toolbar"),role:"option",title:E,type:"icon",children:w.jsx(Dn,{icon:s})});default:throw Jn(d)}}function Ve({actionId:t="",...e}){const r=Pg()[t];return r?w.jsx(fr,{...r,...e}):null}const Zye=v.createContext(null);function Sct({overrides:t,children:e}){const n=Gi(),r=ci(),o=E2(),i=Jt(),s=v6(),a=v.useCallback((c,u,d)=>{o.announce({msg:i(u.label)}),r("select-tool",{source:c,id:d??u.id})},[o,i,r]),l=v.useMemo(()=>{if(!n)return{};const c=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect(d){if(n.isIn("select")){const f=n.root.getCurrent();f.exit({},f.id),f.enter({},f.id)}n.setCurrentTool("select"),a(d,this)}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect(d){n.setCurrentTool("hand"),a(d,this)}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",onSelect(d){n.setCurrentTool("eraser"),a(d,this)}},{id:"draw",label:"tool.draw",icon:"tool-pencil",kbd:"d,b,x",onSelect(d){n.setCurrentTool("draw"),a(d,this)}},...[...vc.values].map(d=>({id:d,label:`tool.${d}`,meta:{geo:d},kbd:d==="rectangle"?"r":d==="ellipse"?"o":void 0,icon:"geo-"+d,onSelect(f){n.run(()=>{n.setStyleForNextShapes(vc,d),n.setCurrentTool("geo"),a(f,this,`geo-${d}`)})}})),{id:"arrow",label:"tool.arrow",icon:"tool-arrow",kbd:"a",onSelect(d){n.setCurrentTool("arrow"),a(d,this)}},{id:"line",label:"tool.line",icon:"tool-line",kbd:"l",onSelect(d){n.setCurrentTool("line"),a(d,this)}},{id:"frame",label:"tool.frame",icon:"tool-frame",kbd:"f",onSelect(d){n.setCurrentTool("frame"),a(d,this)}},{id:"text",label:"tool.text",icon:"tool-text",kbd:"t",onSelect(d){n.setCurrentTool("text"),a(d,this)}},{id:"asset",label:"tool.media",icon:"tool-media",kbd:"cmd+u,ctrl+u",onSelect(d){s.insertMedia(),a(d,this,"media")}},{id:"note",label:"tool.note",icon:"tool-note",kbd:"n",onSelect(d){n.setCurrentTool("note"),a(d,this)}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect(d){n.setCurrentTool("laser"),a(d,this)}},{id:"embed",label:"tool.embed",icon:"dot",onSelect(d){s.addDialog({component:Hye}),a(d,this)}},{id:"highlight",label:"tool.highlight",icon:"tool-highlight",kbd:"shift+d",onSelect(d){n.setCurrentTool("highlight"),a(d,this)}}];c.forEach(d=>d.onSelect=d.onSelect.bind(d));const u=Object.fromEntries(c.map(d=>[d.id,d]));return t?t(n,u,s):u},[t,n,s,a]);return w.jsx(Zye.Provider,{value:l,children:e})}function x6(){const t=v.useContext(Zye);if(!t)throw new Error("useTools must be used within a ToolProvider");return t}function ua({toolId:t="",...e}){const r=x6()[t];return r?w.jsx(fr,{...r,...e}):null}function xct({children:t}){const e=Ee();return Ie("shouldDisplayHandles",()=>{if(e.isInAny("select.idle","select.pointing_handle","select.pointing_shape"))return!0;if(e.isInAny("select.editing_shape")){const r=e.getOnlySelectedShape();return r&&e.isShapeOfType(r,"note")}return!1},[e])?w.jsx("svg",{className:"tl-user-handles tl-overlays__item",children:t}):null}const oee=["right","bottom","left","top"],wct={top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},Cct={left:"x",right:"x",top:"y",bottom:"y"},Sm={top:"bottom",right:"left",bottom:"top",left:"right"},Ax={x:{v:(t,e)=>new $(t,e),loEdge:"left",hiEdge:"right",crossMid:"midY",gap:"gapX",midRange:"midXRange",self:"x",cross:"y",size:"width"},y:{v:(t,e)=>new $(e,t),loEdge:"top",hiEdge:"bottom",crossMid:"midX",gap:"gapY",midRange:"midYRange",self:"y",cross:"x",size:"height"}},Ect=new Hl;function PS(t){return Ect.get(t,()=>bo("arrowTarget",null))}function Pct(t){return PS(t).get()}function w6(t){PS(t).set(null)}function X2({editor:t,pointInPageSpace:e,arrow:n,isPrecise:r,isExact:o,currentBinding:i,oppositeBinding:s}){if(t.inputs.ctrlKey)return PS(t).set(null),null;const a=t.getShapeUtil("arrow"),l=n?n.props.kind:t.getStyleForNextShape(px),c=t.getShapeAtPoint(e,{hitInside:!0,hitFrameInside:!0,margin:l==="elbow"?8:0,filter:F=>!F.isLocked&&t.canBindShapes({fromShape:n??_ct,toShape:F,binding:"arrow"})});if(!c)return PS(t).set(null),null;const u=t.getShapeGeometry(c),d=rt.ZeroFix(u.bounds),f=u.center,h=t.getShapePageTransform(c),g=t.getPointInShapeSpace(c,e),y=Math.max(u.bounds.width,u.bounds.height),m=hh(wct,(F,H)=>{const U=Ax[Cct[F]],B=$.Mul(H,y).add(f);let W=!1,K=U.v(d[F],d[U.crossMid]),q=0;const X=u.intersectLineSegment(f,B,vu.EXCLUDE_NON_STANDARD);for(const Y of X){const G=$.Dist2(Y,f);G>q&&(q=G,K=Y,W=u.isClosed)}return{point:h.applyToPoint(K),isEnabled:W,far:h.applyToPoint(B)}}),S=t.getZoomLevel(),x=a.options.minElbowHandleDistance/S,C=h.applyToPoint(f);for(const F of Dae(m)){const H=m[F];$.DistMin(H.point,C,x)&&(H.isEnabled=!1)}let E=r||o;E||(!i||i&&c.id!==i.toId)&&(E=t.inputs.pointerVelocity.len()<.5),r||(u.isClosed||(E=!0),s&&c.id===s.toId&&s.props.isPrecise&&(E=!0));const P=!o&&E&&u.isClosed,I=!o&&(E&&l==="elbow"||!u.isClosed),T=!o&&E&&l==="elbow"&&u.isClosed,M=E&&(u.isClosed||o),R=!o&&E&&l==="elbow"&&u.isClosed;let A="none",j=e;if(M||(A="center",j=C),I){const F=M?_E(t,d,a.options.elbowArrowEdgeSnapDistance):1/0,H=u.nearestPoint(g,{includeLabels:!1,includeInternal:!1}),U=h.applyToPoint(H);$.Dist(U,e)<F&&(A="edge",j=U)}if(R){const F=_E(t,d,a.options.elbowArrowAxisSnapDistance),H=$.DistanceToLineSegment(m.left.far,m.right.far,e),U=$.DistanceToLineSegment(m.top.far,m.bottom.far,e),B=H<U&&H<F?"x":U<F?"y":null;if(B){const W=Ax[B],K=$.Dist2(m[W.loEdge].far,e),q=$.Dist2(m[W.hiEdge].far,e),X=K<q?W.loEdge:W.hiEdge;m[X].isEnabled&&(A="edge-point",j=m[X].point)}}if(T){const F=_E(t,d,a.options.elbowArrowPointSnapDistance);let H=null,U=1/0;for(const[B,W]of zs(m)){if(!W.isEnabled)continue;const K=$.Dist(W.point,e);K<F&&K<U&&(U=K,H=B)}H&&(A="edge-point",j=m[H].point)}if(P){const F=_E(t,d,l==="elbow"?a.options.elbowArrowCenterSnapDistance:a.options.arcArrowCenterSnapDistance);$.Dist(g,d.center)<F&&(A="center",j=C)}const N=t.getPointInShapeSpace(c,j),k={x:mv(d.minX,d.maxX,N.x),y:mv(d.minY,d.maxY,N.y)},D={target:c,arrowKind:l,handlesInPageSpace:m,centerInPageSpace:C,anchorInPageSpace:j,isExact:o,isPrecise:E,snap:A,normalizedAnchor:k};return PS(t).set(D),D}const _ct={type:"arrow"};function _E(t,e,n){return zr(Math.min(e.width,e.height)*.15,4,n)/t.getZoomLevel()}function Ict(){const t=Ee();return Ie("should show arrow hints",()=>{if(t.isInAny("arrow.idle","arrow.pointing"))return!0;if(t.isIn("select.pointing_handle")){const n=t.getStateDescendant("select.pointing_handle");if(n.info.shape.type==="arrow"&&(n.info.handle.id==="start"||n.info.handle.id==="end"))return!0}if(t.isIn("select.dragging_handle")){const n=t.getStateDescendant("select.dragging_handle");if(n.info.shape.type==="arrow"&&(n.info.handle.id==="start"||n.info.handle.id==="end"))return!0}return!1},[t])?w.jsx(Tct,{}):null}function Tct(){const t=Ee(),{ShapeIndicator:e}=$r(),n=Ie("arrow target info",()=>Pct(t),[t]);if(!n)return null;const{handlesInPageSpace:r,snap:o,anchorInPageSpace:i,arrowKind:s,isExact:a,isPrecise:l}=n,c=!a&&s==="elbow";return w.jsxs(w.Fragment,{children:[e&&w.jsx(e,{shapeId:n.target.id}),c&&w.jsxs("svg",{className:"tl-overlays__item",children:[w.jsx("circle",{cx:i.x,cy:i.y,className:`tl-arrow-hint-snap tl-arrow-hint-snap__${l?o??"none":"none"}`}),Object.entries(r).map(([u,d])=>d.isEnabled?w.jsx("circle",{cx:d.point.x,cy:d.point.y,className:"tl-arrow-hint-handle"},u):null)]})]})}const{PI:Mct}=Math,rv=Mct+1e-4;function Jye(t,e={}){const{size:n=16,smoothing:r=.5}=e;if(t.length===0||n<=0)return{left:[],right:[]};const o=t[0],i=t[t.length-1],s=i.runningLength,a=Math.pow(n*r,2),l=[],c=[];let u=t[0].vector,d=t[0].point,f=d,h=d,g=f,y=!1,m;for(let S=0;S<t.length;S++){m=t[S];const{point:x,vector:C}=t[S],E=m.vector.dpr(u),P=(S<t.length-1?t[S+1]:t[S]).vector,I=S<t.length-1?P.dpr(m.vector):1,T=E<0&&!y,M=I!==null&&I<.2;if(T||M){if(I>-.62&&s-m.runningLength>m.radius){const A=u.clone().mul(m.radius);u.clone().cpr(P)<0?(h=$.Add(x,A),g=$.Sub(x,A)):(h=$.Sub(x,A),g=$.Add(x,A)),l.push(h),c.push(g)}else{const A=u.clone().mul(m.radius).per(),j=$.Sub(m.input,A);for(let N=1/13,k=0;k<1;k+=N)h=$.RotWith(j,m.input,rv*k),l.push(h),g=$.RotWith(j,m.input,rv+rv*-k),c.push(g)}d=h,f=g,M&&(y=!0);continue}if(y=!1,m===o||m===i){const A=$.Per(C).mul(m.radius);l.push($.Sub(x,A)),c.push($.Add(x,A));continue}const R=$.Lrp(P,C,I).per().mul(m.radius);h=$.Sub(x,R),(S<=1||$.Dist2(d,h)>a)&&(l.push(h),d=h),g=$.Add(x,R),(S<=1||$.Dist2(f,g)>a)&&(c.push(g),f=g),u=C}return{left:l,right:c}}function C6(t,e={}){const{size:n=16,start:r={},end:o={},last:i=!1}=e,{cap:s=!0}=r,{cap:a=!0}=o;if(t.length===0||n<=0)return[];const l=t[0],c=t[t.length-1],u=c.runningLength,d=r.taper===!1?0:r.taper===!0?Math.max(n,u):r.taper,f=o.taper===!1?0:o.taper===!0?Math.max(n,u):o.taper,{left:h,right:g}=Jye(t,e),y=l.point,m=t.length>1?t[t.length-1].point:$.AddXY(l.point,1,1);if(t.length===1&&(!(d||f)||i)){const E=$.Add(y,$.Sub(y,m).uni().per().mul(-l.radius)),P=[];for(let I=1/13,T=I;T<=1;T+=I)P.push($.RotWith(E,y,rv*2*T));return P}const S=[];if(!(d||f&&t.length===1))if(s)for(let E=1/8,P=E;P<=1;P+=E){const I=$.RotWith(g[0],y,rv*P);S.push(I)}else{const E=$.Sub(h[0],g[0]),P=$.Mul(E,.5),I=$.Mul(E,.51);S.push($.Sub(y,P),$.Sub(y,I),$.Add(y,I),$.Add(y,P))}const x=[],C=c.vector.clone().per().neg();if(f||d&&t.length===1)x.push(m);else if(a){const E=$.Add(m,$.Mul(C,c.radius));for(let P=1/29,I=P;I<1;I+=P)x.push($.RotWith(E,m,rv*3*I))}else x.push($.Add(m,$.Mul(C,c.radius)),$.Add(m,$.Mul(C,c.radius*.99)),$.Sub(m,$.Mul(C,c.radius*.99)),$.Sub(m,$.Mul(C,c.radius)));return h.concat(x,g.reverse(),S)}const Oct=.025,Rct=.01;function Ou(t,e={}){var m;const{streamline:n=.5,size:r=16,simulatePressure:o=!1}=e;if(t.length===0)return[];const i=.15+(1-n)*.85;let s=t.map($.From),a=0;if(!o){let S=s[0];for(;S&&!(S.z>=Oct);)s.shift(),S=s[0]}if(!o){let S=s[s.length-1];for(;S&&!(S.z>=Rct);)s.pop(),S=s[s.length-1]}if(s.length===0)return[{point:$.From(t[0]),input:$.From(t[0]),pressure:o?.5:.15,vector:new $(1,1),distance:0,runningLength:0,radius:1}];let l=s[1];for(;l&&!($.Dist2(l,s[0])>(r/3)**2);)s[0].z=Math.max(s[0].z,l.z),s.splice(1,1),l=s[1];const c=s.pop();for(l=s[s.length-1];l&&!($.Dist2(l,c)>(r/3)**2);)s.pop(),l=s[s.length-1],a++;s.push(c);const u=e.last||!e.simulatePressure||s.length>1&&$.Dist2(s[s.length-1],s[s.length-2])<r**2||a>0;if(s.length===2&&e.simulatePressure){const S=s[1];s=s.slice(0,-1);for(let x=1;x<5;x++){const C=$.Lrp(s[0],S,x/4);C.z=(s[0].z+(S.z-s[0].z))*x/4,s.push(C)}}const d=[{point:s[0],input:s[0],pressure:o?.5:s[0].z,vector:new $(1,1),distance:0,runningLength:0,radius:1}];let f=0,h=d[0],g,y;u&&n>0&&s.push(s[s.length-1].clone());for(let S=1,x=s.length;S<x;S++)g=!i||e.last&&S===x-1?s[S].clone():s[S].clone().lrp(h.point,1-i),!h.point.equals(g)&&(y=$.Dist(g,h.point),f+=y,!(S<4&&f<r)&&(h={input:s[S],point:g,pressure:o?.5:s[S].z,vector:$.Sub(h.point,g).uni(),distance:y,runningLength:f,radius:1},d.push(h)));if((m=d[1])!=null&&m.vector&&(d[0].vector=d[1].vector.clone()),f<1){const S=Math.max(.5,...d.map(x=>x.pressure));d.forEach(x=>x.pressure=S)}return d}const{min:ff}=Math,Wj=.275;function Y2(t,e){const{size:n=16,thinning:r=.5,simulatePressure:o=!0,easing:i=m=>m,start:s={},end:a={}}=e,{easing:l=bi.easeOutQuad}=s,{easing:c=bi.easeOutCubic}=a,u=t[t.length-1].runningLength;let d,f=t[0].pressure,h;if(!o&&u<n){const m=t.reduce((S,x)=>Math.max(S,x.pressure),.5);return t.forEach(S=>{S.pressure=m,S.radius=n*i(.5-r*(.5-S.pressure))}),t}else{let m;for(let S=0,x=t.length;S<x&&(h=t[S],!(h.runningLength>n*5));S++){const C=ff(1,h.distance/n);if(o){const E=ff(1,1-C);m=ff(1,f+(E-f)*(C*Wj))}else m=ff(1,f+(h.pressure-f)*.5);f=f+(m-f)*.5}for(let S=0;S<t.length;S++){if(h=t[S],r){let{pressure:x}=h;const C=ff(1,h.distance/n);if(o){const E=ff(1,1-C);x=ff(1,f+(E-f)*(C*Wj))}else x=ff(1,f+(x-f)*(C*Wj));h.radius=n*i(.5-r*(.5-x)),f=x}else h.radius=n/2;d===void 0&&(d=h.radius)}}const g=s.taper===!1?0:s.taper===!0?Math.max(n,u):s.taper,y=a.taper===!1?0:a.taper===!0?Math.max(n,u):a.taper;if(g||y)for(let m=0;m<t.length;m++){h=t[m];const{runningLength:S}=h,x=S<g?l(S/g):1,C=u-S<y?c((u-S)/y):1;h.radius=Math.max(.01,h.radius*Math.min(x,C))}return t}function kct(t,e={}){return C6(Y2(Ou(t,e),e),e)}function iee({scribble:t,zoom:e,color:n,opacity:r,className:o}){if(!t.points.length)return null;const i=kct(t.points,{size:t.size/e,start:{taper:t.taper,easing:bi.linear},last:t.state==="stopping",simulatePressure:!1,streamline:.32});let s;if(i.length<4){const a=t.size/e/2,{x:l,y:c}=t.points[t.points.length-1];s=`M ${l-a},${c} a ${a},${a} 0 1,0 ${a*2},0 a ${a},${a} 0 1,0 ${-a*2},0`}else s=DB(i);return w.jsx("svg",{className:o&&he("tl-overlays__item",o),children:w.jsx("path",{className:"tl-scribble",d:s,fill:n??`var(--color-${t.color})`,opacity:r??t.opacity})})}function Act({size:t,width:e,height:n,hideAlternateHandles:r}){const o=Se(t/3),i=o/2,s=Jt();return w.jsxs("svg",{className:"tl-overlays__item",children:[w.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${Se(0-i)},${Se(t)} 
						${Se(0-i)},${Se(0-i)} 
						${Se(t)},${Se(0-i)}`,strokeWidth:o,"data-testid":"selection.crop.top_left",role:"button","aria-label":s("handle.crop.top-left")}),w.jsx("line",{className:he("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(e/2-t),y1:Se(0-i),x2:Se(e/2+t),y2:Se(0-i),strokeWidth:o,"data-testid":"selection.crop.top",role:"button","aria-label":s("handle.crop.top")}),w.jsx("polyline",{className:he("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${Se(e-t)},${Se(0-i)} 
						${Se(e+i)},${Se(0-i)} 
						${Se(e+i)},${Se(t)}`,strokeWidth:o,"data-testid":"selection.crop.top_right",role:"button","aria-label":s("handle.crop.top-right")}),w.jsx("line",{className:he("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(e+i),y1:Se(n/2-t),x2:Se(e+i),y2:Se(n/2+t),strokeWidth:o,"data-testid":"selection.crop.right",role:"button","aria-label":s("handle.crop.right")}),w.jsx("polyline",{className:"tl-corner-crop-handle",points:`
						${Se(e+i)},${Se(n-t)} 
						${Se(e+i)},${Se(n+i)}
						${Se(e-t)},${Se(n+i)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_right",role:"button","aria-label":s("handle.crop.bottom-right")}),w.jsx("line",{className:he("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(e/2-t),y1:Se(n+i),x2:Se(e/2+t),y2:Se(n+i),strokeWidth:o,"data-testid":"selection.crop.bottom",role:"button","aria-label":s("handle.crop.bottom")}),w.jsx("polyline",{className:he("tl-corner-crop-handle",{"tl-hidden":r}),points:`
						${Se(0+t)},${Se(n+i)} 
						${Se(0-i)},${Se(n+i)}
						${Se(0-i)},${Se(n-t)}`,strokeWidth:o,"data-testid":"selection.crop.bottom_left",role:"button","aria-label":s("handle.crop.bottom-left")}),w.jsx("line",{className:he("tl-corner-crop-edge-handle",{"tl-hidden":r}),x1:Se(0-i),y1:Se(n/2-t),x2:Se(0-i),y2:Se(n/2+t),strokeWidth:o,"data-testid":"selection.crop.left",role:"button","aria-label":s("handle.crop.left")})]})}const $ct=Ii(function({bounds:e,rotation:n}){const r=Ee(),o=Jt(),i=v.useRef(null),s=ol(),a=nu("top"),l=nu("right"),c=nu("bottom"),u=nu("left"),d=nu("top_left"),f=nu("top_right"),h=nu("bottom_right"),g=nu("bottom_left"),y=r.getInstanceState().cursor.type==="default",m=r.getInstanceState().isCoarsePointer,S=r.getOnlySelectedShape(),x=S&&r.isShapeOrAncestorLocked(S),C=S?r.getShapeUtil(S).expandSelectionOutlinePx(S):0,E=C instanceof rt?e.clone().expand(C).zeroFix():e.clone().expandBy(C).zeroFix();if(xw(i,e==null?void 0:e.x,e==null?void 0:e.y,1,r.getSelectionRotation(),{x:E.x-e.x,y:E.y-e.y}),S&&r.isShapeHidden(S))return null;const P=r.getZoomLevel(),I=r.getInstanceState().isChangingStyle,T=E.width,M=E.height,R=8/P,A=T<R*2,j=M<R*2,N=T<R*4,k=M<R*4,D=T<R*5,F=M<R*5,H=m?1.75:1,U=6/P*H,B=(N?U/2:U)*(H*.75),W=(k?U/2:U)*(H*.75),K=(S?!r.getShapeUtil(S).hideSelectionBoundsFg(S):!0)&&!I;let q=K&&r.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle","select.pointing_resize_handle")||K&&r.isIn("select.resizing")&&S&&r.isShapeOfType(S,"text");S&&q&&vr.isFirefox&&r.isShapeOfType(S,"embed")&&(q=!1);const X=r.isInAny("select.crop.idle","select.crop.pointing_crop","select.crop.pointing_crop_handle")&&!I&&!s,Z=r.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!I&&!s,Y=!m&&!(A||j)&&(Z||X)&&(S?!r.getShapeUtil(S).hideRotateHandle(S):!0)&&!x,G=m&&(!N||!k)&&(Z||X)&&(S?!r.getShapeUtil(S).hideRotateHandle(S):!0)&&!x,J=Z&&(S?r.getShapeUtil(S).canResize(S)&&!r.getShapeUtil(S).hideResizeHandles(S):!0)&&!X&&!x,ne=A||j,ee=A&&j,re=D||F,le=J||X,ae=!Y,ie=!Z||!G,ge=!Z||!le,ve=!Z||!le||ne,fe=!Z||!le||ne,ue=!Z||!le||ee&&!X;let Ce=!0,ye=!0;if(X)Ce=re,ye=re;else if(J){Ce=ne||ee||m;const Ue=m&&S&&S.type==="text";ye=Ce&&!Ue}const ke=Math.min(24/P,M-W*3),Be=Z&&m&&S&&r.isShapeOfType(S,"text")&&ke*P>=4;return w.jsx("svg",{className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:w.jsxs("g",{ref:i,children:[q&&w.jsx("rect",{className:"tl-selection__fg__outline",width:Se(T),height:Se(M)}),w.jsx(IE,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:U,corner:"top_left_rotate",cursor:y?$a("nwse-rotate",n):void 0,isHidden:ae}),w.jsx(IE,{"data-testid":"selection.rotate.top-right",cx:T+U*3,cy:0,targetSize:U,corner:"top_right_rotate",cursor:y?$a("nesw-rotate",n):void 0,isHidden:ae}),w.jsx(IE,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:M+U*3,targetSize:U,corner:"bottom_left_rotate",cursor:y?$a("swne-rotate",n):void 0,isHidden:ae}),w.jsx(IE,{"data-testid":"selection.rotate.bottom-right",cx:T+U*3,cy:M+U*3,targetSize:U,corner:"bottom_right_rotate",cursor:y?$a("senw-rotate",n):void 0,isHidden:ae}),w.jsx(jct,{"data-testid":"selection.rotate.mobile",cx:N?-U*1.5:T/2,cy:N?M/2:-U*1.5,size:R,isHidden:ie}),w.jsx(hf,{hide:Ce,dataTestId:"selection.resize.top",ariaLabel:o("handle.resize-top"),x:0,y:Se(0-(k?W*2:W)),width:Se(T),height:Se(Math.max(1,W*2)),cursor:y?$a("ns-resize",n):void 0,events:a}),w.jsx(hf,{hide:ye,dataTestId:"selection.resize.right",ariaLabel:o("handle.resize-right"),x:Se(T-(N?0:B)),y:0,height:Se(M),width:Se(Math.max(1,B*2)),cursor:y?$a("ew-resize",n):void 0,events:l}),w.jsx(hf,{hide:Ce,dataTestId:"selection.resize.bottom",ariaLabel:o("handle.resize-bottom"),x:0,y:Se(M-(k?0:W)),width:Se(T),height:Se(Math.max(1,W*2)),cursor:y?$a("ns-resize",n):void 0,events:c}),w.jsx(hf,{hide:ye,dataTestId:"selection.resize.left",ariaLabel:o("handle.resize-left"),x:Se(0-(N?B*2:B)),y:0,height:Se(M),width:Se(Math.max(1,B*2)),cursor:y?$a("ew-resize",n):void 0,events:u}),w.jsx(hf,{hide:ge,dataTestId:"selection.target.top-left",ariaLabel:o("handle.resize-top-left"),x:Se(0-(N?B*2:B*1.5)),y:Se(0-(k?W*2:W*1.5)),width:Se(B*3),height:Se(W*3),cursor:y?$a("nwse-resize",n):void 0,events:d}),w.jsx(hf,{hide:ve,dataTestId:"selection.target.top-right",ariaLabel:o("handle.resize-top-right"),x:Se(T-(N?0:B*1.5)),y:Se(0-(k?W*2:W*1.5)),width:Se(B*3),height:Se(W*3),cursor:y?$a("nesw-resize",n):void 0,events:f}),w.jsx(hf,{hide:ue,dataTestId:"selection.target.bottom-right",ariaLabel:o("handle.resize-bottom-right"),x:Se(T-(N?B:B*1.5)),y:Se(M-(k?W:W*1.5)),width:Se(B*3),height:Se(W*3),cursor:y?$a("nwse-resize",n):void 0,events:h}),w.jsx(hf,{hide:fe,dataTestId:"selection.target.bottom-left",ariaLabel:o("handle.resize-bottom-left"),x:Se(0-(N?B*3:B*1.5)),y:Se(M-(k?0:W*1.5)),width:Se(B*3),height:Se(W*3),cursor:y?$a("nesw-resize",n):void 0,events:g}),J&&w.jsxs(w.Fragment,{children:[w.jsx("rect",{"data-testid":"selection.resize.top-left",className:he("tl-corner-handle",{"tl-hidden":ge}),x:Se(0-R/2),y:Se(0-R/2),width:Se(R),height:Se(R)}),w.jsx("rect",{"data-testid":"selection.resize.top-right",className:he("tl-corner-handle",{"tl-hidden":ve}),x:Se(T-R/2),y:Se(0-R/2),width:Se(R),height:Se(R)}),w.jsx("rect",{"data-testid":"selection.resize.bottom-right",className:he("tl-corner-handle",{"tl-hidden":ue}),x:Se(T-R/2),y:Se(M-R/2),width:Se(R),height:Se(R)}),w.jsx("rect",{"data-testid":"selection.resize.bottom-left",className:he("tl-corner-handle",{"tl-hidden":fe}),x:Se(0-R/2),y:Se(M-R/2),width:Se(R),height:Se(R)})]}),Be&&w.jsxs(w.Fragment,{children:[w.jsx("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle",x:Se(0-R/4),y:Se(M/2-ke/2),rx:R/4,width:Se(R/2),height:Se(ke)}),w.jsx("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle",rx:R/4,x:Se(T-R/4),y:Se(M/2-ke/2),width:Se(R/2),height:Se(ke)})]}),X&&w.jsx(Act,{size:R,width:T,height:M,hideAlternateHandles:re})]})})}),hf=function({hide:e,dataTestId:n,ariaLabel:r,x:o,y:i,width:s,height:a,cursor:l,events:c}){return w.jsx("rect",{className:he("tl-resize-handle","tl-transparent",{"tl-hidden":e}),"data-testid":n,role:"button","aria-label":r,pointerEvents:"all",x:o,y:i,width:s,height:a,cursor:l,...c})},IE=function({cx:e,cy:n,targetSize:r,corner:o,cursor:i,isHidden:s,"data-testid":a}){const l=nu(o),u=Jt()(`handle.rotate.${o}`);return w.jsx("rect",{className:he("tl-transparent","tl-rotate-corner",{"tl-hidden":s}),"data-testid":a,role:"button","aria-label":u,pointerEvents:"all",x:Se(e-r*3),y:Se(n-r*3),width:Se(Math.max(1,r*3)),height:Se(Math.max(1,r*3)),cursor:i,...l})},Dct=Math.sqrt(Math.PI),jct=function({cx:e,cy:n,size:r,isHidden:o,"data-testid":i}){const s=nu("mobile_rotate"),a=Ee(),l=Ie("zoom level",()=>a.getZoomLevel(),[a]),c=Math.max(14*(1/l),20/Math.max(1,l)),u=Jt();return w.jsxs("g",{role:"button","aria-label":u("handle.rotate.mobile_rotate"),children:[w.jsx("circle",{"data-testid":i,pointerEvents:"all",className:he("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":o}),cx:e,cy:n,r:c,...s}),w.jsx("circle",{className:he("tl-mobile-rotate__fg",{"tl-hidden":o}),cx:e,cy:n,r:r/Dct})]})};function Lct(){const t=Ee(),e=Ie("is in a valid select state",()=>t.isInAny("select.idle","select.brushing","select.scribble_brushing","select.editing_shape","select.pointing_shape","select.pointing_selection","select.pointing_handle"),[t]);return w.jsx(iue,{hideAll:!e})}function qI(t,e,n){const{arrowheadStart:r,arrowheadEnd:o}=e.props,i=Bm(t,e,n),s=i.start.clone(),a=i.end.clone(),l=$.Med(s,a);if($.Equals(s,a))return{bindings:n,type:"straight",start:{handle:s,point:s,arrowhead:e.props.arrowheadStart},end:{handle:a,point:a,arrowhead:e.props.arrowheadEnd},middle:l,isValid:!1,length:0};const c=$.Sub(a,s).uni(),u=GI(t,e,"start"),d=GI(t,e,"end"),f=t.getShapePageTransform(e);see(a,i.start,f,d),see(s,i.end,f,u);let h=0,g=0,y=0,m=0,S=_S*e.props.scale;const x=u&&d&&u.shape===d.shape,C=u&&d?E6(t,u.shape.id,d.shape.id):"safe";C==="safe"&&u&&d&&!x&&!u.isExact&&!d.isExact&&(d.didIntersect&&!u.didIntersect?u.isClosed&&s.setTo(a.clone().add(c.clone().mul(_S*e.props.scale))):d.didIntersect||d.isClosed&&a.setTo(s.clone().sub(c.clone().mul(_S*e.props.scale))));const E=$.Sub(a,s),P=$.Len(E)?E.uni():$.From(E),I=!$.Equals(P,c);x||(C!=="start-contains-end"&&u&&r!=="none"&&!u.isExact&&(y=Ml[e.props.size]/2+("size"in u.shape.props?Ml[u.shape.props.size]/2:0),h=($x+y)*e.props.scale,S+=y*e.props.scale),C!=="end-contains-start"&&d&&o!=="none"&&!d.isExact&&(m=Ml[e.props.size]/2+("size"in d.shape.props?Ml[d.shape.props.size]/2:0),g=($x+m)*e.props.scale,S+=m*e.props.scale));const T=s.clone().add(P.clone().mul(h*(I?-1:1))),M=a.clone().sub(P.clone().mul(g*(I?-1:1)));$.DistMin(T,M,S)&&(h!==0&&g!==0?(h*=-1.5,g*=-1.5):h!==0?h*=-1:g!==0&&(g*=-1)),s.add(P.clone().mul(h*(I?-1:1))),a.sub(P.clone().mul(g*(I?-1:1))),I?(u&&d&&a.setTo($.Add(s,P.clone().mul(-10*e.props.scale))),l.setTo($.Med(i.start,i.end))):l.setTo($.Med(s,a));const R=$.Dist(s,a);return{bindings:n,type:"straight",start:{handle:i.start,point:s,arrowhead:e.props.arrowheadStart},end:{handle:i.end,point:a,arrowhead:e.props.arrowheadEnd},middle:l,isValid:R>0,length:R}}function see(t,e,n,r){if(r===void 0||r.isExact)return;const o=Ke.applyToPoint(n,e),i=Ke.applyToPoint(n,t),s=Ke.applyToPoint(Ke.Inverse(r.transform),o),a=Ke.applyToPoint(Ke.Inverse(r.transform),i),l=Array.from(r.geometry.intersectLineSegment(s,a,{includeLabels:!1,includeInternal:!1}));let c;if(l.length&&(c=l.sort((f,h)=>$.Dist2(f,s)-$.Dist2(h,s))[0]??(r.isClosed?void 0:a)),c===void 0&&(c=r.geometry.nearestPoint(a),!$.DistMin(c,a,1)))return;const u=Ke.applyToPoint(r.transform,c),d=Ke.applyToPoint(Ke.Inverse(n),u);t.setTo(d),r.didIntersect=!0}function Nct(t,e,n){const{arrowheadEnd:r,arrowheadStart:o}=e.props,i=e.props.bend;if(Math.abs(i)>Math.abs(e.props.bend*(out*e.props.scale)))return qI(t,e,n);const s=Bm(t,e,n),a=$.Med(s.start,s.end),l=$.Sub(s.end,s.start),c=$.Len(l)?l.uni():$.From(l),u=$.Add(a,c.per().mul(-i)),d=GI(t,e,"start"),f=GI(t,e,"end"),h=s.start.clone(),g=s.end.clone(),y=u.clone();if($.Equals(h,g))return{bindings:n,type:"straight",start:{handle:h,point:h,arrowhead:e.props.arrowheadStart},end:{handle:g,point:g,arrowhead:e.props.arrowheadEnd},middle:y,isValid:!1,length:0};const m=e.props.bend<0,S=m?VM:LWe,x=aee(h,g,y),C=$.Angle(x.center,h),E=$.Angle(x.center,g),P=S(C,E);if(x.length===0||x.size===0||!CQ(x.length)||!CQ(x.size))return qI(t,e,n);const I=h.clone(),T=g.clone(),M=y.clone(),R=t.getShapePageTransform(e);let A=0,j=0,N=_S*e.props.scale;if(d&&!d.isExact){const K=Ke.applyToPoint(R,I),q=Ke.applyToPoint(R,x.center),X=Ke.applyToPoint(R,T),Z=Ke.Inverse(d.transform),Y=Ke.applyToPoint(Z,K),G=Ke.applyToPoint(Z,q),J=Ke.applyToPoint(Z,X),{isClosed:ne}=d;let ee,re=Array.from(d.geometry.intersectCircle(G,x.radius,{includeLabels:!1,includeInternal:!1}));if(re.length){const le=G.angle(Y),ae=G.angle(J),ie=S(le,ae);re=re.filter(ve=>S(le,G.angle(ve))<=ie);const ge=ie*.25;re.sort(ne?(ve,fe)=>Math.abs(S(le,G.angle(ve))-ge)<Math.abs(S(le,G.angle(fe))-ge)?-1:1:(ve,fe)=>S(le,G.angle(ve))<S(le,G.angle(fe))?-1:1),ee=re[0]}if(!ee)if(ne){const le=d.geometry.nearestPoint(Y);$.DistMin(le,Y,1)&&(ee=le)}else ee=Y;if(ee&&(I.setTo(t.getPointInShapeSpace(e,Ke.applyToPoint(d.transform,ee))),d.didIntersect=!0,o!=="none")){const le=Ml[e.props.size]/2+("size"in d.shape.props?Ml[d.shape.props.size]/2:0);A=($x+le)*e.props.scale,N+=le*e.props.scale}}if(f&&!f.isExact){const K=Ke.applyToPoint(R,I),q=Ke.applyToPoint(R,T),X=Ke.applyToPoint(R,x.center),Z=Ke.Inverse(f.transform),Y=Ke.applyToPoint(Z,K),G=Ke.applyToPoint(Z,X),J=Ke.applyToPoint(Z,q),ne=f.isClosed;let ee,re=Array.from(f.geometry.intersectCircle(G,x.radius,{includeLabels:!1,includeInternal:!1}));if(re.length){const le=G.angle(Y),ae=G.angle(J),ie=S(le,ae),ge=ie*.75;re=re.filter(ve=>S(le,G.angle(ve))<=ie),re.sort(ne?(ve,fe)=>Math.abs(S(le,G.angle(ve))-ge)<Math.abs(S(le,G.angle(fe))-ge)?-1:1:(ve,fe)=>S(le,G.angle(ve))<S(le,G.angle(fe))?-1:1),ee=re[0]}if(!ee)if(ne){const le=f.geometry.nearestPoint(J);$.DistMin(le,J,1)&&(ee=le)}else ee=J;if(ee&&(T.setTo(t.getPointInShapeSpace(e,Ke.applyToPoint(f.transform,ee))),f.didIntersect=!0,r!=="none")){const le=Ml[e.props.size]/2+("size"in f.shape.props?Ml[f.shape.props.size]/2:0);j=($x+le)*e.props.scale,N+=le*e.props.scale}}let k=$.Angle(x.center,I),D=$.Angle(x.center,T),F=S(k,D),H=F*x.radius;const U=I.clone(),B=T.clone();if(A!==0&&U.setTo(x.center).add($.FromAngle(k+F*(A/H*(m?1:-1))).mul(x.radius)),j!==0&&B.setTo(x.center).add($.FromAngle(D+F*(j/H*(m?-1:1))).mul(x.radius)),$.DistMin(U,B,N)){A!==0&&j!==0?(A*=-1.5,j*=-1.5):A!==0?A*=-2:j!==0&&(j*=-2);const K=.1-S(C,k)*x.radius,q=.1-S(D,E)*x.radius;A=Math.max(A,K),j=Math.max(j,q)}if(A!==0&&I.setTo(x.center).add($.FromAngle(k+F*(A/H*(m?1:-1))).mul(x.radius)),j!==0&&T.setTo(x.center).add($.FromAngle(D+F*(j/H*(m?-1:1))).mul(x.radius)),d&&f&&!d.isExact&&!f.isExact){k=$.Angle(x.center,I),D=$.Angle(x.center,T),F=S(k,D),H=F*x.radius;const K=E6(t,d.shape.id,f.shape.id);K==="double-bound"&&H<30?(I.setTo(h),T.setTo(g),M.setTo(y)):K==="safe"&&(d&&!d.didIntersect&&I.setTo(h),(f&&!f.didIntersect||S(C,k)>S(C,D))&&T.setTo(x.center).add($.FromAngle(k+F*(Math.min(.9,_S*e.props.scale/H)*(m?1:-1))).mul(x.radius)))}Fct(x.center,x.radius,I,T,M,P,m),I.equals(T)&&(I.setTo(M.clone().addXY(1,1)),T.setTo(M.clone().subXY(1,1))),h.setTo(I),g.setTo(T),y.setTo(M);const W=aee(h,g,y);return{bindings:n,type:"arc",start:{point:h,handle:s.start,arrowhead:e.props.arrowheadStart},end:{point:g,handle:s.end,arrowhead:e.props.arrowheadEnd},middle:y,handleArc:x,bodyArc:W,isValid:W.length!==0&&isFinite(W.center.x)&&isFinite(W.center.y)}}function aee(t,e,n){const r=TB(t,e,n)??$.Med(t,e),o=$.Dist(r,t),i=+$.Clockwise(t,n,e),s=((t.y-e.y)**2+(t.x-e.x)**2)**.5,a=((e.y-n.y)**2+(e.x-n.x)**2)**.5,l=((n.y-t.y)**2+(n.x-t.x)**2)**.5,c=Math.acos((a*a+l*l-s*s)/(2*a*l))*2,u=+(cr>c),d=(Ir-c)*(i?1:-1),f=d*o;return{center:r,radius:o,size:d,length:f,largeArcFlag:u,sweepFlag:i}}function Fct(t,e,n,r,o,i,s){const a=$.Angle(t,n),l=$.Angle(t,r);let c=VM(a,l);if(s||(c=Ir-c),o.setTo(t).add($.FromAngle(a+c*(.5*(s?1:-1))).mul(e)),c>i){o.rotWith(t,cr);const u=r.clone();r.setTo(n),n.setTo(u)}}function zct(t,e){const n={min:t.min-e,max:t.max+e};return n.min>n.max?null:n}function Bct(t,e){return nn(t.min<=t.max&&e.min<=e.max),t.min<=e.min&&e.max<=t.max?[{min:t.min,max:e.min},{min:e.max,max:t.max}]:e.max<=t.min||e.min>=t.max?[t]:e.min<=t.min&&t.max<=e.max?[]:KI(t.min,e)?[{min:e.max,max:t.max}]:KI(t.max,e)?[{min:t.min,max:e.min}]:[]}function Vj(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function KI(t,e){return t>=e.min&&t<=e.max}function lee(t){return t.max-t.min}function TE(t){if(!t)return;const e=t.cross.min;t.cross.min=-t.cross.max,t.cross.max=-e,t.crossTarget=-t.crossTarget}function ME(t){t&&(t.value=-t.value,t.expanded=t.expanded===null?null:-t.expanded)}const Qo={Identity:{x:1,y:1,transpose:!1},Rotate90:{x:-1,y:1,transpose:!0},Rotate180:{x:-1,y:-1,transpose:!1},Rotate270:{x:1,y:-1,transpose:!0},FlipY:{x:1,y:-1,transpose:!1}};function Hct(t){return t.transpose?{x:t.y,y:t.x,transpose:!0}:t}function Uct(t,e){const n={...t};return e.transpose&&(Nf(n,"x","y"),n.transpose=!n.transpose),e.x===-1&&(n.x=-n.x),e.y===-1&&(n.y=-n.y),n}function Nf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function cee(t,e){e.x=t.x*e.x,e.y=t.y*e.y,t.transpose&&Nf(e,"x","y")}function xm(t,e){t.x===-1&&(e.x=-(e.x+e.width)),t.y===-1&&(e.y=-(e.y+e.height)),t.transpose&&(Nf(e,"x","y"),Nf(e,"width","height"))}function uee(t,e){t.x===-1&&(Nf(e,"left","right"),TE(e.top),TE(e.bottom),ME(e.left),ME(e.right)),t.y===-1&&(Nf(e,"top","bottom"),TE(e.left),TE(e.right),ME(e.top),ME(e.bottom)),t.transpose&&(Nf(e,"left","top"),Nf(e,"right","bottom"))}class Wct{constructor(e){V(this,"options");V(this,"A");V(this,"B");V(this,"common");V(this,"gapX");V(this,"gapY");V(this,"midX");V(this,"midY");V(this,"bias");V(this,"transform",Qo.Identity);V(this,"inverse",Qo.Identity);this.options=e.options,this.A=e.A,this.B=e.B,this.common=e.common,this.midX=e.midX,this.midY=e.midY,this.gapX=e.gapX,this.gapY=e.gapY,this.bias=new $(1,1)}apply(e){if(this.transform=Uct(e,this.transform),this.inverse=Hct(this.transform),xm(e,this.A.original),xm(e,this.B.original),xm(e,this.common.original),xm(e,this.A.expanded),xm(e,this.B.expanded),xm(e,this.common.expanded),uee(e,this.A.edges),uee(e,this.B.edges),cee(e,this.bias),e.x===-1&&(this.gapX=-this.gapX,this.midX=this.midX===null?null:-this.midX),e.y===-1&&(this.gapY=-this.gapY,this.midY=this.midY===null?null:-this.midY),e.transpose){let n=this.midX;this.midX=this.midY,this.midY=n,n=this.gapX,this.gapX=this.gapY,this.gapY=n}}reset(){this.apply(this.inverse)}vec(e,n){const r=new $(e,n);return cee(this.inverse,r),r}}const wm=.01;class pa{constructor(e,n){V(this,"points",[]);V(this,"_midpointHandle",null);this.info=e,this.name=n}add(e,n){return this.points.push(this.info.vec(e,n)),this}midpointHandle(e){nn(this._midpointHandle===null,"midX/midY called multiple times");const n=$.Lrp(this.points[this.points.length-2],this.points[this.points.length-1],.5);return this._midpointHandle={axis:this.info.transform.transpose?e==="x"?"y":"x":e,point:n,segmentStart:this.points[this.points.length-2].clone(),segmentEnd:this.points[this.points.length-1].clone()},this}build(){const e=[];for(let n=0;n<this.points.length;n++){const r=this.points[n],o=e[e.length-1],i=e[e.length-2];if(!o||!i)e.push(r);else{const s=Math.abs(r.x-o.x),a=Math.abs(r.y-o.y),l=Math.abs(r.x-i.x),c=Math.abs(r.y-i.y);s<wm&&a<wm||(s<wm&&l<wm?o.y=r.y:a<wm&&c<wm?o.x=r.x:e.push(r))}}return{name:this.name,points:e,distance:Vct(e),aEdgePicking:"manual",bEdgePicking:"manual",skipPointsWhenDrawing:new Set,midpointHandle:this._midpointHandle}}}function Vct(t){let e=0;for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1];e+=Math.abs(o.x-r.x)+Math.abs(o.y-r.y)}return e}function OE(t){const e=t.A.edges.right,n=t.B.edges.left;if(!e||!n)return null;if(e.crossTarget>n.crossTarget&&t.apply(Qo.FlipY),t.gapX>0&&t.midX!==null)return new pa(t,"to left 1").add(e.value,e.crossTarget).add(t.midX,e.crossTarget).add(t.midX,n.crossTarget).midpointHandle("x").add(n.value,n.crossTarget).build();if(e.expanded===null||n.expanded===null)return null;if(t.midY!==null)return new pa(t,"to left 2").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.midY).add(n.expanded,t.midY).midpointHandle("y").add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build();const r=Math.abs(e.value-t.common.expanded.right)+Math.abs(e.crossTarget-t.common.expanded.bottom)+Math.abs(t.common.expanded.right-n.expanded)+Math.abs(t.common.expanded.bottom-n.crossTarget)+t.options.expandElbowLegLength+6,o=t.options.expandElbowLegLength+Math.abs(e.crossTarget-t.common.expanded.top)+Math.abs(e.expanded-t.common.expanded.left)+Math.abs(t.common.expanded.top-n.crossTarget)+Math.abs(t.common.expanded.left-n.value)+6+t.bias.y,i=t.gapX<0&&t.midX!==null?t.options.expandElbowLegLength+Math.abs(e.crossTarget-t.A.expanded.bottom)+t.common.expanded.width+Math.abs(t.A.expanded.bottom-t.B.expanded.top)+Math.abs(t.B.expanded.top-n.crossTarget)+t.options.expandElbowLegLength+8:1/0;return r<o&&r<i?new pa(t,"to left 3").add(e.value,e.crossTarget).add(t.common.expanded.right,e.crossTarget).add(t.common.expanded.right,t.common.expanded.bottom).add(n.expanded,t.common.expanded.bottom).add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build():o<i?new pa(t,"to left 4").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.common.expanded.top).add(t.common.expanded.left,t.common.expanded.top).add(t.common.expanded.left,n.crossTarget).add(n.value,n.crossTarget).build():t.midX!==null?new pa(t,"to left 5").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.A.expanded.bottom).add(t.midX,t.A.expanded.bottom).add(t.midX,t.B.expanded.top).midpointHandle("y").add(n.expanded,t.B.expanded.top).add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build():null}function Wb(t){const e=t.A.edges.right,n=t.B.edges.top;if(!e||!n)return null;if(e.crossTarget<(n.expanded??n.value)&&n.crossTarget>(e.expanded??e.value)||t.A.isPoint&&t.B.expanded.containsPoint(t.A.original.center))return new pa(t,"to top 1").add(e.value,e.crossTarget).add(n.crossTarget,e.crossTarget).add(n.crossTarget,n.value).build();if(t.gapX>0&&t.midX!==null&&n.expanded!==null)return new pa(t,"to top 2").add(e.value,e.crossTarget).add(t.midX,e.crossTarget).add(t.midX,n.expanded).midpointHandle("x").add(n.crossTarget,n.expanded).add(n.crossTarget,n.value).build();if(t.gapY>0&&e.expanded!==null&&n.crossTarget<e.expanded&&t.midY!==null)return new pa(t,"to top 3").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.midY).add(n.crossTarget,t.midY).midpointHandle("y").add(n.crossTarget,n.value).build();const r=Math.abs(e.value-t.common.expanded.right)+Math.abs(e.crossTarget-t.common.expanded.top)+Math.abs(n.crossTarget-t.common.expanded.right)+Math.abs(n.value-t.common.expanded.top),o=e.expanded!==null&&t.midY!==null&&n.expanded!==null?Math.abs(e.value-e.expanded)+Math.abs(t.B.expanded.left-e.expanded)+Math.abs(t.B.expanded.left-n.crossTarget)+Math.abs(e.crossTarget-t.B.expanded.top)+Math.abs(n.value-n.expanded):1/0,i=e.expanded!==null&&t.midX!==null&&n.expanded!==null?Math.abs(e.value-t.common.expanded.right)+Math.abs(e.crossTarget-t.A.expanded.bottom)+Math.abs(e.expanded-n.crossTarget)+Math.abs(t.A.expanded.bottom-n.expanded)+Math.abs(n.expanded-n.value):1/0;return r<o&&r<i?new pa(t,"to top 4").add(e.value,e.crossTarget).add(t.common.expanded.right,e.crossTarget).add(t.common.expanded.right,t.common.expanded.top).add(n.crossTarget,t.common.expanded.top).add(n.crossTarget,n.value).build():n.expanded!==null&&e.expanded!==null&&t.midY!==null&&o<i?new pa(t,"to top 5").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.midY).add(t.B.expanded.left,t.midY).midpointHandle("y").add(t.B.expanded.left,n.expanded).add(n.crossTarget,n.expanded).add(n.crossTarget,n.value).build():n.expanded!==null&&e.expanded!==null&&t.midX!==null?new pa(t,"to top 6").add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.A.expanded.bottom).add(t.midX,t.A.expanded.bottom).add(t.midX,n.expanded).midpointHandle("x").add(n.crossTarget,n.expanded).add(n.crossTarget,n.value).build():null}function RE(t){return t.apply(Qo.FlipY),Wb(t)}function kE(t){const e=t.A.edges.right,n=t.B.edges.right;if(!e||!n)return null;if((t.gapX<=0||e.crossTarget>t.B.expanded.bottom||e.crossTarget<t.B.expanded.top)&&(n.value>t.A.original.left||n.crossTarget>t.A.expanded.bottom||n.crossTarget<t.A.expanded.top))return new pa(t,"to right 1").add(e.value,e.crossTarget).add(t.common.expanded.right,e.crossTarget).add(t.common.expanded.right,n.crossTarget).add(n.value,n.crossTarget).build();if(t.midX===null)return null;if(n.expanded!==null&&t.gapX>=0){const r=Math.abs(n.crossTarget-t.B.expanded.bottom)+Math.abs(e.crossTarget-t.B.expanded.bottom),o=Math.abs(n.crossTarget-t.B.expanded.top)+Math.abs(e.crossTarget-t.B.expanded.top),i=r<o?"bottom":"top";return new pa(t,`to right 2 via ${i}`).add(e.value,e.crossTarget).add(t.midX,e.crossTarget).add(t.midX,t.B.expanded[i]).midpointHandle("x").add(n.expanded,t.B.expanded[i]).add(n.expanded,n.crossTarget).add(n.value,n.crossTarget).build()}if(e.expanded!==null&&t.gapX<=0){const r=Math.abs(n.crossTarget-t.A.expanded.bottom)+Math.abs(e.crossTarget-t.A.expanded.bottom),o=Math.abs(n.crossTarget-t.A.expanded.top)+Math.abs(e.crossTarget-t.A.expanded.top),i=r<o?"bottom":"top";return new pa(t,`to right 3 via ${i}`).add(e.value,e.crossTarget).add(e.expanded,e.crossTarget).add(e.expanded,t.A.expanded[i]).add(t.midX,t.A.expanded[i]).add(t.midX,n.crossTarget).midpointHandle("x").add(n.value,n.crossTarget).build()}return null}const qct={top:{top:[Qo.Rotate270,kE],left:[Qo.Rotate270,Wb],bottom:[Qo.Rotate270,OE],right:[Qo.Rotate270,RE]},right:{top:[Qo.Identity,Wb],right:[Qo.Identity,kE],bottom:[Qo.Identity,RE],left:[Qo.Identity,OE]},bottom:{top:[Qo.Rotate90,OE],left:[Qo.Rotate90,RE],bottom:[Qo.Rotate90,kE],right:[Qo.Rotate90,Wb]},left:{top:[Qo.Rotate180,RE],left:[Qo.Rotate180,kE],bottom:[Qo.Rotate180,Wb],right:[Qo.Rotate180,OE]}};function Zo(t,e,n){const[r,o]=qct[e][n];t.apply(r);const i=o(t);return t.reset(),i}function Kct(t,e){let n=null;if(Math.abs(t.gapX)+1>Math.abs(t.gapY)&&t.midX!==null)t.gapX>0?n=Zo(t,"right","left"):n=Zo(t,"left","right");else{const s=t.A.edges.right,a=t.A.edges.left,l=t.B.edges.top,c=t.B.edges.bottom;t.A.isPoint&&t.B.isPoint?t.gapY>0?n=Zo(t,"bottom","top"):n=Zo(t,"top","bottom"):s&&l&&(s.expanded??s.value)<=l.crossTarget&&s.crossTarget<=(l.expanded??l.value)?n=Zo(t,"right","top"):s&&c&&(s.expanded??s.value)<=c.crossTarget&&s.crossTarget>=(c.expanded??c.value)?n=Zo(t,"right","bottom"):a&&l&&(a.expanded??a.value)>=l.crossTarget&&a.crossTarget<=(l.expanded??l.value)?n=Zo(t,"left","top"):a&&c&&(a.expanded??a.value)>=c.crossTarget&&a.crossTarget>=(c.expanded??c.value)?n=Zo(t,"left","bottom"):t.gapY>0&&t.midY!==null?n=Zo(t,"bottom","top"):t.gapY<0&&t.midY!==null&&(n=Zo(t,"top","bottom"))}if(n)return n.aEdgePicking=e,n.bEdgePicking=e,n;const r=oee.filter(s=>t.A.edges[s]),o=oee.filter(s=>t.B.edges[s]),i=r.flatMap(s=>o.map(a=>[s,a,e,e]));return zm(t,i)}function Gct(t,e){let n=null;const r=t.A.edges.right,o=t.A.edges.left,i=t.B.edges.top,s=t.B.edges.bottom;switch(e){case"right":t.gapX>0&&t.gapX>Math.abs(t.gapY)&&t.midX!==null?n=Zo(t,"right","left"):r&&i&&(r.expanded??r.value)<=i.crossTarget&&r.crossTarget<=(i.expanded??i.value)?n=Zo(t,"right","top"):r&&s&&(r.expanded??r.value)<=s.crossTarget&&r.crossTarget>=(s.expanded??s.value)&&(n=Zo(t,"right","bottom"));break;case"left":t.gapX<0&&Math.abs(t.gapX)>Math.abs(t.gapY)&&t.midX!==null?n=Zo(t,"left","right"):o&&i&&(o.expanded??o.value)>=i.crossTarget&&o.crossTarget<=(i.expanded??i.value)?n=Zo(t,"left","top"):o&&s&&(o.expanded??o.value)>=s.crossTarget&&o.crossTarget>=(s.expanded??s.value)&&(n=Zo(t,"left","bottom"));break;case"top":case"bottom":break;default:Jn(e)}if(n)return n.aEdgePicking="manual",n.bEdgePicking="auto",n;switch(e){case"top":return zm(t,[["top","bottom","manual","auto"],["top","right","manual","auto"],["top","left","manual","auto"],["top","top","manual","auto"]]);case"bottom":return zm(t,[["bottom","top","manual","auto"],["bottom","right","manual","auto"],["bottom","left","manual","auto"],["bottom","bottom","manual","auto"]]);case"left":return zm(t,[["left","right","manual","auto"],["left","bottom","manual","auto"],["left","left","manual","auto"],["left","top","manual","auto"]]);case"right":return zm(t,[["right","left","manual","auto"],["right","bottom","manual","auto"],["right","right","manual","auto"],["right","top","manual","auto"]])}}function Xct(t,e,n){const r=Zo(t,e,n);return r||(t.A.isPoint&&t.B.isPoint?zm(t,[[Sm[e],Sm[n],"manual","manual"],[e,Sm[n],"manual","auto"],[Sm[e],n,"auto","manual"]]):t.A.isPoint?Zo(t,Sm[e],n):t.B.isPoint?Zo(t,e,Sm[n]):null)}function zm(t,e){let n=null,r=1/0,o=1/0,i=0;for(const[s,a,l,c]of e){i+=1;const u=Zo(t,s,a);u&&(u.aEdgePicking=l,u.bEdgePicking=c,u.points.length<r?(r=u.points.length,o=u.distance,n=u):u.points.length===r&&u.distance+i<o&&(o=u.distance,n=u))}return n}function e0e(t,e,n){const r=t.getShapeUtil(e.type).options,o={elbowMidpoint:e.props.elbowMidPoint,expandElbowLegLength:r.expandElbowLegLength[e.props.size]*e.props.scale,minElbowLegLength:r.minElbowLegLength[e.props.size]*e.props.scale};let i=dee(t,e,n.start,e.props.start),s=dee(t,e,n.end,e.props.end);i=gee(i,s,o),s=gee(s,i,o);const a=!!(!i.side&&s.side);let{aTerminal:l,bTerminal:c}=a?{aTerminal:s,bTerminal:i}:{aTerminal:i,bTerminal:s},u={top:ts(l,c,"top",o),right:ts(l,c,"right",o),bottom:ts(l,c,"bottom",o),left:ts(l,c,"left",o)},d={top:ts(c,l,"top",o),right:ts(c,l,"right",o),bottom:ts(c,l,"bottom",o),left:ts(c,l,"left",o)};const f=fee(u,l.side),h=fee(d,c.side);let g=!1;(!f||!h)&&(g=!0,f||(c=Vb(c)),h||(l=Vb(l)),c.bounds.containsPoint(l.target,o.expandElbowLegLength)&&(c=Vb(c)),l.bounds.containsPoint(c.target,o.expandElbowLegLength)&&(l=Vb(l))),g&&(u={top:ts(l,c,"top",o),right:ts(l,c,"right",o),bottom:ts(l,c,"bottom",o),left:ts(l,c,"left",o)},d={top:ts(c,l,"top",o),right:ts(c,l,"right",o),bottom:ts(c,l,"bottom",o),left:ts(c,l,"left",o)});const y=l.isPoint?l.bounds:l.bounds.clone().expandBy(o.expandElbowLegLength),m=c.isPoint?c.bounds:c.bounds.clone().expandBy(o.expandElbowLegLength),S={original:rt.Common([l.bounds,c.bounds]),expanded:rt.Common([y,m])};let x=c.bounds.minX-l.bounds.maxX;x<0&&(x=l.bounds.minX-c.bounds.maxX,x<0&&(x=0),x=-x);let C=c.bounds.minY-l.bounds.maxY;C<0&&(C=l.bounds.minY-c.bounds.maxY,C<0&&(C=0),C=-C);const E=l.minEndSegmentLength*3,P=c.minEndSegmentLength*3,I=(l.isPoint?E:o.minElbowLegLength)+(c.isPoint?P:o.minElbowLegLength);let T=null;x>I?T={a:l.isPoint?l.bounds.maxX+E:y.maxX,b:c.isPoint?c.bounds.minX-P:m.minX}:x<-I&&(T={a:l.isPoint?l.bounds.minX-E:y.minX,b:c.isPoint?c.bounds.maxX+P:m.maxX});let M=null;C>I?M={a:l.isPoint?l.bounds.maxY+E:y.maxY,b:c.isPoint?c.bounds.minY-P:m.minY}:C<-I&&(M={a:l.isPoint?l.bounds.minY-E:y.minY,b:c.isPoint?c.bounds.maxY+P:m.maxY});const R=a?1-o.elbowMidpoint:o.elbowMidpoint,A=T?Pn(T.a,T.b,R):null,j=M?Pn(M.a,M.b,R):null,N={options:o,swapOrder:a,A:{isPoint:l.isPoint,target:l.target,isExact:l.isExact,arrowheadOffset:l.arrowheadOffset,minEndSegmentLength:l.minEndSegmentLength,original:l.bounds,expanded:y,edges:u,geometry:l.geometry},B:{isPoint:c.isPoint,target:c.target,isExact:c.isExact,arrowheadOffset:c.arrowheadOffset,minEndSegmentLength:c.minEndSegmentLength,original:c.bounds,expanded:m,edges:d,geometry:c.geometry},common:S,gapX:x,gapY:C,midX:A,midY:j},k=new Wct(N),D=hee(l,c,N.A.edges),F=hee(c,l,N.B.edges);let H;return D&&F?H=Xct(k,D,F):D&&!F&&(H=Gct(k,D)),H||(H=Kct(k,D||F?"fallback":"auto")),H&&(pee("first",N.A,N.B,H),pee("last",N.B,N.A,H),eut(H,l,c),a&&H.points.reverse()),{...N,route:H,midXRange:T?a?{lo:T.b,hi:T.a}:{lo:T.a,hi:T.b}:null,midYRange:M?a?{lo:M.b,hi:M.a}:{lo:M.a,hi:M.b}:null}}function Yct(t,e){const n=t.swapOrder?t.B.target:t.A.target,r=t.swapOrder?t.A.target:t.B.target,o=$.ManhattanDist(e.points[0],e.points[1]),i=$.ManhattanDist(e.points[e.points.length-2],e.points[e.points.length-1]),s=$.ManhattanDist(n,e.points[1]),a=$.ManhattanDist(e.points[e.points.length-2],r),l=o-s,c=i-a,u=[n,...e.points,r];return{name:e.name,distance:e.distance+l+c,points:u.filter(d=>!e.skipPointsWhenDrawing.has(d)),aEdgePicking:e.aEdgePicking,bEdgePicking:e.bEdgePicking,skipPointsWhenDrawing:e.skipPointsWhenDrawing,midpointHandle:e.midpointHandle}}function Qct(t){return qa(t.x,.5)&&qa(t.y,.5)?null:Math.abs(t.x-.5)>Math.abs(t.y-.5)-1e-4?t.x<.5?"left":"right":t.y<.5?"top":"bottom"}function dee(t,e,n,r){const o=Ml[e.props.size]*e.props.scale/2,i=o*e.props.scale*3;if(n){const s=t.getShape(n.toId),a=Zct(t,e,n.toId,n.props);if(a&&s){let l=0;const c=n.props.terminal==="start"?"arrowheadStart":"arrowheadEnd";if(e.props[c]!=="none"){const f="scale"in s.props?s.props.scale:1,h="size"in s.props?(Ml[s.props.size]??0)*f/2:0;l=o+h+$x*e.props.scale}let u=null;const d=a.target;return n.props.isPrecise&&(u=Qct($.RotWith(n.props.normalizedAnchor,{x:.5,y:.5},a.shapeToArrowTransform.rotation()))),{targetShapeId:n.toId,isPoint:!1,isExact:n.props.isExact,bounds:a.bounds,geometry:a.geometry,target:d,arrowheadOffset:l,minEndSegmentLength:i,side:u,snap:n.props.snap}}}return{targetShapeId:null,bounds:rt.FromCenter(r,{x:0,y:0}),geometry:null,isExact:!1,isPoint:!0,target:$.From(r),arrowheadOffset:0,minEndSegmentLength:i,side:null,snap:"none"}}function Zct(t,e,n,r){const o=r.terminal==="start"?e.props.arrowheadStart!=="none":e.props.arrowheadEnd!=="none",i=t.getShapeGeometry(n,o?void 0:{context:"@tldraw/arrow-without-arrowhead"});if(!i)return null;const s=t.getShapePageTransform(e.id),a=t.getShapePageTransform(n),l=s.clone().invert().multiply(a),c=i.transform(l),u={x:.5,y:.5},d=r.isPrecise?r.normalizedAnchor:u,f={x:Pn(i.bounds.minX,i.bounds.maxX,d.x),y:Pn(i.bounds.minY,i.bounds.maxY,d.y)},h={x:Pn(i.bounds.minX,i.bounds.maxX,u.x),y:Pn(i.bounds.minY,i.bounds.maxY,u.y)},g=Ke.applyToPoint(l,f),y=Ke.applyToPoint(l,h);return{bounds:c.bounds,geometry:c,target:g,center:y,shapeToArrowTransform:l}}const Jct={top:{expand:-1,main:"minY",opposite:"maxY",crossMid:"midX",crossMin:"minX",crossMax:"maxX",bRangeExpand:"max",crossAxis:"x"},bottom:{expand:1,main:"maxY",opposite:"minY",crossMid:"midX",crossMin:"minX",crossMax:"maxX",bRangeExpand:"min",crossAxis:"x"},left:{expand:-1,main:"minX",opposite:"maxX",crossMid:"midY",crossMin:"minY",crossMax:"maxY",bRangeExpand:"max",crossAxis:"y"},right:{expand:1,main:"maxX",opposite:"minX",crossMid:"midY",crossMin:"minY",crossMax:"maxY",bRangeExpand:"min",crossAxis:"y"}};function ts(t,e,n,r){const o=Jct[n],i=t.targetShapeId===e.targetShapeId&&t.targetShapeId!==null&&(t.snap==="edge"||t.snap==="edge-point")&&(e.snap==="edge"||e.snap==="edge-point"),s=t.bounds[o.main],a=t.isPoint?null:s+o.expand*r.expandElbowLegLength,l=Vj(t.bounds[o.crossMin],t.bounds[o.crossMax]);let c=l;if(!c)return null;nn(l);const u=Vj(e.bounds[o.main],e.bounds[o.opposite]);e.isPoint||(u[o.bRangeExpand]-=r.minElbowLegLength*2*o.expand);const d=zct(Vj(e.bounds[o.crossMin],e.bounds[o.crossMax]),r.expandElbowLegLength);nn(u&&d);let f=!1;if(KI(s,u)&&!t.isPoint&&!e.isPoint&&!i){const g=Bct(c,d);switch(g.length){case 0:return null;case 1:f=g[0]!==c,c=g[0];break;case 2:f=!0,c=lee(g[0])>lee(g[1])?g[0]:g[1];break;default:Jn(g)}}if(!KI(t.target[o.crossAxis],c))return null;const h=t.target[o.crossAxis];return{value:s,expanded:a,cross:c,crossTarget:h,isPartial:f}}function fee(t,e){return e===null?!!(t.bottom||t.left||t.right||t.top):e==="x"?!!t.left||!!t.right:e==="y"?!!t.top||!!t.bottom:!!t[e]}function hee(t,e,n){switch(t.side){case null:return null;case"x":return t.bounds.center.x>e.bounds.center.x&&(n!=null&&n.left)?"left":n!=null&&n.right?"right":null;case"y":return t.bounds.center.y>e.bounds.center.y&&(n!=null&&n.top)?"top":n!=null&&n.bottom?"bottom":null;default:return t.side}}function Vb(t){if(t.isPoint)return t;let e=null,n=0;return(t.snap==="edge"||t.snap==="edge-point")&&(n=t.arrowheadOffset,(t.side==="x"||t.side==="left"||t.side==="right")&&(e="x"),(t.side==="y"||t.side==="top"||t.side==="bottom")&&(e="y")),{targetShapeId:t.targetShapeId,side:e,bounds:new rt(t.target.x,t.target.y,0,0),geometry:t.geometry,target:t.target,arrowheadOffset:n,minEndSegmentLength:t.minEndSegmentLength,isExact:t.isExact,isPoint:!0,snap:t.snap}}function pee(t,e,n,r){if(!e.geometry)return;const o=t==="first"?r.points[0]:r.points[r.points.length-1],i=t==="first"?r.points[1]:r.points[r.points.length-2],s=e.geometry.isClosed?i:e.target,a=$.ManhattanDist(o,s);let l=null,c=1/0;if(e.isExact)l=e.target;else if(e.geometry){const u=e.geometry.intersectLineSegment(i,e.target,{includeLabels:!1,includeInternal:!1});e.geometry.hitTestPoint(e.target,Math.max(1,e.arrowheadOffset),!0,vu.EXCLUDE_NON_STANDARD)&&u.push(e.target);for(const d of u){const f=$.ManhattanDist(s,d);f<c&&(c=f,l=d)}}if(l){let u=e.arrowheadOffset;const d=$.ManhattanDist(i,l),f=e.arrowheadOffset*2;if(d<f){const m=f-e.arrowheadOffset;u=d-m}u<e.minEndSegmentLength&&(e.geometry.bounds.containsPoint(n.target)?u=Math.max(0,u):u=-e.arrowheadOffset);let h=l,g=!1;if(!e.isExact&&u!==0){const m=$.Nudge(l,i,u);h=m,u<0&&!e.geometry.hitTestPoint(m,0,!0,vu.EXCLUDE_NON_STANDARD)?h=l:(u<0&&(g=!0),h=m)}const y=$.ManhattanDist(i,h);if(r.distance+=y-a,o.x=h.x,o.y=h.y,g){const m=$.Lrp(i,o,.5);r.skipPointsWhenDrawing.add(m),r.points.splice(t==="first"?1:r.points.length-1,0,m)}}}function eut(t,e,n){if(t){if(t.points.length>=3){const r=t.points[0],o=t.points[1];if($.ManhattanDist(r,o)<e.minEndSegmentLength&&(t.points.splice(1,1),t.points.length>=3)){const s=qa(r.x,o.x)?"y":"x";t.points[1][s]=r[s]}}if(t.points.length>=3){const r=t.points[t.points.length-1],o=t.points[t.points.length-2];if($.ManhattanDist(r,o)<n.minEndSegmentLength&&(t.points.splice(t.points.length-2,1),t.points.length>=3)){const s=qa(r.x,o.x)?"y":"x";t.points[t.points.length-2][s]=r[s]}}}}function gee(t,e,n){if(!t.geometry||t.geometry.isClosed)return t;const r=t.geometry.uninterpolateAlongEdge(t.target,vu.EXCLUDE_NON_STANDARD),o=t.geometry.interpolateAlongEdge(r-.01/t.geometry.length),s=t.geometry.interpolateAlongEdge(r+.01/t.geometry.length).sub(o).per().uni(),a=Math.abs(s.x)>Math.abs(s.y)?Ax.x:Ax.y;if(t.geometry.bounds.containsPoint(e.target,n.expandElbowLegLength))return t.side=a.self,Vb(t);const l=a.v(t.target[a.self]-t.bounds[a.size]*2,t.target[a.cross]),c=a.v(t.target[a.self]+t.bounds[a.size]*2,t.target[a.cross]);let u=null,d=0,f=null,h=0,g=a.self;for(const y of t.geometry.intersectLineSegment(l,c,vu.EXCLUDE_NON_STANDARD))Math.abs(y[a.self]-t.target[a.self])<1||(y[a.self]<t.target[a.self]?$.ManhattanDist(y,t.target)>d&&(d=$.ManhattanDist(y,t.target),u=y):$.ManhattanDist(y,t.target)>h&&(h=$.ManhattanDist(y,t.target),f=y));return u&&f?d>h?g=a.hiEdge:g=a.loEdge:u&&!f?g=a.hiEdge:!u&&f&&(g=a.loEdge),t.side=g,t}const tut=8;function nut(t){return t.props.kind!=="arc"?!1:Math.abs(t.props.bend)<tut*t.props.scale}function GI(t,e,n){const r=t.getBindingsFromShape(e,"arrow").find(l=>l.props.terminal===n);if(!r)return;const o=t.getShape(r.toId);if(!o)return;const i=t.getShapePageTransform(o),s=n==="start"?e.props.arrowheadStart!=="none":e.props.arrowheadEnd!=="none",a=t.getShapeGeometry(o,s?void 0:{context:"@tldraw/arrow-without-arrowhead"});return{shape:o,transform:i,isClosed:a.isClosed,isExact:r.props.isExact,didIntersect:!1,geometry:a}}function mee(t,e,n,r){const o=t.getShape(n.toId);if(o){const{point:i,size:s}=t.getShapeGeometry(o).bounds,a=$.Add(i,$.MulV(n.props.isPrecise||r?n.props.normalizedAnchor:{x:.5,y:.5},s)),l=Ke.applyToPoint(t.getShapePageTransform(o),a);return Ke.applyToPoint(Ke.Inverse(e),l)}else return new $(0,0)}function si(t,e){const n=t.getBindingsFromShape(e,"arrow");return{start:n.find(r=>r.props.terminal==="start"),end:n.find(r=>r.props.terminal==="end")}}const rut=zM("arrow info",(t,e)=>{const n=si(t,e);if(e.props.kind==="elbow"){const r=e0e(t,e,n);if(!(r!=null&&r.route))return qI(t,e,n);const o=r.swapOrder?r.B:r.A,i=r.swapOrder?r.A:r.B;return{type:"elbow",bindings:n,start:{handle:o.target,point:r.route.points[0],arrowhead:e.props.arrowheadStart},end:{handle:i.target,point:r.route.points[r.route.points.length-1],arrowhead:e.props.arrowheadEnd},elbow:r,route:r.route,isValid:!0}}return nut(e)?qI(t,e,n):Nct(t,e,n)});function Pl(t,e){const n=typeof e=="string"?e:e.id;return rut.get(t,n)}function Bm(t,e,n){var a,l;const r=t.getShapePageTransform(e),o=E6(t,(a=n.start)==null?void 0:a.toId,(l=n.end)==null?void 0:l.toId),i=n.start?mee(t,r,n.start,o==="double-bound"||o==="start-contains-end"):$.From(e.props.start),s=n.end?mee(t,r,n.end,o==="double-bound"||o==="end-contains-start"):$.From(e.props.end);return{start:i,end:s}}function xb(t,e,n,r){const o=typeof e=="string"?e:e.id,i=typeof n=="string"?n:n.id,s=t.getBindingsFromShape(o,"arrow").filter(l=>l.props.terminal===r.terminal);s.length>1&&t.deleteBindings(s.slice(1));const a=s[0];a?t.updateBinding({...a,toId:i,props:r}):t.createBinding({type:"arrow",fromId:o,toId:i,props:r})}function qb(t,e,n){const r=t.getBindingsFromShape(e,"arrow").filter(o=>o.props.terminal===n);t.deleteBindings(r)}const _S=10,$x=10,out=10,Ml={s:2,m:3.5,l:5,xl:10};function E6(t,e,n){if(!e||!n)return"safe";if(e===n)return"double-bound";const r=t.getShapePageBounds(e),o=t.getShapePageBounds(n);if(r&&o){if(r.contains(o))return"start-contains-end";if(o.contains(r))return"end-contains-start"}return"safe"}class RP extends CP{getDefaultProps(){return{isPrecise:!1,isExact:!1,normalizedAnchor:{x:.5,y:.5},snap:"none"}}onAfterCreate({binding:e}){const n=this.editor.getShape(e.fromId);n&&qj(this.editor,n)}onAfterChange({bindingAfter:e}){const n=this.editor.getShape(e.fromId);n&&qj(this.editor,n)}onAfterChangeFromShape({shapeAfter:e}){qj(this.editor,e)}onAfterChangeToShape({binding:e}){t0e(this.editor,e.fromId)}onBeforeIsolateFromShape({binding:e}){const n=this.editor.getShape(e.fromId);n&&XI({editor:this.editor,arrow:n,terminal:e.props.terminal})}}V(RP,"type","arrow"),V(RP,"props",rce),V(RP,"migrations",oce);function t0e(t,e){var m;const n=t.getShape(e);if(!n)return;const r=si(t,n),{start:o,end:i}=r,s=o?t.getShape(o.toId):void 0,a=i?t.getShape(i.toId):void 0,l=t.getAncestorPageId(n);if(!l)return;let c;if(s&&a)c=t.findCommonAncestor([s,a])??l;else if(s||a){const S=(m=s||a)==null?void 0:m.parentId;S&&S===n.parentId?c=n.parentId:c=l}else return;c&&c!==n.parentId&&t.reparentShapes([e],c);const u=t.getShape(e);if(!u)throw Error("no reparented arrow");const d=t.getShapeNearestSibling(u,s),f=t.getShapeNearestSibling(u,a);let h;if(d&&f)h=d.index>f.index?d:f;else if(d&&!f)h=d;else if(f&&!d)h=f;else return;let g;const y=t.getSortedChildIdsForParent(h.parentId).map(S=>t.getShape(S)).filter(S=>S.index>h.index);if(y.length){const S=y.find(x=>x.type!=="arrow");if(u.index>h.index&&(!S||u.index<S.index))return;g=fx(h.index,y[0].index)}else g=cu(h.index);g!==u.index&&t.updateShapes([{id:e,type:"arrow",index:g}])}function qj(t,e){const n=si(t,e);for(const r of["start","end"]){const o=n[r];if(!o)continue;const i=t.getShape(o.toId),s=t.getAncestorPageId(e)===t.getAncestorPageId(i);(!i||!s)&&XI({editor:t,arrow:e,terminal:r,unbind:!0})}t0e(t,e.id)}function XI({editor:t,arrow:e,terminal:n,unbind:r=!1,useHandle:o=!1}){const i=Pl(t,e);if(!i)throw new Error("expected arrow info");const s=o?i.start.handle:i.start.point,a=o?i.end.handle:i.end.point,l=n==="start"?s:a,c={id:e.id,type:"arrow",props:{[n]:{x:l.x,y:l.y},bend:e.props.bend}};if(i.type==="arc"){const u=n==="start"?s:i.start.handle,d=n==="end"?a:i.end.handle,f=$.Med(u,d),h=$.Sub(u,d).per().uni().mul(i.handleArc.radius*2*Math.sign(e.props.bend)),g=_w(i.handleArc.center,$.Add(f,h),i.handleArc.center,i.handleArc.radius);nn((g==null?void 0:g.length)===1);const y=$.Dist(f,g[0])*Math.sign(e.props.bend);qa(y,c.props.bend)||(c.props.bend=y)}t.updateShape(c),r&&qb(t,e,n)}const n0e=[RP],qi={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px"},ei={s:2,m:3.5,l:5,xl:10},Ov={s:18,m:24,l:36,xl:44},wd={s:18,m:22,l:26,xl:32},iut={s:18,m:20,l:24,xl:28},jd={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},sut=20,r0e=4.25,Ns=16;function aut(t,e){const n=t.w/e.w,r=t.h/e.h;return n<=1&&r<=1?t:n>r?{w:t.w/n,h:t.h/n}:{w:t.w/r,h:t.h/r}}async function lut(t,e,n){var S,x,C;const{elements:r,files:o}=e,i={shapes:[],bindings:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},s=new Map,a=new Map,l=t.getCurrentPageId(),c=new Map,u=[],d=new Set;r.forEach(E=>{if(c.set(E.id,Ar()),E.boundElements!==null)for(const P of E.boundElements)P.type==="text"&&d.add(P.id)});let f=Xae;for(const E of r){if(d.has(E.id))continue;const P=c.get(E.id),I={id:P,typeName:"shape",parentId:l,index:f,x:E.x,y:E.y,rotation:0,isLocked:E.locked,opacity:cut(E.opacity),meta:{}};switch(E.angle!==0&&a.set(P,E.angle),E.groupIds&&E.groupIds.length>0?s.has(E.groupIds[0])?(S=s.get(E.groupIds[0]))==null||S.push(P):s.set(E.groupIds[0],[P]):u.push(P),E.type){case"rectangle":case"ellipse":case"diamond":{let T="",M="middle";if(E.boundElements!==null){for(const A of E.boundElements)if(A.type==="text"){const j=r.find(N=>N.id===A.id);j&&(T=j.text,M=mut[j.textAlign])}}const R=E.backgroundColor==="transparent"?E.strokeColor:E.backgroundColor;i.shapes.push({...I,type:"geo",props:{geo:E.type,url:E.link??"",w:E.width,h:E.height,size:AE[E.strokeWidth]??"draw",color:wb[R]??"black",richText:Ll(T),align:M,dash:$E(E),fill:but(E)}});break}case"freedraw":{i.shapes.push({...I,type:"draw",props:{dash:$E(E),size:AE[E.strokeWidth],color:wb[E.strokeColor]??"black",segments:[{type:"free",points:E.points.map(([T,M,R=.5])=>({x:T,y:M,z:R}))}]}});break}case"line":{if(E.points.slice().length<2)break;const M=hx(E.points.length);i.shapes.push({...I,type:"line",props:{dash:$E(E),size:AE[E.strokeWidth],color:wb[E.strokeColor]??"black",spline:E.roundness?"cubic":"line",points:{...Object.fromEntries(E.points.map(([R,A],j)=>{const N=M[j];return[N,{id:N,index:N,x:R,y:A}]}))}}});break}case"arrow":{let T="";if(E.boundElements!==null){for(const N of E.boundElements)if(N.type==="text"){const k=r.find(D=>D.id===N.id);k&&(T=k.text)}}const M=E.points[0],R=E.points[E.points.length-1],A=c.get((x=E.startBinding)==null?void 0:x.elementId),j=c.get((C=E.endBinding)==null?void 0:C.elementId);i.shapes.push({...I,type:"arrow",props:{text:T,kind:E.elbowed?"elbow":"arc",bend:yut(E,M,R),dash:$E(E),size:AE[E.strokeWidth]??"m",color:wb[E.strokeColor]??"black",start:{x:M[0],y:M[1]},end:{x:R[0],y:R[1]},arrowheadEnd:vee[E.endArrowhead]??"none",arrowheadStart:vee[E.startArrowhead]??"none"}}),A&&i.bindings.push({id:Ip(),typeName:"binding",type:"arrow",fromId:P,toId:A,props:{terminal:"start",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}}),j&&i.bindings.push({id:Ip(),typeName:"binding",type:"arrow",fromId:P,toId:j,props:{terminal:"end",normalizedAnchor:{x:.5,y:.5},isPrecise:!1,isExact:!1},meta:{}});break}case"text":{const{size:T,scale:M}=dut(E.fontSize);i.shapes.push({...I,type:"text",props:{size:T,scale:M,font:fut[E.fontFamily]??"draw",color:wb[E.strokeColor]??"black",richText:Ll(E.text),textAlign:vut[E.textAlign]}});break}case"image":{const T=o[E.fileId];if(!T)break;const M=nh.createId();i.assets.push({id:M,typeName:"asset",type:"image",props:{w:E.width,h:E.height,fileSize:T.size,name:E.id??"Untitled",isAnimated:!1,mimeType:T.mimeType,src:T.dataURL},meta:{}}),i.shapes.push({...I,type:"image",props:{w:E.width,h:E.height,assetId:M}})}}f=cu(f)}const h=n??(t.inputs.shiftKey?t.inputs.currentPagePoint:void 0);t.putContentOntoCurrentPage(i,{point:h,select:!1,preserveIds:!0});for(const E of s.values())if(E.length>1){t.groupShapes(E);const P=t.getShape(E[0]);P!=null&&P.parentId&&fa(P.parentId)&&u.push(P.parentId)}for(const[E,P]of a)t.select(E),t.rotateShapesBy([E],P);const g=Tn(u.map(E=>t.getShape(E))),y=rt.Common(g.map(E=>t.getShapePageBounds(E))),m=t.getViewportPageBounds().center;t.updateShapes(g.map(E=>{const P={x:(E.x??0)-(y.x+y.w/2),y:(E.y??0)-(y.y+y.h/2)};return{id:E.id,type:E.type,x:m.x+P.x,y:m.y+P.y}})),t.setSelectedShapes(u)}const cut=t=>{const e=t/100;return e<.2?.1:e<.4?.25:e<.6?.5:e<.8?.75:1},AE={1:"s",2:"m",3:"l",4:"xl"},uut={16:"s",20:"m",28:"l",36:"xl"};function dut(t){const e=uut[t];return e?{size:e,scale:1}:t<16?{size:"s",scale:t/16}:t>36?{size:"xl",scale:t/36}:{size:"m",scale:1}}const fut={1:"draw",2:"sans",3:"mono"},hut={gray:["#f8f9fa","#e9ecef","#ced4da","#868e96","#343a40"],red:["#fff5f5","#ffc9c9","#ff8787","#fa5252","#e03131"],pink:["#fff0f6","#fcc2d7","#f783ac","#e64980","#c2255c"],grape:["#f8f0fc","#eebefa","#da77f2","#be4bdb","#9c36b5"],violet:["#f3f0ff","#d0bfff","#9775fa","#7950f2","#6741d9"],indigo:["#edf2ff","#bac8ff","#748ffc","#4c6ef5","#3b5bdb"],blue:["#e7f5ff","#a5d8ff","#4dabf7","#228be6","#1971c2"],cyan:["#e3fafc","#99e9f2","#3bc9db","#15aabf","#0c8599"],teal:["#e6fcf5","#96f2d7","#38d9a9","#12b886","#099268"],green:["#ebfbee","#b2f2bb","#69db7c","#40c057","#2f9e44"],lime:["#f4fce3","#d8f5a2","#a9e34b","#82c91e","#66a80f"],yellow:["#fff9db","#ffec99","#ffd43b","#fab005","#f08c00"],orange:["#fff4e6","#ffd8a8","#ffa94d","#fd7e14","#e8590c"]};function eu(t,e,n){const r=[0,1,2,3,4].map(o=>hut[t][o]);return Object.fromEntries(r.map((o,i)=>[o,i<3?e:n]))}const wb={...eu("gray","grey","black"),...eu("red","light-red","red"),...eu("pink","light-red","red"),...eu("grape","light-violet","violet"),...eu("blue","light-blue","blue"),...eu("cyan","light-blue","blue"),...eu("teal","light-green","green"),...eu("green","light-green","green"),...eu("yellow","yellow","orange"),...eu("orange","yellow","orange"),"#ffffff":"white","#000000":"black"},put={solid:"draw",dashed:"dashed",dotted:"dotted"},gut={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},mut={left:"start",center:"middle",right:"end"},vut={left:"start",center:"middle",right:"end"},vee={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function yut(t,e,n){let r=0;if(t.points.length>2){const o=new $(e[0],e[1]),i=new $(n[0],n[1]),s=new $(t.points[1][0],t.points[1][1]),a=$.Sub(i,o),l=$.Per(a),c=$.Med(i,o),u=$.Sub(c,l),d=$.Add(c,l),f=$.NearestPointOnLineSegment(u,d,s,!1);r=$.Dist(f,c),$.Clockwise(f,i,c)&&(r*=-1)}return r}const $E=t=>{let e=put[t.strokeStyle]??"draw";return e==="draw"&&t.roughness===0&&(e="solid"),e},but=t=>t.backgroundColor==="transparent"?"none":gut[t.fillStyle]??"solid",Sut=/(^|[^`])`([^`]+)`(?!`)/,xut=/(^|[^`])`([^`]+)`(?!`)/g,o0e=Tu.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rg({find:Sut,type:this.type})]},addPasteRules(){return[ih({find:xut,type:this.type})]}}),wut=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Cut=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,i0e=Tu.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[rg({find:wut,type:this.type})]},addPasteRules(){return[ih({find:Cut,type:this.type})]}}),Eut="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Put="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Rv=(t,e)=>{for(const n in e)t[n]=e[n];return t},g3="numeric",m3="ascii",v3="alpha",IS="asciinumeric",Kb="alphanumeric",y3="domain",s0e="emoji",_ut="scheme",Iut="slashscheme",Kj="whitespace";function Tut(t,e){return t in e||(e[t]=[]),e[t]}function bp(t,e,n){e[g3]&&(e[IS]=!0,e[Kb]=!0),e[m3]&&(e[IS]=!0,e[v3]=!0),e[IS]&&(e[Kb]=!0),e[v3]&&(e[Kb]=!0),e[Kb]&&(e[y3]=!0),e[s0e]&&(e[y3]=!0);for(const r in e){const o=Tut(r,n);o.indexOf(t)<0&&o.push(t)}}function Mut(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ga(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ga.groups={};ga.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],i=e.jr[r][1];if(i&&o.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||ga.groups;let o;return e&&e.j?o=e:(o=new ga(e),n&&r&&bp(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const i=t.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(t[s]);return o.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||ga.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const i=e;let s,a=o.go(t);if(a?(s=new ga,Rv(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new ga,i){if(r)if(s.t&&typeof s.t=="string"){const l=Rv(Mut(s.t,r),n);bp(i,l,r)}else n&&bp(i,n,r);s.t=i}return o.j[t]=s,s}};const Bn=(t,e,n,r,o)=>t.ta(e,n,r,o),To=(t,e,n,r,o)=>t.tr(e,n,r,o),yee=(t,e,n,r,o)=>t.ts(e,n,r,o),dt=(t,e,n,r,o)=>t.tt(e,n,r,o),ad="WORD",b3="UWORD",a0e="ASCIINUMERICAL",l0e="ALPHANUMERICAL",Dx="LOCALHOST",S3="TLD",x3="UTLD",kP="SCHEME",_m="SLASH_SCHEME",P6="NUM",w3="WS",_6="NL",TS="OPENBRACE",MS="CLOSEBRACE",YI="OPENBRACKET",QI="CLOSEBRACKET",ZI="OPENPAREN",JI="CLOSEPAREN",eT="OPENANGLEBRACKET",tT="CLOSEANGLEBRACKET",nT="FULLWIDTHLEFTPAREN",rT="FULLWIDTHRIGHTPAREN",oT="LEFTCORNERBRACKET",iT="RIGHTCORNERBRACKET",sT="LEFTWHITECORNERBRACKET",aT="RIGHTWHITECORNERBRACKET",lT="FULLWIDTHLESSTHAN",cT="FULLWIDTHGREATERTHAN",uT="AMPERSAND",dT="APOSTROPHE",fT="ASTERISK",Pf="AT",hT="BACKSLASH",pT="BACKTICK",gT="CARET",Mf="COLON",I6="COMMA",mT="DOLLAR",ru="DOT",vT="EQUALS",T6="EXCLAMATION",yl="HYPHEN",OS="PERCENT",yT="PIPE",bT="PLUS",ST="POUND",RS="QUERY",M6="QUOTE",c0e="FULLWIDTHMIDDLEDOT",O6="SEMI",ou="SLASH",kS="TILDE",xT="UNDERSCORE",u0e="EMOJI",wT="SYM";var d0e=Object.freeze({__proto__:null,ALPHANUMERICAL:l0e,AMPERSAND:uT,APOSTROPHE:dT,ASCIINUMERICAL:a0e,ASTERISK:fT,AT:Pf,BACKSLASH:hT,BACKTICK:pT,CARET:gT,CLOSEANGLEBRACKET:tT,CLOSEBRACE:MS,CLOSEBRACKET:QI,CLOSEPAREN:JI,COLON:Mf,COMMA:I6,DOLLAR:mT,DOT:ru,EMOJI:u0e,EQUALS:vT,EXCLAMATION:T6,FULLWIDTHGREATERTHAN:cT,FULLWIDTHLEFTPAREN:nT,FULLWIDTHLESSTHAN:lT,FULLWIDTHMIDDLEDOT:c0e,FULLWIDTHRIGHTPAREN:rT,HYPHEN:yl,LEFTCORNERBRACKET:oT,LEFTWHITECORNERBRACKET:sT,LOCALHOST:Dx,NL:_6,NUM:P6,OPENANGLEBRACKET:eT,OPENBRACE:TS,OPENBRACKET:YI,OPENPAREN:ZI,PERCENT:OS,PIPE:yT,PLUS:bT,POUND:ST,QUERY:RS,QUOTE:M6,RIGHTCORNERBRACKET:iT,RIGHTWHITECORNERBRACKET:aT,SCHEME:kP,SEMI:O6,SLASH:ou,SLASH_SCHEME:_m,SYM:wT,TILDE:kS,TLD:S3,UNDERSCORE:xT,UTLD:x3,UWORD:b3,WORD:ad,WS:w3});const nd=/[a-z]/,Cb=new RegExp("\\p{L}","u"),Gj=new RegExp("\\p{Emoji}","u"),rd=/\d/,Xj=/\s/,bee="\r",Yj=`
`,Out="",Rut="",Qj="";let DE=null,jE=null;function kut(t=[]){const e={};ga.groups=e;const n=new ga;DE==null&&(DE=See(Eut)),jE==null&&(jE=See(Put)),dt(n,"'",dT),dt(n,"{",TS),dt(n,"}",MS),dt(n,"[",YI),dt(n,"]",QI),dt(n,"(",ZI),dt(n,")",JI),dt(n,"<",eT),dt(n,">",tT),dt(n,"",nT),dt(n,"",rT),dt(n,"",oT),dt(n,"",iT),dt(n,"",sT),dt(n,"",aT),dt(n,"",lT),dt(n,"",cT),dt(n,"&",uT),dt(n,"*",fT),dt(n,"@",Pf),dt(n,"`",pT),dt(n,"^",gT),dt(n,":",Mf),dt(n,",",I6),dt(n,"$",mT),dt(n,".",ru),dt(n,"=",vT),dt(n,"!",T6),dt(n,"-",yl),dt(n,"%",OS),dt(n,"|",yT),dt(n,"+",bT),dt(n,"#",ST),dt(n,"?",RS),dt(n,'"',M6),dt(n,"/",ou),dt(n,";",O6),dt(n,"~",kS),dt(n,"_",xT),dt(n,"\\",hT),dt(n,"",c0e);const r=To(n,rd,P6,{[g3]:!0});To(r,rd,r);const o=To(r,nd,a0e,{[IS]:!0}),i=To(r,Cb,l0e,{[Kb]:!0}),s=To(n,nd,ad,{[m3]:!0});To(s,rd,o),To(s,nd,s),To(o,rd,o),To(o,nd,o);const a=To(n,Cb,b3,{[v3]:!0});To(a,nd),To(a,rd,i),To(a,Cb,a),To(i,rd,i),To(i,nd),To(i,Cb,i);const l=dt(n,Yj,_6,{[Kj]:!0}),c=dt(n,bee,w3,{[Kj]:!0}),u=To(n,Xj,w3,{[Kj]:!0});dt(n,Qj,u),dt(c,Yj,l),dt(c,Qj,u),To(c,Xj,u),dt(u,bee),dt(u,Yj),To(u,Xj,u),dt(u,Qj,u);const d=To(n,Gj,u0e,{[s0e]:!0});dt(d,"#"),To(d,Gj,d),dt(d,Out,d);const f=dt(d,Rut);dt(f,"#"),To(f,Gj,d);const h=[[nd,s],[rd,o]],g=[[nd,null],[Cb,a],[rd,i]];for(let y=0;y<DE.length;y++)pf(n,DE[y],S3,ad,h);for(let y=0;y<jE.length;y++)pf(n,jE[y],x3,b3,g);bp(S3,{tld:!0,ascii:!0},e),bp(x3,{utld:!0,alpha:!0},e),pf(n,"file",kP,ad,h),pf(n,"mailto",kP,ad,h),pf(n,"http",_m,ad,h),pf(n,"https",_m,ad,h),pf(n,"ftp",_m,ad,h),pf(n,"ftps",_m,ad,h),bp(kP,{scheme:!0,ascii:!0},e),bp(_m,{slashscheme:!0,ascii:!0},e),t=t.sort((y,m)=>y[0]>m[0]?1:-1);for(let y=0;y<t.length;y++){const m=t[y][0],x=t[y][1]?{[_ut]:!0}:{[Iut]:!0};m.indexOf("-")>=0?x[y3]=!0:nd.test(m)?rd.test(m)?x[IS]=!0:x[m3]=!0:x[g3]=!0,yee(n,m,m,x)}return yee(n,"localhost",Dx,{ascii:!0}),n.jd=new ga(wT),{start:n,tokens:Rv({groups:e},d0e)}}function f0e(t,e){const n=Aut(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[s].length,f++),c+=n[s].length,i+=n[s].length,s++;i-=d,s-=f,c-=d,o.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return o}function Aut(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function pf(t,e,n,r,o){let i;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new ga(r),i.jr=o.slice(),t.j[l]=i),t=i}return i=new ga(n),i.jr=o.slice(),t.j[e[s-1]]=i,i}function See(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let i=0;for(;o.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(t[r]),r++}return e}const jx={defaultProtocol:"http",events:null,format:xee,formatHref:xee,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function R6(t,e=null){let n=Rv({},jx);t&&(n=Rv(n,t instanceof R6?t.o:t));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}R6.prototype={o:jx,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:jx[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function xee(t){return t}function h0e(t,e){this.t="token",this.v=t,this.tk=e}h0e.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=jx.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),u&&Rv(s,u),{tagName:o,attributes:s,content:i,eventListeners:d}}};function Q2(t,e){class n extends h0e{constructor(o,i){super(o,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const wee=Q2("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Cee=Q2("text"),$ut=Q2("nl"),LE=Q2("url",{isLink:!0,toHref(t=jx.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Dx&&t[1].t===Mf}}),vl=t=>new ga(t);function Dut({groups:t}){const e=t.domain.concat([uT,fT,Pf,hT,pT,gT,mT,vT,yl,P6,OS,yT,bT,ST,ou,wT,kS,xT]),n=[dT,Mf,I6,ru,T6,OS,RS,M6,O6,eT,tT,TS,MS,QI,YI,ZI,JI,nT,rT,oT,iT,sT,aT,lT,cT],r=[uT,dT,fT,hT,pT,gT,mT,vT,yl,TS,MS,OS,yT,bT,ST,RS,ou,wT,kS,xT],o=vl(),i=dt(o,kS);Bn(i,r,i),Bn(i,t.domain,i);const s=vl(),a=vl(),l=vl();Bn(o,t.domain,s),Bn(o,t.scheme,a),Bn(o,t.slashscheme,l),Bn(s,r,i),Bn(s,t.domain,s);const c=dt(s,Pf);dt(i,Pf,c),dt(a,Pf,c),dt(l,Pf,c);const u=dt(i,ru);Bn(u,r,i),Bn(u,t.domain,i);const d=vl();Bn(c,t.domain,d),Bn(d,t.domain,d);const f=dt(d,ru);Bn(f,t.domain,d);const h=vl(wee);Bn(f,t.tld,h),Bn(f,t.utld,h),dt(c,Dx,h);const g=dt(d,yl);dt(g,yl,g),Bn(g,t.domain,d),Bn(h,t.domain,d),dt(h,ru,f),dt(h,yl,g);const y=dt(h,Mf);Bn(y,t.numeric,wee);const m=dt(s,yl),S=dt(s,ru);dt(m,yl,m),Bn(m,t.domain,s),Bn(S,r,i),Bn(S,t.domain,s);const x=vl(LE);Bn(S,t.tld,x),Bn(S,t.utld,x),Bn(x,t.domain,s),Bn(x,r,i),dt(x,ru,S),dt(x,yl,m),dt(x,Pf,c);const C=dt(x,Mf),E=vl(LE);Bn(C,t.numeric,E);const P=vl(LE),I=vl();Bn(P,e,P),Bn(P,n,I),Bn(I,e,P),Bn(I,n,I),dt(x,ou,P),dt(E,ou,P);const T=dt(a,Mf),M=dt(l,Mf),R=dt(M,ou),A=dt(R,ou);Bn(a,t.domain,s),dt(a,ru,S),dt(a,yl,m),Bn(l,t.domain,s),dt(l,ru,S),dt(l,yl,m),Bn(T,t.domain,P),dt(T,ou,P),dt(T,RS,P),Bn(A,t.domain,P),Bn(A,e,P),dt(A,ou,P);const j=[[TS,MS],[YI,QI],[ZI,JI],[eT,tT],[nT,rT],[oT,iT],[sT,aT],[lT,cT]];for(let N=0;N<j.length;N++){const[k,D]=j[N],F=dt(P,k);dt(I,k,F),dt(F,D,P);const H=vl(LE);Bn(F,e,H);const U=vl();Bn(F,n),Bn(H,e,H),Bn(H,n,U),Bn(U,e,H),Bn(U,n,U),dt(H,D,P),dt(U,D,P)}return dt(o,Dx,x),dt(o,_6,$ut),{start:o,tokens:d0e}}function jut(t,e,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,o++,u++;if(f<0)o-=u,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(Zj(Cee,e,s)),s=[]),o-=f,u-=f;const h=d.t,g=n.slice(o-u,o);i.push(Zj(h,e,g))}}return s.length>0&&i.push(Zj(Cee,e,s)),i}function Zj(t,e,n){const r=n[0].s,o=n[n.length-1].e,i=e.slice(r,o);return new t(i,n)}const Lut=typeof console<"u"&&console&&console.warn||(()=>{}),Nut="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",eo={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Fut(){return ga.groups={},eo.scanner=null,eo.parser=null,eo.tokenQueue=[],eo.pluginQueue=[],eo.customSchemes=[],eo.initialized=!1,eo}function Eee(t,e=!1){if(eo.initialized&&Lut(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Nut}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);eo.customSchemes.push([t,e])}function zut(){eo.scanner=kut(eo.customSchemes);for(let t=0;t<eo.tokenQueue.length;t++)eo.tokenQueue[t][1]({scanner:eo.scanner});eo.parser=Dut(eo.scanner.tokens);for(let t=0;t<eo.pluginQueue.length;t++)eo.pluginQueue[t][1]({scanner:eo.scanner,parser:eo.parser});return eo.initialized=!0,eo}function k6(t){return eo.initialized||zut(),jut(eo.parser.start,t,f0e(eo.scanner.start,t))}k6.scan=f0e;function p0e(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new R6(n),o=k6(t),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}function But(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Hut(t){return new Xi({key:new rl("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=ytt(n.doc,[...e]);if(Ttt(a).forEach(({newRange:c})=>{const u=Stt(r.doc,c,h=>h.isTextblock);let d,f;if(u.length>1?(d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&f){const h=f.split(" ").filter(S=>S!=="");if(h.length<=0)return!1;const g=h[h.length-1],y=d.pos+f.lastIndexOf(g);if(!g)return!1;const m=k6(g).map(S=>S.toObject(t.defaultProtocol));if(!But(m))return!1;m.filter(S=>S.isLink).map(S=>({...S,from:y+S.start+1,to:y+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>t.validate(S.value)).filter(S=>t.shouldAutoLink(S.value)).forEach(S=>{y4(S.from,S.to,r.doc).some(x=>x.mark.type===t.type)||s.addMark(S.from,S.to,t.type.create({href:S.href}))})}}),!!s.steps.length)return s}})}function Uut(t){return new Xi({key:new rl("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,i;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(f=>f.nodeName==="A"))return!1;const l=Sge(e.state,t.type.name),c=r.target,u=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,d=(i=c==null?void 0:c.target)!==null&&i!==void 0?i:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function Wut(t){return new Xi({key:new rl("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=p0e(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const Vut=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function rp(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(Vut,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const qut=Tu.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Eee(t);return}Eee(t.scheme,t.optionalSlashes)})},onDestroy(){Fut()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!rp(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!rp(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!rp(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Pi(this.options.HTMLAttributes,t),0]:["a",Pi(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!rp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!rp(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ih({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=p0e(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!rp(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Hut({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!rp(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Uut({type:this.type})),this.options.linkOnPaste&&t.push(Wut({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Kut=/^\s*>\s$/,Gut=Fc.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[_x({find:Kut,type:this.type})]}}),Xut=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Yut=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Qut=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Zut=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Jut=Tu.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rg({find:Xut,type:this.type}),rg({find:Qut,type:this.type})]},addPasteRules(){return[ih({find:Yut,type:this.type}),ih({find:Zut,type:this.type})]}}),edt="listItem",Pee="textStyle",_ee=/^\s*([-+*])\s$/,tdt=Fc.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(edt,this.editor.getAttributes(Pee)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=_x({find:_ee,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=_x({find:_ee,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Pee),editor:this.editor})),[t]}}),ndt=/^```([a-z]+)?[\s\n]$/,rdt=/^~~~([a-z]+)?[\s\n]$/,odt=Fc.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,i=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(n)).map(s=>s.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Pi(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:i}=n;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(zn.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[KF({find:ndt,type:this.type,getAttributes:t=>({language:t[1]})}),KF({find:rdt,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Xi({key:new rl("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!n||!i)return!1;const{tr:s,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(Mn.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),t.dispatch(s),!0}}})]}}),idt=Fc.create({name:"doc",topNode:!0,content:"block+"});function sdt(t={}){return new Xi({view(e){return new adt(e,t)}})}class adt{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let g=h.getBoundingClientRect(),y=d?g.bottom:g.top;d&&f&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let m=this.width/2*a;r={left:g.left,right:g.right,top:y-m,bottom:y+m}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*s;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,h=d.height/l.offsetHeight;c=d.left-l.scrollLeft*f,u=d.top-l.scrollTop*h}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=lpe(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const ldt=Ki.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[sdt(this.options)]}});class Oo extends zn{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Oo.valid(r)?new Oo(r):zn.near(r)}content(){return At.empty}eq(e){return e instanceof Oo&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Oo(e.resolve(n.pos))}getBookmark(){return new A6(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!cdt(e)||!udt(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Oo.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(Oo.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!cn.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(Oo.valid(a))return a}return null}}}Oo.prototype.visible=!1;Oo.findFrom=Oo.findGapCursorFrom;zn.jsonID("gapcursor",Oo);class A6{constructor(e){this.pos=e}map(e){return new A6(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Oo.valid(n)?new Oo(n):zn.near(n)}}function cdt(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function udt(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function ddt(){return new Xi({props:{decorations:gdt,createSelectionBetween(t,e,n){return e.pos==n.pos&&Oo.valid(n)?new Oo(n):null},handleClick:hdt,handleKeyDown:fdt,handleDOMEvents:{beforeinput:pdt}}})}const fdt=Ype({ArrowLeft:NE("horiz",-1),ArrowRight:NE("horiz",1),ArrowUp:NE("vert",-1),ArrowDown:NE("vert",1)});function NE(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof Mn){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Oo.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Oo(c))),!0):!1}}function hdt(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Oo.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&cn.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Oo(r))),!0)}function pdt(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Oo))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=tt.empty;for(let s=r.length-1;s>=0;s--)o=tt.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new At(o,0,0));return i.setSelection(Mn.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function gdt(t){if(!(t.selection instanceof Oo))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ii.create(t.doc,[Tl.widget(t.selection.head,e,{key:"gapcursor"})])}const mdt=Ki.create({name:"gapCursor",addProseMirrorPlugins(){return[ddt()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=qn(Ut(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),vdt=Fc.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Pi(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:i}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),ydt=Fc.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Pi(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>KF({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var CT=200,Ci=function(){};Ci.prototype.append=function(e){return e.length?(e=Ci.from(e),!this.length&&e||e.length<CT&&this.leafAppend(e)||this.length<CT&&e.leafPrepend(this)||this.appendInner(e)):this};Ci.prototype.prepend=function(e){return e.length?Ci.from(e).append(this):this};Ci.prototype.appendInner=function(e){return new bdt(this,e)};Ci.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ci.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ci.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ci.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ci.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};Ci.from=function(e){return e instanceof Ci?e:e&&e.length?new g0e(e):Ci.empty};var g0e=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=CT)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=CT)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ci);Ci.empty=new g0e([]);var bdt=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ci);const Sdt=500;class hc{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){o||(o=this.remapping(r,f+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new iu(d.map));let h=d.step.map(o.slice(i)),g;h&&s.maybeStep(h).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new iu(g,void 0,void 0,c.length+u.length))),i--,g&&o.appendMap(g,i)}else s.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(i)):d.selection,l=new hc(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new iu(e.mapping.maps[u],d,n),h;(h=l&&l.merge(f))&&(f=h,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(s++,n=void 0),o||(l=f)}let c=s-r.depth;return c>wdt&&(a=xdt(a,c),s-=c),new hc(a.append(i),s)}remapping(e,n){let r=new Sx;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new hc(this.items.append(e.map(n=>new iu(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},o);let l=n;this.items.forEach(f=>{let h=i.getMirror(--l);if(h==null)return;s=Math.min(s,h);let g=i.maps[h];if(f.step){let y=e.steps[h].invert(e.docs[h]),m=f.selection&&f.selection.map(i.slice(l+1,h));m&&a++,r.push(new iu(g,y,m))}else r.push(new iu(g))},o);let c=[];for(let f=n;f<s;f++)c.push(new iu(i.maps[f]));let u=this.items.slice(0,o).append(c).append(r),d=new hc(u,a);return d.emptyItemCount()>Sdt&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=s.selection&&s.selection.map(n.slice(r));u&&i++;let d=new iu(c.invert(),l,u),f,h=o.length-1;(f=o.length&&o[h].merge(d))?o[h]=f:o.push(d)}}else s.map&&r--},this.items.length,0),new hc(Ci.from(o.reverse()),i)}}hc.empty=new hc(Ci.empty,0);function xdt(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class iu{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new iu(n.getMap().invert(),n,this.selection)}}}class _f{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const wdt=20;function Cdt(t,e,n,r){let o=n.getMeta(Ap),i;if(o)return o.historyState;n.getMeta(_dt)&&(t=new _f(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Ap))return s.getMeta(Ap).redo?new _f(t.done.addTransform(n,void 0,r,AP(e)),t.undone,Iee(n.mapping.maps),t.prevTime,t.prevComposition):new _f(t.done,t.undone.addTransform(n,void 0,r,AP(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Edt(n,t.prevRanges)),c=s?Jj(t.prevRanges,n.mapping):Iee(n.mapping.maps);return new _f(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,AP(e)),hc.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new _f(t.done.rebased(n,i),t.undone.rebased(n,i),Jj(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new _f(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Jj(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Edt(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function Iee(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function Jj(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function Pdt(t,e,n){let r=AP(e),o=Ap.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new _f(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Ap,{redo:n,historyState:l})}let eL=!1,Tee=null;function AP(t){let e=t.plugins;if(Tee!=e){eL=!1,Tee=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){eL=!0;break}}return eL}const Ap=new rl("history"),_dt=new rl("closeHistory");function Idt(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Xi({key:Ap,state:{init(){return new _f(hc.empty,hc.empty,null,0,-1)},apply(e,n,r){return Cdt(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?v0e:r=="historyRedo"?y0e:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function m0e(t,e){return(n,r)=>{let o=Ap.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=Pdt(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const v0e=m0e(!1,!0),y0e=m0e(!0,!0),Tdt=Ki.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>v0e(t,e),redo:()=>({state:t,dispatch:e})=>y0e(t,e)}},addProseMirrorPlugins(){return[Idt(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Mdt=Fc.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Pi(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:o}=n,i=t();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):Ott(n)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(Mn.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(cn.create(s.doc,c.pos)):s.setSelection(Mn.create(s.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(s.insert(u,d),s.setSelection(Mn.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[lnt({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Odt=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Rdt=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,kdt=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Adt=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$dt=Tu.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rg({find:Odt,type:this.type}),rg({find:kdt,type:this.type})]},addPasteRules(){return[ih({find:Rdt,type:this.type}),ih({find:Adt,type:this.type})]}}),Ddt=Fc.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Pi(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),jdt="listItem",Mee="textStyle",Oee=/^(\d+)\.\s$/,Ldt=Fc.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Pi(this.options.HTMLAttributes,n),0]:["ol",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jdt,this.editor.getAttributes(Mee)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=_x({find:Oee,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=_x({find:Oee,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Mee)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Ndt=Fc.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Fdt=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,zdt=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Bdt=Tu.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Pi(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rg({find:Fdt,type:this.type})]},addPasteRules(){return[ih({find:zdt,type:this.type})]}}),Hdt=Fc.create({name:"text",group:"inline"}),Udt=Ki.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(Jut.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(Gut.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(tdt.configure(this.options.bulletList)),this.options.code!==!1&&t.push(o0e.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(odt.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(idt.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(ldt.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(mdt.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(vdt.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(ydt.configure(this.options.heading)),this.options.history!==!1&&t.push(Tdt.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(Mdt.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push($dt.configure(this.options.italic)),this.options.listItem!==!1&&t.push(Ddt.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(Ldt.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(Ndt.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(Bdt.configure(this.options.strike)),this.options.text!==!1&&t.push(Hdt.configure(this.options.text)),t}}),$6={tldraw_draw:{normal:{normal:{family:"tldraw_draw",src:{url:"tldraw_draw",format:"woff2"},weight:"normal"},bold:{family:"tldraw_draw",src:{url:"tldraw_draw_bold",format:"woff2"},weight:"bold"}},italic:{normal:{family:"tldraw_draw",src:{url:"tldraw_draw_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_draw",src:{url:"tldraw_draw_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}},tldraw_sans:{normal:{normal:{family:"tldraw_sans",src:{url:"tldraw_sans",format:"woff2"},weight:"normal",style:"normal"},bold:{family:"tldraw_sans",src:{url:"tldraw_sans_bold",format:"woff2"},weight:"bold",style:"normal"}},italic:{normal:{family:"tldraw_sans",src:{url:"tldraw_sans_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_sans",src:{url:"tldraw_sans_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}},tldraw_serif:{normal:{normal:{family:"tldraw_serif",src:{url:"tldraw_serif",format:"woff2"},weight:"normal",style:"normal"},bold:{family:"tldraw_serif",src:{url:"tldraw_serif_bold",format:"woff2"},weight:"bold",style:"normal"}},italic:{normal:{family:"tldraw_serif",src:{url:"tldraw_serif_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_serif",src:{url:"tldraw_serif_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}},tldraw_mono:{normal:{normal:{family:"tldraw_mono",src:{url:"tldraw_mono",format:"woff2"},weight:"normal",style:"normal"},bold:{family:"tldraw_mono",src:{url:"tldraw_mono_bold",format:"woff2"},weight:"bold",style:"normal"}},italic:{normal:{family:"tldraw_mono",src:{url:"tldraw_mono_italic",format:"woff2"},weight:"normal",style:"italic"},bold:{family:"tldraw_mono",src:{url:"tldraw_mono_italic_bold",format:"woff2"},weight:"bold",style:"italic"}}}},Wdt=Mo($6).flatMap(t=>Mo(t).flatMap(e=>Object.values(e))),Vdt=Ki.create({name:"textDirection",addGlobalAttributes(){return[{types:["heading","paragraph"],attributes:{dir:{default:"auto",parseHTML:t=>{const e=t.getAttribute("dir");return e&&["ltr","rtl","auto"].includes(e)?e:"auto"},renderHTML:t=>({dir:t.dir})}}}]}}),qdt=Ki.create({name:"keyboardShiftEnterHandler",addKeyboardShortcuts(){return{"Shift-Enter":({editor:t})=>t.commands.enter()}}});o0e.config.excludes=void 0;i0e.config.priority=1100;const Gw=[Udt.configure({blockquote:!1,codeBlock:!1,horizontalRule:!1}),qut.configure({openOnClick:!1,autolink:!0}),i0e,qdt,Vdt];function D6(t,e){var o;const n=((o=t.getTextOptions().tipTapConfig)==null?void 0:o.extensions)??Gw;return wtt(e,n).replaceAll('<p dir="auto"></p>',"<p><br /></p>")??""}function ET(t,e){return`<div class="tl-rich-text">${D6(t,e)}</div>`}const Kdt=new Hl;function dc(t){return t.content.length===1&&!t.content[0].content}function sg(t,e){return dc(e)?"":Kdt.get(e,()=>{var r;const n=((r=t.getTextOptions().tipTapConfig)==null?void 0:r.extensions)??Gw;return Ett(e,n,{blockSeparator:`
`})})}function Gdt(t,e){var r;const n=((r=t.getTextOptions().tipTapConfig)==null?void 0:r.extensions)??Gw;return Ctt(e,n)}function b0e(t,e,n){for(const s of t.marks)s.type.name==="bold"&&e.weight!=="bold"&&(e={...e,weight:"bold"}),s.type.name==="italic"&&e.style!=="italic"&&(e={...e,style:"italic"}),s.type.name==="code"&&e.family!=="tldraw_mono"&&(e={...e,family:"tldraw_mono"});const r=Uo($6,e.family);if(!r)return e;const o=Uo(r,e.style);if(!o)return e;const i=Uo(o,e.weight);return i&&n(i),e}const Xdt="  ",jS=class jS{static normalizeText(e){return e.replace(jS.fixNewLines,`
`)}static normalizeTextForDom(e){return e.replace(jS.fixNewLines,`
`).split(`
`).map(n=>n||" ").join(`
`)}};V(jS,"fixNewLines",/\r?\n|\r/g);let PT=jS;const Ydt=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function S0e(t){return Ydt.test(t)}function Qdt(t){return t.replace(/\t/g,Xdt)}function Zdt(t){const e=t.split(`
`);for(;e[0]&&e[0].trim().length===0;)e.shift();let n=1/0;for(const r of e)if(r.trim().length>0){const o=r.length-r.trimStart().length;n=Math.min(n,o)}return e.map(r=>r.slice(n)).join(`
`)}const x0e={"&amp;":"&","&quot;":'"',"&apos;":"'","&#27;":"'","&#34;":'"',"&#38;":"&","&#39;":"'","&#8211;":"","&#8212;":"","&#8216;":"","&#8217;":"","&#8220;":"","&#8221;":"","&#8230;":""},Jdt=new RegExp(Object.keys(x0e).join("|"),"g");function w0e(t){return t.replace(Jdt,e=>x0e[e])}function eft(t){return t.replace(/[ \t]+$/gm,"").replace(/\n+$/,"")}function tft(t){return eft(Zdt(Qdt(t)))}const C0e=5e3,E0e=10*1024*1024;function nft(t,e){t.registerExternalAssetHandler("file",async n=>rft(t,n,e)),t.registerExternalAssetHandler("url",async n=>oft(t,n,e)),t.registerExternalContentHandler("svg-text",async n=>ift(t,n)),t.registerExternalContentHandler("embed",n=>sft(t,n)),t.registerExternalContentHandler("files",async n=>aft(t,n,e)),t.registerExternalContentHandler("text",async n=>lft(t,n)),t.registerExternalContentHandler("url",async n=>cft(t,n,e)),t.registerExternalContentHandler("tldraw",async n=>uft(t,n)),t.registerExternalContentHandler("excalidraw",async n=>dft(t,n))}async function rft(t,{file:e,assetId:n},{acceptedImageMimeTypes:r=fw,acceptedVideoMimeTypes:o=OM,maxAssetSize:i=E0e,maxImageDimension:s=C0e,toasts:a,msg:l}){const c=r.includes(e.type),u=o.includes(e.type);!c&&!u&&a.addToast({title:l("assets.files.type-not-allowed"),severity:"error"}),nn(c||u,`File type not allowed: ${e.type}`),e.size>i&&a.addToast({title:l("assets.files.size-too-big"),severity:"error"}),nn(e.size<=i,`File size too big: ${(e.size/1024).toFixed()}kb > ${(i/1024).toFixed()}kb`);const d=Rae(await e.arrayBuffer());n=n??nh.createId(d);const f=await P0e(e,n,c,u,s),h=await t.uploadAsset(f,e);return f.props.src=h.src,h.meta&&(f.meta={...f.meta,...h.meta}),nh.create(f)}async function oft(t,{url:e},{toasts:n,msg:r}){var i,s,a,l,c;let o;try{const d=await(await _c(e,{method:"GET",mode:"no-cors"})).text(),f=new DOMParser().parseFromString(d,"text/html");o={image:((i=f.head.querySelector('meta[property="og:image"]'))==null?void 0:i.getAttribute("content"))??"",favicon:((s=f.head.querySelector('link[rel="apple-touch-icon"]'))==null?void 0:s.getAttribute("href"))??((a=f.head.querySelector('link[rel="icon"]'))==null?void 0:a.getAttribute("href"))??"",title:((l=f.head.querySelector('meta[property="og:title"]'))==null?void 0:l.getAttribute("content"))??e,description:((c=f.head.querySelector('meta[property="og:description"]'))==null?void 0:c.getAttribute("content"))??""},o.image.startsWith("http")||(o.image=new URL(o.image,e).href),o.favicon.startsWith("http")||(o.favicon=new URL(o.favicon,e).href)}catch(u){console.error(u),n.addToast({title:r("assets.url.failed"),severity:"error"}),o={image:"",favicon:"",title:"",description:""}}return{id:nh.createId(N5(e)),typeName:"asset",type:"bookmark",props:{src:e,description:o.description,image:o.image,favicon:o.favicon,title:o.title},meta:{}}}async function ift(t,{point:e,text:n}){const r=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),o=new DOMParser().parseFromString(n,"image/svg+xml").querySelector("svg");if(!o)throw new Error("No <svg/> element present");let i=parseFloat(o.getAttribute("width")||"0"),s=parseFloat(o.getAttribute("height")||"0");if(!(i&&s)){document.body.appendChild(o);const l=o.getBoundingClientRect();document.body.removeChild(o),i=l.width,s=l.height}const a=await t.getAssetForExternalContent({type:"file",file:new File([n],"asset.svg",{type:"image/svg+xml"})});if(!a)throw Error("Could not create an asset");_0e(t,[a],r)}function sft(t,{point:e,url:n,embed:r}){const o=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),{width:i,height:s}=r,a=Ar(),l=el(new $(o.x-(i||450)/2,o.y-(s||450)/2),t),c={id:a,type:"embed",x:l.x,y:l.y,props:{w:i,h:s,url:n}};t.createShapes([c]).select(a)}async function aft(t,{point:e,files:n},{maxAssetSize:r=E0e,maxImageDimension:o=C0e,acceptedImageMimeTypes:i=fw,acceptedVideoMimeTypes:s=OM,toasts:a,msg:l}){if(n.length>t.options.maxFilesAtOnce){a.addToast({title:l("assets.files.amount-too-big"),severity:"error"});return}const c=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),u=new $(c.x,c.y),d=[],f=[];for(const h of n){if(h.size>r){a.addToast({title:l("assets.files.size-too-big"),severity:"error"}),console.warn(`File size too big: ${(h.size/1024).toFixed()}kb > ${(r/1024).toFixed()}kb`);continue}if(!h.type){a.addToast({title:l("assets.files.upload-failed"),severity:"error"}),console.error("No mime type");continue}if(![...i,...s].includes(h.type)){a.addToast({title:l("assets.files.type-not-allowed"),severity:"error"}),console.warn(`${h.name} not loaded - Mime type not allowed ${h.type}.`);continue}const y=i.includes(h.type),m=s.includes(h.type),S=Rae(await h.arrayBuffer()),x=nh.createId(S),C=await P0e(h,x,y,m,o);let E;y&&(E=t.createTemporaryAssetPreview(x,h)),d.push(C),f.push({asset:C,file:h,temporaryAssetPreview:E})}Promise.allSettled(f.map(async h=>{try{const g=await t.getAssetForExternalContent({type:"file",file:h.file});if(!g)throw Error("Could not create an asset");t.updateAssets([{...g,id:h.asset.id}])}catch(g){a.addToast({title:l("assets.files.upload-failed"),severity:"error"}),console.error(g),t.deleteAssets([h.asset.id]);return}})),_0e(t,d,u)}async function lft(t,{point:e,text:n,html:r}){const o=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),i=t.getShapeUtil("text").getDefaultProps(),s=tft(n),a=r?Gdt(t,r):Ll(s);let l,c,u,d="middle";const f=r??s.replace(/\n/g,"<br>"),h=r?a.content.length>1:s.split(`
`).length>1,g=S0e(s);h&&(d=h?g?"end":"start":"middle");const y=t.textMeasure.measureHtml(f,{...qi,fontFamily:jd[i.font],fontSize:Ov[i.size],maxWidth:null}),m=Math.min(h?t.getViewportPageBounds().width*.9:920,Math.max(200,t.getViewportPageBounds().width*.9));if(y.w>m){const x=t.textMeasure.measureHtml(f,{...qi,fontFamily:jd[i.font],fontSize:Ov[i.size],maxWidth:m});l=x.w,c=x.h,u=!1,d=g?"end":"start"}else l=y.w,c=y.h,u=!0;o.y-c/2<t.getViewportPageBounds().minY+40&&(o.y=t.getViewportPageBounds().minY+40+c/2);const S=el(new $(o.x-l/2,o.y-c/2),t);t.createShapes([{id:Ar(),type:"text",x:S.x,y:S.y,props:{richText:a,textAlign:d,autoSize:u,w:l}}])}async function cft(t,{point:e,url:n},{toasts:r,msg:o}){const i=t.getShapeUtil("embed"),s=i==null?void 0:i.getEmbedDefinition(n);if(s)return t.putExternalContent({type:"embed",url:s.url,point:e,embed:s.definition});const a=e??(t.inputs.shiftKey?t.inputs.currentPagePoint:t.getViewportPageBounds().center),l=nh.createId(N5(n)),c=fft(t,n,a);let u=t.getAsset(l),d=!1;if(!u){d=!0;try{const f=await t.getAssetForExternalContent({type:"url",url:n});if(!f)throw Error("Could not create an asset");u=f}catch{r.addToast({title:o("assets.url.failed"),severity:"error"});return}}t.run(()=>{d&&t.createAssets([u]),t.updateShapes([{id:c.id,type:c.type,props:{assetId:u.id}}])})}async function uft(t,{point:e,content:n}){t.run(()=>{const r=t.getSelectionPageBounds();t.markHistoryStoppingPoint("paste"),t.putContentOntoCurrentPage(n,{point:e,select:!0});const o=t.getSelectionPageBounds();r&&o&&(r!=null&&r.collides(o))&&(t.updateInstanceState({isChangingStyle:!0}),t.timers.setTimeout(()=>{t.updateInstanceState({isChangingStyle:!1})},150))})}async function dft(t,{point:e,content:n}){t.run(()=>{lut(t,n,e)})}async function P0e(t,e,n,r,o){let i=t.type;t.type==="video/quicktime"&&(i="video/mp4");const s=n?await Fa.getImageSize(t):await Fa.getVideoSize(t),a=await Fa.isAnimated(t)||r,l={id:e,type:n?"image":"video",typeName:"asset",props:{name:t.name,src:"",w:s.w,h:s.h,fileSize:t.size,mimeType:i,isAnimated:a},meta:{}};if(o&&isFinite(o)){const c={w:l.props.w,h:l.props.h},u=aut(c,{w:o,h:o});c!==u&&Fa.isStaticImageType(t.type)&&(l.props.w=u.w,l.props.h=u.h)}return l}async function _0e(t,e,n){if(!e.length)return[];const r=$.From(n),o=[];for(let i=0;i<e.length;i++){const s=e[i];switch(s.type){case"image":{o.push({id:Ar(),type:"image",x:r.x,y:r.y,opacity:1,props:{assetId:s.id,w:s.props.w,h:s.props.h}}),r.x+=s.props.w;break}case"video":o.push({id:Ar(),type:"video",x:r.x,y:r.y,opacity:1,props:{assetId:s.id,w:s.props.w,h:s.props.h}}),r.x+=s.props.w}}return t.run(()=>{const i=e.filter(s=>!t.getAsset(s.id));t.store.atomic(()=>{i.length&&t.createAssets(i),t.createShapes(o).select(...o.map(s=>s.id)),I0e(t,n)})}),o.map(i=>i.id)}function I0e(t,e){const n=t.getViewportPageBounds();let r=t.getSelectionPageBounds();if(r){const o=r.center.sub(e);t.updateShapes(t.getSelectedShapes().map(i=>{const s=t.getShapeParentTransform(i).decompose().rotation,a=$.Rot(o,-s);return{id:i.id,type:i.type,x:i.x-a.x,y:i.y-a.y}}))}if(r=t.getSelectionPageBounds(),r&&t.getInstanceState().isGridMode){const o=t.getDocumentSettings().gridSize,i=new $(r.minX,r.minY),s=i.clone().snapToGrid(o),a=$.Sub(i,s);t.updateShapes(t.getSelectedShapes().map(l=>{const c={x:l.x-a.x,y:l.y-a.y};return{id:l.id,type:l.type,x:c.x,y:c.y}}))}r=t.getSelectionPageBounds(),r&&!n.contains(r)&&t.zoomToSelection({animation:{duration:t.options.animationMediumMs}})}function fft(t,e,n){const r={id:Ar(),type:"bookmark",x:n.x-150,y:n.y-160,opacity:1,props:{assetId:null,url:e}};return t.run(()=>{t.createShapes([r]).select(r.id),I0e(t,n)}),t.getShape(r.id)}var pL;let hft=(pL=class extends Bt{constructor(){super(...arguments);V(this,"options",this.editor.getShapeUtil("arrow").options);V(this,"isPrecise",!1);V(this,"isPreciseTimerId",null);V(this,"preciseTargetId",null)}onPointerMove(){this.update()}onPointerDown(n){this.parent.transition("pointing",{...n,isPrecise:this.isPrecise})}onEnter(){this.editor.setCursor({type:"cross",rotation:0}),this.update()}onCancel(){this.editor.setCurrentTool("select")}onExit(){w6(this.editor),this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId)}onKeyDown(){this.update()}onKeyUp(n){var r;if(this.update(),n.key==="Enter"){if(this.editor.getIsReadonly())return null;const o=this.editor.getOnlySelectedShape();o&&this.editor.getShapeUtil(o).canEdit(o)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(o.id),(r=this.editor.root.getCurrent())==null||r.transition("editing_shape",{...n,target:"shape",shape:o}))}}update(){const n=X2({editor:this.editor,pointInPageSpace:this.editor.inputs.currentPagePoint,arrow:void 0,isPrecise:this.isPrecise,isExact:this.editor.inputs.altKey,currentBinding:void 0,oppositeBinding:void 0});n&&n.target.id!==this.preciseTargetId?(this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId),this.preciseTargetId=n.target.id,this.isPreciseTimerId=this.editor.timers.setTimeout(()=>{this.isPrecise=!0,this.update()},this.options.hoverPreciseTimeout)):!n&&this.preciseTargetId&&(this.isPrecise=!1,this.preciseTargetId=null,this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId))}},V(pL,"id","idle"),pL);var gL;let pft=(gL=class extends Bt{constructor(){super(...arguments);V(this,"options",this.editor.getShapeUtil("arrow").options);V(this,"shape");V(this,"isPrecise",!1);V(this,"isPreciseTimerId",null);V(this,"markId","")}onEnter(n){this.markId="",this.isPrecise=!!n.isPrecise,X2({editor:this.editor,pointInPageSpace:this.editor.inputs.currentPagePoint,arrow:void 0,isPrecise:this.isPrecise,isExact:this.editor.inputs.altKey,currentBinding:void 0,oppositeBinding:void 0})||this.createArrowShape(),this.startPreciseTimeout()}onExit(){this.shape=void 0,w6(this.editor),this.clearPreciseTimeout()}onPointerMove(){if(this.editor.inputs.isDragging){if(this.shape||this.createArrowShape(),!this.shape)throw Error("expected shape");this.updateArrowShapeEndHandle(),this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,handle:{id:"end",type:"vertex",index:"a3",x:0,y:0},isCreating:!0,creatingMarkId:this.markId||void 0,onInteractionEnd:"arrow"})}}onPointerUp(){this.cancel()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.shape&&this.editor.bailToMark(this.markId),this.parent.transition("idle")}createArrowShape(){var d;const{originPagePoint:n}=this.editor.inputs,r=Ar();this.markId=this.editor.markHistoryStoppingPoint(`creating_arrow:${r}`);const o=el(n,this.editor);this.editor.createShape({id:r,type:"arrow",x:o.x,y:o.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});const i=this.editor.getShape(r);if(!i)throw Error("expected shape");const s=this.editor.getShapeHandles(i);if(!s)throw Error("expected handles for arrow");const a=this.editor.getShapeUtil("arrow"),l=this.shape,c=s.find(f=>f.id==="start"),u=(d=a.onHandleDrag)==null?void 0:d.call(a,i,{handle:{...c,x:0,y:0},isPrecise:!0,initial:l});u&&this.editor.updateShapes([u]),this.shape=this.editor.getShape(r),this.editor.select(r)}updateArrowShapeEndHandle(){var o,i;const n=this.shape;if(!n)throw Error("expected shape");const r=this.editor.getShapeHandles(n);if(!r)throw Error("expected handles for arrow");{const s=this.editor.getShapeUtil("arrow"),a=this.shape,l=r.find(u=>u.id==="start"),c=(o=s.onHandleDrag)==null?void 0:o.call(s,n,{handle:{...l,x:0,y:0},isPrecise:this.isPrecise,initial:a});c&&this.editor.updateShapes([c])}{const s=this.editor.getShapeUtil("arrow"),a=this.shape,l=this.editor.getPointInShapeSpace(n,this.editor.inputs.currentPagePoint),c=r.find(d=>d.id==="end"),u=(i=s.onHandleDrag)==null?void 0:i.call(s,this.editor.getShape(n),{handle:{...c,x:l.x,y:l.y},isPrecise:!1,initial:a});u&&this.editor.updateShapes([u])}this.shape=this.editor.getShape(n.id)}startPreciseTimeout(){this.isPreciseTimerId=this.editor.timers.setTimeout(()=>{this.getIsActive()&&(this.isPrecise=!0)},this.options.pointingPreciseTimeout)}clearPreciseTimeout(){this.isPreciseTimerId!==null&&clearTimeout(this.isPreciseTimerId)}},V(gL,"id","pointing"),gL);class C3 extends Bt{constructor(){super(...arguments);V(this,"shapeType","arrow")}static children(){return[hft,pft]}}V(C3,"id","arrow"),V(C3,"initial","idle");class j6 extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"initialShape");V(this,"shapeType",this.parent.id==="highlight"?"highlight":"draw");V(this,"util",this.editor.getShapeUtil(this.shapeType));V(this,"isPen",!1);V(this,"isPenOrStylus",!1);V(this,"segmentMode","free");V(this,"didJustShiftClickToExtendPreviousShapeLine",!1);V(this,"pagePointWhereCurrentSegmentChanged",{});V(this,"pagePointWhereNextSegmentChanged",null);V(this,"lastRecordedPoint",{});V(this,"mergeNextPoint",!1);V(this,"currentLineLength",0);V(this,"markId",null)}onEnter(n){this.markId=null,this.info=n,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.startShape()}onPointerMove(){const{inputs:n}=this.editor;if(this.isPen&&!n.isPen&&this.markId){this.editor.bailToMark(this.markId),this.startShape();return}this.isPenOrStylus?$.Dist(n.currentPagePoint,this.lastRecordedPoint)>=1/this.editor.getZoomLevel()?(this.lastRecordedPoint=n.currentPagePoint.clone(),this.mergeNextPoint=!1):this.mergeNextPoint=!0:this.mergeNextPoint=!1,this.updateDrawingShape()}onKeyDown(n){if(n.key==="Shift")switch(this.segmentMode){case"free":{this.segmentMode="starting_straight",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_free":this.segmentMode="starting_straight"}this.updateDrawingShape()}onKeyUp(n){if(n.key==="Shift")switch(this.editor.snaps.clearIndicators(),this.segmentMode){case"straight":{this.segmentMode="starting_free",this.pagePointWhereNextSegmentChanged=this.editor.inputs.currentPagePoint.clone();break}case"starting_straight":{this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";break}}this.updateDrawingShape()}onExit(){this.editor.snaps.clearIndicators(),this.pagePointWhereCurrentSegmentChanged=this.editor.inputs.currentPagePoint.clone()}canClose(){return this.shapeType!=="highlight"}getIsClosed(n,r,o){if(!this.canClose())return!1;const i=ei[r],s=n[0].points[0],a=n[n.length-1],l=a.points[a.points.length-1];return s!==l&&this.currentLineLength>i*4*o&&$.DistMin(s,l,i*2*o)}startShape(){const{inputs:{originPagePoint:n,isPen:r}}=this.editor;this.markId=this.editor.markHistoryStoppingPoint("draw start");const{z:o=.5}=this.info.point;this.isPen=r,this.isPenOrStylus=r||o>0&&o<.5||o>.5&&o<1;const i=this.isPenOrStylus?o*1.25:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=n.clone(),this.initialShape){const a=this.editor.getShape(this.initialShape.id);if(a&&this.segmentMode==="straight"){this.didJustShiftClickToExtendPreviousShapeLine=!0;const l=Li(a.props.segments);if(!l)throw Error("Expected a previous segment!");const c=Li(l.points);if(!c)throw Error("Expected a previous point!");const{x:u,y:d}=this.editor.getPointInShapeSpace(a,n).toFixed(),f={type:this.segmentMode,points:[{x:c.x,y:c.y,z:+i.toFixed(2)},{x:u,y:d,z:+i.toFixed(2)}]},h=Ke.applyToPoint(this.editor.getShapePageTransform(a.id),c);this.pagePointWhereCurrentSegmentChanged=h,this.pagePointWhereNextSegmentChanged=null;const g=[...a.props.segments,f];this.currentLineLength<ei[a.props.size]*4&&(this.currentLineLength=this.getLineLength(g));const y={id:a.id,type:this.shapeType,props:{segments:g}};this.canClose()&&(y.props.isClosed=this.getIsClosed(g,a.props.size,a.props.scale)),this.editor.updateShapes([y]);return}}this.pagePointWhereCurrentSegmentChanged=n.clone();const s=Ar();this.editor.createShapes([{id:s,type:this.shapeType,x:n.x,y:n.y,props:{isPen:this.isPenOrStylus,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+i.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShape(s)}updateDrawingShape(){const{initialShape:n}=this,{inputs:r}=this.editor;if(!n)return;const{id:o,props:{size:i,scale:s}}=n,a=this.editor.getShape(o);if(!a)return;const{segments:l}=a.props,{x:c,y:u,z:d}=this.editor.getPointInShapeSpace(a,r.currentPagePoint).toFixed(),f=this.isPenOrStylus?+(r.currentPagePoint.z*1.25).toFixed(2):.5,h={x:c,y:u,z:f};switch(this.segmentMode){case"starting_straight":{const{pagePointWhereNextSegmentChanged:g}=this;if(g===null)throw Error("We should have a point where the segment changed");if($.Dist2(g,r.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";const m=Li(l);if(!m)throw Error("Expected a previous segment!");const S=Li(m.points);if(!S)throw Error("Expected a previous last point!");let x;const C=this.editor.getPointInShapeSpace(a,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if(m.type==="straight"){this.currentLineLength+=$.Dist(S,C),x={type:"straight",points:[{...S},C]};const P=this.editor.getShapePageTransform(a);this.pagePointWhereCurrentSegmentChanged=Ke.applyToPoint(P,S)}else x={type:"straight",points:[C,h]};const E={id:o,type:this.shapeType,props:{segments:[...l,x]}};this.canClose()&&(E.props.isClosed=this.getIsClosed(l,i,s)),this.editor.updateShapes([E])}break}case"starting_free":{const{pagePointWhereNextSegmentChanged:g}=this;if(g===null)throw Error("We should have a point where the segment changed");if($.Dist2(g,r.currentPagePoint)>this.editor.options.dragDistanceSquared){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";const m=l.slice(),S=m[m.length-1],x=Li(S.points);if(!x)throw Error("No previous point!");const C={type:"free",points:[...$.PointsBetween(x,h,6).map(I=>({x:dd(I.x),y:dd(I.y),z:dd(I.z)}))]},E=[...m,C];this.currentLineLength<ei[a.props.size]*4&&(this.currentLineLength=this.getLineLength(E));const P={id:o,type:this.shapeType,props:{segments:E}};this.canClose()&&(P.props.isClosed=this.getIsClosed(E,i,s)),this.editor.updateShapes([P])}break}case"straight":{const g=l.slice(),y=g[g.length-1],{pagePointWhereCurrentSegmentChanged:m}=this,{ctrlKey:S,currentPagePoint:x}=this.editor.inputs;if(!m)throw Error("We should have a point where the segment changed");let C,E=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(E=!S,this.didJustShiftClickToExtendPreviousShapeLine=!1):E=!S;let P=this.editor.getPointInShapeSpace(a,x).toFixed().toJson(),I=!1,T;if((this.editor.user.getIsSnapMode()?!S:S)&&g.length>2){let A,j=8/this.editor.getZoomLevel();for(let N=0,k=l.length-2;N<k;N++){const D=l[N];if(!D)break;if(D.type==="free")continue;const F=D.points[0],H=Li(D.points);if(!(F&&H))continue;const U=$.NearestPointOnLineSegment(F,H,P);if($.DistMin(U,P,j)){A=U.toFixed().toJson(),j=$.Dist(U,P),T=D;break}}A&&(I=!0,P=A)}if(I&&T){const A=this.editor.getShapePageTransform(a),j=T.points[0],N=Li(T.points);if(!N)throw Error("Expected a last point!");const k=Ke.applyToPoint(A,j),D=Ke.applyToPoint(A,N),F=Ke.applyToPoint(A,P);this.editor.snaps.setIndicators([{id:br(),type:"points",points:[k,F,D]}])}else{if(this.editor.snaps.clearIndicators(),E){const A=$.Angle(m,x),N=mI(A,24)-A;C=$.RotWith(x,m,N)}else C=x;P=this.editor.getPointInShapeSpace(a,C).toFixed().toJson()}this.currentLineLength+=$.Dist(y.points[0],P),g[g.length-1]={...y,type:"straight",points:[y.points[0],P]};const R={id:o,type:this.shapeType,props:{segments:g}};this.canClose()&&(R.props.isClosed=this.getIsClosed(l,i,s)),this.editor.updateShapes([R]);break}case"free":{const g=l.slice(),y=g[g.length-1],m=[...y.points];if(m.length&&this.mergeNextPoint){const{z:x}=m[m.length-1];m[m.length-1]={x:h.x,y:h.y,z:x?Math.max(x,h.z):h.z}}else this.currentLineLength+=$.Dist(m[m.length-1],h),m.push(h);g[g.length-1]={...y,points:m},this.currentLineLength<ei[a.props.size]*4&&(this.currentLineLength=this.getLineLength(g));const S={id:o,type:this.shapeType,props:{segments:g}};if(this.canClose()&&(S.props.isClosed=this.getIsClosed(g,i,s)),this.editor.updateShapes([S]),m.length>this.util.options.maxPointsPerShape){this.editor.updateShapes([{id:o,type:this.shapeType,props:{isComplete:!0}}]);const x=Ar(),C=this.editor.getShape(o).props;this.editor.createShapes([{id:x,type:this.shapeType,x:dd(r.currentPagePoint.x),y:dd(r.currentPagePoint.y),props:{isPen:this.isPenOrStylus,scale:C.scale,segments:[{type:"free",points:[{x:0,y:0,z:this.isPenOrStylus?+(d*1.25).toFixed():.5}]}]}}]),this.initialShape=to(this.editor.getShape(x)),this.mergeNextPoint=!1,this.lastRecordedPoint=r.currentPagePoint.clone(),this.currentLineLength=0}break}}}getLineLength(n){let r=0;for(const o of n)for(let i=0;i<o.points.length-1;i++){const s=o.points[i],a=o.points[i+1];r+=$.Dist2(a,s)}return Math.sqrt(r)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.editor.inputs.isDragging||(this.markId&&this.editor.bailToMark(this.markId),this.cancel())}complete(){const{initialShape:n}=this;n&&(this.editor.updateShapes([{id:n.id,type:n.type,props:{isComplete:!0}}]),this.parent.transition("idle"))}cancel(){this.parent.transition("idle",this.info)}}V(j6,"id","drawing");var mL;let T0e=(mL=class extends Bt{onPointerDown(e){this.parent.transition("drawing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},V(mL,"id","idle"),mL);class Gb extends Bt{constructor(){super(...arguments);V(this,"shapeType","draw")}static children(){return[T0e,j6]}onExit(){const n=this.children.drawing;n.initialShape=void 0}}V(Gb,"id","draw"),V(Gb,"initial","idle"),V(Gb,"isLockable",!1),V(Gb,"useCoalescedEvents",!0);class E3 extends _F{constructor(){super(...arguments);V(this,"shapeType","frame")}onCreate(n){if(!n)return;const r=this.editor.getShapePageBounds(n),o=[],i=this.editor.getShapeAncestors(n).map(s=>s.id);this.editor.getSortedChildIdsForParent(n.parentId).map(s=>{const a=this.editor.getShape(s);if(!a||a.id===n.id||a.isLocked)return;const l=this.editor.getShapePageBounds(a);l&&r.contains(l)&&gft(a,i,n)&&o.push(a.id)}),this.editor.reparentShapes(o,n.id),this.editor.getInstanceState().isToolLocked?this.editor.setCurrentTool("frame"):this.editor.setCurrentTool("select.idle")}}V(E3,"id","frame"),V(E3,"initial","idle");function gft(t,e,n){return e.includes(t.id)?!1:t.parentId===n.parentId}var vL;let mft=(vL=class extends Bt{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onKeyUp(e){var n;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(n=this.editor.root.getCurrent())==null||n.transition("editing_shape",{...e,target:"shape",shape:r}))}}onCancel(){this.editor.setCurrentTool("select")}},V(vL,"id","idle"),vL);var yL;let vft=(yL=class extends Bt{onPointerUp(){this.complete()}onPointerMove(e){if(this.editor.inputs.isDragging){const{originPagePoint:n}=this.editor.inputs,r=Ar(),o=this.editor.markHistoryStoppingPoint(`creating_geo:${r}`),i=el(n,this.editor);this.editor.createShapes([{id:r,type:"geo",x:i.x,y:i.y,props:{w:1,h:1,geo:this.editor.getStyleForNextShape(vc),scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]).select(r).setCurrentTool("select.resizing",{...e,target:"selection",handle:"bottom_right",isCreating:!0,creatingMarkId:o,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"})}}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}complete(){const{originPagePoint:e}=this.editor.inputs,n=Ar();this.editor.markHistoryStoppingPoint(`creating_geo:${n}`);const r=this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1,o=this.editor.getStyleForNextShape(vc),i=o==="star"?{w:200,h:190}:o==="cloud"?{w:300,h:180}:{w:200,h:200};this.editor.createShapes([{id:n,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(vc),scale:r,...i}}]);const s=this.editor.getShape(n);if(!s)return;const{w:a,h:l}=s.props,c=new $(a/2,l/2).mul(r),u=this.editor.getShapeParentTransform(s);u&&c.rot(-u.rotation());const d=el(new $(s.x-c.x,s.y-c.y),this.editor);this.editor.select(n),this.editor.updateShape({id:s.id,type:"geo",x:d.x,y:d.y,props:{geo:this.editor.getStyleForNextShape(vc),w:a*r,h:l*r}}),this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):this.editor.setCurrentTool("select",{})}cancel(){this.parent.transition("idle")}},V(yL,"id","pointing"),yL);class P3 extends Bt{constructor(){super(...arguments);V(this,"shapeType","geo")}static children(){return[mft,vft]}}V(P3,"id","geo"),V(P3,"initial","idle");class Xb extends Bt{constructor(){super(...arguments);V(this,"shapeType","highlight")}static children(){return[T0e,j6]}onExit(){const n=this.children.drawing;n.initialShape=void 0}}V(Xb,"id","highlight"),V(Xb,"initial","idle"),V(Xb,"useCoalescedEvents",!0),V(Xb,"isLockable",!1);var bL;let yft=(bL=class extends Bt{constructor(){super(...arguments);V(this,"shapeId","")}onEnter(n){this.shapeId=n.shapeId,this.editor.setCursor({type:"cross",rotation:0})}onPointerDown(){this.parent.transition("pointing",{shapeId:this.shapeId})}onCancel(){this.editor.setCurrentTool("select")}},V(bL,"id","idle"),bL);const Ree=2;var SL;let bft=(SL=class extends Bt{constructor(){super(...arguments);V(this,"shape",{});V(this,"markId")}onEnter(n){const{inputs:r}=this.editor,{currentPagePoint:o}=r;this.markId=void 0;const i=n.shapeId&&this.editor.getShape(n.shapeId);if(i&&r.shiftKey){this.markId=this.editor.markHistoryStoppingPoint(`creating_line:${i.id}`),this.shape=i;const s=this.editor.getShapeHandles(this.shape);if(!s)return;const a=s.filter(g=>g.type==="vertex").sort(Ni),l=a[a.length-1],c=a[a.length-2],u=Ke.applyToPoint(this.editor.getShapeParentTransform(this.shape),new $(this.shape.x,this.shape.y)),d=$.Sub(o,u).addXY(.1,.1),f=el(d,this.editor),h=to(this.shape.props.points);if($.DistMin(l,c,Ree)||$.DistMin(f,l,Ree))h[l.id]={id:l.id,index:l.index,x:f.x,y:f.y};else{const g=cu(l.index);h[g]={id:g,index:g,x:f.x,y:f.y}}this.editor.updateShapes([{id:this.shape.id,type:this.shape.type,props:{points:h}}])}else{const s=Ar();this.markId=this.editor.markHistoryStoppingPoint(`creating_line:${s}`);const a=el(o,this.editor);this.editor.createShapes([{id:s,type:"line",x:a.x,y:a.y,props:{scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}}]),this.editor.select(s),this.shape=this.editor.getShape(s)}}onPointerMove(){if(this.shape&&this.editor.inputs.isDragging){const n=this.editor.getShapeHandles(this.shape);if(!n)throw this.markId&&this.editor.bailToMark(this.markId),Error("No handles found");const r=Li(n);this.editor.setCurrentTool("select.dragging_handle",{shape:this.shape,isCreating:!0,creatingMarkId:this.markId,handle:{...r,x:r.x-.1,y:r.y-.1},onInteractionEnd:"line"})}}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.parent.transition("idle"),this.markId&&this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators()}complete(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}cancel(){this.markId&&this.editor.bailToMark(this.markId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clearIndicators()}},V(SL,"id","pointing"),SL);class _3 extends Bt{constructor(){super(...arguments);V(this,"shapeType","line")}static children(){return[yft,bft]}}V(_3,"id","line"),V(_3,"initial","idle");var xL;let Sft=(xL=class extends Bt{onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onCancel(){this.editor.setCurrentTool("select")}},V(xL,"id","idle"),xL);const xft=0,kr=200,Z2=new $(kr/2,kr/2),M0e=10,wft=t=>[[["a1"],new $(kr*.5,kr*-.5-t.options.adjacentShapeMargin)],[["a2"],new $(kr*1.5+t.options.adjacentShapeMargin,kr*.5)],[["a3"],new $(kr*.5,kr*1.5+t.options.adjacentShapeMargin)],[["a4"],new $(kr*-.5-t.options.adjacentShapeMargin,kr*.5)]];function Cft(t,e){if(e===1)return wft(t);const n=kr*e,r=t.options.adjacentShapeMargin*e;return[[["a1"],new $(n*.5,n*-.5-r)],[["a2"],new $(n*1.5+r,n*.5)],[["a3"],new $(n*.5,n*1.5+r)],[["a4"],new $(n*-.5-r,n*.5)]]}function O0e(t,e,n,r,o,i){return Object.fromEntries(Cft(t,i).map(([s,a],l)=>{const c=a.clone();return l===0&&o?c.y-=o:l===2&&r&&(c.y+=r),[s,c.rot(n).add(e)]}))}function R0e(t,e,n,r){const o=new Set(t.getSelectedShapeIds()),i=(kr+t.options.adjacentShapeMargin+r)**2,s=new Map,a=[];for(const u of t.getCurrentPageShapes()){if(!t.isShapeOfType(u,"note")||n!==u.props.scale||o.has(u.id))continue;const d=t.getShapePageTransform(u.id);e===d.rotation()&&(s.set(u,t.getShapePageBounds(u).center),a.push(...Object.values(O0e(t,d.point(),e,u.props.growY,r,n))))}const l=a.length;let c;for(const[u,d]of s)for(let f=0;f<l;f++)c=a[f],c&&($.Dist2(d,c)>i||t.isPointInShape(u,c)&&(a[f]=void 0));return Tn(a)}function k0e(t,e,n,r,o=!1){let i;const s=t.getCurrentPageShapesSorted(),a=(kr+t.options.adjacentShapeMargin**2)**e.props.scale;for(let l=s.length-1;l>=0;l--){const c=s[l];if(c.type==="note"&&c.id!==e.id){const u=t.getShapePageBounds(c);if(u&&$.Dist2(u.center,n)<a&&t.isPointInShape(c,n)){i=c;break}}}if(t.complete(),!i||o){t.markHistoryStoppingPoint("creating note shape");const l=Ar();t.createShape({id:l,type:"note",x:n.x,y:n.y,rotation:r,opacity:e.opacity,props:{...e.props,richText:Ll(""),growY:0,fontSizeAdjustment:0,url:""}});const c=t.getShape(l);if(!c)return;const u=t.getPointInParentSpace(c,$.Sub(n,$.Rot(Z2.clone().mul(c.props.scale),r)));t.updateShape({id:l,type:"note",x:u.x,y:u.y}),i=t.getShape(l)}return t.zoomToSelectionIfOffscreen(16,{animation:{duration:t.options.animationMediumMs},inset:0}),i}var wL;let Eft=(wL=class extends Bt{constructor(){super(...arguments);V(this,"dragged",!1);V(this,"info",{});V(this,"markId","");V(this,"shape",{})}onEnter(){const{editor:n}=this,r=Ar();this.markId=n.markHistoryStoppingPoint(`creating_note:${r}`);const o=this.editor.inputs.originPagePoint.clone(),i=Pft(this.editor,o,this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1);i&&o.sub(i),this.shape=_ft(this.editor,r,o)}onPointerMove(n){this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.translating",{...n,target:"shape",shape:this.shape,onInteractionEnd:"note",isCreating:!0,creatingMarkId:this.markId,onCreate:()=>{this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape")}})}onPointerUp(){this.complete()}onInterrupt(){this.cancel()}onComplete(){this.complete()}onCancel(){this.cancel()}complete(){this.editor.getInstanceState().isToolLocked?this.parent.transition("idle"):(this.editor.setEditingShape(this.shape.id),this.editor.setCurrentTool("select.editing_shape",{...this.info,target:"shape",shape:this.shape}))}cancel(){this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}},V(wL,"id","pointing"),wL);function Pft(t,e,n){let r=M0e/t.getZoomLevel(),o;for(const i of R0e(t,0,n,0)){const s=$.Sub(e,i),a=s.len();a<r&&(r=a,o=s)}return o}function _ft(t,e,n){t.createShape({id:e,type:"note",x:n.x,y:n.y,props:{scale:t.user.getIsDynamicResizeMode()?1/t.getZoomLevel():1}}).select(e);const r=t.getShape(e),o=t.getShapeGeometry(r).bounds,i=el(new $(r.x-o.width/2,r.y-o.height/2),t);return t.updateShapes([{id:e,type:"note",x:i.x,y:i.y}]),t.getShape(e)}class I3 extends Bt{constructor(){super(...arguments);V(this,"shapeType","note")}static children(){return[Sft,Eft]}}V(I3,"id","note"),V(I3,"initial","idle");function Ift(t){const e=t.getShapeAtPoint(t.inputs.currentPagePoint,{hitInside:!1,hitLabels:!1,margin:t.options.hitTestMargin/t.getZoomLevel(),renderingOnly:!0});if(!e)return t.setHoveredShape(null);let n;const r=t.getOutermostSelectableShape(e);return r===e||r.id===t.getFocusedGroupId()||t.getSelectedShapeIds().includes(r.id)?n=e:n=r,t.setHoveredShape(n.id)}const gd=$5(Ift,32);var CL;let Tft=(CL=class extends Bt{onPointerMove(e){switch(e.target){case"shape":case"canvas":gd(this.editor)}}onPointerDown(e){this.parent.transition("pointing",e)}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}onExit(){gd.cancel()}onKeyDown(e){var n;if(e.key==="Enter"){if(this.editor.getIsReadonly())return null;const r=this.editor.getOnlySelectedShape();r&&this.editor.getShapeUtil(r).canEdit(r)&&(this.editor.setCurrentTool("select"),this.editor.setEditingShape(r.id),(n=this.editor.root.getCurrent())==null||n.transition("editing_shape",{...e,target:"shape",shape:r}))}}onCancel(){this.editor.setCurrentTool("select")}},V(CL,"id","idle"),CL);var EL;let Mft=(EL=class extends Bt{constructor(){super(...arguments);V(this,"shape");V(this,"markId","");V(this,"enterTime",0)}onEnter(){this.enterTime=Date.now()}onExit(){this.editor.setHintingShapes([])}onPointerMove(n){if(Date.now()-this.enterTime<150)return;const{editor:r}=this,{isPointing:o}=r.inputs;if(!o)return;const{originPagePoint:i,currentPagePoint:s}=r.inputs,a=Math.abs(i.x-s.x),c=Math.sqrt(r.getInstanceState().isCoarsePointer?r.options.coarseDragDistanceSquared:r.options.dragDistanceSquared)*6/r.getZoomLevel();if(a>c){const u=Ar();this.markId=r.markHistoryStoppingPoint(`creating_text:${u}`);const d=this.createTextShape(u,i,!1,a);if(!d){this.cancel();return}this.shape=r.getShape(d),r.select(u),r.setCurrentTool("select.resizing",{...n,target:"selection",handle:"right",isCreating:!0,creatingMarkId:this.markId,creationCursorOffset:{x:a,y:1},onInteractionEnd:"text",onCreate:()=>{r.setEditingShape(d.id)}})}}onPointerUp(){this.complete()}onComplete(){this.cancel()}onCancel(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.editor.markHistoryStoppingPoint("creating text shape");const n=Ar(),{originPagePoint:r}=this.editor.inputs;this.createTextShape(n,r,!0,20)&&(this.editor.select(n),this.editor.setEditingShape(n))}cancel(){this.parent.transition("idle"),this.editor.bailToMark(this.markId)}createTextShape(n,r,o,i){this.editor.createShape({id:n,type:"text",x:r.x,y:r.y,props:{richText:Ll(""),autoSize:o,w:i,scale:this.editor.user.getIsDynamicResizeMode()?1/this.editor.getZoomLevel():1}});const s=this.editor.getShape(n);if(!s){this.cancel();return}const a=this.editor.getShapePageBounds(s),l=new $;if(o)switch(s.props.textAlign){case"start":{l.x=0;break}case"middle":{l.x=-a.width/2;break}case"end":{l.x=-a.width;break}}else l.x=0;if(l.y=-a.height/2,fa(s.parentId)){const d=this.editor.getShapeParentTransform(s);l.rot(-d.rotation())}const c=s.x+l.x,u=s.y+l.y;if(this.editor.getInstanceState().isGridMode){const d=new $(c,u),f=el(d,this.editor),h=$.Sub(d,f);this.editor.updateShape({...s,x:c-h.x,y:u-h.y})}else this.editor.updateShape({...s,x:c,y:u});return s}},V(EL,"id","pointing"),EL);class T3 extends Bt{constructor(){super(...arguments);V(this,"shapeType","text")}static children(){return[Tft,Mft]}}V(T3,"id","text"),V(T3,"initial","idle");const Oft=[T3,Gb,P3,I3,_3,E3,C3,Xb];function Rft(t,e=20){return Math.max(8,Math.ceil(t/e))}class Cd{constructor(){V(this,"lines",[])}static throughPoints(e,n){const r=new Cd;r.moveTo(e[0].x,e[0].y,n);for(let o=1;o<e.length;o++)r.lineTo(e[o].x,e[o].y);return r}currentLine(){const e=this.lines[this.lines.length-1];return nn(e,"Start an SVGPathBuilder with `.moveTo()`"),nn(!e.closed,"Cannot work on a closed line"),e}moveTo(e,n,r){return this.lines.push({initial:{type:"moveTo",x:e,y:n,opts:r},segments:[],closed:!1}),this}lineTo(e,n,r){return this.currentLine().segments.push({type:"lineTo",x:e,y:n,opts:r}),this}arcTo(e,n,r,o,i,s){return this.currentLine().segments.push({type:"arcTo",radius:e,largeArcFlag:n,sweepFlag:r,x:o,y:i,opts:s}),this}close(){return this.currentLine().closed=!0,this}toD(e={}){const n=e.closedOnly??!1,r=[];for(const{initial:o,segments:i,closed:s}of this.lines)if(!(n&&!s)){r.push("M",Se(o.x),Se(o.y));for(const a of i)switch(a.type){case"lineTo":r.push("L",Se(a.x),Se(a.y));break;case"arcTo":r.push("A",a.radius,a.radius,0,a.largeArcFlag?"1":"0",a.sweepFlag?"1":"0",Se(a.x),Se(a.y));break}s&&r.push("Z")}return r.join(" ")}toSvg(e){if(e.forceSolid)return this.toSolidSvg(e);switch(e.style){case"solid":return this.toSolidSvg(e);case"dashed":case"dotted":return this.toDashedSvg(e);case"draw":return this.toDrawSvg(e);default:Jn(e,"style")}}toGeometry(){var n,r,o;const e=[];for(const{initial:i,segments:s,closed:a}of this.lines){if(((n=i.opts)==null?void 0:n.geometry)===!1)continue;const l=[new $(i.x,i.y)];for(const u of s)switch(u.type){case"lineTo":{l.push(new $(u.x,u.y));break}case"arcTo":{const d=FE(l[l.length-1],u);if(d===null)break;if(d==="straight-line"){l.push(new $(u.x,u.y));break}const f=Rft(d.length);for(let h=0;h<f+1;h++){const g=h/f*d.sweepAngle,y=$.Rot(d.startVector,g).mul(d.radius).add(d.center);l.push(y)}break}default:Jn(u,"type")}const c=a?new zo({points:l,isFilled:!1,...(r=i.opts)==null?void 0:r.geometry}):new vh({points:l,...(o=i.opts)==null?void 0:o.geometry});e.push(c)}return e.length===0?null:e.length===1?e[0]:new Zs({children:e})}toSolidSvg(e){const{strokeWidth:n,props:r}=e;return w.jsx("path",{strokeWidth:n,d:this.toD(),...r})}toDashedSvg(e){const{style:n,strokeWidth:r,snap:o,end:i,start:s,lengthRatio:a,props:{markerStart:l,markerEnd:c,...u}={}}=e,d=[];for(const{initial:f,segments:h,closed:g}of this.lines){let y=f;for(let m=0;m<h.length;m++){const S=h[m],x=m===0,C=m===h.length-1&&!g,E=this.segmentLength(y,S),{strokeDasharray:P,strokeDashoffset:I}=uc(E,r,{style:n,snap:o,lengthRatio:a,start:x?g?"none":s:"outset",end:C?g?"none":i:"outset"});switch(S.type){case"lineTo":d.push(w.jsx("line",{x1:Se(y.x),y1:Se(y.y),x2:Se(S.x),y2:Se(S.y),strokeDasharray:P,strokeDashoffset:I,markerStart:x?l:void 0,markerEnd:C?c:void 0},m));break;case"arcTo":d.push(w.jsx("path",{d:["M",Se(y.x),Se(y.y),"A",S.radius,S.radius,0,S.largeArcFlag?"1":"0",S.sweepFlag?"1":"0",Se(S.x),Se(S.y)].join(" "),strokeDasharray:P,strokeDashoffset:I,markerStart:x?l:void 0,markerEnd:C?c:void 0},m));break;default:Jn(S,"type")}y=S}if(g&&y!==f){const m=$.Dist(y,f),{strokeDasharray:S,strokeDashoffset:x}=uc(m,r,{style:n,snap:o,lengthRatio:a,start:"outset",end:"none"});d.push(w.jsx("line",{x1:Se(y.x),y1:Se(y.y),x2:Se(f.x),y2:Se(f.y),strokeDasharray:S,strokeDashoffset:x,markerEnd:c},"last"))}}return w.jsx("g",{strokeWidth:r,...u,children:d})}toDrawSvg(e){var u,d,f,h,g;const{strokeWidth:n,randomSeed:r,offset:o=n/3,roundness:i=n*2,passes:s=2,props:a}=e,l=[],c=this.lines.map(({initial:y,segments:m,closed:S})=>{const x=[],C=S?m.length+1:m.length;for(let E=0;E<C;E++){let P=m[E-1],I=m[E],T=m[E+1];P||(P=y),I||(I=y,T=m[0]),T||(T=y);let M,R;switch(I.type){case"lineTo":case"moveTo":{M=$.Sub(P,I).norm();break}case"arcTo":{const A=FE(P,I);if(A===null||A==="straight-line"){M=$.Sub(I,P).norm().per();break}M=$.Per(A.endVector).mul(Math.sign(A.sweepAngle));break}default:Jn(I,"type")}switch(T.type){case"lineTo":case"moveTo":{R=$.Sub(T,I).norm();break}case"arcTo":{const A=FE(I,T);if(A===null||A==="straight-line"){R=$.Sub(T,I).norm().per();break}R=$.Per(A.startVector).mul(Math.sign(A.sweepAngle));break}default:Jn(T,"type")}x.push({tangentBefore:M,tangentAfter:R})}return x});for(let y=0;y<s;y++)for(let m=0;m<this.lines.length;m++){const{initial:S,segments:x,closed:C}=this.lines[m],E=Ul(r+y+m),P=((u=S.opts)==null?void 0:u.offset)??o,I={x:S.x+E()*P,y:S.y+E()*P},T=[];let M=$.Dist(I,x[0]);for(let A=0;A<x.length;A++){const j=x[A],N=A===x.length-1?C?x[0]:null:x[A+1],k=N?$.Dist(j,N):1/0,D=Math.min(M,k)-(((d=j.opts)==null?void 0:d.roundness)??i),F=zr(((f=j.opts)==null?void 0:f.offset)??o,0,D/10),H={x:j.x+E()*F,y:j.y+E()*F};T.push(H),M=k}if(C){const A=((h=S.opts)==null?void 0:h.roundness)??i;T.push(I);const j=T[0],N=Math.min($.Dist(I,j)/2,A),k=$.Nudge(I,j,N);l.push("M",Se(k.x),Se(k.y))}else l.push("M",Se(I.x),Se(I.y));const R=C?x.length+1:x.length;for(let A=0;A<R;A++){const j=A===x.length?S:x[A],N=((g=j.opts)==null?void 0:g.roundness)??i,k=T[A],{tangentBefore:D,tangentAfter:F}=c[m][A],H=A===0?I:T[A-1],U=A===x.length-1&&!C?null:T[(A+1)%T.length];switch(j.type){case"lineTo":case"moveTo":{if(!U||N===0){l.push("L",Se(k.x),Se(k.y));break}const B=Pn(N,0,zr(mv(Math.PI/2,Math.PI,Math.abs($.AngleBetween(D,F))),0,1)),W=Math.min($.Dist(H,k)/2,B),K=$.Mul(D,W).add(k),q=Math.min($.Dist(U,k)/2,B),X=$.Mul(F,q).add(k);l.push("L",Se(K.x),Se(K.y),"Q",Se(k.x),Se(k.y),Se(X.x),Se(X.y));break}case"arcTo":l.push("A",j.radius,j.radius,0,j.largeArcFlag?"1":"0",j.sweepFlag?"1":"0",Se(k.x),Se(k.y));break;default:Jn(j,"type")}}C&&l.push("Z")}return w.jsx("path",{strokeWidth:n,d:l.join(" "),...a})}segmentLength(e,n){switch(n.type){case"lineTo":return $.Dist(e,n);case"arcTo":{const r=FE(e,n);return r===null?0:r==="straight-line"?$.Dist(e,n):r.length}default:Jn(n,"type")}}}/*!
 * Adapted from https://github.com/rveciana/svg-path-properties
 * MIT License: https://github.com/rveciana/svg-path-properties/blob/master/LICENSE
 * https://github.com/rveciana/svg-path-properties/blob/74d850d14998274f6eae279424bdc2194f156490/src/arc.ts#L121
 */function FE(t,{radius:e,largeArcFlag:n,sweepFlag:r,x:o,y:i}){if(e=Math.abs(e),t.x===o&&t.y===i)return null;if(e===0)return"straight-line";const s=(t.x-o)/2,a=(t.y-i)/2,l=Math.pow(s,2)/Math.pow(e,2)+Math.pow(a,2)/Math.pow(e,2);l>1&&(e=Math.sqrt(l)*e);const c=Math.pow(e,2)*Math.pow(e,2)-Math.pow(e,2)*Math.pow(a,2)-Math.pow(e,2)*Math.pow(s,2),u=Math.pow(e,2)*Math.pow(a,2)+Math.pow(e,2)*Math.pow(s,2);let d=c/u;d=d<0?0:d;const f=(n!==r?1:-1)*Math.sqrt(d),h={x:f*(e*a/e),y:f*(-(e*s)/e)},g={x:h.x+(t.x+o)/2,y:h.y+(t.y+i)/2},y={x:(s-h.x)/e,y:(a-h.y)/e},m={x:(-s-h.x)/e,y:(-a-h.y)/e};let S=$.AngleBetween(y,m);return!r&&S>0?S-=2*Math.PI:r&&S<0&&(S+=2*Math.PI),S%=2*Math.PI,{length:Math.abs(S*e),radius:e,sweepAngle:S,startVector:y,endVector:m,center:g}}const kft=ce.forwardRef(function({isEditing:e,text:n,handleFocus:r,handleChange:o,handleKeyDown:i,handleBlur:s,handleInputPointerDown:a,handleDoubleClick:l},c){const u=d=>{o({plaintext:d.target.value})};return w.jsx("textarea",{ref:c,className:"tl-text tl-text-input",name:"text",tabIndex:-1,disabled:!e,readOnly:!e,autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",autoSave:"off",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",defaultValue:n,onFocus:r,onChange:u,onKeyDown:d=>i(d.nativeEvent),onBlur:s,onTouchEnd:Yr,onContextMenu:e?Yr:void 0,onPointerDown:a,onDoubleClick:l,onDragStart:En})});function Aft(t,e,n,r){if((t==="start-legacy"||t==="end-legacy")&&n.length!==0){const o=rt.From(n[0].box);for(const{box:i}of n)o.union(i);if(t==="start-legacy")return(r-2*e-o.width)/2;if(t==="end-legacy")return-(r-2*e-o.width)/2}}function A0e(t){return t==="start-legacy"||t==="middle-legacy"||t==="end-legacy"}function $ft(t,e,n){const r=$0e(t),o=r.isEditing,i=Ee(),s=v.useRef(null),a=(n||"").trim().length===0;v.useEffect(()=>{function u(d){var f,h;d.shapeId===t&&((h=(f=s.current)==null?void 0:f.select)==null||h.call(f))}return i.on("select-all-text",u),()=>{i.off("select-all-text",u)}},[i,t,o]),v.useEffect(()=>{var u,d,f,h;o&&(document.activeElement!==s.current&&((u=s.current)==null||u.focus()),i.getInstanceState().isCoarsePointer&&((d=s.current)==null||d.select()),vr.isSafari&&((f=s.current)==null||f.blur(),(h=s.current)==null||h.focus()))},[i,o]);const l=v.useCallback(u=>{if(i.getEditingShapeId()===t)switch(u.key){case"Enter":{(u.ctrlKey||u.metaKey)&&i.complete();break}}},[i,t]),c=v.useCallback(({plaintext:u})=>{if(i.getEditingShapeId()!==t)return;const d=PT.normalizeText(u||"");i.updateShape({id:t,type:e,props:{text:d}})},[i,t,e]);return{rInput:s,handleKeyDown:l,handleChange:c,isEmpty:a,...r}}function L6(t,e){return Ie("isReadyForEditing",()=>{const n=t.getEditingShapeId();return n!==null&&(n===e||t.getHoveredShapeId()===e)},[t,e])}function $0e(t){const e=Ee(),n=Ie("isEditing",()=>e.getEditingShapeId()===t,[e]),r=L6(e,t),o=v.useCallback(i=>{e.dispatch({...za(i),type:"pointer",name:"pointer_down",target:"shape",shape:e.getShape(t)}),Yr(i)},[e,t]);return{handleFocus:ux,handleBlur:ux,handleInputPointerDown:o,handleDoubleClick:Yr,isEditing:n,isReadyForEditing:r}}const Dft=ce.memo(function({shapeId:e,type:n,text:r,labelColor:o,font:i,fontSize:s,lineHeight:a,align:l,verticalAlign:c,wrap:u,isSelected:d,padding:f=0,onKeyDown:h,classNamePrefix:g,style:y,textWidth:m,textHeight:S}){const{rInput:x,isEmpty:C,isEditing:E,isReadyForEditing:P,...I}=$ft(e,n,r),T=PT.normalizeTextForDom(r||""),M=T.length>0,R=A0e(l);if(!E&&!M)return null;const A=g||"tl-text";return w.jsx("div",{className:`${A}-label tl-text-wrapper tl-plain-text-wrapper`,"data-font":i,"data-align":l,"data-hastext":!C,"data-isediting":E,"data-is-ready-for-editing":P,"data-textwrap":!!u,"data-isselected":d,style:{justifyContent:l==="middle"||R?"center":l,alignItems:c==="middle"?"center":c,padding:f,...y},children:w.jsxs("div",{className:`${A}-label__inner tl-text-content__wrapper`,style:{fontSize:s,lineHeight:Math.floor(s*a)+"px",minHeight:Math.floor(s*a)+"px",minWidth:Math.ceil(m||0),color:o,width:m?Math.ceil(m):void 0,height:S?Math.ceil(S):void 0},children:[w.jsx("div",{className:`${A} tl-text tl-text-content`,dir:"auto",children:T.split(`
`).map((j,N)=>w.jsx("div",{dir:"auto",children:j},N))}),(P||d)&&w.jsx(kft,{ref:x,text:r,isEditing:E,shapeId:e,...I,handleKeyDown:h??I.handleKeyDown})]})})});function Kl(){return zd({isDarkMode:Rw()})}function N6(t){return{key:`${Rd.id}:${t}`,async getElement(){return t!=="pattern"?null:w.jsx(jft,{})}}}function jft(){const t=z6(),e=xg(),n=Kl(),r=8/12;return w.jsxs(w.Fragment,{children:[w.jsxs("mask",{id:e,children:[w.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:"white"}),w.jsxs("g",{strokeLinecap:"round",stroke:"black",children:[w.jsx("line",{x1:r*1,y1:r*3,x2:r*3,y2:r*1}),w.jsx("line",{x1:r*5,y1:r*7,x2:r*7,y2:r*5}),w.jsx("line",{x1:r*9,y1:r*11,x2:r*11,y2:r*9})]})]}),w.jsx("pattern",{id:t(1,n.id),width:"8",height:"8",patternUnits:"userSpaceOnUse",children:w.jsx("rect",{x:"0",y:"0",width:"8",height:"8",fill:n.solid,mask:`url(#${e})`})})]})}function F6(){return{key:`${Rd.id}:pattern`,component:zft}}const Yb=8,kee=(t,e,n)=>new Promise((r,o)=>{const i=Yb*e*t,s=document.createElement("canvas");s.width=i,s.height=i;const a=s.getContext("2d");if(!a)return;a.fillStyle=n?cI.darkMode.solid:cI.lightMode.solid,a.fillRect(0,0,i,i),a.globalCompositeOperation="destination-out",a.lineCap="round",a.lineWidth=1.25*e*t;const l=8/12,c=u=>u*e*t;a.beginPath(),a.moveTo(c(l*1),c(l*3)),a.lineTo(c(l*3),c(l*1)),a.moveTo(c(l*5),c(l*7)),a.lineTo(c(l*7),c(l*5)),a.moveTo(c(l*9),c(l*11)),a.lineTo(c(l*11),c(l*9)),a.stroke(),s.toBlob(u=>{!u||so.throwToBlob.get()?o():r(u)})}),Aee=(t,e)=>{const n=document.createElement("canvas");n.width=t[0],n.height=t[1];const r=n.getContext("2d");return r?(e(r),n.toDataURL()):""};let tL=null;function Lft(){return tL||(tL={white:Aee([1,1],t=>{t.fillStyle="#f8f9fa",t.fillRect(0,0,1,1)}),black:Aee([1,1],t=>{t.fillStyle="#212529",t.fillRect(0,0,1,1)})}),tL}function D0e(t){return Math.ceil(Math.log2(Math.max(1,t)))}function z6(){const t=Ic("hash_pattern");return v.useCallback((e,n)=>{const r=D0e(e);return PB(t,`${n}_${r}`)},[t])}function j0e(t){const e=[],r=D0e(t);for(let o=0;o<=r;o++)e.push(Math.pow(2,o));return e}function Nft(t){const e=Lft();return j0e(t).flatMap(n=>[{zoom:n,url:e.white,theme:"light"},{zoom:n,url:e.black,theme:"dark"}])}function Fft(){const t=Ee(),e=Ie("devicePixelRatio",()=>t.getInstanceState().devicePixelRatio,[t]),n=Ie("maxZoom",()=>Math.ceil(Li(t.getCameraOptions().zoomSteps)),[t]),[r,o]=v.useState(!1),[i,s]=v.useState(()=>Nft(n)),a=z6();return v.useEffect(()=>{const c=Promise.all(j0e(n).flatMap(d=>[kee(e,d,!1).then(f=>({zoom:d,theme:"light",url:URL.createObjectURL(f)})),kee(e,d,!0).then(f=>({zoom:d,theme:"dark",url:URL.createObjectURL(f)}))]));let u=!1;return c.then(d=>{u||(s(d),o(!0))}),()=>{u=!0,o(!1),c.then(d=>{for(const{url:f}of d)URL.revokeObjectURL(f)})}},[e,n]),{defs:w.jsx(w.Fragment,{children:i.map(c=>{const u=a(c.zoom,c.theme);return w.jsx("pattern",{id:u,width:Yb,height:Yb,patternUnits:"userSpaceOnUse",children:w.jsx("image",{href:c.url,width:Yb,height:Yb})},u)})}),isReady:r}}function zft(){const t=Ee(),e=v.useRef(null),{defs:n,isReady:r}=Fft();return v.useEffect(()=>{if(r&&vr.isSafari){const o=L0e(e.current);o&&t.timers.requestAnimationFrame(()=>{o.style.display="none",t.timers.requestAnimationFrame(()=>{o.style.display=""})})}},[t,r]),w.jsx("g",{ref:e,"data-testid":r?"ready-pattern-fill-defs":void 0,children:n})}function L0e(t){return t.classList.contains("tl-html-layer")?t:t.parentElement?L0e(t.parentElement):null}const ss=ce.memo(function({theme:e,d:n,color:r,fill:o,scale:i}){switch(o){case"none":return null;case"solid":return w.jsx("path",{fill:e[r].semi,d:n});case"semi":return w.jsx("path",{fill:e.solid,d:n});case"fill":return w.jsx("path",{fill:e[r].fill,d:n});case"pattern":return w.jsx(Bft,{theme:e,color:r,fill:o,d:n,scale:i})}});function Bft({d:t,color:e,theme:n}){const r=Ee(),o=Iw(),i=Ie("zoomLevel",()=>r.getZoomLevel(),[r]),s=z6(),a=r.getZoomLevel()<=.18;return w.jsxs(w.Fragment,{children:[w.jsx("path",{fill:n[e].pattern,d:t}),w.jsx("path",{fill:o?`url(#${s(1,n.id)})`:a?n[e].semi:`url(#${s(i,n.id)})`,d:t})]})}function Hft(t){return t.replace(/\s/g,"")}function M3(t,e,n){const{padding:r=0}=n;if(e.length===0)return null;const o=rt.From(e[0].box);for(const{box:c}of e)o.union(c);const i=r+(n.offsetX??0),s=(n.offsetY??0)+n.fontSize/2+(n.verticalTextAlign==="start"?r:n.verticalTextAlign==="end"?n.height-r-o.height:(Math.ceil(n.height)-o.height)/2);let a=null;const l=[];for(const{text:c,box:u}of e)a!==null&&u.y>a&&l.push(w.jsx("tspan",{alignmentBaseline:"mathematical",x:i,y:u.y+s,children:`
`},l.length)),l.push(w.jsx("tspan",{alignmentBaseline:"mathematical",x:u.x+i,y:u.y+s,unicodeBidi:"plaintext",children:Hft(c)},l.length)),a=u.y;return w.jsx("text",{fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,dominantBaseline:"mathematical",alignmentBaseline:"mathematical",stroke:n.stroke,strokeWidth:n.strokeWidth,fill:n.fill,children:l})}function Uft({fontSize:t,font:e,align:n,verticalAlign:r,text:o,labelColor:i,bounds:s,padding:a=16,stroke:l=!0}){const c=Ee(),u=Kl(),d={fontSize:t,fontFamily:Jle[e],textAlign:n,verticalTextAlign:r,width:Math.ceil(s.width),height:Math.ceil(s.height),padding:a,lineHeight:qi.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0,offsetY:0,fill:i,stroke:void 0,strokeWidth:void 0},f=c.textMeasure.measureTextSpans(o,d),h=Aft(n,a,f,s.width);h&&(d.offsetX=h),d.offsetX+=s.x,d.offsetY+=s.y;const g=M3(c,f,d);let y=null;return l&&(d.fill=u.background,d.stroke=u.background,d.strokeWidth=2,y=M3(c,f,d)),w.jsxs(w.Fragment,{children:[y,g]})}function N0e(t,e,n){switch(e.type){case"straight":return new Cd().moveTo(e.start.point.x,e.start.point.y,{offset:0,roundness:0}).lineTo(e.end.point.x,e.end.point.y,{offset:0,roundness:0}).toSvg(n);case"arc":return new Cd().moveTo(e.start.point.x,e.start.point.y,{offset:0,roundness:0}).arcTo(e.bodyArc.radius,!!e.bodyArc.largeArcFlag,!!e.bodyArc.sweepFlag,e.end.point.x,e.end.point.y,{offset:0,roundness:0}).toSvg(n);case"elbow":{const r=new Cd;r.moveTo(e.start.point.x,e.start.point.y,{offset:0});for(let o=1;o<e.route.points.length;o++){const i=e.route.points[o];e.route.skipPointsWhenDrawing.has(i)||r.lineTo(i.x,i.y,{offset:o===e.route.points.length-1?0:void 0})}return r.toSvg(n)}default:Jn(e,"type")}}function Wft(t,e){switch(t.type){case"straight":return new Cd().moveTo(t.start.handle.x,t.start.handle.y).lineTo(t.end.handle.x,t.end.handle.y).toSvg(e);case"arc":return new Cd().moveTo(t.start.handle.x,t.start.handle.y).arcTo(t.handleArc.radius,!!t.handleArc.largeArcFlag,!!t.handleArc.sweepFlag,t.end.handle.x,t.end.handle.y).toSvg(e);case"elbow":{const n=Yct(t.elbow,t.route);return Cd.throughPoints(n.points).toSvg(e)}default:Jn(t,"type")}}const kv=zM("arrow body geometry",(t,e)=>{const n=Pl(t,e);switch(n.type){case"straight":return new hd({start:$.From(n.start.point),end:$.From(n.end.point)});case"arc":return new Nm({center:$.Cast(n.handleArc.center),start:$.Cast(n.start.point),end:$.Cast(n.end.point),sweepFlag:n.bodyArc.sweepFlag,largeArcFlag:n.bodyArc.largeArcFlag});case"elbow":return new vh({points:n.route.points});default:Jn(n,"type")}}),Vft=zM("arrow label size",(t,e)=>{t.fonts.trackFontsForShape(e);let n=0,r=0;const o=kv.get(t,e.id),i=e.props.text||"i",s=o.bounds,a=O3(e),{w:l,h:c}=t.textMeasure.measureText(i,{...qi,fontFamily:jd[e.props.font],fontSize:a,maxWidth:null});n=l,r=c;let u=!1;const d=Pl(t,e),f=z0e(e),h=d.type==="elbow"?Math.max(d.elbow.A.arrowheadOffset+f,32)+Math.max(d.elbow.B.arrowheadOffset+f,32):64;if(s.width>s.height?(n=Math.max(Math.min(l,h),Math.min(s.width-h,l)),u=!0):n>16*a&&(n=16*a,u=!0),u){const{w:g,h:y}=t.textMeasure.measureText(i,{...qi,fontFamily:jd[e.props.font],fontSize:a,maxWidth:n});n=g,r=y}return new $(n,r).addScalar(r0e*2*e.props.scale)},{areRecordsEqual:(t,e)=>t.props===e.props});function F0e(t,e){return Vft.get(t,e.id)??new $(0,0)}function z0e(t){const e=ei[t.props.size];return(sut+(e-ei.s)*2+(e===ei.xl?20:0))*t.props.scale}function qft(t,e,n){const r=kv.get(t,e.id),o=[],i=[new Zs({children:[r],debugColor:"lime"})],s=F0e(t,e),a=z0e(e),l=a/r.length;let c,u;if(n.type==="elbow")o.push(n.start.point,n.end.point),c=rt.FromCenter(n.start.point,s).expandBy(a),u=rt.FromCenter(n.end.point,s).expandBy(a);else{const S=r.interpolateAlongEdge(l),x=r.interpolateAlongEdge(1-l);o.push(S,x),c=rt.FromCenter(S,s),u=rt.FromCenter(x,s)}const d=r.intersectPolygon(c.corners),f=r.intersectPolygon(u.corners),h=$ee(n.start.point,d),g=$ee(n.end.point,f);let y=h?r.uninterpolateAlongEdge(h):.5,m=g?r.uninterpolateAlongEdge(g):.5;y>m&&(y=.5,m=.5);for(const S of[...d,...f,...o])i.push(new XB({x:S.x-3,y:S.y-3,radius:3,isFilled:!1,debugColor:"magenta",ignore:!0}));return i.push(new zo({points:c.corners,debugColor:"lime",isFilled:!1,ignore:!0}),new zo({points:u.corners,debugColor:"lime",isFilled:!1,ignore:!0})),{start:y,end:m,dbg:i}}function $P(t,e){const n=[],r=Pl(t,e),o={hasStartBinding:!!r.bindings.start,hasEndBinding:!!r.bindings.end,hasStartArrowhead:r.start.arrowhead!=="none",hasEndArrowhead:r.end.arrowhead!=="none"},i=qft(t,e,r);i.dbg&&n.push(...i.dbg);const s=Kft(e,i,o),l=kv.get(t,e.id).interpolateAlongEdge(s),c=F0e(t,e);return{box:rt.FromCenter(l,c),debugGeom:n}}function Kft(t,e,n){const{hasEndArrowhead:r,hasEndBinding:o,hasStartBinding:i,hasStartArrowhead:s}=n;return zr(t.props.labelPosition,s||i?e.start:0,r||o?e.end:1)}function $ee(t,e){let n=null,r=-1/0;for(const o of e){const i=$.Dist2(t,o);i>r&&(n=o,r=i)}return n}function O3(t){return iut[t.props.size]*t.props.scale}function B0e(t,e){const n=Pl(t,e);switch(n.type){case"straight":case"arc":return .5;case"elbow":{const r=n.route.midpointHandle,o=kv.get(t,e.id);return r&&o?o.uninterpolateAlongEdge(r.point):.5}default:Jn(n,"type")}}function Gft(t,e,n){const r=e==="end"?t.end.point:t.start.point;let o;switch(t.type){case"straight":{const i=e==="end"?t.start.point:t.end.point,s=$.Dist(i,r),a=zr(s/5,n,n*3);o=$.Nudge(r,i,a);break}case"arc":{const i=Math.abs(t.bodyArc.length),s=zr(i/5,n,n*3),a=lqe(r,s,t.handleArc.center,t.handleArc.radius);o=e==="end"?t.handleArc.sweepFlag?a[0]:a[1]:t.handleArc.sweepFlag?a[1]:a[0];break}case"elbow":{const i=e==="end"?t.route.points[t.route.points.length-2]:t.route.points[1],s=$.ManhattanDist(i,r),a=zr(s/2,n,n*3);o=i?$.Nudge(r,i,a):r;break}default:Jn(t,"type")}return $.IsNaN(o)&&(o=r),{point:r,int:o}}function Xft({point:t,int:e}){const n=$.RotWith(e,t,cr/6),r=$.RotWith(e,t,-cr/6);return`M ${n.x} ${n.y} L ${t.x} ${t.y} L ${r.x} ${r.y}`}function Yft({point:t,int:e}){const n=$.RotWith(e,t,cr/6),r=$.RotWith(e,t,-cr/6);return`M ${n.x} ${n.y} L ${r.x} ${r.y} L ${t.x} ${t.y} Z`}function Qft({point:t,int:e}){const n=$.Sub(e,t).div(2),r=$.Add(t,$.Rot(n,Gr)),o=$.Sub(t,$.Rot(n,Gr));return`M ${r.x} ${r.y} L ${e.x} ${e.y} L ${o.x} ${o.y} Z`}function Zft({point:t,int:e}){const n=$.Lrp(t,e,.45),r=$.Dist(n,t);return`M ${n.x-r},${n.y}
  a ${r},${r} 0 1,0 ${r*2},0
  a ${r},${r} 0 1,0 -${r*2},0 `}function Jft({point:t,int:e}){const n=$.Lrp(t,e,.75),r=$.RotWith(n,t,cr/4),o=$.RotWith(n,t,-cr/4),i=$.Lrp(r,o,.5);return i.add($.Sub(i,t)),`M ${i.x} ${i.y} L ${o.x} ${o.y} ${t.x} ${t.y} L ${r.x} ${r.y} Z`}function eht({int:t,point:e}){const n=$.Lrp(e,t,.85),r=$.Sub(n,e).div(2),o=$.Add(e,$.Rot(r,Gr)),i=$.Sub(e,$.Rot(r,Gr)),s=$.Add(n,$.Rot(r,Gr)),a=$.Sub(n,$.Rot(r,Gr));return`M ${o.x} ${o.y} L ${s.x} ${s.y} L ${a.x} ${a.y} L ${i.x} ${i.y} Z`}function tht({int:t,point:e}){const n=$.Sub(t,e).div(2),r=$.Add(e,$.Rot(n,Gr)),o=$.Sub(e,$.Rot(n,Gr));return`M ${r.x} ${r.y} L ${o.x} ${o.y}`}function _T(t,e,n){const r=e==="end"?t.end.arrowhead:t.start.arrowhead;if(r==="none")return;const o=Gft(t,e,n);if(o){switch(r){case"bar":return tht(o);case"square":return eht(o);case"diamond":return Jft(o);case"dot":return Zft(o);case"inverted":return Qft(o);case"arrow":return Xft(o);case"triangle":return Yft(o)}return""}}function nht({arrow:t}){var s,a;const e=Ee(),n=Ie("elbow arrow grid",()=>{try{return e0e(e,e.getShape(t.id),si(e,t))}catch(l){console.error(l);return}},[e,t.id]);if(!n)return null;const r=rt.Common([n.A.original,n.B.original]).expandBy(50),o=((s=n.route)==null?void 0:s.name)??"",i=(a=n.route)==null?void 0:a.midpointHandle;return w.jsxs(w.Fragment,{children:[n.midX!==null&&w.jsx(Sp,{a:{x:n.midX,y:r.minY},b:{x:n.midX,y:r.maxY},stroke:"red"}),n.midY!==null&&w.jsx(Sp,{a:{x:r.minX,y:n.midY},b:{x:r.maxX,y:n.midY},stroke:"blue"}),(i==null?void 0:i.axis)==="x"&&n.midXRange&&w.jsx(Sp,{a:{x:n.midXRange.lo,y:i.point.y},b:{x:n.midXRange.hi,y:i.point.y},stroke:"red",strokeDasharray:"0 2"}),(i==null?void 0:i.axis)==="y"&&n.midYRange&&w.jsx(Sp,{a:{x:i.point.x,y:n.midYRange.lo},b:{x:i.point.x,y:n.midYRange.hi},stroke:"blue",strokeDasharray:"0 2"}),w.jsx(Cm,{box:n.A.original,stroke:"orange"}),w.jsx(Cm,{box:n.A.expanded,stroke:"orange",strokeWidth:.5}),w.jsx(Cm,{box:n.A.original.clone().expandBy(n.options.minElbowLegLength),stroke:"orange",strokeWidth:.5}),w.jsx(Cm,{box:n.B.original,stroke:"lightskyblue"}),w.jsx(Cm,{box:n.B.expanded,stroke:"lightskyblue",strokeWidth:.5}),w.jsx(Cm,{box:n.B.original.clone().expandBy(n.options.minElbowLegLength),stroke:"lightskyblue",strokeWidth:.5}),w.jsx(gf,{edge:n.A.edges.top,axis:"x",stroke:"orange"}),w.jsx(gf,{edge:n.B.edges.top,axis:"x",stroke:"lightskyblue"}),w.jsx(gf,{edge:n.A.edges.right,axis:"y",stroke:"orange"}),w.jsx(gf,{edge:n.B.edges.right,axis:"y",stroke:"lightskyblue"}),w.jsx(gf,{edge:n.A.edges.bottom,axis:"x",stroke:"orange"}),w.jsx(gf,{edge:n.B.edges.bottom,axis:"x",stroke:"lightskyblue"}),w.jsx(gf,{edge:n.A.edges.left,axis:"y",stroke:"orange"}),w.jsx(gf,{edge:n.B.edges.left,axis:"y",stroke:"lightskyblue"}),n.route&&w.jsx(rht,{route:n.route.points,strokeWidth:10}),w.jsx("text",{x:r.minX+5,y:r.minY-3,fontSize:10,fill:"black",stroke:"var(--color-background)",strokeWidth:2,paintOrder:"stroke",children:o}),w.jsxs("text",{x:n.A.expanded.x,y:n.A.expanded.y,fontSize:10,fill:"black",stroke:"var(--color-background)",strokeWidth:2,paintOrder:"stroke",children:["A",n.route&&`, ${n.route.aEdgePicking}`,n.A.isPoint&&", point"]}),w.jsxs("text",{x:n.B.expanded.x,y:n.B.expanded.y,fontSize:10,fill:"black",stroke:"var(--color-background)",strokeWidth:2,paintOrder:"stroke",children:["B",n.route&&`, ${n.route.bEdgePicking}`,n.B.isPoint&&", point"]})]})}function Sp({a:t,b:e,...n}){return w.jsx("line",{fill:"none",strokeWidth:1,strokeDasharray:"4,4",stroke:"green",x1:t.x,y1:t.y,x2:e.x,y2:e.y,...n})}function rht({route:t,...e}){return w.jsx("polyline",{fill:"none",stroke:"darkorchid",strokeWidth:3,opacity:.5,points:t.map(n=>`${n.x},${n.y}`).join(" "),...e})}function gf({edge:t,axis:e,...n}){if(!t||t.expanded===null)return null;const r=o=>e==="x"?{x:o.y,y:o.x}:o;return w.jsxs("g",{children:[w.jsx(Sp,{a:r({x:t.expanded,y:t.cross.min}),b:r({x:t.expanded,y:t.cross.max}),strokeDasharray:"0",strokeWidth:1.5,...n}),w.jsx(Sp,{a:r({x:t.expanded-4,y:t.cross.min}),b:r({x:t.expanded+4,y:t.cross.min}),strokeDasharray:"0",strokeWidth:1.5,...n}),w.jsx(Sp,{a:r({x:t.expanded-4,y:t.cross.max}),b:r({x:t.expanded+4,y:t.cross.max}),strokeDasharray:"0",strokeWidth:1.5,...n})]})}function Cm({box:t,...e}){return w.jsx("rect",{x:t.minX,y:t.minY,width:t.width,height:t.height,strokeDasharray:"4,4",strokeWidth:1,fill:"none",...e})}const oht=new Hl;function iht(t){return oht.get(t,e=>{const n=He("current selected arrow shape",()=>{const o=e.getOnlySelectedShape();return!o||!e.isShapeOfType(o,"arrow")?null:o.id}),r=e.store.query.ids("shape",()=>{const o=n.get();return o?{type:{eq:"arrow"},id:{neq:o}}:{type:{eq:"arrow"}}});return He("elbow arrow snap lines",()=>{var a,l;const o=new Map,i=e.getCurrentPageShapeIds(),s=e.getViewportPageBounds();for(const c of r.get()){if(!i.has(c))continue;const u=e.getShape(c);if((u==null?void 0:u.type)!=="arrow")continue;const d=e.getShapePageBounds(c);if(!d||!s.includes(d))continue;const f=si(e,u),g=e.getShapePageGeometry(c).getVertices({includeInternal:!1,includeLabels:!1});for(let y=1;y<g.length;y++){const m=g[y-1],S=g[y];let x=$.Angle(m,S);x<0&&(x+=Math.PI);let C=o.get(x);C||(C=new Set,o.set(x,C));const E=Qb(m,x);C.add({perpDistance:E,startBoundShapeId:(a=f.start)==null?void 0:a.toId,endBoundShapeId:(l=f.end)==null?void 0:l.toId})}}return o})}).get()}function Qb(t,e){const n=$.FromAngle(e).per();return $.Dpr(t,n)}class DP extends Tc{constructor(){super(...arguments);V(this,"options",{expandElbowLegLength:{s:28,m:36,l:44,xl:66},minElbowLegLength:{s:ei.s*3,m:ei.m*3,l:ei.l*3,xl:ei.xl*3},minElbowHandleDistance:16,arcArrowCenterSnapDistance:16,elbowArrowCenterSnapDistance:24,elbowArrowEdgeSnapDistance:20,elbowArrowPointSnapDistance:24,elbowArrowAxisSnapDistance:16,labelCenterSnapDistance:10,elbowMidpointSnapDistance:10,elbowMinSegmentLengthToShowMidpointHandle:20,hoverPreciseTimeout:600,pointingPreciseTimeout:320});V(this,"_resizeInitialBindings",new Hl)}canEdit(){return!0}canBind({toShapeType:n}){return n!=="arrow"}canSnap(){return!1}canTabTo(n){const r=si(this.editor,n);return!!(r.start||r.end||n.props.text)}hideResizeHandles(){return!0}hideRotateHandle(){return!0}hideSelectionBoundsBg(){return!0}hideSelectionBoundsFg(){return!0}canBeLaidOut(n,r){if(r.type==="flip"){const o=si(this.editor,n),{start:i,end:s}=o,{shapes:a=[]}=r;if(i&&!a.find(l=>l.id===i.toId)||s&&!a.find(l=>l.id===s.toId))return!1}return!0}getFontFaces(n){return n.props.text?[$6[`tldraw_${n.props.font}`].normal.normal]:ps}getDefaultProps(){return{kind:"arc",elbowMidPoint:.5,dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{x:0,y:0},end:{x:2,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",scale:1}}getGeometry(n){const r=this.editor.getEditingShapeId()===n.id,o=Pl(this.editor,n),i=[],s=o.type==="straight"?new hd({start:$.From(o.start.point),end:$.From(o.end.point)}):o.type==="arc"?new Nm({center:$.Cast(o.handleArc.center),start:$.Cast(o.start.point),end:$.Cast(o.end.point),sweepFlag:o.bodyArc.sweepFlag,largeArcFlag:o.bodyArc.largeArcFlag}):new vh({points:o.route.points});let a;if(r||n.props.text.trim()){const l=$P(this.editor,n);so.debugGeometry.get()&&i.push(...l.debugGeom),a=new Pu({x:l.box.x,y:l.box.y,width:l.box.w,height:l.box.h,isFilled:!0,isLabel:!0})}return new Zs({children:[...a?[s,a]:[s],...i]})}getHandles(n){const r=Pl(this.editor,n),o=[{id:"start",type:"vertex",index:"a1",x:r.start.handle.x,y:r.start.handle.y},{id:"end",type:"vertex",index:"a3",x:r.end.handle.x,y:r.end.handle.y}];if(n.props.kind==="arc"&&(r.type==="straight"||r.type==="arc")&&o.push({id:"middle",type:"virtual",index:"a2",x:r.middle.x,y:r.middle.y}),n.props.kind==="elbow"&&r.type==="elbow"&&r.route.midpointHandle){const i=this.editor.getShapePageTransform(n.id),s=i.applyToPoint(r.route.midpointHandle.segmentStart),a=i.applyToPoint(r.route.midpointHandle.segmentEnd);$.Dist(s,a)*this.editor.getZoomLevel()>this.options.elbowMinSegmentLengthToShowMidpointHandle&&o.push({id:"middle",type:"vertex",index:"a2",x:r.route.midpointHandle.point.x,y:r.route.midpointHandle.point.y})}return o}getText(n){return n.props.text}onHandleDrag(n,r){const o=r.handle.id;switch(o){case"middle":switch(n.props.kind){case"arc":return this.onArcMidpointHandleDrag(n,r);case"elbow":return this.onElbowMidpointHandleDrag(n,r);default:Jn(n.props.kind)}case"start":case"end":return this.onTerminalHandleDrag(n,r,o);default:Jn(o)}}onArcMidpointHandleDrag(n,{handle:r}){const o=si(this.editor,n),{start:i,end:s}=Bm(this.editor,n,o),a=$.Sub(s,i),l=$.Per(a),c=$.Med(s,i),u=$.Sub(c,l),d=$.Add(c,l),f=$.NearestPointOnLineSegment(u,d,r,!1);let h=$.Dist(f,c);return $.Clockwise(f,s,c)&&(h*=-1),{id:n.id,type:n.type,props:{bend:h}}}onElbowMidpointHandleDrag(n,{handle:r}){var C,E,P,I,T;const o=Pl(this.editor,n);if((o==null?void 0:o.type)!=="elbow")return;const i=this.editor.getShapePageTransform(n.id),s=i.applyToPoint(r),a=(C=o.route.midpointHandle)==null?void 0:C.axis;if(!a)return;const l=Ax[a],c=o.elbow[l.midRange];if(!c)return;let u=$.Angle(i.applyToPoint(l.v(0,0)),i.applyToPoint(l.v(0,1)));u<0&&(u+=Math.PI);const d=Qb(s,u),f=Qb(i.applyToPoint(l.v(c.lo,0)),u),h=Qb(i.applyToPoint(l.v(c.hi,0)),u),g=this.options.elbowMidpointSnapDistance/this.editor.getZoomLevel(),y=Qb(i.applyToPoint(l.v(Pn(c.lo,c.hi,.5),0)),u);let m=y,S=Math.abs(y-d);for(const[M,R]of iht(this.editor)){const{isParallel:A,isFlippedParallel:j}=lht(u,M);if(A||j)for(const N of R){const k=N.startBoundShapeId&&(N.startBoundShapeId===((E=o.bindings.start)==null?void 0:E.toId)||N.startBoundShapeId===((P=o.bindings.end)==null?void 0:P.toId)),D=N.endBoundShapeId&&(N.endBoundShapeId===((I=o.bindings.start)==null?void 0:I.toId)||N.endBoundShapeId===((T=o.bindings.end)==null?void 0:T.toId));if(!k&&!D)continue;const F=j?-N.perpDistance:N.perpDistance,H=Math.abs(F-d);H<S&&(m=F,S=H)}}S>g&&(m=d);const x=zr(mv(f,h,m),0,1);return{id:n.id,type:n.type,props:{elbowMidPoint:x}}}onTerminalHandleDrag(n,{handle:r,isPrecise:o},i){const s=si(this.editor,n),a={id:n.id,type:"arrow",props:{}},l=s[i],u=s[i==="start"?"end":"start"],d=X2({editor:this.editor,pointInPageSpace:this.editor.getShapePageTransform(n.id).applyToPoint(r),arrow:n,isPrecise:o,isExact:this.editor.inputs.altKey,currentBinding:l,oppositeBinding:u});if(!d){qb(this.editor,n,i);const g=el(new $(r.x,r.y),this.editor);return a.props[i]={x:g.x,y:g.y},a}const f={terminal:i,normalizedAnchor:d.normalizedAnchor,isPrecise:d.isPrecise,isExact:this.editor.inputs.altKey,snap:d.snap};xb(this.editor,n,d.target.id,f);const h=si(this.editor,n);return h.start&&h.end&&h.start.toId===h.end.toId&&$.Equals(h.start.props.normalizedAnchor,h.end.props.normalizedAnchor)&&xb(this.editor,n,h.end.toId,{...h.end.props,normalizedAnchor:{x:h.end.props.normalizedAnchor.x+.05,y:h.end.props.normalizedAnchor.y}}),a}onTranslateStart(n){const r=si(this.editor,n);if(n.props.kind==="elbow"&&this.editor.getOnlySelectedShapeId()===n.id){const a=Pl(this.editor,n);if(!a)return;const l={id:n.id,type:"arrow",props:{}};return r.start&&(l.props.start={x:a.start.point.x,y:a.start.point.y},qb(this.editor,n,"start")),r.end&&(l.props.end={x:a.end.point.x,y:a.end.point.y},qb(this.editor,n,"end")),l}const o=Bm(this.editor,n,r),i=this.editor.getShapePageTransform(n.id),s=this.editor.getSelectedShapeIds();if(!(r.start&&(s.includes(r.start.toId)||this.editor.isAncestorSelected(r.start.toId))||r.end&&(s.includes(r.end.toId)||this.editor.isAncestorSelected(r.end.toId)))){jee.set(n,{pagePosition:i.applyToPoint(n),terminalBindings:hh(o,(a,l)=>{const c=r[a];return c?{binding:c,shapePosition:l,pagePosition:i.applyToPoint(l)}:null})}),r.start&&(XI({editor:this.editor,arrow:n,terminal:"start",useHandle:!0}),n=this.editor.getShape(n.id)),r.end&&XI({editor:this.editor,arrow:n,terminal:"end",useHandle:!0});for(const a of["start","end"]){const l=r[a];l&&this.editor.updateBinding({...l,props:{...l.props,isPrecise:!0}})}}}onTranslate(n,r){const o=jee.get(n);if(!o)return;const i=this.editor.getShapePageTransform(r.id),s=$.Sub(i.applyToPoint(r),o.pagePosition);for(const a of Object.values(o.terminalBindings)){if(!a)continue;const l=$.Add(a.pagePosition,$.Mul(s,.5)),c=this.editor.getShapeAtPoint(l,{hitInside:!0,hitFrameInside:!0,margin:0,filter:u=>!u.isLocked&&this.editor.canBindShapes({fromShape:r,toShape:u,binding:"arrow"})});if((c==null?void 0:c.id)===a.binding.toId){const u=rt.ZeroFix(this.editor.getShapeGeometry(c).bounds),d=this.editor.getPointInShapeSpace(c,l),f={x:(d.x-u.minX)/u.width,y:(d.y-u.minY)/u.height};xb(this.editor,r,c.id,{...a.binding.props,normalizedAnchor:f,isPrecise:!0})}else qb(this.editor,r,a.binding.props.terminal)}}onResize(n,r){const{scaleX:o,scaleY:i}=r,s=this._resizeInitialBindings.get(n,()=>si(this.editor,n)),a=Bm(this.editor,n,s),{start:l,end:c}=to(n.props);let{bend:u}=n.props;s.start||(l.x=a.start.x*o,l.y=a.start.y*i),s.end||(c.x=a.end.x*o,c.y=a.end.y*i);const d=Math.abs(o),f=Math.abs(i),h=s!=null&&s.start?$.From(s.start.props.normalizedAnchor):null,g=s!=null&&s.end?$.From(s.end.props.normalizedAnchor):null;return o<0&&i>=0?(u!==0&&(u*=-1,u*=Math.max(d,f)),h&&(h.x=1-h.x),g&&(g.x=1-g.x)):o>=0&&i<0?(u!==0&&(u*=-1,u*=Math.max(d,f)),h&&(h.y=1-h.y),g&&(g.y=1-g.y)):o>=0&&i>=0?u!==0&&(u*=Math.max(d,f)):o<0&&i<0&&(u!==0&&(u*=Math.max(d,f)),h&&(h.x=1-h.x,h.y=1-h.y),g&&(g.x=1-g.x,g.y=1-g.y)),s.start&&h&&xb(this.editor,n,s.start.toId,{...s.start.props,normalizedAnchor:h.toJson()}),s.end&&g&&xb(this.editor,n,s.end.toId,{...s.end.props,normalizedAnchor:g.toJson()}),{props:{start:l,end:c,bend:u}}}onDoubleClickHandle(n,r){switch(r.id){case"start":return{id:n.id,type:n.type,props:{...n.props,arrowheadStart:n.props.arrowheadStart==="none"?"arrow":"none"}};case"end":return{id:n.id,type:n.type,props:{...n.props,arrowheadEnd:n.props.arrowheadEnd==="none"?"arrow":"none"}}}}component(n){const r=Kl(),o=this.editor.getOnlySelectedShape(),i=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","select.translating","arrow.dragging")&&!this.editor.getIsReadonly(),s=Pl(this.editor,n);if(!(s!=null&&s.isValid))return null;const a=$P(this.editor,n),l=n.id===this.editor.getOnlySelectedShapeId(),u=this.editor.getEditingShapeId()===n.id||n.props.text;return w.jsxs(w.Fragment,{children:[w.jsxs(rh,{style:{minWidth:50,minHeight:50},children:[w.jsx(Dee,{shape:n,shouldDisplayHandles:i&&(o==null?void 0:o.id)===n.id}),n.props.kind==="elbow"&&so.debugElbowArrows.get()&&w.jsx(nht,{arrow:n})]}),u&&w.jsx(Dft,{shapeId:n.id,classNamePrefix:"tl-arrow",type:"arrow",font:n.props.font,fontSize:O3(n),lineHeight:qi.lineHeight,align:"middle",verticalAlign:"middle",text:n.props.text,labelColor:r[n.props.labelColor].solid,textWidth:a.box.w-r0e*2*n.props.scale,isSelected:l,padding:0,style:{transform:`translate(${a.box.center.x}px, ${a.box.center.y}px)`}})]})}indicator(n){const r=kw(n.id),o=Ic(n.id+"_clip"),i=Pl(this.editor,n);if(!i)return null;const{start:s,end:a}=Bm(this.editor,n,i==null?void 0:i.bindings),l=this.editor.getShapeGeometry(n),c=l.bounds,u=r||n.props.text.trim()?l.children[1]:null;if($.Equals(s,a))return null;const d=ei[n.props.size]*n.props.scale,f=i.start.arrowhead&&_T(i,"start",d),h=i.end.arrowhead&&_T(i,"end",d),g=f&&i.start.arrowhead!=="arrow"||h&&i.end.arrowhead!=="arrow"||!!u;if(r&&u)return w.jsx("rect",{x:Se(u.x),y:Se(u.y),width:u.w,height:u.h,rx:3.5*n.props.scale,ry:3.5*n.props.scale});const y=!(i.start.arrowhead==="none"||i.start.arrowhead==="arrow"),m=!(i.end.arrowhead==="none"||i.end.arrowhead==="arrow");return w.jsxs("g",{children:[g&&w.jsx("defs",{children:w.jsx(H0e,{radius:3.5*n.props.scale,hasText:n.props.text.trim().length>0,bounds:c,labelBounds:u?u.getBounds():new rt(0,0,0,0),as:y&&f?f:"",ae:m&&h?h:""})}),w.jsxs("g",{style:{clipPath:g?`url(#${o})`:void 0,WebkitClipPath:g?`url(#${o})`:void 0},children:[g&&w.jsx("rect",{x:c.minX-100,y:c.minY-100,width:c.width+200,height:c.height+200,opacity:0}),N0e(n,i,n.props.dash==="draw"?{style:"draw",randomSeed:n.id,strokeWidth:1,passes:1,offset:0,roundness:d*2,props:{strokeWidth:void 0}}:{style:"solid",strokeWidth:1,props:{strokeWidth:void 0}})]}),f&&w.jsx("path",{d:f}),h&&w.jsx("path",{d:h}),u&&w.jsx("rect",{x:Se(u.x),y:Se(u.y),width:u.w,height:u.h,rx:3.5,ry:3.5})]})}onEditStart(n){if(n.props.text.trim()===""){const r=B0e(this.editor,n);this.editor.updateShape({id:n.id,type:n.type,props:{labelPosition:r}})}}onEditEnd(n){const{id:r,type:o,props:{text:i}}=n;i.trimEnd()!==n.props.text&&this.editor.updateShapes([{id:r,type:o,props:{text:i.trimEnd()}}])}toSvg(n,r){r.addExportDef(N6(n.props.fill));const o=zd(r),i=1/n.props.scale;return w.jsxs("g",{transform:`scale(${i})`,children:[w.jsx(Dee,{shape:n,shouldDisplayHandles:!1}),w.jsx(Uft,{fontSize:O3(n),font:n.props.font,align:"middle",verticalAlign:"middle",text:n.props.text,labelColor:o[n.props.labelColor].solid,bounds:$P(this.editor,n).box.clone().expandBy(-4.25*n.props.scale),padding:0})]})}getCanvasSvgDefs(){return[F6(),{key:"arrow:dot",component:sht},{key:"arrow:cross",component:aht}]}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,scale:Pn(n.props.scale,r.props.scale,o),start:{x:Pn(n.props.start.x,r.props.start.x,o),y:Pn(n.props.start.y,r.props.start.y,o)},end:{x:Pn(n.props.end.x,r.props.end.x,o),y:Pn(n.props.end.y,r.props.end.y,o)},bend:Pn(n.props.bend,r.props.bend,o),labelPosition:Pn(n.props.labelPosition,r.props.labelPosition,o)}}}V(DP,"type","arrow"),V(DP,"props",tce),V(DP,"migrations",nce);const Dee=Ii(function({shape:e,shouldDisplayHandles:n}){const r=Ee(),o=Kl(),i=Pl(r,e),s=Ie("force solid",()=>r.getZoomLevel()<.2,[r]),a=Ic(e.id+"_clip"),l=Ic("arrowhead-dot"),c=Ic("arrowhead-cross"),u=kw(e.id),d=r.getShapeGeometry(e);if(!d)return null;const f=rt.ZeroFix(d.bounds),h=si(r,e);if(!(i!=null&&i.isValid))return null;const g=ei[e.props.size]*e.props.scale,y=i.start.arrowhead&&_T(i,"start",g),m=i.end.arrowhead&&_T(i,"end",g);let S=null;n&&(h.start||h.end)&&(S=Wft(i,{style:"dashed",start:"skip",end:"skip",lengthRatio:2.5,strokeWidth:2/r.getZoomLevel(),props:{className:"tl-arrow-hint",markerStart:h.start?h.start.props.isExact?"":h.start.props.isPrecise?`url(#${c})`:`url(#${l})`:"",markerEnd:h.end?h.end.props.isExact?"":h.end.props.isPrecise?`url(#${c})`:`url(#${l})`:"",opacity:.16}}));const x=$P(r,e),C=!(i.start.arrowhead==="none"||i.start.arrowhead==="arrow"),E=!(i.end.arrowhead==="none"||i.end.arrowhead==="arrow");return w.jsxs(w.Fragment,{children:[w.jsx("defs",{children:w.jsx("clipPath",{id:a,children:w.jsx(H0e,{radius:3.5*e.props.scale,hasText:u||e.props.text.trim().length>0,bounds:f,labelBounds:x.box,as:C&&y?y:"",ae:E&&m?m:""})})}),w.jsxs("g",{fill:"none",stroke:o[e.props.color].solid,strokeWidth:g,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[S,w.jsxs("g",{style:{clipPath:`url(#${a})`,WebkitClipPath:`url(#${a})`},children:[w.jsx("rect",{x:Se(f.minX-100),y:Se(f.minY-100),width:Se(f.width+200),height:Se(f.height+200),opacity:0}),N0e(e,i,{style:e.props.dash,strokeWidth:g,forceSolid:s,randomSeed:e.id})]}),y&&C&&e.props.fill!=="none"&&w.jsx(ss,{theme:o,d:y,color:e.props.color,fill:e.props.fill,scale:e.props.scale}),m&&E&&e.props.fill!=="none"&&w.jsx(ss,{theme:o,d:m,color:e.props.color,fill:e.props.fill,scale:e.props.scale}),y&&w.jsx("path",{d:y}),m&&w.jsx("path",{d:m})]})]})});function H0e({radius:t,hasText:e,bounds:n,labelBounds:r,as:o,ae:i}){const s=v.useMemo(()=>{const a=new Cd;return a.moveTo(n.left-100,n.top-100).lineTo(n.right+100,n.top-100).lineTo(n.right+100,n.bottom+100).lineTo(n.left-100,n.bottom+100).close(),e&&a.moveTo(r.left,r.top+t).lineTo(r.left,r.bottom-t).arcTo(t,!1,!1,r.left+t,r.bottom).lineTo(r.right-t,r.bottom).arcTo(t,!1,!1,r.right,r.bottom-t).lineTo(r.right,r.top+t).arcTo(t,!1,!1,r.right-t,r.top).lineTo(r.left+t,r.top).arcTo(t,!1,!1,r.left,r.top+t).close(),a.toD()},[t,e,n.bottom,n.left,n.right,n.top,r.bottom,r.left,r.right,r.top]);return w.jsx("path",{d:`${s}${o}${i}`})}const jee=new WeakMap;function sht(){const t=Ic("arrowhead-dot");return w.jsx("marker",{id:t,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:w.jsx("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function aht(){const t=Ic("arrowhead-cross");return w.jsxs("marker",{id:t,className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[w.jsx("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),w.jsx("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}function lht(t,e,n=1e-4){const r=Math.abs(t-e),o=r<n,i=Math.abs(r-Math.PI)<n,s=Math.abs(r-Ir)<n;return{isParallel:o||s,isFlippedParallel:i}}const Lee="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function Av({url:t}){const e=Ee(),n=Ie("zoomLevel",()=>e.getZoomLevel()<.32,[e]);return w.jsx("a",{className:he("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:Yr,onPointerUp:Yr,title:t,draggable:!1,children:w.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${Lee}") center 100% / 100% no-repeat`,WebkitMask:`url("${Lee}") center 100% / 100% no-repeat`}})})}const Nee="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E",cht=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function IT(t){return cht.map(n=>{const{offsetX:r,offsetY:o,blur:i,spread:s,color:a}=n,l=new $(r,o),{x:c,y:u}=l.rot(-t);return`${c}px ${u}px ${i}px ${s}px ${a}`}).join(", ")}const uht=300,U0e=320,dht=46,fht=101;class jP extends sy{canResize(){return!1}hideSelectionBoundsFg(){return!0}getText(e){return e.props.url}getAriaDescriptor(e){const n=e.props.assetId?this.editor.getAsset(e.props.assetId):null;if(n!=null&&n.props.title)return w0e(n.props.title)+(n.props.description?", "+n.props.description:"")}getDefaultProps(){return{url:"",w:uht,h:U0e,assetId:null}}component(e){return w.jsx(hht,{shape:e,util:this})}indicator(e){return w.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h),rx:"6",ry:"6"})}onBeforeCreate(e){return Fee(this.editor,e)}onBeforeUpdate(e,n){if(e.props.url!==n.props.url)if(Ja.isValid(n.props.url))ght(this.editor,n);else return{...n,props:{...n.props,url:e.props.url}};if(e.props.assetId!==n.props.assetId)return Fee(this.editor,n)}getInterpolatedProps(e,n,r){return{...r>.5?n.props:e.props,w:Pn(e.props.w,n.props.w,r),h:Pn(e.props.h,n.props.h,r)}}}V(jP,"type","bookmark"),V(jP,"props",lce),V(jP,"migrations",cce);function hht({shape:t,util:e}){const n=t.props.assetId?e.editor.getAsset(t.props.assetId):null,r=!!Iw()&&vr.isSafari,o=e.editor.getShapePageTransform(t).rotation(),i=pht(t),[s,a]=v.useState(!0),l=()=>a(!1);return w.jsx(Uf,{children:w.jsxs("div",{className:he("tl-bookmark__container",r&&"tl-bookmark__container--safariExport"),style:{boxShadow:r?void 0:IT(o),maxHeight:t.props.h},children:[(!n||n.props.image)&&w.jsxs("div",{className:"tl-bookmark__image_container",children:[n?w.jsx("img",{className:"tl-bookmark__image",draggable:!1,referrerPolicy:"strict-origin-when-cross-origin",src:n==null?void 0:n.props.image,alt:(n==null?void 0:n.props.title)||""}):w.jsx("div",{className:"tl-bookmark__placeholder"}),(n==null?void 0:n.props.image)&&w.jsx(Av,{url:t.props.url})]}),w.jsxs("div",{className:"tl-bookmark__copy_container",children:[n!=null&&n.props.title?w.jsx("h2",{className:"tl-bookmark__heading",children:w0e(n.props.title)}):null,n!=null&&n.props.description&&(n!=null&&n.props.image)?w.jsx("p",{className:"tl-bookmark__description",children:n.props.description}):null,w.jsxs("a",{className:"tl-bookmark__link",href:t.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:Yr,onPointerUp:Yr,onClick:Yr,children:[s&&(n!=null&&n.props.favicon)?w.jsx("img",{className:"tl-bookmark__favicon",src:n==null?void 0:n.props.favicon,referrerPolicy:"strict-origin-when-cross-origin",onError:l,alt:`favicon of ${i}`}):w.jsx("div",{className:"tl-hyperlink__icon",style:{mask:`url("${Nee}") center 100% / 100% no-repeat`,WebkitMask:`url("${Nee}") center 100% / 100% no-repeat`}}),w.jsx("span",{children:i})]})]})]})})}function Fee(t,e){const n=e.props.assetId?t.getAsset(e.props.assetId):null;let r=U0e;return n&&(n.props.image||(n.props.title?r=fht:r=dht)),{...e,props:{...e.props,h:r}}}const pht=t=>{try{return new URL(t.props.url).hostname.replace(/^www\./,"")}catch{return t.props.url}};function ght(t,e){const{url:n}=e.props,r=nh.createId(N5(n));t.getAsset(r)?e.props.assetId!==r&&t.updateShapes([{id:e.id,type:e.type,props:{assetId:r}}]):(t.updateShapes([{id:e.id,type:e.type,props:{assetId:null}}]),mht(t,e))}const mht=MM(async(t,e)=>{if(t.isDisposed)return;const{url:n}=e.props,r=await t.getAssetForExternalContent({type:"url",url:n});r&&t.run(()=>{t.createAssets([r]),t.updateShapes([{id:e.id,type:e.type,props:{assetId:r.id}}])})},500);function ag(t,e=!1){const n=t.length;if(n<2)return"";let r=t[0].point,o=t[1].point;if(n===2)return`M${hr(r)}L${hr(o)}`;let i="";for(let s=2,a=n-1;s<a;s++)r=t[s].point,o=t[s+1].point,i+=ha(r,o);return e?`M${ha(t[0].point,t[1].point)}Q${hr(t[1].point)}${ha(t[1].point,t[2].point)}T${i}${ha(t[n-1].point,t[0].point)}${ha(t[0].point,t[1].point)}Z`:`M${hr(t[0].point)}Q${hr(t[1].point)}${ha(t[1].point,t[2].point)}${t.length>3?"T":""}${i}L${hr(t[n-1].point)}`}function vht(t,e={}){const{start:n={},end:r={}}=e,{cap:o=!0}=n,{cap:i=!0}=r;nn(!n.taper&&!r.taper,"cap taper not supported here"),nn(!n.easing&&!r.easing,"cap easing not supported here"),nn(o&&i,"cap must be true");const s=Ou(t,e);Y2(s,e);const a=yht(s);let l="";for(const c of a)l+=Sht(c,e);return l}function yht(t){if(t.length<=2)return[t];const e=[];let n=[t[0]],r=$.Sub(t[1].point,t[0].point).uni(),o,i,s,a,l;for(let c=1,u=t.length;c<u-1;c++){if(s=t[c-1],a=t[c],l=t[c+1],o=$.Sub(l.point,a.point).uni(),i=$.Dpr(r,o),r=o,i<-.8){const d={...a,point:a.input};n.push(d),e.push(nL(n)),n=[d];continue}if(n.push(a),!(i>.7)&&($.Dist2(s.point,a.point)+$.Dist2(a.point,l.point))/((s.radius+a.radius+l.radius)/3)**2<1.5){n.push(a),e.push(nL(n)),n=[a];continue}}return n.push(t[t.length-1]),e.push(nL(n)),e}function nL(t){const e=t[0];let n;for(;t.length>2&&(n=t[1],$.Dist2(e.point,n.point)<((e.radius+n.radius)/2*.5)**2);)t.splice(1,1);const r=t[t.length-1];let o;for(;t.length>2&&(o=t[t.length-2],$.Dist2(r.point,o.point)<((r.radius+o.radius)/2*.5)**2);)t.splice(t.length-2,1);return t.length>1&&(t[0]={...t[0],vector:$.Sub(t[0].point,t[1].point).uni()},t[t.length-1]={...t[t.length-1],vector:$.Sub(t[t.length-2].point,t[t.length-1].point).uni()}),t}function bht(t,e,n){return"M "+t+" "+e+" m -"+n+", 0 a "+n+","+n+" 0 1,1 "+n*2+",0 a "+n+","+n+" 0 1,1 -"+n*2+",0"}function Sht(t,e={}){if(t.length===0)return"";if(t.length===1)return bht(t[0].point.x,t[0].point.y,t[0].radius);const{left:n,right:r}=Jye(t,e);r.reverse();let o=`M${hr(n[0])}T`;for(let i=1;i<n.length;i++)o+=ha(n[i-1],n[i]);{const i=t[t.length-1],s=i.radius,a=i.vector.clone().per().neg(),l=$.Add(i.point,$.Mul(a,s)),c=$.Add(i.point,$.Mul(a,-s));o+=`${hr(l)}A${Se(s)},${Se(s)} 0 0 1 ${hr(c)}T`}for(let i=1;i<r.length;i++)o+=ha(r[i-1],r[i]);{const i=t[0],s=i.radius,a=i.vector.clone().per(),l=$.Add(i.point,$.Mul(a,s)),c=$.Add(i.point,$.Mul(a,-s));o+=`${hr(l)}A${Se(s)},${Se(s)} 0 0 1 ${hr(c)}Z`}return o}const W0e=(t,e,n)=>{const r=[],o=[];t.forEach(c=>r.push(...c.points)),e.forEach(c=>o.push(...c.points));const i=Math.max(r.length,o.length),s=[],a=[];for(let c=0;c<i;c++)s.push(r[c]||r[r.length-1]),a.push(o[c]||o[o.length-1]);return[{type:"free",points:s.map((c,u)=>{let d=.5;return a[u].z!==void 0&&c.z!==void 0&&(d=Pn(c.z,a[u].z,n)),{x:Pn(c.x,a[u].x,n),y:Pn(c.y,a[u].y,n),z:d}})}]},xht=t=>t*.65+jWe(t*cr/2)*.35,wht=t=>({size:t,thinning:.5,streamline:vv(t,[9,16],[.64,.74],!0),smoothing:.62,easing:bi.easeOutSine,simulatePressure:!0}),Cht=t=>({size:1+t*1.2,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:xht}),zee=t=>({size:t,thinning:0,streamline:vv(t,[9,16],[.64,.74],!0),smoothing:.62,simulatePressure:!1,easing:bi.linear}),Eht=t=>({size:t,thinning:0,streamline:.62,smoothing:.62,simulatePressure:!1,easing:bi.linear});function B6({strokeWidth:t,showAsComplete:e}){return{size:1+t,thinning:0,streamline:.5,smoothing:.5,simulatePressure:!1,easing:bi.easeOutSine,last:e}}function R3(t,e,n,r){const o=t.isComplete||n;return r?t.isPen?{...Eht(e),last:o}:{...zee(e),last:o}:t.dash==="draw"?t.isPen?{...Cht(e),last:o}:{...wht(e),last:o}:{...zee(e),last:o}}function $v(t){const e=[];for(const n of t)if(n.type==="free"||n.points.length<2)e.push(...n.points.map($.Cast));else{const r=Math.max(4,Math.floor($.Dist(n.points[0],n.points[1])/16));e.push(...$.PointsBetween(n.points[0],n.points[1],r))}return e}function Pht(t,e,n){return{draw:"none",solid:"none",dotted:`${n} ${e*2}`,dashed:`${e*2} ${e*2}`}[t.props.dash]}class LP extends Tc{constructor(){super(...arguments);V(this,"options",{maxPointsPerShape:600})}canTabTo(){return!1}hideResizeHandles(n){return rL(n)}hideRotateHandle(n){return rL(n)}hideSelectionBoundsFg(n){return rL(n)}getDefaultProps(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1,scale:1}}getGeometry(n){const r=$v(n.props.segments),o=(ei[n.props.size]+1)*n.props.scale;if(n.props.segments.length===1){const s=rt.FromPoints(r);if(s.width<o*2&&s.height<o*2)return new XB({x:-o,y:-o,radius:o,isFilled:!0})}const i=Ou(r,R3(n.props,o,n.props.isPen,!0)).map(s=>s.point);return n.props.isClosed?new zo({points:i,isFilled:n.props.fill!=="none"}):new vh({points:i})}component(n){return w.jsx(rh,{children:w.jsx(Bee,{shape:n})})}indicator(n){var u;const r=$v(n.props.segments);let o=(ei[n.props.size]+1)*n.props.scale;!Ie("force solid",()=>{const d=this.editor.getZoomLevel();return d<.5&&d<1.5/o},[this.editor,o])&&!n.props.isPen&&n.props.dash==="draw"&&r.length===1&&(o+=Ul(n.id)()*(o/6));const s=n.props.isComplete||((u=Li(n.props.segments))==null?void 0:u.type)==="straight",a=R3(n.props,o,s,!0),l=Ou(r,a),c=l.length>1?ag(l,n.props.isClosed):V0e(r[0],o);return w.jsx("path",{d:c})}toSvg(n,r){r.addExportDef(N6(n.props.fill));const o=1/n.props.scale;return w.jsx("g",{transform:`scale(${o})`,children:w.jsx(Bee,{shape:n,zoomOverride:1})})}getCanvasSvgDefs(){return[F6()]}onResize(n,r){const{scaleX:o,scaleY:i}=r,s=[];for(const a of n.props.segments)s.push({...a,points:a.points.map(({x:l,y:c,z:u})=>({x:dd(o*l),y:dd(i*c),z:u}))});return{props:{segments:s}}}expandSelectionOutlinePx(n){const r=n.props.dash==="draw"?1.6:1;return ei[n.props.size]*r/2*n.props.scale}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,segments:W0e(n.props.segments,r.props.segments,o),scale:Pn(n.props.scale,r.props.scale,o)}}}V(LP,"type","draw"),V(LP,"props",dce),V(LP,"migrations",fce);function V0e(t,e){const n=(e+1)*.5;return`M ${t.x} ${t.y} m -${n}, 0 a ${n},${n} 0 1,0 ${n*2},0 a ${n},${n} 0 1,0 -${n*2},0`}function rL(t){return t.props.segments.length===1&&t.props.segments[0].points.length<2}function Bee({shape:t,zoomOverride:e}){var h;const n=Kl(),r=Ee(),o=$v(t.props.segments),i=t.props.isComplete||((h=Li(t.props.segments))==null?void 0:h.type)==="straight";let s=(ei[t.props.size]+1)*t.props.scale;const a=Ie("force solid",()=>{const g=e??r.getZoomLevel();return g<.5&&g<1.5/s},[r,s,e]),l=Ie("dot adjustment",()=>(e??r.getZoomLevel())<.2?0:.1,[r,e]);!a&&!t.props.isPen&&t.props.dash==="draw"&&o.length===1&&(s+=Ul(t.id)()*(s/6));const c=R3(t.props,s,i,a);if(!a&&t.props.dash==="draw")return w.jsxs(w.Fragment,{children:[t.props.isClosed&&t.props.fill&&o.length>1?w.jsx(ss,{d:ag(Ou(o,c),t.props.isClosed),theme:n,color:t.props.color,fill:t.props.isClosed?t.props.fill:"none",scale:t.props.scale}):null,w.jsx("path",{d:vht(o,c),strokeLinecap:"round",fill:n[t.props.color].solid})]});const u=Ou(o,c),d=u.length<2,f=d?V0e(o[0],0):ag(u,t.props.isClosed);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{d:f,theme:n,color:t.props.color,fill:d||t.props.isClosed?t.props.fill:"none",scale:t.props.scale}),w.jsx("path",{d:f,strokeLinecap:"round",fill:d?n[t.props.color].solid:"none",stroke:n[t.props.color].solid,strokeWidth:s,strokeDasharray:d?"none":Pht(t,s,l),strokeDashoffset:"0"})]})}function _ht(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Iht(t,e){const n=yn(e);if(!n)return;const r=n.host.replace("www.","");for(const o of t)if(q0e(o.hostnames,r)){const i=o.fromEmbedUrl(e);if(i)return{definition:o,url:i,embedUrl:e}}}const Tht=t=>t.split("*").map(e=>_ht(e)).join(".+"),q0e=(t,e)=>!!t.find(n=>{const r=new RegExp(Tht(n));return e.match(r)});function Mht(t,e){const n=yn(e);if(!n)return;const r=n.host.replace("www.","");for(const o of t)if(q0e(o.hostnames,r)){const i=o.toEmbedUrl(e);if(i)return{definition:o,embedUrl:i,url:e}}}function Oht(t,e){try{return Mht(t,e)??Iht(t,e)}catch{return}}const Rht=t=>Object.entries(t).filter(([e,n])=>n).map(([e])=>e).join(" "),ud=class ud extends sy{static setEmbedDefinitions(e){ud.embedDefinitions=e}getEmbedDefinitions(){return ud.embedDefinitions}getEmbedDefinition(e){return Oht(ud.embedDefinitions,e)}getText(e){return e.props.url}getAriaDescriptor(e){const n=this.getEmbedDefinition(e.props.url);return n==null?void 0:n.definition.title}hideSelectionBoundsFg(e){return!this.canResize(e)}canEdit(){return!0}canResize(e){var n,r;return!!((r=(n=this.getEmbedDefinition(e.props.url))==null?void 0:n.definition)!=null&&r.doesResize)}canEditInReadonly(){return!0}getDefaultProps(){return{w:300,h:300,url:""}}isAspectRatioLocked(e){const n=this.getEmbedDefinition(e.props.url);return(n==null?void 0:n.definition.isAspectRatioLocked)??!1}onResize(e,n){const r=this.isAspectRatioLocked(e),o=this.getEmbedDefinition(e.props.url);let i=(o==null?void 0:o.definition.minWidth)??200,s=(o==null?void 0:o.definition.minHeight)??200;if(r){const a=e.props.w/e.props.h;a>1?i*=a:s/=a}return a2(e,n,{minWidth:i,minHeight:s})}component(e){const n=Iw(),{w:r,h:o,url:i}=e.props,s=kw(e.id),a=this.getEmbedDefinition(i),l=Ie("is hovering",()=>{const{editingShapeId:h,hoveredShapeId:g}=this.editor.getCurrentPageState();if(h&&g!==h){const y=this.editor.getShape(h);if(y&&this.editor.isShapeOfType(y,"embed"))return!0}return!1},[]),c=this.editor.getShapePageTransform(e).rotation();if(n)return w.jsx(Uf,{className:"tl-embed-container",id:e.id,children:w.jsx("div",{className:"tl-embed",style:{border:0,boxShadow:IT(c),borderRadius:(a==null?void 0:a.definition.overrideOutlineRadius)??8,background:(a==null?void 0:a.definition.backgroundColor)??"var(--color-background)",width:r,height:o}})});const u=s||l;if(typeof window<"u"&&(window!==window.top||window.self!==window.parent)&&(a==null?void 0:a.definition.type)==="tldraw")return null;if((a==null?void 0:a.definition.type)==="github_gist"){const h=a.url.split("/").pop();if(!h)throw Error("No gist id!");return w.jsx(Uf,{className:"tl-embed-container",id:e.id,children:w.jsx(kht,{id:h,width:Se(r),height:Se(o),isInteractive:u,pageRotation:c})})}const f=Rht({...vlt,...(a==null?void 0:a.definition.overridePermissions)??{}});return w.jsx(Uf,{className:"tl-embed-container",id:e.id,children:a!=null&&a.definition?w.jsx("iframe",{className:"tl-embed",sandbox:f,src:a.embedUrl,width:Se(r),height:Se(o),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",tabIndex:s?0:-1,style:{border:0,pointerEvents:u?"auto":"none",zIndex:u?"":"-1",boxShadow:IT(c),borderRadius:(a==null?void 0:a.definition.overrideOutlineRadius)??8,background:a==null?void 0:a.definition.backgroundColor}}):null})}indicator(e){const n=this.getEmbedDefinition(e.props.url);return w.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h),rx:(n==null?void 0:n.definition.overrideOutlineRadius)??8,ry:(n==null?void 0:n.definition.overrideOutlineRadius)??8})}getInterpolatedProps(e,n,r){return{...r>.5?n.props:e.props,w:Pn(e.props.w,n.props.w,r),h:Pn(e.props.h,n.props.h,r)}}};V(ud,"type","embed"),V(ud,"props",hce),V(ud,"migrations",pce),V(ud,"embedDefinitions",p6);let TT=ud;function kht({id:t,isInteractive:e,width:n,height:r,style:o,pageRotation:i}){if(!t.match(/^[0-9a-f]+$/))throw Error("No gist id!");return w.jsx("iframe",{className:"tl-embed",draggable:!1,width:Se(n),height:Se(r),frameBorder:"0",scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",tabIndex:e?0:-1,style:{...o,pointerEvents:e?"all":"none",zIndex:e?"":"-1",boxShadow:IT(i)},srcDoc:`
			<html>
				<head>
					<base target="_blank">
				</head>
				<body>
					<script src=${`https://gist.github.com/${t}.js`}><\/script>
					<style type="text/css">
						* { margin: 0px; }
						table { height: 100%; background-color: red; }
						.gist { background-color: none; height: 100%;  }
						.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }
					</style>
				</body>
			</html>`})}function k3(t,e){const o=((Tp(t.getShapePageTransform(e.id).rotation())+Math.PI/4)*(2/Math.PI)+4)%4;return Math.floor(o)}const Hee=new WeakMap;function Uee(t,e,n){let r=Hee.get(e.props);if(!r){const o=H6(e.props.name,"Frame")+"",i=t.textMeasure.measureTextSpans(o,n),s=i[0],a=Li(i);r=a.box.w+a.box.x-s.box.x,Hee.set(e.props,r)}return new rt(0,-n.height,r,n.height)}function Wee(t,e){return{fontSize:12,fontFamily:e?"Arial":"Inter, sans-serif",textAlign:"start",width:t,height:24,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle",offsetY:-34,offsetX:0}}function K0e(t,e,n){const r=n?"":"px",o=n?"":"deg";let i;switch(e){case 0:i="";break;case 3:i=`translate(${Se(t.props.w)}${r}, 0${r}) rotate(90${o})`;break;case 2:i=`translate(${Se(t.props.w)}${r}, ${Se(t.props.h)}${r}) rotate(180${o})`;break;case 1:i=`translate(0${r}, ${Se(t.props.h)}${r}) rotate(270${o})`;break;default:throw Error("labelSide out of bounds")}return i}const Aht=v.forwardRef(({id:t,name:e,isEditing:n},r)=>{const o=Ee(),i=v.useCallback(l=>{l.key==="Enter"&&!l.nativeEvent.isComposing&&(Yr(l),l.currentTarget.blur(),o.setEditingShape(null))},[o]),s=v.useCallback(l=>{const c=o.getShape(t);if(!c)return;const u=c.props.name,d=l.currentTarget.value.trim();u!==d&&o.updateShapes([{id:t,type:"frame",props:{name:d}}])},[t,o]),a=v.useCallback(l=>{const c=o.getShape(t);if(!c)return;const u=c.props.name,d=l.currentTarget.value;u!==d&&o.updateShapes([{id:t,type:"frame",props:{name:d}}])},[t,o]);return w.jsxs("div",{className:`tl-frame-label ${n?"tl-frame-label__editing":""}`,children:[w.jsx("input",{className:"tl-frame-name-input",ref:r,disabled:!n,readOnly:!n,style:{display:n?void 0:"none"},value:e,autoFocus:!0,onKeyDown:i,onBlur:s,onChange:a,onPointerDown:n?Yr:void 0,draggable:!1}),H6(e,"Frame")+""]})}),$ht=v.memo(function({id:e,name:n,width:r,height:o,fill:i,stroke:s,color:a,offsetX:l,showColors:c}){const u=Ee(),{side:d,translation:f}=Ie("shape rotation",()=>{const y=u.getShape(e);if(!y)return{side:0,translation:"translate(0, 0)"};const m=k3(u,y);return{side:m,translation:K0e(y,m,!1)}},[u,l,e]),h=v.useRef(null),g=kw(e);return v.useEffect(()=>{const y=h.current;y&&g&&(y.focus(),y.select())},[h,g]),w.jsx("div",{className:"tl-frame-heading",style:{overflow:g?"visible":"hidden",maxWidth:`calc(var(--tl-zoom) * ${Math.ceil(d===0||d===2?r:o)}px + ${c?"0px":"var(--frame-offset-width)"})`,bottom:"100%",transform:`${f} scale(var(--tl-scale)) translateX(${l}px)`},children:w.jsx("div",{className:"tl-frame-heading-hit-area",style:{color:a,backgroundColor:i,boxShadow:`inset 0px 0px 0px 1px ${s}`},children:w.jsx(Aht,{ref:h,id:e,name:n,isEditing:g})})})}),Dht=12,jht=32,Lht=-7,Nht=4;function H6(t,e){return t.match(/^\s*$/)?e:t}class NP extends sy{constructor(){super(...arguments);V(this,"options",{showColors:!1})}static configure(n){const r=super.configure.call(this,n);return n.showColors&&(r.props={...r.props,color:Us}),r}canEdit(){return!0}getDefaultProps(){return{w:160*2,h:90*2,name:"",color:"black"}}getAriaDescriptor(n){return n.props.name}getGeometry(n){const{editor:r}=this,o=r.getZoomLevel(),i=k3(r,n),s=i%2===1,a=s?n.props.h:n.props.w,l=Wee(a,!1),c=Uee(r,n,l),u=this.options.showColors,d=Dht/o,f=jht/o,h=a+(u?1:d),g=c.w/o,y=c.h/o,m=zr(g+d,f,h),S=(u?-1:Lht)/o,x=Nht/o,C=s?y:m,E=s?m:y;let P,I;switch(i){case 0:{P=S,I=-(y+x);break}case 1:{P=-(y+x),I=n.props.h-(S+m);break}case 2:{P=n.props.w-(S+m),I=n.props.h+x;break}case 3:{P=n.props.w+x,I=S;break}}return new Zs({children:[new Pu({width:n.props.w,height:n.props.h,isFilled:!1}),new Pu({x:P,y:I,width:C,height:E,isFilled:!0,isLabel:!0})]})}getText(n){return n.props.name}component(n){const r=Kl(),o=Ie("is creating this shape",()=>{const h=this.editor.getStateDescendant("select.resizing");if(!h||!h.getIsActive())return!1;const g=h==null?void 0:h.info;return g?g.isCreating&&this.editor.getOnlySelectedShapeId()===n.id:!1},[n.id]),i=Ie("zoom level",()=>this.editor.getZoomLevel(),[this.editor]),s=this.options.showColors,a=r[n.props.color],l=s?a.frame.fill:r.black.frame.fill,c=s?a.frame.stroke:r.black.frame.stroke,u=s?a.frame.headingStroke:r.background,d=s?a.frame.headingFill:r.background,f=s?a.frame.text:r.text;return w.jsxs(w.Fragment,{children:[w.jsx(rh,{children:w.jsx("rect",{className:he("tl-frame__body",{"tl-frame__creating":o}),width:n.props.w+1/i,height:n.props.h+1/i,fill:l,stroke:c,y:-.5/i,x:-.5/i})}),o?null:w.jsx($ht,{id:n.id,name:n.props.name,fill:d,stroke:u,color:f,width:n.props.w,height:n.props.h,offsetX:s?-1:-7,showColors:this.options.showColors})]})}toSvg(n,r){const o=zd({isDarkMode:r.isDarkMode}),i=k3(this.editor,n),a=i%2===1?n.props.h:n.props.w,l=K0e(n,i,!0),c=Wee(a-12,!0),u=H6(n.props.name,"Frame")+"",d=Uee(this.editor,n,c),f=this.editor.textMeasure.measureTextSpans(u,c),h=M3(this.editor,f,c),g=this.options.showColors,y=o[n.props.color],m=g?y.frame.fill:o.black.frame.fill,S=g?y.frame.stroke:o.black.frame.stroke,x=g?y.frame.headingStroke:o.background,C=g?y.frame.headingFill:o.background,E=g?y.frame.text:o.text;return w.jsxs(w.Fragment,{children:[w.jsx("rect",{width:n.props.w,height:n.props.h,fill:m,stroke:S,strokeWidth:1,x:0,rx:0,ry:0}),w.jsxs("g",{fill:E,transform:l,children:[w.jsx("rect",{x:d.x-(g?0:6),y:d.y-6,width:Math.min(a,d.width+12),height:d.height,fill:C,stroke:x,rx:4,ry:4}),w.jsx("g",{transform:`translate(${g?8:0}, 4)`,children:h})]})]})}indicator(n){return w.jsx("rect",{width:Se(n.props.w),height:Se(n.props.h),className:"tl-frame-indicator"})}canReceiveNewChildrenOfType(n,r){return!n.isLocked}providesBackgroundForChildren(){return!0}canDropShapes(n,r){return!n.isLocked}onDragShapesOver(n,r){r.every(o=>o.parentId===n.id)||this.editor.reparentShapes(r,n.id)}onDragShapesOut(n,r){const o=this.editor.getShape(n.parentId);o&&this.editor.isShapeOfType(o,"group")?this.editor.reparentShapes(r,o.id):this.editor.reparentShapes(r,this.editor.getCurrentPageId())}onResize(n,r){return a2(n,r)}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,w:Pn(n.props.w,r.props.w,o),h:Pn(n.props.h,r.props.h,o)}}onDoubleClickEdge(n,r){if(r.target!=="selection")return;const{handle:o}=r;if(!o)return;const i=o==="left"||o==="right",s=o==="top"||o==="bottom",a=this.editor.getSortedChildIdsForParent(n.id),l=Tn(a.map(h=>this.editor.getShape(h)));if(!l.length)return;const{dx:c,dy:u,w:d,h:f}=Fye(l,this.editor,{padding:10});return this.editor.run(()=>{const h=a.map(g=>{const y=this.editor.getShape(g);return{id:y.id,type:y.type,x:i?y.x+c:y.x,y:s?y.y+u:y.y}});this.editor.updateShapes(h)}),{id:n.id,type:n.type,props:{w:i?d:n.props.w,h:s?f:n.props.h}}}onDoubleClickCorner(n){return zye(this.editor,n.id,{padding:10}),{id:n.id,type:n.type}}}V(NP,"type","frame"),V(NP,"props",gce),V(NP,"migrations",mce);const Fht=ce.forwardRef(function({shapeId:e,isEditing:n,richText:r,handleFocus:o,handleChange:i,handleBlur:s,handleKeyDown:a,handleDoubleClick:l,hasCustomTabBehavior:c},u){const d=Ee(),f=xg("tip-tap-editor"),h=d.getTextOptions().tipTapConfig,g=v.useRef(r),y=v.useRef(null),m=v.useRef(null);v.useLayoutEffect(()=>{y.current?g.current!==r&&y.current.commands.setContent(r):g.current=r},[r]);const S=v.useRef({selectAll:!1,caretPosition:null});v.useLayoutEffect(()=>{function T(R){R.shapeId===d.getEditingShapeId()&&(S.current.selectAll=!0)}function M(R){R.shapeId===d.getEditingShapeId()&&(S.current.caretPosition=R.point)}return d.on("select-all-text",T),d.on("place-caret",M),()=>{d.off("select-all-text",T),d.off("place-caret",M)}},[d,n]);const x=fd(i),C=fd(a),E=fd(o),P=fd(s),I=fd(l);return v.useLayoutEffect(()=>{if(!n||!h||!m.current)return;const{editorProps:T,...M}=h,R=new ant({element:m.current,autofocus:!0,editable:n,onUpdate:j=>{const N=j.editor.state.doc.toJSON();g.current=N,x({richText:N})},onFocus:E,onBlur:P,onCreate:j=>{var F;if(d.getEditingShapeId()!==e)return;const N=j.editor;d.setRichTextEditor(N);const{selectAll:k,caretPosition:D}=S.current;if(k)N.chain().focus().selectAll().run();else if(D){const H=(F=N.view.posAtCoords({left:D.x,top:D.y}))==null?void 0:F.pos;H?N.chain().focus().setTextSelection(H).run():N.chain().focus().selectAll().run()}},editorProps:{handleKeyDown:(j,N)=>{!c&&N.key==="Tab"&&zht(d,j,N),C(N)},handleDoubleClick:(j,N,k)=>I(k),...T},coreExtensionOptions:{clipboardTextSerializer:{blockSeparator:`
`}},...M,content:g.current}),A=d.timers.setTimeout(()=>{S.current.caretPosition||S.current.selectAll?R.commands.focus():R.commands.focus("end"),S.current.selectAll=!1,S.current.caretPosition=null},100);return y.current=R,()=>{y.current=null,clearTimeout(A),R.destroy()}},[n,h,E,P,I,x,C,d,e,c]),!n||!h?null:w.jsx("div",{id:f,ref:u,tabIndex:-1,"data-testid":"rich-text-area",className:"tl-rich-text tl-text tl-text-input",onContextMenu:n?Yr:void 0,onPointerDownCapture:Yr,onTouchEnd:Yr,onDragStart:En,children:w.jsx("div",{className:"tl-rich-text",ref:m})})});function zht(t,e,n){n.preventDefault();const r=t.getRichTextEditor();if(r!=null&&r.isActive("bulletList")||r!=null&&r.isActive("orderedList"))return;const{state:o,dispatch:i}=e,{$from:s,$to:a}=o.selection,l=n.shiftKey;let c=o.tr,u=a.end();for(;u>=s.start();){const f=o.doc.resolve(u).blockRange();if(!f)break;const h=f.start,g=f.end,y=o.doc.textBetween(h,g,`
`);let m=!1;o.doc.nodesBetween(h,g,S=>{if(S.type.name==="bulletList"||S.type.name==="orderedList")return m=!0,!1}),m||(l?y.startsWith("	")&&(c=c.delete(h+1,h+2)):c=c.insertText("	",h+1)),u=h-1}const d=o.selection.map(c.doc,c.mapping);c.setSelection(d),c.docChanged&&i(c)}function Bht(t,e,n){const r=$0e(t),o=r.isEditing,i=Ee(),s=v.useRef(null),a=n&&dc(n);v.useEffect(()=>{var d;if(!o)return;const u=(d=s.current)==null?void 0:d.querySelector("[contenteditable]");u&&document.activeElement!==s.current&&u.focus()},[i,o]);const l=v.useCallback(u=>{if(i.getEditingShapeId()===t)switch(u.key){case"Enter":{(u.ctrlKey||u.metaKey)&&i.complete();break}}},[i,t]),c=v.useCallback(({richText:u})=>{i.getEditingShapeId()===t&&i.updateShape({id:t,type:e,props:{richText:u}})},[i,t,e]);return{rInput:s,handleKeyDown:l,handleChange:c,isEmpty:a,...r}}const U6=ce.memo(function({shapeId:e,type:n,richText:r,labelColor:o,font:i,fontSize:s,lineHeight:a,align:l,verticalAlign:c,wrap:u,isSelected:d,padding:f=0,onKeyDown:h,classNamePrefix:g,style:y,textWidth:m,textHeight:S,hasCustomTabBehavior:x}){const C=Ee(),E=ce.useRef(!1),{rInput:P,isEmpty:I,isEditing:T,isReadyForEditing:M,...R}=Bht(e,n,r),A=v.useMemo(()=>{if(r)return D6(C,r)},[C,r]),j=Ie("isSelectToolActive",()=>C.getCurrentToolId()==="select",[C]);jM("isDragging",()=>{C.getInstanceState(),E.current=C.inputs.isDragging},[C]);const N=A0e(l),k=F=>{var H;if(F.target instanceof HTMLElement&&(F.target.tagName==="A"||F.target.closest("a"))){if(En(F),!j)return;const U=((H=F.target.closest("a"))==null?void 0:H.getAttribute("href"))??"",B=W=>{W.name==="pointer_up"&&(E.current||window.open(U,"_blank","noopener, noreferrer"),C.off("event",B))};C.on("event",B)}};if(!T&&I)return null;const D=g||"tl-text";return w.jsx("div",{className:`${D}-label tl-text-wrapper tl-rich-text-wrapper`,"data-font":i,"data-align":l,"data-hastext":!I,"data-isediting":T,"data-textwrap":!!u,"data-isselected":d,style:{justifyContent:l==="middle"||N?"center":l,alignItems:c==="middle"?"center":c,padding:f,...y},children:w.jsxs("div",{className:`${D}-label__inner tl-text-content__wrapper`,style:{fontSize:s,lineHeight:Math.floor(s*a)+"px",minHeight:Math.floor(s*a)+"px",minWidth:Math.ceil(m||0),color:o,width:m?Math.ceil(m):void 0,height:S?Math.ceil(S):void 0},children:[w.jsx("div",{className:`${D} tl-text tl-text-content`,dir:"auto",children:r&&w.jsx("div",{className:"tl-rich-text","data-is-select-tool-active":j,dangerouslySetInnerHTML:{__html:A||""},onPointerDown:k,"data-is-ready-for-editing":M})}),(M||d)&&w.jsx(Fht,{ref:P,richText:r,isEditing:T,shapeId:e,...R,hasCustomTabBehavior:x,handleKeyDown:h??R.handleKeyDown})]})})});function W6({bounds:t,richText:e,fontSize:n,font:r,align:o,verticalAlign:i,wrap:s,labelColor:a,padding:l}){const c=Ee(),u=D6(c,e),d=o==="middle"?"center":o==="start"?"start":"end",f=o==="middle"?"center":o==="start"?"flex-start":"flex-end",h=i==="middle"?"center":i==="start"?"flex-start":"flex-end",g={display:"flex",fontFamily:Jle[r],height:"100%",justifyContent:f,alignItems:h,padding:`${l}px`},y={fontSize:`${n}px`,wrap:s?"wrap":"nowrap",color:a,lineHeight:qi.lineHeight,textAlign:d,width:"100%",wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"pre-wrap"};return w.jsx("foreignObject",{x:t.minX,y:t.minY,width:t.w,height:t.h,className:"tl-export-embed-styles tl-rich-text tl-rich-text-svg",children:w.jsx("div",{style:g,children:w.jsx("div",{dangerouslySetInnerHTML:{__html:u},style:y})})})}function Vee(t,e){return t>e?(cr*(e/2)+(t-e))*2:(cr*(t/2)+(e-t))*2}function G0e(t,e){return V6(t,e).map((n,r)=>n.getSvgPathData(r===0)).join(" ")+" Z"}function Hht(t,e,n,r){const o=t/4,i=e/4,s=Ul(r),a=n*.75,l=x=>x.addXY(s()*a,s()*a),c=new $(t/2,e),u=new $(0,i*1.2),d=new $(t/2,i*.9),f=new $(t,i*1.2),h=l(new $(t/2,e)),g=l(new $(0,i*1.2)),y=l(new $(t/2,i*.9)),m=l(new $(t,i*1.2));return[new fs({start:c,cp1:new $(o*1.5,i*3),cp2:new $(0,i*2.5),end:u}),new fs({start:u,cp1:new $(0,-i*.32),cp2:new $(o*1.85,-i*.32),end:d}),new fs({start:d,cp1:new $(o*2.15,-i*.32),cp2:new $(t,-i*.32),end:f}),new fs({start:f,cp1:new $(t,i*2.5),cp2:new $(o*2.5,i*3),end:h}),new fs({start:h,cp1:new $(o*1.5,i*3),cp2:new $(0,i*2.5),end:g}),new fs({start:g,cp1:new $(0,-i*.32),cp2:new $(o*1.85,-i*.32),end:y}),new fs({start:y,cp1:new $(o*2.15,-i*.32),cp2:new $(t,-i*.32),end:m}),new fs({start:m,cp1:new $(t,i*2.5),cp2:new $(o*2.5,i*3),end:c})].map((x,C)=>x.getSvgPathData(C===0)).join(" ")+" Z"}function V6(t,e){const n=t/4,r=e/4;return[new fs({start:new $(t/2,e),cp1:new $(n*1.5,r*3),cp2:new $(0,r*2.5),end:new $(0,r*1.2)}),new fs({start:new $(0,r*1.2),cp1:new $(0,-r*.32),cp2:new $(n*1.85,-r*.32),end:new $(t/2,r*.9)}),new fs({start:new $(t/2,r*.9),cp1:new $(n*2.15,-r*.32),cp2:new $(t,-r*.32),end:new $(t,r*1.2)}),new fs({start:new $(t,r*1.2),cp1:new $(t,r*2.5),cp2:new $(n*2.5,r*3),end:new $(t/2,e)})]}function Uht(t){return{size:1+t,thinning:.25,end:{taper:t},start:{taper:t},streamline:0,smoothing:1,simulatePressure:!1}}function Wht(t,e,n,r){const o=Ul(t),i=e/2,s=n/2,a=Dce(i,s),l=[],c=Ir*o(),u=Ir+Gr/2+Math.abs(o())*Gr,d=Math.max(16,a/10);for(let f=0;f<d;f++){const h=f/(d-1),g=c+h*u,y=Math.cos(g),m=Math.sin(g);l.push(new $(i*y+e*.5+.05*o(),s*m+n/2+.05*o(),Math.min(1,.5+Math.abs(.5-(o()>0?bi.easeInOutSine(h):bi.easeInExpo(h)))/2)))}return Ou(l,Uht(r))}function Vht(t,e,n,r){return ag(Wht(t,e,n,r))}function A3(t){let e="M";const n=t.length;let r,o,i;for(let s=0,a=n;s<a;s+=3)r=t[s],o=t[s+1],i=t[s+2],e+=`${hr(r)}L${hr(o)}Q${hr(i)}`;return e+=`${hr(t[0])}`,e}function $3(t,e,n,r,o){const i=[],s=Ul(t);let a=e[0],l;const c=e.length;for(let u=0,d=c*o;u<d;u++){l=$.AddXY(e[(u+1)%c],s()*n,s()*n);const f=$.Sub(l,a),h=$.Len(f),g=$.Div(f,h).mul(Math.min(h/4,r));i.push($.Add(a,g),$.Add(l,g.neg()),l),a=l}return i}function qht(t,e,n){const r=Math.min(t,e)/2,o=Math.max(t,e)-r*2,s=(Math.PI*(r*2)+2*o)/n,a=t>e?[{type:"straight",start:new $(r,0),delta:new $(1,0)},{type:"arc",center:new $(t-r,r),startAngle:-cr/2},{type:"straight",start:new $(t-r,e),delta:new $(-1,0)},{type:"arc",center:new $(r,r),startAngle:cr/2}]:[{type:"straight",start:new $(t,r),delta:new $(0,1)},{type:"arc",center:new $(r,e-r),startAngle:0},{type:"straight",start:new $(0,e-r),delta:new $(0,-1)},{type:"arc",center:new $(r,r),startAngle:cr}];let l=0;const c=[];for(let u=0;u<n;u++){const d=a[0];d.type==="straight"?c.push($.Add(d.start,$.Mul(d.delta,l))):c.push(qM(d.center,r,d.startAngle+l/r)),l+=s;let f=d.type==="straight"?o:cr*r;for(;l>f;)l-=f,a.push(a.shift()),f=a[0].type==="straight"?o:cr*r}return c}const Kht={s:50,m:70,l:100,xl:130},Ght=.2;function J2(t,e,n,r,o){const i=Ul(n),s=Vee(t,e),a=Math.max(Math.ceil(s/Kht[r]),6,Math.ceil(s/Math.min(t,e))),l=s/a*Ght,c=Math.max(t-l*2,1),u=Math.max(e-l*2,1),f=Vee(c,u)/a,h=(t-c)/2,g=(e-u)/2,y=qht(c,u,a).map(E=>E.addXY(h,g)),m=t<20?0:l*.3,S=e<20?0:l*.3,x=y.slice(0);for(let E=0;E<Math.floor(a/2);E++)x[E]=$.AddXY(x[E],i()*m*o,i()*S*o),x[a-E-1]=$.AddXY(x[a-E-1],i()*m*o,i()*S*o);const C=[];for(let E=0;E<x.length;E++){const P=E===x.length-1?0:E+1,I=x[E],T=x[P],M=y[E],R=y[P],A=$.Dist(M,R),j=f-A,k=$.Dist(I,T)/A,D=(Math.max(h,g)+j)*k,F=$.Lrp(M,R,.5).add($.Sub(R,M).uni().per().mul(D));F.x<0?F.x=0:F.x>t&&(F.x=t),F.y<0?F.y=0:F.y>e&&(F.y=e);const H=TB(I,T,F),U=$.Dist(H||$.Average([I,T]),I);C.push({leftPoint:I,rightPoint:T,arcPoint:F,center:H,radius:U})}return C}function Xht(t,e,n,r,o){const i=[],s=J2(t,e,n,r,o);for(const{center:a,radius:l,leftPoint:c,rightPoint:u}of s)i.push(...BWe(c,u,a,l,10));return i}function D3(t,e,n,r,o){const i=J2(t,e,n,r,o);let s=`M${i[0].leftPoint.toFixed()}`;for(const{leftPoint:a,rightPoint:l,radius:c,center:u}of i){if(u===null){s+=` L${l.toFixed()}`;continue}const d=$.Clockwise(a,l,u)?"0":"1";s+=` A${Se(c)},${Se(c)} 0 ${d},1 ${l.toFixed()}`}return s+=" Z",s}const Yht={s:.5,m:.7,l:.9,xl:1.6};function Qht(t,e,n,r,o){const i=Ul(n),s=Yht[r]*o,a=J2(t,e,n,r,o),u=a.reduce((g,y)=>g+$.Dist2(y.leftPoint,y.rightPoint),0)/a.length>(s*15)**2?g=>$.AddXY(g,i()*s*2,i()*s*2):g=>g;let d=`M${a[0].leftPoint.toFixed()}`,f=u(a[0].leftPoint),h=`M${f.toFixed()}`;for(const{leftPoint:g,center:y,rightPoint:m,radius:S,arcPoint:x}of a){if(y===null){d+=` L${m.toFixed()}`;const M=u(m);h+=` L${M.toFixed()}`,f=M;continue}const C=$.Clockwise(g,m,y)?"0":"1";d+=` A${Se(S)},${Se(S)} 0 ${C},1 ${m.toFixed()}`;const E=u(m),P=u(x),I=TB(f,E,P);if(!I){h+=` L${E.toFixed()}`,f=E;continue}const T=Math.abs($.Dist(I,f));h+=` A${Se(T)},${Se(T)} 0 ${C},1 ${E.toFixed()}`,f=E}return d+h+" Z"}function q6(t,e){switch(t.geo){case"x-box":return Zht(t.w,t.h,e,t.dash);case"check-box":return Jht(t.w,t.h);default:return}}function Zht(t,e,n,r){const o=r==="draw"?.62:0;if(r==="dashed")return[[new $(0,0),new $(t/2,e/2)],[new $(t,e),new $(t/2,e/2)],[new $(0,e),new $(t/2,e/2)],[new $(t,0),new $(t/2,e/2)]];const i=a=>Math.max(0,Math.min(t,a)),s=a=>Math.max(0,Math.min(e,a));return[[new $(i(n*o),s(n*o)),new $(i(t-n*o),s(e-n*o))],[new $(i(n*o),s(e-n*o)),new $(i(t-n*o),s(n*o))]]}function Jht(t,e){const n=Math.min(t,e)*.82,r=(t-n)/2,o=(e-n)/2,i=a=>Math.max(0,Math.min(t,a)),s=a=>Math.max(0,Math.min(e,a));return[[new $(i(r+n*.25),s(o+n*.52)),new $(i(r+n*.45),s(o+n*.82))],[new $(i(r+n*.45),s(o+n*.82)),new $(i(r+n*.82),s(o+n*.22))]]}function qee({shape:t,shouldScale:e,forceSolid:n}){const r=e?t.props.scale:1,o=Ee(),i=Kl(),{id:s,props:a}=t,{w:l,color:c,fill:u,dash:d,growY:f,size:h,scale:g}=a,y=ei[h]*r,m=a.h+f;switch(a.geo){case"cloud":if(d==="solid"){const S=D3(l,m,s,h,g);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:S,color:c,fill:u,scale:r}),w.jsx("path",{d:S,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}else if(d==="draw"){const S=Qht(l,m,s,h,g);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:S,color:c,fill:u,scale:r}),w.jsx("path",{d:S,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}else{const S=D3(l,m,s,h,g),x=J2(l,m,s,h,g);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:S,color:c,fill:u,scale:r}),w.jsx("g",{strokeWidth:y,stroke:i[c].solid,fill:"none",pointerEvents:"all",children:x.map(({leftPoint:C,rightPoint:E,center:P,radius:I},T)=>{const M=P?I*Tp(Tp($.Angle(P,E))-Tp($.Angle(P,C))):$.Dist(C,E),{strokeDasharray:R,strokeDashoffset:A}=uc(M,y,{style:d,start:"outset",end:"outset",forceSolid:n});return w.jsx("path",{d:P?`M${C.x},${C.y}A${I},${I},0,0,1,${E.x},${E.y}`:`M${C.x},${C.y}L${E.x},${E.y}`,strokeDasharray:R,strokeDashoffset:A},T)})})]})}case"ellipse":{const S=e?o.getShapeGeometry(t):o.getShapeUtil(t).getGeometry(t),x=S.getSvgPathData(!0);if(d==="dashed"||d==="dotted"){const C=S.length,{strokeDasharray:E,strokeDashoffset:P}=uc(C<64?C*2:C,y,{style:d,snap:4,closed:!0,forceSolid:n});return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:x,color:c,fill:u,scale:r}),w.jsx("path",{d:x,strokeWidth:y,fill:"none",stroke:i[c].solid,strokeDasharray:E,strokeDashoffset:P})]})}else{const E=(e?o.getShapeGeometry(t):o.getShapeUtil(t).getGeometry(t)).getSvgPathData(!0);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:E,color:c,fill:u,scale:r}),w.jsx("path",{d:E,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}}case"oval":{const S=e?o.getShapeGeometry(t):o.getShapeUtil(t).getGeometry(t),x=S.getSvgPathData(!0);if(d==="dashed"||d==="dotted"){const C=S.getLength(),{strokeDasharray:E,strokeDashoffset:P}=uc(C<64?C*2:C,y,{style:d,snap:4,start:"outset",end:"outset",closed:!0,forceSolid:n});return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:x,color:c,fill:u,scale:r}),w.jsx("path",{d:x,strokeWidth:y,fill:"none",stroke:i[c].solid,strokeDasharray:E,strokeDashoffset:P})]})}else return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:x,color:c,fill:u,scale:r}),w.jsx("path",{d:x,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}case"heart":if(d==="dashed"||d==="dotted"||d==="solid"){const S=G0e(l,m),x=V6(l,m);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:S,color:c,fill:u,scale:r}),x.map((C,E)=>{const{strokeDasharray:P,strokeDashoffset:I}=uc(C.length,y,{style:d,snap:1,start:"outset",end:"outset",closed:!0,forceSolid:n});return w.jsx("path",{d:C.getSvgPathData(),strokeWidth:y,fill:"none",stroke:i[c].solid,strokeDasharray:P,strokeDashoffset:I,pointerEvents:"all"},`curve_${E}`)})]})}else{const S=Hht(l,m,y,t.id);return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:S,color:c,fill:u,scale:r}),w.jsx("path",{d:S,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}default:{const S=e?o.getShapeGeometry(t):o.getShapeUtil(t).getGeometry(t),x=S instanceof Zs?S.children[0].vertices:S.vertices,C=q6(t.props,y);if(d==="solid"){let E="M"+x[0]+"L"+x.slice(1)+"Z";if(C)for(const[P,I]of C)E+=`M${P.x},${P.y}L${I.x},${I.y}`;return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:E,color:c,fill:u,scale:r}),w.jsx("path",{d:E,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}else if(d==="dashed"||d==="dotted"){const E="M"+x[0]+"L"+x.slice(1)+"Z";return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:E,color:c,fill:u,scale:r}),w.jsxs("g",{strokeWidth:y,stroke:i[c].solid,fill:"none",pointerEvents:"all",children:[Array.from(Array(x.length)).map((P,I)=>{const T=$.ToFixed(x[I]),M=$.ToFixed(x[(I+1)%x.length]),R=$.Dist(T,M),{strokeDasharray:A,strokeDashoffset:j}=uc(R,y,{style:d,start:"outset",end:"outset",forceSolid:n});return w.jsx("line",{x1:T.x,y1:T.y,x2:M.x,y2:M.y,strokeDasharray:A,strokeDashoffset:j},I)}),C&&C.map(([P,I],T)=>{const M=$.Dist(P,I),{strokeDasharray:R,strokeDashoffset:A}=uc(M,y,{style:d,start:"skip",end:"skip",snap:d==="dotted"?4:void 0,forceSolid:n});return w.jsx("path",{d:`M${P.x},${P.y}L${I.x},${I.y}`,stroke:i[c].solid,strokeWidth:y,fill:"none",strokeDasharray:R,strokeDashoffset:A},`line_fg_${T}`)})]})]})}else if(d==="draw"){let E=A3($3(s,x,y/3,y*2,2));if(C)for(const[I,T]of C)E+=`M${I.toFixed()}L${T.toFixed()}`;const P=A3($3(s,x,0,y*2,1));return w.jsxs(w.Fragment,{children:[w.jsx(ss,{theme:i,d:P,color:c,fill:u,scale:r}),w.jsx("path",{d:E,stroke:i[c].solid,strokeWidth:y,fill:"none"})]})}}}}const Kee=17*3;class FP extends sy{canEdit(){return!0}getDefaultProps(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:"",scale:1,richText:Ll("")}}getGeometry(e){const n=Math.max(1,e.props.w),r=Math.max(1,e.props.h+e.props.growY),o=n/2,i=r/2,s=e.props.fill!=="none";let a;switch(e.props.geo){case"cloud":{a=new zo({points:Xht(n,r,e.id,e.props.size,e.props.scale),isFilled:s});break}case"triangle":{a=new zo({points:[new $(o,0),new $(n,r),new $(0,r)],isFilled:s});break}case"diamond":{a=new zo({points:[new $(o,0),new $(n,i),new $(o,r),new $(0,i)],isFilled:s});break}case"pentagon":{a=new zo({points:VD(n,r,5),isFilled:s});break}case"hexagon":{a=new zo({points:VD(n,r,6),isFilled:s});break}case"octagon":{a=new zo({points:VD(n,r,8),isFilled:s});break}case"ellipse":{a=new sQe({width:n,height:r,isFilled:s});break}case"oval":{a=new aQe({width:n,height:r,isFilled:s});break}case"star":{const x=Ir/5/2,C=Math.floor(5/4)*2,E=5*2-C,P=0,I=Math.floor(5/2)*2,T=Math.cos(-Gr+C*x)*n/2,M=Math.cos(-Gr+E*x)*n/2,R=Math.sin(-Gr+P*x)*r/2,A=Math.sin(-Gr+I*x)*r/2,j=n-Math.abs(T-M),N=r-Math.abs(A-R),k=n/2+M-(n/2-T),D=r/2+R-(r/2-A),F=1,H=(n-k)/2,U=(r-D)/2,B=(n+j)/2,W=(r+N)/2,K=B*F/2,q=W*F/2;a=new zo({points:Array.from(Array(5*2)).map((X,Z)=>{const Y=-Gr+Z*x;return new $(H+(Z%2?K:B)*Math.cos(Y),U+(Z%2?q:W)*Math.sin(Y))}),isFilled:s});break}case"rhombus":{const S=Math.min(n*.38,r*.38);a=new zo({points:[new $(S,0),new $(n,0),new $(n-S,r),new $(0,r)],isFilled:s});break}case"rhombus-2":{const S=Math.min(n*.38,r*.38);a=new zo({points:[new $(0,0),new $(n-S,0),new $(n,r),new $(S,r)],isFilled:s});break}case"trapezoid":{const S=Math.min(n*.38,r*.38);a=new zo({points:[new $(S,0),new $(n-S,0),new $(n,r),new $(0,r)],isFilled:s});break}case"arrow-right":{const S=Math.min(n,r)*.38,x=r*.16;a=new zo({points:[new $(0,x),new $(n-S,x),new $(n-S,0),new $(n,r/2),new $(n-S,r),new $(n-S,r-x),new $(0,r-x)],isFilled:s});break}case"arrow-left":{const S=Math.min(n,r)*.38,x=r*.16;a=new zo({points:[new $(S,0),new $(S,x),new $(n,x),new $(n,r-x),new $(S,r-x),new $(S,r),new $(0,r/2)],isFilled:s});break}case"arrow-up":{const S=n*.16,x=Math.min(n,r)*.38;a=new zo({points:[new $(n/2,0),new $(n,x),new $(n-S,x),new $(n-S,r),new $(S,r),new $(S,x),new $(0,x)],isFilled:s});break}case"arrow-down":{const S=n*.16,x=Math.min(n,r)*.38;a=new zo({points:[new $(S,0),new $(n-S,0),new $(n-S,r-x),new $(n,r-x),new $(n/2,r),new $(0,r-x),new $(S,r-x)],isFilled:s});break}case"check-box":case"x-box":case"rectangle":{a=new Pu({width:n,height:r,isFilled:s});break}case"heart":{const x=V6(n,r).reduce((C,E)=>(C.push(...E.vertices),C),[]);a=new zo({points:x,isFilled:s});break}default:Jn(e.props.geo)}const l=zE(this.editor,e),c=n/e.props.scale,u=r/e.props.scale,d=Math.min(100,c/2),f=Math.min(wd[e.props.size]*qi.lineHeight+Ns*2,u/2),h=Math.min(c,Math.max(l.w,Math.min(d,Math.max(1,c-8)))),g=Math.min(u,Math.max(l.h,Math.min(f,Math.max(1,u-8)))),y=q6(e.props,ei[e.props.size]*e.props.scale),m=y?y.map(S=>new vh({points:S,isInternal:!0})):[];return new Zs({children:[a,new Pu({x:e.props.align==="start"?0:e.props.align==="end"?(c-h)*e.props.scale:(c-h)/2*e.props.scale,y:e.props.verticalAlign==="start"?0:e.props.verticalAlign==="end"?(u-g)*e.props.scale:(u-g)/2*e.props.scale,width:h*e.props.scale,height:g*e.props.scale,isFilled:!0,isLabel:!0}),...m]})}getHandleSnapGeometry(e){const n=this.getGeometry(e),r=n.children[0];switch(e.props.geo){case"arrow-down":case"arrow-left":case"arrow-right":case"arrow-up":case"check-box":case"diamond":case"hexagon":case"octagon":case"pentagon":case"rectangle":case"rhombus":case"rhombus-2":case"star":case"trapezoid":case"triangle":case"x-box":return{outline:r,points:[...r.vertices,n.bounds.center]};case"cloud":case"ellipse":case"heart":case"oval":return{outline:r,points:[n.bounds.center]};default:Jn(e.props.geo)}}getText(e){return sg(this.editor,e.props.richText)}getFontFaces(e){return S4(this.editor,e.props.richText,{family:`tldraw_${e.props.font}`,weight:"normal",style:"normal"})}component(e){const{id:n,type:r,props:o}=e,{fill:i,font:s,align:a,verticalAlign:l,size:c,richText:u}=o,d=Kl(),{editor:f}=this,h=Ie("isGeoOnlySelected",()=>e.id===f.getOnlySelectedShapeId(),[f]),g=L6(f,e.id),y=dc(e.props.richText),m=g||!y,S=Ie("force solid",()=>f.getZoomLevel()<.2,[f]);return w.jsxs(w.Fragment,{children:[w.jsx(rh,{children:w.jsx(qee,{shape:e,shouldScale:!0,forceSolid:S})}),m&&w.jsx(Uf,{style:{overflow:"hidden",width:e.props.w,height:e.props.h+o.growY},children:w.jsx(U6,{shapeId:n,type:r,font:s,fontSize:wd[c]*e.props.scale,lineHeight:qi.lineHeight,padding:Ns*e.props.scale,fill:i,align:a,verticalAlign:l,richText:u,isSelected:h,labelColor:d[o.labelColor].solid,wrap:!0})}),e.props.url&&w.jsx(Av,{url:e.props.url})]})}indicator(e){const n=this.editor.getShapeGeometry(e),r=Ie("isZoomedOut",()=>this.editor.getZoomLevel()<.25,[this.editor]),o=ept(e,n,r);return w.jsx("path",{d:o})}toSvg(e,n){const r={...e,props:{...e.props,w:e.props.w/e.props.scale,h:e.props.h/e.props.scale}},o=r.props;n.addExportDef(N6(o.fill));let i;if(!dc(o.richText)){const s=zd(n),a=new rt(0,0,o.w,o.h+o.growY);i=w.jsx(W6,{fontSize:wd[o.size],font:o.font,align:o.align,verticalAlign:o.verticalAlign,richText:o.richText,labelColor:s[o.labelColor].solid,bounds:a,padding:Ns*e.props.scale})}return w.jsxs(w.Fragment,{children:[w.jsx(qee,{shouldScale:!1,shape:r,forceSolid:!1}),i]})}getCanvasSvgDefs(){return[F6()]}onResize(e,{handle:n,newPoint:r,scaleX:o,scaleY:i,initialShape:s}){const a=s.props.w/s.props.scale,l=s.props.h/s.props.scale,c=s.props.growY/s.props.scale;let u=a*o,d=(l+c)*i,f=0,h=0;const g=Kee;if(!dc(e.props.richText)){let E=Math.max(Math.abs(u),g),P=Math.max(Math.abs(d),g);E<g&&P===g&&(E=g),E===g&&P<g&&(P=g);const I=zE(this.editor,{...e,props:{...e.props,w:E*e.props.scale,h:P*e.props.scale}}),T=Math.max(Math.abs(u),I.w)*Math.sign(u),M=Math.max(Math.abs(d),I.h)*Math.sign(d);f=Math.abs(T)-Math.abs(u),h=Math.abs(M)-Math.abs(d),u=T,d=M}const y=u*e.props.scale,m=d*e.props.scale,S=new $(0,0);o<0&&(S.x+=y),(n==="left"||n==="top_left"||n==="bottom_left")&&(S.x+=o<0?f:-f),i<0&&(S.y+=m),(n==="top"||n==="top_left"||n==="top_right")&&(S.y+=i<0?h:-h);const{x,y:C}=S.rot(e.rotation).add(r);return{x,y:C,props:{w:Math.max(Math.abs(y),1),h:Math.max(Math.abs(m),1),growY:0}}}onBeforeCreate(e){if(dc(e.props.richText))return e.props.growY?{...e,props:{...e.props,growY:0}}:void 0;const n=e.props.h/e.props.scale,r=zE(this.editor,e).h;let o=null;if(r>n?o=r-n:e.props.growY&&(o=0),o!==null)return{...e,props:{...e.props,growY:o*e.props.scale}}}onBeforeUpdate(e,n){if(Jf(e.props.richText,n.props.richText)&&e.props.font===n.props.font&&e.props.size===n.props.size)return;const r=dc(e.props.richText),o=dc(n.props.richText);if(!r&&o)return{...n,props:{...n.props,growY:0}};const i=e.props.w/e.props.scale,s=e.props.h/e.props.scale,a=e.props.growY/e.props.scale,l=zE(this.editor,n);if(r&&!o&&sg(this.editor,n.props.richText)){let u=Math.max(i,l.w),d=Math.max(s,l.h);const f=Kee;return i<f&&s<f&&(u=Math.max(u,f),d=Math.max(d,f),u=Math.max(u,d),d=Math.max(u,d)),{...n,props:{...n.props,w:u*n.props.scale,h:d*n.props.scale,growY:0}}}let c=null;if(l.h>s?c=l.h-s:a&&(c=0),c!==null){const u=n.props.w/n.props.scale;return{...n,props:{...n.props,growY:c*n.props.scale,w:Math.max(u,l.w)*n.props.scale}}}if(l.w>i)return{...n,props:{...n.props,w:l.w*n.props.scale}}}onDoubleClick(e){if(this.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return{...e,props:{geo:"check-box"}};case"check-box":return{...e,props:{geo:"rectangle"}}}}getInterpolatedProps(e,n,r){return{...r>.5?n.props:e.props,w:Pn(e.props.w,n.props.w,r),h:Pn(e.props.h,n.props.h,r),scale:Pn(e.props.scale,n.props.scale,r)}}}V(FP,"type","geo"),V(FP,"props",vce),V(FP,"migrations",yce);function zE(t,e){const{richText:n,font:r,size:o,w:i}=e.props;if(!n||dc(n))return{w:0,h:0};const s=t.textMeasure.measureText("w",{...qi,fontFamily:jd[r],fontSize:wd[o],maxWidth:100}),a={s:2,m:3.5,l:5,xl:10},l=ET(t,n),c=t.textMeasure.measureHtml(l,{...qi,fontFamily:jd[r],fontSize:wd[o],minWidth:s.w,maxWidth:Math.max(0,Math.ceil(s.w+a[o]),Math.ceil(i/e.props.scale-Ns*2))});return{w:c.w+Ns*2,h:c.h+Ns*2}}function ept(t,e,n){const{id:r}=t,{w:o,size:i,geo:s,dash:a,scale:l,growY:c}=t.props,u=ei[i],d=t.props.h+c;switch(s){case"ellipse":return a==="draw"?Vht(r,o,d,u):e.getSvgPathData(!0);case"heart":return G0e(o,d);case"oval":return e.getSvgPathData(!0);case"cloud":return D3(o,d,r,i,t.props.scale);default:{const f=e instanceof Zs?e.children[0].vertices:e.vertices;let h;if(a==="draw"&&!n){const y=$3(r,f,0,u*2*l,1);h=A3(y)}else h="M"+f[0]+"L"+f.slice(1)+"Z";const g=q6(t.props,u);if(g)for(const[y,m]of g)h+=`M${y.x},${y.y}L${m.x},${m.y}`;return h}}}function tpt(){const[t,e]=v.useState(!1);return v.useEffect(()=>{const r=CSS.supports("color","color(display-p3 1 1 1)"),o=matchMedia("(color-gamut: p3)");e(r&&o.matches);const i=()=>e(r&&o.matches);return o.addEventListener("change",i),()=>o.removeEventListener("change",i)},[]),Ie(so.forceSrgb)||!t?"srgb":"p3"}class zP extends Tc{constructor(){super(...arguments);V(this,"options",{maxPointsPerShape:600,underlayOpacity:.82,overlayOpacity:.35})}canTabTo(){return!1}hideResizeHandles(n){return BE(n)}hideRotateHandle(n){return BE(n)}hideSelectionBoundsFg(n){return BE(n)}getDefaultProps(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1,scale:1}}getGeometry(n){const r=ap(n);if(BE(n))return new XB({x:-r/2,y:-r/2,radius:r/2,isFilled:!0});const{strokePoints:o,sw:i}=Gee(n,r,!0),s=B6({strokeWidth:i,showAsComplete:!0});return Y2(o,s),new zo({points:C6(o,s),isFilled:!0})}component(n){const r=oL(this.editor,n),o=ap(n);return w.jsx(rh,{children:w.jsx(HE,{shape:n,forceSolid:r,strokeWidth:o,opacity:this.options.overlayOpacity})})}backgroundComponent(n){const r=oL(this.editor,n),o=ap(n);return w.jsx(rh,{children:w.jsx(HE,{shape:n,forceSolid:r,strokeWidth:o,opacity:this.options.underlayOpacity})})}indicator(n){const r=oL(this.editor,n),o=ap(n),{strokePoints:i,sw:s}=Gee(n,o,r),a=$v(n.props.segments);let l;return i.length<2?l=rpt(a[0],s):l=ag(i,!1),w.jsx("path",{d:l})}toSvg(n){const r=ap(n),o=r<1.5,i=1/n.props.scale;return w.jsx("g",{transform:`scale(${i})`,children:w.jsx(HE,{forceSolid:o,strokeWidth:r,shape:n,opacity:this.options.overlayOpacity})})}toBackgroundSvg(n){const r=ap(n),o=r<1.5,i=1/n.props.scale;return w.jsx("g",{transform:`scale(${i})`,children:w.jsx(HE,{forceSolid:o,strokeWidth:r,shape:n,opacity:this.options.underlayOpacity})})}onResize(n,r){const{scaleX:o,scaleY:i}=r,s=[];for(const a of n.props.segments)s.push({...a,points:a.points.map(({x:l,y:c,z:u})=>({x:o*l,y:i*c,z:u}))});return{props:{segments:s}}}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,...r.props,segments:W0e(n.props.segments,r.props.segments,o),scale:Pn(n.props.scale,r.props.scale,o)}}}V(zP,"type","highlight"),V(zP,"props",xce),V(zP,"migrations",wce);function npt(t){return`M ${t.x} ${t.y} m -${.1}, 0 a ${.1},${.1} 0 1,0 ${.1*2},0 a ${.1},${.1} 0 1,0 -${.1*2},0`}function rpt(t,e){const n=e/2;return`M ${t.x} ${t.y} m -${n}, 0 a ${n},${n} 0 1,0 ${n*2},0 a ${n},${n} 0 1,0 -${n*2},0`}function Gee(t,e,n){var l;const r=$v(t.props.segments),o=t.props.isComplete||((l=Li(t.props.segments))==null?void 0:l.type)==="straight";let i=e;!n&&!t.props.isPen&&r.length===1&&(i+=Ul(t.id)()*(e/6));const s=B6({strokeWidth:i,showAsComplete:o});return{strokePoints:Ou(r,s),sw:i}}function ap(t){return Ov[t.props.size]*1.12*t.props.scale}function BE(t){return t.props.segments.length===1&&t.props.segments[0].points.length<2}function HE({strokeWidth:t,forceSolid:e,shape:n,opacity:r}){var f;const o=Kl(),i=$v(n.props.segments);let s=t;!e&&!n.props.isPen&&i.length===1&&(s+=Ul(n.id)()*(s/6));const a=B6({strokeWidth:s,showAsComplete:n.props.isComplete||((f=Li(n.props.segments))==null?void 0:f.type)==="straight"}),l=Ou(i,a),c=l.length>1?ag(l,!1):npt(n.props.segments[0].points[0]),u=tpt(),d=o[n.props.color].highlight[u];return w.jsx("path",{d:c,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:d,strokeWidth:s,opacity:r})}function oL(t,e){return Ie("forceSolid",()=>{const n=ap(e),r=t.getZoomLevel();return n/r<1.5},[t])}function X0e(){return w.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 30 30",xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("path",{d:"M3,11 L3,3 11,3",strokeWidth:"2"}),w.jsx("path",{d:"M19,27 L27,27 L27,19",strokeWidth:"2"}),w.jsx("path",{d:"M27,3 L3,27",strokeWidth:"2"})]})}const Xee=8;function opt(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}}function Lx(t,e){if(!e)return{w:t.w,h:t.h};const n=t.w/(e.bottomRight.x-e.topLeft.x),r=t.h/(e.bottomRight.y-e.topLeft.y);return{w:n,h:r}}function ipt(t,e,n={}){const{handle:r,change:o,crop:i}=e,{w:s,h:a}=e.uncroppedSize,{minWidth:l=Xee,minHeight:c=Xee}=n,u=to(i),d=new $(t.x,t.y),f=new $(0,0);let h=!1;switch(r){case"top":case"top_left":case"top_right":{if(a<c)break;h=!0,u.topLeft.y=u.topLeft.y+o.y/a,a*(u.bottomRight.y-u.topLeft.y)<c?(u.topLeft.y=u.bottomRight.y-c/a,f.y=(u.topLeft.y-i.topLeft.y)*a):u.topLeft.y<=0?(u.topLeft.y=0,f.y=(u.topLeft.y-i.topLeft.y)*a):f.y=o.y;break}case"bottom":case"bottom_left":case"bottom_right":{if(a<c)break;h=!0,u.bottomRight.y=Math.min(1,u.bottomRight.y+o.y/a),a*(u.bottomRight.y-u.topLeft.y)<c&&(u.bottomRight.y=u.topLeft.y+c/a);break}}switch(r){case"left":case"top_left":case"bottom_left":{if(s<l)break;h=!0,u.topLeft.x=u.topLeft.x+o.x/s,s*(u.bottomRight.x-u.topLeft.x)<l?(u.topLeft.x=u.bottomRight.x-l/s,f.x=(u.topLeft.x-i.topLeft.x)*s):u.topLeft.x<=0?(u.topLeft.x=0,f.x=(u.topLeft.x-i.topLeft.x)*s):f.x=o.x;break}case"right":case"top_right":case"bottom_right":{if(s<l)break;h=!0,u.bottomRight.x=Math.min(1,u.bottomRight.x+o.x/s),s*(u.bottomRight.x-u.topLeft.x)<l&&(u.bottomRight.x=u.topLeft.x+l/s);break}}if(h)return d.add(f.rot(t.rotation)),{id:t.id,type:t.type,x:d.x,y:d.y,props:{w:(u.bottomRight.x-u.topLeft.x)*s,h:(u.bottomRight.y-u.topLeft.y)*a,crop:u}}}function Y0e({shapeId:t,assetId:e,width:n}){const r=Ee(),o=Iw(),i=JKe(),[s,a]=v.useState(()=>({asset:e?r.getAsset(e)??null:null,url:null})),l=v.useRef(!1),c=v.useRef(null);return v.useEffect(()=>{if(!e)return;let u=!1,d;const f=Al("update state",()=>{if(!o&&t&&r.getCulledShapes().has(t))return;const h=r.getAsset(e);if(!h){a(m=>({...m,asset:null,url:null}));return}if(!h.props.src){const m=r.getTemporaryAssetPreview(h.id);if(m){c.current!==m&&(c.current=m,a(S=>({...S,isPlaceholder:!0,url:m})),i());return}}const g=o?o.scale*(n/h.props.w):r.getZoomLevel()*(n/h.props.w);function y(m,S){u||c.current!==S&&(l.current=!0,c.current=S,a({asset:m,url:S}),i())}if(l.current){let m=0;const S=()=>{m++,m>500/16&&(Yee(r,e,g,o,x=>y(h,x)),d==null||d())};d==null||d(),r.on("tick",S),d=()=>r.off("tick",S)}else Yee(r,e,g,o,m=>y(h,m))});return()=>{f(),d==null||d(),u=!0}},[r,e,o,i,t,n]),s}function Yee(t,e,n,r,o){t.resolveAssetUrl(e,{screenScale:n,shouldResolveToOriginal:r?r.pixelRatio===null:!1,dpr:(r==null?void 0:r.pixelRatio)??void 0}).then(i=>{o(i)})}async function spt(t){const n=await(await _c(t)).blob();return Fs.blobToDataUrl(n)}const apt=new Hl;class BP extends sy{isAspectRatioLocked(){return!0}canCrop(){return!0}getDefaultProps(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null,flipX:!1,flipY:!1,altText:""}}getAriaDescriptor(e){return e.props.altText}onResize(e,n){let r=a2(e,n);const{flipX:o,flipY:i}=n.initialShape.props,{scaleX:s,scaleY:a,mode:l}=n;if(r={...r,props:{...r.props,flipX:s<0!==o,flipY:a<0!==i}},!e.props.crop)return r;const c=l==="scale_shape"&&s===-1||l==="resize_bounds"&&o!==r.props.flipX,u=l==="scale_shape"&&a===-1||l==="resize_bounds"&&i!==r.props.flipY,{topLeft:d,bottomRight:f}=e.props.crop;return r.props.crop={topLeft:{x:c?1-f.x:d.x,y:u?1-f.y:d.y},bottomRight:{x:c?1-d.x:f.x,y:u?1-d.y:f.y}},r}component(e){return w.jsx(lpt,{shape:e})}indicator(e){return this.editor.getCroppingShapeId()===e.id?null:w.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h)})}async toSvg(e,n){if(!e.props.assetId)return null;const r=this.editor.getAsset(e.props.assetId);if(!r)return null;const{w:o}=Lx(e.props,e.props.crop),i=await apt.get(r,async()=>{let s=await n.resolveAssetUrl(r.id,o);if(!s)return null;if((s.startsWith("blob:")||s.startsWith("http")||s.startsWith("/")||s.startsWith("./"))&&(s=await spt(s)||""),Q0e(this.editor,r.id)){const{promise:a}=J0e(s);s=await a}return s});return i?w.jsx(cpt,{shape:e,src:i}):null}onDoubleClickEdge(e){const n=e.props;if(!n||this.editor.getCroppingShapeId()!==e.id)return;const r=to(n.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},{w:o,h:i}=Lx(e.props,r),s=new $(r.topLeft.x*o,r.topLeft.y*i).rot(e.rotation),a={id:e.id,type:e.type,x:e.x-s.x,y:e.y-s.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:o,h:i}};this.editor.updateShapes([a])}getInterpolatedProps(e,n,r){function o(i,s){var d,f,h,g;if(i.props.crop===null&&s.props.crop===null)return null;const a=((d=i.props.crop)==null?void 0:d.topLeft)||{x:0,y:0},l=((f=i.props.crop)==null?void 0:f.bottomRight)||{x:1,y:1},c=((h=s.props.crop)==null?void 0:h.topLeft)||{x:0,y:0},u=((g=s.props.crop)==null?void 0:g.bottomRight)||{x:1,y:1};return{topLeft:{x:Pn(a.x,c.x,r),y:Pn(a.y,c.y,r)},bottomRight:{x:Pn(l.x,u.x,r),y:Pn(l.y,u.y,r)}}}return{...r>.5?n.props:e.props,w:Pn(e.props.w,n.props.w,r),h:Pn(e.props.h,n.props.h,r),crop:o(e,n)}}}V(BP,"type","image"),V(BP,"props",Cce),V(BP,"migrations",Ece);const lpt=v.memo(function({shape:e}){var x;const n=Ee(),{w:r}=Lx(e.props,e.props.crop),{asset:o,url:i}=Y0e({shapeId:e.id,assetId:e.props.assetId,width:r}),s=xge(),[a,l]=v.useState(""),[c,u]=v.useState(null),d=o&&Q0e(n,o.id);v.useEffect(()=>{if(i&&d){const{promise:C,cancel:E}=J0e(i);return C.then(P=>{l(P),u(i)}),()=>{E()}}},[n,d,s,i]);const f=Ie("show crop preview",()=>e.id===n.getOnlySelectedShapeId()&&n.getCroppingShapeId()===e.id&&n.isIn("select.crop"),[n,e.id]),h=s&&(((x=o==null?void 0:o.props.mimeType)==null?void 0:x.includes("video"))||d),g=Z0e(e),y=i===c?null:i,m=h?a:c;if(!i&&!(o!=null&&o.props.src))return w.jsxs(Uf,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h,color:"var(--color-text-3)",backgroundColor:"var(--color-low)",border:"1px solid var(--color-low-border)"},children:[w.jsx("div",{className:he("tl-image-container",o&&"tl-image-container-loading"),style:g,children:o?null:w.jsx(X0e,{})}),"url"in e.props&&e.props.url&&w.jsx(Av,{url:e.props.url})]});const S=d?"anonymous":void 0;return w.jsxs(w.Fragment,{children:[f&&m&&w.jsx("div",{style:g,children:w.jsx("img",{className:"tl-image",style:{...AS(e),opacity:.1},crossOrigin:S,src:m,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1})}),w.jsxs(Uf,{id:e.id,style:{overflow:"hidden",width:e.props.w,height:e.props.h},children:[w.jsxs("div",{className:he("tl-image-container"),style:g,children:[m&&w.jsx("img",{className:"tl-image",style:AS(e),crossOrigin:S,src:m,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1},m),y&&w.jsx("img",{className:"tl-image",style:AS(e),crossOrigin:S,src:y,referrerPolicy:"strict-origin-when-cross-origin",draggable:!1,onLoad:()=>u(y)},y)]}),e.props.url&&w.jsx(Av,{url:e.props.url})]})]})});function Q0e(t,e){const n=e?t.getAsset(e):void 0;return n?"mimeType"in n.props&&Fa.isAnimatedImageType(n==null?void 0:n.props.mimeType)||"isAnimated"in n.props&&n.props.isAnimated:!1}function Z0e(t){const e=t.props.crop,n=e==null?void 0:e.topLeft;if(!n)return{width:t.props.w,height:t.props.h};const{w:r,h:o}=Lx(t.props,e),i=-n.x*r,s=-n.y*o;return{transform:`translate(${i}px, ${s}px)`,width:r,height:o}}function AS(t,e){const{flipX:n,flipY:r}=t.props;if(!n&&!r)return;const o=`scale(${n?-1:1}, ${r?-1:1})`;return{transform:`${e?`translate(${n?e.width:0}px, ${r?e.height:0}px)`:""} ${o}`,transformOrigin:e?"0 0":"center center"}}function cpt({shape:t,src:e}){const n=xg(),r=Z0e(t),o=t.props.crop;if(r.transform&&o){const{transform:i,width:s,height:a}=r,l=(o.bottomRight.x-o.topLeft.x)*s,c=(o.bottomRight.y-o.topLeft.y)*a,u=[new $(0,0),new $(l,0),new $(l,c),new $(0,c)],d=AS(t,{width:s,height:a});return w.jsxs(w.Fragment,{children:[w.jsx("defs",{children:w.jsx("clipPath",{id:n,children:w.jsx("polygon",{points:u.map(f=>`${f.x},${f.y}`).join(" ")})})}),w.jsx("g",{clipPath:`url(#${n})`,children:w.jsx("image",{href:e,width:s,height:a,style:d?{...d,transform:`${i} ${d.transform}`}:{transform:i}})})]})}else return w.jsx("image",{href:e,width:t.props.w,height:t.props.h,style:AS(t,{width:t.props.w,height:t.props.h})})}function J0e(t){let e=!1;return{promise:new Promise(r=>{const o=dx();o.onload=()=>{if(e)return;const i=document.createElement("canvas");i.width=o.width,i.height=o.height;const s=i.getContext("2d");s&&(s.drawImage(o,0,0),r(i.toDataURL()))},o.crossOrigin="anonymous",o.src=t}),cancel:()=>e=!0}}function ebe(t){return{size:t,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function tbe(t,e,n){const r=e.vertices,o=ebe(n);return Ou(r,o)}function upt(t,e,n){const r=ebe(n);return C6(Y2(tbe(t,e,n),r),r)}function dpt(t,e,n){const r=upt(t,e,n);return DB(r)}function fpt(t,e,n){if(t.props.dash==="draw"){const r=tbe(t,e,n);return ag(r)}return e.getSvgPathData()}function nbe(t,e,n){let r=`M ${hr(e[0])}L`,o=`M ${hr(e[0])}L`;const i=n/3,s=n*2,a=Ul(t);let l=e[0],c,u=e[0],d;const f=e.length;for(let h=0,g=f-1;h<g;h++){c=e[h+1],d=$.AddXY(e[h+1],a()*i,a()*i);const y=$.Sub(c,l),m=$.Len(y),S=$.Div(y,m).mul(Math.min(m/4,s)),x=$.Add(l,S),C=$.Add(c,S.neg()),E=$.Sub(d,u),P=$.Len(E),I=$.Div(E,P).mul(Math.min(P/4,s)),T=$.Add(u,I),M=$.Add(d,I.neg());h===g-1?(r+=`${hr(x)}L ${hr(c)}`,o+=`${hr(T)}L ${hr(d)}`):(r+=`${hr(x)}L ${hr(C)}Q ${hr(c)}`,o+=`${hr(T)}L ${hr(M)}Q ${hr(d)}`,l=c,u=d)}return[r,r+o]}const hpt=new Hl;class HP extends Tc{canTabTo(){return!1}hideResizeHandles(){return!0}hideRotateHandle(){return!0}hideSelectionBoundsFg(){return!0}hideSelectionBoundsBg(){return!0}getDefaultProps(){const[e,n]=hx(2);return{dash:"draw",size:"m",color:"black",spline:"line",points:{[e]:{id:e,index:e,x:0,y:0},[n]:{id:n,index:n,x:.1,y:.1}},scale:1}}getGeometry(e){return Jb(e)}getHandles(e){return hpt.get(e.props,()=>{const n=Jb(e),r=Zb(e),o=r.map(i=>({...i,id:i.index,type:"vertex",canSnap:!0}));for(let i=0;i<r.length-1;i++){const s=fx(r[i].index,r[i+1].index),l=n.segments[i].midPoint();o.push({id:s,type:"create",index:s,x:l.x,y:l.y,canSnap:!0})}return o.sort(Ni)})}onResize(e,n){const{scaleX:r,scaleY:o}=n;return{props:{points:hh(e.props.points,(i,{id:s,index:a,x:l,y:c})=>({id:s,index:a,x:l*r,y:c*o}))}}}onBeforeCreate(e){const{props:{points:n}}=e,r=Object.keys(n);if(r.length<2)return;const o=n[r[0]];if(r.every(s=>{const a=n[s];return a.x===o.x&&a.y===o.y})){const s=r[r.length-1];return n[s]={...n[s],x:n[s].x+.1,y:n[s].y+.1},e}}onHandleDrag(e,{handle:n}){if(n.type!=="vertex")return;const r=el(new $(n.x,n.y),this.editor);return{...e,props:{...e.props,points:{...e.props.points,[n.id]:{id:n.id,index:n.index,x:r.x,y:r.y}}}}}component(e){return w.jsx(rh,{style:{minWidth:50,minHeight:50},children:w.jsx(Qee,{shape:e})})}indicator(e){const n=Ml[e.props.size]*e.props.scale,r=Jb(e),{dash:o}=e.props;let i;if(e.props.spline==="line"){const s=r.points;if(o==="solid"||o==="dotted"||o==="dashed")i="M"+s[0]+"L"+s.slice(1);else{const[a]=nbe(e.id,s,n);i=a}}else i=fpt(e,r,n);return w.jsx("path",{d:i})}toSvg(e){return w.jsx(Qee,{shouldScale:!0,shape:e})}getHandleSnapGeometry(e){const n=Zb(e);return{points:n,getSelfSnapPoints:r=>{const o=this.getHandles(e).filter(i=>i.type==="vertex").findIndex(i=>i.id===r.id);return n.filter((i,s)=>Math.abs(s-o)>1).map($.From)},getSelfSnapOutline:r=>{const o=this.getHandles(e).filter(s=>s.type==="vertex").findIndex(s=>s.id===r.id),i=Jb(e).segments.filter((s,a)=>a!==o-1&&a!==o);return i.length?new Zs({children:i}):null}}}getInterpolatedProps(e,n,r){const o=Zb(e),i=Zb(n),s=[],a=[];let l=Xae;if(o.length>i.length)for(let c=0;c<o.length;c++)s[c]={...o[c]},i[c]===void 0?a[c]={...i[i.length-1],id:l}:a[c]={...i[c],id:l},l=cu(l);else if(i.length>o.length)for(let c=0;c<i.length;c++)a[c]={...i[c]},o[c]===void 0?s[c]={...o[o.length-1],id:l}:s[c]={...o[c],id:l},l=cu(l);else for(let c=0;c<i.length;c++)s[c]=o[c],a[c]=i[c];return{...r>.5?n.props:e.props,points:Object.fromEntries(s.map((c,u)=>{const d=a[u];return[c.id,{...c,x:Pn(c.x,d.x,r),y:Pn(c.y,d.y,r)}]})),scale:Pn(e.props.scale,n.props.scale,r)}}}V(HP,"type","line"),V(HP,"props",Pce),V(HP,"migrations",_ce);function Zb(t){return Object.values(t.props.points).sort(Ni)}function Jb(t){const e=Zb(t).map($.From);switch(t.props.spline){case"cubic":return new iQe({points:e});case"line":return new vh({points:e})}}function Qee({shape:t,shouldScale:e=!1,forceSolid:n=!1}){const r=Kl(),o=Jb(t),{dash:i,color:s,size:a}=t.props,l=1/t.props.scale,c=e?l:1,u=Ml[a]*t.props.scale;if(t.props.spline==="line"){if(i==="solid"){const d=o.points,f="M"+d[0]+"L"+d.slice(1);return w.jsx("path",{d:f,stroke:r[s].solid,strokeWidth:u,fill:"none",transform:`scale(${c})`})}if(i==="dashed"||i==="dotted")return w.jsx("g",{stroke:r[s].solid,strokeWidth:u,transform:`scale(${c})`,children:o.segments.map((d,f)=>{const{strokeDasharray:h,strokeDashoffset:g}=n?{strokeDasharray:"none",strokeDashoffset:"none"}:uc(d.length,u,{style:i,start:f>0?"outset":"none",end:f<o.segments.length-1?"outset":"none"});return w.jsx("path",{strokeDasharray:h,strokeDashoffset:g,d:d.getSvgPathData(!0),fill:"none"},f)})});if(i==="draw"){const d=o.points,[f,h]=nbe(t.id,d,u);return w.jsx("path",{d:h,stroke:r[s].solid,strokeWidth:u,fill:"none",transform:`scale(${c})`})}}if(t.props.spline==="cubic"){const d=o.getSvgPathData();if(i==="solid")return w.jsx("path",{strokeWidth:u,stroke:r[s].solid,fill:"none",d,transform:`scale(${c})`});if(i==="dashed"||i==="dotted")return w.jsx("g",{stroke:r[s].solid,strokeWidth:u,transform:`scale(${c})`,children:o.segments.map((f,h)=>{const{strokeDasharray:g,strokeDashoffset:y}=uc(f.length,u,{style:i,start:h>0?"outset":"none",end:h<o.segments.length-1?"outset":"none",forceSolid:n});return w.jsx("path",{strokeDasharray:g,strokeDashoffset:y,d:f.getSvgPathData(),fill:"none"},h)})});if(i==="draw")return w.jsx("path",{d:dpt(t,o,u),strokeWidth:1,stroke:r[s].solid,fill:r[s].solid,transform:`scale(${c})`})}}class UP extends Tc{constructor(){super(...arguments);V(this,"options",{resizeMode:"none"})}canEdit(){return!0}hideResizeHandles(){const{resizeMode:n}=this.options;switch(n){case"none":return!0;case"scale":return!1;default:throw Jn(n)}}isAspectRatioLocked(){return this.options.resizeMode==="scale"}hideSelectionBoundsFg(){return!1}getDefaultProps(){return{color:"black",richText:Ll(""),size:"m",font:"draw",align:"middle",verticalAlign:"middle",labelColor:"black",growY:0,fontSizeAdjustment:0,url:"",scale:1}}getGeometry(n){const{labelHeight:r,labelWidth:o}=rbe(this.editor,n),{scale:i}=n.props,s=r*i,a=o*i,l=kr*i,c=UE(n);return new Zs({children:[new Pu({width:l,height:c,isFilled:!0}),new Pu({x:n.props.align==="start"?0:n.props.align==="end"?l-a:(l-a)/2,y:n.props.verticalAlign==="start"?0:n.props.verticalAlign==="end"?c-s:(c-s)/2,width:a,height:s,isFilled:!0,isLabel:!0})]})}getHandles(n){const{scale:r}=n.props;if(this.editor.getInstanceState().isCoarsePointer)return[];const i=this.editor.getZoomLevel();if(i*r<.25)return[];const s=UE(n),a=kr*r,l=xft/i*r;return i*r<.5?[{id:"bottom",index:"a3",type:"clone",x:a/2,y:s+l}]:[{id:"top",index:"a1",type:"clone",x:a/2,y:-l},{id:"right",index:"a2",type:"clone",x:a+l,y:s/2},{id:"bottom",index:"a3",type:"clone",x:a/2,y:s+l},{id:"left",index:"a4",type:"clone",x:-l,y:s/2}]}onResize(n,r){const{resizeMode:o}=this.options;switch(o){case"none":return;case"scale":return Dhe(n,r);default:throw Jn(o)}}getText(n){return sg(this.editor,n.props.richText)}getFontFaces(n){return S4(this.editor,n.props.richText,{family:`tldraw_${n.props.font}`,weight:"normal",style:"normal"})}component(n){const{id:r,type:o,props:{labelColor:i,scale:s,color:a,font:l,size:c,align:u,richText:d,verticalAlign:f,fontSizeAdjustment:h}}=n,g=mpt(r),y=Kl(),m=kr*s,S=UE(n),x=Ie("shape rotation",()=>{var M;return((M=this.editor.getShapePageTransform(r))==null?void 0:M.rotation())??0},[this.editor]),C=Ie("zoom",()=>this.editor.getZoomLevel()<.35/s,[s,this.editor]),E=Ie("dark mode",()=>this.editor.user.getIsDarkMode(),[this.editor]),P=n.id===this.editor.getOnlySelectedShapeId(),I=L6(this.editor,n.id),T=dc(d);return w.jsxs(w.Fragment,{children:[w.jsx("div",{id:r,className:"tl-note__container",style:{width:m,height:S,backgroundColor:y[a].note.fill,borderBottom:C?E?`${2*s}px solid rgb(20, 20, 20)`:`${2*s}px solid rgb(144, 144, 144)`:"none",boxShadow:C?"none":vpt(n.id,x,s)},children:(P||I||!T)&&w.jsx(U6,{shapeId:r,type:o,font:l,fontSize:(h||wd[c])*s,lineHeight:qi.lineHeight,align:u,verticalAlign:f,richText:d,isSelected:P,labelColor:i==="black"?y[a].note.text:y[i].fill,wrap:!0,padding:Ns*s,hasCustomTabBehavior:!0,onKeyDown:g})}),"url"in n.props&&n.props.url&&w.jsx(Av,{url:n.props.url})]})}indicator(n){const{scale:r}=n.props;return w.jsx("rect",{rx:r,width:Se(kr*r),height:Se(UE(n))})}toSvg(n,r){const o=zd({isDarkMode:r.isDarkMode}),i=ypt(n),s=w.jsx(W6,{fontSize:n.props.fontSizeAdjustment||wd[n.props.size],font:n.props.font,align:n.props.align,verticalAlign:n.props.verticalAlign,richText:n.props.richText,labelColor:o[n.props.color].note.text,bounds:i,padding:Ns*n.props.scale});return w.jsxs(w.Fragment,{children:[w.jsx("rect",{x:5,y:5,rx:1,width:kr-10,height:i.h,fill:"rgba(0,0,0,.1)"}),w.jsx("rect",{rx:1,width:kr,height:i.h,fill:o[n.props.color].note.fill}),s]})}onBeforeCreate(n){return Zee(this.editor,n)}onBeforeUpdate(n,r){if(!(Jf(n.props.richText,r.props.richText)&&n.props.font===r.props.font&&n.props.size===r.props.size))return Zee(this.editor,r)}getInterpolatedProps(n,r,o){return{...o>.5?r.props:n.props,scale:Pn(n.props.scale,r.props.scale,o)}}}V(UP,"type","note"),V(UP,"props",Ice),V(UP,"migrations",Tce);function Zee(t,e){const{labelHeight:n,fontSizeAdjustment:r}=rbe(t,e),o=Math.max(0,n-kr);if(o!==e.props.growY||r!==e.props.fontSizeAdjustment)return{...e,props:{...e.props,growY:o,fontSizeAdjustment:r}}}function ppt(t,e){const{richText:n}=e.props;if(dc(n))return{labelHeight:wd[e.props.size]*qi.lineHeight+Ns*2,labelWidth:100,fontSizeAdjustment:0};const r=wd[e.props.size];let o=0,i=0,s=kr,a=kr;const l=1;do{o=Math.min(r,r-i);const c=ET(t,n),u=t.textMeasure.measureHtml(c,{...qi,fontFamily:jd[e.props.font],fontSize:o,maxWidth:kr-Ns*2-l,disableOverflowWrapBreaking:!0});if(s=u.h+Ns*2,a=u.w+Ns*2,o<=14){const d=ET(t,n),f=t.textMeasure.measureHtml(d,{...qi,fontFamily:jd[e.props.font],fontSize:o,maxWidth:kr-Ns*2-l});s=f.h+Ns*2,a=f.w+Ns*2;break}if(u.scrollWidth.toFixed(0)===u.w.toFixed(0))break}while(i++<50);return{labelHeight:s,labelWidth:a,fontSizeAdjustment:o}}const gpt=new Hl;function rbe(t,e){return gpt.get(e,()=>ppt(t,e))}function mpt(t){const e=Ee(),n=Ege();return v.useCallback(r=>{const o=e.getShape(t);if(!o)return;const i=r.key==="Tab",s=(r.metaKey||r.ctrlKey)&&r.key==="Enter";if(i||s){r.preventDefault();const a=e.getShapePageTransform(t),l=a.rotation(),c=!!(n.dir==="rtl"||S0e(sg(e,o.props.richText))),u=(kr+e.options.adjacentShapeMargin+(s&&!r.shiftKey?o.props.growY:0))*o.props.scale,d=new $(i?r.shiftKey!=c?-1:1:0,s?r.shiftKey?-1:1:0).mul(u).add(Z2.clone().mul(o.props.scale)).rot(l).add(a.point()),f=k0e(e,o,d,l);f&&(e.markHistoryStoppingPoint("editing adjacent shape"),WI(e,f,!0))}},[t,e,n.dir])}function UE(t){return(kr+t.props.growY)*t.props.scale}function vpt(t,e,n){const r=Ul(t),o=Math.abs(r())+.5,i=Math.cos(e),s=5*n,a=4*n,l=6*n,c=7*n;return`0px ${s-o}px ${s}px -${s}px rgba(15, 23, 31, .6),
	0px ${(a+o*c)*Math.max(0,i)}px ${l+o*c}px -${a+o*l}px rgba(15, 23, 31, ${(.3+o*.1).toFixed(2)}), 
	0px ${48*n}px ${10*n}px -${10*n}px inset rgba(15, 23, 44, ${((.022+r()*.005)*((1+i)/2)).toFixed(2)})`}function ypt(t){return new rt(0,0,kr,kr+t.props.growY)}const bpt=zM("text size",(t,e)=>(t.fonts.trackFontsForShape(e),obe(t,e.props)),{areRecordsEqual:(t,e)=>t.props===e.props});class WP extends Tc{constructor(){super(...arguments);V(this,"options",{extraArrowHorizontalPadding:10})}getDefaultProps(){return{color:"black",size:"m",w:8,font:"draw",textAlign:"start",autoSize:!0,scale:1,richText:Ll("")}}getMinDimensions(n){return bpt.get(this.editor,n.id)}getGeometry(n,r){const{scale:o}=n.props,{width:i,height:s}=this.getMinDimensions(n),a=(r==null?void 0:r.context)??"none";return new Pu({x:(a==="@tldraw/arrow-without-arrowhead"?-this.options.extraArrowHorizontalPadding:0)*o,width:(i+(a==="@tldraw/arrow-without-arrowhead"?this.options.extraArrowHorizontalPadding*2:0))*o,height:s*o,isFilled:!0,isLabel:!0})}getFontFaces(n){return S4(this.editor,n.props.richText,{family:`tldraw_${n.props.font}`,weight:"normal",style:"normal"})}getText(n){return sg(this.editor,n.props.richText)}canEdit(){return!0}isAspectRatioLocked(){return!0}component(n){const{id:r,props:{font:o,size:i,richText:s,color:a,scale:l,textAlign:c}}=n,{width:u,height:d}=this.getMinDimensions(n),f=n.id===this.editor.getOnlySelectedShapeId(),h=Kl(),g=Spt(r);return w.jsx(U6,{shapeId:r,classNamePrefix:"tl-text-shape",type:"text",font:o,fontSize:Ov[i],lineHeight:qi.lineHeight,align:c,verticalAlign:"middle",richText:s,labelColor:h[a].solid,isSelected:f,textWidth:u,textHeight:d,style:{transform:`scale(${l})`,transformOrigin:"top left"},wrap:!0,onKeyDown:g})}indicator(n){const r=this.editor.getShapeGeometry(n).bounds,o=Ee();return n.props.autoSize&&o.getEditingShapeId()===n.id?null:w.jsx("rect",{width:Se(r.width),height:Se(r.height)})}toSvg(n,r){const o=this.editor.getShapeGeometry(n).bounds,i=o.width/(n.props.scale??1),s=o.height/(n.props.scale??1),a=zd(r),l=new rt(0,0,i,s);return w.jsx(W6,{fontSize:Ov[n.props.size],font:n.props.font,align:n.props.textAlign,verticalAlign:"middle",richText:n.props.richText,labelColor:a[n.props.color].solid,bounds:l,padding:0})}onResize(n,r){const{newPoint:o,initialBounds:i,initialShape:s,scaleX:a,handle:l}=r;if(r.mode==="scale_shape"||l!=="right"&&l!=="left")return{id:n.id,type:n.type,...Dhe(n,r)};{const c=Math.max(1,Math.abs(i.width*a)),{x:u,y:d}=a<0?$.Sub(o,$.FromAngle(n.rotation).mul(c)):o;return{id:n.id,type:n.type,x:u,y:d,props:{w:c/s.props.scale,autoSize:!1}}}}onEditEnd(n){sg(this.editor,n.props.richText).trimEnd().length===0&&this.editor.deleteShapes([n.id])}onBeforeUpdate(n,r){if(!r.props.autoSize)return;const o=n.props.size!==r.props.size||n.props.textAlign!==r.props.textAlign||n.props.font!==r.props.font||n.props.scale!==1&&r.props.scale===1,i=!Jf(n.props.richText,r.props.richText);if(!o&&!i)return;const s=this.getMinDimensions(n),a=obe(this.editor,r.props),l=s.width*n.props.scale,c=s.height*n.props.scale,u=a.width*r.props.scale,d=a.height*r.props.scale;let f;switch(r.props.textAlign){case"middle":{f=new $((u-l)/2,i?0:(d-c)/2);break}case"end":{f=new $(u-l,i?0:(d-c)/2);break}default:{if(i)break;f=new $(0,(d-c)/2);break}}if(f){f.rot(r.rotation);const{x:h,y:g}=r;return{...r,x:h-f.x,y:g-f.y,props:{...r.props,w:u}}}else return{...r,props:{...r.props,w:u}}}}V(WP,"type","text"),V(WP,"props",Mce),V(WP,"migrations",Oce);function obe(t,e){const{font:n,richText:r,autoSize:o,size:i,w:s}=e,a=o?16:Math.max(16,s),l=Ov[i],c=o?null:Math.floor(Math.max(a,s)),u=ET(t,r),d=t.textMeasure.measureHtml(u,{...qi,fontFamily:jd[n],fontSize:l,maxWidth:c});return o&&(d.w+=1),{width:Math.max(a,d.w),height:Math.max(l,d.h)}}function Spt(t){const e=Ee();return v.useCallback(n=>{if(e.getEditingShapeId()===t)switch(n.key){case"Enter":{(n.ctrlKey||n.metaKey)&&e.complete();break}}},[e,t])}const xpt=new Hl;class VP extends sy{canEdit(){return!0}isAspectRatioLocked(){return!0}getDefaultProps(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:"",altText:""}}getAriaDescriptor(e){return e.props.altText}component(e){return w.jsx(wpt,{shape:e})}indicator(e){return w.jsx("rect",{width:Se(e.props.w),height:Se(e.props.h)})}async toSvg(e,n){if(!e.props.assetId)return null;const r=this.editor.getAsset(e.props.assetId);if(!r)return null;const o=await xpt.get(r,async()=>{const i=await n.resolveAssetUrl(r.id,e.props.w);if(!i)return null;const s=await Fa.loadVideo(i);return await Fa.getVideoFrameAsDataUrl(s,0)});return o?w.jsx("image",{href:o,width:e.props.w,height:e.props.h}):null}}V(VP,"type","video"),V(VP,"props",Rce),V(VP,"migrations",kce);const wpt=v.memo(function({shape:e}){const n=Ee(),r=n.getShapeGeometry(e).bounds.w*n.getZoomLevel()>=110,o=kw(e.id),i=xge(),{Spinner:s}=$r(),{asset:a,url:l}=Y0e({shapeId:e.id,assetId:e.props.assetId,width:e.props.w}),c=v.useRef(null),[u,d]=v.useState(!1),[f,h]=v.useState(!1);v.useEffect(()=>{const y=()=>h(document.fullscreenElement===c.current);return document.addEventListener("fullscreenchange",y),()=>document.removeEventListener("fullscreenchange",y)});const g=v.useCallback(y=>{y.currentTarget&&d(!0)},[]);return v.useEffect(()=>{const y=c.current;y&&o&&document.activeElement!==y&&y.focus()},[o,u]),v.useEffect(()=>{if(i){const y=c.current;if(!y)return;y.pause(),y.currentTime=0}},[c,i]),w.jsxs(w.Fragment,{children:[w.jsx(Uf,{id:e.id,style:{color:"var(--color-text-3)",backgroundColor:a?"transparent":"var(--color-low)",border:a?"none":"1px solid var(--color-low-border)"},children:w.jsx("div",{className:"tl-counter-scaled",children:w.jsx("div",{className:"tl-video-container",children:a?s&&!a.props.src?w.jsx(s,{}):l?w.jsxs(w.Fragment,{children:[w.jsx("video",{ref:c,style:o?{pointerEvents:"all"}:u?void 0:{display:"none"},className:he("tl-video",`tl-video-shape-${e.id.split(":")[1]}`,{"tl-video-is-fullscreen":f}),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:o&&r,onLoadedData:g,hidden:!u,children:w.jsx("source",{src:l})}),!u&&s&&w.jsx(s,{})]}):null:w.jsx(X0e,{})})})}),"url"in e.props&&e.props.url&&w.jsx(Av,{url:e.props.url})]})}),ibe=[WP,jP,LP,FP,UP,HP,NP,DP,zP,TT,BP,VP];function Cpt(t){return t.sideEffects.register({instance_page_state:{afterChange:(e,n)=>{if(e.croppingShapeId!==n.croppingShapeId){const r=t.isIn("select.crop");!e.croppingShapeId&&n.croppingShapeId?r||t.setCurrentTool("select.crop.idle"):e.croppingShapeId&&!n.croppingShapeId&&r&&t.setCurrentTool("select.idle")}if(e.editingShapeId!==n.editingShapeId)if(!e.editingShapeId&&n.editingShapeId){if(!t.isIn("select.editing_shape")){const r=t.getEditingShape();r&&r.type==="text"&&t.isInAny("text.pointing","select.resizing")&&t.getInstanceState().isToolLocked?t.setCurrentTool("select.editing_shape",{isCreatingTextWhileToolLocked:!0}):t.setCurrentTool("select.editing_shape")}}else e.editingShapeId&&!n.editingShapeId&&t.isIn("select.editing_shape")&&t.setCurrentTool("select.idle")}}})}class sbe extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"scribbleId","id");V(this,"markId","");V(this,"excludedShapeIds",new Set)}onEnter(n){this.markId=this.editor.markHistoryStoppingPoint("erase scribble begin"),this.info=n;const{originPagePoint:r}=this.editor.inputs;this.excludedShapeIds=new Set(this.editor.getCurrentPageShapes().filter(i=>{if(this.editor.isShapeOrAncestorLocked(i))return!0;if(this.editor.isShapeOfType(i,"group")||this.editor.isShapeOfType(i,"frame")){const s=this.editor.getPointInShapeSpace(i,r);return this.editor.getShapeGeometry(i).bounds.containsPoint(s)}return!1}).map(i=>i.id));const o=this.editor.scribbles.addScribble({color:"muted-1",size:12});this.scribbleId=o.id,this.update()}pushPointToScribble(){const{x:n,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,n,r)}onExit(){this.editor.setErasingShapes([]),this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}update(){const{editor:n,excludedShapeIds:r}=this,o=n.getErasingShapeIds(),i=n.getZoomLevel(),s=n.getCurrentPageRenderingShapesSorted(),{inputs:{currentPagePoint:a,previousPagePoint:l}}=n;this.pushPointToScribble();const c=new Set(o),u=this.editor.options.hitTestMargin/i;for(const d of s){if(n.isShapeOfType(d,"group"))continue;const f=n.getShapeMask(d.id);if(f&&!Ka(a,f))continue;const h=n.getShapeGeometry(d),g=n.getShapePageTransform(d);if(!h||!g)continue;const y=g.clone().invert(),m=y.applyToPoint(l),S=y.applyToPoint(a),{bounds:x}=h;x.minX-u>Math.max(m.x,S.x)||x.minY-u>Math.max(m.y,S.y)||x.maxX+u<Math.min(m.x,S.x)||x.maxY+u<Math.min(m.y,S.y)||h.hitTestLineSegment(m,S,u)&&c.add(n.getOutermostSelectableShape(d).id)}this.editor.setErasingShapes([...c].filter(d=>!r.has(d)))}complete(){const{editor:n}=this;n.deleteShapes(n.getCurrentPageState().erasingShapeIds),this.parent.transition("idle")}cancel(){const{editor:n}=this;n.bailToMark(this.markId),this.parent.transition("idle",this.info)}}V(sbe,"id","erasing");var PL;let Ept=(PL=class extends Bt{onPointerDown(e){this.parent.transition("pointing",e)}onCancel(){this.editor.setCurrentTool("select")}},V(PL,"id","idle"),PL);var _L;let Ppt=(_L=class extends Bt{onEnter(){const e=this.editor.getZoomLevel(),n=this.editor.getCurrentPageRenderingShapesSorted(),{inputs:{currentPagePoint:r}}=this.editor,o=new Set,i=o.size;for(let s=n.length,a=s-1;a>=0;a--){const l=n[a];if(!(this.editor.isShapeOrAncestorLocked(l)||this.editor.isShapeOfType(l,"group"))&&this.editor.isPointInShape(l,r,{hitInside:!1,margin:this.editor.options.hitTestMargin/e})){const c=this.editor.getOutermostSelectableShape(l);if(this.editor.isShapeOfType(c,"frame")&&o.size>i)break;o.add(c.id)}}this.editor.setErasingShapes([...o])}onLongPress(e){this.startErasing(e)}onExit(e,n){n!=="erasing"&&this.editor.setErasingShapes([])}onPointerMove(e){this.editor.inputs.isDragging&&this.startErasing(e)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.complete()}onInterrupt(){this.cancel()}startErasing(e){this.parent.transition("erasing",e)}complete(){const e=this.editor.getErasingShapeIds();e.length&&(this.editor.markHistoryStoppingPoint("erase end"),this.editor.deleteShapes(e)),this.parent.transition("idle")}cancel(){this.parent.transition("idle")}},V(_L,"id","pointing"),_L);class qP extends Bt{static children(){return[Ept,Ppt,sbe]}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}}V(qP,"id","eraser"),V(qP,"initial","idle"),V(qP,"isLockable",!1);class abe extends Bt{constructor(){super(...arguments);V(this,"initialCamera",new $)}onEnter(){this.initialCamera=$.From(this.editor.getCamera()),this.update()}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.parent.transition("idle")}onComplete(){this.complete()}update(){const{initialCamera:n,editor:r}=this,{currentScreenPoint:o,originScreenPoint:i}=r.inputs,s=$.Sub(o,i).div(r.getZoomLevel());s.len2()!==0&&r.setCamera(n.clone().add(s))}complete(){const{editor:n}=this,{pointerVelocity:r}=n.inputs,o=Math.min(r.len(),2);o>.1&&this.editor.slideCamera({speed:o,direction:r}),this.parent.transition("idle")}}V(abe,"id","dragging");var IL;let _pt=(IL=class extends Bt{onEnter(){this.editor.setCursor({type:"grab",rotation:0})}onPointerDown(e){this.parent.transition("pointing",e)}onCancel(){this.editor.setCurrentTool("select")}},V(IL,"id","idle"),IL);var TL;let Ipt=(TL=class extends Bt{onEnter(){this.editor.stopCameraAnimation(),this.editor.setCursor({type:"grabbing",rotation:0})}onLongPress(){this.startDragging()}onPointerMove(){this.editor.inputs.isDragging&&this.startDragging()}startDragging(){this.parent.transition("dragging")}onPointerUp(){this.complete()}onCancel(){this.complete()}onComplete(){this.complete()}onInterrupt(){this.complete()}complete(){this.parent.transition("idle")}},V(TL,"id","pointing"),TL);class KP extends Bt{static children(){return[_pt,Ipt,abe]}onDoubleClick(e){if(e.phase==="settle"){const{currentScreenPoint:n}=this.editor.inputs;this.editor.zoomIn(n,{animation:{duration:220,easing:bi.easeOutQuint}})}}onTripleClick(e){if(e.phase==="settle"){const{currentScreenPoint:n}=this.editor.inputs;this.editor.zoomOut(n,{animation:{duration:320,easing:bi.easeOutQuint}})}}onQuadrupleClick(e){if(e.phase==="settle"){const n=this.editor.getZoomLevel(),{inputs:{currentScreenPoint:r}}=this.editor;n===1?this.editor.zoomToFit({animation:{duration:400,easing:bi.easeOutQuint}}):this.editor.resetZoom(r,{animation:{duration:320,easing:bi.easeOutQuint}})}}}V(KP,"id","hand"),V(KP,"initial","idle"),V(KP,"isLockable",!1);var ML;let Tpt=(ML=class extends Bt{onCancel(){this.editor.setCurrentTool("select")}onPointerDown(e){this.parent.transition("lasering",e)}},V(ML,"id","idle"),ML);class lbe extends Bt{constructor(){super(...arguments);V(this,"scribbleId","id")}onEnter(){const n=this.editor.scribbles.addScribble({color:"laser",opacity:.7,size:4,delay:this.editor.options.laserDelayMs,shrink:.05,taper:!0});this.scribbleId=n.id,this.pushPointToScribble()}onExit(){this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.pushPointToScribble()}onPointerUp(){this.complete()}pushPointToScribble(){const{x:n,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,n,r)}onCancel(){this.cancel()}onComplete(){this.complete()}complete(){this.parent.transition("idle")}cancel(){this.parent.transition("idle")}}V(lbe,"id","lasering");class GP extends Bt{static children(){return[Tpt,lbe]}onEnter(){this.editor.setCursor({type:"cross",rotation:0})}}V(GP,"id","laser"),V(GP,"initial","idle"),V(GP,"isLockable",!1);class cbe extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"initialSelectedShapeIds",[]);V(this,"excludedShapeIds",new Set);V(this,"isWrapMode",!1);V(this,"viewportDidChange",!1);V(this,"initialStartShape",null)}cleanupViewportChangeReactor(){}onEnter(n){const{editor:r}=this,{altKey:o,currentPagePoint:i}=r.inputs;this.isWrapMode=r.user.getIsWrapMode(),this.viewportDidChange=!1;let s=!0;if(this.cleanupViewportChangeReactor=Al("viewport change while brushing",()=>{r.getViewportPageBounds(),!s&&!this.viewportDidChange&&(this.viewportDidChange=!0)}),o){this.parent.transition("scribble_brushing",n);return}this.excludedShapeIds=new Set(r.getCurrentPageShapes().filter(a=>r.isShapeOfType(a,"group")||r.isShapeOrAncestorLocked(a)).map(a=>a.id)),this.info=n,this.initialSelectedShapeIds=r.getSelectedShapeIds().slice(),this.initialStartShape=r.getShapesAtPoint(i)[0],this.hitTestShapes(),s=!1}onExit(){this.initialSelectedShapeIds=[],this.editor.updateInstanceState({brush:null}),this.cleanupViewportChangeReactor()}onTick({elapsed:n}){const{editor:r}=this;r.edgeScrollManager.updateEdgeScrolling(n)}onPointerMove(){this.hitTestShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(n){this.editor.setSelectedShapes(this.initialSelectedShapeIds),this.parent.transition("idle",n)}onKeyDown(n){this.editor.inputs.altKey?this.parent.transition("scribble_brushing",n):this.hitTestShapes()}onKeyUp(){this.hitTestShapes()}complete(){this.hitTestShapes(),this.parent.transition("idle")}hitTestShapes(){const{editor:n,excludedShapeIds:r,isWrapMode:o}=this,{inputs:{originPagePoint:i,currentPagePoint:s,shiftKey:a,ctrlKey:l}}=n,c=new Set(a?this.initialSelectedShapeIds:[]),u=o?!l:l,d=rt.FromPoints([i,s]),{corners:f}=d;let h,g,y,m,S,x;const E=n.getViewportPageBounds().contains(d)&&!this.viewportDidChange?n.getCurrentPageRenderingShapesSorted():n.getCurrentPageShapesSorted(),P=n.getCurrentPageId();e:for(let M=0,R=E.length;M<R;M++){if(y=E[M],r.has(y.id)||c.has(y.id)||(m=n.getShapePageBounds(y),!m))continue e;if(d.contains(m)){this.handleHit(y,s,P,c,f);continue e}if(u||n.isShapeOfType(y,"frame"))continue e;if(d.collides(m)){if(S=n.getShapePageTransform(y),!S)continue e;x=S.clone().invert().applyToPoints(f);const A=n.getShapeGeometry(y);t:for(let j=0;j<4;j++)if(h=x[j],g=x[(j+1)%4],A.hitTestLineSegment(h,g,0)){this.handleHit(y,s,P,c,f);break t}}}const I=n.getInstanceState().brush;(!I||!d.equals(I))&&n.updateInstanceState({brush:{...d.toJson()}});const T=n.getSelectedShapeIds();(T.length!==c.size||T.some(M=>!c.has(M)))&&n.setSelectedShapes(Array.from(c))}onInterrupt(){this.editor.updateInstanceState({brush:null})}handleHit(n,r,o,i,s){if(n.parentId===o){i.add(n.id);return}const a=this.editor.getOutermostSelectableShape(n),l=this.editor.getShapeMask(a.id);l&&!AB(l,s)&&!Ka(r,l)||i.add(a.id)}}V(cbe,"id","brushing");const Dv={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"};class ube extends Bt{constructor(){super(...arguments);V(this,"info",{})}updateCursor(){const n=this.editor.getSelectedShapes(),r=Dv[this.info.handle];this.editor.setCursor({type:r,rotation:n.length===1?this.editor.getSelectionRotation():0})}onEnter(n){this.info=n,this.updateCursor()}onPointerMove(){this.editor.inputs.isDragging&&this.startResizing()}onLongPress(){this.startResizing()}startResizing(){this.editor.getIsReadonly()||this.parent.transition("resizing",this.info)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}V(ube,"id","pointing_resize_handle");class K6 extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"markId","");V(this,"snapshot",{})}onEnter(n){this.info=n,this.markId=this.editor.markHistoryStoppingPoint("cropping"),this.snapshot=this.createSnapshot(),this.updateShapes()}onPointerMove(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}updateCursor(){if(!this.editor.getSelectedShapes()[0])return;const r=Dv[this.info.handle];this.editor.setCursor({type:r,rotation:this.editor.getSelectionRotation()})}updateShapes(){var f;const{shape:n,cursorHandleOffset:r}=this.snapshot;if(!n)return;const o=this.editor.getShapeUtil(n.type);if(!o)return;const i=this.editor.inputs.currentPagePoint.clone().sub(r),s=this.editor.inputs.originPagePoint.clone().sub(r),a=i.clone().sub(s).rot(-n.rotation),l=n.props.crop??opt(),c={w:1/(l.bottomRight.x-l.topLeft.x)*n.props.w,h:1/(l.bottomRight.y-l.topLeft.y)*n.props.h},d=(((f=o.onCrop)==null?void 0:f.bind(o))??ipt)(n,{handle:this.info.handle,change:a,crop:l,uncroppedSize:c,initialShape:this.snapshot.shape});d&&(this.editor.updateShapes([{id:n.id,type:n.type,...d}]),this.updateCursor())}complete(){this.updateShapes(),Fr(this.editor,[this.snapshot.shape.id]),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}createSnapshot(){const n=this.editor.getSelectionRotation(),{inputs:{originPagePoint:r}}=this.editor,o=this.editor.getOnlySelectedShape(),i=this.editor.getSelectionRotatedPageBounds(),s=$.RotWith(i.getHandlePoint(this.info.handle),i.point,n),a=$.Sub(r,s);return{shape:o,cursorHandleOffset:a}}}V(K6,"id","cropping");function G6(t,e=!1){const n=t.getZoomLevel(),{inputs:{currentPagePoint:r}}=t;return t.getShapeAtPoint(r,{hitInside:!1,hitLabels:e,margin:t.options.hitTestMargin/n,renderingOnly:!0})??t.getSelectedShapeAtPoint(r)}function dbe(t,e,n){if(!e)throw Error("Needs to translate a cropped shape!");const{crop:r}=e.props;if(!r)return;const o=t.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;o==="x"?n.x=0:o==="y"&&(n.y=0),n.rot(-e.rotation);const{w:i,h:s}=Lx(e.props,r),a=r.bottomRight.y-r.topLeft.y,l=r.bottomRight.x-r.topLeft.x,c=to(r);return c.topLeft.x=Math.min(1-l,Math.max(0,c.topLeft.x-n.x/i)),c.topLeft.y=Math.min(1-a,Math.max(0,c.topLeft.y-n.y/s)),c.bottomRight.x=c.topLeft.x+l,c.bottomRight.y=c.topLeft.y+a,{id:e.id,type:e.type,props:{crop:c}}}var OL;let Mpt=(OL=class extends Bt{onEnter(){this.editor.setCursor({type:"default",rotation:0});const e=this.editor.getOnlySelectedShape();e&&this.editor.setCroppingShape(e.id)}onExit(){this.editor.setCursor({type:"default",rotation:0})}onCancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}onPointerDown(e){var n;if(e.accelKey){this.cancel(),this.editor.root.handleEvent(e);return}switch(e.target){case"canvas":{const r=G6(this.editor);if(r&&!this.editor.isShapeOfType(r,"group")){this.onPointerDown({...e,shape:r,target:"shape"});return}this.cancel(),this.editor.root.handleEvent(e);break}case"shape":{if(e.shape.id===this.editor.getCroppingShapeId()){this.editor.setCurrentTool("select.crop.pointing_crop",e);return}else(n=this.editor.getShapeUtil(e.shape))!=null&&n.canCrop(e.shape)?(this.editor.setCroppingShape(e.shape.id),this.editor.setSelectedShapes([e.shape.id]),this.editor.setCurrentTool("select.crop.pointing_crop",e)):(this.cancel(),this.editor.root.handleEvent(e));break}case"selection":{switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{this.editor.setCurrentTool("select.pointing_rotate_handle",{...e,onInteractionEnd:"select.crop.idle"});break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{this.editor.setCurrentTool("select.crop.pointing_crop_handle",{...e,onInteractionEnd:"select.crop.idle"});break}default:this.cancel()}break}}}onDoubleClick(e){var i;if(this.editor.inputs.shiftKey||e.phase!=="up")return;const n=this.editor.getCroppingShapeId();if(!n)return;const r=this.editor.getShape(n);if(!r)return;const o=this.editor.getShapeUtil(r);if(o){if(e.target==="selection"){(i=o.onDoubleClickEdge)==null||i.call(o,r,e);return}this.cancel(),this.editor.root.handleEvent(e)}}onKeyDown(){this.nudgeCroppingImage(!1)}onKeyRepeat(){this.nudgeCroppingImage(!0)}onKeyUp(e){switch(e.code){case"Enter":{this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{});break}}}cancel(){this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle",{})}nudgeCroppingImage(e=!1){const{editor:{inputs:{keys:n}}}=this,r=n.has("ShiftLeft"),o=new $(0,0);if(n.has("ArrowLeft")&&(o.x+=1),n.has("ArrowRight")&&(o.x-=1),n.has("ArrowUp")&&(o.y+=1),n.has("ArrowDown")&&(o.y-=1),o.equals(new $(0,0)))return;r&&o.mul(10);const i=this.editor.getShape(this.editor.getCroppingShapeId());if(!i)return;const s=dbe(this.editor,i,o);s&&(e||this.editor.markHistoryStoppingPoint("translate crop"),this.editor.updateShapes([s]))}},V(OL,"id","idle"),OL);class fbe extends Bt{onCancel(){this.editor.setCurrentTool("select.crop.idle",{})}onPointerMove(e){this.editor.inputs.isDragging&&this.editor.setCurrentTool("select.crop.translating_crop",e)}onPointerUp(e){this.editor.setCurrentTool("select.crop.idle",e)}}V(fbe,"id","pointing_crop");class X6 extends Bt{constructor(){super(...arguments);V(this,"info",{})}onEnter(n){this.info=n,this.parent.setCurrentToolIdMask(n.onInteractionEnd);const r=this.editor.getSelectedShapes()[0];if(!r)return;const o=Dv[this.info.handle];this.editor.setCursor({type:o,rotation:this.editor.getSelectionRotation()}),this.editor.setCroppingShape(r.id)}onExit(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0)}onPointerMove(){this.editor.inputs.isDragging&&this.startCropping()}onLongPress(){this.startCropping()}startCropping(){this.editor.getIsReadonly()||this.parent.transition("cropping",{...this.info,onInteractionEnd:this.info.onInteractionEnd})}onPointerUp(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingShape(null),this.editor.setCurrentTool("select.idle"))}}V(X6,"id","pointing_crop_handle");class hbe extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"markId","");V(this,"snapshot",{})}onEnter(n){this.info=n,this.snapshot=this.createSnapshot(),this.markId=this.editor.markHistoryStoppingPoint("translating_crop"),this.editor.setCursor({type:"move",rotation:0}),this.updateShapes()}onExit(){this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}onKeyDown(n){switch(n.key){case"Alt":case"Shift":{this.updateShapes();return}}}onKeyUp(n){switch(n.key){case"Enter":{this.complete();return}case"Alt":case"Shift":this.updateShapes()}}complete(){this.updateShapes(),this.editor.setCurrentTool("select.crop.idle",this.info)}cancel(){this.editor.bailToMark(this.markId),this.editor.setCurrentTool("select.crop.idle",this.info)}createSnapshot(){return{shape:this.editor.getOnlySelectedShape()}}updateShapes(){const n=this.snapshot.shape;if(!n)return;const{originPagePoint:r,currentPagePoint:o}=this.editor.inputs,i=o.clone().sub(r),s=dbe(this.editor,n,i);s&&this.editor.updateShapes([s])}}V(hbe,"id","translating_crop");class j3 extends Bt{constructor(){super(...arguments);V(this,"markId","");V(this,"didExit",!1)}static children(){return[Mpt,hbe,fbe,X6,K6]}onEnter(){this.didExit=!1,this.markId=this.editor.markHistoryStoppingPoint("crop")}onExit(){this.didExit||(this.didExit=!0,this.editor.squashToMark(this.markId))}onCancel(){this.didExit||(this.didExit=!0,this.editor.bailToMark(this.markId))}}V(j3,"id","crop"),V(j3,"initial","idle");class pbe extends Bt{constructor(){super(...arguments);V(this,"shapeId","");V(this,"initialHandle",{});V(this,"initialAdjacentHandle",null);V(this,"initialPagePoint",{});V(this,"markId","");V(this,"initialPageTransform");V(this,"initialPageRotation");V(this,"info",{});V(this,"isPrecise",!1);V(this,"isPreciseId",null);V(this,"pointingId",null);V(this,"exactTimeout",-1)}onEnter(n){const{shape:r,isCreating:o,creatingMarkId:i,handle:s}=n;if(this.info=n,this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.shapeId=r.id,this.markId="",o)if(i)this.markId=i;else{const c=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);c&&(this.markId=c)}else this.markId=this.editor.markHistoryStoppingPoint("dragging handle");if(this.initialHandle=to(s),this.editor.isShapeOfType(r,"line")&&this.initialHandle.type==="create"){this.editor.updateShape({...r,props:{points:{...r.props.points,[s.index]:{id:s.index,index:s.index,x:s.x,y:s.y}}}});const u=this.editor.getShapeHandles(r).find(d=>d.index===s.index);this.initialHandle=to(u)}this.initialPageTransform=this.editor.getShapePageTransform(r),this.initialPageRotation=this.initialPageTransform.rotation(),this.initialPagePoint=this.editor.inputs.originPagePoint.clone(),this.editor.setCursor({type:o?"cross":"grabbing",rotation:0});const a=this.editor.getShapeHandles(r).sort(Ni),l=a.findIndex(c=>c.id===n.handle.id);this.initialAdjacentHandle=null;for(let c=l+1;c<a.length;c++){const u=a[c];if(u.type==="vertex"&&u.id!=="middle"&&u.id!==n.handle.id){this.initialAdjacentHandle=u;break}}if(!this.initialAdjacentHandle)for(let c=a.length-1;c>=0;c--){const u=a[c];if(u.type==="vertex"&&u.id!=="middle"&&u.id!==n.handle.id){this.initialAdjacentHandle=u;break}}if(this.editor.isShapeOfType(r,"arrow")){const c=si(this.editor,r)[n.handle.id];this.isPrecise=!1,c&&(this.isPrecise=c.props.isPrecise,this.isPrecise?this.isPreciseId=c.toId:this.resetExactTimeout())}this.update(),this.editor.select(this.shapeId)}resetExactTimeout(){this.exactTimeout!==-1&&this.clearExactTimeout(),this.exactTimeout=this.editor.timers.setTimeout(()=>{this.getIsActive()&&!this.isPrecise&&(this.isPrecise=!0,this.isPreciseId=this.pointingId,this.update()),this.exactTimeout=-1},750)}clearExactTimeout(){this.exactTimeout!==-1&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}onPointerMove(){this.update()}onKeyDown(){this.update()}onKeyUp(){this.update()}onPointerUp(){this.complete()}onComplete(){this.update(),this.complete()}onCancel(){this.cancel()}onExit(){this.parent.setCurrentToolIdMask(void 0),w6(this.editor),this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0})}complete(){this.editor.snaps.clearIndicators(),Fr(this.editor,[this.shapeId]);const{onInteractionEnd:n}=this.info;if(this.editor.getInstanceState().isToolLocked&&n){this.editor.setCurrentTool(n,{shapeId:this.shapeId});return}this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.editor.snaps.clearIndicators();const{onInteractionEnd:n}=this.info;if(n){this.editor.setCurrentTool(n,{shapeId:this.shapeId});return}this.parent.transition("idle")}update(){var T;const{editor:n,shapeId:r,initialPagePoint:o}=this,{initialHandle:i,initialPageRotation:s,initialAdjacentHandle:a}=this,l=this.editor.user.getIsSnapMode(),{snaps:c,inputs:{currentPagePoint:u,shiftKey:d,ctrlKey:f,altKey:h,pointerVelocity:g}}=n,y=this.info.shape,m=n.getShape(r);if(!m)return;const S=n.getShapeUtil(m),x=n.isShapeOfType(m,"arrow")?si(n,m)[i.id]:void 0;let C=u.clone().sub(o).rot(-s).add(i);if(d&&a&&i.id!=="middle"){const M=$.Angle(a,C),A=mI(M,24)-M;C=$.RotWith(C,a,A)}n.snaps.clearIndicators();let E={...i,x:C.x,y:C.y};if(i.canSnap&&(l?!f:f)){if(!n.getShapePageTransform(m.id))throw Error("Expected a page transform");const R=c.handles.snapHandle({currentShapeId:r,handle:E});R&&(R.nudge.rot(-n.getShapeParentTransform(m).rotation()),C.add(R.nudge),E={...i,x:C.x,y:C.y})}const P=(T=S.onHandleDrag)==null?void 0:T.call(S,m,{handle:E,isPrecise:this.isPrecise||h,initial:y}),I={id:m.id,type:m.type,...P};if(i.type==="vertex"&&this.editor.isShapeOfType(m,"arrow")){const M=si(n,m)[i.id];M?(x==null?void 0:x.toId)!==M.toId&&(this.pointingId=M.toId,this.isPrecise=g.len()<.5||h,this.isPreciseId=this.isPrecise?M.toId:null,this.resetExactTimeout()):x&&(this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}P&&n.updateShapes([I])}}V(pbe,"id","dragging_handle");function gbe(t){return t.isLabel?[t]:t instanceof Zs?t.children.filter(e=>e.isLabel):[]}class mbe extends Bt{constructor(){super(...arguments);V(this,"hitShapeForPointerUp",null);V(this,"info",{})}onEnter(n){const r=this.editor.getEditingShape();if(!r)throw Error("Entered editing state without an editing shape");this.hitShapeForPointerUp=null,this.info=n,n.isCreatingTextWhileToolLocked&&this.parent.setCurrentToolIdMask("text"),gd(this.editor),this.editor.select(r)}onExit(){const{editingShapeId:n}=this.editor.getCurrentPageState();n&&(this.editor.setEditingShape(null),gd.cancel(),this.info.isCreatingTextWhileToolLocked&&(this.parent.setCurrentToolIdMask(void 0),this.editor.setCurrentTool("text",{})))}onPointerMove(n){if(this.hitShapeForPointerUp&&this.editor.inputs.isDragging){if(this.editor.getIsReadonly()||this.hitShapeForPointerUp.isLocked)return;this.editor.select(this.hitShapeForPointerUp),this.parent.transition("translating",n),this.hitShapeForPointerUp=null;return}switch(n.target){case"shape":case"canvas":{gd(this.editor);return}}}onPointerDown(n){switch(this.hitShapeForPointerUp=null,n.target){case"canvas":{const r=G6(this.editor,!0);if(r){this.onPointerDown({...n,shape:r,target:"shape"});return}break}case"shape":{const{shape:r}=n,o=this.editor.getEditingShape();if(!o)throw Error("Expected an editing shape!");const i=this.editor.getShapeUtil(r).getGeometry(r),s=gbe(i),a=s.length===1?s[0]:void 0,l=this.editor.isShapeOfType(o,"text")&&sg(this.editor,o.props.richText).trim()==="";if(a&&!l){const c=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint);if(a.bounds.containsPoint(c,0)&&a.hitTestPoint(c)){if(r.id===o.id)return;this.hitShapeForPointerUp=r,this.editor.markHistoryStoppingPoint("editing on pointer up"),this.editor.select(r.id);return}}else{if(r.id===o.id)this.editor.isShapeOfType(r,"frame")&&(this.editor.setEditingShape(null),this.parent.transition("idle",n));else{this.parent.transition("pointing_shape",n);return}return}break}}this.parent.transition("idle",n),this.editor.root.handleEvent(n)}onPointerUp(n){const r=this.hitShapeForPointerUp;if(!r)return;this.hitShapeForPointerUp=null;const o=this.editor.getShapeUtil(r);if(r.isLocked)return;if(this.editor.getIsReadonly()&&!o.canEditInReadonly(r)){this.parent.transition("pointing_shape",n);return}this.editor.select(r.id);const i=this.editor.getEditingShape(),s=i&&i.id!==r.id;this.editor.setEditingShape(r.id);const a=vr.isIos||vr.isAndroid;!a||!s?this.editor.emit("place-caret",{shapeId:r.id,point:n.point}):a&&s&&this.editor.emit("select-all-text",{shapeId:r.id}),gd(this.editor)}onComplete(n){this.parent.transition("idle",n)}onCancel(n){this.parent.transition("idle",n)}}V(mbe,"id","editing_shape");function Jee(t){const e=t.getOnlySelectedShape();return!!(e&&!t.isShapeOrAncestorLocked(e)&&t.getShapeUtil(e).canCrop(e))}function MT(t,e){const n=t.getSelectedShapeIds(),{currentPagePoint:r}=t.inputs,{shiftKey:o,altKey:i,accelKey:s}=e,a=o||s,l=t.getShapeAtPoint(r,{hitInside:!1,margin:t.options.hitTestMargin/t.getZoomLevel(),hitLabels:!0,renderingOnly:!0,filter:c=>!c.isLocked});if(l){const c=t.getOutermostSelectableShape(l);if(a&&!i)t.cancelDoubleClick(),n.includes(c.id)?(t.markHistoryStoppingPoint("deselecting shape"),t.deselect(c)):(t.markHistoryStoppingPoint("shift selecting shape"),t.setSelectedShapes([...n,c.id]));else{let u;c===l||c.id===t.getFocusedGroupId()||n.includes(c.id)?u=l:u=c,u&&!n.includes(u.id)&&(t.markHistoryStoppingPoint("selecting shape"),t.select(u.id))}}else{if(a)return;{n.length>0&&(t.markHistoryStoppingPoint("selecting none"),t.selectNone());const c=t.getFocusedGroupId();if(fa(c)){const u=t.getShape(c);t.isPointInShape(u,r,{margin:0,hitInside:!0})||t.setFocusedGroup(null)}}}}const Opt=["Delete","Backspace","[","]","Enter"," ","Shift","Tab"];var RL;let Rpt=(RL=class extends Bt{constructor(){super(...arguments);V(this,"selectedShapesOnKeyDown",[])}onEnter(){this.parent.setCurrentToolIdMask(void 0),gd(this.editor),this.selectedShapesOnKeyDown=[],this.editor.setCursor({type:"default",rotation:0})}onExit(){gd.cancel()}onPointerMove(){gd(this.editor)}onPointerDown(n){const r=n.ctrlKey&&Jee(this.editor);switch(n.target){case"canvas":{const o=G6(this.editor);if(o&&!o.isLocked){this.onPointerDown({...n,shape:o,target:"shape"});return}const i=this.editor.getSelectedShapeIds(),s=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:a}}=this.editor;if((i.length>1||s&&!this.editor.getShapeUtil(s).hideSelectionBoundsBg(s))&&ete(this.editor,a)){this.onPointerDown({...n,target:"selection"});return}this.parent.transition("pointing_canvas",n);break}case"shape":{const{shape:o}=n;if(this.isOverArrowLabelTest(o)){this.parent.transition("pointing_arrow_label",n);break}if(this.editor.isShapeOrAncestorLocked(o)){this.parent.transition("pointing_canvas",n);break}this.parent.transition("pointing_shape",n);break}case"handle":{if(this.editor.getIsReadonly())break;this.editor.inputs.altKey?this.parent.transition("pointing_shape",n):this.parent.transition("pointing_handle",n);break}case"selection":{switch(n.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":{if(n.accelKey){this.parent.transition("brushing",n);break}this.parent.transition("pointing_rotate_handle",n);break}case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":{if(r)this.parent.transition("crop.pointing_crop_handle",n);else{if(n.accelKey){this.parent.transition("brushing",n);break}this.parent.transition("pointing_resize_handle",n)}break}default:{const o=this.editor.getHoveredShape();if(o&&!this.editor.getSelectedShapeIds().includes(o.id)&&!o.isLocked){this.onPointerDown({...n,shape:o,target:"shape"});return}this.parent.transition("pointing_selection",n)}}break}}}onDoubleClick(n){var r,o,i,s,a;if(!(this.editor.inputs.shiftKey||n.phase!=="up")&&!(n.ctrlKey||n.shiftKey))switch(n.target){case"canvas":{const l=this.editor.getHoveredShape(),c=l&&!this.editor.isShapeOfType(l,"group")?l:this.editor.getSelectedShapeAtPoint(this.editor.inputs.currentPagePoint)??this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1}),u=this.editor.getFocusedGroupId();if(c){if(this.editor.isShapeOfType(c,"group")){MT(this.editor,n);return}else{const d=this.editor.getShape(c.parentId);if(d&&this.editor.isShapeOfType(d,"group")&&!(u&&d.id===u)){MT(this.editor,n);return}}this.onDoubleClick({...n,shape:c,target:"shape"});return}this.editor.inputs.shiftKey||this.handleDoubleClickOnCanvas(n);break}case"selection":{if(this.editor.getIsReadonly())break;const l=this.editor.getOnlySelectedShape();if(l){const c=this.editor.getShapeUtil(l);if(!this.canInteractWithShapeInReadOnly(l))return;if(n.handle==="right"||n.handle==="left"||n.handle==="top"||n.handle==="bottom"){const u=(r=c.onDoubleClickEdge)==null?void 0:r.call(c,l,n);if(u){this.editor.markHistoryStoppingPoint("double click edge"),this.editor.updateShapes([u]),Fr(this.editor,[l.id]);return}}if(n.handle==="top_left"||n.handle==="top_right"||n.handle==="bottom_right"||n.handle==="bottom_left"){const u=(o=c.onDoubleClickCorner)==null?void 0:o.call(c,l,n);if(u){this.editor.markHistoryStoppingPoint("double click corner"),this.editor.updateShapes([u]),Fr(this.editor,[l.id]);return}}if(c.canCrop(l)&&!this.editor.isShapeOrAncestorLocked(l)){this.parent.transition("crop",n);return}this.shouldStartEditingShape(l)&&this.startEditingShape(l,n,!0)}break}case"shape":{const{shape:l}=n,c=this.editor.getShapeUtil(l);if(l.type!=="video"&&l.type!=="embed"&&this.editor.getIsReadonly())break;if(c.onDoubleClick){const u=(i=c.onDoubleClick)==null?void 0:i.call(c,l);if(u){this.editor.updateShapes([u]);return}}if(c.canCrop(l)&&!this.editor.isShapeOrAncestorLocked(l)){this.editor.markHistoryStoppingPoint("select and crop"),this.editor.select((s=n.shape)==null?void 0:s.id),this.parent.transition("crop",n);return}this.shouldStartEditingShape(l)?this.startEditingShape(l,n,!0):this.handleDoubleClickOnCanvas(n);break}case"handle":{if(this.editor.getIsReadonly())break;const{shape:l,handle:c}=n,u=this.editor.getShapeUtil(l),d=(a=u.onDoubleClickHandle)==null?void 0:a.call(u,l,c);d?this.editor.updateShapes([d]):this.shouldStartEditingShape(l)&&this.startEditingShape(l,n,!0)}}}onRightClick(n){switch(n.target){case"canvas":{const r=this.editor.getHoveredShape(),o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{margin:this.editor.options.hitTestMargin/this.editor.getZoomLevel(),hitInside:!1,hitLabels:!0,hitLocked:!0,hitFrameInside:!0,renderingOnly:!0});if(o){this.onRightClick({...n,shape:o,target:"shape"});return}const i=this.editor.getSelectedShapeIds(),s=this.editor.getOnlySelectedShape(),{inputs:{currentPagePoint:a}}=this.editor;if((i.length>1||s&&!this.editor.getShapeUtil(s).hideSelectionBoundsBg(s))&&ete(this.editor,a)){this.onRightClick({...n,target:"selection"});return}this.editor.selectNone();break}case"shape":{const{selectedShapeIds:r}=this.editor.getCurrentPageState(),{shape:o}=n,i=this.editor.getOutermostSelectableShape(o,s=>!r.includes(s.id));!r.includes(i.id)&&!this.editor.findShapeAncestor(i,s=>r.includes(s.id))&&(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([i.id]));break}}}onCancel(){this.editor.getFocusedGroupId()!==this.editor.getCurrentPageId()&&this.editor.getSelectedShapeIds().length>0?this.editor.popFocusedGroupId():(this.editor.markHistoryStoppingPoint("clearing selection"),this.editor.selectNone())}onKeyDown(n){switch(this.selectedShapesOnKeyDown=this.editor.getSelectedShapes(),n.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if(n.accelKey){n.shiftKey?n.code==="ArrowDown"?this.editor.selectFirstChildShape():n.code==="ArrowUp"&&this.editor.selectParentShape():this.editor.selectAdjacentShape(n.code.replace("Arrow","").toLowerCase());return}this.nudgeSelectedShapes(!1);return}}if(so.editOnType.get()&&!Opt.includes(n.key)&&!n.altKey&&!n.ctrlKey){const r=this.editor.getOnlySelectedShape();if(r&&this.editor.isShapeOfType(r,"note")&&this.shouldStartEditingShape(r)){this.startEditingShape(r,{...n,target:"shape",shape:r},!0);return}}}onKeyRepeat(n){switch(n.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":{if(n.accelKey){this.editor.selectAdjacentShape(n.code.replace("Arrow","").toLowerCase());return}this.nudgeSelectedShapes(!0);break}case"Tab":{this.editor.getSelectedShapes().length&&this.editor.selectAdjacentShape(n.shiftKey?"prev":"next");break}}}onKeyUp(n){switch(n.code){case"Enter":{if(!this.selectedShapesOnKeyDown.length)return;const r=this.editor.getSelectedShapes();if(r.every(i=>this.editor.isShapeOfType(i,"group"))){this.editor.setSelectedShapes(r.flatMap(i=>this.editor.getSortedChildIdsForParent(i.id)));return}const o=this.editor.getOnlySelectedShape();if(o&&this.shouldStartEditingShape(o)){this.startEditingShape(o,{...n,target:"shape",shape:o},!0);return}Jee(this.editor)&&this.parent.transition("crop",n);break}case"Tab":{this.editor.getSelectedShapes().length&&this.editor.selectAdjacentShape(n.shiftKey?"prev":"next");break}}}shouldStartEditingShape(n=this.editor.getOnlySelectedShape()){return!n||this.editor.isShapeOrAncestorLocked(n)&&n.type!=="embed"||!this.canInteractWithShapeInReadOnly(n)?!1:this.editor.getShapeUtil(n).canEdit(n)}startEditingShape(n,r,o){this.editor.isShapeOrAncestorLocked(n)&&n.type!=="embed"||(this.editor.markHistoryStoppingPoint("editing shape"),WI(this.editor,n,o),this.parent.transition("editing_shape",r))}isOverArrowLabelTest(n){if(!n)return!1;const r=this.editor.getPointInShapeSpace(n,this.editor.inputs.currentPagePoint);if(this.editor.isShapeOfType(n,"arrow")){const o=this.editor.getShapeGeometry(n).children[1];if(o&&Ka(r,o.vertices))return!0}return!1}handleDoubleClickOnCanvas(n){if(this.editor.getIsReadonly()||!this.editor.options.createTextOnCanvasDoubleClick)return;this.editor.markHistoryStoppingPoint("creating text shape");const r=Ar(),{x:o,y:i}=this.editor.inputs.currentPagePoint;this.editor.createShapes([{id:r,type:"text",x:o,y:i,props:{richText:Ll(""),autoSize:!0}}]);const s=this.editor.getShape(r);if(!s)return;const a=this.editor.getShapeUtil(s);this.editor.getIsReadonly()&&!a.canEditInReadonly(s)||(this.editor.setEditingShape(r),this.editor.select(r),this.parent.transition("editing_shape",n))}nudgeSelectedShapes(n=!1){const{editor:{inputs:{keys:r}}}=this,o=r.has("ShiftLeft"),i=new $(0,0);if(r.has("ArrowLeft")&&(i.x-=1),r.has("ArrowRight")&&(i.x+=1),r.has("ArrowUp")&&(i.y-=1),r.has("ArrowDown")&&(i.y+=1),i.equals(new $(0,0)))return;n||this.editor.markHistoryStoppingPoint("nudge shapes");const{gridSize:s}=this.editor.getDocumentSettings(),a=this.editor.getInstanceState().isGridMode?o?s*$pt:s:o?kpt:Apt,l=this.editor.getSelectedShapeIds();this.editor.nudgeShapes(l,i.mul(a)),Fr(this.editor,l)}canInteractWithShapeInReadOnly(n){return!!(!this.editor.getIsReadonly()||this.editor.getShapeUtil(n).canEditInReadonly(n))}},V(RL,"id","idle"),RL);const kpt=10,Apt=1,$pt=5;function ete(t,e){const n=t.getSelectionRotatedPageBounds();if(!n)return!1;const r=t.getSelectionRotation();return r?Ka(e,n.corners.map(o=>$.RotWith(o,n.point,r))):n.containsPoint(e)}class vbe extends Bt{constructor(){super(...arguments);V(this,"shapeId","");V(this,"markId","");V(this,"wasAlreadySelected",!1);V(this,"didDrag",!1);V(this,"didCtrlOnEnter",!1);V(this,"info",{});V(this,"_labelDragOffset",new $(0,0))}updateCursor(){this.editor.setCursor({type:"grabbing",rotation:0})}onEnter(n){const{shape:r}=n;this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.info=n,this.shapeId=r.id,this.didDrag=!1,this.didCtrlOnEnter=n.accelKey,this.wasAlreadySelected=this.editor.getOnlySelectedShapeId()===r.id,this.updateCursor();const i=this.editor.getShapeGeometry(r).children[1];if(!i)throw Error(`Expected to find an arrow label geometry for shape: ${r.id}`);const{currentPagePoint:s}=this.editor.inputs,a=this.editor.getPointInShapeSpace(r,s);if(this._labelDragOffset=$.Sub(i.center,a),this.markId=this.editor.markHistoryStoppingPoint("label-drag start"),n.shiftKey||n.accelKey){const c=this.editor.getSelectedShapeIds();this.editor.setSelectedShapes([...c,this.shapeId]);return}this.editor.setSelectedShapes([this.shapeId])}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){const{isDragging:n}=this.editor.inputs;if(!n)return;if(this.didCtrlOnEnter){this.parent.transition("brushing",this.info);return}const r=this.editor.getShape(this.shapeId);if(!r)return;const o=this.editor.getShapeUtil("arrow").options,i=kv.get(this.editor,r.id),s=this.editor.getShapePageTransform(r.id),a=this.editor.getPointInShapeSpace(r,this.editor.inputs.currentPagePoint).add(this._labelDragOffset),l=B0e(this.editor,r);let c=kv.get(this.editor,r.id).uninterpolateAlongEdge(a);isNaN(c)&&(c=l);const u=s.applyToPoint(i.interpolateAlongEdge(c)),d=s.applyToPoint(i.interpolateAlongEdge(l));$.DistMin(u,d,o.labelCenterSnapDistance/this.editor.getZoomLevel())&&(c=l),this.didDrag=!0,this.editor.updateShape({id:r.id,type:r.type,props:{labelPosition:c}})}onPointerUp(){const n=this.editor.getShape(this.shapeId);n&&(this.didDrag||!this.wasAlreadySelected?this.complete():this.editor.getIsReadonly()||(this.editor.setEditingShape(n.id),this.editor.setCurrentTool("select.editing_shape")))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}V(vbe,"id","pointing_arrow_label");class ybe extends Bt{onEnter(e){e.shiftKey||e.accelKey||this.editor.getSelectedShapeIds().length>0&&(this.editor.markHistoryStoppingPoint("selecting none"),this.editor.selectNone())}onPointerMove(e){this.editor.inputs.isDragging&&this.parent.transition("brushing",e)}onPointerUp(e){MT(this.editor,e),this.complete()}onComplete(){this.complete()}onInterrupt(){this.parent.transition("idle")}complete(){this.parent.transition("idle")}}V(ybe,"id","pointing_canvas");class bbe extends Bt{constructor(){super(...arguments);V(this,"didCtrlOnEnter",!1);V(this,"info",{})}onEnter(n){this.info=n,this.didCtrlOnEnter=n.accelKey;const{shape:r}=n;if(this.editor.isShapeOfType(r,"arrow")){const o=si(this.editor,r),i=o[n.handle.id],s=o[n.handle.id==="start"?"end":"start"],a=this.editor.getShapePageTransform(r.id);i&&X2({editor:this.editor,pointInPageSpace:a.applyToPoint(n.handle),arrow:r,isPrecise:i.props.isPrecise,isExact:n.altKey,currentBinding:i,oppositeBinding:s})}this.editor.setCursor({type:"grabbing",rotation:0})}onExit(){this.editor.setHintingShapes([]),this.editor.setCursor({type:"default",rotation:0})}onPointerUp(){const{shape:n,handle:r}=this.info;if(this.editor.isShapeOfType(n,"note")){const{editor:o}=this,i=tte(o,n,r,!1);if(i){WI(o,i,!0);return}}this.parent.transition("idle",this.info)}onPointerMove(n){const{editor:r}=this;r.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",n):this.startDraggingHandle())}onLongPress(){this.startDraggingHandle()}startDraggingHandle(){const{editor:n}=this;if(n.getIsReadonly())return;const{shape:r,handle:o}=this.info;if(n.isShapeOfType(r,"note")){const i=tte(n,r,o,!0);if(i){const s=n.getPointInParentSpace(i,n.inputs.originPagePoint).sub($.Rot(Z2.clone().mul(r.props.scale),i.rotation));n.updateShape({...i,x:s.x,y:s.y}),n.setHoveredShape(i.id).select(i.id).setCurrentTool("select.translating",{...this.info,target:"shape",shape:n.getShape(i),onInteractionEnd:"note",isCreating:!0,onCreate:()=>{WI(n,i,!0)}});return}}this.parent.transition("dragging_handle",this.info)}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}V(bbe,"id","pointing_handle");function tte(t,e,n,r){const o=t.getShapePageTransform(e.id),i=o.point(),s=o.rotation(),l=O0e(t,i,s,e.props.growY*e.props.scale,0,e.props.scale)[n.index];if(l)return k0e(t,e,l,s,r)}class Sbe extends Bt{constructor(){super(...arguments);V(this,"info",{})}updateCursor(){this.editor.setCursor({type:Dv[this.info.handle],rotation:this.editor.getSelectionRotation()})}onEnter(n){this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.info=n,this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0})}onPointerMove(){this.editor.inputs.isDragging&&this.startRotating()}onLongPress(){this.startRotating()}startRotating(){this.editor.getIsReadonly()||this.parent.transition("rotating",this.info)}onPointerUp(){this.complete()}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}complete(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}cancel(){this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}}V(Sbe,"id","pointing_rotate_handle");class xbe extends Bt{constructor(){super(...arguments);V(this,"info",{})}onEnter(n){this.info=n}onPointerUp(n){MT(this.editor,n),this.parent.transition("idle",n)}onPointerMove(n){this.editor.inputs.isDragging&&this.startTranslating(n)}onLongPress(n){this.startTranslating(n)}startTranslating(n){this.editor.getIsReadonly()||this.parent.transition("translating",n)}onDoubleClick(n){var i,s;const r=this.editor.getHoveredShape(),o=r&&!this.editor.isShapeOfType(r,"group")?r:this.editor.getShapeAtPoint(this.editor.inputs.currentPagePoint,{hitInside:!0,margin:0,renderingOnly:!0});if(o){this.parent.transition("idle"),(s=(i=this.parent).onDoubleClick)==null||s.call(i,{...n,target:"shape",shape:this.editor.getShape(o)});return}}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}V(xbe,"id","pointing_selection");class wbe extends Bt{constructor(){super(...arguments);V(this,"hitShape",{});V(this,"hitShapeForPointerUp",{});V(this,"isDoubleClick",!1);V(this,"didCtrlOnEnter",!1);V(this,"didSelectOnEnter",!1)}onEnter(n){const r=this.editor.getSelectedShapeIds(),o=this.editor.getSelectionRotatedPageBounds(),i=this.editor.getFocusedGroupId(),{inputs:{currentPagePoint:s}}=this.editor,{shiftKey:a,altKey:l,accelKey:c}=n;this.hitShape=n.shape,this.isDoubleClick=!1,this.didCtrlOnEnter=c;const u=this.editor.getOutermostSelectableShape(n.shape),d=this.editor.findShapeAncestor(u,f=>r.includes(f.id));if(this.didCtrlOnEnter||this.editor.getShapeUtil(n.shape).onClick||u.id===i||r.includes(u.id)||d||r.length>1&&(o!=null&&o.containsPoint(s))){this.didSelectOnEnter=!1,this.hitShapeForPointerUp=u;return}this.didSelectOnEnter=!0,a&&!l?(this.editor.cancelDoubleClick(),r.includes(u.id)||(this.editor.markHistoryStoppingPoint("shift selecting shape"),this.editor.setSelectedShapes([...r,u.id]))):(this.editor.markHistoryStoppingPoint("selecting shape"),this.editor.setSelectedShapes([u.id]))}onPointerUp(n){var u;const r=this.editor.getSelectedShapeIds(),o=this.editor.getFocusedGroupId(),i=this.editor.getZoomLevel(),{inputs:{currentPagePoint:s}}=this.editor,a=n.shiftKey||n.accelKey,l=this.editor.getShapeAtPoint(s,{margin:this.editor.options.hitTestMargin/i,hitInside:!0,renderingOnly:!0})??this.hitShape,c=l?this.editor.getOutermostSelectableShape(l):this.hitShapeForPointerUp;if(c){const d=this.editor.getShapeUtil(c);if(d.onClick){const f=(u=d.onClick)==null?void 0:u.call(d,c);if(f){this.editor.markHistoryStoppingPoint("shape on click"),this.editor.updateShapes([f]),this.parent.transition("idle",n);return}}if(c.id===o){r.length>0?(this.editor.markHistoryStoppingPoint("clearing shape ids"),this.editor.setSelectedShapes([])):this.editor.popFocusedGroupId(),this.parent.transition("idle",n);return}}if(!this.didSelectOnEnter){const d=this.editor.getOutermostSelectableShape(l,f=>!r.includes(f.id));if(r.includes(d.id))if(a)this.editor.markHistoryStoppingPoint("deselecting on pointer up"),this.editor.deselect(c);else if(r.includes(c.id)){if(r.length===1){const f=this.editor.getShapeUtil(c).getGeometry(c),h=gbe(f),g=h.length===1?h[0]:void 0;if(g){const y=this.editor.getPointInShapeSpace(c,s);if(g.bounds.containsPoint(y,0)&&g.hitTestPoint(y)){this.editor.run(()=>{this.editor.markHistoryStoppingPoint("editing on pointer up"),this.editor.select(c.id);const m=this.editor.getShapeUtil(c);this.editor.getIsReadonly()&&!m.canEditInReadonly(c)||(this.editor.setEditingShape(c.id),this.editor.setCurrentTool("select.editing_shape"),this.isDoubleClick?this.editor.emit("select-all-text",{shapeId:c.id}):this.editor.emit("place-caret",{shapeId:c.id,point:n.point}))});return}}}this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(c.id)}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.select(c);else if(a){const f=this.editor.getShapeAncestors(d);this.editor.markHistoryStoppingPoint("shift deselecting on pointer up"),this.editor.setSelectedShapes([...this.editor.getSelectedShapeIds().filter(h=>!f.find(g=>g.id===h)),d.id])}else this.editor.markHistoryStoppingPoint("selecting on pointer up"),this.editor.setSelectedShapes([d.id])}this.parent.transition("idle",n)}onDoubleClick(){this.isDoubleClick=!0}onPointerMove(n){this.editor.inputs.isDragging&&(this.didCtrlOnEnter?this.parent.transition("brushing",n):this.startTranslating(n))}onLongPress(n){this.startTranslating(n)}startTranslating(n){this.editor.getIsReadonly()||(this.editor.focus(),this.parent.transition("translating",n))}onCancel(){this.cancel()}onComplete(){this.cancel()}onInterrupt(){this.cancel()}cancel(){this.parent.transition("idle")}}V(wbe,"id","pointing_shape");class Cbe extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"markId","");V(this,"didHoldCommand",!1);V(this,"creationCursorOffset",{x:0,y:0});V(this,"snapshot",{})}onEnter(n){const{isCreating:r=!1,creatingMarkId:o,creationCursorOffset:i={x:0,y:0}}=n;this.info=n,this.didHoldCommand=!1,this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.creationCursorOffset=i;try{this.snapshot=this._createSnapshot()}catch(s){console.error(s),this.cancel();return}if(this.markId="",r)if(o)this.markId=o;else{const s=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);s&&(this.markId=s)}else this.markId=this.editor.markHistoryStoppingPoint("starting resizing");r&&this.editor.setCursor({type:"cross",rotation:0}),this.handleResizeStart(),this.updateShapes()}onTick({elapsed:n}){const{editor:r}=this;r.edgeScrollManager.updateEdgeScrolling(n)}onPointerMove(){this.updateShapes()}onKeyDown(){this.updateShapes()}onKeyUp(){this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,{}):this.parent.transition("idle")}complete(){var n,r;if(Fr(this.editor,this.snapshot.selectedShapeIds),this.handleResizeEnd(),this.info.isCreating&&this.info.onCreate){(r=(n=this.info).onCreate)==null||r.call(n,this.editor.getOnlySelectedShape());return}if(this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd){this.editor.setCurrentTool(this.info.onInteractionEnd,{});return}this.parent.transition("idle")}handleResizeStart(){const{shapeSnapshots:n}=this.snapshot,r=[];n.forEach(({shape:o})=>{var a;const i=this.editor.getShapeUtil(o),s=(a=i.onResizeStart)==null?void 0:a.call(i,o);s&&r.push(s)}),r.length>0&&this.editor.updateShapes(r)}handleResizeEnd(){const{shapeSnapshots:n}=this.snapshot,r=[];n.forEach(({shape:o})=>{var l;const i=this.editor.getShape(o.id),s=this.editor.getShapeUtil(o),a=(l=s.onResizeEnd)==null?void 0:l.call(s,o,i);a&&r.push(a)}),r.length>0&&this.editor.updateShapes(r)}updateShapes(){const{altKey:n,shiftKey:r}=this.editor.inputs,{frames:o,shapeSnapshots:i,selectionBounds:s,cursorHandleOffset:a,selectedShapeIds:l,selectionRotation:c,canShapesDeform:u}=this.snapshot;let d=r||!u;if(i.size===1){const M=[...i.values()][0];this.editor.isShapeOfType(M.shape,"text")&&(d=!(this.info.handle==="left"||this.info.handle==="right"))}const{ctrlKey:f}=this.editor.inputs,h=this.editor.inputs.currentPagePoint.clone().sub(a).sub(this.creationCursorOffset),g=this.editor.inputs.originPagePoint.clone().sub(a);if(this.editor.getInstanceState().isGridMode&&!f){const{gridSize:M}=this.editor.getDocumentSettings();h.snapToGrid(M)}const y=this.info.handle,m=nte(y,Math.PI);if(this.editor.snaps.clearIndicators(),(this.editor.user.getIsSnapMode()?!f:f)&&c%Gr===0){const{nudge:M}=this.editor.snaps.shapeBounds.snapResizeShapes({dragDelta:$.Sub(h,g),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:nte(y,c),isAspectRatioLocked:d,isResizingFromCenter:n});h.add(M)}const x=$.RotWith(n?s.center:s.getHandlePoint(m),s.point,c),C=$.Sub(h,x).rot(-c),E=$.Sub(g,x).rot(-c),P=$.DivV(C,E);Number.isFinite(P.x)||(P.x=1),Number.isFinite(P.y)||(P.y=1);const I=y==="top"||y==="bottom",T=y==="left"||y==="right";d?T?P.y=Math.abs(P.x):I?P.x=Math.abs(P.y):Math.abs(P.x)>Math.abs(P.y)?P.y=Math.abs(P.x)*(P.y<0?-1:1):P.x=Math.abs(P.y)*(P.x<0?-1:1):(I&&(P.x=1),T&&(P.y=1)),this.info.isCreating||this.updateCursor({dragHandle:y,isFlippedX:P.x<0,isFlippedY:P.y<0,rotation:c});for(const M of i.keys()){const R=i.get(M);this.editor.resizeShape(M,P,{initialShape:R.shape,initialBounds:R.bounds,initialPageTransform:R.pageTransform,dragHandle:y,mode:l.length===1&&M===l[0]?"resize_bounds":"scale_shape",scaleOrigin:x,isAspectRatioLocked:d,scaleAxisRotation:c,skipStartAndEndCallbacks:!0})}if(this.editor.inputs.ctrlKey){this.didHoldCommand=!0;for(const{id:M,children:R}of o){if(!R.length)continue;const A=i.get(M).shape,j=this.editor.getShape(M);if(!(A&&j))continue;const N=j.x-A.x,k=j.y-A.y,D=new $(N,k).rot(-A.rotation);if(D.x!==0||D.y!==0)for(const F of R)this.editor.updateShape({id:F.id,type:F.type,x:F.x-D.x,y:F.y-D.y})}}else if(this.didHoldCommand){this.didHoldCommand=!1;for(const{children:M}of o)if(M.length)for(const R of M)this.editor.updateShape({id:R.id,type:R.type,x:R.x,y:R.y})}}updateCursor({dragHandle:n,isFlippedX:r,isFlippedY:o,rotation:i}){const s={...this.editor.getInstanceState().cursor};switch(n){case"top_left":case"bottom_right":{s.type="nwse-resize",r!==o&&(s.type="nesw-resize");break}case"top_right":case"bottom_left":{s.type="nesw-resize",r!==o&&(s.type="nwse-resize");break}}s.rotation=i,this.editor.setCursor(s)}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.setCursor({type:"default",rotation:0}),this.editor.snaps.clearIndicators()}_createSnapshot(){const n=this.editor.getSelectedShapeIds(),r=this.editor.getSelectionRotation(),{inputs:{originPagePoint:o}}=this.editor,i=this.editor.getSelectionRotatedPageBounds();if(!i)throw Error("Resizing but nothing is selected");const s=$.RotWith(i.getHandlePoint(this.info.handle),i.point,r),a=$.Sub(o,s),l=new Map,c=[];n.forEach(d=>{const f=this.editor.getShape(d);if(f){if(f.type==="frame"&&c.push({id:d,children:Tn(this.editor.getSortedChildIdsForParent(f).map(h=>this.editor.getShape(h)))}),l.set(f.id,this._createShapeSnapshot(f)),this.editor.isShapeOfType(f,"frame")&&n.length===1)return;this.editor.visitDescendants(f.id,h=>{const g=this.editor.getShape(h);if(g&&(l.set(g.id,this._createShapeSnapshot(g)),this.editor.isShapeOfType(g,"frame")))return!1})}});const u=![...l.values()].some(d=>!jce(d.pageRotation,r)||d.isAspectRatioLocked);return{shapeSnapshots:l,selectionBounds:i,cursorHandleOffset:a,selectionRotation:r,selectedShapeIds:n,canShapesDeform:u,initialSelectionPageBounds:this.editor.getSelectionPageBounds(),frames:c}}_createShapeSnapshot(n){const r=this.editor.getShapePageTransform(n),o=this.editor.getShapeUtil(n);return{shape:n,bounds:this.editor.getShapeGeometry(n).bounds,pageTransform:r,pageRotation:Ke.Decompose(r).rotation,isAspectRatioLocked:o.isAspectRatioLocked(n)}}}V(Cbe,"id","resizing");const iL=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function nte(t,e){e=e%Ir;const n=Math.round(e/(cr/4)),r=iL.indexOf(t);return iL[(r+n)%iL.length]}const rte=Math.PI/180;class Ebe extends Bt{constructor(){super(...arguments);V(this,"snapshot",{});V(this,"info",{});V(this,"markId","")}onEnter(n){this.info=n,this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.markId=this.editor.markHistoryStoppingPoint("rotate start");const r=Gue({editor:this.editor,ids:this.editor.getSelectedShapeIds()});if(!r)return this.parent.transition("idle",this.info);this.snapshot=r;const o=this._getRotationFromPointerPosition({snapToNearestDegree:!1});wP({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:Dv[this.info.handle],rotation:o+this.snapshot.initialShapesRotation})}onExit(){this.editor.setCursor({type:"default",rotation:0}),this.parent.setCurrentToolIdMask(void 0),this.snapshot={}}onPointerMove(){this.update()}onKeyDown(){this.update()}onKeyUp(){this.update()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}update(){const n=this._getRotationFromPointerPosition({snapToNearestDegree:!1});wP({editor:this.editor,delta:n,snapshot:this.snapshot,stage:"update"}),this.editor.setCursor({type:Dv[this.info.handle],rotation:n+this.snapshot.initialShapesRotation})}cancel(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}complete(){wP({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:this.snapshot,stage:"end"}),Fr(this.editor,this.snapshot.shapeSnapshots.map(n=>n.shape.id)),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("idle",this.info)}_getRotationFromPointerPosition({snapToNearestDegree:n}){const{inputs:{shiftKey:r,currentPagePoint:o}}=this.editor,{initialCursorAngle:i,initialShapesRotation:s,initialPageCenter:a}=this.snapshot,l=a.angle(o)-i;let c=s+l;if(r)c=mI(c,24);else if(n&&(c=Math.round(c/rte)*rte,this.editor.getInstanceState().isCoarsePointer)){const u=mI(c,4),d=yP(c,u);Math.abs(d)<NWe(5)&&(c=u)}return c-s}}V(Ebe,"id","rotating");class Pbe extends Bt{constructor(){super(...arguments);V(this,"hits",new Set);V(this,"size",0);V(this,"scribbleId","id");V(this,"initialSelectedShapeIds",new Set);V(this,"newlySelectedShapeIds",new Set)}onEnter(){this.initialSelectedShapeIds=new Set(this.editor.inputs.shiftKey?this.editor.getSelectedShapeIds():[]),this.newlySelectedShapeIds=new Set,this.size=0,this.hits.clear();const n=this.editor.scribbles.addScribble({color:"selection-stroke",opacity:.32,size:12});this.scribbleId=n.id,this.updateScribbleSelection(!0),this.editor.updateInstanceState({brush:null})}onExit(){this.editor.scribbles.stop(this.scribbleId)}onPointerMove(){this.updateScribbleSelection(!0)}onPointerUp(){this.complete()}onKeyDown(){this.updateScribbleSelection(!1)}onKeyUp(){this.editor.inputs.altKey?this.updateScribbleSelection(!1):this.parent.transition("brushing")}onCancel(){this.cancel()}onComplete(){this.complete()}pushPointToScribble(){const{x:n,y:r}=this.editor.inputs.currentPagePoint;this.editor.scribbles.addPoint(this.scribbleId,n,r)}updateScribbleSelection(n){const{editor:r}=this,o=this.editor.getCurrentPageRenderingShapesSorted(),{inputs:{shiftKey:i,originPagePoint:s,previousPagePoint:a,currentPagePoint:l}}=this.editor,{newlySelectedShapeIds:c,initialSelectedShapeIds:u}=this;n&&this.pushPointToScribble();const d=o;let f,h,g,y;const m=0;for(let C=0,E=d.length;C<E;C++){if(f=d[C],r.isShapeOfType(f,"group")||c.has(f.id)||r.isShapeOrAncestorLocked(f)||(h=r.getShapeGeometry(f),r.isShapeOfType(f,"frame")&&h.bounds.containsPoint(r.getPointInShapeSpace(f,s))))continue;const P=r.getShapePageTransform(f);if(!h||!P)continue;const I=P.clone().invert();g=I.applyToPoint(a),y=I.applyToPoint(l);const{bounds:T}=h;if(!(T.minX-m>Math.max(g.x,y.x)||T.minY-m>Math.max(g.y,y.y)||T.maxX+m<Math.min(g.x,y.x)||T.maxY+m<Math.min(g.y,y.y))&&h.hitTestLineSegment(g,y,m)){const M=this.editor.getOutermostSelectableShape(f),R=this.editor.getShapeMask(M.id);if(R&&Zce(a,l,R)!==null&&!Ka(l,R))continue;c.add(M.id)}}const S=r.getSelectedShapeIds(),x=new Set(i?[...c,...u]:[...c]);(S.length!==x.size||S.some(C=>!x.has(C)))&&this.editor.setSelectedShapes(Array.from(x))}complete(){this.updateScribbleSelection(!0),this.parent.transition("idle")}cancel(){this.editor.setSelectedShapes([...this.initialSelectedShapeIds]),this.parent.transition("idle")}}V(Pbe,"id","scribble_brushing");var Dpt=Object.create,_be=Object.defineProperty,jpt=Object.getOwnPropertyDescriptor,Lpt=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Ibe=t=>{throw TypeError(t)},Tbe=(t,e,n)=>e in t?_be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Npt=t=>[,,,Dpt(null)],Mbe=["class","method","getter","setter","accessor","field","value","get","set"],Obe=t=>t!==void 0&&typeof t!="function"?Ibe("Function expected"):t,Fpt=(t,e,n,r,o)=>({kind:Mbe[t],name:e,metadata:r,addInitializer:i=>n._?Ibe("Already initialized"):o.push(Obe(i||null))}),zpt=(t,e)=>Tbe(e,Lpt("metadata"),t[3]),Bpt=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},Hpt=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=Mbe[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,jpt(o,n)),S=r.length-1;S>=0;S--)l=Fpt(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,Obe(s)&&(m[g]=s);return m&&_be(o,n,m),o},sL=(t,e,n)=>Tbe(t,typeof e!="symbol"?e+"":e,n),Rbe,eO;const Upt=20,Wpt=100;Rbe=[va];class Y6{constructor(e){this.editor=e,Bpt(eO,5,this),sL(this,"prevDroppingShapeId",null),sL(this,"droppingNodeTimer",null),sL(this,"first",!0),e.disposables.add(this.dispose)}updateDroppingNode(e,n){var r;this.first&&(this.editor.setHintingShapes(e.map(o=>this.editor.findShapeAncestor(o,i=>i.type!=="group")).filter(o=>o)),this.prevDroppingShapeId=((r=this.editor.getDroppingOverShape(this.editor.inputs.originPagePoint,e))==null?void 0:r.id)??null,this.first=!1),this.droppingNodeTimer===null?this.setDragTimer(e,Upt,n):this.editor.inputs.pointerVelocity.len()>.5&&(clearTimeout(this.droppingNodeTimer),this.setDragTimer(e,Wpt,n))}setDragTimer(e,n,r){this.droppingNodeTimer=this.editor.timers.setTimeout(()=>{this.editor.run(()=>{this.handleDrag(this.editor.inputs.currentPagePoint,e,r)}),this.droppingNodeTimer=null},n)}handleDrag(e,n,r){var l,c,u,d,f;n=Tn(n.map(h=>this.editor.getShape(h.id)));const o=((l=this.editor.getDroppingOverShape(e,n))==null?void 0:l.id)??null;if(o===this.prevDroppingShapeId){this.hintParents(n);return}const{prevDroppingShapeId:i}=this,s=i&&this.editor.getShape(i),a=o&&this.editor.getShape(o);s&&((u=(c=this.editor.getShapeUtil(s)).onDragShapesOut)==null||u.call(c,s,n)),a&&((f=(d=this.editor.getShapeUtil(a)).onDragShapesOver)==null||f.call(d,a,n)),this.hintParents(n),r==null||r(),this.prevDroppingShapeId=o}hintParents(e){const n=new Map;for(const o of e){const i=this.editor.findShapeAncestor(o,s=>s.type!=="group");i&&(n.has(i.id)||n.set(i.id,[]),n.get(i.id).push(o.id))}const r=[];for(const[o,i]of n){const s=this.editor.getShape(o);s&&Nye(this.editor,s).length<i.length&&r.push(s.id)}this.editor.setHintingShapes(r)}dropShapes(e){var r,o;const{prevDroppingShapeId:n}=this;if(this.handleDrag(this.editor.inputs.currentPagePoint,e),n){const i=this.editor.getShape(n);if(!i)return;(o=(r=this.editor.getShapeUtil(i)).onDropShapesOver)==null||o.call(r,i,e)}}clear(){this.prevDroppingShapeId=null,this.droppingNodeTimer!==null&&clearTimeout(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingShapes([]),this.first=!0}dispose(){this.clear()}}eO=Npt();Hpt(eO,1,"dispose",Rbe,Y6);zpt(eO,Y6);var Vpt=Object.create,kbe=Object.defineProperty,qpt=Object.getOwnPropertyDescriptor,Abe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),$be=t=>{throw TypeError(t)},Dbe=(t,e,n)=>e in t?kbe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kpt=t=>[,,,Vpt((t==null?void 0:t[Abe("metadata")])??null)],jbe=["class","method","getter","setter","accessor","field","value","get","set"],Lbe=t=>t!==void 0&&typeof t!="function"?$be("Function expected"):t,Gpt=(t,e,n,r,o)=>({kind:jbe[t],name:e,metadata:r,addInitializer:i=>n._?$be("Already initialized"):o.push(Lbe(i||null))}),Xpt=(t,e)=>Dbe(e,Abe("metadata"),t[3]),Ypt=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},Qpt=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=jbe[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,qpt(o,n)),S=r.length-1;S>=0;S--)l=Gpt(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,Lbe(s)&&(m[g]=s);return m&&kbe(o,n,m),o},wf=(t,e,n)=>Dbe(t,typeof e!="symbol"?e+"":e,n),Nbe,L3,tO;class nO extends(L3=Bt,Nbe=[va],L3){constructor(){super(...arguments),Ypt(tO,5,this),wf(this,"info",{}),wf(this,"selectionSnapshot",{}),wf(this,"snapshot",{}),wf(this,"markId",""),wf(this,"isCloning",!1),wf(this,"isCreating",!1),wf(this,"dragAndDropManager",new Y6(this.editor))}onCreate(e){}onEnter(e){var i;const{isCreating:n=!1,creatingMarkId:r,onCreate:o=()=>{}}=e;if(!((i=this.editor.getSelectedShapeIds())!=null&&i.length)){this.parent.transition("idle");return}if(this.info=e,this.parent.setCurrentToolIdMask(e.onInteractionEnd),this.isCreating=n,this.markId="",n)if(r)this.markId=r;else{const s=this.editor.getMarkIdMatching(`creating:${this.editor.getOnlySelectedShapeId()}`);s&&(this.markId=s)}else this.markId=this.editor.markHistoryStoppingPoint("translating");if(this.onCreate=o,this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move",rotation:0}),this.selectionSnapshot=ote(this.editor),!this.isCreating&&this.editor.inputs.altKey){this.startCloning();return}this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.selectionSnapshot={},this.snapshot={},this.editor.snaps.clearIndicators(),this.editor.setCursor({type:"default",rotation:0}),this.dragAndDropManager.clear()}onTick({elapsed:e}){const{editor:n}=this;this.dragAndDropManager.updateDroppingNode(this.snapshot.movingShapes,this.updateParentTransforms),n.edgeScrollManager.updateEdgeScrolling(e)}onPointerMove(){this.updateShapes()}onKeyDown(){if(this.editor.inputs.altKey&&!this.isCloning){this.startCloning();return}this.updateShapes()}onKeyUp(){if(!this.editor.inputs.altKey&&this.isCloning){this.stopCloning();return}this.updateShapes()}onPointerUp(){this.complete()}onComplete(){this.complete()}onCancel(){this.cancel()}startCloning(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate cloning"),this.editor.duplicateShapes(Array.from(this.editor.getSelectedShapeIds())),this.snapshot=ote(this.editor),this.handleStart(),this.updateShapes())}stopCloning(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.markHistoryStoppingPoint("translate"),this.updateShapes()}reset(){this.editor.bailToMark(this.markId)}complete(){var e;this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),Fr(this.editor,this.snapshot.movingShapes.map(n=>n.id)),this.handleEnd(),this.editor.getInstanceState().isToolLocked&&this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.isCreating?(e=this.onCreate)==null||e.call(this,this.editor.getOnlySelectedShape()):this.parent.transition("idle")}cancel(){this.reset(),this.info.onInteractionEnd?this.editor.setCurrentTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}handleStart(){const{movingShapes:e}=this.snapshot,n=[];e.forEach(r=>{var s;const o=this.editor.getShapeUtil(r),i=(s=o.onTranslateStart)==null?void 0:s.call(o,r);i&&n.push(i)}),n.length>0&&this.editor.updateShapes(n),this.editor.setHoveredShape(null)}handleEnd(){const{movingShapes:e}=this.snapshot;if(this.isCloning&&e.length>0){const r=$.Average(e.map(i=>this.editor.getShapePageTransform(i.id).point())),o=$.Sub(r,this.selectionSnapshot.averagePagePoint);$.IsNaN(o)||this.editor.updateInstanceState({duplicateProps:{shapeIds:e.map(i=>i.id),offset:{x:o.x,y:o.y}}})}const n=[];e.forEach(r=>{var a;const o=this.editor.getShape(r.id),i=this.editor.getShapeUtil(r),s=(a=i.onTranslateEnd)==null?void 0:a.call(i,r,o);s&&n.push(s)}),n.length>0&&this.editor.updateShapes(n)}updateShapes(){const{snapshot:e}=this;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),Zpt({editor:this.editor,snapshot:e});const{movingShapes:n}=e,r=[];n.forEach(o=>{var l;const i=this.editor.getShape(o.id),s=this.editor.getShapeUtil(o),a=(l=s.onTranslate)==null?void 0:l.call(s,o,i);a&&r.push(a)}),r.length>0&&this.editor.updateShapes(r)}updateParentTransforms(){const{editor:e,snapshot:{shapeSnapshots:n}}=this;n.forEach(r=>{const o=e.getShape(r.shape.id);if(!o)return null;const i=rs(o.parentId)?null:Ke.Inverse(e.getShapePageTransform(o.parentId));r.parentTransform=i})}}tO=Kpt(L3);Qpt(tO,1,"updateParentTransforms",Nbe,nO);Xpt(tO,nO);wf(nO,"id","translating");function ote(t){var d;const e=[],n=[],r=t.getSelectedShapeIds(),o=Tn(r.map(f=>{const h=t.getShape(f);if(!h)return null;e.push(h);const g=t.getShapePageTransform(f),y=g.point(),m=g.rotation();n.push(y);const S=Bs.isId(h.parentId)?null:Ke.Inverse(t.getShapePageTransform(h.parentId));return{shape:h,pagePoint:y,pageRotation:m,parentTransform:S}})),i=t.getOnlySelectedShape();let s=[];if(i)s=t.snaps.shapeBounds.getSnapPoints(i.id);else{const f=t.getSelectionPageBounds();f&&(s=f.cornersAndCenter.map((h,g)=>({id:"selection:"+g,x:h.x,y:h.y})))}let a,l;const{originPagePoint:c}=t.inputs,u=o.filter(f=>t.isShapeOfType(f.shape,"note")&&t.isPointInShape(f.shape,c));if(u.length!==0)if(u.length===1)l=u[0];else{const f=t.getCurrentPageShapesSorted();l=(d=u.map(h=>({snapshot:h,index:f.findIndex(g=>g.id===h.shape.id)})).sort((h,g)=>g.index-h.index)[0])==null?void 0:d.snapshot}return l&&(a=R0e(t,l.pageRotation,l.shape.props.scale,l.shape.props.growY??0)),{averagePagePoint:$.Average(n),movingShapes:e,shapeSnapshots:o,initialPageBounds:t.getSelectionPageBounds(),initialSnapPoints:s,noteAdjacentPositions:a,noteSnapshot:l}}function Zpt({editor:t,snapshot:e}){const{inputs:n}=t,{noteSnapshot:r,noteAdjacentPositions:o,initialPageBounds:i,initialSnapPoints:s,shapeSnapshots:a,averagePagePoint:l}=e,c=t.getInstanceState().isGridMode,u=t.getDocumentSettings().gridSize,d=$.Sub(n.currentPagePoint,n.originPagePoint),f=t.inputs.shiftKey?Math.abs(d.x)<Math.abs(d.y)?"x":"y":null;f==="x"?d.x=0:f==="y"&&(d.y=0),t.snaps.clearIndicators();const h=t.user.getIsSnapMode()?!n.ctrlKey:n.ctrlKey;let g=!1;if(h&&t.inputs.pointerVelocity.len()<.5){const{nudge:x}=t.snaps.shapeBounds.snapTranslateShapes({dragDelta:d,initialSelectionPageBounds:i,lockedAxis:f,initialSelectionSnapPoints:s});d.add(x)}else if(r&&o){const{scale:x}=r.shape.props,C=r.pagePoint.clone().add(d).add(Z2.clone().mul(x).rot(r.pageRotation));let E=M0e/t.getZoomLevel(),P=new $(0,0);for(const I of o){const T=$.Sub(C,I),M=T.len();M<E&&(g=!0,E=M,P=T)}d.sub(P)}const y=$.Add(l,d),m=t.snaps.getIndicators();c&&!n.ctrlKey&&!g&&m.length===0&&y.snapToGrid(u);const S=$.Sub(y,l);t.updateShapes(Tn(a.map(({shape:x,pagePoint:C,parentTransform:E})=>{const P=$.Add(C,S),I=E?Ke.applyToPoint(E,P):P;return{id:x.id,type:x.type,x:I.x,y:I.y}})))}class XP extends Bt{constructor(){super(...arguments);V(this,"reactor")}static children(){return[j3,K6,Rpt,ybe,wbe,nO,cbe,Pbe,X6,xbe,ube,mbe,Cbe,Ebe,Sbe,vbe,bbe,pbe]}cleanUpDuplicateProps(){const n=this.editor.getSelectedShapeIds(),r=this.editor.getInstanceState();if(!r.duplicateProps)return;const o=new Set(r.duplicateProps.shapeIds);n.length===o.size&&n.every(i=>o.has(i))||this.editor.updateInstanceState({duplicateProps:null})}onEnter(){this.reactor=Al("clean duplicate props",()=>{try{this.cleanUpDuplicateProps()}catch(n){console.error(n)}})}onExit(){var n;(n=this.reactor)==null||n.call(this),this.editor.getCurrentPageState().editingShapeId&&this.editor.setEditingShape(null)}}V(XP,"id","select"),V(XP,"initial","idle"),V(XP,"isLockable",!1);class Fbe extends Bt{constructor(){super(...arguments);V(this,"info",{})}onEnter(n){this.info=n}onPointerDown(){this.parent.transition("pointing",this.info)}}V(Fbe,"id","idle");class zbe extends Bt{constructor(){super(...arguments);V(this,"info",{})}onEnter(n){this.info=n}onPointerUp(){this.complete()}onPointerMove(){this.editor.inputs.isDragging&&this.parent.transition("zoom_brushing",this.info)}onCancel(){this.cancel()}complete(){const{currentScreenPoint:n}=this.editor.inputs;this.editor.inputs.altKey?this.editor.zoomOut(n,{animation:{duration:220}}):this.editor.zoomIn(n,{animation:{duration:220}}),this.parent.transition("idle",this.info)}cancel(){this.parent.transition("idle",this.info)}}V(zbe,"id","pointing");class Bbe extends Bt{constructor(){super(...arguments);V(this,"info",{});V(this,"zoomBrush",new rt)}onEnter(n){this.info=n,this.update()}onExit(){this.editor.updateInstanceState({zoomBrush:null})}onPointerMove(){this.update()}onPointerUp(){this.complete()}onCancel(){this.cancel()}update(){const{inputs:{originPagePoint:n,currentPagePoint:r}}=this.editor;this.zoomBrush.setTo(rt.FromPoints([n,r])),this.editor.updateInstanceState({zoomBrush:this.zoomBrush.toJson()})}cancel(){this.parent.transition("idle",this.info)}complete(){const{zoomBrush:n}=this,r=8/this.editor.getZoomLevel();if(n.width<r&&n.height<r){const o=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(o,{animation:{duration:220}}):this.editor.zoomIn(o,{animation:{duration:220}})}else{const o=this.editor.inputs.altKey?this.editor.getZoomLevel()/2:void 0;this.editor.zoomToBounds(n,{targetZoom:o,animation:{duration:220}})}this.parent.transition("idle",this.info)}}V(Bbe,"id","zoom_brushing");class YP extends Bt{constructor(){super(...arguments);V(this,"info",{})}static children(){return[Fbe,Bbe,zbe]}onEnter(n){this.info=n,this.parent.setCurrentToolIdMask(n.onInteractionEnd),this.updateCursor()}onExit(){this.parent.setCurrentToolIdMask(void 0),this.editor.updateInstanceState({zoomBrush:null,cursor:{type:"default",rotation:0}}),this.parent.setCurrentToolIdMask(void 0)}onKeyDown(){this.updateCursor()}onKeyUp(n){this.updateCursor(),n.code==="KeyZ"&&this.complete()}onInterrupt(){this.complete()}complete(){this.info.onInteractionEnd&&this.info.onInteractionEnd!=="select"?this.editor.setCurrentTool(this.info.onInteractionEnd,this.info):this.parent.transition("select")}updateCursor(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out",rotation:0}):this.editor.setCursor({type:"zoom-in",rotation:0})}}V(YP,"id","zoom"),V(YP,"initial","idle"),V(YP,"isLockable",!1);const Jpt=[qP,KP,GP,YP,XP];function egt(){const t=Ee(),e=Ie("follow",()=>t.getInstanceState().followingUserId,[t]);return e?w.jsx(tgt,{userId:e}):null}function tgt({userId:t}){const e=GM(t);return e?w.jsx("div",{className:"tlui-following-indicator",style:{borderColor:e.color}}):null}let N3={fonts:{tldraw_mono:`${Yo()}/fonts/IBMPlexMono-Medium.woff2`,tldraw_mono_italic:`${Yo()}/fonts/IBMPlexMono-MediumItalic.woff2`,tldraw_mono_bold:`${Yo()}/fonts/IBMPlexMono-Bold.woff2`,tldraw_mono_italic_bold:`${Yo()}/fonts/IBMPlexMono-BoldItalic.woff2`,tldraw_serif:`${Yo()}/fonts/IBMPlexSerif-Medium.woff2`,tldraw_serif_italic:`${Yo()}/fonts/IBMPlexSerif-MediumItalic.woff2`,tldraw_serif_bold:`${Yo()}/fonts/IBMPlexSerif-Bold.woff2`,tldraw_serif_italic_bold:`${Yo()}/fonts/IBMPlexSerif-BoldItalic.woff2`,tldraw_sans:`${Yo()}/fonts/IBMPlexSans-Medium.woff2`,tldraw_sans_italic:`${Yo()}/fonts/IBMPlexSans-MediumItalic.woff2`,tldraw_sans_bold:`${Yo()}/fonts/IBMPlexSans-Bold.woff2`,tldraw_sans_italic_bold:`${Yo()}/fonts/IBMPlexSans-BoldItalic.woff2`,tldraw_draw:`${Yo()}/fonts/Shantell_Sans-Informal_Regular.woff2`,tldraw_draw_italic:`${Yo()}/fonts/Shantell_Sans-Informal_Regular_Italic.woff2`,tldraw_draw_bold:`${Yo()}/fonts/Shantell_Sans-Informal_Bold.woff2`,tldraw_draw_italic_bold:`${Yo()}/fonts/Shantell_Sans-Informal_Bold_Italic.woff2`}};function ngt(t){return v.useMemo(()=>t?{fonts:{...N3.fonts,...t==null?void 0:t.fonts}}:N3,[t])}const rgt=["align-bottom","align-center-horizontal","align-center-vertical","align-left","align-right","align-top","arrow-arc","arrow-elbow","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","blob","bold","bookmark","bring-forward","bring-to-front","broken","bulletList","check-circle","check","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","color","comment","cross-2","cross-circle","dash-dashed","dash-dotted","dash-draw","dash-solid","disconnected","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","fill-fill","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-cloud","geo-diamond","geo-ellipse","geo-heart","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","heading","help-circle","highlight","horizontal-align-end","horizontal-align-middle","horizontal-align-start","info-circle","italic","leading","link","list","lock","manual","menu","minus","mixed","pack","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","send-backward","send-to-back","share-1","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","status-offline","stretch-horizontal","stretch-vertical","strike","text-align-center","text-align-left","text-align-right","toggle-off","toggle-on","tool-arrow","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-screenshot","tool-text","trash","twitter","underline","undo","ungroup","unlock","vertical-align-end","vertical-align-middle","vertical-align-start","warning-triangle","zoom-in","zoom-out"];let Eb={...N3,icons:Object.fromEntries(rgt.map(t=>[t,`${Yo()}/icons/icon/0_merged.svg#${t}`])),translations:Object.fromEntries(mx.map(t=>[t.locale,`${Yo()}/translations/${t.locale}.json`])),embedIcons:Object.fromEntries(p6.map(t=>[t.type,`${Yo()}/embed-icons/${t.type}.png`]))};function ogt(t){return t?{fonts:Object.assign({...Eb.fonts},{...t==null?void 0:t.fonts}),icons:Object.assign({...Eb.icons},{...t==null?void 0:t.icons}),embedIcons:Object.assign({...Eb.embedIcons},{...t==null?void 0:t.embedIcons}),translations:Object.assign({...Eb.translations},{...t==null?void 0:t.translations})}:Eb}function lg({id:t,children:e,onOpenChange:n,open:r}){const[o,i]=Wd(t,n);return w.jsx(t6,{onOpenChange:i,open:r||o,children:w.jsx("div",{className:"tlui-popover",children:e})})}function cg({children:t}){return w.jsx(n6,{asChild:!0,dir:"ltr",children:t})}function ug({side:t,children:e,align:n="center",sideOffset:r=8,alignOffset:o=0,disableEscapeKeyDown:i=!1,autoFocusFirstButton:s=!0}){const a=Ko(),l=ce.useRef(null),c=ce.useCallback(()=>{var h;if(!s)return;const f=[...((h=l.current)==null?void 0:h.querySelectorAll("button:not([disabled])"))??[]].filter(g=>g.offsetWidth||g.offsetHeight)[0];f&&f.focus()},[s]);return w.jsx(r6,{container:a,children:w.jsx(o6,{className:"tlui-popover__content",side:t,sideOffset:r,align:n,alignOffset:o,dir:"ltr",ref:l,onOpenAutoFocus:c,onEscapeKeyDown:u=>i&&u.preventDefault(),children:e})})}function igt(t){return t.getSelectedShapeIds().map(r=>t.getShape(r)).filter(r=>{if(!r)return!1;if(t.isShapeOfType(r,"arrow")){const o=si(t,r);if(o.start||o.end)return!1}return!0})}const Hbe=()=>{const t=Ee();return Ie("threeStackableItems",()=>igt(t).length>2,[t])},Vd=()=>{const t=Ee();return Ie("isInSelectState",()=>t.isIn("select"),[t])},Ube=()=>{const t=Ee();return Ie("allow group",()=>{const e=t.getSelectedShapes();if(e.length<2)return!1;for(const n of e)if(t.isShapeOfType(n,"arrow")){const r=si(t,n);if(r.start&&!e.some(o=>o.id===r.start.toId)||r.end&&!e.some(o=>o.id===r.end.toId))return!1}return!0},[t])},Wbe=()=>{const t=Ee();return Ie("allowUngroup",()=>t.getSelectedShapeIds().some(e=>{var n;return((n=t.getShape(e))==null?void 0:n.type)==="group"}),[t])},sgt=typeof window<"u"&&"navigator"in window&&!!navigator.clipboard&&!!navigator.clipboard.read;function Vbe(t,e){const n=Ee();return Ie("selectedShapes",()=>n.getSelectedShapes().length>=t,[n,t,e])}function ea(t,e){const n=Ee();return Ie("selectedShapes",()=>{const r=n.getSelectedShapes().filter(o=>!n.isShapeOrAncestorLocked(o)).length;return t===void 0?r:r>=t},[n])}function agt(){const t=Ee();return Ie("showAutoSizeToggle",()=>{const e=t.getSelectedShapes();return e.length===1&&t.isShapeOfType(e[0],"text")&&e[0].props.autoSize===!1},[t])}function qbe(){const t=Ee();return Ie("hasLinkShapeSelected",()=>{const e=t.getOnlySelectedShape();return!!(e&&e.type!=="embed"&&"url"in e.props&&!e.isLocked)},[t])}function lgt(){const t=Ee();return Ie("onlyFlippableShape",()=>{const e=t.getOnlySelectedShape();return e&&(t.isShapeOfType(e,"group")||t.isShapeOfType(e,"image")||t.isShapeOfType(e,"arrow")||t.isShapeOfType(e,"line")||t.isShapeOfType(e,"draw"))},[t])}function Kbe(){const t=Ee();return Ie("useCanRedo",()=>t.getCanRedo(),[t])}function Gbe(){const t=Ee();return Ie("useCanUndo",()=>t.getCanUndo(),[t])}function cgt(){return w.jsxs(w.Fragment,{children:[w.jsx(ugt,{}),w.jsx(dgt,{}),w.jsx(fgt,{}),w.jsx(hgt,{}),w.jsx(pgt,{}),w.jsx(vgt,{}),w.jsx(ygt,{}),w.jsx(bgt,{})]})}function ugt(){const t=ea(2),e=Vd(),n=t&&e;return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"align-left",disabled:!n}),w.jsx(Ve,{actionId:"align-center-horizontal",disabled:!n}),w.jsx(Ve,{actionId:"align-right",disabled:!n}),w.jsx(Ve,{actionId:"stretch-horizontal",disabled:!n}),w.jsx(Ve,{actionId:"align-top",disabled:!n}),w.jsx(Ve,{actionId:"align-center-vertical",disabled:!n}),w.jsx(Ve,{actionId:"align-bottom",disabled:!n}),w.jsx(Ve,{actionId:"stretch-vertical",disabled:!n})]})}function dgt(){const t=ea(3),e=Vd(),n=t&&e;return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"distribute-horizontal",disabled:!n}),w.jsx(Ve,{actionId:"distribute-vertical",disabled:!n})]})}function fgt(){const t=Hbe(),e=Vd(),n=t&&e;return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"stack-horizontal",disabled:!n}),w.jsx(Ve,{actionId:"stack-vertical",disabled:!n})]})}function hgt(){const t=ea(1),e=Vd(),n=t&&e;return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"send-to-back",disabled:!n}),w.jsx(Ve,{actionId:"send-backward",disabled:!n}),w.jsx(Ve,{actionId:"bring-forward",disabled:!n}),w.jsx(Ve,{actionId:"bring-to-front",disabled:!n})]})}function pgt(){return _s()<Ro.TABLET_SM?w.jsx(ggt,{}):w.jsx(mgt,{})}function ggt(){const t=Ee(),e=Ie("zoom is 1",()=>t.getZoomLevel()===1,[t]);return w.jsx(Ve,{actionId:"zoom-to-100",disabled:e})}function mgt(){const t=ea(1),e=Vd(),n=t&&e;return w.jsx(Ve,{actionId:"rotate-ccw",disabled:!n})}function vgt(){const t=ea(1),e=Vd(),n=t&&e;return w.jsx(Ve,{actionId:"rotate-cw",disabled:!n})}function ygt(){const t=qbe(),e=Vd(),n=t&&e;return w.jsx(Ve,{actionId:"edit-link",disabled:!n})}function bgt(){const t=Ube(),e=Wbe();return t?w.jsx(ite,{}):e?w.jsx(Sgt,{}):w.jsx(ite,{})}function ite(){const t=ea(2),e=Vd(),n=t&&e;return w.jsx(Ve,{actionId:"group",disabled:!n})}function Sgt(){return w.jsx(Ve,{actionId:"ungroup"})}const xgt=v.memo(function({children:e}){const n=Jt(),r=_s(),o=ol(),i=v.useRef(null);Hd(i);const s=Ee(),a=Ie("should display quick actions when in readonly",()=>s.isInAny("hand","zoom"),[s]),l=e??w.jsx(cgt,{});if(!(o&&!a))return w.jsxs(lg,{id:"actions-menu",children:[w.jsx(cg,{children:w.jsx(Si,{type:"icon","data-testid":"actions-menu.button",title:n("actions-menu.title"),children:w.jsx(Dn,{icon:"dots-vertical",small:!0})})}),w.jsx(ug,{side:r>=Ro.TABLET?"bottom":"top",sideOffset:6,children:w.jsx(Vo,{ref:i,label:n("actions-menu.title"),className:"tlui-actions-menu tlui-buttons__grid","data-testid":"actions-menu.content",children:w.jsx(Gs,{type:"icons",sourceId:"actions-menu",children:l})})})]})});function Xbe(){return agt()?w.jsx(Ve,{actionId:"toggle-auto-size"}):null}function Ybe(){return qbe()?w.jsx(Ve,{actionId:"edit-link"}):null}function wgt(){return ea(1)?w.jsx(Ve,{actionId:"duplicate"}):null}function Qbe(){const t=Ee();return Ie("should display flatten option",()=>{if(t.getSelectedShapeIds().length===0)return!1;const r=t.getOnlySelectedShape();return!(r&&t.isShapeOfType(r,"image"))},[t])?w.jsx(Ve,{actionId:"flatten-to-image"}):null}function Zbe(){return Ube()?w.jsx(Ve,{actionId:"group"}):null}function Jbe(){return Wbe()?w.jsx(Ve,{actionId:"ungroup"}):null}function eSe(){const t=Ee();return Ie("allow unframe",()=>{const n=t.getSelectedShapes();return n.length===0?!1:n.every(r=>t.isShapeOfType(r,"frame"))},[t])?w.jsx(Ve,{actionId:"remove-frame"}):null}function tSe(){const t=Ee();return Ie("allow fit frame to content",()=>{const n=t.getOnlySelectedShape();return n?t.isShapeOfType(n,"frame")&&t.getSortedChildIdsForParent(n).length>0:!1},[t])?w.jsx(Ve,{actionId:"fit-frame-to-content"}):null}function nSe(){const t=Ee();return Ie("selected shapes",()=>t.getSelectedShapes().length>0,[t])?w.jsx(Ve,{actionId:"toggle-lock"}):null}function Q6(){const t=Ee(),e=Ie("isTransparentBg",()=>!t.getInstanceState().exportBackground,[t]);return w.jsx(Uc,{actionId:"toggle-transparent",checked:e,toggle:!0})}function Cgt(){const t=Ee(),e=Ie("any shapes",()=>t.getCurrentPageShapeIds().size>0,[t]);return w.jsx(Ve,{actionId:"unlock-all",disabled:!e})}function rSe(){const t=Ee(),e=Ie("zoomed to 100",()=>t.getZoomLevel()===1,[t]);return w.jsx(Ve,{actionId:"zoom-to-100",noClose:!0,disabled:e})}function oSe(){const t=Ee(),e=Ie("has shapes",()=>t.getCurrentPageShapeIds().size>0,[t]);return w.jsx(Ve,{actionId:"zoom-to-fit",disabled:!e,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0})}function iSe(){const t=Ee(),e=Ie("has shapes",()=>t.getSelectedShapeIds().length>0,[t]);return w.jsx(Ve,{actionId:"zoom-to-selection",disabled:!e,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})}function sSe(){return w.jsxs(kn,{id:"clipboard",children:[w.jsx(Pgt,{}),w.jsx(_gt,{}),w.jsx(Igt,{}),w.jsx(wgt,{}),w.jsx(Tgt,{})]})}function Egt(){var n;const t=Ee(),e=Ie("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t]);return w.jsxs(Pa,{id:"copy-as",label:"context-menu.copy-as",size:"small",disabled:!e,children:[w.jsxs(kn,{id:"copy-as-group",children:[w.jsx(Ve,{actionId:"copy-as-svg"}),!!((n=window.navigator.clipboard)!=null&&n.write)&&w.jsx(Ve,{actionId:"copy-as-png"})]}),w.jsx(kn,{id:"copy-as-bg",children:w.jsx(Q6,{})})]})}function Pgt(){const t=ea(1);return w.jsx(Ve,{actionId:"cut",disabled:!t})}function _gt(){const t=Vbe(1);return w.jsx(Ve,{actionId:"copy",disabled:!t})}function Igt(){const t=sgt;return w.jsx(Ve,{actionId:"paste",disabled:!t})}function aSe(){const t=Ee();return Ie("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t])?w.jsxs(kn,{id:"conversions",children:[w.jsx(Egt,{}),w.jsxs(Pa,{id:"export-as",label:"context-menu.export-as",size:"small",children:[w.jsxs(kn,{id:"export-as-group",children:[w.jsx(Ve,{actionId:"export-as-svg"}),w.jsx(Ve,{actionId:"export-as-png"})]}),w.jsx(kn,{id:"export-as-bg",children:w.jsx(Q6,{})})]})]}):null}function lSe(){const t=Ee(),e=Ie("atLeastOneShapeOnPage",()=>t.getCurrentPageShapeIds().size>0,[t]);return w.jsx(Ve,{actionId:"select-all",disabled:!e})}function Tgt(){const t=ea(1);return w.jsx(Ve,{actionId:"delete",disabled:!t})}function Mgt(){const t=ol();return!Vbe(1)||t?null:w.jsxs(Pa,{id:"edit",label:"context-menu.edit",size:"small",children:[w.jsx(Zbe,{}),w.jsx(Jbe,{}),w.jsx(Qbe,{}),w.jsx(Ybe,{}),w.jsx(tSe,{}),w.jsx(eSe,{}),w.jsx(uSe,{}),w.jsx(cSe,{}),w.jsx(Xbe,{}),w.jsx(nSe,{})]})}function Ogt(){const t=ea(2),e=lgt();return ol()||!(t||e)?null:w.jsxs(Pa,{id:"arrange",label:"context-menu.arrange",size:"small",children:[t&&w.jsxs(kn,{id:"align",children:[w.jsx(Ve,{actionId:"align-left"}),w.jsx(Ve,{actionId:"align-center-horizontal"}),w.jsx(Ve,{actionId:"align-right"}),w.jsx(Ve,{actionId:"align-top"}),w.jsx(Ve,{actionId:"align-center-vertical"}),w.jsx(Ve,{actionId:"align-bottom"})]}),w.jsx(Rgt,{}),t&&w.jsxs(kn,{id:"stretch",children:[w.jsx(Ve,{actionId:"stretch-horizontal"}),w.jsx(Ve,{actionId:"stretch-vertical"})]}),(t||e)&&w.jsxs(kn,{id:"flip",children:[w.jsx(Ve,{actionId:"flip-horizontal"}),w.jsx(Ve,{actionId:"flip-vertical"})]}),w.jsx(kgt,{})]})}function Rgt(){return ea(3)?w.jsxs(kn,{id:"distribute",children:[w.jsx(Ve,{actionId:"distribute-horizontal"}),w.jsx(Ve,{actionId:"distribute-vertical"})]}):null}function kgt(){const t=ea(2),e=Hbe();return t?w.jsxs(kn,{id:"order",children:[w.jsx(Ve,{actionId:"pack"}),e&&w.jsx(Ve,{actionId:"stack-horizontal"}),e&&w.jsx(Ve,{actionId:"stack-vertical"})]}):null}function Agt(){const t=ol(),e=ea(1);return t||!e?null:w.jsx(Pa,{id:"reorder",label:"context-menu.reorder",size:"small",children:w.jsxs(kn,{id:"reorder",children:[w.jsx(Ve,{actionId:"bring-to-front"}),w.jsx(Ve,{actionId:"bring-forward"}),w.jsx(Ve,{actionId:"send-backward"}),w.jsx(Ve,{actionId:"send-to-back"})]})})}function $gt(){const t=Ee(),e=Ie("pages",()=>t.getPages(),[t]),n=Ie("current page id",()=>t.getCurrentPageId(),[t]),{addToast:r}=Ud(),o=ci(),i=ol();return!ea(1)||i?null:w.jsxs(Pa,{id:"move-to-page",label:"context-menu.move-to-page",size:"small",children:[w.jsx(kn,{id:"pages",children:e.map(a=>w.jsx(fr,{id:a.id,disabled:n===a.id,label:a.name.length>30?`${a.name.slice(0,30)}`:a.name,onSelect:()=>{t.markHistoryStoppingPoint("move_shapes_to_page"),t.moveShapesToPage(t.getSelectedShapeIds(),a.id);const l=t.getPage(a.id);l&&r({title:"Changed Page",description:`Moved to ${l.name}.`,actions:[{label:"Go Back",type:"primary",onClick:()=>{t.markHistoryStoppingPoint("change-page"),t.setCurrentPage(n)}}]}),o("move-to-page",{source:"context-menu"})}},a.id))}),w.jsx(kn,{id:"new-page",children:w.jsx(Ve,{actionId:"move-to-new-page"})})]})}function cSe(){const t=Ee();return Ie("oneEmbedSelected",()=>{const n=t.getOnlySelectedShape();return n?!!(t.isShapeOfType(n,"embed")&&n.props.url&&!t.isShapeOrAncestorLocked(n)):!1},[t])?w.jsx(Ve,{actionId:"convert-to-bookmark"}):null}function uSe(){const t=Ee(),e=g6();return Ie("oneEmbeddableBookmarkSelected",()=>{const r=t.getOnlySelectedShape();return r?!!(t.isShapeOfType(r,"bookmark")&&r.props.url&&e(r.props.url)&&!t.isShapeOrAncestorLocked(r)):!1},[t])?w.jsx(Ve,{actionId:"convert-to-embed"}):null}function Dgt(){const t=Ee(),e=Ie("isSnapMode",()=>t.user.getIsSnapMode(),[t]);return w.jsx(Uc,{actionId:"toggle-snap-mode",checked:e})}function jgt(){const t=Ee(),e=Ie("isToolLock",()=>t.getInstanceState().isToolLocked,[t]);return w.jsx(Uc,{actionId:"toggle-tool-lock",checked:e})}function Lgt(){const t=Ee(),e=Ie("isGridMode",()=>t.getInstanceState().isGridMode,[t]);return w.jsx(Uc,{actionId:"toggle-grid",checked:e})}function Ngt(){const t=Ee(),e=Ie("isWrapMode",()=>t.user.getIsWrapMode(),[t]);return w.jsx(Uc,{actionId:"toggle-wrap-mode",checked:e})}function Fgt(){const t=Ee(),e=Ie("isFocusMode",()=>t.getInstanceState().isFocusMode,[t]);return w.jsx(Uc,{actionId:"toggle-focus-mode",checked:e})}function zgt(){const t=Ee(),e=Ie("edgeScrollSpeed",()=>t.user.getEdgeScrollSpeed(),[t]);return w.jsx(Uc,{actionId:"toggle-edge-scrolling",checked:e===1})}function Bgt(){const t=Ee(),e=Ie("animationSpeed",()=>t.user.getAnimationSpeed(),[t]);return w.jsx(Uc,{actionId:"toggle-reduce-motion",checked:e===0})}function Hgt(){const t=Ee(),e=Ie("isDebugMode",()=>t.getInstanceState().isDebugMode,[t]);return w.jsx(Uc,{actionId:"toggle-debug-mode",checked:e})}function Ugt(){const t=Ee(),e=Ie("dynamic resize",()=>t.user.getIsDynamicResizeMode(),[t]);return w.jsx(Uc,{actionId:"toggle-dynamic-size-mode",checked:e})}function Wgt(){const t=Ee(),e=Ie("paste at cursor",()=>t.user.getIsPasteAtCursorMode(),[t]);return w.jsx(Uc,{actionId:"toggle-paste-at-cursor",checked:e})}function Vgt(){const t=Ee();return Ie("show cursor chat",()=>t.getCurrentToolId()==="select"&&!t.getInstanceState().isCoarsePointer,[t])?w.jsx(Ve,{actionId:"open-cursor-chat"}):null}function qgt(){const t=Ee(),e=q2(),n=Ie("isSelectToolActive",()=>t.getCurrentToolId()==="select",[t]),r=Ie("isSinglePageMode",()=>t.options.maxPages<=1,[t]);return n?w.jsxs(w.Fragment,{children:[e&&w.jsx(Vgt,{}),w.jsxs(kn,{id:"modify",children:[w.jsx(Mgt,{}),w.jsx(Ogt,{}),w.jsx(Agt,{}),!r&&w.jsx($gt,{})]}),w.jsx(sSe,{}),w.jsx(aSe,{}),w.jsx(kn,{id:"select-all",children:w.jsx(lSe,{})})]}):null}const Kgt=v.memo(function({children:e,disabled:n=!1}){const r=Ee(),o=Jt(),{Canvas:i}=$r(),s=v.useCallback(d=>{if(d){if(r.getInstanceState().isCoarsePointer){const f=r.getSelectedShapes(),{inputs:{currentPagePoint:h}}=r,g=r.getShapesAtPoint(h);if(!r.getSelectedShapes().length||!g.some(y=>f.includes(y))){const y=g.filter(m=>r.isShapeOrAncestorLocked(m));y.length&&r.select(...y.map(m=>m.id))}}}else{const f=r.getOnlySelectedShape();f&&r.isShapeOrAncestorLocked(f)&&r.setSelectedShapes([])}},[r]),a=Ko(),[l,c]=Wd("context menu",s),u=e??w.jsx(qgt,{});return w.jsxs(mst,{dir:"ltr",onOpenChange:c,modal:!1,children:[w.jsx(vst,{onContextMenu:void 0,dir:"ltr",disabled:n,children:i?w.jsx(i,{}):null}),l&&w.jsx(yst,{container:a,children:w.jsx(bst,{className:"tlui-menu scrollable","data-testid":"context-menu","aria-label":o("context-menu.title"),alignOffset:-4,collisionPadding:4,onContextMenu:En,children:w.jsx(Gs,{type:"context-menu",sourceId:"context-menu",children:u})})})]})}),Ggt=2e3,Xgt=5e3,Ygt=Ii(function(){const e=Ee(),{isChatting:n,chatMessage:r}=e.getInstanceState(),o=v.useRef(-1),[i,s]=v.useState("");return v.useEffect(()=>{if(!n&&r||n){const l=n?Xgt:Ggt;o.current=e.timers.setTimeout(()=>{e.updateInstanceState({chatMessage:"",isChatting:!1}),s(""),e.focus()},l)}return()=>{clearTimeout(o.current)}},[e,r,n]),n?w.jsx(Zgt,{value:i,setValue:s,chatMessage:r}):r.trim()?w.jsx(Qgt,{chatMessage:r}):null});function dSe(t){const e=Ee();v.useLayoutEffect(()=>{var s;if(!t.current)return;const{x:r,y:o}=e.inputs.currentScreenPoint;(s=t.current)==null||s.style.setProperty("transform",`translate(${r}px, ${o}px)`);function i(a){var u;const{minX:l,minY:c}=e.getViewportScreenBounds();(u=t.current)==null||u.style.setProperty("transform",`translate(${a.clientX-l}px, ${a.clientY-c}px)`)}return window.addEventListener("pointermove",i),()=>{window.removeEventListener("pointermove",i)}},[t,e])}const Qgt=({chatMessage:t})=>{const e=Ee(),n=v.useRef(null);return dSe(n),w.jsx("div",{ref:n,className:"tl-cursor-chat tl-cursor-chat__bubble",style:{backgroundColor:e.user.getColor()},children:t})},Zgt=Ii(function({chatMessage:e,value:n,setValue:r}){const o=Ee(),i=Jt(),s=v.useRef(null),a=e||i("cursor-chat.type-to-chat");dSe(s),v.useLayoutEffect(()=>{const f=s.current;if(!f)return;const h=o.textMeasure.measureText(n||a,{fontFamily:"var(--font-body)",fontSize:12,fontWeight:"500",fontStyle:"normal",maxWidth:null,lineHeight:1,padding:"6px"});f.style.setProperty("width",h.w+"px")},[o,n,a]),v.useLayoutEffect(()=>{const f=o.timers.requestAnimationFrame(()=>{var h;(h=s.current)==null||h.focus()});return()=>{cancelAnimationFrame(f)}},[o]);const l=v.useCallback(()=>{o.updateInstanceState({isChatting:!1}),o.focus()},[o]),c=v.useCallback(f=>{const{value:h}=f.target;r(h.slice(0,64)),o.updateInstanceState({chatMessage:h})},[o,r]),u=v.useCallback(f=>{const h=s.current;if(!h)return;const{value:g}=h;switch(f.key){case"Enter":{if(En(f),f.stopPropagation(),!g){l();return}r("");break}case"Escape":{En(f),f.stopPropagation(),l();break}}},[l,r]),d=v.useCallback(f=>{f.stopPropagation()},[]);return w.jsx("input",{ref:s,className:"tl-cursor-chat",style:{backgroundColor:o.user.getColor()},onBlur:l,onChange:c,onKeyDown:u,onPaste:d,value:n,placeholder:a,spellCheck:!1})});function F3({checked:t}){const e=Jt();return w.jsx(Dd,{label:e(t?"ui.checked":"ui.unchecked"),icon:t?"check":"none",className:"tlui-button__icon",small:!0})}function Jgt(){const t=Ee(),{addToast:e}=Ud(),{addDialog:n}=Kw(),[r,o]=ce.useState(!1);return w.jsxs(w.Fragment,{children:[w.jsxs(kn,{id:"items",children:[w.jsx(fr,{id:"hard-reset",onSelect:lue,label:"Hard reset"}),w.jsx(fr,{id:"add-toast",onSelect:()=>{e({id:br(),title:"Something good happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"success"}),e({id:br(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"info",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),e({id:br(),title:"Something maybe bad happened",description:"Hey, attend to this thing over here. It might be important!",keepOpen:!0,severity:"warning",actions:[{label:"Primary",type:"primary",onClick:()=>{}},{label:"Normal",type:"normal",onClick:()=>{}},{label:"Danger",type:"danger",onClick:()=>{}}]}),e({id:br(),title:"Something bad happened",severity:"error",keepOpen:!0})},label:"Show toast"}),w.jsx(fr,{id:"show-dialog",label:"Show dialog",onSelect:()=>{n({component:({onClose:i})=>w.jsx(nmt,{displayDontShowAgain:!0,onCancel:()=>i(),onContinue:()=>i()}),onClose:()=>{}})}}),w.jsx(fr,{id:"create-shapes",label:"Create 100 shapes",onSelect:()=>rmt(t,100)}),w.jsx(fr,{id:"count-nodes",label:"Count shapes / nodes",onSelect:()=>{var a;const i=t.getSelectedShapes(),s=i.length===0?t.getRenderingShapes():i;window.alert(`Shapes ${s.length}, DOM nodes:${(a=document.querySelector(".tl-shapes").querySelectorAll("*"))==null?void 0:a.length}`)}}),(()=>{if(r)throw Error("oh no!");return null})(),w.jsx(fr,{id:"throw-error",onSelect:()=>o(!0),label:"Throw error"})]}),w.jsxs(kn,{id:"flags",children:[w.jsx(emt,{}),w.jsx(tmt,{})]})]})}function emt(){const t=Object.values(so);return t.length?w.jsx(Pa,{id:"debug flags",label:"Debug Flags",children:w.jsx(kn,{id:"debug flags",children:t.map(e=>w.jsx(fSe,{flag:e},e.name))})}):null}function tmt(){const t=Object.values(WWe);return t.length?w.jsx(Pa,{id:"feature flags",label:"Feature Flags",children:w.jsx(kn,{id:"feature flags",children:t.map(e=>w.jsx(fSe,{flag:e},e.name))})}):null}function nmt({title:t="title",body:e="hello hello hello",cancel:n="Cancel",confirm:r="Continue",displayDontShowAgain:o=!1,maxWidth:i="350",onCancel:s,onContinue:a}){const[l,c]=ce.useState(!1);return w.jsxs(w.Fragment,{children:[w.jsxs(U2,{children:[w.jsx(W2,{children:t}),w.jsx(V2,{})]}),w.jsx(Rx,{style:{maxWidth:i},children:e}),w.jsxs(h6,{className:"tlui-dialog__footer__actions",children:[o&&w.jsxs(Hn,{type:"normal",onClick:()=>c(!l),style:{marginRight:"auto"},children:[w.jsx(F3,{checked:l}),w.jsx(Wo,{children:"Dont show again"})]}),w.jsx(Hn,{type:"normal",onClick:s,children:w.jsx(Wo,{children:n})}),w.jsx(Hn,{type:"primary",onClick:async()=>a(),children:w.jsx(Wo,{children:r})})]})]})}const fSe=Ii(function({flag:e,onChange:n}){const r=e.get();return w.jsx(G2,{id:e.name,title:e.name,label:e.name.replace(/([a-z0-9])([A-Z])/g,o=>`${o[0]} ${o[1].toLowerCase()}`).replace(/^[a-z]/,o=>o.toUpperCase()),checked:r,onSelect:()=>{e.set(!r),n==null||n(!r)}})});let ste=0;function rmt(t,e){const n=t.options.adjacentShapeMargin,r=Array(e),o=Math.floor(Math.sqrt(e));for(let i=0;i<e;i++)ste++,r[i]={id:Ar("box"+ste),type:"geo",x:i%o*(100+n),y:Math.floor(i/o)*(100+n)};t.run(()=>{t.createShapes(r).setSelectedShapes(r.map(i=>i.id))})}function omt({children:t}){const e=t??w.jsx(Jgt,{});return w.jsxs(y6,{id:"debug",children:[w.jsx(b6,{children:w.jsx(Hn,{type:"icon",title:"Debug menu",children:w.jsx(Dn,{icon:"dots-horizontal"})})}),w.jsx(S6,{side:"top",align:"end",alignOffset:0,children:w.jsx(Gs,{type:"menu",sourceId:"debug-panel",children:e})})]})}const imt=v.memo(function(){const{DebugMenu:e}=Eh(),n=v.useRef(null);return Hd(n),w.jsxs("footer",{ref:n,className:"tlui-debug-panel",children:[w.jsx(amt,{}),w.jsx(lmt,{}),e&&w.jsx(e,{})]})});function smt(t=!0){const[e,n]=v.useState(0),r=Ee();v.useEffect(()=>{if(!t)return;const o=()=>n(i=>i+1);return r.on("tick",o),()=>{r.off("tick",o)}},[r,t])}const amt=Ii(function(){smt();const e=Ee(),n=e.getPath(),r=e.getHoveredShape(),o=e.getOnlySelectedShape(),i=n==="select.idle"||!n.includes("select.")?r:o,s=i&&n.includes("select.")?` / ${i.type||""}${"geo"in i.props?" / "+i.props.geo:""} / [${$.ToInt(e.getPointInShapeSpace(i,e.inputs.currentPagePoint))}]`:"",a=n.startsWith("select.")&&!n.includes(".idle")?` / [${$.ToInt(e.inputs.originPagePoint)}]  [${$.ToInt(e.inputs.currentPagePoint)}] = ${$.Dist(e.inputs.originPagePoint,e.inputs.currentPagePoint).toFixed(0)}`:"";return w.jsx("div",{className:"tlui-debug-panel__current-state",children:`${n}${s}${a}`})});function lmt(){const t=Ee(),e=Ie("show_fps",()=>so.showFps.get(),[so]),n=v.useRef(null);return v.useEffect(()=>{if(!e)return;const r=250;let o=0,i=-1,s=performance.now(),a=0,l=0,c=!1;function u(){if(l++,a=performance.now()-s,a>r){const d=Math.round(l*(r/a)*(1e3/r));d>o&&(o=d);const f=o*.75;(d<f&&!c||d>=f&&c)&&(c=!c),n.current.innerHTML=`FPS ${d.toString()}`,n.current.className="tlui-debug-panel__fps"+(c?" tlui-debug-panel__fps__slow":""),a-=r,l=0,s=performance.now()}i=t.timers.requestAnimationFrame(u)}return u(),()=>{cancelAnimationFrame(i)}},[e,t]),e?w.jsx("div",{ref:n}):null}const cmt=v.memo(function(){const e=_s(),n=Jt(),r=v.useRef(null);Hd(r);const{MainMenu:o,QuickActions:i,ActionsMenu:s,PageMenu:a}=Eh(),l=Ee(),c=Ie("isSinglePageMode",()=>l.options.maxPages<=1,[l]),u=l.options.actionShortcutsLocation==="menu"?!0:l.options.actionShortcutsLocation==="toolbar"?!1:e>=Ro.TABLET;return!o&&!a&&!u?null:w.jsx("nav",{ref:r,className:"tlui-menu-zone",children:w.jsxs("div",{className:"tlui-buttons__horizontal",children:[o&&w.jsx(o,{}),a&&!c&&w.jsx(a,{}),u?w.jsxs(Vo,{className:"tlui-buttons__horizontal",label:n("actions-menu.title"),children:[i&&w.jsx(i,{}),s&&w.jsx(s,{})]}):null]})})});function umt(){const t=Ee(),e=Pg(),[n,r]=v.useState(!1),o=v.useRef(!1);return eh("toggle showback to content",()=>{const i=o.current,s=t.getCurrentPageShapeIds();let a=!1;s.size&&(a=s.size===t.getCulledShapes().size),i!==a&&(r(a),o.current=a)},[t]),n?w.jsx(Ve,{actionId:"back-to-content",onSelect:()=>{e["back-to-content"].onSelect("helper-buttons"),r(!1)}}):null}function dmt(){const t=Ee();return Ie("is pen mode",()=>t.getInstanceState().isPenMode,[t])?w.jsx(Ve,{actionId:"exit-pen-mode"}):null}function fmt(){const t=Ee(),e=Pg();return Ie("is following user",()=>!!t.getInstanceState().followingUserId,[t])?w.jsx(fr,{...e["stop-following"]}):null}function hmt(){return w.jsxs(w.Fragment,{children:[w.jsx(dmt,{}),w.jsx(umt,{}),w.jsx(fmt,{})]})}function pmt({children:t}){const e=t??w.jsx(hmt,{});return w.jsx("div",{className:"tlui-helper-buttons",children:w.jsx(Gs,{type:"helper-buttons",sourceId:"helper-buttons",children:e})})}function gmt(){const t=q2();return w.jsxs(w.Fragment,{children:[w.jsxs(kn,{label:"shortcuts-dialog.tools",id:"tools",children:[w.jsx(Ve,{actionId:"toggle-tool-lock"}),w.jsx(Ve,{actionId:"insert-media"}),w.jsx(ua,{toolId:"select"}),w.jsx(ua,{toolId:"draw"}),w.jsx(ua,{toolId:"eraser"}),w.jsx(ua,{toolId:"hand"}),w.jsx(ua,{toolId:"rectangle"}),w.jsx(ua,{toolId:"ellipse"}),w.jsx(ua,{toolId:"arrow"}),w.jsx(ua,{toolId:"line"}),w.jsx(ua,{toolId:"text"}),w.jsx(ua,{toolId:"frame"}),w.jsx(ua,{toolId:"note"}),w.jsx(ua,{toolId:"laser"}),w.jsx(fr,{id:"pointer-down",label:"tool.pointer-down",kbd:",",onSelect:()=>{}})]}),w.jsxs(kn,{label:"shortcuts-dialog.preferences",id:"preferences",children:[w.jsx(Ve,{actionId:"toggle-dark-mode"}),w.jsx(Ve,{actionId:"toggle-focus-mode"}),w.jsx(Ve,{actionId:"toggle-grid"})]}),w.jsxs(kn,{label:"shortcuts-dialog.edit",id:"edit",children:[w.jsx(Ve,{actionId:"undo"}),w.jsx(Ve,{actionId:"redo"}),w.jsx(Ve,{actionId:"cut"}),w.jsx(Ve,{actionId:"copy"}),w.jsx(Ve,{actionId:"paste"}),w.jsx(Ve,{actionId:"select-all"}),w.jsx(Ve,{actionId:"delete"}),w.jsx(Ve,{actionId:"duplicate"})]}),w.jsxs(kn,{label:"shortcuts-dialog.view",id:"view",children:[w.jsx(Ve,{actionId:"zoom-in"}),w.jsx(Ve,{actionId:"zoom-out"}),w.jsx(Ve,{actionId:"zoom-to-100"}),w.jsx(Ve,{actionId:"zoom-to-fit"}),w.jsx(Ve,{actionId:"zoom-to-selection"})]}),w.jsxs(kn,{label:"shortcuts-dialog.transform",id:"transform",children:[w.jsx(Ve,{actionId:"bring-to-front"}),w.jsx(Ve,{actionId:"bring-forward"}),w.jsx(Ve,{actionId:"send-backward"}),w.jsx(Ve,{actionId:"send-to-back"}),w.jsx(Ve,{actionId:"group"}),w.jsx(Ve,{actionId:"ungroup"}),w.jsx(Ve,{actionId:"flip-horizontal"}),w.jsx(Ve,{actionId:"flip-vertical"}),w.jsx(Ve,{actionId:"align-top"}),w.jsx(Ve,{actionId:"align-center-vertical"}),w.jsx(Ve,{actionId:"align-bottom"}),w.jsx(Ve,{actionId:"align-left"}),w.jsx(Ve,{actionId:"align-center-horizontal"}),w.jsx(Ve,{actionId:"align-right"})]}),w.jsxs(kn,{label:"shortcuts-dialog.text-formatting",id:"text",children:[w.jsx(fr,{id:"text-bold",label:"tool.rich-text-bold",kbd:"cmd+b",onSelect:()=>{}}),w.jsx(fr,{id:"text-italic",label:"tool.rich-text-italic",kbd:"cmd+i",onSelect:()=>{}}),w.jsx(fr,{id:"text-code",label:"tool.rich-text-code",kbd:"cmd+e",onSelect:()=>{}}),w.jsx(fr,{id:"text-highlight",label:"tool.rich-text-highlight",kbd:"cmd+shift+h",onSelect:()=>{}}),w.jsx(fr,{id:"text-strikethrough",label:"tool.rich-text-strikethrough",kbd:"cmd+shift+s",onSelect:()=>{}}),w.jsx(fr,{id:"text-link",label:"tool.rich-text-link",kbd:"cmd+shift+k",onSelect:()=>{}}),w.jsx(fr,{id:"text-header",label:"tool.rich-text-header",kbd:"cmd+shift+[[1-6]]",onSelect:()=>{}}),w.jsx(fr,{id:"text-orderedList",label:"tool.rich-text-orderedList",kbd:"cmd+shift+7",onSelect:()=>{}}),w.jsx(fr,{id:"text-bulletedlist",label:"tool.rich-text-bulletList",kbd:"cmd+shift+8",onSelect:()=>{}})]}),w.jsxs(kn,{label:"shortcuts-dialog.a11y",id:"a11y",children:[w.jsx(fr,{id:"a11y-select-next-shape",label:"a11y.select-shape",kbd:"[[Tab]]",onSelect:()=>{}}),w.jsx(fr,{id:"a11y-select-next-shape-direction",label:"a11y.select-shape-direction",kbd:"cmd+",onSelect:()=>{}}),w.jsx(fr,{id:"a11y-select-next-shape-container",label:"a11y.enter-leave-container",kbd:"cmd+shift+",onSelect:()=>{}}),w.jsx(fr,{id:"a11y-pan-camera",label:"a11y.pan-camera",kbd:"[[Space]]+",onSelect:()=>{}}),w.jsx(fr,{id:"adjust-shape-styles",label:"a11y.adjust-shape-styles",kbd:"$+[[Enter]]",onSelect:()=>{}}),w.jsx(fr,{id:"a11y-move-shape",label:"a11y.move-shape",kbd:"",onSelect:()=>{}}),w.jsx(fr,{id:"a11y-move-shape-faster",label:"a11y.move-shape-faster",kbd:"shift+",onSelect:()=>{}}),w.jsx(Ve,{actionId:"enlarge-shapes"}),w.jsx(Ve,{actionId:"shrink-shapes"}),w.jsx(Ve,{actionId:"a11y-repeat-shape-announce"})]}),t&&w.jsx(kn,{label:"shortcuts-dialog.collaboration",id:"collaboration",children:w.jsx(Ve,{actionId:"open-cursor-chat"})})]})}const mmt=v.memo(function({children:e}){const n=Jt(),r=_s(),o=e??w.jsx(gmt,{});return w.jsxs(w.Fragment,{children:[w.jsxs(U2,{className:"tlui-shortcuts-dialog__header",children:[w.jsx(W2,{children:n("shortcuts-dialog.title")}),w.jsx(V2,{})]}),w.jsx(Rx,{className:he("tlui-shortcuts-dialog__body",{"tlui-shortcuts-dialog__body__mobile":r<=Ro.MOBILE_XS,"tlui-shortcuts-dialog__body__tablet":r<=Ro.TABLET}),children:w.jsx(Gs,{type:"keyboard-shortcuts",sourceId:"kbd",children:o})}),w.jsx("div",{className:"tlui-dialog__scrim"})]})});function hSe(){const t=Gi(),e=ci(),n=Ie("locale",()=>t==null?void 0:t.user.getLocale(),[t]);return t?w.jsx(Pa,{id:"help menu language",label:"menu.language",children:w.jsx(kn,{id:"languages",className:"tlui-language-menu",children:mx.map(({locale:r,label:o})=>w.jsx(G2,{id:`language-${r}`,title:r,label:o,checked:r===n,readonlyOk:!0,onSelect:()=>{t.user.updateUserPreferences({locale:r}),e("change-language",{source:"menu",locale:r})}},r))})}):null}function vmt(){return w.jsxs(w.Fragment,{children:[w.jsx(hSe,{}),w.jsx(pSe,{})]})}function pSe(){const{KeyboardShortcutsDialog:t}=Eh(),{addDialog:e}=Kw(),n=v.useCallback(()=>{t&&e({component:t})},[e,t]);return t?w.jsx(fr,{id:"keyboard-shortcuts-button",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:n}):null}function ymt(){return w.jsxs(w.Fragment,{children:[w.jsxs(kn,{id:"basic",children:[w.jsx(Smt,{}),w.jsx(Emt,{}),w.jsx(bmt,{}),w.jsx(Pmt,{})]}),w.jsx(_mt,{})]})}function bmt(){return w.jsxs(Pa,{id:"export-all-as",label:"context-menu.export-all-as",size:"small",children:[w.jsxs(kn,{id:"export-all-as-group",children:[w.jsx(Ve,{actionId:"export-all-as-svg"}),w.jsx(Ve,{actionId:"export-all-as-png"})]}),w.jsx(kn,{id:"export-all-as-bg",children:w.jsx(Q6,{})})]})}function Smt(){return w.jsxs(Pa,{id:"edit",label:"menu.edit",children:[w.jsx(Cmt,{}),w.jsx(sSe,{}),w.jsx(aSe,{}),w.jsx(xmt,{}),w.jsx(wmt,{}),w.jsx(kn,{id:"select-all",children:w.jsx(lSe,{})})]})}function xmt(){return w.jsxs(kn,{id:"misc",children:[w.jsx(Zbe,{}),w.jsx(Jbe,{}),w.jsx(Ybe,{}),w.jsx(Xbe,{}),w.jsx(eSe,{}),w.jsx(tSe,{}),w.jsx(uSe,{}),w.jsx(cSe,{}),w.jsx(Qbe,{})]})}function wmt(){return w.jsxs(kn,{id:"lock",children:[w.jsx(nSe,{}),w.jsx(Cgt,{})]})}function Cmt(){const t=Gbe(),e=Kbe();return w.jsxs(kn,{id:"undo-redo",children:[w.jsx(Ve,{actionId:"undo",disabled:!t}),w.jsx(Ve,{actionId:"redo",disabled:!e})]})}function Emt(){return w.jsx(Pa,{id:"view",label:"menu.view",children:w.jsxs(kn,{id:"view-actions",children:[w.jsx(Ve,{actionId:"zoom-in"}),w.jsx(Ve,{actionId:"zoom-out"}),w.jsx(rSe,{}),w.jsx(oSe,{}),w.jsx(iSe,{})]})})}function Pmt(){return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"insert-embed"}),w.jsx(Ve,{actionId:"insert-media"})]})}function _mt(){return w.jsxs(kn,{id:"preferences",children:[w.jsxs(Pa,{id:"preferences",label:"menu.preferences",children:[w.jsxs(kn,{id:"preferences-actions",children:[w.jsx(Dgt,{}),w.jsx(jgt,{}),w.jsx(Lgt,{}),w.jsx(Ngt,{}),w.jsx(Fgt,{}),w.jsx(zgt,{}),w.jsx(Bgt,{}),w.jsx(Ugt,{}),w.jsx(Wgt,{}),w.jsx(Hgt,{})]}),w.jsx(kn,{id:"color-scheme",children:w.jsx(dct,{})})]}),w.jsx(hSe,{}),w.jsx(pSe,{})]})}const Imt=v.memo(function({children:e}){const n=Ko(),[r,o]=Wd("main menu"),i=Jt(),s=e??w.jsx(ymt,{});return w.jsxs(Q4,{dir:"ltr",open:r,onOpenChange:o,modal:!1,children:[w.jsx(Z4,{asChild:!0,dir:"ltr",children:w.jsx(Hn,{type:"icon","data-testid":"main-menu.button",title:i("menu.title"),children:w.jsx(Dn,{icon:"menu",small:!0})})}),w.jsx(F2,{container:n,children:w.jsx(J4,{className:"tlui-menu",side:"bottom",align:"start",collisionPadding:4,alignOffset:0,sideOffset:6,children:w.jsx(Gs,{type:"menu",sourceId:"main-menu",children:s})})})]})}),aL={};function Pb(t){if(aL[t])return aL[t];const n=document.createElement("canvas").getContext("2d");n.fillStyle=t,n.fillRect(0,0,1,1);const[r,o,i,s]=n.getImageData(0,0,1,1).data,a=new Float32Array([r/255,o/255,i/255,s/255]);return aL[t]=a,a}const QP=10,gSe=4*6*QP+12+4*12;function Im(t,{center:e,radius:n,numArcSegments:r=20,startAngle:o=0,endAngle:i=Ir,offset:s=0}){const a=(i-o)/r;let l=s;for(let c=o;c<i;c+=a)t[l++]=e.x,t[l++]=e.y,t[l++]=e.x+Math.cos(c)*n,t[l++]=e.y+Math.sin(c)*n,t[l++]=e.x+Math.cos(c+a)*n,t[l++]=e.y+Math.sin(c+a)*n;return t}function Tm(t,e,n,r,o,i){t[e++]=n,t[e++]=r,t[e++]=n,t[e++]=r+i,t[e++]=n+o,t[e++]=r,t[e++]=n+o,t[e++]=r,t[e++]=n,t[e++]=r+i,t[e++]=n+o,t[e++]=r+i}function Tmt(t,e,n){const r=QP;n=Math.min(n,Math.min(e.w,e.h)/2);const o=rt.ExpandBy(e,-n);if(o.w<=0||o.h<=0)return Im(t,{center:e.center,radius:n,numArcSegments:QP*4}),QP*4*6;let i=0;return Tm(t,i,o.minX,o.minY,o.w,o.h),i+=12,Tm(t,i,o.minX,e.minY,o.w,n),i+=12,Tm(t,i,o.maxX,o.minY,n,o.h),i+=12,Tm(t,i,o.minX,o.maxY,o.w,n),i+=12,Tm(t,i,e.minX,o.minY,n,o.h),i+=12,Im(t,{numArcSegments:r,offset:i,center:o.point,radius:n,startAngle:cr,endAngle:cr*1.5}),i+=r*6,Im(t,{numArcSegments:r,offset:i,center:$.Add(o.point,new $(o.w,0)),radius:n,startAngle:cr*1.5,endAngle:Ir}),i+=r*6,Im(t,{numArcSegments:r,offset:i,center:$.Add(o.point,o.size),radius:n,startAngle:0,endAngle:Gr}),i+=r*6,Im(t,{numArcSegments:r,offset:i,center:$.Add(o.point,new $(0,o.h)),radius:n,startAngle:Gr,endAngle:cr}),gSe}function Mmt(t){if(!t)throw new Error("Canvas element not found");const e=t.getContext("webgl2",{premultipliedAlpha:!1});if(!e)throw new Error("Failed to get webgl2 context");const n=`#version 300 es
  precision mediump float;
  
  in vec2 shapeVertexPosition;

	uniform vec4 canvasPageBounds;

	// taken (with thanks) from
	// https://webglfundamentals.org/webgl/lessons/webgl-2d-matrices.html
  void main() {
		// convert the position from pixels to 0.0 to 1.0
		vec2 zeroToOne = (shapeVertexPosition - canvasPageBounds.xy) / canvasPageBounds.zw;
	
		// convert from 0->1 to 0->2
		vec2 zeroToTwo = zeroToOne * 2.0;
	
		// convert from 0->2 to -1->+1 (clipspace)
		vec2 clipSpace = zeroToTwo - 1.0;
	
		gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
  }`,r=e.createShader(e.VERTEX_SHADER);if(!r)throw new Error("Failed to create vertex shader");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Failed to compile vertex shader");const o=`#version 300 es
  precision mediump float;
  
	uniform vec4 fillColor;
  out vec4 outputColor;

  void main() {
	outputColor = fillColor;
  }`,i=e.createShader(e.FRAGMENT_SHADER);if(!i)throw new Error("Failed to create fragment shader");if(e.shaderSource(i,o),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("Failed to compile fragment shader");const s=e.createProgram();if(!s)throw new Error("Failed to create program");if(e.attachShader(s,r),e.attachShader(s,i),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw new Error("Failed to link program");e.useProgram(s);const a=e.getAttribLocation(s,"shapeVertexPosition");if(a<0)throw new Error("Failed to get shapeVertexPosition attribute location");e.enableVertexAttribArray(a);const l=e.getUniformLocation(s,"canvasPageBounds"),c=e.getUniformLocation(s,"fillColor");if(!e.createBuffer())throw new Error("Failed to create buffer");if(!e.createBuffer())throw new Error("Failed to create buffer");return{context:e,selectedShapes:WE(e,1024),unselectedShapes:WE(e,4096),viewport:WE(e,gSe),collaborators:WE(e,1024),prepareTriangles(f,h){e.bindBuffer(e.ARRAY_BUFFER,f.buffer),e.bufferData(e.ARRAY_BUFFER,f.vertices,e.STATIC_DRAW,0,h),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0)},drawTrianglesTransparently(f){e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawArrays(e.TRIANGLES,0,f/2),e.disable(e.BLEND)},drawTriangles(f){e.drawArrays(e.TRIANGLES,0,f/2)},setFillColor(f){e.uniform4fv(c,f)},setCanvasPageBounds(f){e.uniform4fv(l,f)}}}function WE(t,e){const n=t.createBuffer();if(!n)throw new Error("Failed to create buffer");return{buffer:n,vertices:new Float32Array(e)}}function ate(t,e,n){let r=t.vertices.length;for(;r<e+n.length;)r*=2;if(r!=t.vertices.length){const o=new Float32Array(r);o.set(t.vertices),t.vertices=o}t.vertices.set(n,e)}var Omt=Object.create,mSe=Object.defineProperty,Rmt=Object.getOwnPropertyDescriptor,kmt=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),vSe=t=>{throw TypeError(t)},ySe=(t,e,n)=>e in t?mSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Amt=t=>[,,,Omt(null)],bSe=["class","method","getter","setter","accessor","field","value","get","set"],SSe=t=>t!==void 0&&typeof t!="function"?vSe("Function expected"):t,$mt=(t,e,n,r,o)=>({kind:bSe[t],name:e,metadata:r,addInitializer:i=>n._?vSe("Already initialized"):o.push(SSe(i||null))}),Dmt=(t,e)=>ySe(e,kmt("metadata"),t[3]),jmt=(t,e,n,r)=>{for(var o=0,i=t[e>>1],s=i&&i.length;o<s;o++)i[o].call(n);return r},Fu=(t,e,n,r,o,i)=>{for(var s,a,l,c,u=e&7,d=!1,f=!1,h=2,g=bSe[u+5],y=t[h]||(t[h]=[]),m=(o=o.prototype,Rmt(o,n)),S=r.length-1;S>=0;S--)l=$mt(u,n,a={},t[3],y),l.static=d,l.private=f,c=l.access={has:x=>n in x},c.get=x=>x[n],s=(0,r[S])(m[g],l),a._=1,SSe(s)&&(m[g]=s);return m&&mSe(o,n,m),o},od=(t,e,n)=>ySe(t,typeof e!="symbol"?e+"":e,n),xSe,wSe,CSe,ESe,PSe,_Se,ISe,TSe,MSe,OSe,il;OSe=[va],MSe=[He],TSe=[He],ISe=[He],_Se=[He],PSe=[He],ESe=[He],CSe=[He],wSe=[He],xSe=[va];class Gl{constructor(e,n,r){this.editor=e,this.elem=n,this.container=r,jmt(il,5,this),od(this,"disposables",[]),od(this,"gl"),od(this,"shapeGeometryCache"),od(this,"colors"),od(this,"id",br()),od(this,"canvasBoundingClientRect",bo("canvasBoundingClientRect",new rt)),od(this,"originPagePoint",new $),od(this,"originPageCenter",new $),od(this,"isInViewport",!1),this.gl=Mmt(n),this.shapeGeometryCache=e.store.createComputedCache("webgl-geometry",o=>{const i=e.getShapeMaskedPageBounds(o.id);if(!i)return null;const s=new Float32Array(12);return Tm(s,0,i.x,i.y,i.w,i.h),s}),this.colors=this._getColors(),this.disposables.push(this._listenForCanvasResize(),Al("minimap render",this.render))}close(){return this.disposables.forEach(e=>e())}_getColors(){const e=getComputedStyle(this.editor.getContainer());return{shapeFill:Pb(e.getPropertyValue("--color-text-3").trim()),selectFill:Pb(e.getPropertyValue("--color-selected").trim()),viewportFill:Pb(e.getPropertyValue("--color-muted-1").trim()),background:Pb(e.getPropertyValue("--color-low").trim())}}updateColors(){this.colors=this._getColors()}getDpr(){return this.editor.getInstanceState().devicePixelRatio}getContentPageBounds(){const e=this.editor.getViewportPageBounds(),n=this.editor.getCurrentPageBounds();return n?rt.Expand(n,e):e}getContentScreenBounds(){const e=this.getContentPageBounds(),n=this.editor.pageToScreen(e.point),r=this.editor.pageToScreen(new $(e.maxX,e.maxY));return new rt(n.x,n.y,r.x-n.x,r.y-n.y)}_getCanvasBoundingRect(){const{x:e,y:n,width:r,height:o}=this.elem.getBoundingClientRect();return new rt(e,n,r,o)}getCanvasScreenBounds(){return this.canvasBoundingClientRect.get()}_listenForCanvasResize(){const e=new ResizeObserver(()=>{const n=this._getCanvasBoundingRect();this.canvasBoundingClientRect.set(n)});return e.observe(this.elem),e.observe(this.container),()=>e.disconnect()}getCanvasSize(){const e=this.canvasBoundingClientRect.get(),n=this.getDpr();return new $(e.width*n,e.height*n)}getCanvasClientPosition(){return this.canvasBoundingClientRect.get().point}getCanvasPageBounds(){const e=this.getCanvasScreenBounds(),n=this.getContentPageBounds(),r=e.width/e.height;let o=n.width,i=o/r;i<n.height&&(i=n.height,o=i*r);const s=new rt(0,0,o,i);return s.center=n.center,s}getZoom(){return this.getCanvasPageBounds().width/this.getCanvasScreenBounds().width}getCanvasPageBoundsArray(){const{x:e,y:n,w:r,h:o}=this.getCanvasPageBounds();return new Float32Array([e,n,r,o])}getMinimapPagePoint(e,n){const r=this.getCanvasPageBounds(),o=this.getCanvasScreenBounds();let i=e-o.x,s=n-o.y;return i*=r.width/o.width,s*=r.height/o.height,i+=r.minX,s+=r.minY,new $(i,s,1)}minimapScreenPointToPagePoint(e,n,r=!1,o=!1){const{editor:i}=this,s=i.getViewportPageBounds();let{x:a,y:l}=this.getMinimapPagePoint(e,n);if(o){const c=this.editor.getCurrentPageBounds()??new rt,u=c.minX-s.width/2,d=c.maxX+s.width/2,f=c.minY-s.height/2,h=c.maxY+s.height/2,g=Math.max(0,u+s.width-a),y=Math.max(0,-(d-s.width-a)),m=Math.max(0,f+s.height-l),S=Math.max(0,-(h-s.height-l));a+=(g-y)/2,l+=(m-S)/2,a=zr(a,u,d),l=zr(l,f,h)}if(r){const{originPagePoint:c}=this,u=Math.abs(a-c.x),d=Math.abs(l-c.y);u>d?l=c.y:a=c.x}return new $(a,l)}render(){const e=this.gl.context,n=this.getCanvasSize();this.gl.setCanvasPageBounds(this.getCanvasPageBoundsArray()),this.elem.width=n.x,this.elem.height=n.y,e.viewport(0,0,n.x,n.y),e.clearColor(this.colors.background[0],this.colors.background[1],this.colors.background[2],1),e.clear(e.COLOR_BUFFER_BIT);const r=new Set(this.editor.getSelectedShapeIds()),o=this.colors;let i=0,s=0;const a=this.editor.getCurrentPageShapeIdsSorted();for(let l=0,c=a.length;l<c;l++){const u=a[l],d=this.shapeGeometryCache.get(u);if(!d)continue;const f=d.length;r.has(u)?(ate(this.gl.selectedShapes,i,d),i+=f):(ate(this.gl.unselectedShapes,s,d),s+=f)}this.drawShapes(this.gl.unselectedShapes,s,o.shapeFill),this.drawShapes(this.gl.selectedShapes,i,o.selectFill),this.drawViewport(),this.drawCollaborators()}drawShapes(e,n,r){this.gl.prepareTriangles(e,n),this.gl.setFillColor(r),this.gl.drawTriangles(n)}drawViewport(){const e=this.editor.getViewportPageBounds(),n=Tmt(this.gl.viewport.vertices,e,4*this.getZoom());this.gl.prepareTriangles(this.gl.viewport,n),this.gl.setFillColor(this.colors.viewportFill),this.gl.drawTrianglesTransparently(n),vr.isSafari&&(this.gl.drawTrianglesTransparently(n),this.gl.drawTrianglesTransparently(n),this.gl.drawTrianglesTransparently(n))}drawCollaborators(){const e=this.editor.getCollaboratorsOnCurrentPage();if(!e.length)return;const n=20,r=n*6,o=r*e.length;this.gl.collaborators.vertices.length<o&&(this.gl.collaborators.vertices=new Float32Array(o));const i=this.gl.collaborators.vertices;let s=0;const a=this.getZoom();for(const{cursor:l}of e)l&&(Im(i,{center:$.From(l),radius:3*a,offset:s,numArcSegments:n}),s+=r);this.gl.prepareTriangles(this.gl.collaborators,o),s=0;for(const{color:l}of e)this.gl.setFillColor(Pb(l)),this.gl.context.drawArrays(this.gl.context.TRIANGLES,s/2,r/2),s+=r}}il=Amt();Fu(il,1,"close",OSe,Gl);Fu(il,1,"getDpr",MSe,Gl);Fu(il,1,"getContentPageBounds",TSe,Gl);Fu(il,1,"getContentScreenBounds",ISe,Gl);Fu(il,1,"getCanvasSize",_Se,Gl);Fu(il,1,"getCanvasClientPosition",PSe,Gl);Fu(il,1,"getCanvasPageBounds",ESe,Gl);Fu(il,1,"getZoom",CSe,Gl);Fu(il,1,"getCanvasPageBoundsArray",wSe,Gl);Fu(il,1,"render",xSe,Gl);Dmt(il,Gl);function Lmt(){const t=Ee(),e=Ko(),n=Jt(),r=v.useRef(null),o=v.useRef(!1),i=v.useRef();v.useEffect(()=>{try{const d=new Gl(t,r.current,e);return i.current=d,i.current.close}catch(d){t.annotateError(d,{origin:"minimap",willCrashApp:!1}),t.timers.setTimeout(()=>{throw d})}},[t,e]);const s=v.useCallback(d=>{if(!t.getCurrentPageShapeIds().size||!i.current)return;const f=i.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!1),h=i.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!0);i.current.originPagePoint.setTo(h),i.current.originPageCenter.setTo(t.getViewportPageBounds().center),t.centerOnPoint(f,{animation:{duration:t.options.animationMediumMs}})},[t]),a=v.useCallback(d=>{if(!i.current)return;const f=d.currentTarget;if(ww(f,d),!t.getCurrentPageShapeIds().size)return;o.current=!0,i.current.isInViewport=!1;const h=i.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!1),g=t.getViewportPageBounds(),y=i.current.getContentPageBounds();if(new rt(y.x-g.width/2,y.y-g.height/2,y.width+g.width,y.height+g.height).containsPoint(h)&&!g.containsPoint(h)){i.current.isInViewport=g.containsPoint(h);const x=$.Sub(g.center,g.point),C=$.Add(h,x);i.current.originPagePoint.setTo(C),i.current.originPageCenter.setTo(h),t.centerOnPoint(h,{animation:{duration:t.options.animationMediumMs}})}else{const x=i.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,!1,!0);i.current.isInViewport=g.containsPoint(x),i.current.originPagePoint.setTo(x),i.current.originPageCenter.setTo(g.center)}function S(x){f&&Cw(f,x),o.current=!1,document.body.removeEventListener("pointerup",S)}document.body.addEventListener("pointerup",S)},[t]),l=v.useCallback(d=>{if(!i.current)return;const f=i.current.minimapScreenPointToPagePoint(d.clientX,d.clientY,d.shiftKey,!0);if(o.current){if(i.current.isInViewport){const m=i.current.originPagePoint.clone().sub(i.current.originPageCenter);t.centerOnPoint($.Sub(f,m));return}t.centerOnPoint(f)}const h=i.current.getMinimapPagePoint(d.clientX,d.clientY),g=t.pageToScreen(h),y={type:"pointer",target:"canvas",name:"pointer_move",...za(d),point:g,isPen:t.getInstanceState().isPenMode};t.dispatch(y)},[t]),c=v.useCallback(d=>{const f=Xce(d);t.dispatch({type:"wheel",name:"wheel",delta:f,point:new $(d.clientX,d.clientY),shiftKey:d.shiftKey,altKey:d.altKey,ctrlKey:d.metaKey||d.ctrlKey,metaKey:d.metaKey,accelKey:Ui(d)})},[t]),u=Rw();return v.useEffect(()=>{t.timers.setTimeout(()=>{var d,f;(d=i.current)==null||d.updateColors(),(f=i.current)==null||f.render()})},[u,t]),w.jsx("div",{className:"tlui-minimap",children:w.jsx("canvas",{role:"img","aria-label":n("navigation-zone.minimap"),ref:r,className:"tlui-minimap__canvas",onDoubleClick:s,onPointerMove:l,onPointerDown:a,onWheelCapture:c})})}function Nmt(t,e){const[n,r]=ce.useState(e);ce.useLayoutEffect(()=>{const i=H5(t);if(i)try{r(JSON.parse(i))}catch{console.error(`Could not restore value ${t} from local storage.`)}},[t]);const o=ce.useCallback(i=>{r(s=>{const a=typeof i=="function"?i(s):i;return U5(t,JSON.stringify(a)),a})},[t]);return[n,o]}const Fmt=v.memo(function(){const e=Pg(),n=Jt(),r=_s(),o=v.useRef(null);Hd(o);const[i,s]=Nmt("minimap",!0),a=v.useCallback(()=>{s(u=>!u)},[s]),{ZoomMenu:l,Minimap:c}=Eh();return r<Ro.MOBILE?null:w.jsxs("div",{ref:o,className:"tlui-navigation-panel",children:[w.jsx(Vo,{className:"tlui-buttons__horizontal",label:n("navigation-zone.title"),children:l&&r<Ro.TABLET?w.jsx(l,{}):w.jsxs(w.Fragment,{children:[!i&&w.jsx(Si,{type:"icon","data-testid":"minimap.zoom-out",title:`${n(kx(e["zoom-out"].label))} ${h3(e["zoom-out"].kbd)}`,onClick:()=>e["zoom-out"].onSelect("navigation-zone"),children:w.jsx(Dn,{icon:"minus"})}),l&&w.jsx(l,{},"zoom-menu"),!i&&w.jsx(Si,{type:"icon","data-testid":"minimap.zoom-in",title:`${n(kx(e["zoom-in"].label))} ${h3(e["zoom-in"].kbd)}`,onClick:()=>e["zoom-in"].onSelect("navigation-zone"),children:w.jsx(Dn,{icon:"plus"})}),c&&w.jsx(Si,{type:"icon","data-testid":"minimap.toggle-button",title:n("navigation-zone.toggle-minimap"),className:"tlui-navigation-panel__toggle",onClick:a,children:w.jsx(Dn,{icon:i?"chevrons-ne":"chevrons-sw"})})]})}),c&&r>=Ro.TABLET&&!i&&w.jsx(c,{})]})}),zmt=function({name:e,id:n,isCurrentPage:r,onCancel:o,onComplete:i}){const s=Ee(),a=ci(),l=v.useRef(null),c=v.useRef(null),u=v.useCallback(()=>{c.current=s.markHistoryStoppingPoint("rename page")},[s]),d=v.useCallback(h=>{s.renamePage(n,h||"New Page"),a("rename-page",{source:"page-menu"})},[s,n,a]),f=v.useCallback(()=>{c.current&&s.bailToMark(c.current),o()},[s,o]);return w.jsx(qw,{className:"tlui-page-menu__item__input",ref:h=>l.current=h,defaultValue:e,onValueChange:d,onComplete:i,onCancel:f,onFocus:u,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:r,autoSelect:!0})},z3=(t,e,n,r,o)=>{let i;const s=t.getPages(),a=n>r?s[r-1]:s[r],l=n>r?s[r]:s[r+1];a&&!l?i=cu(a.index):!a&&l?i=l9e(s[0].index):i=fx(a.index,l.index),i!==s[n].index&&(t.markHistoryStoppingPoint("moving page"),t.updatePage({id:e,index:i}),o("move-page",{source:"page-menu"}))},lte=Ii(function({index:e,listSize:n,item:r,onRename:o}){const i=Ee(),s=Jt(),a=i.getPages(),l=ci(),c=v.useCallback(()=>{i.markHistoryStoppingPoint("creating page");const h=Bs.createId();i.duplicatePage(r.id,h),l("duplicate-page",{source:"page-menu"})},[i,r,l]),u=v.useCallback(()=>{z3(i,r.id,e,e-1,l)},[i,r,e,l]),d=v.useCallback(()=>{z3(i,r.id,e,e+1,l)},[i,r,e,l]),f=v.useCallback(()=>{i.markHistoryStoppingPoint("deleting page"),i.deletePage(r.id),l("delete-page",{source:"page-menu"})},[i,r,l]);return w.jsxs(y6,{id:`page item submenu ${e}`,children:[w.jsx(b6,{children:w.jsx(Hn,{type:"icon",title:s("page-menu.submenu.title"),children:w.jsx(Dn,{icon:"dots-vertical",small:!0})})}),w.jsx(S6,{alignOffset:0,side:"right",sideOffset:-4,children:w.jsxs(Gs,{type:"menu",sourceId:"page-menu",children:[w.jsxs(kn,{id:"modify",children:[o&&w.jsx(fr,{id:"rename",label:"page-menu.submenu.rename",onSelect:o}),w.jsx(fr,{id:"duplicate",label:"page-menu.submenu.duplicate-page",onSelect:c,disabled:a.length>=i.options.maxPages}),e>0&&w.jsx(fr,{id:"move-up",onSelect:u,label:"page-menu.submenu.move-up"}),e<n-1&&w.jsx(fr,{id:"move-down",label:"page-menu.submenu.move-down",onSelect:d})]}),n>1&&w.jsx(kn,{id:"delete",children:w.jsx(fr,{id:"delete",onSelect:f,label:"page-menu.submenu.delete"})})]})})]})}),Bmt=v.memo(function(){const e=Ee(),n=ci(),r=Jt(),o=_s(),i=v.useCallback(()=>S(!1),[]),[s,a]=Wd("page-menu",i),l=36,c=v.useRef(null),u=Ie("pages",()=>e.getPages(),[e]),d=Ie("currentPage",()=>e.getCurrentPage(),[e]),f=Ie("currentPageId",()=>e.getCurrentPageId(),[e]),h=ol(),g=Ie("maxPageCountReached",()=>e.getPages().length>=e.options.maxPages,[e]),y=Ie("isCoarsePointer",()=>e.getInstanceState().isCoarsePointer,[e]),[m,S]=v.useState(!1),x=v.useCallback(()=>{h||S(k=>!k)},[h]),C=v.useRef({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),[E,P]=v.useState(Object.fromEntries(u.map((k,D)=>[k.id,{y:D*l,offsetY:0,isSelected:!1}])));v.useLayoutEffect(()=>{P(Object.fromEntries(u.map((k,D)=>[k.id,{y:D*l,offsetY:0,isSelected:!1}])))},[l,u]),v.useEffect(()=>{s&&e.timers.requestAnimationFrame(()=>{const k=document.querySelector(`[data-testid="page-menu-item-${f}"]`);if(k){const D=c.current;if(!D)return;const F=k.offsetTop,H=D.scrollTop;F<H&&D.scrollTo({top:F});const U=F+l,B=D.scrollTop+D.offsetHeight;U>B&&D.scrollTo({top:U-D.offsetHeight})}})},[l,f,s,e]);const I=v.useCallback(k=>{const{clientY:D,currentTarget:F}=k,{dataset:{id:H,index:U}}=F;if(!H||!U)return;const B=C.current;ww(k.currentTarget,k),B.status="pointing",B.pointing={id:H,index:+U};const K=E[H].y;B.startY=D,B.startIndex=Math.max(0,Math.min(Math.round(K/l),u.length-1))},[l,u.length,E]),T=v.useCallback(k=>{const D=C.current;if(D.status==="pointing"){const{clientY:F}=k,H=F-D.startY;Math.abs(H)>5&&(D.status="dragging")}if(D.status==="dragging"){const{clientY:F}=k,H=F-D.startY,U=E[D.pointing.id],{startIndex:B,pointing:W}=D,K=U.y+H,q=Math.max(0,Math.min(Math.round(K/l),u.length-1)),X={...E};if(X[W.id]={y:U.y,offsetY:H,isSelected:!0},q!==D.dragIndex){D.dragIndex=q;for(let Z=0;Z<u.length;Z++){const Y=u[Z];if(Y.id===D.pointing.id)continue;let{y:G}=X[Y.id];q===B?G=Z*l:q<B?q<=Z&&Z<B?G=(Z+1)*l:G=Z*l:q>B&&(q>=Z&&Z>B?G=(Z-1)*l:G=Z*l),G!==X[Y.id].y&&(X[Y.id]={y:G,offsetY:0,isSelected:!0})}}P(X)}},[l,u,E]),M=v.useCallback(k=>{const D=C.current;if(D.status==="dragging"){const{id:F,index:H}=D.pointing;z3(e,F,H,D.dragIndex,n)}Cw(k.currentTarget,k),D.status="idle"},[e,n]),R=v.useCallback(k=>{const D=C.current;k.key==="Escape"&&(D.status==="dragging"&&P(Object.fromEntries(u.map((F,H)=>[F.id,{y:H*l,offsetY:0,isSelected:!1}]))),D.status="idle")},[l,u]),A=v.useCallback(()=>{h||(e.run(()=>{e.markHistoryStoppingPoint("creating page");const k=Bs.createId();e.createPage({name:r("page-menu.new-page-initial-name"),id:k}),e.setCurrentPage(k),S(!0)}),n("new-page",{source:"page-menu"}))},[e,r,h,n]),j=v.useCallback(k=>{e.setCurrentPage(k),n("change-page",{source:"page-menu"})},[e,n]),N=v.useCallback((k,D)=>{e.renamePage(k,D),n("rename-page",{source:"page-menu"})},[e,n]);return w.jsxs(lg,{id:"pages",onOpenChange:a,open:s,children:[w.jsx(cg,{"data-testid":"main.page-menu",children:w.jsxs(Hn,{type:"menu",title:d.name,"data-testid":"page-menu.button",className:"tlui-page-menu__trigger",children:[w.jsx("div",{className:"tlui-page-menu__name",children:d.name}),w.jsx(Dn,{icon:"chevron-down",small:!0})]})}),w.jsx(ug,{side:"bottom",align:"start",sideOffset:6,disableEscapeKeyDown:m,children:w.jsxs("div",{className:"tlui-page-menu__wrapper",children:[w.jsxs("div",{className:"tlui-page-menu__header",children:[w.jsx("div",{className:"tlui-page-menu__header__title",children:r("page-menu.title")}),!h&&w.jsxs("div",{className:"tlui-buttons__horizontal",children:[w.jsx(Hn,{type:"icon","data-testid":"page-menu.edit",title:r(m?"page-menu.edit-done":"page-menu.edit-start"),onClick:x,children:w.jsx(Dn,{icon:m?"check":"edit"})}),w.jsx(Hn,{type:"icon","data-testid":"page-menu.create",title:r(g?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:g,onClick:A,children:w.jsx(Dn,{icon:"plus"})})]})]}),w.jsx("div",{"data-testid":"page-menu.list",className:"tlui-page-menu__list tlui-menu__group",style:{height:l*u.length+4},ref:c,children:u.map((k,D)=>{const F=E[k.id]??{offsetY:0};return m?w.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page_menu__item__sortable",style:{zIndex:k.id===d.id?888:D,transform:`translate(0px, ${F.y+F.offsetY}px)`},children:[w.jsx(Hn,{type:"icon",tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",onPointerDown:I,onPointerUp:M,onPointerMove:T,onKeyDown:R,"data-id":k.id,"data-index":D,children:w.jsx(Dn,{icon:"drag-handle-dots"})}),o<Ro.TABLET_SM&&y?w.jsxs(Hn,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>{const H=window.prompt("Rename page",k.name);H&&H!==k.name&&N(k.id,H)},onDoubleClick:x,children:[w.jsx(F3,{checked:k.id===d.id}),w.jsx(Wo,{children:k.name})]}):w.jsx("div",{className:"tlui-page_menu__item__sortable__title",style:{height:l},children:w.jsx(zmt,{id:k.id,name:k.name,isCurrentPage:k.id===d.id,onComplete:()=>{S(!1),e.menus.clearOpenMenus()},onCancel:()=>{S(!1),e.menus.clearOpenMenus()}})}),!h&&w.jsx("div",{className:"tlui-page_menu__item__submenu","data-isediting":m,children:w.jsx(lte,{index:D,item:k,listSize:u.length})})]},k.id+"_editing"):w.jsxs("div",{"data-testid":"page-menu.item",className:"tlui-page-menu__item",children:[w.jsxs(Hn,{type:"normal",className:"tlui-page-menu__item__button",onClick:()=>j(k.id),onDoubleClick:x,title:r("page-menu.go-to-page"),children:[w.jsx(F3,{checked:k.id===d.id}),w.jsx(Wo,{children:k.name})]}),!h&&w.jsx("div",{className:"tlui-page_menu__item__submenu",children:w.jsx(lte,{index:D,item:k,listSize:u.length,onRename:()=>{if(vr.isIos){const H=window.prompt("Rename page",k.name);H&&H!==k.name&&N(k.id,H)}else S(!0),f!==k.id&&j(k.id)}})})]},k.id)})})]})})]})});function Hmt(){const t=Ee(),e=ol(),n=Ie("should display quick actions",()=>t.isInAny("select","hand","zoom"),[t]);if(!(e&&!n))return w.jsxs(w.Fragment,{children:[w.jsx(Wmt,{}),w.jsx(Umt,{})]})}function Umt(){const t=ea(1),e=Vd(),n=t&&e;return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"delete",disabled:!n}),w.jsx(Ve,{actionId:"duplicate",disabled:!n})]})}function Wmt(){const t=Gbe(),e=Kbe();return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"undo",disabled:!t}),w.jsx(Ve,{actionId:"redo",disabled:!e})]})}const Vmt=v.memo(function({children:e}){const n=e??w.jsx(Hmt,{});return w.jsx(Gs,{type:"small-icons",sourceId:"quick-actions",children:n})});function qmt({userId:t}){var n;const e=GM(t);return e?w.jsx("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:e.color},children:((n=e.userName)==null?void 0:n[0])??""},t):null}const Kmt=Ii(function({userId:e}){var c;const n=Ee(),r=Jt(),o=ci(),i=GM(e),s=v.useCallback(()=>{n.getInstanceState().followingUserId===e?(n.stopFollowingUser(),o("stop-following",{source:"people-menu"})):(n.startFollowingUser(e),o("start-following",{source:"people-menu"}))},[n,e,o]),a=(i==null?void 0:i.followingUserId)===n.user.getId(),l=n.getInstanceState().followingUserId===e;return i?w.jsxs("div",{className:"tlui-people-menu__item tlui-buttons__horizontal","data-follow":l||a,children:[w.jsxs(Hn,{type:"menu",className:"tlui-people-menu__item__button",onClick:()=>n.zoomToUser(e),onDoubleClick:s,children:[w.jsx(Dd,{label:r("people-menu.avatar-color"),icon:"color",color:i.color}),w.jsx("div",{className:"tlui-people-menu__name",children:((c=i.userName)==null?void 0:c.trim())||r("people-menu.anonymous-user")})]}),w.jsx(Hn,{type:"icon",className:"tlui-people-menu__item__follow",title:r(a?"people-menu.leading":l?"people-menu.following":"people-menu.follow"),onClick:s,disabled:a,children:w.jsx(Dn,{icon:a?"leading":l?"following":"follow"})})]}):null});function Gmt({count:t}){return w.jsx("div",{className:"tlui-people-menu__more",children:"+"+Math.abs(t)})}const Xmt=Ii(function(){const e=Ee(),n=Ko(),r=Jt(),o=ci(),i=v.useRef(!1),[s,a]=v.useState(!1),l=v.useCallback(y=>{a(y)},[]),c=e.user.getColor(),u=v.useCallback(y=>{e.user.updateUserPreferences({color:y}),o("set-color",{source:"people-menu"})},[e,o]),{handleButtonClick:d,handleButtonPointerDown:f,handleButtonPointerEnter:h,handleButtonPointerUp:g}=ce.useMemo(()=>{const y=()=>{i.current=!1,window.removeEventListener("pointerup",y)};return{handleButtonClick:E=>{const{id:P}=E.currentTarget.dataset;P&&c!==P&&u(P)},handleButtonPointerDown:E=>{const{id:P}=E.currentTarget.dataset;P&&(u(P),i.current=!0,window.addEventListener("pointerup",y))},handleButtonPointerEnter:E=>{if(!i.current)return;const{id:P}=E.currentTarget.dataset;P&&u(P)},handleButtonPointerUp:E=>{const{id:P}=E.currentTarget.dataset;P&&u(P)}}},[c,u]);return w.jsxs(t6,{onOpenChange:l,open:s,children:[w.jsx(n6,{dir:"ltr",asChild:!0,children:w.jsx(Hn,{type:"icon",className:"tlui-people-menu__user__color",style:{color:e.user.getColor()},title:r("people-menu.change-color"),children:w.jsx(Dn,{icon:"color"})})}),w.jsx(r6,{container:n,children:w.jsx(o6,{dir:"ltr",className:"tlui-menu tlui-people-menu__user__color-picker",align:"start",side:"left",sideOffset:8,children:w.jsx("div",{className:"tlui-buttons__grid",children:mF.map(y=>w.jsx(Hn,{type:"icon","data-id":y,"data-testid":y,"aria-label":y,isActive:c===y,title:y,className:"tlui-button-grid__button",style:{color:y},onPointerEnter:h,onPointerDown:f,onPointerUp:g,onClick:d,children:w.jsx(Dn,{icon:"color"})},y))})})})]})});function Ymt(){const t=Ee(),e=ci(),n=Ie("userName",()=>t.user.getName(),[]),r=Jt(),o=v.useRef(n),i=v.useRef(n),[s,a]=v.useState(!1),l=v.useCallback(()=>{a(f=>!f)},[]),c=v.useCallback(f=>{i.current=f,t.user.updateUserPreferences({name:f})},[t]),u=v.useCallback(()=>{o.current!==i.current&&(e("change-user-name",{source:"people-menu"}),o.current=i.current)},[e]),d=v.useCallback(()=>{a(!1),t.user.updateUserPreferences({name:o.current}),t.menus.clearOpenMenus()},[t]);return w.jsxs("div",{className:"tlui-people-menu__user",children:[w.jsx(Xmt,{}),s?w.jsx(qw,{className:"tlui-people-menu__user__input",defaultValue:n,onValueChange:c,onComplete:l,onCancel:d,onBlur:u,shouldManuallyMaintainScrollPositionWhenFocused:!0,autoFocus:!0,autoSelect:!0}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"tlui-people-menu__user__name",onDoubleClick:()=>{s||a(!0)},children:n||r("people-menu.anonymous-user")}),n?null:w.jsx("div",{className:"tlui-people-menu__user__label",children:r("people-menu.user")})]}),w.jsx(Hn,{type:"icon",className:"tlui-people-menu__user__edit","data-testid":"people-menu.change-name",title:r("people-menu.change-name"),onClick:l,children:w.jsx(Dn,{icon:s?"check":"edit"})})]})}function Qmt({children:t}){const e=Jt(),n=Ko(),r=Ee(),o=tue(),i=Ie("user",()=>r.user.getColor(),[r]),s=Ie("user",()=>r.user.getName(),[r]),[a,l]=Wd("people menu");return o.length?w.jsxs(t6,{onOpenChange:l,open:a,children:[w.jsx(n6,{dir:"ltr",asChild:!0,children:w.jsxs("button",{className:"tlui-people-menu__avatars-button",title:e("people-menu.title"),children:[o.length>5&&w.jsx(Gmt,{count:o.length-5}),w.jsxs("div",{className:"tlui-people-menu__avatars",children:[o.slice(-5).map(c=>w.jsx(qmt,{userId:c},c)),o.length>0&&w.jsx("div",{className:"tlui-people-menu__avatar",style:{backgroundColor:i},children:(s==null?void 0:s[0])??""})]})]})}),w.jsx(r6,{container:n,children:w.jsx(o6,{dir:"ltr",className:"tlui-menu",side:"bottom",sideOffset:2,collisionPadding:4,children:w.jsxs("div",{className:"tlui-people-menu__wrapper",children:[w.jsx("div",{className:"tlui-people-menu__section",children:w.jsx(Ymt,{})}),o.length>0&&w.jsx("div",{className:"tlui-people-menu__section",children:o.map(c=>w.jsx(Kmt,{userId:c},c+"_presence"))}),t]})})})]}):null}function Zmt(){return w.jsx("div",{className:"tlui-share-zone",draggable:!1,children:w.jsx(Qmt,{})})}const Jmt=Object.freeze([Us,Qp,Zp,Eu]);function RSe(t=Jmt){const e=Ee();return Ie("getRelevantStyles",()=>{var i;const n=new SF(e.getSharedStyles()),r=!!((i=e.root.getCurrent())!=null&&i.shapeType),o=e.isIn("select")&&e.getSelectedShapeIds().length>0;if(n.size===0&&e.isIn("select")&&e.getSelectedShapeIds().length===0)for(const s of t)n.applyValue(s,e.getStyleForNextShape(s));return r||o||n.size>0?n:null},[e])}const Ba={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],textAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],horizontalAlign:[{value:"start",icon:"horizontal-align-start"},{value:"middle",icon:"horizontal-align-middle"},{value:"end",icon:"horizontal-align-end"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-middle"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"star",icon:"geo-star"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"cloud",icon:"geo-cloud"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"},{value:"heart",icon:"geo-heart"}],arrowKind:[{value:"arc",icon:"arrow-arc"},{value:"elbow",icon:"arrow-elbow"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},xp=v.memo(function(e){const{uiType:n,items:r,title:o,style:i,value:s,onValueChange:a,onHistoryMark:l,theme:c}=e,u=Ee(),d=Jt(),f=_s(),h=v.useRef(!1),g=v.useRef(null),{handleButtonClick:y,handleButtonPointerDown:m,handleButtonPointerEnter:S,handleButtonPointerUp:x}=v.useMemo(()=>{const C=()=>{h.current=!1,window.removeEventListener("pointerup",C);const M=g.current;M&&(["TEXTAREA","INPUT"].includes(M.nodeName)||M.isContentEditable)?M.focus():f>=Ro.TABLET_SM&&u.getContainer().focus(),g.current=null};return{handleButtonClick:M=>{const{id:R}=M.currentTarget.dataset;s.type==="shared"&&s.value===R||(l==null||l("point picker item"),a(i,R))},handleButtonPointerDown:M=>{const{id:R}=M.currentTarget.dataset;l==null||l("point picker item"),a(i,R),h.current=!0,g.current=document.activeElement,window.addEventListener("pointerup",C)},handleButtonPointerEnter:M=>{if(!h.current)return;const{id:R}=M.currentTarget.dataset;a(i,R)},handleButtonPointerUp:M=>{const{id:R}=M.currentTarget.dataset;s.type==="shared"&&s.value===R||a(i,R)}}},[u,f,s,l,a,i]);return w.jsx(yct,{"data-testid":`style.${n}`,type:"single",className:he("tlui-buttons__grid"),children:r.map(C=>{const E=o+"  "+d(`${n}-style.${C.value}`);return w.jsx(bct,{type:"icon","data-id":C.value,"data-testid":`style.${n}.${C.value}`,"aria-label":E,value:C.value,"data-isactive":s.type==="shared"&&s.value===C.value,title:E,className:he("tlui-button-grid__button"),style:i===Us?{color:c[C.value].solid}:void 0,onPointerEnter:S,onPointerDown:m,onPointerUp:x,onClick:y,children:w.jsx(Dn,{icon:C.icon})},C.value)})})}),evt=v.memo(function({onHistoryMark:e,title:n,steps:r,value:o,label:i,onValueChange:s,["data-testid"]:a}){const l=Jt(),[c,u]=v.useState(-1);v.useEffect(()=>{u(0)},[]);const d=v.useCallback(y=>{s(y[0])},[s]),f=v.useCallback(()=>{e("click slider")},[e]),h=v.useCallback(()=>{o&&s(o)},[o,s]),g=v.useCallback(y=>{y.key==="Tab"&&y.stopPropagation()},[]);return w.jsx("div",{className:"tlui-slider__container",children:w.jsxs(Eat,{"data-testid":a,className:"tlui-slider",dir:"ltr",min:0,max:r,step:1,value:o?[o]:void 0,onPointerDown:f,onValueChange:d,onPointerUp:h,onKeyDownCapture:g,onKeyUpCapture:g,title:n+"  "+l(i),children:[w.jsx(Pat,{className:"tlui-slider__track",dir:"ltr",children:o!==null&&w.jsx(_at,{className:"tlui-slider__range",dir:"ltr"})}),o!==null&&w.jsx(Iat,{"aria-label":l("style-panel.opacity"),className:"tlui-slider__thumb",dir:"ltr",tabIndex:c})]})})});function tvt({label:t,uiTypeA:e,uiTypeB:n,labelA:r,labelB:o,itemsA:i,itemsB:s,styleA:a,styleB:l,valueA:c,valueB:u,onValueChange:d}){const f=Ee(),h=Jt(),[g,y]=v.useState(!1),[m,S]=v.useState(!1),x=v.useMemo(()=>{var I;return((I=i.find(T=>c.type==="shared"&&c.value===T.value))==null?void 0:I.icon)??"mixed"},[i,c]),C=v.useMemo(()=>{var I;return((I=s.find(T=>u.type==="shared"&&u.value===T.value))==null?void 0:I.icon)??"mixed"},[s,u]);if(c===void 0&&u===void 0)return null;const E=`style panel ${e} A`,P=`style panel ${n} B`;return w.jsxs("div",{className:"tlui-style-panel__double-select-picker",children:[w.jsx("div",{title:h(t),className:"tlui-style-panel__double-select-picker-label",children:h(t)}),w.jsxs(Vo,{label:h(t),className:"tlui-buttons__horizontal",children:[w.jsxs(lg,{id:E,open:g,onOpenChange:y,children:[w.jsx(cg,{children:w.jsx(Si,{type:"icon","data-testid":`style.${e}`,title:h(r)+"  "+(c===null||c.type==="mixed"?h("style-panel.mixed"):h(`${e}-style.${c.value}`)),children:w.jsx(Dn,{icon:x,small:!0,invertIcon:!0})})}),w.jsx(ug,{side:"left",align:"center",sideOffset:80,alignOffset:0,children:w.jsx(Vo,{label:h(r),className:"tlui-buttons__grid",children:w.jsx(Gs,{type:"icons",sourceId:"style-panel",children:i.map(I=>w.jsx(Si,{"data-testid":`style.${e}.${I.value}`,type:"icon",onClick:()=>{d(a,I.value),Ls.deleteOpenMenu(E,f.contextId),y(!1)},title:`${h(r)}  ${h(`${e}-style.${I.value}`)}`,children:w.jsx(Dn,{icon:I.icon,invertIcon:!0})},I.value))})})})]}),w.jsxs(lg,{id:P,open:m,onOpenChange:S,children:[w.jsx(cg,{children:w.jsx(Si,{type:"icon","data-testid":`style.${n}`,title:h(o)+"  "+(u===null||u.type==="mixed"?h("style-panel.mixed"):h(`${n}-style.${u.value}`)),children:w.jsx(Dn,{icon:C,small:!0})})}),w.jsx(ug,{side:"left",align:"center",sideOffset:116,alignOffset:0,children:w.jsx(Vo,{label:h(o),className:"tlui-buttons__grid",children:w.jsx(Gs,{type:"icons",sourceId:"style-panel",children:s.map(I=>w.jsx(Si,{type:"icon",title:`${h(o)}  ${h(`${n}-style.${I.value}`)}`,"data-testid":`style.${n}.${I.value}`,onClick:()=>{d(l,I.value),Ls.deleteOpenMenu(P,f.contextId),S(!1)},children:w.jsx(Dn,{icon:I.icon})},I.value))})})})]})]})]})}const nvt=v.memo(tvt);function rvt({id:t,label:e,uiType:n,stylePanelType:r,style:o,items:i,type:s,value:a,onValueChange:l}){const c=Jt(),u=Ee(),[d,f]=v.useState(!1),h=v.useMemo(()=>{var x;return(x=i.find(C=>a.type==="shared"&&C.value===a.value))==null?void 0:x.icon},[i,a]),g=c(`style-panel.${r}`),y=a.type==="mixed"?c("style-panel.mixed"):g+"  "+c(`${n}-style.${a.value}`),m=e?c(e):"",S=`style panel ${t}`;return w.jsxs(lg,{id:S,open:d,onOpenChange:f,children:[w.jsx(cg,{children:w.jsxs(Si,{type:s,"data-testid":`style.${n}`,"data-direction":"left",title:y,children:[m&&w.jsx(Wo,{children:m}),w.jsx(Dn,{icon:h??"mixed"})]})}),w.jsx(ug,{side:"left",align:"center",children:w.jsx(Vo,{label:m,className:he("tlui-buttons__grid",`tlui-buttons__${r}`),children:w.jsx(Gs,{type:"icons",sourceId:"style-panel",children:i.map(x=>w.jsx(Si,{type:"icon","data-testid":`style.${n}.${x.value}`,title:g+"  "+c(`${n}-style.${x.value}`),isActive:h===x.icon,onClick:()=>{u.markHistoryStoppingPoint("select style dropdown item"),l(o,x.value),Ls.deleteOpenMenu(S,u.contextId),f(!1)},children:w.jsx(Dn,{icon:x.icon})},x.value))})})})]})}const rO=v.memo(rvt);function ovt({styles:t}){const e=Rw();if(!t)return null;const n=t.get(vc),r=t.get(dI),o=t.get(uI),i=t.get(px),s=t.get(gI),a=t.get(Rd),l=n===void 0,c=r===void 0&&o===void 0,u=s===void 0,d=i===void 0,f=a===void 0,h=zd({isDarkMode:e});return w.jsxs(w.Fragment,{children:[w.jsx(ivt,{theme:h,styles:t}),!f&&w.jsx(svt,{theme:h,styles:t}),!(l&&c&&u&&d)&&w.jsxs("div",{className:"tlui-style-panel__section",children:[w.jsx(avt,{styles:t}),w.jsx(cvt,{styles:t}),w.jsx(uvt,{styles:t}),w.jsx(lvt,{styles:t})]})]})}function fy(){const t=Ee(),e=ci();return ce.useMemo(()=>function(r,o){t.run(()=>{t.isIn("select")&&t.setStyleForSelectedShapes(r,o),t.setStyleForNextShapes(r,o),t.updateInstanceState({isChangingStyle:!0})}),e("set-style",{source:"style-panel",id:r.id,value:o})},[t,e])}function ivt({styles:t,theme:e}){const n=Jt(),r=Ee(),o=v.useCallback(d=>r.markHistoryStoppingPoint(d),[r]),i=fy(),s=t.get(Us),a=t.get(Zp),l=t.get(Qp),c=t.get(Eu),u=a!==void 0||l!==void 0||c!==void 0;return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"tlui-style-panel__section__common","data-testid":"style.panel",children:[s===void 0?null:w.jsx(Vo,{label:n("style-panel.color"),children:w.jsx(xp,{title:n("style-panel.color"),uiType:"color",style:Us,items:Ba.color,value:s,onValueChange:i,theme:e,onHistoryMark:o})}),w.jsx(dvt,{})]}),u&&w.jsxs("div",{className:"tlui-style-panel__section",children:[a===void 0?null:w.jsx(Vo,{label:n("style-panel.fill"),children:w.jsx(xp,{title:n("style-panel.fill"),uiType:"fill",style:Zp,items:Ba.fill,value:a,onValueChange:i,theme:e,onHistoryMark:o})}),l===void 0?null:w.jsx(Vo,{label:n("style-panel.dash"),children:w.jsx(xp,{title:n("style-panel.dash"),uiType:"dash",style:Qp,items:Ba.dash,value:l,onValueChange:i,theme:e,onHistoryMark:o})}),c===void 0?null:w.jsx(Vo,{label:n("style-panel.size"),children:w.jsx(xp,{title:n("style-panel.size"),uiType:"size",style:Eu,items:Ba.size,value:c,onValueChange:(d,f)=>{i(d,f);const h=r.getSelectedShapeIds();h.length>0&&Fr(r,h)},theme:e,onHistoryMark:o})})]})]})}function svt({theme:t,styles:e}){const n=Jt(),r=fy(),o=Ee(),i=v.useCallback(u=>o.markHistoryStoppingPoint(u),[o]),s=e.get(Rd),a=e.get(dF),l=e.get(hI),c=e.get(pI);return s===void 0&&l===void 0?null:w.jsxs("div",{className:"tlui-style-panel__section",children:[s===void 0?null:w.jsx(Vo,{label:n("style-panel.font"),children:w.jsx(xp,{title:n("style-panel.font"),uiType:"font",style:Rd,items:Ba.font,value:s,onValueChange:r,theme:t,onHistoryMark:i})}),a===void 0?null:w.jsxs(Vo,{label:n("style-panel.align"),className:"tlui-style-panel__row",children:[w.jsx(xp,{title:n("style-panel.align"),uiType:"align",style:dF,items:Ba.textAlign,value:a,onValueChange:r,theme:t,onHistoryMark:i}),w.jsx("div",{className:"tlui-style-panel__row__extra-button",children:w.jsx(Si,{type:"icon",title:n("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:w.jsx(Dn,{icon:"vertical-align-middle"})})})]}),l===void 0?null:w.jsxs(Vo,{label:n("style-panel.label-align"),className:"tlui-style-panel__row",children:[w.jsx(xp,{title:n("style-panel.label-align"),uiType:"align",style:hI,items:Ba.horizontalAlign,value:l,onValueChange:r,theme:t,onHistoryMark:i}),w.jsx("div",{className:"tlui-style-panel__row__extra-button",children:c===void 0?w.jsx(Si,{type:"icon",title:n("style-panel.vertical-align"),"data-testid":"vertical-align",disabled:!0,children:w.jsx(Dn,{icon:"vertical-align-middle"})}):w.jsx(rO,{type:"icon",id:"geo-vertical-alignment",uiType:"verticalAlign",stylePanelType:"vertical-align",style:pI,items:Ba.verticalAlign,value:c,onValueChange:r})})]})]})}function avt({styles:t}){const e=Jt(),n=fy(),r=t.get(vc);return r===void 0?null:w.jsx(Vo,{label:e("style-panel.geo"),children:w.jsx(rO,{id:"geo",type:"menu",label:"style-panel.geo",uiType:"geo",stylePanelType:"geo",style:vc,items:Ba.geo,value:r,onValueChange:n})})}function lvt({styles:t}){const e=Jt(),n=fy(),r=t.get(gI);return r===void 0?null:w.jsx(Vo,{label:e("style-panel.spline"),children:w.jsx(rO,{id:"spline",type:"menu",label:"style-panel.spline",uiType:"spline",stylePanelType:"spline",style:gI,items:Ba.spline,value:r,onValueChange:n})})}function cvt({styles:t}){const e=Jt(),n=fy(),r=t.get(px);return r===void 0?null:w.jsx(Vo,{label:e("style-panel.arrow-kind"),children:w.jsx(rO,{id:"arrow-kind",type:"menu",label:"style-panel.arrow-kind",uiType:"arrow-kind",stylePanelType:"arrow-kind",style:px,items:Ba.arrowKind,value:r,onValueChange:n})})}function uvt({styles:t}){const e=fy(),n=t.get(dI),r=t.get(uI);return!n||!r?null:w.jsx(nvt,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:uI,itemsA:Ba.arrowheadStart,valueA:r,uiTypeB:"arrowheadEnd",styleB:dI,itemsB:Ba.arrowheadEnd,valueB:n,onValueChange:e,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"})}const _b=[.1,.25,.5,.75,1];function dvt(){const t=Ee(),e=v.useCallback(a=>t.markHistoryStoppingPoint(a),[t]),n=Ie("opacity",()=>t.getSharedOpacity(),[t]),r=ci(),o=Jt(),i=ce.useCallback(a=>{const l=_b[a];t.run(()=>{t.isIn("select")&&t.setOpacityForSelectedShapes(l),t.setOpacityForNextShapes(l),t.updateInstanceState({isChangingStyle:!0})}),r("set-style",{source:"style-panel",id:"opacity",value:a})},[t,r]);if(n===void 0)return null;const s=n.type==="mixed"?-1:_b.indexOf(Oae(_b,a=>Math.abs(a-n.value)));return w.jsx(evt,{"data-testid":"style.opacity",value:s>=0?s:_b.length-1,label:n.type==="mixed"?"style-panel.mixed":`opacity-style.${n.value}`,onValueChange:i,steps:_b.length-1,title:o("style-panel.opacity"),onHistoryMark:e})}const fvt=v.memo(function({isMobile:e,children:n}){const r=Ee(),o=v.useRef(null);Hd(o);const i=RSe(),s=v.useCallback(()=>{e||r.updateInstanceState({isChangingStyle:!1})},[r,e]),a=n??w.jsx(ovt,{styles:i});return w.jsx("div",{ref:o,className:he("tlui-style-panel",{"tlui-style-panel__wrapper":!e}),"data-ismobile":e,onPointerLeave:s,children:a})}),hvt=ce.forwardRef(function({children:e,className:n,label:r},o){return Hd(o),tQe(o),w.jsx("div",{ref:o,"data-testid":"contextual-toolbar",className:he("tlui-contextual-toolbar",n),onPointerDown:Yr,children:w.jsx(Vo,{className:"tlui-menu tlui-buttons__horizontal",label:r,children:e})})});function pvt({textEditor:t,onEditLinkStart:e}){const n=ci(),r=Jt(),o="rich-text-menu",[i,s]=v.useState(0);return v.useEffect(function(){function c(){s(u=>u+1)}t.on("update",c),t.on("selectionUpdate",c)},[t]),v.useEffect(()=>{function l(c){e&&Ui(c)&&c.shiftKey&&c.key==="k"&&(c.preventDefault(),e())}return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[e]),v.useMemo(()=>{function l(c,u){n("rich-text",{operation:c,source:o}),t.chain().focus()[u]().run()}return[{name:"bold",onSelect(){l("bold","toggleBold")}},{name:"italic",onSelect(){l("bold","toggleItalic")}},{name:"code",onSelect(){l("bold","toggleCode")}},e?{name:"link",onSelect(){e()}}:void 0,{name:"bulletList",onSelect(){l("bulletList","toggleBulletList")}},{name:"highlight",onSelect(){l("bulletList","toggleHighlight")}}].filter(Boolean)},[t,n,e]).map(({name:l,attrs:c,onSelect:u})=>{const d=t.isActive(l,c);return w.jsx(Si,{title:r(`tool.rich-text-${l}`),"data-testid":`rich-text.${l}`,type:"icon",isActive:d,onPointerDown:En,onClick:u,role:"option","aria-pressed":d,children:w.jsx(Dn,{small:!0,icon:l})},l)})}function gvt({textEditor:t,value:e,onComplete:n}){const r=Ee(),[o,i]=v.useState(e),s=Jt(),a=v.useRef(null),l=ci(),c="rich-text-menu",u=o.startsWith("http")?o:`https://${o}`,d=m=>i(m),f=m=>{l("rich-text",{operation:"link-edit",source:c}),!m.startsWith("http://")&&!m.startsWith("https://")&&(m=`https://${m}`),t.commands.setLink({href:m}),r.getInstanceState().isCoarsePointer?t.commands.blur():t.commands.focus(),n()},h=()=>{l("rich-text",{operation:"link-visit",source:c}),window.open(u,"_blank","noopener, noreferrer"),n()},g=()=>{l("rich-text",{operation:"link-remove",source:c}),t.chain().unsetLink().focus().run(),n()},y=()=>n();return v.useEffect(()=>{var m;o||(m=a.current)==null||m.focus()},[o]),v.useEffect(()=>{i(e)},[e]),w.jsxs(w.Fragment,{children:[w.jsx(qw,{ref:a,"data-testid":"rich-text.link-input",className:"tlui-rich-text__toolbar-link-input",value:o,onValueChange:d,onComplete:f,onCancel:y,placeholder:"example.com"}),w.jsx(Hn,{className:"tlui-rich-text__toolbar-link-visit",title:s("tool.rich-text-link-visit"),type:"icon",onPointerDown:En,onClick:h,disabled:!o,children:w.jsx(Dn,{small:!0,icon:"external-link"})}),w.jsx(Hn,{className:"tlui-rich-text__toolbar-link-remove",title:s("tool.rich-text-link-remove"),"data-testid":"rich-text.link-remove",type:"icon",onPointerDown:En,onClick:g,children:w.jsx(Dn,{small:!0,icon:"trash"})})]})}const mvt=150,vvt=16,yvt=16,bvt=8,mf=16,Svt=16**2,xvt=!0,wvt=Ii(function({children:e}){const n=Ee(),r=Ie("textEditor",()=>n.getRichTextEditor(),[n]);return n.getInstanceState().isCoarsePointer||!r?null:w.jsx(Cvt,{textEditor:r,children:e})});function Cvt({textEditor:t,children:e}){const n=Ee(),r=Jt(),o=v.useRef(null),{isVisible:i,isInteractive:s,hide:a,show:l,position:c,move:u}=Ivt(),{isEditingLink:d,onEditLinkStart:f,onEditLinkComplete:h}=Pvt(t),g=bw("force toolbar position update",0);v.useEffect(function(){function P(){g.update(I=>I+1)}return SI.requestAnimationFrame("first forced update",P),t.on("selectionUpdate",P),()=>{t.off("selectionUpdate",P)}},[t,g]),jM("shape change",function(){n.getEditingShape(),g.update(P=>P+1)},[n]);const y=v.useRef(!1),[m,S]=v.useState(!1);eh("toolbar position",function(){const P=o.current;if(!P)return;n.getCamera(),g.get();const I=Evt(n,P);if(!I){y.current&&(y.current=!1,S(!1));return}n.getCameraState()==="moving"?o.current.style.setProperty("transform",`translate(${I.x}px, ${I.y}px)`):u(I.x,I.y),y.current||(y.current=!0,S(!0))},[n,t,g]);const x=Ie("camera state",()=>n.getCameraState(),[n]),C=Tvt(t);return v.useEffect(()=>{if(x==="moving"&&xvt){a(!0);return}if(C||!m){a();return}l()},[m,x,C,l,a]),v.useLayoutEffect(()=>{const E=o.current;E&&(E.dataset.visible=`${i}`)},[i,c]),v.useLayoutEffect(()=>{const E=o.current;E&&E.style.setProperty("transform",`translate(${c.x}px, ${c.y}px)`)},[c]),v.useLayoutEffect(()=>{const E=o.current;E&&(E.dataset.interactive=`${s}`)},[s]),w.jsx(hvt,{ref:o,className:"tlui-rich-text__toolbar","data-interactive":!1,"data-visible":!1,label:r("tool.rich-text-toolbar-title"),children:e||(d?w.jsx(gvt,{textEditor:t,value:t.isActive("link")?t.getAttributes("link").href:"",onComplete:h}):w.jsx(pvt,{textEditor:t,onEditLinkStart:f}))})}function cte(t){return new rt(t.x,t.y,t.width,t.height)}function Evt(t,e){const n=window.getSelection();if(!n||n.rangeCount===0||n.isCollapsed)return;const r=[];for(let d=0;d<n.rangeCount;d++){const f=n.getRangeAt(d);r.push(cte(f.getBoundingClientRect()))}const o=rt.Common(r),i=t.getViewportScreenBounds();if(o.x-=i.x,o.y-=i.y,o.midY<mf||o.midY>i.h-mf||o.midX<mf||o.midX>i.w-mf)return;const s=cte(e.getBoundingClientRect());if(!s.width||!s.height)return;const{scrollLeft:a,scrollTop:l}=t.getContainer();let c=o.midX-s.w/2,u=o.y-s.h-bvt;return c=zr(c,mf,i.w-s.w-mf),u=zr(u,mf,i.h-s.h-mf),c+=a,u+=l,c=Math.round(c),u=Math.round(u),{x:c,y:u}}function Pvt(t){const[e,n]=v.useState(!1);v.useEffect(()=>{if(!t){n(!1);return}const s=()=>{const a=t.isActive("link");n(a)};return t.view.dom.addEventListener("click",s),()=>{t.view.dom.removeEventListener("click",s)}},[t,e]),v.useEffect(()=>{if(t&&t.isActive("link"))try{const{from:s,to:a}=x2(t.state.doc.resolve(t.state.selection.from),t.schema.marks.link);t.state.selection.empty&&t.commands.setTextSelection({from:s,to:a})}catch{}},[t,e]);const r=v.useCallback(()=>{n(!0)},[]),o=v.useCallback(()=>{n(!1)},[]),i=v.useCallback(()=>{if(n(!1),!t)return;const s=t.state.selection.from;t.commands.setTextSelection({from:s,to:s})},[t]);return{isEditingLink:e,onEditLinkStart:r,onEditLinkComplete:i,onEditLinkCancel:o}}function _vt(t,e){return $.Sub(e,t).y**2>=Svt}function Ivt(){const t=Ee(),e=v.useRef({name:"hidden"}),[n,r]=v.useState(!1),[o,i]=v.useState(!1),[s,a]=v.useState({x:-1e3,y:-1e3}),l=v.useRef(new $(-1e3,-1e3)),c=v.useRef(new $(-1e3,-1e3)),u=v.useRef(-1),d=v.useRef(-1),f=v.useCallback((y,m)=>{c.current.x=y,c.current.y=m,!(e.current.name==="hidden"||e.current.name==="showing")&&(clearTimeout(d.current),d.current=t.timers.setTimeout(()=>{if(e.current.name==="shown"&&_vt(c.current,l.current)){const{x:S,y:x}=c.current;l.current=new $(S,x),a({x:S,y:x})}},mvt))},[t]),h=v.useCallback((y=!1)=>{switch(e.current.name){case"showing":{clearTimeout(u.current),e.current={name:"hidden"};break}case"shown":{e.current={name:"hiding"},r(!1),y?(e.current={name:"hidden"},i(!1)):u.current=t.timers.setTimeout(()=>{e.current={name:"hidden"},i(!1)},vvt);break}}},[t]),g=v.useCallback(()=>{switch(e.current.name){case"hidden":{e.current={name:"showing"},u.current=t.timers.setTimeout(()=>{const{x:y,y:m}=c.current;l.current=new $(y,m),a({x:y,y:m}),e.current={name:"shown"},i(!0),r(!0)},yvt);break}case"hiding":{clearTimeout(u.current),e.current={name:"shown"},r(!0),f(c.current.x,c.current.y);break}}},[t,f]);return{isVisible:o,isInteractive:n,show:g,hide:h,move:f,position:s}}function Tvt(t){const[e,n]=v.useState(!1);return v.useEffect(()=>{if(!t)return;const r=MM(({isPointing:l})=>{n(l)},16),o=()=>r({isPointing:!0}),i=()=>r({isPointing:!1}),s=["touchstart","pointerdown","mousedown"],a=["touchend","pointerup","mouseup"];return s.forEach(l=>{t.view.dom.addEventListener(l,o)}),a.forEach(l=>{document.body.addEventListener(l,i)}),()=>{s.forEach(l=>{t.view.dom.removeEventListener(l,o)}),a.forEach(l=>{document.body.removeEventListener(l,i)})}},[t]),e}function Mvt(){const t=Ee(),e=Jt(),n=RSe(),r=n==null?void 0:n.get(Us),o=zd({isDarkMode:t.user.getIsDarkMode()}),i=((r==null?void 0:r.type)==="shared"?o[r.value]:o.black).solid,s=Ie("disable style panel",()=>t.isInAny("hand","zoom","eraser","laser"),[t]),a=v.useCallback(c=>{c||t.updateInstanceState({isChangingStyle:!1})},[t]),{StylePanel:l}=Eh();return l?w.jsxs(lg,{id:"mobile style menu",onOpenChange:a,children:[w.jsx(cg,{children:w.jsx(Hn,{type:"tool","data-testid":"mobile-styles.button",style:{color:s?"var(--color-muted-1)":i},title:e("style-panel.title"),disabled:s,children:w.jsx(Dn,{icon:s?"blob":(r==null?void 0:r.type)==="mixed"?"mixed":"blob"})})}),w.jsx(ug,{side:"top",align:"end",children:l&&w.jsx(l,{isMobile:!0})})]}):null}function Ovt(){return w.jsxs(w.Fragment,{children:[w.jsx(kvt,{}),w.jsx(Avt,{}),w.jsx($vt,{}),w.jsx(Dvt,{}),w.jsx(jvt,{}),w.jsx(Lvt,{}),w.jsx(Nvt,{}),w.jsx(Fvt,{}),w.jsx(zvt,{}),w.jsx(Bvt,{}),w.jsx(Uvt,{}),w.jsx(Hvt,{}),w.jsx(qvt,{}),w.jsx(Xvt,{}),w.jsx(Wvt,{}),w.jsx(Gvt,{}),w.jsx(Kvt,{}),w.jsx(Vvt,{}),w.jsx(Yvt,{}),w.jsx(Qvt,{}),w.jsx(Zvt,{}),w.jsx(Jvt,{}),w.jsx(eyt,{}),w.jsx(tyt,{}),w.jsx(nyt,{}),w.jsx(ryt,{}),w.jsx(iyt,{}),w.jsx(oyt,{})]})}function Rvt(t){var r;const e=Ee(),n=(r=t==null?void 0:t.meta)==null?void 0:r.geo;return Ie("is tool selected",()=>{if(!t)return!1;const o=e.getCurrentToolId();return o==="geo"?n===e.getSharedStyles().getAsKnownValue(vc):o===t.id},[e,t==null?void 0:t.id,n])}function Ur({tool:t}){const e=x6(),n=Rvt(e[t]);return w.jsx(ua,{toolId:t,isSelected:n})}function kvt(){return w.jsx(Ur,{tool:"select"})}function Avt(){return w.jsx(Ur,{tool:"hand"})}function $vt(){return w.jsx(Ur,{tool:"draw"})}function Dvt(){return w.jsx(Ur,{tool:"eraser"})}function jvt(){return w.jsx(Ur,{tool:"arrow"})}function Lvt(){return w.jsx(Ur,{tool:"text"})}function Nvt(){return w.jsx(Ur,{tool:"note"})}function Fvt(){return w.jsx(ua,{toolId:"asset"})}function zvt(){return w.jsx(Ur,{tool:"rectangle"})}function Bvt(){return w.jsx(Ur,{tool:"ellipse"})}function Hvt(){return w.jsx(Ur,{tool:"diamond"})}function Uvt(){return w.jsx(Ur,{tool:"triangle"})}function Wvt(){return w.jsx(Ur,{tool:"rhombus"})}function Vvt(){return w.jsx(Ur,{tool:"heart"})}function qvt(){return w.jsx(Ur,{tool:"hexagon"})}function Kvt(){return w.jsx(Ur,{tool:"cloud"})}function Gvt(){return w.jsx(Ur,{tool:"star"})}function Xvt(){return w.jsx(Ur,{tool:"oval"})}function Yvt(){return w.jsx(Ur,{tool:"x-box"})}function Qvt(){return w.jsx(Ur,{tool:"check-box"})}function Zvt(){return w.jsx(Ur,{tool:"arrow-left"})}function Jvt(){return w.jsx(Ur,{tool:"arrow-up"})}function eyt(){return w.jsx(Ur,{tool:"arrow-down"})}function tyt(){return w.jsx(Ur,{tool:"arrow-right"})}function nyt(){return w.jsx(Ur,{tool:"line"})}function ryt(){return w.jsx(Ur,{tool:"highlight"})}function oyt(){return w.jsx(Ur,{tool:"frame"})}function iyt(){return w.jsx(Ur,{tool:"laser"})}const lL=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function cL(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),n)}function Ib(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on".concat(e),n)}function kSe(t,e){const n=e.slice(0,e.length-1);for(let r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function ASe(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function syt(t,e){const n=t.length>=e.length?t:e,r=t.length>=e.length?e:t;let o=!0;for(let i=0;i<n.length;i++)r.indexOf(n[i])===-1&&(o=!1);return o}const Nx={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":lL?173:189,"=":lL?61:187,";":lL?59:186,"'":222,"[":219,"]":221,"\\":220},Oc={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},eS={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ji={16:!1,18:!1,17:!1,91:!1},xo={};for(let t=1;t<20;t++)Nx["f".concat(t)]=111+t;let io=[],$S=null,$Se="all";const cd=new Map,Xw=t=>Nx[t.toLowerCase()]||Oc[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),ayt=t=>Object.keys(Nx).find(e=>Nx[e]===t),lyt=t=>Object.keys(Oc).find(e=>Oc[e]===t);function DSe(t){$Se=t||"all"}function Fx(){return $Se||"all"}function cyt(){return io.slice(0)}function uyt(){return io.map(t=>ayt(t)||lyt(t)||String.fromCharCode(t))}function dyt(){const t=[];return Object.keys(xo).forEach(e=>{xo[e].forEach(n=>{let{key:r,scope:o,mods:i,shortcut:s}=n;t.push({scope:o,shortcut:s,mods:i,keys:r.split("+").map(a=>Xw(a))})})}),t}function fyt(t){const e=t.target||t.srcElement,{tagName:n}=e;let r=!0;const o=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(o||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function hyt(t){return typeof t=="string"&&(t=Xw(t)),io.indexOf(t)!==-1}function pyt(t,e){let n,r;t||(t=Fx());for(const o in xo)if(Object.prototype.hasOwnProperty.call(xo,o))for(n=xo[o],r=0;r<n.length;)n[r].scope===t?n.splice(r,1).forEach(s=>{let{element:a}=s;return Z6(a)}):r++;Fx()===t&&DSe(e||"all")}function gyt(t){let e=t.keyCode||t.which||t.charCode;const n=io.indexOf(e);if(n>=0&&io.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&io.splice(0,io.length),(e===93||e===224)&&(e=91),e in ji){ji[e]=!1;for(const r in Oc)Oc[r]===e&&(Ol[r]=!1)}}function jSe(t){if(typeof t>"u")Object.keys(xo).forEach(o=>{Array.isArray(xo[o])&&xo[o].forEach(i=>VE(i)),delete xo[o]}),Z6(null);else if(Array.isArray(t))t.forEach(o=>{o.key&&VE(o)});else if(typeof t=="object")t.key&&VE(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];let[o,i]=n;typeof o=="function"&&(i=o,o=""),VE({key:t,scope:o,method:i,splitKey:"+"})}}const VE=t=>{let{key:e,scope:n,method:r,splitKey:o="+"}=t;ASe(e).forEach(s=>{const a=s.split(o),l=a.length,c=a[l-1],u=c==="*"?"*":Xw(c);if(!xo[u])return;n||(n=Fx());const d=l>1?kSe(Oc,a):[],f=[];xo[u]=xo[u].filter(h=>{const y=(r?h.method===r:!0)&&h.scope===n&&syt(h.mods,d);return y&&f.push(h.element),!y}),f.forEach(h=>Z6(h))})};function ute(t,e,n,r){if(e.element!==r)return;let o;if(e.scope===n||e.scope==="all"){o=e.mods.length>0;for(const i in ji)Object.prototype.hasOwnProperty.call(ji,i)&&(!ji[i]&&e.mods.indexOf(+i)>-1||ji[i]&&e.mods.indexOf(+i)===-1)&&(o=!1);(e.mods.length===0&&!ji[16]&&!ji[18]&&!ji[17]&&!ji[91]||o||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(io),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function dte(t,e){const n=xo["*"];let r=t.keyCode||t.which||t.charCode;if(!Ol.filter.call(this,t))return;if((r===93||r===224)&&(r=91),io.indexOf(r)===-1&&r!==229&&io.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(a=>{const l=eS[a];t[a]&&io.indexOf(l)===-1?io.push(l):!t[a]&&io.indexOf(l)>-1?io.splice(io.indexOf(l),1):a==="metaKey"&&t[a]&&(io=io.filter(c=>c in eS||c===r))}),r in ji){ji[r]=!0;for(const a in Oc)if(Object.prototype.hasOwnProperty.call(Oc,a)){const l=eS[Oc[a]];Ol[a]=t[l]}if(!n)return}for(const a in ji)Object.prototype.hasOwnProperty.call(ji,a)&&(ji[a]=t[eS[a]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(io.indexOf(17)===-1&&io.push(17),io.indexOf(18)===-1&&io.push(18),ji[17]=!0,ji[18]=!0);const o=Fx();if(n)for(let a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&ute(t,n[a],o,e);if(!(r in xo))return;const i=xo[r],s=i.length;for(let a=0;a<s;a++)if((t.type==="keydown"&&i[a].keydown||t.type==="keyup"&&i[a].keyup)&&i[a].key){const l=i[a],{splitKey:c}=l,u=l.key.split(c),d=[];for(let f=0;f<u.length;f++)d.push(Xw(u[f]));d.sort().join("")===io.sort().join("")&&ute(t,l,o,e)}}function Ol(t,e,n){io=[];const r=ASe(t);let o=[],i="all",s=document,a=0,l=!1,c=!0,u="+",d=!1,f=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(i=e.scope),e.element&&(s=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(c=e.keydown),e.capture!==void 0&&(d=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(f=!0)),typeof e=="string"&&(i=e),f&&jSe(t,i);a<r.length;a++)t=r[a].split(u),o=[],t.length>1&&(o=kSe(Oc,t)),t=t[t.length-1],t=t==="*"?"*":Xw(t),t in xo||(xo[t]=[]),xo[t].push({keyup:l,keydown:c,scope:i,mods:o,shortcut:r[a],method:n,key:r[a],splitKey:u,element:s});if(typeof s<"u"&&window){if(!cd.has(s)){const h=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return dte(y,s)},g=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;dte(y,s),gyt(y)};cd.set(s,{keydownListener:h,keyupListenr:g,capture:d}),cL(s,"keydown",h,d),cL(s,"keyup",g,d)}if(!$S){const h=()=>{io=[]};$S={listener:h,capture:d},cL(window,"focus",h,d)}}}function myt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(xo).forEach(n=>{xo[n].filter(o=>o.scope===e&&o.shortcut===t).forEach(o=>{o&&o.method&&o.method()})})}function Z6(t){const e=Object.values(xo).flat();if(e.findIndex(r=>{let{element:o}=r;return o===t})<0){const{keydownListener:r,keyupListenr:o,capture:i}=cd.get(t)||{};r&&o&&(Ib(t,"keyup",o,i),Ib(t,"keydown",r,i),cd.delete(t))}if((e.length<=0||cd.size<=0)&&(Object.keys(cd).forEach(o=>{const{keydownListener:i,keyupListenr:s,capture:a}=cd.get(o)||{};i&&s&&(Ib(o,"keyup",s,a),Ib(o,"keydown",i,a),cd.delete(o))}),cd.clear(),Object.keys(xo).forEach(o=>delete xo[o]),$S)){const{listener:o,capture:i}=$S;Ib(window,"focus",o,i),$S=null}}const uL={getPressedKeyString:uyt,setScope:DSe,getScope:Fx,deleteScope:pyt,getPressedKeyCodes:cyt,getAllKeyCodes:dyt,isPressed:hyt,filter:fyt,trigger:myt,unbind:jSe,keyMap:Nx,modifier:Oc,modifierMap:eS};for(const t in uL)Object.prototype.hasOwnProperty.call(uL,t)&&(Ol[t]=uL[t]);if(typeof window<"u"){const t=window.hotkeys;Ol.noConflict=e=>(e&&window.hotkeys===Ol&&(window.hotkeys=t),Ol),window.hotkeys=Ol}const fte=["copy","cut","paste","asset"];function vyt(){const t=Ee(),e=ol(),n=Pg(),r=x6(),o=Ie("is focused",()=>t.getInstanceState().isFocused,[t]);v.useEffect(()=>{if(!o)return;const i=new Array,s=(l,c)=>{Ol(l,{element:document.body},c),i.push(()=>{Ol.unbind(l,c)})},a=(l,c)=>{Ol(l,{element:document.body,keyup:!0,keydown:!1},c),i.push(()=>{Ol.unbind(l,c)})};for(const l of Object.values(n))l.kbd&&(e&&!l.readonlyOk||fte.includes(l.id)||s(hte(l.kbd),c=>{tS(t)||(En(c),l.onSelect("kbd"))}));for(const l of Object.values(r))!l.kbd||!l.readonlyOk&&t.getIsReadonly()||fte.includes(l.id)||s(hte(l.kbd),c=>{tS(t)||(En(c),l.onSelect("kbd"))});return s(",",l=>{if(tS(t)||t.inputs.keys.has("Comma"))return;En(l),t.focus(),t.inputs.keys.add("Comma");const{x:c,y:u,z:d}=t.inputs.currentPagePoint,f=t.pageToScreen({x:c,y:u}),h={type:"pointer",name:"pointer_down",point:{x:f.x,y:f.y,z:d},shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,metaKey:l.metaKey,accelKey:Ui(l),pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(h)}),a(",",l=>{if(tS(t)||!t.inputs.keys.has("Comma"))return;t.inputs.keys.delete("Comma");const{x:c,y:u,z:d}=t.inputs.currentScreenPoint,f={type:"pointer",name:"pointer_up",point:{x:c,y:u,z:d},shiftKey:l.shiftKey,altKey:l.altKey,ctrlKey:l.metaKey||l.ctrlKey,metaKey:l.metaKey,accelKey:Ui(l),pointerId:0,button:0,isPen:t.getInstanceState().isPenMode,target:"canvas"};t.dispatch(f)}),()=>{i.forEach(l=>l())}},[n,r,e,t,o])}function tS(t){return t.menus.hasAnyOpenMenus()||t.getEditingShapeId()!==null||t.getCrashingError()}function hte(t){return yyt(t).map(e=>{let n="";const r=e.includes("!"),o=e.includes("?"),i=e.includes("$"),s=e.replace(/[!?$]/g,"");return r&&o&&i?n=`cmd+shift+alt+${s},ctrl+shift+alt+${s}`:r&&i?n=`cmd+shift+${s},ctrl+shift+${s}`:o&&i?n=`cmd+alt+${s},ctrl+alt+${s}`:o&&r?n=`shift+alt+${s}`:r?n=`shift+${s}`:o?n=`alt+${s}`:i?n=`cmd+${s},ctrl+${s}`:n=s,n}).join(",")}function yyt(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}const byt=v.createContext(!1),Syt={1:0,2:1,3:2,4:3,5:4,6:5,7:6,8:7,9:8,0:9};function xyt({children:t}){const e=Ee(),n=xg(),r=_s(),o=Jt(),i=v.useRef([]),[s,a]=v.useState(!1),l=Math.min(8,5+r),[c,u]=v.useState(0),d=v.useRef(null),[f,h]=v.useState(null),g=v.useMemo(()=>{const S=f?`:not([data-value="${f}"])`:"";return`
			#${n}_main > *:nth-child(n + ${l+(f?1:2)})${S} {
				display: none;
			}
			#${n}_more > *:nth-child(-n + ${l}) {
				display: none;
			}
			#${n}_more > *:nth-child(-n + ${l+4}) {
				margin-top: 0;
			}
        `},[f,n,l]),y=fd(()=>{var E;if(!d.current)return;const S=Array.from(d.current.children);u(S.length),S.findIndex(P=>P.getAttribute("data-value")===f)<=l&&h(null);const C=Array.from(d.current.children).findIndex(P=>P.getAttribute("aria-pressed")==="true");C!==-1&&(C>=l&&h(S[C].getAttribute("data-value")),i.current=Array.from(((E=d.current)==null?void 0:E.children)??[]).filter(P=>!(P instanceof HTMLElement)||P.tagName.toLowerCase()!=="button"?!1:!!(P.offsetWidth||P.offsetHeight)))});v.useLayoutEffect(()=>{y()}),v.useLayoutEffect(()=>{if(!d.current)return;const S=new MutationObserver(y);return S.observe(d.current,{childList:!0,subtree:!0,attributeFilter:["data-value","aria-pressed"]}),()=>{S.disconnect()}},[y]),v.useEffect(()=>{if(!e.options.enableToolbarKeyboardShortcuts)return;function S(x){var E;if(tS(e)||Nce(!0)||x.ctrlKey||x.metaKey||x.altKey||x.shiftKey)return;const C=Syt[x.key];typeof C=="number"&&(En(x),(E=i.current[C])==null||E.click())}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[e]);const m="toolbar overflow";return w.jsxs(w.Fragment,{children:[w.jsx("style",{nonce:e.options.nonce,children:g}),w.jsxs(Vo,{className:he("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":r<Ro.TABLET_SM}),label:o("tool-panel.title"),children:[w.jsx("div",{id:`${n}_main`,ref:d,className:"tlui-toolbar__tools__list",children:w.jsx(Gs,{type:"toolbar",sourceId:"toolbar",children:t})}),c>l+1&&w.jsx(byt.Provider,{value:!0,children:w.jsxs(lg,{id:m,open:s,onOpenChange:a,children:[w.jsx(cg,{children:w.jsx(Si,{title:o("tool-panel.more"),type:"tool",className:"tlui-toolbar__overflow","data-testid":"tools.more-button",children:w.jsx(Dn,{icon:"chevron-up"})})}),w.jsx(ug,{side:"top",align:"center",children:w.jsx(Vo,{className:"tlui-buttons__grid","data-testid":"tools.more-content",label:o("tool-panel.more"),id:`${n}_more`,onClick:()=>{Ls.deleteOpenMenu(m,e.contextId),a(!1)},children:w.jsx(Gs,{type:"toolbar-overflow",sourceId:"toolbar",children:t})})})]})})]})]})}function wyt({activeToolId:t}){const e=Ee(),n=_s(),r=Jt(),o=Ie("is tool locked",()=>e.getInstanceState().isToolLocked,[e]),i=Ie("current tool",()=>e.getCurrentTool(),[e]);return!t||!i.isLockable?null:w.jsx(Hn,{type:"normal",title:r("action.toggle-tool-lock"),"data-testid":"tool-lock",className:he("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":n<Ro.TABLET_SM}),onClick:()=>e.updateInstanceState({isToolLocked:!o}),children:w.jsx(Dn,{icon:o?"lock":"unlock",small:!0})})}const Cyt=v.memo(function({children:e}){const n=Ee(),r=Jt(),o=_s(),i=ol(),s=Ie("current tool id",()=>n.getCurrentToolId(),[n]),a=v.useRef(null);Hd(a);const{ActionsMenu:l,QuickActions:c}=Eh(),u=n.options.actionShortcutsLocation==="menu"?!1:n.options.actionShortcutsLocation==="toolbar"?!0:o<Ro.TABLET;return w.jsx("div",{ref:a,className:"tlui-toolbar",children:w.jsxs("div",{className:"tlui-toolbar__inner",children:[w.jsxs("div",{className:"tlui-toolbar__left",children:[!i&&w.jsxs("div",{className:"tlui-toolbar__extras",children:[u&&w.jsxs(Vo,{className:"tlui-toolbar__extras__controls tlui-buttons__horizontal",label:r("actions-menu.title"),children:[c&&w.jsx(c,{}),l&&w.jsx(l,{})]}),w.jsx(wyt,{activeToolId:s})]}),w.jsx(xyt,{children:e??w.jsx(Ovt,{})})]}),o<Ro.TABLET_SM&&!i&&w.jsx("div",{className:"tlui-toolbar__tools",children:w.jsx(Mvt,{})})]})})});function Eyt(){const t=Jt();return w.jsxs("div",{className:he("tlui-offline-indicator"),children:[t("status.offline"),w.jsx(Dd,{label:t("status.offline"),icon:"status-offline",small:!0})]})}function Pyt({maxWidth:t=420,ignoreRightWidth:e=0,stylePanelWidth:n=148,marginBetweenZones:r=12,squeezeAmount:o=52,children:i}){const s=v.useRef(null),a=_s(),l=v.useCallback(()=>{const c=s.current;if(!c)return;const u=c.parentElement.parentElement,d=u.querySelector(".tlui-layout__top__left"),f=u.querySelector(".tlui-layout__top__right"),h=u.offsetWidth,g=d.offsetWidth,y=f.offsetWidth,m=c.offsetWidth-e;let S=(h-m)/2;h%2!==0&&(S-=.5);const x=g+r,C=c.offsetLeft,E=Math.min(h-y-g-2*r,t),P=Math.max(S,x)-C;f.offsetWidth>n&&a<=6?c.style.setProperty("max-width",E-o+"px"):c.style.setProperty("max-width",E+"px"),c.style.setProperty("transform",`translate(${P}px, 0px)`)},[a,e,r,t,o,n]);return v.useLayoutEffect(()=>{const c=s.current;if(!c)return;const u=c.parentElement.parentElement,d=u.querySelector(".tlui-layout__top__left"),f=u.querySelector(".tlui-layout__top__right"),h=new ResizeObserver(l);return h.observe(d),h.observe(f),h.observe(u),h.observe(c),l(),()=>{h.disconnect()}},[l]),v.useLayoutEffect(()=>{l()}),w.jsx("div",{ref:s,className:"tlui-top-panel__container",children:i})}function _yt(){const t=wlt()==="offline";return w.jsx(Pyt,{children:t&&w.jsx(Eyt,{})})}function Iyt(){return w.jsxs(w.Fragment,{children:[w.jsx(Ve,{actionId:"zoom-in",noClose:!0}),w.jsx(Ve,{actionId:"zoom-out",noClose:!0}),w.jsx(rSe,{}),w.jsx(oSe,{}),w.jsx(iSe,{})]})}const Tyt=v.memo(function({children:e}){const n=Ko(),[r,o]=Wd("zoom menu"),i=e??w.jsx(Iyt,{});return w.jsxs(Q4,{dir:"ltr",open:r,onOpenChange:o,modal:!1,children:[w.jsx(Myt,{}),w.jsx(F2,{container:n,children:w.jsx(J4,{className:"tlui-menu",side:"top",align:"start",alignOffset:0,sideOffset:8,collisionPadding:4,children:w.jsx(Gs,{type:"menu",sourceId:"zoom-menu",children:i})})})]})}),Myt=()=>{const t=Ee(),e=_s(),n=Ie("zoom",()=>t.getZoomLevel(),[t]),r=Jt(),o=v.useCallback(()=>{t.resetZoom(t.getViewportScreenCenter(),{animation:{duration:t.options.animationMediumMs}})},[t]),i=`${Math.floor(n*100)}%`;return w.jsx(Si,{asChild:!0,type:"icon","aria-label":`${r("navigation-zone.zoom")}  ${i}`,title:`${r("navigation-zone.zoom")}  ${i}`,"data-testid":"minimap.zoom-menu-button",className:"tlui-zoom-menu__button",onDoubleClick:o,children:w.jsx(Z4,{dir:"ltr",children:e<Ro.MOBILE?null:w.jsx("span",{style:{flexGrow:0,textAlign:"center"},children:i})})})},LSe=v.createContext(null);function Oyt({overrides:t={},children:e}){const n=ry(t),r=q2();return w.jsx(LSe.Provider,{value:v.useMemo(()=>({ContextMenu:Kgt,ActionsMenu:xgt,HelpMenu:null,ZoomMenu:Tyt,MainMenu:Imt,Minimap:Lmt,StylePanel:fvt,PageMenu:Bmt,NavigationPanel:Fmt,Toolbar:Cyt,RichTextToolbar:wvt,KeyboardShortcutsDialog:mmt,QuickActions:Vmt,HelperButtons:pmt,DebugPanel:imt,DebugMenu:omt,MenuPanel:cmt,SharePanel:r?Zmt:null,CursorChatBubble:r?Ygt:null,TopPanel:r?_yt:null,Dialogs:hct,Toasts:vct,A11y:vnt,...n}),[n,r]),children:e})}function Eh(){const t=v.useContext(LSe);if(!t)throw new Error("useTldrawUiComponents must be used within a TldrawUiComponentsProvider");return t}const NSe=Ii(function({overrides:e,components:n,assetUrls:r,onUiEvent:o,forceMobile:i,mediaMimeTypes:s,children:a}){const l=Gi();return w.jsx(Kye.Provider,{value:s,children:w.jsx(fnt,{assetUrls:ogt(r),children:w.jsx(gnt,{overrides:ect(e),locale:(l==null?void 0:l.user.getLocale())??tu.locale,children:w.jsx(Snt,{onEvent:o,children:w.jsx(_lt,{children:w.jsx(Plt,{context:"tla",children:w.jsx(dnt,{children:w.jsx(Elt,{forceMobile:i,children:w.jsx(Oyt,{overrides:n,children:w.jsx(Ryt,{overrides:e,children:a})})})})})})})})})})});function Ryt({overrides:t,children:e}){const n=tct(t);return w.jsx(rct,{overrides:n.actions,children:w.jsx(Sct,{overrides:n.tools,children:e})})}function kyt(){const t=Ee(),{addToast:e}=Ud();v.useEffect(()=>{function n({name:r,count:o}){e({title:"Maximum Shapes Reached",description:`You've reached the maximum number of shapes allowed on ${r} (${o}). Please delete some shapes or move to a different page to continue.`,severity:"warning"})}return t.addListener("max-shapes",n),()=>{t.removeListener("max-shapes",n)}},[t,e])}const Ayt=ce.memo(function({renderDebugMenuItems:e,children:n,hideUi:r,components:o,...i}){return w.jsx(NSe,{...i,components:o,children:w.jsx($yt,{hideUi:r,renderDebugMenuItems:e,children:n})})}),$yt=ce.memo(function({children:e,hideUi:n,...r}){return w.jsxs(w.Fragment,{children:[e,n?null:w.jsx(Dyt,{...r})]})}),Dyt=ce.memo(function(){const e=Ee(),n=Jt(),r=_s(),o=ol(),i=Ie("focus",()=>e.getInstanceState().isFocusMode,[e]),s=Ie("debug",()=>e.getInstanceState().isDebugMode,[e]),{SharePanel:a,TopPanel:l,MenuPanel:c,StylePanel:u,Toolbar:d,HelpMenu:f,NavigationPanel:h,HelperButtons:g,DebugPanel:y,CursorChatBubble:m,RichTextToolbar:S,Toasts:x,Dialogs:C,A11y:E}=Eh();vyt(),Ult(),kyt();const P=v.useRef(!1),I=v.useRef(-1),[T,M]=v.useState(!1);jM("update hide toolbar while delayed",()=>{if(!(vr.isIos||vr.isAndroid))return;if(e.getEditingShapeId()===null){P.current&&(P.current=!1,clearTimeout(I.current),vr.isAndroid?I.current=e.timers.setTimeout(()=>{M(!1)},150):M(!1));return}P.current||(P.current=!0,clearTimeout(I.current),M(!0))},[]);const{"toggle-focus-mode":R}=Pg();return w.jsxs("div",{className:he("tlui-layout",{"tlui-layout__mobile":r<Ro.TABLET_SM}),"data-iseditinganything":T,"data-breakpoint":r,children:[w.jsx(mnt,{}),i?w.jsx("div",{className:"tlui-layout__top",children:w.jsx(Hn,{type:"icon",className:"tlui-focus-button",title:n("focus-mode.toggle-focus-mode"),onClick:()=>R.onSelect("menu"),children:w.jsx(Dn,{icon:"dot"})})}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"tlui-layout__top",children:[w.jsxs("div",{className:"tlui-layout__top__left",children:[c&&w.jsx(c,{}),g&&w.jsx(g,{})]}),w.jsx("div",{className:"tlui-layout__top__center",children:l&&w.jsx(l,{})}),w.jsxs("div",{className:"tlui-layout__top__right",children:[a&&w.jsx(a,{}),u&&r>=Ro.TABLET_SM&&!o&&w.jsx(u,{})]})]}),w.jsxs("div",{className:"tlui-layout__bottom",children:[w.jsxs("div",{className:"tlui-layout__bottom__main",children:[h&&w.jsx(h,{}),d&&w.jsx(d,{}),f&&w.jsx(f,{})]}),s&&y&&w.jsx(y,{}),E&&w.jsx(E,{})]})]}),S&&w.jsx(S,{}),x&&w.jsx(x,{}),C&&w.jsx(C,{}),w.jsx(egt,{}),m&&w.jsx(m,{})]})}),jyt=()=>{const{Spinner:t}=$r();return w.jsx(NSe,{children:w.jsx(Ahe,{children:t?w.jsx(t,{}):null})})},Lyt=[...Jpt,...Oft];function Nyt(t){const{children:e,maxImageDimension:n,maxAssetSize:r,acceptedImageMimeTypes:o,acceptedVideoMimeTypes:i,onMount:s,components:a={},shapeUtils:l=[],bindingUtils:c=[],tools:u=[],embeds:d,textOptions:f,...h}=t,g=ry(a),y=v.useMemo(()=>({Scribble:iee,ShapeIndicators:Lct,CollaboratorScribble:iee,SelectionForeground:$ct,Handles:xct,Overlays:Ict,Spinner:p3,LoadingScreen:jyt,...g}),[g]),m=If(l),S=v.useMemo(()=>mS("type",m,ibe),[m]),x=If(c),C=v.useMemo(()=>mS("type",x,n0e),[x]),E=If(u),P=v.useMemo(()=>mS("id",Lyt,E),[E]),I=If(o??fw),T=If(i??OM),M=v.useMemo(()=>({addFontsFromNode:b0e,...f,tipTapConfig:{extensions:Gw,...f==null?void 0:f.tipTapConfig}}),[f]),R=v.useMemo(()=>[...I,...T],[I,T]),A=ngt(h.assetUrls);return S.find(N=>N.type==="embed")&&d&&TT.setEmbedDefinitions(d),w.jsx(GYe,{initialState:"select",...h,components:y,shapeUtils:S,bindingUtils:C,tools:P,textOptions:M,assetUrls:A,children:w.jsxs(Ayt,{...h,components:y,mediaMimeTypes:R,children:[w.jsx(Fyt,{maxImageDimension:n,maxAssetSize:r,acceptedImageMimeTypes:I,acceptedVideoMimeTypes:T,onMount:s}),e]})})}function Fyt({maxImageDimension:t,maxAssetSize:e,acceptedImageMimeTypes:n,acceptedVideoMimeTypes:r,onMount:o}){const i=Ee(),s=Ud(),a=Jt();$he(()=>{const u=[];return u.push(Cpt(i)),i.fonts.requestFonts(Wdt),nft(i,{maxImageDimension:t,maxAssetSize:e,acceptedImageMimeTypes:n,acceptedVideoMimeTypes:r,toasts:s,msg:a}),u.push(i.store.props.onMount(i)),u.push(o==null?void 0:o(i)),()=>{u.forEach(d=>d==null?void 0:d())}});const{Canvas:l}=$r(),{ContextMenu:c}=Eh();return c?w.jsx(c,{}):l?w.jsx(l,{}):null}const zyt={tipTapConfig:{extensions:Gw},addFontsFromNode:b0e};v.memo(function(e){const[n,r]=v.useState(null),[o,i]=v.useState(null),s=If(e.shapeUtils??[]),a=v.useMemo(()=>mS("type",s,ibe),[s]),l=If(e.bindingUtils??[]),c=v.useMemo(()=>mS("type",l,n0e),[l]),u=nQe({snapshot:e.snapshot,shapeUtils:a}),{pageId:d,bounds:f,scale:h,pixelRatio:g,background:y,padding:m,darkMode:S,preserveAspectRatio:x,format:C="svg",licenseKey:E,assetUrls:P,textOptions:I=zyt}=e;return v.useLayoutEffect(()=>{if(!o||!u)return;let T=!1;const M=document.createElement("div");o.appendChild(M),o.classList.add("tl-container","tl-theme__light");const R=new Ct({store:u,shapeUtils:a,bindingUtils:c,tools:[],getContainer:()=>M,licenseKey:E,fontAssetUrls:P==null?void 0:P.fonts,textOptions:I});d&&R.setCurrentPage(d);const A=R.getCurrentPageShapeIds();async function j(){const N=await R.toImage([...A],{bounds:f,scale:h,background:y,padding:m,darkMode:S,preserveAspectRatio:x,format:C});if(!N||T)return;const k=URL.createObjectURL(N.blob);r(k),R.dispose()}return j(),()=>{T=!0}},[C,o,u,a,c,d,f,h,y,m,S,x,E,g,P,I]),v.useEffect(()=>()=>{n&&URL.revokeObjectURL(n)},[n]),w.jsx("div",{ref:i,style:{position:"relative",width:"100%",height:"100%"},children:n&&w.jsx("img",{src:n,referrerPolicy:"strict-origin-when-cross-origin",style:{width:"100%",height:"100%"}})})});v.memo(function({children:e}){const n=Jt(),r=_s(),o=v.useRef(null);Hd(o);const i=e??w.jsx(vmt,{});return r<Ro.MOBILE?null:w.jsx("div",{ref:o,className:"tlui-help-menu",children:w.jsxs(y6,{id:"help menu",children:[w.jsx(b6,{children:w.jsx(Hn,{type:"help",title:n("help-menu.title"),"data-testid":"help-menu.button",children:w.jsx(Dn,{icon:"question-mark",small:!0})})}),w.jsx(S6,{side:"top",align:"end",alignOffset:0,sideOffset:8,children:w.jsx(Gs,{type:"menu",sourceId:"help-menu",children:i})})]})})});const Byt=Kn({schemaVersion:bs(1),storeVersion:vP,recordVersions:lI(On,Kn({version:vP,subTypeVersions:lI(On,vP).optional(),subTypeKey:On.optional()}))}),Hyt=Kn({schemaVersion:bs(2),sequences:lI(On,vP)});Kn({tldrawFileFormatVersion:bUe,schema:SUe("schemaVersion",{1:Byt,2:Hyt}),records:yi(Kn({id:On,typeName:On}).allowUnknownProperties())});fh("tldraw","3.13.1","esm");const Uyt=({role:t,onEditorMount:e})=>{const n=t==="viewer";return w.jsx("div",{style:{height:"100vh"},children:w.jsx("div",{className:"tldraw__editor",style:{height:"100%"},children:w.jsx(Nyt,{onMount:r=>{n&&r.updateInstanceState({isReadonly:!0}),e(r)}})})})},Wyt=()=>{const{id:t}=Qwe(),e=Ep(a=>a.user.nickname),n=sw(),{data:r,refetch:o,isLoading:i,isError:s}=h6e({id:t,nickname:e},{skip:!t||!e});return v.useEffect(()=>{r!=null&&r.slides&&n(fHe(r.slides))},[r==null?void 0:r.slides,n]),{id:t,nickname:e,presentation:r,refetch:o,isLoading:i,isError:s}},B3=vze({reducer:{[Vm.reducerPath]:Vm.reducer,user:Dze,slides:pHe},middleware:t=>t().concat(Vm.middleware)});let FSe=null;const Vyt=t=>{FSe=t},qyt=()=>FSe,Kyt=()=>{const[t,e]=v.useState([]),n=sw();return v.useEffect(()=>(Kr.connect(),Kr.on("connect",()=>console.log("Connected")),Kr.on("disconnect",()=>console.log("Disconnected")),Kr.on("connect_error",r=>console.error("Socket error:",r)),Kr.on("user_joined",({users:r})=>e(r)),Kr.on("role_changed",({socketId:r,newRole:o})=>{e(i=>i.map(s=>s.socketId===r?{...s,role:o}:s))}),Kr.on("slide_added",({slide:r})=>{n(hHe(r))}),Kr.on("slide_removed",({slideId:r})=>{n(Iae(r))}),Kr.on("slide_updated",({slideId:r,content:o})=>{const i=B3.getState(),s=i.slides.slides.find(l=>l.id===r),a=i.slides.currentSlideIndex;if(B3.dispatch(pP({id:r,content:o})),(s==null?void 0:s.slideIndex)===a){const l=qyt();l&&(o!=null&&o.store)&&(o!=null&&o.schema)&&l.store.loadSnapshot(o)}}),()=>{Kr.off("connect"),Kr.off("disconnect"),Kr.off("connect_error"),Kr.off("user_joined"),Kr.off("role_changed"),Kr.off("slide_added"),Kr.off("slide_removed"),Kr.off("slide_updated"),Kr.disconnect()}),[]),{usersInRoom:t}},Gyt=({presentation:t,nickname:e})=>{var r;const n=(r=t==null?void 0:t.roles.find(o=>o.userNickname.toLowerCase()===(e==null?void 0:e.toLowerCase())))==null?void 0:r.role;return v.useEffect(()=>{t&&e&&n&&iHe(Kr,{presentationId:t.id,nickname:e,role:n})},[t,e,n]),n};function Xyt(t,e){const[n,r]=v.useState({});return v.useEffect(()=>{const o=i=>{r(s=>({...s,[i.socketId]:{nickname:i.nickname,x:i.x,y:i.y}}))};return t.on("cursor_update",o),()=>{t.off("cursor_update",o)}},[t]),v.useEffect(()=>{r(o=>{const i=new Set(e.map(a=>a.socketId));return Object.fromEntries(Object.entries(o).filter(([a])=>i.has(a)))})},[e]),n}const Yyt=({nickname:t,usersInRoom:e})=>{const n=v.useCallback($5(o=>{t&&sHe(Kr,o.clientX,o.clientY)},50),[t]),r=Xyt(Kr,e);return{onMouseMove:n,remoteCursors:r}},Qyt="_slidesContainer_1nffg_1",Zyt="_drawTools_1nffg_5",Jyt="_presentationTitle_1nffg_14",dL={slidesContainer:Qyt,drawTools:Zyt,presentationTitle:Jyt},e0t=()=>{const{nickname:t,presentation:e,refetch:n,isLoading:r,isError:o}=Wyt(),i=v.useRef(null),{usersInRoom:s}=Kyt(),a=Gyt({presentation:e,nickname:t}),l=a==="creator",{onMouseMove:c,remoteCursors:u}=Yyt({nickname:t,usersInRoom:s});return v.useEffect(()=>()=>{uHe()},[]),r?w.jsx("div",{children:"Loading..."}):o||!e?w.jsx("div",{children:"Error loading presentation"}):w.jsxs("div",{onMouseMove:c,style:{display:"flex",position:"relative"},children:[w.jsx("div",{className:dL.slidesContainer,children:w.jsx(SHe,{presentationId:e.id,onSlideAdded:n,owner:l,getCurrentEditor:()=>i.current})}),w.jsxs("div",{className:dL.drawTools,children:[w.jsx("div",{className:dL.presentationTitle,children:w.jsx("h3",{children:e.title})}),w.jsx(Uyt,{role:a,onEditorMount:d=>{i.current=d,Vyt(d)}})]}),w.jsx(wHe,{presentationId:e.id,usersInRoom:s}),Object.entries(u).map(([d,f])=>w.jsx(xHe,{...f},d))]})},t0t=()=>{const t=sw();return v.useEffect(()=>{const e=localStorage.getItem("nickname");e&&t(Tse(e))},[]),null};var n0t=ce.createContext({createConnection:()=>{},getConnection:()=>{},registerSharedListener:()=>()=>{}}),r0t=n0t,o0t=function({children:t}){const e=v.useRef({}),n=v.useRef({}),r=v.useRef({}),o=(a,l,c={})=>{a in e.current?e.current[a]+=1:e.current[a]=1;const u=()=>{if(--e.current[a]===0){const y=Object.keys(r.current).filter(m=>m.includes(a));for(const m of y)r.current[m].socket.disconnect(),r.current[m].subscribers.clear(),delete r.current[m]}};if(r.current[a])return r.current[a].socket.connect(),{cleanup:u,...r.current[a]};const d=()=>{r.current[a].state.status="connected",r.current[a].notify("connected")},f=()=>{r.current[a].state.status="disconnected",r.current[a].notify("disconnected")},h=gS(l.source,c);h.namespaceKey=a,r.current=Object.assign({},r.current,{[a]:{socket:h,state:{status:"disconnected",lastMessage:{},error:null},notify:y=>{r.current[a].subscribers.forEach(m=>m(r.current[a].state,y))},subscribers:new Set,subscribe:y=>(r.current[a].subscribers.add(y),()=>{var m;return(m=r.current[a])==null?void 0:m.subscribers.delete(y)})}});const g=y=>{r.current[a].state.error=y,r.current[a].notify("error")};return h.on("error",g),h.on("connect_error",g),h.on("connect",d),h.on("disconnect",f),{cleanup:u,...r.current[a]}},i=(a="")=>r.current[a],s=(a="",l="")=>{r.current[a]&&!r.current[a].socket.hasListeners(l)&&r.current[a].socket.on(l,d=>{r.current[a].state.lastMessage[l]=d,r.current[a].notify("message")});const c=`${a}${l}`,u=()=>{--n.current[c]===0&&(delete n.current[c],r.current[a]&&delete r.current[a].state.lastMessage[l])};return c in n.current?n.current[c]+=1:n.current[c]=1,()=>u()};return ce.createElement(r0t.Provider,{value:{createConnection:o,getConnection:i,registerSharedListener:s}},t)},i0t=o0t;function s0t(t,e,n){return n={path:e,exports:{},require:function(r,o){return a0t(r,o??n.path)}},t(n,n.exports),n.exports}function a0t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}s0t(function(t){t.exports=e;function e(r){if(r)return n(r)}function n(r){for(var o in e.prototype)r[o]=e.prototype[o];return r}e.prototype.on=e.prototype.addEventListener=function(r,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(o),this},e.prototype.once=function(r,o){function i(){this.off(r,i),o.apply(this,arguments)}return i.fn=o,this.on(r,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(r,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+r];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,a=0;a<i.length;a++)if(s=i[a],s===o||s.fn===o){i.splice(a,1);break}return i.length===0&&delete this._callbacks["$"+r],this},e.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),i=this._callbacks["$"+r],s=1;s<arguments.length;s++)o[s-1]=arguments[s];if(i){i=i.slice(0);for(var s=0,a=i.length;s<a;++s)i[s].apply(this,o)}return this},e.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},e.prototype.hasListeners=function(r){return!!this.listeners(r).length}});function l0t(){return w.jsxs(w.Fragment,{children:[w.jsx(t0t,{}),w.jsx(i0t,{children:w.jsxs(f1e,{children:[w.jsx(qE,{path:"/",element:w.jsx(l6e,{})}),w.jsx(qE,{path:"/presentations",element:w.jsx(o8e,{})}),w.jsx(qE,{path:"/presentations/:id",element:w.jsx(e0t,{})})]})})]})}yte.createRoot(document.getElementById("root")).render(w.jsx(v.StrictMode,{children:w.jsx(k3e,{store:B3,children:w.jsx(j1e,{basename:"/presentation-app/",children:w.jsx(l0t,{})})})}));
